[
  {
    "id": 1,
    "text": "Жанры: приключения, подземелье, хардкор, Звёздные Войны<s>r\nАвтор: elChem (Артём Стрельников)<s>r\n<s>r\n   Таинственный древний храм в далёкой звёздной системе окутан тьмой. Именно здесь главному герою предстоит выдержать своё последнее испытание, чтобы доказать, что он готов стать настоящим рыцарем-джедаем.<s>r\n   Хватит ли у него сил справиться со своим прошлым и не потерять себя? Сможет ли он осторожно расплести клубок противоречий и загадок или разрубит его, не считаясь с участью других? Теперь это зависит только от вашего выбора.<s>r\n   Итак, давным-давно, в далёкой-далёкой галактике...<s>r\n   ____<s>r\n\n   В квест вносятся исправления, рекомендуется обновить его с помощью соответствующего пункта в боковом меню перед прохождением.\n\n   Текущая версия квеста: 0.897 (от 01.09.2025)",
    "answers": [
      {
        "contentList": [
          "https://i.ibb.co/4phV0gv/image.png https://i.ibb.co/PjcpNHd/image.png https://i.ibb.co/WpfxznQ/image.png https://i.ibb.co/CzQW0LM/image.png https://i.ibb.co/vhmDQb8/image-8599747-17262429.png",
          "intro"
        ],
        "super_calculate": true,
        "lua_do": "function lua_do()\ng.blockSaves = 0\ng.difficulty = g.difficulty or 1\ng.formatText = 1\n\n-- перенести генерацию рандомных элементов со старта квеста на первый запуск самого элемента (код на сейфе, ещё что-то?) --\n\ng.partsAvailable = g.partsAvailable or g.isAuthor == 1 and 2 or 1\ng.noDownload = 1\n\ng.technical = g.technical or {}\ng.technical.back = 1\n\ng.reloadFunctions = 868\n\nend",
        "calculate": false,
        "text": ">> service answer",
        "id": 1
      },
      {
        "lua_if": "function lua_if()\ng.partsAvailable = g.partsAvailable or 1\nreturn g.partsAvailable == 1\nend",
        "middle_answer": true,
        "lua_do": "function lua_do()\ng.side_menu = 198\ng.side_menu = g.isAuthor == 1 and 104 or 198\ng.right_icon = \"https://shaba-games.ru/elChem/Ispytaniye/Images/right_menu.png\"\nalphaTest = g.alphaTest == 1 and 1 or 0\n\ng.instantDownload = 1\nend",
        "text": "Начать",
        "id": 2,
        "var_set": [
          "global autorun after",
          197
        ]
      },
      {
        "lua_if": "function lua_if()\ng.partsAvailable  = g.partsAvailable or 1\nreturn g.partsAvailable  == 2\nend",
        "id": 876,
        "lua_do": "function lua_do()\ng.side_menu = 198\ng.side_menu = g.isAuthor == 1 and 104 or 198\ng.right_icon = \"https://shaba-games.ru/elChem/Ispytaniye/Images/right_menu.png\"\nalphaTest = g.alphaTest == 1 and 1 or 0\ng.instantDownload = 1\nend",
        "text": "Начать",
        "middle_answer": true,
        "var_set": [
          "global autorun after",
          197
        ]
      },
      {
        "id": 1,
        "text": "system",
        "canEditCover": true,
        "system": true
      },
      {
        "id": 104,
        "text": "Служебный вход",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\ng.side_menu = g.isAuthor and 104 or 198\nend"
      },
      {
        "id": 631,
        "text": "Переход к головоломке",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend"
      },
      {
        "right_answer": false,
        "left_answer": true,
        "lua_do": "function lua_do()\ng.side_menu = 198\ng.technical = g.technical or {}\ng.technical.back = 1\nend",
        "id": 911,
        "text": "Эпилоги",
        "middle_answer": false,
        "var_set": [
          "global autorun after",
          197
        ]
      },
      {
        "right_answer": true,
        "middle_answer": false,
        "lua_do": "function lua_do()\ng.side_menu = 198\ng.technical = g.technical or {}\ng.technical.back = 1\nend",
        "text": "Достижения",
        "id": 6,
        "var_set": [
          "global autorun after",
          197
        ]
      },
      {
        "id": 193,
        "text": "От автора",
        "middle_answer": true
      },
      {
        "answerIcon": [
          "https://i.ibb.co/3sMmdBL/VK-Logo.png"
        ],
        "text": "Группа автора ВК ",
        "middle_answer": true,
        "url": "https://vk.com/elchem_group",
        "id": 1,
        "no_transition": true
      },
      {
        "id": 761,
        "text": "Переход постранично  -- лучше не нажимать",
        "lua_if": "function lua_if()\nreturn false\nend"
      }
    ]
  },
  {
    "id": 2,
    "text": "   Небольшой космический корабль вышел из гиперпространства возле крупной звёздной системы. Перед взором экипажа открылся умиротворяющий вид необитаемой системы: вокруг голубого карлика обращались несколько планет, среди которых был огромный газовый гигант, сопровождаемый десятком достаточно крупных спутников.<s>r\n   Звездолёт вышел на орбиту планеты, а затем взял курс на самую маленькую из лун.<s>r\n",
    "answers": [
      {
        "id": 3,
        "text": "Дальше",
        "lua_do": "function lua_do()\n--g.blockSaves = g.isAuthor ~= 1 and 1 or 0\ng.side_menu = g.side_menu or (g.isAuthor == 1 and 104) or 198\n--g.achievements.difficultySet = 0\npanel3 = 1\nend"
      },
      {
        "var_not": [
          "sup294",
          1
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "run": [
          294
        ],
        "need": [
          1000
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn false -- отключение сложности в тестовой версии\nend",
        "super_calculate": false,
        "lua_do": "function lua_do()\n  g.achievements = g.achievements or {}\n  g.achievements.difficultySet = g.achievements.difficultySet or 0\n    if g.achievements.difficultySet == 0 then\ndialog({header = \"Выберите уровень сложности\",\ntext = \"На низком уровне сложности можно пользоваться закладками, но получение достижений заблокировано. На высокой сложности закладки недоступны, но возможно получение достижений.<s>\nПоменять уровень сложности можно в любой момент через правое боковое меню.\",\nanswers = {{text = \"Низкая сложность\",\npressListener = function()\ng.difficulty = 0\nachBlock = 1\nshowPage {id = g.current_id, transition = \"instant\"}\nhideDialog() end},\n{text = \"Высокая сложность\",\npressListener = function()\ng.difficulty = 1\nachBlock = 0\nshowPage {id = g.current_id, transition = \"instant\"}\nhideDialog() end}}})\n    end\ng.achievements.difficultySet = 1\nend\n",
        "calculate": true,
        "text": "Уведомление",
        "id": 2
      },
      {
        "need_ever": true,
        "lua_do": "function lua_do()\ng.side_menu = g.side_menu or (g.isAuthor == 1 and 104) or 198\n--g.achievements.difficultySet = 0\npanel3 = 1\nend",
        "text": "[Пропустить вступление]",
        "need": [
          9
        ],
        "id": 9
      }
    ]
  },
  {
    "id": 3,
    "text": "   На мостике корабля находились двое. Человек средних лет в форме флота Республики располагался за приборами и управлял судном. Второй, одетый в невзрачную робу грубого покроя, сидел с закрытыми глазами прямо на металлическом полу и медитировал. Он выглядел немолодо, седина уже блестела серебром на его волосах и в короткой аккуратной бороде. Лицо человека выглядело спокойным и сосредоточенным. Прямо перед ним неподвижно завис в воздухе небольшой продолговатый предмет, похожий на рукоять клинка.<s>r\n   Внезапно человек открыл глаза, поднялся с пола, быстрым движением подхватив световой меч, и убрал его на пояс. Через секунду бесшумно отворилась дверь и внутрь влетел совсем молодой парнишка.<s>r\n– Я ощущаю в тебе сильное беспокойство, Орнас, – тихо обратился седовласый джедай к вошедшему до того, как тот успел что-либо сказать. – Что тебя встревожило?<s>r\n– Я не уверен, учитель, – нерешительно ответил юноша. – Я почувствовал что-то, пока медитировал. Волнение в Силе. Что-то важное...",
    "answers": [
      {
        "id": 4,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 4,
    "text": "   Некоторое время наставник молчал, немного вздёрнув подбородок и задумчиво разглаживая пальцами бородку. Затем откуда-то появился крохотный металлический диск и через секунду над ладонью старого мастера возникла объёмная голографическая карта, испещрённая разноцветными надписями и фигурами. Орнас впервые видел вживую таинственный \"список\", о котором в Ордене джедаев ходили самые невероятные слухи. Учитель мягко коснулся одной из звёзд на карте, и цвет ближайшей отметки изменился.<s>r\n– Мы почти прибыли, –  тихо проговорил джедай, неопределённо кивнув не то в сторону голограммы, не то на широкий иллюминатор. – В этом месте тёмная сторона Силы чрезвычайно мощна, твоё беспокойство вызвано ей. Но это не всё. Пока ты был занят, я беседовал с Советом. Все магистры наконец согласились с тем, что ты готов пройти испытания и стать рыцарем-джедаем.<s>r\n– Сразу после миссии? – взволнованно спросил юноша. – Или мы возвращаемся в академию на Корусант прямо сейчас?<s>r\n– Мы не возвращаемся, – сдержанно ответил учитель. – Пока нет. Я чувствую, что в этом задании ты смог бы показать всё то, чему так упорно учился. Я убедил Совет засчитать тебе выполнение этой миссии в качестве испытаний.",
    "answers": [
      {
        "id": 5,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 5,
    "text": "   Орнас хотел что-то сказать, но только беззвучно приоткрыл рот. Юноша не знал, готов ли он к испытанию, но чувствовал облегчение. Облегчение из-за того, что никто этого не увидит, никто не будет ехидно обсуждать каждый его шаг. И никто, кроме самого Орнаса, не может пострадать. Эти мысли придали уверенности, и он наконец смог заговорить.<s>r\n– Значит, мне придется действовать одному, без Вашей помощи?<s>r\n– Именно так, – строго подтвердил наставник. – Надеюсь, что помощь тебе и не понадобится. Я обучал тебя долгие годы и уверен, что ты справишься. Но действовать нужно на высшем уровне, я вмешаюсь лишь в крайнем случае. Будь добр, сделай так, чтобы этого не потребовалось.<s>r\n– Я не подведу Вас, учитель, – серьёзно заявил Орнас, стараясь подавить накатившую слабость и сжимая кулаки.",
    "answers": [
      {
        "id": 7,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 6,
    "text": "   Здесь собраны достижения и «антидостижения», полученные Вами во время прохождений.\n   ",
    "answers": [
      {
        "id": 6,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ng.partsAvailable  = g.partsAvailable or 1\nlocal text =\ng.partsAvailable == 1 and\n \"Открыто \" .. g.achievementsNum .. [=[ из 18 доступных в текущей версии квеста достижений и ]=] .. g.antiAchievementsNum .. [=[ из 13 <s>ufeff«антидостижений».\n\n]=] or \n\n\"Открыто \" .. g.achievementsNum .. [=[ из 28 доступных в текущей версии квеста достижений и ]=] .. g.antiAchievementsNum .. [=[ из 23 <s>ufeff«антидостижений».\n\n]=] \nreturn text\nend",
        "merge": true
      },
      {
        "id": 6,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\ng.achievements = g.achievements or {}\ng.achievements.fullRevers = g.achievements.fullRevers or 0\ng.achievements.volitionalEffort = g.achievements.volitionalEffort or 0\ng.achievements.masterTech = g.achievements.masterTech or 0\ng.achievements.masterWord = g.achievements.masterWord or 0\ng.achievements.researcher = g.achievements.researcher or 0\ng.achievements.detective1 = g.achievements.detective1 or 0\ng.achievements.detective = g.achievements.detective or 0\ng.achievements.detective3 = g.achievements.detective3 or 0\ng.achievements.diplomat1 = g.achievements.diplomat1 or 0\ng.achievements.diplomat2 = g.achievements.diplomat2 or 0\ng.achievements.diplomat3 = g.achievements.diplomat3 or 0\ng.achievements.diplomat4 = g.achievements.diplomat4 or 0\ng.achievements.brain = g.achievements.brain or 0\ng.achievements.warrior1 = g.achievements.warrior1 or 0\ng.achievements.warrior2 = g.achievements.warrior2 or 0\ng.achievements.tactic = g.achievements.tactic or 0\ng.achievements.student = g.achievements.student or 0\ng.achievements.warrior3 = g.achievements.warrior3 or 0\n\ng.achievements.closeSolution = g.achievements.closeSolution or 0\ng.achievements.warrior4 = g.achievements.warrior4 or 0\ng.achievements.computing = g.achievements.computing or 0\ng.achievements.diplomat5 = g.achievements.diplomat5 or 0\ng.achievements.absolutePower = g.achievements.absolutePower or 0 g.achievements.sapper =\ng.achievements.sapper or 0\ng.achievements.littleDetail = g.achievements.littleDetail or 0\ng.achievements.discoverer = g.achievements.discoverer or 0\ng.achievements.smthMore = g.achievements.smthMore or 0\ng.achievements.secondChance = g.achievements.secondChance or 0\n\n\ng.achievements.rush = g.achievements.rush or 0\ng.achievements.simpleWay = g.achievements.simpleWay or 0\ng.achievements.tooTough = g.achievements.tooTough or 0\ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0\ng.achievements.clumsyBurglar = g.achievements.clumsyBurglar or 0\ng.achievements.diploProblem1 = g.achievements.diploProblem1 or 0\ng.achievements.diploProblem2 = g.achievements.diploProblem2 or 0\ng.achievements.diploProblem3 = g.achievements.diploProblem3 or 0\ng.achievements.rashDecision1 = g.achievements.rashDecision1 or 0\ng.achievements.rashDecision2 = g.achievements.rashDecision2 or 0\ng.achievements.rashDecision3 = g.achievements.rashDecision3 or 0\ng.achievements.rashDecision4 = g.achievements.rashDecision4 or 0\ng.achievements.lostHimself = g.achievements.lostHimself or 0\ng.achievements.noAch = g.achievements.noAch or 1\ng.achievements.noAntiAch = g.achievements.noAntiAch or 1\n\ng.achievements.tooTough2 = g.achievements.tooTough2 or 0\ng.achievements.badFeeling = g.achievements.badFeeling or 0\ng.achievements.smnElseWill = g.achievements.smnElseWill or 0\ng.achievements.diploProblem6 = g.achievements.diploProblem6 or 0\ng.achievements.diploProblem5 = g.achievements.diploProblem5 or 0\ng.achievements.diploProblem4 = g.achievements.diploProblem4 or 0\ng.achievements.diploProblem7 = g.achievements.diploProblem7 or 0\ng.achievements.amulet =\ng.achievements.amulet or 0\ng.achievements.rashDecision5 = g.achievements.rashDecision5 or 0\n\nlocal text = \"     Достижения:<s>\n<s>\n\"\n\ntext = text .. (g.achievements.fullRevers == 1 and \"★ Полная обратимость: Орнасу удалось привести дверь в крайнее верхнее положение, а затем вернуть к исходному. Зачем, кстати?<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.volitionalEffort == 1 and \n\"★ Волевое усилие: Орнасу удалось одолеть змею, даже получив три парализующих укуса<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.masterTech == 1 and \n\"★ Мастер техники: Орнасу удалось успешно установить дополнительную микросхему при ремонте TL-3<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.masterWord == 1 and \n\"★ Мастер слова: Орнасу удалось добиться максимально возможного расположения Десвиар<s>\n<s>\n\" or \"\") -- (надо рассчитать, dess.trust ~ 17)\n\ntext = text .. (g.achievements.researcher == 1 and  \n\"★ Кропотливый исследователь 1: Орнас осмотрел всё, что только можно было осмотреть<s>\n<s>\n\" or \"\") -- (планету, храм снаружи, дверь, внимательный осмотр всех комнат, спускался вниз в центре)\n\ntext = text .. (g.achievements.discoverer == 1 and \n\"★ Кропотливый исследователь 2: Орнас смог разгадать загадку перед дверью на втором этаже<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.detective1 == 1 and  \n\"★ Детектив 1: Орнас смог отыскать безопасный вход в храм<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.detective == 1 and \n\"★ Детектив 2: Орнас смог догадаться о прошлом Десс лишь по косвенным признакам<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.detective3 == 1 and \n\"★ Детектив 3: Орнас сумел разгадать загадку энергоблоков<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diplomat1 == 1 and \n\"★ Умелый дипломат 1: Орнас смог произвести впечатление на TL-3 и тот решил присоединиться к юноше<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diplomat2 == 1 and \n\"★ Умелый дипломат 2: Орнас смог произвести впечатление на TL-3 и тот помог найти один из ключей<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diplomat3 == 1 and \n\"★ Умелый дипломат 3: Орнас смог узнать у TL-3 правду об их взаимоотношениях с Десвиар<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diplomat4 == 1 and \n\"★ Умелый дипломат 4: Учитель Орнаса, Десвиар и TL-3 решили присоединиться к юноше одновременно<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diplomat5 == 1 and\n\"★ Умелый дипломат 5: Орнасу удалось сплотить разношёрстную команду спутников, разрешить все их конфликты и сохранить доверительные отношения со всеми<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.brain == 1 and \n\"★ Острый ум: Орнас справился с механизмом в центральном зале<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.warrior1 == 1 and \n\"★ Умелый воин 1: Орнас смог одолеть в бою могучего терентатека<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.warrior2 == 1 and \n\"★ Умелый воин 2: Орнас смог одолеть в бою могучего терентатека, ослабленный травмами руки и ноги<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.warrior3 == 1 and \n\"★ Умелый воин 3: Орнас смог одолеть в бою могучего терентатека, не допустив разрушения ни одной из колонн<s>\n<s>\n\" or \"\") -- 31\n\ntext = text .. (g.achievements.warrior4 == 1 and \n\"★ Умелый воин 4: Орнас сумел одолеть в сражении хитрого НК-63<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.tactic == 1 and \n\"★ Расчётливый тактик: Орнас смог одолеть терентатека выстрелом корабельных орудий<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.student == 1 and \n\"★ Лучший ученик: Орнас прошёл весь первый этаж храма, не дав учителю повода вмешаться<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.closeSolution == 1 and \n\"★ На пороге разгадки: Орнас и TL-3 сумели получить информацию, которая может пролить свет на расследование Магистра Льерсо<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.sapper == 1 and \n\"★ Через минное поле: Орнас полностью исследовал зал с ловушками на втором этаже<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.smthMore == 1 and \n\"★ Что-то большее: Орнас почувствовал, что недосказанность между ним и Десс может скрывать нечто большее<s>\n<s>\n\" or \"\")\n\n\ntext = text .. (g.achievements.littleDetail == 1 and \n\"★ Маленькая деталь: Одна дополнительная микросхема помогла TL-3 спасти Орнаса и выжить самому<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.absolutePower == 1 and \n\"★ Абсолютная власть: Орнас использовал свою способность вызывать молнии, чтобы расправиться со всеми, кто вызвал его гнев<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.computing == 1 and \n\"★ Простые алгоритмы: Орнас справился со всеми заданиями при взломе базы данных в центре управления на втором этаже<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.secondChance == 1 and \n\"★ Второй шанс: найденные наручи спасли Орнаса от неминуемого поражения<s>\n<s>\n\" or \"\")\n\n\ntext = text .. (g.achievements.noAch == 1 and \"• Пока что не открыто ни одного достижения<s>\n<s>\n\" or \"\")\n\n\n\ntext = text .. \"     «Антидостижения»:<s>\n<s>\n\"\ntext = text .. (g.achievements.rush == 1 and \"☆ Неуместная спешка: Орнас попытался пролезть под незакреплённой плитой и чуть не погиб<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.simpleWay == 1 and \"☆ Простой путь: Орнас попытался одолеть змею с помощью светового меча и чуть не погиб<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.tooTough == 1 and \"☆ Не по зубам: Орнас проиграл схватку с терентатеком в своём видении<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.tooTough2 == 1 and \"☆ Не по зубам 2: Орнас не смог одолеть в бою НК-63<s>\n<s>\n\" or \"\")\n\n\ntext = text .. (g.achievements.aboutMechanics == 1 and \"☆ Дело техники: Орнас не смог закончить ремонт TL-3<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.clumsyBurglar == 1 and \"☆ Неумелый взломщик: Орнас потерпел неудачу при попытке вскрыть оружейный сейф световым мечом<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.diploProblem1 == 1 and \"☆ Проблемы дипломатии 1: Орнас спровоцировал агрессию девушки одним своим видом<s>\n<s>\n\" or \"\") -- (надеть контрольный браслет или взять шлем перед первым разговором с Десс и спровоцировать этим её агрессию)\ntext = text .. (g.achievements.diploProblem2 == 1 and \"☆ Проблемы дипломатии 2: Орнас спровоцировал агрессию девушки своими словами<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.diploProblem3 == 1 and \"☆ Проблемы дипломатии 3: Орнас не смог предотвратить уничтожение TL-3<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diploProblem4 == 1 and \"☆ Проблемы дипломатии 4: На пути через второй этаж Орнас потерял TL-3<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diploProblem5 == 1 and \"☆ Проблемы дипломатии 5: На пути через второй этаж Орнас потерял Десвиар<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diploProblem6 == 1 and \"☆ Проблемы дипломатии 6: Поведение  Орнаса на втором этаже привело к тому, что Десвиар предала его<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.diploProblem7 == 1 and \"☆ Проблемы дипломатии 7: Поведение Орнаса привело к тому, что учитель открыто выразил ему своё недоверие<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.rashDecision1 == 1 and \"☆ Необдуманное решение 1: Орнас уничтожил дроида-секретаря, но так и не обнаружил в нём ключ и не сумел открыть большой сейф<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.rashDecision2 == 1 and \"☆ Необдуманное решение 2: Какое-то из действий Орнаса привело к уничтожению важной подсказки, без которой он не смог открыть маленький сейф<s>\n<s>\n\" or \"\") -- (контрольный браслет в комнате с неизвестными существами плазменной гранатой и не суметь открыть сейф)\ntext = text .. (g.achievements.rashDecision3 == 1 and \"☆ Необдуманное решение 3: Выстрел корабельных орудий привёл к уничтожению важных подсказок и Орнас не сумел разгадать загадку механизма в центральном зале<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.rashDecision4 == 1 and \"☆ Необдуманное решение 4: Орнас отказался от награды в потайной комнате, но когда передумал, то оказалось слишком поздно<s>\n<s>\n\" or \"\")\ntext = text .. (g.achievements.lostHimself == 1 and \"☆ Потерять себя:  Орнас забыл всё, что делало его самим собой и отличало от остальных джедаев<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.rashDecision5 == 1 and \"☆ Необдуманное решение 5: Орнас допустил ошибку и заблокировал путь через зал с ловушками на втором этаже<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.amulet == 1 and \"☆ Амулет: TL-3 принёс себя в жертву, чтобы спасти Орнаса<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.smnElseWill == 1 and \"☆ Чужая воля: Десс освободилась от власти Орнаса<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.badFeeling == 1 and \"☆ Плохое предчувствие: Орнас подошёл к сражению с НК-63 в худшем из возможных состояний<s>\n<s>\n\" or \"\")\n\n\ng.achievements.loosedChance = g.achievements.loosedChance or 0\ntext = text .. (g.achievements.loosedChance == 1 and \"☆ Плохое предчувствие: Орнас подоУпущенный шанс: наручи не спасли Орнаса, когда он допустил ещё одну ошибку<s>\n<s>\n\" or \"\")\n\ntext = text .. (g.achievements.noAntiAch == 1 and \"• Пока что не открыто ни одного «антидостижения»\" or \"\")\n\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 6,
        "calculate": true,
        "text": "Достижения (только на харде) и антидостижения (всегда):\n\n★ Полная обратимость: Орнасу удалось привести дверь в крайнее положение, а затем вернуть к исходному положению. Зачем, кстати?\n★ Мастер меча: одолеть всех противников световым мечом (охранные дроиды, животные в комнате справа, терентатек без использования гранат и корабельной пушки, НК и его помощники без использования гранат)\n★ Мастер-джедай: использовать Силу в каждом бою (со змеёй, с охранными дроидами, с существами, с терентатеком, с НК и его помощниками, в финальном сражении)\n★ Мастер теней: избегать прямого сражения там, где это возможно (победить змею, не спускаясь вниз, не сражаться с охранными дроидами, не сражаться с существами, уничтожить терентатека выстрелом из корабельной пушки, не сражаться с НК самому)\n★ Мастер техники: успешно установить дополнительную микросхему при ремонте TL-3.\n★ Мастер слова: добиться максимально возможного расположения Десс. (надо рассчитать, dess.trust ~ 17)\n★ Форма 0: пройти квест ни разу не активировав световой меч.\n★ Кропотливый исследователь: осмотреть входную дверь и обнаружить проход наверху, провести \"внимательный осмотр\" всех помещений.\n★ Абсолютная власть: уничтожить всех противников (кроме терентатека) при помощи молний Силы.\n★ Путь разрушения: уничтожить всех противников и все разрушаемые объекты (змея, охранные дроиды, животные в комнате справа, терентатек, НК и его помощники, корабль, 2 колонны в центральном зале, комната справа, комната на втором этаже).\n★ Волевое усилие: одолеть змею, получив два парализующих укуса\n★ Вознаграждённое упорство: разгадать загадку на втором этаже и получить усиление.\n★ Острый ум: Орнас справился с механизмом в центральном зале\n★ Умелый дипломат 1: Орнас смог произвести впечатление на TL-3 и тот решил присоединиться к юноше.\n★ Умелый дипломат 2: Орнас смог произвести впечатление на TL-3 и тот рассказал о расположении ключа\n★ Умелый дипломат 3: Орнас смог произвести впечатление на TL-3 и тот помог ему лучше понять Десвиар.\n★ Умелый воин 1: Орнас смог одолеть в бою могучего терентатека.\n★ Умелый воин 2: Орнас смог одолеть в бою могучего терентатека, ослабленный травмами руки и ноги.\n★ Расчётливый тактик: Орнас смог одолеть терентатека выстрелом корабельных орудий\n★ Детектив 1: Орнас смог догадаться о прошлом Десс лишь по косвенным признакам.\n★ Детектив 2: Орнас сумел разгадать загадку энергоблоков \n★ Лучший ученик: Орнас прошёл весь первый этаж храма, не дав учителю повода вмешаться.\n\n∆ Неуместная спешка: попытаться пролезть под  незакреплённой плитой и чуть не погибнуть.\n∆ Простой путь: попытаться одолеть змею с помощью светового меча и чуть не погибнуть.\n∆ Не по зубам 1: проиграть схватку с терентатеком.\n∆ Не по зубам 2: проиграть схватку с НК и его помощниками.\n∆ Не по зубам 3: проиграть финальную схватку.\n∆ Дело техники: допустить критическую ошибку при ремонте TL-3.\n∆ Неумелый взломщик: потерпеть неудачу при попытке вскрыть оружейный сейф световым мечом.\n∆ Проблемы дипломатии 1: надеть контрольный браслет или взять шлем перед первым разговором с Десс и спровоцировать этим её агрессию.\n∆ Проблемы дипломатии 2: во время разговора с Десс довести её до агрессии.\n∆ Проблемы дипломатии 3: допустить встречу Десс с TL-3 и его уничтожение (после лестницы).\n∆ Проблемы дипломатии 4: добиться недостаточно высокого доверия Десс и оказаться преданным ею в финальной схватке.\n∆ Необдуманное решение 1: уничтожить дроида- секретаря и не суметь открыть сейф.\n∆ Необдуманное решение 2: уничтожить контрольный браслет в комнате с неизвестными существами плазменной гранатой и не суметь открыть сейф.\n∆ Необдуманное решение 3: уничтожить колонны выстрелом корабельных орудий и не суметь разгадать загадку в центральном зале.\n∆ Необдуманное решение 4: отказаться от награды в тайной комнате и передумать.\n∆ Необдуманное решение 5: не разгадать загадку на втором этаже и получить все возможные штрафы.\n"
      },
      {
        "lua_text": "function lua_text()\nlocal text = g.technical.back == 1 and \"На первую страницу\" or \"[Вернуться к прохождению]\"\nreturn text\nend",
        "middle_answer": true,
        "lua_do": "function lua_do()\nshowPage{id = g.technical.back}\nend",
        "text": "[Вернуться в квест]",
        "id": 104,
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 6,
        "text": "Проверка достижений",
        "lua_do": "function lua_do()\nfunction tab_unpack(a)\nb = \"\" \n  for k, v in pairs(a) do   \n    b = b .. k .. \": \" .. v .. \"<s>\n\"\n  end \nreturn b\nend\n\na_supVar = tab_unpack(g.achievements)\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\ng.achievements.alarm = 1\nend",
        "text": "Пробное достижение (1)",
        "id": 6,
        "comment": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 6,
        "text": "Пробное антидостижение (1)",
        "comment": false,
        "lua_do": "function lua_do()\ng.achievements.alarm = -30\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 6,
        "text": "Пробное достижение (2)",
        "comment": false,
        "lua_do": "function lua_do()\ng.achievements.warrior1 = 0\ng.achievements.lostHimself = 0\nlocal a = math.random(1,2)\nif a == 1 then \n  newAchieve(\"warrior1\", 1)\nelse\n  newAchieve(\"lostHimself\", -1)\nend\nend"
      }
    ]
  },
  {
    "id": 7,
    "text": "   Наставник ничего не ответил на это. Он отключил и спрятал карту, а затем подошёл к пилоту и стал наблюдать, как корабль медленно скользит к спутнику. Орнас тоже следил за полётом, но мысли его были заняты совсем другим, и отвлечься никак не получалось.<s>r\n   Крейсер вошёл в атмосферу и начал снижаться. Учитель закрыл глаза и сосредоточился на чём-то, затем склонился над пилотом и начал корректировать курс.<s>r\n   Поверхность приближалась.",
    "answers": [
      {
        "id": 8,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 8,
    "text": "   Корабль мягко приземлился на красную каменистую поверхность луны недалеко от массивного строения из такого же красного камня. Эта странная ступенчатая пирамида была единственным объектом во всём обозримом пространстве.<s>r\n   В кабину зашёл помощник пилота и сообщил, что атмосфера спутника и гравитационные параметры в норме. Услышав это, Орнас вопросительно посмотрел на учителя. Тот кивнул, и джедаи, накинув коричневые плащи, направились к трапу.",
    "answers": [
      {
        "id": 9,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 9,
    "text": "   Орнас спустился на скалистую поверхность вслед за наставником.<s>r\n   Совсем рядом над пологой местностью возвышалась пирамида. Красная, как и всё вокруг. Давящая. Неправильная. Орнас почувствовал, что мощная энергия тёмной стороны Силы таится внутри этого здания. Он невольно вздрогнул.<s>r\n   Учитель быстрым шагом направился к строению и остановился перед  внушительной каменной лестницей, ведущей к массивной арке двери.",
    "answers": [
      {
        "id": 12,
        "text": "Догнать учителя",
        "lua_do": "function lua_do()\n--g.blockSaves = 1\nend"
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 3\nend",
        "lua_do": "function lua_do()\n--g.blockSaves = 1\nachievements = achievements or {}\nif not isHistoryContain(10) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Осмотреть поверхность",
        "need": -10,
        "id": 10
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 3\nend",
        "lua_do": "function lua_do()\n--g.blockSaves = 1\n\nachievements = achievements or {}\nif not isHistoryContain(11) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\n\nend",
        "text": "Осмотреть сооружение",
        "need": -11,
        "id": 11
      },
      {
        "need_ever": true,
        "need_sometimes": false,
        "id": 9,
        "text": "Добавить всплывающую строку с предложением сохраниться",
        "need": [
          -10,
          -11,
          -12
        ],
        "lua_if": "function lua_if()\nreturn false\nend",
        "super_calculate": false,
        "calculate": true,
        "lua_do": "function lua_do()\ng.blockSaves = 0\nmessage(\"Вы можете сохраниться здесь, чтобы пропустить вводную часть квеста при повторном прохождении\")\nend"
      }
    ]
  },
  {
    "id": 10,
    "text": "   Орнас посмотрел под ноги и огляделся вокруг.\n   Поверхность, сформированная сплошным слоем красноватого минерала, образовывала причудливые неровности без малейших разрывов и трещин. Казалось, будто вся луна являлась лишь огромным фрагментом монолитной породы.\n   Ни растений, ни животных не было видно, что нисколько не удивило юношу, учитывая отсутствие хоть какой-либо почвы и воды. На многие километры вокруг – лишь холодная пустота вокруг шероховатой пирамиды храма и космического корабля, на котором прибыли джедаи.",
    "answers": [
      {
        "id": 9,
        "text": "Назад",
        "run": [
          9
        ],
        "lua_if": "function lua_if()\ng.partsAvailable = g.partsAvailable or 1\nreturn g.partsAvailable == 1\nend"
      },
      {
        "id": 885,
        "text": "Назад",
        "run": [
          885
        ],
        "lua_if": "function lua_if()\ng.partsAvailable = g.partsAvailable or 1\nreturn g.partsAvailable == 2\nend"
      }
    ]
  },
  {
    "id": 11,
    "text": "   Сооружение представляло из себя невысокую ступенчатую пирамиду, навряд ли больше трёх этажей внутри.\n   Камни, составлявшие стены, выглядели очень старыми, и казалось, любое дуновение ветра способно обратить их в пыль. Будто в подтверждение этому, в верхней части стены зияла дыра, словно пробитая выстрелом орудия.\n   Лестница, ведущая ко входу, заканчивалась широкой площадкой с аркой. Орнасу показалось, что за аркой нет самой двери, лишь ровная каменная стена, такая же, как и стены со всех сторон.",
    "answers": [
      {
        "id": 9,
        "text": "Назад",
        "run": [
          9
        ],
        "lua_if": "function lua_if()\ng.partsAvailable = g.partsAvailable or 1\nreturn g.partsAvailable == 1\nend"
      },
      {
        "id": 885,
        "text": "Назад",
        "run": [
          885
        ],
        "lua_if": "function lua_if()\ng.partsAvailable = g.partsAvailable or 1\nreturn g.partsAvailable == 2\nend"
      }
    ]
  },
  {
    "id": 12,
    "text": "   Юный джедай нагнал своего наставника, когда он уже остановился на верхней ступени лестницы.<s>r\n– Информация от контрабандистов оказалась верна, в определенной степени, – проговорил тот. – Конечно, это не секретная академия ситхов, а лишь заброшенный храм одного из древних владык, но он таит в себе не меньше опасности. Тебе предстоит исследовать эту гробницу и убедиться, что это место не сможет причинить кому-нибудь вреда. Ни своими ловушками, ни тайнами, которые здесь сокрыты. Внутри ты встретишь множество опасностей, которые испытают твой дух, силу, смелость, стойкость и проницательность.<s>r\n   Мастер выдержал небольшую паузу, собираясь с мыслями, затем заговорил вновь:\n– Когда-то давно на исследование спутника отправились другие джедаи, но они бесследно исчезли, возможно даже не добравшись до нужной системы. Тьма этого места скорее всего порождена каким-то артефактом Тёмной стороны, тебе нужно найти его и обезвредить. Я буду ожидать тебя здесь и вмешаюсь, если почувствую, что ты в смертельной опасности. Но не забывай, что именно делает тебя джедаем.",
    "answers": [
      {
        "id": 13,
        "text": "Световой меч",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "var_set": [
          "style",
          1
        ]
      },
      {
        "id": 14,
        "text": "Связь с Силой",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_set": [
          "sila",
          2,
          "style",
          2
        ]
      },
      {
        "id": 15,
        "text": "Внимательность и осторожность",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_set": [
          "vnimatelnost",
          2,
          "style",
          3
        ]
      },
      {
        "id": 60,
        "text": "Ум и проницательность",
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ],
        "var_set": [
          "vnimatelnost",
          1,
          "style",
          4
        ]
      },
      {
        "id": 16,
        "text": "Внутренний свет и милосердие",
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ],
        "var_set": [
          "sila",
          1,
          "style",
          5
        ]
      },
      {
        "id": 12,
        "text": "Всплывабщее окно с инфой по разблокированию стилей\nКаждый ответ соответсвует определённому стилю прохождения: для каждого стиля доступны уникальные варианты действий; одни и те же действия могут приводить к разным последствиям для разных стилей.\n \nПри первом прохождении доступны только два стиля, остальные можно разблокировать после выполнения определённых условий в самом квесте. Подсказки для разблокирования каждого варианта можно будет найти в меню достижений после первого прохождения.\n\n3 -- пройти все комнаты, не вступая в бой\n4 -- успешный ремонт дроида -- Вы пропустили элемент, необходимый для понимания подсказки!\n5 -- доверие Десс больше 12 -- Вы пропустили элемент, необходимый для понимания подсказки!",
        "calculate": true,
        "super_calculate": false
      }
    ]
  },
  {
    "id": 13,
    "text": "– Световой меч, – без сомнения ответил юноша. – Вы всегда говорили, что в нём – моя жизнь.<s>r\n– Да, световой клинок – оружие джедаев... Он поможет в сражении и сохранит твою жизнь, если ты умело с ним обращаешься. Но не забывай, что лучшая победа – вовсе не вступать в схватку. Ты джедай – защитник Силы, защитник Жизни, постарайся не использовать меч, если в этом нет необходимости. Я ни на секунду не сомневаюсь в твоём мастерстве фехтования. Сам Магистр Буши восхищается тем, что ты в совершенстве владеешь всеми формами боя. Помни, что и в сражении, и вне его твой помощник – Сила. Используй её – и сможешь совершить невозможное. И последнее: старайся быть внимательным и осторожным, очень часто неприятностей можно избежать, если вовремя заметить какую-нибудь важную деталь.",
    "answers": [
      {
        "id": 17,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 14,
    "text": "– Связь с Силой, – уверенно ответил Орнас. – Именно это делает меня джедаем.\n– Разумеется, это — очень важный момент. Сила помогает воину в сражении, дипломату — в переговорах, ищущему — в поисках. Но кроме того, джедай должен ценить саму Жизнь во всех её проявлениях. Не забывай об осторожности и помни, что в некоторых ситуациях твоя жизнь будет зависеть от того, насколько искуссно ты владеешь световым мечом.",
    "answers": [
      {
        "id": 24,
        "text": "Форма I, Шии-Чо",
        "need": 1000
      },
      {
        "id": 18,
        "text": "Форма II, Макаши",
        "need": 1000
      },
      {
        "id": 19,
        "text": "Форма III, Соресу",
        "need": 1000
      },
      {
        "id": 20,
        "text": "Форма IV, Атару",
        "need": 1000
      },
      {
        "id": 21,
        "text": "Форма V, Шиен",
        "need": 1000
      },
      {
        "id": 22,
        "text": "Форма V, Джем Со",
        "need": 1000
      },
      {
        "id": 23,
        "text": "Форма VI, Ниман",
        "need": 1000
      },
      {
        "id": 159,
        "text": "Дальше"
      },
      {
        "id": 14,
        "text": "___________________\n\n[Выберите стиль боя]",
        "need": 1000,
        "comment": true
      }
    ]
  },
  {
    "id": 15,
    "text": "– Внимательность и осторожность, – ответил падаван. – Лучший способ справиться с заданием – остаться незамеченным и изучить все детали.\n– Да, эти качества полезны для агента, выполняющего опасные задания. Но не забывай, что философия Ордена джедаев содержит в себе много иного: Жизнь как высшая ценность, Сила как верный союзник, световой меч как орудие защиты. Помни об этом, когда окажешься внутри.",
    "answers": [
      {
        "id": 24,
        "text": "Форма I, Шии-Чо",
        "need": 1000
      },
      {
        "id": 18,
        "text": "Форма II, Макаши",
        "need": 1000
      },
      {
        "id": 19,
        "text": "Форма III, Соресу",
        "need": 1000
      },
      {
        "id": 20,
        "text": "Форма IV, Атару",
        "need": 1000
      },
      {
        "id": 21,
        "text": "Форма V, Шиен",
        "need": 1000
      },
      {
        "id": 22,
        "text": "Форма V, Джем Со",
        "need": 1000
      },
      {
        "id": 23,
        "text": "Форма VI, Ниман",
        "need": 1000
      },
      {
        "id": 159,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 16,
    "text": "– Самое главное – свет, сама Жизнь, – произнес юноша. – Священный долг джедая – поддерживать свет внутри себя и сохранять Жизнь в любых её проявлениях.\n– Да, это так. Я вижу, что твой дух крепок. Но не забывай быть внимательным и осторожным. В некоторых ситуациях тебе будет грозить серьёзная опасность, и справиться с ней тебе поможет твой союзник – Сила. Если сражения не избежать, то световой меч поможет тебе уцелеть. Помни, от него зависит не только твоя жизнь, но и жизни тех, кого ты защищаешь.",
    "answers": [
      {
        "id": 24,
        "text": "Форма I, Шии-Чо",
        "need": 1000
      },
      {
        "id": 18,
        "text": "Форма II, Макаши",
        "need": 1000
      },
      {
        "id": 19,
        "text": "Форма III, Соресу",
        "need": 1000
      },
      {
        "id": 20,
        "text": "Форма IV, Атару",
        "need": 1000
      },
      {
        "id": 21,
        "text": "Форма V, Шиен",
        "need": 1000
      },
      {
        "id": 22,
        "text": "Форма V, Джем Со",
        "need": 1000
      },
      {
        "id": 23,
        "text": "Форма VI, Ниман",
        "need": 1000
      },
      {
        "id": 159,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 17,
    "text": "– Ты можешь начать, как только посчитаешь необходимым, – продолжил наставник. – Я останусь здесь и доверюсь Силе, чтобы чувстовать происходящее с тобой.<s>r\n   С этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого был закреплён, и неподвижно завис перед спокойным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 18,
    "text": "Форма II, Макаши или Форма Соперничества.\nЭта форма возникла тогда, когда самой распространенной техникой боя являлась Шии-Чо и была нацелена на ведение боя с противником, вооруженным световым клинком.\nФорма предусматривает сражение с хватом меча одной рукой, что обеспечивает плавность движений и свободу перемещений. Грациозность и плавность движений делает ведение боя похожим на изящный танец.\nФорма малопригодна для отражения бластерного огня, неэффективна в бою с несколькими противниками.",
    "answers": [
      {
        "id": 26,
        "text": "Выбрать эту форму"
      },
      {
        "id": 18,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 19,
    "text": "Форма III, Соресу или Форма Эластичности.\nЭта форма разрабатывалась специально для противостояния большому количеству противников, вооруженных бластерным оружием, и считается наиболее \"оборонительной\" формой фехтования. Эта форма также подходит для защиты от светового меча. Соресу считается наиболее подходящей для джедая формой боя, ибо она выражает собой принятую в Ордене концепцию использования меча для обороны, а не для нападения.\nНедостатками этого стиля является необходимость оставаться на одном месте и невозможность проводить контратаки, пока хоть один противник продолжает атаковать.",
    "answers": [
      {
        "id": 27,
        "text": "Выбрать эту форму"
      },
      {
        "id": 28,
        "text": "Новый ответ. введите текст",
        "need_some": 2
      },
      {
        "id": 19,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 20,
    "text": "IV форма, Атару или Форма Агрессии.\nОчень агрессивный и быстрый стиль, эффективен против одиночного соперника, мало подходит для длительных боёв или сражений в ограниченном пространстве.\nДля Атару характерно использование акробатических приемов и быстрых мощных ударов. Для осуществления движений и атак бойцам требуется постоянно находиться в контакте с Силой, что позволяет им превосходить физические возможности своего тела.\nАтару малоэффективна в бою против группы врагов или для отражения бластерного огня. В затяжных боях быстро выматывает тело бойца.",
    "answers": [
      {
        "id": 29,
        "text": "Выбрать эту форму"
      },
      {
        "id": 20,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 21,
    "text": "Форма V, Шиен или Форма Настойчивости.\nВ основе Формы V лежит принцип использования атак противника против них самих. Шиен является классическом вариантом этой формы и ориентирован на отражение бластерного огня обратно в стреляющего.  Этот стиль пригоден также и для защиты в ближнем бою, позволяя проводить мощные контратаки, однако неэффективен против одиночного противника.",
    "answers": [
      {
        "id": 30,
        "text": "Выбрать эту форму"
      },
      {
        "id": 21,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 22,
    "text": "Форма V, Джем Со или Форма Настойчивости.\nВ основе Формы V лежит принцип использования атак противника против них самих.\nДелая акцент на грубой силе, Джем Со позволяла физически крепким бойцам использовать в бою весь свой потенциал. Этот стиль фехтования является дуэльным вариантом Формы V, его слабыми сторонами являются неэффективность против группы противников и недостаточная подвижность.\n",
    "answers": [
      {
        "id": 31,
        "text": "Выбрать эту форму"
      },
      {
        "id": 22,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 23,
    "text": "Форма VI, Ниман или Форма Умеренности.\nВ основе Формы VI лежит комбинирование приёмов и техник из ранее созданных стилей фехтования. При этом каждая форма теряет свои сильные и слабые стороны, и вместе они образуют стиль, лишённый как преимуществ, так и недостатков. Форма VI в большей степени полагалается на умение бойца импровизировать, его изобретательность и интуицию, нежели на отточенное владение боевыми приёмами. Сила формы Ниман заключается в её сбалансированности. ",
    "answers": [
      {
        "id": 32,
        "text": "Выбрать эту форму"
      },
      {
        "id": 23,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 24,
    "text": "Форма I, Шии-Чо или Форма Решительности. Является древнейшей из форм, разработанной вслед за появлением технологии световых мечей. Простейшая форма, преподавалась первой при освоении искусства владения световым мечом, закладывала основы при изучении более сложных форм.\nФорма I проста в освоении, но при этом весьма эффективна, особенно в бою с несколькими слабыми противниками.\nМало подходит для отражения бластерного огня или сражения с одиночным противником, вооруженным световым мечом.",
    "answers": [
      {
        "id": 25,
        "text": "Выбрать эту форму"
      },
      {
        "id": 24,
        "text": "Назад",
        "isBack": true,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 25,
    "text": "– Думаю, твоё мастерство в форме Шии-Чо достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\n   С этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 26,
    "text": "– Думаю, твоё мастерство в форме Макаши достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\nС этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 27,
    "text": "– Думаю, твоё мастерство в форме Соресу достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\nС этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 28,
    "text": "   Юноша внимательно всмотрелся в геометрический узор, выбитый на камне. Рисунок был покрыт слоем пыли, а кое-где почти не виден. Верхний и левый края плиты были сильно стёрты, как будто их многократно шлифовали. Когда её открывали в последний раз? Десять лет назад или все двести? Этого, пожалуй, уже не узнать.\n   В одном месте, где исходный рисунок совсем стёрся, виднелась небольшая надпись, явно сделанная позднее.",
    "answers": [
      {
        "id": 36,
        "text": "Осмотреть надпись",
        "lua_if": "function lua_if()\nreturn g.current_id ~= 36\nend",
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(36) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend"
      },
      {
        "id": 34,
        "text": "Попытаться открыть дверь с помощью Силы"
      }
    ]
  },
  {
    "id": 29,
    "text": "– Думаю, твоё мастерство в форме Атару достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\nС этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 30,
    "text": "– Думаю, твоё мастерство в стиле Шиен достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\nС этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 31,
    "text": "– Думаю, твоё мастерство в стиле Джем Со достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\nС этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 32,
    "text": "– Думаю, твоё мастерство в форме Ниман достаточно, чтобы успешно справиться с подстерегающими тебя опасностями. Главное – всегда помни про слабые и сильные стороны как противников, так и своего клинка.\n– Я запомню это, учитель.\n– Ты можешь зайти внутрь, как только посчитаешь необходимым – продолжил наставник – Я останусь здесь и позволю Силе чувстовать происходящее с тобой.\nС этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 33,
    "text": "   Орнас подошёл к большой каменной двери, украшенной причудливыми узорами. Никаких замков или признаков электроники, отвечающей за открытие двери, не было видно. Если бы не арка, обрамляющая эту массивную каменную плиту, то можно было бы вообще усомниться, что здесь вход.<s>r\n   В такой близости от храма тёмная сторона ощущалась столь явно, что Орнасу стало сложно как следует сосредоточиться. Использовать способности Силы здесь явно будет намного сложнее, чем обычно...",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(28) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "calculate": false,
        "text": "Осмотреть рисунки",
        "id": 28
      },
      {
        "id": 34,
        "text": "Использовать Силу, чтобы открыть дверь"
      }
    ]
  },
  {
    "id": 34,
    "text": "   ",
    "answers": [
      {
        "lua_do": "function lua_do()\nstyle = style or 1\nenemyhp = style == 1 and 10 or 8\n\ng.achievements = g.achievements or {}\ng.achievements.condition_door = g.achievements.condition_door or 0\n if position == 6 then \n  g.achievements.condition_door = g.achievements.condition_door or 1\n elseif g.achievements.condition_door == 1 and position == 0 then\n  g.achievements.condition_door = 2\n  g.achievements.fullRevers = 1\n  g.achievements.alarm = 1\n end\nend",
        "super_calculate": false,
        "id": 34,
        "text": "Рассчёт для достижения",
        "calculate": true,
        "merge": false
      },
      {
        "id": 34,
        "text": "Каменная плита полностью перекрывала вход в древний храм.",
        "var_equal": [
          "position",
          0
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Каменная плита, удерживаемая юношей в воздухе, висела примерно в полуметре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "var_equal": [
          "position",
          1
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Плита, лежащая на каменных уступах, располагалась примерно в полуметре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "merge": true,
        "var_equal": [
          "position",
          2
        ]
      },
      {
        "id": 34,
        "text": "Каменная плита, удерживаемая юношей в воздухе, висела примерно в метре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "merge": true,
        "var_equal": [
          "position",
          3
        ]
      },
      {
        "id": 34,
        "text": "Плита, лежащая на каменных уступах, располагалась примерно в метре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "merge": true,
        "var_equal": [
          "position",
          4
        ]
      },
      {
        "id": 34,
        "text": "Каменная плита, удерживаемая юношей в воздухе, висела примерно в полутора метрах от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "var_equal": [
          "position",
          5
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Плита, лежащая на каменных уступах, располагалась примерно в полутора метрах от пола. За ней виднелся узкий тёмный лаз, через который юноша мог бы пробраться внутрь здания, слегка пригнувшись.",
        "merge": true,
        "var_equal": [
          "position",
          6
        ]
      },
      {
        "id": 34,
        "text": "Сдвинутая в сторону каменная плита открыла достаточно широкий и высокий проход, к которому можно было подняться по уступам, образующим своеобразную лестницу.",
        "var_equal": [
          "position",
          7
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "\n   Юный джедай позволил Силе течь сквозь него и направил её своей волей. Он приподнял руку и массивная дверь едва заметно задрожала. Теперь осталось выбрать направление, в котором будет двигаться плита.",
        "merge": true,
        "var_equal": [
          "move",
          -1
        ]
      },
      {
        "id": 43,
        "text": "Попробовать протиснуться в проём",
        "need": -43,
        "var_equal": [
          "position",
          1
        ]
      },
      {
        "id": 62,
        "text": "Пробраться в проём",
        "var_not": [
          "position",
          0,
          "position",
          1,
          "position",
          3,
          "position",
          5,
          "position",
          7
        ],
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 99,
        "text": "Пройти в проём наверху",
        "var_equal": [
          "position",
          7
        ]
      },
      {
        "id": 62,
        "text": "Пробраться в проём внизу",
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 0\nend",
        "var_equal": [
          "position",
          7
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "Вверх",
        "middle_answer": true,
        "var_set": [
          "direction34",
          5
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "На себя",
        "var_set": [
          "direction34",
          2
        ],
        "left_answer": true
      },
      {
        "right_answer": true,
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "От себя",
        "var_set": [
          "direction34",
          1
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "Влево",
        "var_set": [
          "direction34",
          3
        ],
        "left_answer": true
      },
      {
        "right_answer": true,
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "Вправо",
        "var_set": [
          "direction34",
          4
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "Вниз",
        "middle_answer": true,
        "var_set": [
          "direction34",
          6
        ]
      },
      {
        "var_not": [
          "move",
          -1
        ],
        "calculate": false,
        "id": 939,
        "text": "Переместить плиту",
        "instant": false,
        "var_set": [
          "move",
          -1
        ]
      }
    ]
  },
  {
    "id": 35,
    "text": "   Орнас двумя руками ухватился за шлем, аккуратно снял его с головы и пристроил под мышкой левой руки. Юноша на секунду зажмурил глаза, чтобы вновь привыкнуть к освещению, и был готов продолжить исследование древнего храма.",
    "answers": [
      {
        "var_set": [
          "ship",
          2
        ],
        "id": 35,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "go_to": [
          "return"
        ]
      }
    ]
  },
  {
    "id": 36,
    "text": "   Орнас приблизился вплотную к холодному камню и внимательно всмотрелся в высеченные символы. Они отличались от рисунков на остальной поверхности двери и были сделаны как будто наспех. Почти везде совсем неразличимые, и только в одном месте юноша смог разобрать кое-что. Обрывочные надписи гласили: \"... во всём идёт до конца...\", \"... выбирай не прав...\" и \"... оказывается на высоте...\". Подумав над ними какое-то время, Орнас так и не смог понять, что они могли бы означать.",
    "answers": [
      {
        "id": 28,
        "text": "Назад",
        "run": [
          28
        ]
      }
    ]
  },
  {
    "id": 37,
    "text": "   Мгновенно оценив ситуацию, юноша с помощью Силы активировал переключатель энергетического блока, надеясь, что ловушка с лучегасителями подействует так же, как и в случае с другими энергоблоками в храме. К счастью, всё произошло так, как и расчитывал Орнас: уже через мгновение голубоватый барьер отрезал всю центральную часть зала, заперев неизвестных существ внутри.",
    "answers": [
      {
        "id": 189,
        "text": "Дальше",
        "var_set": [
          "panel2",
          1
        ]
      }
    ]
  },
  {
    "id": 38,
    "text": "   Силовой барьер, отделяющий неизвестных созданий от юноши, исчез как только Орнас использовал переключатель энергоблока. Существа не стали терять времени и начали стремительно приближаться к джедаю, не оставив ему шансов избежать сражения.",
    "answers": [
      {
        "id": 38,
        "text": "\n   Или всё-таки был способ? Орнас не решил для себя, можно ли доверять услышанной информации.",
        "lua_if": "function lua_if()\n--local a = (dess.bonus ~= 0 and 1) or 0\n--return a == 1\nreturn dess.bonus ~= 0 and style ~= 5\nend",
        "merge": true
      },
      {
        "id": 38,
        "text": "\n   Или всё-таки был способ? Орнас не знал, стоит ли доверять зову сердца в такой ситуации.",
        "lua_if": "function lua_if()\n--local a = (dess.bonus ~= 0 and 0) or (style == 5 and 1) or 0\n--return a == 1\nreturn style == 5\nend",
        "merge": true
      },
      {
        "id": 38,
        "text": "\n   Орнас на мгновение задумался, мог ли он найти в храме что-то, чтобы выйти из этой ситуации иначе. И тяжело вздохнул: теперь это уже не имело значения.",
        "lua_if": "function lua_if()\n--local a = (dess.bonus ~= 0 and 0) or (style == 5 and 1) or 0\n--return a == 1\nreturn style ~= 5 and dess.bonus == 0\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n-- добавить условие отображения, когда Десс поделится секретом\ndess = dess or {}\ndess.bonus = dess.bonus or 0\n--local a = (dess.bonus ~= 0 and 1) or 0\n--return a == 1\nreturn dess.bonus ~= 0 and style ~= 5\nend",
        "id": 190,
        "text": "Поприветствовать существ",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.understanding = 1 -- готов похвастаться перед Десс, после чего разблокирует само \"понимание\"\nend",
        "var_set": [
          "usm189",
          1,
          "fight192",
          1
        ]
      },
      {
        "lua_if": "function lua_if()\n-- добавить условие отображения, когда Десс поделится секретом\ndess = dess or {}\ndess.bonus = dess.bonus or 0\nlocal a = (style == 5 and 1) or 0\nreturn a == 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ],
        "id": 190,
        "text": "Поприветствовать существ",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.understanding = 1 -- готов похвастаться перед Десс, после чего разблокирует само \"понимание\"\nend",
        "var_set": [
          "usm189",
          1,
          "fight192",
          1
        ]
      },
      {
        "id": 192,
        "text": "К бою",
        "var_set": [
          "fight192",
          0,
          "lov189",
          0,
          "fail199",
          0
        ]
      }
    ]
  },
  {
    "id": 39,
    "text": "   Необычным предметом оказался небольшой обруч из тёмного металла",
    "answers": [
      {
        "super_calculate": true,
        "id": 2,
        "text": "-- Инициализация функций Луа\nДобавить диалог с выбором сложности",
        "calculate": false,
        "lua_do": "function lua_do()\n\nfunction randW(a, b) -- случайное значение из массива с учётом веса\n  if #a ~= #b then return false end\n\n  local sum = 0\n\n  for _, v in pairs(b) do\n    sum = sum <plus> v\n  end\n\n  local result = math.random() * sum\n\n  sum = 0\n  for k, v in pairs(b) do\n    sum = sum <plus> v\n    if result <= sum then return a[k] end\n  end\n  end\nend"
      },
      {
        "id": 2,
        "calculate": true,
        "lua_do": "function lua_do()\ng.technical = g.technical or {}\ng.blockSaves = 0\n\n  if not g.technical.code then -- установка значений при первом включении\n    g.technical.code = {number = {1, 2, 3, 4, 5, 6, 7, 8, 9}, weight = {10, 10, 10, 10, 10, 10, 10, 10, 10}}\n  end\n\n   if not code_number then\n     code_number = randW(g.technical.code.number, g.technical.code.weight) -- выбор случайного кода\n  g.technical.code.weight[code_number] = g.technical.code.weight[code_number] * 0.1 -- уменьшение веса выбранного кода\n  \n  local a = g.technical.code.weight\n  local b = 0\n  for k, v in pairs(a) do\n    if v ~= a[1] then\n      b = 1\n    end\n  end\n  g.technical.code = b == 1 and g.technical.code or nil -- обнуление таблицы кодов, если все коэффициенты стали равны\nend\n\nend",
        "text": "-- Установка значений технических переменных"
      },
      {
        "var_not": [
          "sup39",
          1
        ],
        "var_add": [
          "arm_sup",
          1
        ],
        "id": 39,
        "text": "first visit",
        "calculate": true
      },
      {
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ],
        "var_equal": [
          "code_number",
          1
        ],
        "id": 39,
        "text": "be sure but a",
        "calculate": true,
        "var_set": [
          "arm_current",
          2
        ]
      },
      {
        "var_set": [
          "arm_current",
          2
        ],
        "var_equal": [
          "code_number",
          2
        ],
        "id": 39,
        "text": "the droids you",
        "calculate": true,
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ]
      },
      {
        "var_set": [
          "arm_current",
          3
        ],
        "var_equal": [
          "code_number",
          3
        ],
        "id": 39,
        "text": "disturbing",
        "calculate": true,
        "answerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ]
      },
      {
        "var_set": [
          "arm_current",
          2
        ],
        "var_equal": [
          "code_number",
          4
        ],
        "id": 39,
        "text": "There is",
        "calculate": true,
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ]
      },
      {
        "var_set": [
          "arm_current",
          3
        ],
        "var_equal": [
          "code_number",
          5
        ],
        "id": 39,
        "text": "with you",
        "calculate": true,
        "answerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ]
      },
      {
        "newAnswerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ],
        "var_equal": [
          "code_number",
          6
        ],
        "id": 39,
        "text": "underestimate",
        "calculate": true,
        "var_set": [
          "arm_current",
          2
        ]
      },
      {
        "newAnswerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ],
        "var_equal": [
          "code_number",
          7
        ],
        "id": 39,
        "text": "father",
        "calculate": true,
        "var_set": [
          "arm_current",
          3
        ]
      },
      {
        "newAnswerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ],
        "var_equal": [
          "code_number",
          8
        ],
        "id": 39,
        "text": "bad feeling",
        "calculate": true,
        "var_set": [
          "arm_current",
          2
        ]
      },
      {
        "newAnswerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ],
        "var_equal": [
          "code_number",
          9
        ],
        "id": 39,
        "text": "the dark side",
        "calculate": true,
        "var_set": [
          "arm_current",
          3
        ]
      },
      {
        "var_not": [
          "sup39",
          1
        ],
        "var_equal": [
          "arm_current",
          2
        ],
        "id": 39,
        "text": "first visit",
        "calculate": true,
        "var_set": [
          "sup39",
          1,
          "arm2seen",
          "arm_sup"
        ]
      },
      {
        "var_not": [
          "sup39",
          1
        ],
        "var_equal": [
          "arm_current",
          3
        ],
        "id": 39,
        "text": "first visit",
        "calculate": true,
        "var_set": [
          "sup39",
          1,
          "arm3seen",
          "arm_sup"
        ]
      },
      {
        "var_not": [
          "arm2seen",
          0,
          "arm1seen",
          0
        ],
        "var_equal": [
          "arm_current",
          2,
          "arm3seen",
          0
        ],
        "id": 39,
        "text": ", такой же, как и найденный ранее в другой комнате храма",
        "merge": true
      },
      {
        "var_not": [
          "arm2seen",
          0,
          "arm3seen",
          0
        ],
        "var_equal": [
          "arm_current",
          2,
          "arm1seen",
          0
        ],
        "id": 39,
        "text": ", такой же, как и найденный ранее в другой комнате храма",
        "merge": true
      },
      {
        "var_not": [
          "arm3seen",
          0,
          "arm2seen",
          0
        ],
        "var_equal": [
          "arm_current",
          3,
          "arm1seen",
          0
        ],
        "id": 39,
        "text": ", такой же, как и найденный ранее в другой комнате храма",
        "merge": true
      },
      {
        "var_not": [
          "arm3seen",
          0,
          "arm1seen",
          0
        ],
        "var_equal": [
          "arm_current",
          3,
          "arm2seen",
          0
        ],
        "id": 39,
        "text": ", такой же, как и найденный ранее в другой комнате храма",
        "merge": true
      },
      {
        "var_not": [
          "arm2seen",
          0,
          "arm1seen",
          0,
          "arm3seen",
          0
        ],
        "id": 39,
        "calculate": false,
        "text": ", такой же, как и два других, найденных юношей ранее в храме",
        "merge": true
      },
      {
        "id": 39,
        "text": ".",
        "merge": true
      },
      {
        "id": 39,
        "text": " Когда Орнас прикоснулся к нему, то почувствовал, как обруч впитывает в себя тепло, а затем на поверхности металла появились странные символы. Не похоже на бессмысленное украшение: такие вещи могут говорить что-то для посвящённых. Интересно, что именно...",
        "merge": true
      },
      {
        "id": 39,
        "text": "\n   Юноша осторожно надел браслет на левую руку.",
        "merge": true,
        "var_equal": [
          "arm3",
          1,
          "arm_current",
          3
        ]
      },
      {
        "id": 39,
        "text": "\n   Юноша осторожно надел браслет на левую руку.",
        "var_equal": [
          "arm2",
          1,
          "arm_current",
          2
        ],
        "merge": true
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9
        ],
        "id": 39,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ]
      },
      {
        "var_set": [
          "arm3",
          1
        ],
        "var_not": [
          "arm3",
          1
        ],
        "lua_do": "function lua_do()\ntakeOnArmlet = 1\ntake39 = 1\nhideMap = 0\nend",
        "var_equal": [
          "arm_current",
          3
        ],
        "id": 218,
        "text": "Надеть обруч на руку",
        "instant": false,
        "merge": false
      },
      {
        "merge": false,
        "var_not": [
          "arm2",
          1
        ],
        "lua_do": "function lua_do()\ntakeOnArmlet = 1\ntake39 = 1\nhideMap = 0\nend",
        "var_equal": [
          "arm_current",
          2
        ],
        "id": 218,
        "text": "Надеть обруч на руку",
        "instant": false,
        "var_set": [
          "arm2",
          1
        ]
      },
      {
        "id": 218,
        "text": "Назад",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "merge": false
      },
      {
        "id": 187,
        "lua_do": "function lua_do()\narm_current = nil\narm_sup = nil\narm2 = nil\narm3 = nil\narm2seen = nil\narm3seen = nil\nsup187 = nil\nsup39 = nil\nend",
        "text": "Переход в зал с крокодилами",
        "need": 1000,
        "merge": false
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeArmlets = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 39,
        "calculate": true
      }
    ]
  },
  {
    "id": 40,
    "text": "   Орнас не понимал бинарный язык астромехов, но знал, что дроид сможет понять его и, наверное, как-нибудь изъясниться. Однако не успел юноша произнести и слова, как включился голопроектор, изображающий человека в мандалорской броне.\n– Проклятый вор! – зло прошипел мандалорец. – У тебя есть то, что может быть только у членов моей команды.\n   Голограмма исчезла, а дроид больше не реагировал на любые действия джедая.",
    "answers": [
      {
        "id": 201,
        "text": "Отойти от дроида",
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.lastChanceKey = (location1.lastChanceKey or 5) - 1\nend"
      }
    ]
  },
  {
    "id": 41,
    "text": "   Юноша использовал Силу, пытаясь ",
    "answers": [
      {
        "merge": false,
        "var_not": [
          "position",
          1,
          "position",
          3,
          "position",
          5,
          "position",
          6,
          "position",
          7
        ],
        "var_add": [
          "position",
          1
        ],
        "var_equal": [
          "direction34",
          5
        ],
        "id": 41,
        "calculate": true,
        "text": "движение плиты вверх",
        "var_set": [
          "move41",
          1
        ]
      },
      {
        "merge": false,
        "var_not": [
          "position",
          2,
          "position",
          4,
          "position",
          6,
          "position",
          0,
          "position",
          7
        ],
        "var_add": [
          "position",
          -1
        ],
        "var_equal": [
          "direction34",
          6
        ],
        "id": 41,
        "calculate": true,
        "text": "движение плиты вниз",
        "var_set": [
          "move41",
          1
        ]
      },
      {
        "merge": false,
        "var_not": [
          "position",
          2,
          "position",
          4,
          "position",
          6,
          "position",
          0,
          "position",
          7
        ],
        "var_add": [
          "position",
          1
        ],
        "var_equal": [
          "direction34",
          1
        ],
        "id": 41,
        "calculate": true,
        "text": "движение плиты от себя",
        "var_set": [
          "move41",
          1
        ]
      },
      {
        "merge": false,
        "var_not": [
          "position",
          1,
          "position",
          3,
          "position",
          5,
          "position",
          0,
          "position",
          7
        ],
        "var_add": [
          "position",
          -1
        ],
        "var_equal": [
          "direction34",
          2
        ],
        "id": 41,
        "calculate": true,
        "text": "движение плиты на себя",
        "var_set": [
          "move41",
          1
        ]
      },
      {
        "var_set": [
          "move41",
          1
        ],
        "var_add": [
          "position",
          1
        ],
        "var_equal": [
          "direction34",
          3,
          "position",
          6
        ],
        "id": 41,
        "calculate": true,
        "text": "движение плиты влево",
        "merge": false
      },
      {
        "merge": false,
        "var_add": [
          "position",
          -1
        ],
        "var_equal": [
          "direction34",
          4,
          "position",
          7
        ],
        "id": 41,
        "calculate": true,
        "text": "движение плиты вправо",
        "var_set": [
          "move41",
          1
        ]
      },
      {
        "id": 41,
        "text": "направить дверь от себя",
        "var_equal": [
          "direction34",
          1
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": "потянуть дверь на себя",
        "merge": true,
        "var_equal": [
          "direction34",
          2
        ]
      },
      {
        "id": 41,
        "text": "направить дверь влево",
        "merge": true,
        "var_equal": [
          "direction34",
          3
        ]
      },
      {
        "id": 41,
        "text": "направить дверь вправо",
        "merge": true,
        "var_equal": [
          "direction34",
          4
        ]
      },
      {
        "id": 41,
        "text": "направить дверь вниз",
        "merge": true,
        "var_equal": [
          "direction34",
          6
        ]
      },
      {
        "id": 41,
        "text": "направить дверь вверх",
        "var_equal": [
          "direction34",
          5
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": ", но она не поддавалась, будто что-то препятствовало её перемещению",
        "var_not": [
          "move41",
          1
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": ", и она со скрипом поддалась. Сдвинувшись примерно на полметра, каменная плита упёрлась во что-то и остановилась",
        "var_equal": [
          "move41",
          1
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": ". За плитой оказалась ещё одна каменная стена, однако, присмотревшись, Орнас разглядел в ней небольшой проём, в который юноша едва ли мог бы протиснуться боком",
        "merge": true,
        "var_equal": [
          "move41",
          1,
          "position",
          1,
          "direction34",
          5
        ]
      },
      {
        "id": 41,
        "text": ". Теперь она лежала на двух каменных уступах, разделённых небольшим лазом, и можно было пробраться внутрь без риска быть раздавленным",
        "var_equal": [
          "move41",
          1,
          "position",
          2,
          "direction34",
          1
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": ". Теперь проём в стене был уже около метра в высоту, но плита висела в воздухе без опоры, удерживаемая лишь усилиями юноши",
        "merge": true,
        "var_equal": [
          "move41",
          1,
          "position",
          3,
          "direction34",
          5
        ]
      },
      {
        "id": 41,
        "text": ". Плита надёжно стояла на каменных уступах, а лаз достигал уже метра в высоту. Однако он был настолько узким, что юноше всё равно потребовалось бы пробираться внутрь ползком",
        "var_equal": [
          "move41",
          1,
          "position",
          4,
          "direction34",
          1
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": ", зависнув в воздухе на высоте примерно полутора метров от пола",
        "merge": true,
        "var_equal": [
          "move41",
          1,
          "position",
          5,
          "direction34",
          5
        ]
      },
      {
        "id": 41,
        "text": ". Проём под плитой, лежащей на каменных уступах, достигал уже полутора метров в высоту и юноша мог бы пробраться внутрь, лишь немного пригнув голову",
        "var_equal": [
          "move41",
          1,
          "position",
          6,
          "direction34",
          1
        ],
        "merge": true
      },
      {
        "id": 41,
        "text": ". Наверху за ней образовался ещё один проход, достаточно широкий и высокий. Каменные уступы справа от щели внизу образовали своеобразную лестницу, ведущую прямо к этому проходу, и на их фоне узкий лаз стал едва заметен",
        "var_equal": [
          "move41",
          1,
          "position",
          7
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Дальше",
        "var_set": [
          "move41",
          "0",
          "move",
          0
        ]
      },
      {
        "id": 41,
        "text": ".   ",
        "merge": true
      }
    ]
  },
  {
    "id": 42,
    "text": "   Юноша тщательно осмотрел заваленный грудами хлама зал. На покрытом крупными осколками и каменной крошкой полу не осталось никаких следов, которые бы Орнас мог прочитать. Отчаявшись высмотреть хоть что-то полезное в самих завалах, джедай окинул взглядом стены и потолок. Примерно над центром комнаты было закреплено устройство, напоминающее генератор силового поля, однако идущие от него провода были оборваны. Старый массивный энергетический блок у стены был грубо соединён охапкой кабелей с самодельной ",
    "answers": [
      {
        "id": 42,
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 1,
        "addToHistory": [
          163
        ]
      },
      {
        "id": 42,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\n--isHistoryContain(163)\nreturn \"зарядной станцией, рядом с которой находился подключённый к ней древний астродроид неизвестной юноше модели.\"\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 43,
    "text": "   Взвесив все риски, Орнас осторожно приблизился к небольшому проёму. Стараясь не терять своего сосредоточения на удержании двери, он медленно просунул ноги в темноту неизвестности.\n   На одно мгновение в его мыслях промелькнуло осознание того, что если он отвлечётся от плиты, то будет тотчас раздавлен всей её невообразимой массой. Этого мгновения слабости оказалось достаточно.",
    "answers": [
      {
        "id": 46,
        "text": "Вдруг!.."
      }
    ]
  },
  {
    "id": 44,
    "text": "   ",
    "answers": [
      {
        "id": 44,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n  if timeForDess == 2 then\n    complex = complex or {}\n    complex.saberTracks = 1\n  end\nlocal text = \n(timeForDess < 3 and \n(\"Вернувшись в комнату, Орнас не сразу заметил Десвиар, которая склонилась над чем-то в самом углу\" .. \n<s>t(panel3 ~= 1 and \n<s>t<s>t\" за опустевшей камерой.\"\n<s>t<s>tor \", в узком пространстве между стеной и силовым полем лучегасителей.\")\n<s>t<s>t..\n<s>t<s>t(panel3 ~= 1 and\n<s>t<s>t<s>t\"<s>\n– Уже вернулся? – удивилась она. – Нашёл что-нибудь?<s>\n– Пока ничего. Ничего из одежды для тебя, – угрюмо ответил джедай. – Чем это ты там занимаешься?<s>\n– Я нашла кое-что. Здесь, прямо за этой штукой.<s>\n   Орнас подошёл ближе и заглянул за плечо Десс. Она аккуратно разрезала кусок грубой серой ткани, расстеленный на полу перед ней, орудуя осколком стекла, как скальпелем. Несколько уже отделённых лоскутов с рваными краями лежали рядом.<s>\n– Ловко ты его, – восхитился юноша. – Собираешься это надеть?<s>\n– Ты ведь не нашёл чего-то получше, – пожала плечами Десвиар. – А теперь отойди и отвернись.<s>\n   Джедай покорно направился в дальний конец комнаты и опустил взгляд в пол, изучая странные отметины на поверхности каменных плит, как будто оставленных световым мечом во время сражения.<s>\n– Всё, можешь возвращаться, – крикнула Десс буквально через несколько минут, прервав его размышления.\"\n<s>t<s>t<s>tor \"<s>\n– Ты это видел? – спросила она и махнула рукой в сторону возникшего барьера. – Нашёл что-нибудь?<s>\n– Пока ничего. Ничего, что ты могла бы надень, – угрюмо ответил джедай. – Чем это ты там занимаешься?<s>\n– Я нашла кое-что. Здесь, прямо за этой штукой.<s>\n   Орнас подошёл ближе и заглянул за плечо Десс. Она аккуратно разрезала кусок грубой серой ткани, расстеленный на полу перед ней, орудуя осколком стекла, как скальпелем. Несколько уже отделённых лоскутов с рваными краями лежали рядом.<s>\n– Ловко ты его, – восхитился юноша. – Собираешься это надеть?<s>\n– Ты ведь не нашёл чего-то получше, – пожала плечами Десвиар. – А теперь отойди и отвернись.<s>\n   Джедай покорно направился в дальний конец комнаты и опустил взгляд в пол, изучая странные отметины на поверхности каменных плит, как будто оставленных световым мечом во время сражения.<s>\n– Всё, можешь возвращаться, – крикнула Десс буквально через несколько минут, прервав его размышления.\"))\n<s>t<s>t<s>t\nor (\"Вернувшись в комнату, Орнас не сразу заметил Десвиар, которая забралась в самый угол\" .. \n<s>t(panel3 ~= 1 and \n<s>t<s>t\" за опустевшей камерой.\"\n<s>t<s>tor \", в узкое пространство между стеной и силовым полем лучегасителей.\")\n<s>t<s>t..\n<s>t<s>t(panel3 ~= 1 and\n<s>t<s>t<s>t\"<s>\n– Ты уже вернулся? – спросила она, не поворачиваясь к вошедшему и замершему у самой двери джедаю. – Нашёл что-нибудь?<s>\n– Нет, совсем ничего. Никакой одежды для тебя, – угрюмо ответил юноша. – А ты чем там занимаешься?<s>\n– А вот я кое-что нашла, – сказала она с гордостью. – Прямо здесь, за этой штукой, представляешь?<s>\n   Десс наконец выбралась из-за укрытия, и подошла ближе к центру комнаты, жестами приглашая Орнаса подойти к ней. Она уже была во что-то одета и держала в руках обрывки какой-то ткани и крупный осколок стекла.\"\n<s>t<s>t<s>tor \"<s>\n– Ты это видел? – спросила она и махнула рукой в сторону возникшего барьера. – Нашёл что-нибудь?<s>\n– Нет, совсем ничего, никакой одежды, – угрюмо ответил юноша. – А ты чем там занимаешься?<s>\n– А вот я кое-что нашла, – сказала она с гордостью. – Прямо здесь, за этой штукой, представляешь?<s>\n   Десс наконец выбралась из-за укрытия, и подошла ближе к центру комнаты, жестами приглашая Орнаса подойти к ней. Она уже была во что-то одета и держала в руках обрывки какой-то ткани и крупный осколок стекла.\")))\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 45,
        "text": "Подойти к Десвиар",
        "lua_do": "function lua_do()\nsup45 = \"\"\nend"
      }
    ]
  },
  {
    "id": 45,
    "text": "   Орнас подошёл ближе к Десс и наконец смог без смущения её внимательно рассмотреть.<s>r\n   Вокруг бедёр девушки был обёрнут наподобие юбки один из отрезов той самой ткани, прикрывающий ноги почти до голеней и завязанный простым узлом на боку. Другой узкий фрагмент был обмотан вокруг груди, оставляя открытыми талию, живот и нижние рёбра. Накинутый сверху плащ юноши, рукава которого пришлось закатать, оказался несколько велик для Десвиар, но выгодно подчёркивал стройность её фигуры. Пышные вьющиеся волосы она собрала в хвост самодельной лентой из той же ткани, открыв красивое лицо с правильными чертами и светлыми глазами.<s>r\n– Ну как? – спросила Десс и какое-то время кокетливо крутилась перед Орнасом, словно забыв о своём состоянии и обстоятельствах, при которых совсем недавно встретила юношу.<s>r\n",
    "answers": [
      {
        "id": 45,
        "text": "Генерация текста: ответ",
        "lua_text": "function lua_text()\nreturn sup45\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n--style == 2 - просто чувствует Силу )\n--dess.recordSeen = 1 - запись в шлеме\n--dess.saberSeen = 1 - световой меч в сейфе\n--dess.droidSeen = 1 - рассказал дроид\n--dess.complexSeen = 1 - сложное условие: бой со змеёй наверху - видел следы, видел одевание Десс - видел следы сражения\ndess = dess or {}\ndess.stage = dess.stage or 0\ncomplex = complex or {}\n  if complex.saberTracks == 1 and complex.tracks == 1 then\n    dess.complexSeen = 1\n  end\ndess.revealed = (dess.recordSeen == 1 and 1) or (dess.saberSeen == 1 and 1) or (dess.droidSeen == 1 and 1) or (dess.complexSeen == 1 and 1) or (style == 2 and 1) or 0\nreturn dess.revealed == 1 and dess.stage ~= 3 and sup45 ~= \"\"\nend",
        "id": 161,
        "text": "– Я должен тебе кое-что сказать.",
        "lua_do": "function lua_do()\nsup45 = nil\nend",
        "comment": false
      },
      {
        "id": 246,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn sup45 ~= \"\"\nend",
        "lua_do": "function lua_do()\nsup45 = nil\nend"
      },
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\ngrenade = grenade1 <plus> grenade3 <plus> grenade4\n\nif a_tia_trust > 5 then\n  if grenade < 2 then\n    grenade1 = grenade1 <plus> 1\n    grenade = grenade <plus> 1\n    text = \" Кстати, – немного смущённо добавила она после небольшой паузы, – тут было ещё кое-что, наверное это тебе может пригодиться...<s>\n   Она вытащила откуда-то из складок плаща небольшой блестящий предмет и протянула его Орнасу. Джедай осторожно взял предмет в руки и осмотрел. Граната. Ионная. Она действительно может пригодиться, например, для выведения из строя дроидов или вычислительной техники. Юноша поблагодарил Десс и закрепил гранату на поясе.\"\n  end\nend\n\nreturn text\nend",
        "id": 45,
        "text": "Генерация текста - бонусная граната",
        "lua_if": "function lua_if()\nreturn sup45 ~= \"\"\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 == \"\"\nend",
        "instant": true,
        "lua_do": "function lua_do()\nsup45 = \"– Здорово, – честно ответил он. – Мой плащ тебе идёт.<s>\n– Значит буду ходить так, пока ты не найдёшь для меня что-нибудь ещё.\"\ndess = dess or {}\ndess.trust = (a_tia_trust or 0) <plus> 1\nend",
        "text": "Похвалить",
        "id": 772,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 == \"\"\nend",
        "instant": true,
        "lua_do": "function lua_do()\nsup45 = \"– Сойдёт, – кивнул он, стараясь не думать о привлекательности девушки.<s>\n– Значит буду ходить так, пока ты не найдёшь для меня что-нибудь ещё.\"\ndess = dess or {}\ndess.trust = (a_tia_trust or 0) <plus> 0\nend",
        "text": "Отозваться нейтрально",
        "id": 772,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 == \"\"\nend",
        "instant": true,
        "lua_do": "function lua_do()\nsup45 = \"– Отвратительно, – соврал он, стараясь не думать о привлекательности девушки. – Надо будет найти что-нибудь нормальное.<s>\n– Вот сам и найди что-нибудь нормальное, – обиженно передразнила Десс.\"\ndess = dess or {}\ndess.trust = (a_tia_trust or 0) - 2\nend",
        "text": "Раскритиковать",
        "id": 772,
        "merge": false
      }
    ]
  },
  {
    "id": 46,
    "text": "   Юноша не сразу понял, что остался жив. Приподнявшись на руках, он взглянул на каменную дверь, проглядывающую через облако пыли в паре метров от него. Затем на своего учителя, стоящего рядом и укоризненно смотрящего на нерадивого ученика.<s>r\n   Конечно, опытный джедай смог в мгновение ока почувствовать опасность и вытащить его из-под падающей плиты.<s>r\n– Ты должен быть осмотрительнее, – сдержанно сказал его спаситель. – Не забывай, что ты не бессмертен, а я не всемогущ. На что тебе Сила, если ты не можешь удержать в воздухе даже камень?<s>r\n   Орнас опустил взгляд, лишь бы не видеть суровые глаза старого мастера. Сколько раз юноша видел это беспристрастное и холодное выражение лица, сколько раз угрюмо выслушивал строгие нотации. От требуемой кодексом образцовой безэмоциональности наставника Орнасу часто становилось не по себе.<s>r\n   Когда он поднялся на ноги и вновь подошёл к двери, пыль вокруг уже осела. Теперь нужно всё начинать сначала...",
    "answers": [
      {
        "id": 34,
        "text": "Попытаться открыть дверь",
        "var_set": [
          "position",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.fails = 1\nmaster.position = 1\n\ng.achievements = g.achievements or {}\n\ng.achievements.alarm = g.achievements.rush == 0 and -18 or 0\ng.achievements.rush = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 46,
        "calculate": true
      }
    ]
  },
  {
    "id": 47,
    "text": "   Орнас со всех ног бросился к одной из колонн, которые могли хоть как-то укрыть его от преследующего чудовища.",
    "answers": [
      {
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nblooded = ornasStat.bloodedLeg == 1 and 1 or 0\nend",
        "text": "Новый ответ. введите текст",
        "id": 47,
        "calculate": true
      },
      {
        "text": "Новый ответ. введите текст",
        "var_equal": [
          "blooded",
          0
        ],
        "id": 47,
        "var_need": [
          "havetime",
          1
        ],
        "calculate": true,
        "var_set": [
          "result47",
          1
        ]
      },
      {
        "var_less": [
          "havetime",
          1
        ],
        "var_equal": [
          "blooded",
          0
        ],
        "id": 47,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "result47",
          2
        ]
      },
      {
        "text": "Новый ответ. введите текст",
        "var_equal": [
          "blooded",
          1
        ],
        "id": 47,
        "var_need": [
          "havetime",
          2
        ],
        "calculate": true,
        "var_set": [
          "result47",
          3
        ]
      },
      {
        "var_less": [
          "havetime",
          2
        ],
        "var_equal": [
          "blooded",
          1
        ],
        "id": 47,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "result47",
          4
        ]
      },
      {
        "var_not": [
          "result47",
          2,
          "result47",
          4
        ],
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 251,
        "text": "запуск смены колонн",
        "run": [
          251
        ],
        "calculate": false
      },
      {
        "var_not": [
          "result47",
          2,
          "result47",
          4
        ],
        "super_calculate": false,
        "id": 47,
        "text": "запуск смены колонн",
        "calculate": true,
        "lua_do": "function lua_do()\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\nmiddleRoom = middleRoom or {}\nmiddleRoom.currentCol = middleRoom.currentCol or 0\ncoldirection = coldirection or 1\n \n\nif coldirection == 1 then -- переход вперёд, добавление повреждений следующей колонне\n  middleRoom.currentCol = middleRoom.currentCol <plus> 1 > 4 and 1 or middleRoom.currentCol <plus> 1\n  if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n    vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n  else -- колонна-цель разрушенна, запустить следующую\n    middleRoom.currentCol = middleRoom.currentCol <plus> 1 > 4 and 1 or middleRoom.currentCol <plus> 1\n      if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n      vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      else -- две колонны разрушены, бежит к третьей\n        middleRoom.currentCol = middleRoom.currentCol <plus> 1 > 4 and 1 or middleRoom.currentCol <plus> 1\n        vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      end\n  end\nelse -- переход назад, добавление повреждений\n  middleRoom.currentCol = middleRoom.currentCol - 1 < 1 and 4 or middleRoom.currentCol - 1\n  if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n    vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n  else -- колонна-цель разрушенна, запустить следующую\n    middleRoom.currentCol = middleRoom.currentCol - 1 < 1 and 4 or middleRoom.currentCol - 1\n      if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n      vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      else -- две колонны разрушены, бежит к третьей\n        middleRoom.currentCol = middleRoom.currentCol - 1 < 1 and 4 or middleRoom.currentCol - 1\n        vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      end\n  end\nend\n  \ncurrentcolstat = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] -- аттавизм, но вдруг она нужна для отображения\nbrokencoloumns = (col1stat == 2 and 1 or 0) <plus> (col2stat == 2 and 1 or 0) <plus> (col3stat == 2 and 1 or 0) <plus> (col4stat == 2 and 1 or 0)\nend"
      },
      {
        "var_not": [
          "result47",
          2,
          "result47",
          4,
          "currentcolstat",
          2
        ],
        "id": 47,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "havetime",
          2
        ]
      },
      {
        "var_not": [
          "result47",
          2,
          "result47",
          4
        ],
        "var_equal": [
          "currentcolstat",
          2
        ],
        "id": 47,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "havetime",
          1
        ]
      },
      {
        "id": 47,
        "text": "\n   К счастью, манёвр юноши застал врасплох разъярённого терентатека, поэтому Орнас благополучно добрался до ближайшей колонны и укрылся за ней.\n   Не успел джедай перевести дух после стремительного рывка, как всё помещение сотряслось от чудовищного удара: огромный монстр на всей скорости врезался в каменную колонну, за которой затаился юноша, отчего она",
        "var_equal": [
          "result47",
          1
        ],
        "merge": true
      },
      {
        "id": 47,
        "text": "\n   К несчастью, манёвр юноши не застал врасплох разъяренного терентатека, и тому потребовалось всего несколько секунд, чтобы сократить дистанцию. Орнас не успел даже обернуться, когда чудовищная лапа обрушилась на него и отбросила на холодный пол.\n   Юный джедай поднялся прыжком на ноги, лишь чудом увернувшись от удара монстра, и заозирался по сторонам. Всего в нескольких шагах поблескивала металлом дверь – его последняя надежда на спасение. Орнас вскинул руку, активируя с помощью Силы дверной механизм, и метнулся наружу.\n   Лязгнули тяжёлые створки двери позади, и джедай повалился на холодный пол. Ещё несколько минут он пытался отдышаться и восстановить силы, затем уверенно поднялся на ноги и почувствовал, что готов продолжить испытание.",
        "merge": true,
        "var_equal": [
          "result47",
          2
        ]
      },
      {
        "id": 47,
        "text": "\n   Едва сделав несколько шагов, юноша почувствовал острую боль в ноге. Рана, полученная в сражении с обитателями храма, не позволяла ему бежать с максимальной скоростью. Но терентатек пока заметно отставал, поэтому Орнас благополучно добрался до ближайшей колонны и укрылся за ней.\n   Не успел он перевести дух после рывка, как всё помещение сотряслось от чудовищного удара: огромный монстр на всей скорости врезался в каменную колонну, за которой затаился юноша, отчего она",
        "merge": true,
        "var_equal": [
          "result47",
          3
        ]
      },
      {
        "id": 47,
        "text": "\n   Едва сделав несколько шагов, юноша почувствовал острую боль в ноге. Рана, полученная в сражении с обитателями храма, не позволяла юноше бежать с максимальной скоростью, и терентатеку удалось моментально сократить дистанцию. Орнас не успел даже обернуться, когда чудовищная лапа обрушилась на него и отбросила на жёсткий пол.\n   Юный джедай поднялся прыжком на ноги, лишь чудом увернувшись от удара монстра, и заозирался по сторонам. Всего в нескольких шагах поблёскивала металлом дверь – его последняя надежда на спасение. Орнас вскинув руку, активируя с помощью Силы дверной механизм, и ринулся наружу.\n   Лязгнули тяжёлые створки двери позади, и джедай повалился на холодный пол. Ещё несколько минут он пытался отдышаться и восстановить силы, затем уверенно поднялся на ноги и почувствовал, что готов продолжить испытание.",
        "merge": true,
        "var_equal": [
          "result47",
          4
        ]
      },
      {
        "var_not": [
          "result47",
          2,
          "result47",
          4,
          "currentcolstat",
          2,
          "currentcolstat",
          3
        ],
        "var_equal": [
          "result47",
          1
        ],
        "id": 47,
        "text": " вся пошла крупными трещинами. Но и для терентатека столкновение не прошло без последствий: он явно был обескуражен и растерян, что давало Орнасу преимущество на какое-то время.",
        "merge": true
      },
      {
        "var_not": [
          "result47",
          2,
          "result47",
          4
        ],
        "var_equal": [
          "currentcolstat",
          2
        ],
        "id": 47,
        "text": " начала рушиться, поднимая облака пыли и погребая джедая и его противника под градом крупных осколков.",
        "merge": true
      },
      {
        "var_show": [
          "havetime"
        ],
        "var_random": [
          "havetime",
          0,
          3
        ],
        "id": 47,
        "text": "Изменить время:",
        "need": 1000
      },
      {
        "var_show": [
          "blooded"
        ],
        "var_random": [
          "blooded",
          0,
          1
        ],
        "id": 47,
        "text": "change stat",
        "need": 1000
      },
      {
        "var_not": [
          "result47",
          1,
          "result47",
          3
        ],
        "var_set": [
          "visited49",
          0,
          "fight158",
          0,
          "result47",
          0
        ],
        "id": 54,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmiddleRoom.result = 2\nend",
        "go_to": [
          "gofrom"
        ]
      },
      {
        "id": 55,
        "text": "Дальше",
        "var_not": [
          "result47",
          2,
          "result47",
          4
        ],
        "var_less": [
          "brokencoloumns",
          3
        ]
      },
      {
        "id": 183,
        "var_not": [
          "result47",
          2,
          "result47",
          4
        ],
        "text": "Дальше",
        "var_need": [
          "brokencoloumns",
          3
        ]
      }
    ]
  },
  {
    "id": 48,
    "text": "   Орнас использовал Силу, чтобы отвлечь внимание существ и незаметно пробраться в комнату. Не смотря на все усилия юноши, неизвестные звери зашевелились и начали медленно приближаться к тому месту, где он находился, реагируя, видимо, на запах. Маскировка оказалась бесполезной перед их чутьём.<s>r\n   Сражения было не избежать. Орнас приготовился к бою.",
    "answers": [
      {
        "id": 192,
        "text": "К бою",
        "var_add": [
          "darkside",
          1
        ],
        "var_not": [
          "fight192",
          1
        ]
      }
    ]
  },
  {
    "id": 49,
    "text": "   ",
    "answers": [
      {
        "var_equal": [
          "helmet270",
          1
        ],
        "id": 49,
        "text": "Джедай отбросил шлем в сторону, чтобы ничто не мешал ему в бою, и тот с гулким звуком покатился по полу.\n   ",
        "calculate": false,
        "merge": true
      },
      {
        "merge": false,
        "var_add": [
          "helmet270",
          1
        ],
        "var_equal": [
          "helmet",
          1
        ],
        "id": 270,
        "calculate": true,
        "text": " Орнас отбросил шлем в сторону, чтобы ничто не мешал ему в бою, и тот с гулким звуком покатился по полу.",
        "var_set": [
          "helmet",
          2
        ]
      },
      {
        "id": 49,
        "text": "Со всей решимостью Орнас бросился на монстра, уворачиваясь от исполинских лап и нанося световым мечом удары",
        "var_no_more": [
          "visited49",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": "Орнас вновь ринулся в атаку, оставаясь недосягаемым для ответных выпадов монстра. Его световой меч мелькал в темноте, нанося бесчисленные удары",
        "var_more": [
          "visited49",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": ", которые лишь едва повреждали почти каменную кожу терентатека.",
        "var_need": [
          "enemyhp",
          5
        ],
        "merge": true
      },
      {
        "var_need": [
          "enemyhp",
          3
        ],
        "var_less": [
          "enemyhp",
          5
        ],
        "text": ", которые всё больше и больше ослабляли могучего терентатека.",
        "id": 49,
        "merge": true
      },
      {
        "var_less": [
          "enemyhp",
          3
        ],
        "text": ", которые всё сильнее усугубляли раны утомлённого поединком монстра.",
        "id": 49,
        "merge": true
      },
      {
        "var_add": [
          "enemyhp",
          -1,
          "havetime",
          -1
        ],
        "id": 49,
        "calculate": true,
        "var_min": [
          "enemyhp",
          0,
          "havetime",
          0
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "var_add": [
          "enemyhp",
          -1
        ],
        "var_equal": [
          "style",
          1
        ],
        "id": 49,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 49,
        "text": "\n   Юноша чувствовал, что терентатек пока сильно уступал ему в скорости и был относительно безопасен.",
        "var_more": [
          "havetime",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": "\n   Юноша чувствовал, что терентатек не уступал ему в скорости и представлял серьёзную опасность.",
        "var_equal": [
          "havetime",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": "\n   Юноша чувствовал, что терентатек превосходил его в скорости и любые действия были смертельно опасны.",
        "var_no_more": [
          "havetime",
          0
        ],
        "merge": true
      },
      {
        "var_max": [
          "visited49",
          2
        ],
        "var_add": [
          "visited49",
          1
        ],
        "id": 49,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 49,
        "text": "Атаковать мечом",
        "var_more": [
          "havetime",
          0
        ]
      },
      {
        "id": 52,
        "text": "Атаковать мечом",
        "var_no_more": [
          "havetime",
          0
        ]
      },
      {
        "id": 47,
        "text": "Бежать к ближайшей колонне",
        "var_set": [
          "coloumn55",
          -1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "ионную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_need": [
          "grenade1",
          1
        ],
        "var_equal": [
          "gren50",
          1
        ],
        "id": 50,
        "text": "Бросить ионную гранату",
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_set": [
          "ion160",
          1,
          "fail50",
          1
        ]
      },
      {
        "var_add": [
          "havetime",
          2
        ],
        "id": 51,
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "var_str_set": [
          "grentype160",
          "криогенную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_equal": [
          "gren50",
          1
        ],
        "text": "Бросить криогенную гранату",
        "var_need": [
          "grenade3",
          1
        ],
        "var_set": [
          "crio50",
          1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "плазменную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "text": "Бросить плазменную гранату",
        "var_equal": [
          "gren50",
          1
        ],
        "id": 50,
        "var_need": [
          "grenade4",
          1
        ],
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "var_set": [
          "plasm50",
          1,
          "fail50",
          1
        ]
      }
    ]
  },
  {
    "id": 50,
    "text": "   Орнас решил воспользоваться замешательством уже почти подобравшегося к нему терентатека. Он активировал световой меч и приготовился к сражению.",
    "answers": [
      {
        "id": 49,
        "text": "Атаковать мечом",
        "lua_if": "function lua_if()\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\ngrenade = grenade1 <plus> grenade3 <plus> grenade4\nreturn true\nend",
        "var_not": [
          "fail50",
          1
        ]
      },
      {
        "var_not": [
          "gren50",
          1
        ],
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 50,
        "var_need": [
          "grenade",
          1
        ],
        "text": "Использовать гранаты",
        "var_set": [
          "gren50",
          1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "ионную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "text": "Бросить ионную гранату",
        "id": 773,
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_need": [
          "grenade1",
          1
        ],
        "var_set": [
          "ion160",
          1,
          "fail50",
          1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "криогенную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_add": [
          "havetime",
          2
        ],
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "id": 51,
        "text": "Бросить криогенную гранату",
        "var_need": [
          "grenade3",
          1
        ],
        "var_set": [
          "crio50",
          1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "плазменную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_need": [
          "grenade4",
          1
        ],
        "id": 773,
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "text": "Бросить плазменную гранату",
        "var_set": [
          "plasm50",
          1,
          "fail50",
          1
        ]
      },
      {
        "id": 47,
        "text": "Бежать к ближайшей колонне",
        "var_not": [
          "fail50",
          1
        ]
      },
      {
        "var_not": [
          "grentype160",
          0
        ],
        "id": 160,
        "text": " Он сорвал с пояса",
        "var_show": [
          "grentype160",
          "гранату, активировал её и метнул в своего противника."
        ],
        "merge": true
      },
      {
        "var_not": [
          "grentype160",
          0
        ],
        "var_equal": [
          "plasm50",
          1
        ],
        "id": 50,
        "text": "<s>r\n   Огненный шторм поглотил и терентатека, и самого джедая, оказавшегося слишком близко к месту взрыва. Волосы на его голове загорелись, кожа покрылась волдырями, а лёгкие заполнились раскалённым воздухом. Орнас схватился за лицо, спасая глаза, и повалился навзничь, не в силах совладать с болью. Замутнённый взгляд юноши смог на секунду различить среди бушующего огня и дыма силуэт человека со световым мечом, стремительно мчащегося в его сторону, и в его сердце поселилась робкая надежда на спасение. Однако уже в следующее мгновение перед ним возник разъярённый монстр и занёс исполинскую лапу для решающего удара.<s>r\n   \"Ещё один джедай, который не смог\", – услышал Орнас еле различимый голос у себя в голове. Затем всё стихло.",
        "merge": true
      },
      {
        "var_equal": [
          "fail50",
          1
        ],
        "lua_if": "function lua_if()\n-- сделать переход на страницу \"очнулся после видения\"\nreturn true\nend",
        "blackout": true,
        "id": 92,
        "text": "Это конец?..",
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nhideMap = 0\nend\n",
        "var_set": [
          "global blockSaves",
          0
        ]
      },
      {
        "id": 160,
        "text": "\n   Взрыв ионной гранаты не причинил \nникакого вреда свирепому существу, оказавшемуся перед самым джедаем. Одним мощным взмахом чудовище сбило юношу с ног. Ни долгие тренировки, ни связь с Силой не смогли помочь Орнасу, он лежал на спине, пытаясь заслониться тонким лезвием светового меча от исполинского противника, уже занёсшего лапу для решающего удара.\n   \"Ещё один джедай, который не смог\", – услышал Орнас еле различимый голос у себя в голове. Затем всё стихло.",
        "merge": true,
        "var_equal": [
          "ion160",
          1
        ]
      }
    ]
  },
  {
    "id": 51,
    "text": "   Взрыв",
    "answers": [
      {
        "merge": false,
        "var_equal": [
          "crio160",
          1
        ],
        "id": 51,
        "calculate": true,
        "text": "полная заморозка",
        "var_set": [
          "havetime",
          4
        ]
      },
      {
        "merge": false,
        "var_equal": [
          "plasm160",
          1
        ],
        "id": 51,
        "text": "нейтрализация",
        "calculate": true,
        "var_set": [
          "havetime",
          1
        ]
      },
      {
        "var_equal": [
          "crio160",
          1
        ],
        "id": 51,
        "calculate": false,
        "text": " второй криогенной гранаты за столь небольшой промежуток времени полностью обездвижил огромного монстра, предоставив юноше ещё немного драгоценного времени.",
        "merge": true
      },
      {
        "var_equal": [
          "plasm160",
          1
        ],
        "id": 51,
        "calculate": false,
        "text": " криогенной гранаты не произвёл должного эффекта: пронизывающий насквозь холод лишь остудил объятого жаром после взрыва плазменной гранаты монстра. Но это всё-таки дало юноше немного времени для дальнейших действий.",
        "merge": true
      },
      {
        "var_not": [
          "fail50",
          1
        ],
        "lua_if": "function lua_if()\nreturn style ~= 1 or havetime <2\nend",
        "id": 49,
        "text": "Атаковать мечом",
        "var_set": [
          "crio160",
          0,
          "crio50",
          0,
          "plasm160",
          0,
          "plasm50",
          0
        ]
      },
      {
        "var_not": [
          "fail50",
          1
        ],
        "lua_if": "function lua_if()\nreturn style == 1 and havetime > 1\nend",
        "id": 49,
        "text": "Атаковать мечом",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "var_set": [
          "crio160",
          0,
          "crio50",
          0,
          "plasm160",
          0,
          "plasm50",
          0
        ]
      },
      {
        "id": 47,
        "text": "Бежать к ближайшей колонне",
        "var_not": [
          "fail50",
          1
        ],
        "var_set": [
          "crio160",
          0,
          "crio50",
          0,
          "plasm160",
          0,
          "plasm50",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nfail50 = 0\nend",
        "text": "Новый ответ. введите текст",
        "id": 51,
        "calculate": true
      }
    ]
  },
  {
    "id": 52,
    "text": "   ",
    "answers": [
      {
        "id": 54,
        "text": "Броситься к выходу",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "id": 52,
        "text": "Новая серия атак не увенчалась успехом. Могучий зверь одним быстрым взмахом чудовищной лапы опрокинул юношу на пол и замахнулся для решающего удара. Световой меч, выскочивший из руки джедая во время падения, лежал в нескольких шагах от Орнаса и не мог помочь ему. С неимоверным усилием юноша смог за доли секунды вскочить на ноги и отпрыгнуть в сторону, лишь чудом увернувшись от когтей монстра.\n   Орнас понимал, что исход боя уже не изменить, теперь главной задачей стало просто выжить в смертельной схватке и ускользнуть прочь из злосчастного зала.",
        "var_not": [
          "global previos_id",
          55
        ],
        "merge": true
      },
      {
        "id": 52,
        "text": "Атака юноши не увенчалась успехом. Могучий зверь одним быстрым взмахом чудовищной лапы опрокинул его на пол и замахнулся для решающего удара. Световой меч, выскочивший из руки джедая во время падения, лежал в нескольких метрах от Орнаса и не мог помочь ему. С неимоверным усилием юноша смог за доли секунды вскочить на ноги и отпрыгнуть в сторону, лишь чудом увернувшись от когтей монстра.<s>r\n   Орнас понимал, что исход боя уже не изменить, теперь главной задачей стало просто выжить в смертельной схватке и ускользнуть прочь из злосчастного зала.",
        "var_equal": [
          "global previos_id",
          55
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 53,
    "text": "   Орнас попытался заглянуть в узкое отверстие в стене, но не смог различить хоть что-нибудь: только темнота на несколько метров вперёд. По крайней мере, туда можно протиснуться боком, не опасаясь, что плита обрушится сверху.",
    "answers": [
      {
        "id": 62,
        "text": "Протиснуться внутрь",
        "var_set": [
          "laz",
          2
        ]
      },
      {
        "id": 53,
        "text": "Назад",
        "backstepCount": 1,
        "isBack": true
      }
    ]
  },
  {
    "id": 54,
    "text": "   Орнас со всех ног бросился к двери, через которую попал в эту комнату, из последних сил уворачиваясь от атак своего преследователя. Уже преодолев добрую половину расстояния до выхода, джедай вспомнил о своём потерянном в бою оружии: утрата светового меча обернулась бы полным провалом.\n   Ловко увернувшись от очередного удара монстра, Орнас с помощью Силы призвал рукоять меча в свою руку. Как только холодный металл коснулся его кожи, юноша распахнул дверь и нырнул в спасительный проём за ней, оставив чудовище ни с чем.\n   Повалившись на холодный пол, джедай несколько минут пытался отдышаться и восстановить силы. Спустя некоторое время он уверенно поднялся на ноги и почувствовал, что готов продолжить испытание.",
    "answers": [
      {
        "var_set": [
          "visited49",
          0,
          "fight158",
          0
        ],
        "lua_do": "function lua_do()\nmiddleRoom.result = 2\nend",
        "text": "Дальше",
        "id": 54,
        "go_to": [
          "gofrom"
        ]
      }
    ]
  },
  {
    "id": 55,
    "text": "   Орнас находился ",
    "answers": [
      {
        "id": 55,
        "text": "среди груды обломков каменной колонны, за которой до этого укрывался от огромного монстра.",
        "merge": true,
        "var_equal": [
          "currentcolstat",
          2
        ]
      },
      {
        "var_not": [
          "currentcolstat",
          2
        ],
        "var_equal": [
          "brokencoloumns",
          0
        ],
        "id": 55,
        "text": "за одной из четырёх каменных колонн, покрытой сетью трещин и едва держащейся после столкновения с огромным монстром.",
        "merge": true
      },
      {
        "var_not": [
          "currentcolstat",
          2
        ],
        "var_equal": [
          "brokencoloumns",
          1
        ],
        "id": 55,
        "text": "за одной из трёх оставшихся каменных колонн, покрытой сетью трещин и едва держащейся после столкновения с огромным монстром.",
        "merge": true
      },
      {
        "var_not": [
          "currentcolstat",
          2
        ],
        "var_equal": [
          "brokencoloumns",
          2
        ],
        "id": 55,
        "text": "за одной из двух оставшихся каменных колонн, покрытой сетью трещин и едва держащейся после столкновения с огромным монстром.",
        "merge": true
      },
      {
        "id": 55,
        "text": " Сам терентатек ещё не пришёл в себя после удара и растерянно озирался в поисках своей жертвы,",
        "var_need": [
          "havetime",
          2
        ],
        "merge": true
      },
      {
        "id": 55,
        "text": " Терентатек постепенно приходил в себя и медленно подбирался к юноше,",
        "var_equal": [
          "havetime",
          1
        ],
        "merge": true
      },
      {
        "id": 55,
        "text": " Терентатек полностью оправился после удара и мог в любую секунду ринуться на джедая,",
        "merge": true,
        "var_equal": [
          "havetime",
          0
        ]
      },
      {
        "id": 55,
        "text": " его взгляд излучал уверенность и холодную ненависть.",
        "var_more": [
          "enemyhp",
          5
        ],
        "merge": true
      },
      {
        "var_no_more": [
          "enemyhp",
          5
        ],
        "id": 55,
        "var_more": [
          "enemyhp",
          1
        ],
        "text": " в его глазах читалось удивление и досада – видимо, он не привык получать отпор.",
        "merge": true
      },
      {
        "id": 55,
        "text": " а в его взгляде смешались ярость дикого хищника и беспомощность загнанной жертвы.",
        "var_less": [
          "enemyhp",
          2
        ],
        "merge": true
      },
      {
        "id": 55,
        "text": " Три оставшиеся колонны удерживали сводчатый потолок тёмного зала.",
        "var_equal": [
          "currentcolstat",
          2,
          "brokencoloumns",
          1
        ],
        "merge": true
      },
      {
        "id": 55,
        "text": " Две оставшиеся колонны удерживали сводчатый потолок тёмного зала.",
        "merge": true,
        "var_equal": [
          "currentcolstat",
          2,
          "brokencoloumns",
          2
        ]
      },
      {
        "id": 55,
        "text": " Орнас чувствовал, что зверь почти повержен, оставалось лишь нанести решающий удар.",
        "var_less": [
          "enemyhp",
          2
        ],
        "merge": true
      },
      {
        "id": 188,
        "text": "Запрыгнуть на терентатека",
        "var_less": [
          "enemyhp",
          2
        ],
        "var_need": [
          "havetime",
          1
        ]
      },
      {
        "var_less": [
          "enemyhp",
          2
        ],
        "text": "Запрыгнуть на терентатека",
        "id": 252,
        "var_no_more": [
          "havetime",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn style == 1\nend",
        "var_more": [
          "havetime",
          0
        ],
        "id": 56,
        "var_need": [
          "enemyhp",
          2
        ],
        "text": "Атаковать мечом",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn not (style == 1)\nend",
        "id": 56,
        "var_more": [
          "havetime",
          0
        ],
        "text": "Атаковать мечом",
        "var_need": [
          "enemyhp",
          2
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn style == 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "id": 52,
        "var_need": [
          "enemyhp",
          2
        ],
        "text": "Атаковать мечом",
        "var_no_more": [
          "havetime",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn not (style == 1)\nend",
        "id": 52,
        "text": "Атаковать мечом",
        "var_need": [
          "enemyhp",
          2
        ],
        "var_no_more": [
          "havetime",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn style == 2\nend",
        "var_sub": [
          "enemyhp",
          2
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_equal": [
          "currentcolstat",
          1
        ],
        "id": 57,
        "text": "Обрушить колонну с помощью Силы",
        "lua_do": "function lua_do()\nstyle = style or 1\nenemyhp = enemyhp - (style == 2 and 1 or 0)\nend",
        "var_set": [
          "havetime",
          2,
          "currentcolstat",
          2
        ]
      },
      {
        "lua_do": "function lua_do()\nstyle = style or 1\nenemyhp = enemyhp - (style == 2 and 1 or 0)\nend",
        "lua_if": "function lua_if()\nreturn style ~= 2\nend",
        "var_equal": [
          "currentcolstat",
          1
        ],
        "id": 57,
        "var_sub": [
          "enemyhp",
          2
        ],
        "text": "Обрушить колонну с помощью Силы",
        "var_set": [
          "havetime",
          2,
          "currentcolstat",
          2
        ]
      },
      {
        "var_need": [
          "grenade1",
          1
        ],
        "id": 249,
        "text": "Метнуть ионную гранату",
        "var_less": [
          "havetime",
          1
        ],
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1,
          "havetime",
          1
        ]
      },
      {
        "id": 58,
        "text": "Метнуть ионную гранату",
        "var_need": [
          "havetime",
          1,
          "grenade1",
          1
        ],
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1,
          "havetime",
          1
        ]
      },
      {
        "var_add": [
          "havetime",
          2
        ],
        "id": 61,
        "var_need": [
          "grenade3",
          1
        ],
        "text": "Метнуть криогенную гранату",
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ]
      },
      {
        "var_not": [
          "currentcolstat",
          2
        ],
        "var_add": [
          "enemyhp",
          -3
        ],
        "id": 182,
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "var_need": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "text": "Метнуть плазменную гранату"
      },
      {
        "var_equal": [
          "currentcolstat",
          2
        ],
        "id": 250,
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "text": "Метнуть плазменную гранату",
        "var_need": [
          "grenade4",
          1,
          "grenade",
          1
        ]
      },
      {
        "id": 47,
        "text": "Бежать к следующей колонне",
        "var_set": [
          "coldirection",
          1
        ]
      },
      {
        "id": 47,
        "text": "Бежать к предыдущей колонне",
        "lua_if": "function lua_if()\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\nmiddleRoom = middleRoom or {}\nmiddleRoom.currentCol = middleRoom.currentCol or 0\ncoldirection = coldirection or 1\n\nreturn col2stat ~= 0 and (vars[\"col\" .. (middleRoom.currentCol - 1 > 0 and middleRoom.currentCol - 1 or 4) .. \"stat\"]) < 2\nend",
        "var_set": [
          "coldirection",
          2
        ]
      },
      {
        "var_show": [
          "coloumn55"
        ],
        "comment": true,
        "id": 55,
        "text": "Номер колонны:",
        "need": 1000
      }
    ]
  },
  {
    "id": 56,
    "text": "   ",
    "answers": [
      {
        "id": 49,
        "text": "Со всей решимостью Орнас бросился на монстра, уварачиваясь от исполинских лап и нанося световым мечом удары",
        "var_no_more": [
          "visited56",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": "Орнас вновь ринулся в атаку, оставаясь недосягаемым для ответных выпадов монстра. Его световой меч мелькал в темноте, нанося бесчисленные удары",
        "var_more": [
          "visited56",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": ", которые лишь едва повреждали почти каменную кожу терентатека.",
        "var_need": [
          "enemyhp",
          5
        ],
        "merge": true
      },
      {
        "var_need": [
          "enemyhp",
          3
        ],
        "id": 49,
        "text": ", которые всё больше и больше ослабляли могучего терентатека.",
        "var_less": [
          "enemyhp",
          5
        ],
        "merge": true
      },
      {
        "var_less": [
          "enemyhp",
          3
        ],
        "text": ", которые всё сильнее усугубляли раны утомлённого поединком монстра.",
        "id": 49,
        "merge": true
      },
      {
        "var_add": [
          "enemyhp",
          -1,
          "havetime",
          -1
        ],
        "id": 49,
        "calculate": true,
        "var_min": [
          "enemyhp",
          0,
          "havetime",
          0
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "var_add": [
          "enemyhp",
          -1
        ],
        "var_equal": [
          "style",
          1
        ],
        "id": 49,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 49,
        "text": "\n   Юноша чувствовал, что терентатек пока сильно уступал ему в скорости и был относительно безопасен.",
        "var_more": [
          "havetime",
          1
        ],
        "merge": true
      },
      {
        "id": 49,
        "text": "\n   Юноша чувствовал, что терентатек не уступал ему в скорости и представлял серьёзную опасность.",
        "merge": true,
        "var_equal": [
          "havetime",
          1
        ]
      },
      {
        "id": 49,
        "text": "\n   Юноша чувствовал, что терентатек превосходил его в скорости и любые действия были смертельно опасны.",
        "merge": true,
        "var_no_more": [
          "havetime",
          0
        ]
      },
      {
        "var_max": [
          "visited56",
          2
        ],
        "var_add": [
          "visited56",
          1
        ],
        "id": 49,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 55,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 57,
    "text": "   Орнас вскинул руку и направил мощный поток Силы на повреждённую колонну, задрожавшую от невидимого воздействия. Через несколько секунд она, не выдержав напора, обрушилась на терентатека, завалив его массивными обломками. Сквозь облако поднявшейся пыли юноша видел, как его противник медленно выбирается из под завала: терентатек был дезориентирован, но ещё не повержен.",
    "answers": [
      {
        "id": 55,
        "text": "Дальше",
        "var_less": [
          "brokencoloumns",
          3
        ]
      },
      {
        "id": 183,
        "var_need": [
          "brokencoloumns",
          3
        ],
        "text": "Дальше"
      },
      {
        "id": 251,
        "calculate": true,
        "lua_do": "function lua_do()\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\n\nmiddleRoom = middleRoom or {}\nvars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\nvars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] > 2 and 2 or vars[\"col\" .. middleRoom.currentCol .. \"stat\"] \nend",
        "text": "обновление"
      },
      {
        "var_equal": [
          "coloumn55",
          1
        ],
        "id": 251,
        "text": "обновление статуса колонны 1 после изменений",
        "calculate": true,
        "var_set": [
          "col1stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "обновление статуса колонны 2 после изменений",
        "var_set": [
          "col2stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          3
        ],
        "id": 251,
        "calculate": true,
        "text": "обновление статуса колонны 3 после изменений",
        "var_set": [
          "col3stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          4
        ],
        "id": 251,
        "calculate": true,
        "text": "обновление статуса колонны 4 после изменений",
        "var_set": [
          "col4stat",
          "currentcolstat"
        ]
      },
      {
        "var_not": [
          "251sup1",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col1stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup1",
          1
        ]
      },
      {
        "var_not": [
          "251sup2",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col2stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup2",
          1
        ]
      },
      {
        "var_not": [
          "251sup3",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col3stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup3",
          1
        ]
      },
      {
        "var_not": [
          "251sup4",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col4stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup4",
          1
        ]
      },
      {
        "var_show": [
          "brokencoloumns"
        ],
        "comment": false,
        "id": 251,
        "text": "Колонн сломано:",
        "need": 1000,
        "var_set": [
          "start251",
          0
        ]
      }
    ]
  },
  {
    "id": 58,
    "text": "   Сорвав с пояса ионную гранату, Орнас активировал её и бросил в сторону противника, однако взрыв не причинил никакого вреда ни терентатеку, ни самому юноше.<s>r\n   \"Только теряю время\", — понял Орнас, обдумывая свои дальнейшие действия.",
    "answers": [
      {
        "id": 55,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 59,
    "text": "   Орнас поднялся по получившимся ступеням и осторожно заглянул внутрь. Стены уходили вглубь на шаг или два, дальше начиналось какое-то помещение. Ширина и высота прохода позволяли юноше свободно пройти без риска оказаться стеснённым и беспомощным в случае опасности.",
    "answers": [
      {
        "id": 99,
        "text": "Пройти внутрь"
      },
      {
        "id": 59,
        "text": "Назад",
        "backstepCount": 1,
        "isBack": true
      }
    ]
  },
  {
    "id": 60,
    "text": "   Орнас немного задумался, а потом сказал неуверенно: \"Ум и проницательность. Способность здраво оценивать ситуацию, рассуждать логически и делать верные заключения\".\n– Это важные качества для джедая, безусловно, – проговорил учитель. – Но не забывай, что джедай должен следовать философии Ордена. Ценить Жизнь в её связи с Силой, быть внимательным, осторожным, быть способным защитить других и себя самого.",
    "answers": [
      {
        "id": 24,
        "text": "Форма I, Шии-Чо",
        "need": 1000
      },
      {
        "id": 18,
        "text": "Форма II, Макаши",
        "need": 1000
      },
      {
        "id": 19,
        "text": "Форма III, Соресу",
        "need": 1000
      },
      {
        "id": 20,
        "text": "Форма IV, Атару",
        "need": 1000
      },
      {
        "id": 21,
        "text": "Форма V, Шиен",
        "need": 1000
      },
      {
        "id": 22,
        "text": "Форма V, Джем Со",
        "need": 1000
      },
      {
        "id": 23,
        "text": "Форма VI, Ниман",
        "need": 1000
      },
      {
        "id": 159,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 61,
    "text": "   Сорвав с пояса криогенную гранату, Орнас активировал её и бросил в сторону противника. Раздавшийся через мгновение взрыв поразил могучего терентатека холодом, сковав его движения и существенно замедлив, что дало молодому джедаю ещё немного драгоценного времени.",
    "answers": [
      {
        "id": 55,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 62,
    "text": "   Орнас осторожно приблизился к отверстию и убедился, что каменная плита над ним надёжно держится на уступах стен. Он попытался заглянуть внутрь, но не смог различить в темноте проёма хоть что-нибудь. Взвесив все риски, юноша осторожно полез внутрь.<s>r\n   Темнота и неизвестность продолжались недолго. Уже через несколько шагов джедай добрался до места, где каменные стены больше не сдавливали его со всех сторон.",
    "answers": [
      {
        "id": 63,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn position < 6\nend"
      },
      {
        "id": 64,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn position >= 6\nend"
      }
    ]
  },
  {
    "id": 63,
    "text": "   Внезапно острая боль пронзила сознание Орнаса. Через мгновение он смог понять, что в его левое плечо вонзила два длинных зуба какая-то тварь. Длинное гибкое туловище без каких-либо конечностей пыталось обвиться вокруг жертвы, ещё глубже вонзая клыки в плоть.\n   Джедай с трудом поднялся на ноги и здоровой рукой освободил плечо от стальной хватки змеи, которая тут же изогнулась, вырвалась и отползла куда-то в сторону.\n   Наконец глаза юноши привыкли к мраку помещения, и он начал хоть как-то понимать обстановку. Неизвестное существо зашипело, готовясь к новой атаке.<s>r",
    "answers": [
      {
        "id": 66,
        "text": "Дальше",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.location1 = {bitenArms = 1, bitenLegs = 0}\nend"
      }
    ]
  },
  {
    "id": 64,
    "text": "   Внезапно, сознание Орнаса пронзила острая боль. Через мгновение он смог понять, что в его ногу вонзила два длинных зуба какая-то тварь. Длинное гибкое туловище без каких-либо конечностей пыталось обвиться вокруг жертвы, ещё глубже вонзая клыки в плоть.\n   Джедай с трудом выпрямился и освободился от стальной хватки змеи, которая тут же отползла куда-то в сторону. Укушенная нога начинала неметь.\n   Наконец глаза юноши привыкли к мраку помещения, и он начал хоть как-то понимать обстановку. Неизвестное существо зашипело, готовясь к новой атаке.<s>ufeff",
    "answers": [
      {
        "id": 66,
        "text": "Дальше",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.location1 = {bitenArms = 0, bitenLegs = 1}\nend"
      }
    ]
  },
  {
    "id": 65,
    "text": "   Джедай использовал Силу, чтобы перемещаться с запредельной для обычных существ скоростью. ",
    "answers": [
      {
        "id": 65,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = (location1.bitenLegs == 1 and \"Даже парализованная после укуса нога не способна была теперь ограничить возможности Орнаса.\" or \"\") .. \"<s>\n   Переместиться ...\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 139,
        "text": "Новый ответ. введите текст",
        "run": [
          139
        ]
      }
    ]
  },
  {
    "id": 66,
    "text": "   Джедай находился в тёмном помещении около стены, через узкий лаз в которой он попал внутрь",
    "answers": [
      {
        "comment": false,
        "lua_text": "function lua_text()\nlocation1 = location1 or {ornasPosition = 1, cage = 0, revealed = 0, time = 0, kuski = 1, activeSaber = 0}\nlocation1.bitenArms = location1.bitenArms or ornasStat.location1.bitenArms\nlocation1.bitenLegs = location1.bitenLegs or ornasStat.location1.bitenLegs\nlocation1.forcePoints = location1.forcePoints or (style == 2 and 5 or 4)\n\nend",
        "text": "Расположение Орнаса и начальные данные",
        "id": 146,
        "calculate": true,
        "lua_do": "function lua_do()\n-- ornasPosition = 1 -- внизу\nlocation1 = location1 or {ornasPosition = 1, cage = 0, revealed = 0, time = 0, kuski = 1, activeSaber = 0}\nlocation1.bitenArms = location1.bitenArms or ornasStat.location1.bitenArms\nlocation1.bitenLegs = location1.bitenLegs or ornasStat.location1.bitenLegs\nlocation1.forcePoints = location1.forcePoints or (style == 2 and 5 or 4)\nend",
        "merge": false
      },
      {
        "lua_text": "function lua_text()\nlocal text = (location1.activeSaber == 1 and \", держа в руке зажжённый световой меч\" or \"\") .. (location1.kuski == 2 and \". Обе половины разрубленной змеи всё ещё продолжали подозрительно извиваться рядом. \" or \". \")\n  if location1.revealed  == 1 then\n  text = text .. \"Тонкая полоска света, проходящего через лаз в стене, пересекала всю комнату, разделяя её на две части. \" .. (location1.cage == 0 and \"В дальнем левом углу лежала заваленная на бок металлическая клетка. \" or \"В дальнем левом углу ровно стояла металлическая клетка c распахнутой крышкой. \") .. \"В стене за спиной юноши, по его правую руку, на высоте нескольких метров располагался небольшой выступ. Двери у каждой из трёх стен выглядели запертыми. \" \n  end\ntext = text .. ( (location1.bitenLegs == 1 and location1.bitenArms == 0 and \"Укушенная существом нога была парализована. \") or (location1.bitenLegs == 2 and location1.bitenArms == 0 and \"Обе ноги джедая были парализованы ядом. \") or (location1.bitenLegs == 0 and location1.bitenArms == 1 and \"Рука, укушенная существом, была парализована. \") or (location1.bitenLegs == 1 and location1.bitenArms == 1 and \"Рука и нога юноши были парализованы ядом после укуса змеи. \") or (location1.bitenLegs == 2 and location1.bitenArms == 1 and \"Рука и обе ноги юноши были парализованы змеиным ядом. \") or \"\" ) .. (location1.kuski == 1 and (location1.time == 0 and \"<s>\n   Орнас чувствовал, что змея где-то совсем близко и готова атаковать.\" or \"<s>\n   Орнас чувствовал, что змея ещё недостаточно близко, чтобы атаковать.\") or \"\" )\nreturn text\nend",
        "id": 66,
        "text": "Генерация текста",
        "comment": true,
        "merge": true
      },
      {
        "id": 67,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed  ~= 1 and b ~=1\nend",
        "lua_do": "function lua_do()\nlocation1.revealed  = 1\nend"
      },
      {
        "id": 89,
        "text": "Использовать Силу",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn b ~=1\nend"
      },
      {
        "id": 69,
        "text": "Активировать световой меч",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.activeSaber == 0  and b ~=1\nend",
        "lua_do": "function lua_do()\nlocation1.activeSaber = 1\nend"
      },
      {
        "id": 139,
        "text": "Переместиться",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenLegs < 2 and b ~=1\nend"
      },
      {
        "id": 142,
        "text": "Забраться на уступ",
        "lua_if": "function lua_if()\n-- Неудача\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenArms >= 1 and b ~=1\nend"
      },
      {
        "id": 150,
        "text": "Забраться на уступ",
        "lua_if": "function lua_if()\n-- Удачно\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenArms == 0 and b ~=1\nend"
      },
      {
        "id": 73,
        "text": "Медитировать, чтобы восстановить концентрацию и связь с Силой",
        "lua_if": "function lua_if()\nreturn location1.forcePoints < 3 and location1.kuski == 2 and location1.time ~=0\nend",
        "lua_do": "function lua_do()\nlocation1.forcePoints = 4\nend"
      },
      {
        "lua_do": "function lua_do()\nlocation1.time = location1.time - 1\nend",
        "text": "Ждать",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.time >= 1 and b ~=1\nend",
        "id": 66
      },
      {
        "id": 101,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.time == 0 and location1.kuski == 2\nend"
      }
    ]
  },
  {
    "id": 67,
    "text": "   Юноша быстро оглядел комнату.<s>r\n   Это было просторное помещение с высоким потолком. На каждой из стен, кроме той, что оказалась теперь за спиной Орнаса, располагалось по двери. В дальнем левом углу лежала поваленная металлическая клетка с откинутой крышкой, державшейся на ржавых петлях. В стене за спиной джедая на высоте нескольких метров располагался достаточно большой уступ, на котором смог бы уместиться человек.",
    "answers": [
      {
        "super_calculate": false,
        "id": 67,
        "calculate": true,
        "lua_do": "function lua_do()\nlocation1.revealed = 1\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_if": "function lua_if()\n-- есть время в запасе\nreturn location1.time >= 1\nend",
        "lua_do": "function lua_do()\nlocation1.time = location1.time - 1\nend",
        "backstepCount": 1,
        "text": "Дальше",
        "id": 67,
        "isBack": true
      },
      {
        "id": 74,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- новый укус одной змеи\nlocal a =  location1.bitenLegs <plus> location1.bitenArms\nreturn location1.time == 0 and a < 3 and location1.kuski == 1\nend"
      },
      {
        "id": 80,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- добивание одной змеи\nlocal a = location1.bitenLegs <plus> location1.bitenArms\nreturn location1.time == 0 and a == 3 and location1.kuski == 1\nend",
        "var_no_more": [
          "time",
          0
        ]
      },
      {
        "id": 101,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- нет времени, встреча с первыми производными змеями\nreturn location1.time == 0 and location1.kuski == 2 \nend",
        "var_no_more": [
          "time",
          0
        ]
      }
    ]
  },
  {
    "id": 68,
    "text": "   Десс кратко поведала юноше свою историю. Оказывается, она была рыцарем-джедаем и прибыла в это место вместе с наставницей, выполняя поручение Совета. Вместе они без труда обезвредили все ловушки на первом уровне храма, но до второго так и не добрались. Влияние Тёмной стороны Силы свело с ума спутницу Десвиар, и между ними началось сражение.<s>r\n   Юноша слушал рассказ с сомнением, но не перебивал и не задавал никаких воспросов. Он понимал, что открытое недоверие не приведёт ни к чему хорошему, и чтобы добраться до истины, нужно действовать деликатнее.<s>r\n– И вот, когда я уже совсем выбилась из сил и с трудом сдерживала натиск, – мрачно вещала Десс, – она загнала меня в угол. И тут — хлоп! Я в ловушке. Последнее, что я помню, – как она всё-таки поднялась на второй этаж и скрылась там. Не знаю, сколько времени я продержалась там без еды и воды, в полном отчаянии. Кажется, у меня были какие-то галлюцинации. А затем я очнулась и увидела тебя. Неудивительно, что после такого мне начисто отшибло память и вела я себя немного.... Странно... Ты уж извини, если что.",
    "answers": [
      {
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.trust = dess.trust or a_tia_trust\nlocal text = \"<s>\n   Десвиар сделала глубокий вдох, медленно выдохнула и положила руку на плечо юноши.<s>\n– Я расскажу тебе то, что вспомнила сейчас, – тихо произнесла она\"\n  if dess.trust < -5 then\n    text = text .. \", медленно проходя за спину Орнаса, – максимально кратко.<s>\n   Джедай не успел понять, что произошло, даже не почувствовал удар. Только лёгкое головокружение, а затем темнота.\"\n    dess.trait = 1\n  else\n    text = text .. \".\"\n    dess.trait = 0\n    end\nreturn text\nend",
        "id": 68,
        "text": "Генерация текста",
        "lua_if": "function lua_if()\nreturn g.current_id ~=68\nend",
        "merge": true
      },
      {
        "id": 245,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- возвращение в комнату после предательства Десс\ndess = dess or {}\ndess.trait = dess.trait or 0\nreturn g.current_id ~=68 and dess.trait == 1\nend",
        "lua_do": "function lua_do()\narm1 = arm1 or 0\narm2 = arm2 or 0\narm3 = arm3 or 0\narm = {arm1,arm2,arm3}\narm1 = 2\narm2 = 2\narm3 = 2\nlocation1 = location1 or {}\nlocation1.lastChanceKey = (location1.lastChanceKey or 5) - 1\n\ng.achievements = g.achievements or {}\ng.achievements.diploProblem2 = g.achievements.diploProblem2 or 0\n\ng.achievements.alarm = g.achievements.diploProblem2 == 0 and -24 or 0\ng.achievements.diploProblem2 = 1\n\nend"
      },
      {
        "id": 75,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn g.current_id == 68\nend"
      }
    ]
  },
  {
    "id": 69,
    "text": "   В мгновение ока световой меч оказался в руках Орнаса. Ровное свечение клинка озарило комнату ярким светом и придало джедаю уверенности.<s>r\n   В этот же момент змея бросилась в атаку. Широким взмахом клинка Орнас разрубил существо надвое. Обе половины змеи зашевелились в предсмертных судорогах. Джедай окинул их беглым взглядом, но оставил оружие в руке.",
    "answers": [
      {
        "lua_do": "function lua_do()\nlocation1.kuski = 2\nlocation1.time = 1\nend",
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 1,
        "id": 69
      }
    ]
  },
  {
    "id": 70,
    "text": "   Джедай использовал Силу, чтобы перемещаться с запредельной для обычных существ скоростью. ",
    "answers": [
      {
        "id": 139,
        "text": "Set up the trigger",
        "super_calculate": false,
        "backstepCount": 1,
        "calculate": true,
        "lua_do": "function lua_do()\nlocation1.trigger = location1.trigger == \"forceTransition\" and \"forceTransition\" or \"transition\"\nend",
        "isBack": true
      },
      {
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 2 \nlocation1.time = 1\nlocation1.forcePoints = location1.forcePoints - 1\ncomplex = complex or {}\ncomplex.tracks = 0\nend",
        "text": "... к клетке в левом углу",
        "lua_if": "function lua_if()\nreturn location1.ornasPosition ~= 2 \nend",
        "id": 76
      },
      {
        "id": 70,
        "isBack": true,
        "text": "[Назад]",
        "lua_do": "function lua_do()\nlocation1.trigger = \"no\"\nend",
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 71,
    "text": "   Орнас закрыл глаза и Сила наполнила его сознание различными видениями. Сфокусировавшись на нужном образе, он сумел предугадать ближайшие действия противника и избежать нападения.<s>r\n   Это дало ему немного времени до следующей атаки.",
    "answers": [
      {
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nend",
        "text": "Дальше",
        "id": 71,
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 72,
    "text": "   Сконцентрировавшись, Орнас с помощью Силы поднял своего противника в воздух. Змея, извиваясь в невидимой хватке, зависла в метре над полом.\n",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn location1.forcePoints == 0\nend",
        "id": 72,
        "text": "   Орнас почувствовал, что его концентрации сейчас недостаточно, чтобы сделать что-то ещё, используя Силу. Нужно немного перевести дыхание в спокойной обстановке, чтобы восстановить связь с Силой.",
        "comment": true,
        "merge": true
      },
      {
        "id": 87,
        "text": "Отпустить змею"
      },
      {
        "id": 82,
        "text": "Переместить змею в клетку",
        "lua_if": "function lua_if()\n-- результат, расчёты очков Силы и времени на следующей странице\nreturn location1.forcePoints > 0 and location1.revealed == 1 \nend"
      },
      {
        "id": 98,
        "text": "Отбросить змею",
        "lua_if": "function lua_if()\nreturn location1.forcePoints > 0 \nend",
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn isHistoryContain(151) and location1.forcePoints > 0\nend",
        "id": 152,
        "text": "Переместить змею под луч света",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nend"
      }
    ]
  },
  {
    "id": 73,
    "text": "   Орнас сделал глубокий вдох и закрыл глаза. Прислушиваясь к звукам собственного дыхания, он сделал ещё несколько полных вдохов и выдохов, ощущая, как вместе с воздухом его тело наполняется жизненными силами. \n   Джедай открыл глаза и почувствовал, что теперь, после этой короткой медитации, он достаточно собран для использования способностей Силы.",
    "answers": [
      {
        "id": 73,
        "text": "Дальше",
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nlocation1.time = vars[\"goto\"] == 141 and 1 or 0\nend",
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 74,
    "text": "   Не рассчитав время атаки змеи, Орнас упустил момент внезапного броска. Он не успел увернуться от распахнутой пасти чудовища и сразу почувствовал, как клыки впились в его ",
    "answers": [
      {
        "id": 74,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = ( (location1.bitenLegs == 0 and \"ногу. Через мгновение острая боль пронзила всё его тело, укушенная нога начала неметь,\") or (location1.bitenLegs == 1 and location1.bitenArms == 1 and \"вторую ногу. Через мгновение острая боль пронзила всё тело, укушенная нога начала неметь,\" ) or (location1.bitenLegs == 1 and location1.bitenArms == 0 and \"левое плечо. Через мгновение острая боль пронзила всё тело, укушенная рука начала неметь,\") or \" где-то ошибка! \" ) .. \" а змея уже готовилась к новой атаке.\"\n\nlocal a = (location1.bitenLegs == 0 and location1.bitenArms == 0 and 1) or (location1.bitenLegs == 0 and location1.bitenArms == 1 and 2) or (location1.bitenLegs == 1 and location1.bitenArms == 0 and 3) or 4\n\nif a == 1 then\n  location1.bitenLegs = 1\n  location1.bitenArms = 0\nelseif a==2 then\n  location1.bitenLegs = 1\n  location1.bitenArms = 1\nelseif a==3 then\n  location1.bitenLegs = 1\n  location1.bitenArms = 1\nelseif a==4 then\n  location1.bitenLegs = 2\n  location1.bitenArms = 1\nend\n\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nreturn text\nend",
        "merge": true
      },
      {
        "id": 74,
        "text": "Дальше",
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 75,
    "text": "– И что ты собираешь делать теперь? – спросил Орнас.<s>r\n– Я должна закончить миссию, – сухо отозвалась Десс. – ",
    "answers": [
      {
        "id": 75,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.trust = dess.trust or a_tia_trust\nlocal text = \"\"\n\nlocal b = dess.trust > 8 and \"<s>\n– Ну, обезвредить – не значит уничтожить, – улыбнулась Десвиар. – Например, где-то здесь были звери, которые становятся агрессивными от яркого света, но успокаиваются при звуке человеческого голоса. \" or \"\"\n\nlocal d = dess.trust > 8 and dess.understanding == 1 and \"<s>\n– Я тоже встретил таких, – вставил Орнас, – и именно так их и <s><s>\"обезвредил<s><s>\".<s>\n   Десс удивлённо приподняла брови и опять улыбнулась.<s>\n– \" or \"<s>\n   Она прикрыла глаза и задумалась на мгновенье.<s>\n– \"\n\nlocal e = dess.trust > 8 and \"Хотя без оружия и правда нельзя, – согласилась девушка. –\" or \" Да, без оружия и правда нельзя, – немного нараспев протянула девушка. –\"\n\nlocal c = lightsaber == 1 and \" Хорошо, что ты уже нашёл мой световой меч.<s>\n   Десс смотрела прямо на пояс Орнаса, на котором был закреплён найденный клинок.\" or \" Я чувствую, что мой световой меч где-то здесь. Может быть, ты сможешь найти его для меня?<s>\n– Да, конечно, я постараюсь, – без энтузиазма отозвался джедай.\"\n\nlocal a = ornasStat.darkside < 0 and dess.trust >8 and 1 or 0\ntext = (a==1 and \"И узнать, что стало с моей наставницей.\") or \"И отомстить.\"\ntext = text .. \"<s>\n– Не знаю, какие вы обезвредили ловушки, но здесь всё ещё довольно небезопасно, – заметил джедай, – а у тебя даже нет оружия.\"\ntext = text .. b .. d .. e .. c\ndess.bonus = dess.trust > 8 and 1 or 0\n\ndess.understanding = dess.understanding == 1 and dess.trust > 8 and 2 or dess.understanding \nreturn text\nend",
        "merge": true
      },
      {
        "id": 122,
        "text": "Отдать световой меч",
        "lua_if": "function lua_if()\nreturn lightsaber == 1\nend",
        "lua_do": "function lua_do()\nlightsaber = 2\nend"
      },
      {
        "id": 453,
        "text": "Дальше",
        "lua_if": "function lua_if()\n return lightsaber ~= 1\nend",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.stage = 3\nend"
      }
    ]
  },
  {
    "id": 76,
    "text": "   Орнас ",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nif location1.trigger == \"forceTransition\" then\n    text = \"в одно мгновение преодолел расстояние, отделявшее его от клетки в углу. Добравшись до цели, он развернулся лицом к противнику, надеясь не пропустить момент атаки.\"\n    location1.trigger = \"no\"\n  else text = (location1.bitenLegs == 0 and \"бросился к клетке в углу.\" or \"изо всех сил рванулся к клетке в углу, с трудом преодолевая сопротивление онемевшей ноги и потратив на это больше времени, чем рассчитывал.\") .. \" Добравшись до цели, он развернулся лицом к противнику, надеясь не пропустить момент атаки.\"\n  end\nreturn text .. \" Змеи кружили в темноте около Орнаса, не решаясь пока атаковать.\"\nend",
        "id": 144,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn g.current_id == 76\nend",
        "merge": true
      },
      {
        "id": 102,
        "text": "Новый ответ. введите текст",
        "run": [
          102
        ]
      }
    ]
  },
  {
    "id": 77,
    "text": "   Орнас использовал Силу, чтобы многократно усилить физические возможности своего организма, и без труда запрыгнул на уступ в стене.<s>r\n   ",
    "answers": [
      {
        "id": 77,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = (location1.kuski == 1 and \"Змея продолжала извиваться в бессильной ярости внизу, из чего юноша сделал вывод, что забраться так высоко ей не под силу.\" or location1.kuski == 2 and \"Разрубленные половины змеи продолжали извиваться внизу.\" or \"Уменьшенные копии разрубленной змеи в бессильной ярости извивались внизу, не в силах добраться до юноши.\")\nreturn text\nend",
        "merge": true
      },
      {
        "id": 141,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 78,
    "text": "   Орнас сосредоточился на металлической клетке в углу комнаты и та, подхваченная Силой, плавно поднялась в воздух, развернулась и аккуратно приземлилась уже вертикально. Теперь ничто не помешает быстро захлопнуть крышку в случае необходимости.",
    "answers": [
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 79,
    "text": "   Орнас использовал Силу, чтобы многократно усилить физические возможности своего организма, однако онемевшая нога не позволила юноше успешно совершить прыжок.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\n  if location1.trigger == \"transition\" then\n    location1.time = location1.bitenLegs == 0 and location1.time or location1.time - 1\n    location1.time = location1.time <= 0 and 0 or location1.time\n    location1.trigger = \"no\"\n  elseif location1.trigger == \"forceTransition\" then\n    location1.time = location1.time <plus> 1\n  end\nlocation1.time = location1.ornasPosition == 0 and 1 or location1.time\nend",
        "text": "Дальше",
        "calculate": true,
        "id": 79
      },
      {
        "lua_if": "function lua_if()\n-- есть время в запасе\nlocation1.final = location1.final or 0\nreturn location1.time >= 1 and location1.final == 0\nend",
        "id": 79,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocation1.time = location1.ornasPosition == 0 and 1 or location1.time - 1\n  if location1.trigger == \"forceTransition\" then\n    location1.trigger = \"no\"\n  end\nend",
        "go_to": [
          "goto"
        ]
      },
      {
        "id": 74,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- новый укус одной змеи\nlocal a =  location1.bitenLegs <plus> location1.bitenArms\nreturn location1.time == 0 and a < 3 and location1.kuski == 1\nend"
      },
      {
        "id": 80,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- добивание одной змеи\nlocal a = location1.bitenLegs <plus> location1.bitenArms\nreturn location1.time == 0 and a == 3 and location1.kuski == 1\nend",
        "var_no_more": [
          "time",
          0
        ]
      },
      {
        "id": 101,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- нет времени, встреча с первыми производными змеями\nreturn location1.time == 0 and location1.kuski == 2 \nend",
        "var_no_more": [
          "time",
          0
        ]
      },
      {
        "id": 88,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- когда сбежал сразу после атаки 4 змей\nreturn location1.kuski == 4 and location1.time == 0 and location1.final == 0\nend",
        "lua_do": "function lua_do()\nlocation1.time = 1\nend"
      },
      {
        "id": 102,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.final == 1\nend",
        "run": [
          102
        ]
      }
    ]
  },
  {
    "id": 80,
    "text": "   Ноги Орнаса окончательно парализовало, и он медленно сполз по стене, ища в себе силы продолжить борьбу. Он чувствовал, что враг совсем близко, что вот-вот будет нанесён решающий удар.<s>r\n   Джедай полулежал во тьме комнаты, оперевшись на здоровую руку. Внезапно в темноте блестнули оранжевые глаза и прямо перед лицом Орнаса возникла змея. Обессиленно распластавшись на холодном полу, юноша почти ничего не чувствовал, лишь холодная отрешённость пришла на смену всем пылающим переживаниям последних минут.<s>r\n   Чудовище как будто наслаждалось его беспомощностью. Какое-то время змея пристально смотрела прямо в глаза Орнаса, будто ожидая чего-то.<s>r Наконец, словно устав от игры и вдоволь насытившись страданиями юноши, она медленно поползла к его шее.",
    "answers": [
      {
        "id": 81,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nlocation1.lose = 1\nlocation1.kuski = location1.kuski == 1 and 1 or 10\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 81,
    "text": "   Орнас закрыл глаза, и его сознание наполнилось образами минувших событий...<s>r\n   Вот он стоит в просторном светлом коридоре в храме джедаев на Корусанте – столице галактической Республики. Недалеко от него – шахта турболифта, на котором можно подняться на верхние этажи шпиля Высшего Совета джедаев. <s>r\n   По коридору спешат по своим делам джедаи всех рас и возрастов, их негромкие голоса сливаются в монотонный гул. Около высокого окна застыл один из мастеров Высшего Совета – старый инородец-иктотчи, известный своим даром к предвидению. Задумчиво смотря прямо перед собой, он словно не замечал никого и ничего вокруг.<s>r\n   С другой стороны от Орнаса расположилась в тени группа падаванов, его ровесников.<s>r\n   Учитель как обычно задерживался после окончания заседания Совета: наверное опять пытался в чём-то убедить других магистров по отдельности. Находиться в таком оживленном месте одному Орнасу было некомфортно.",
    "answers": [
      {
        "super_calculate": false,
        "id": 81,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\npanel3 = 1\nornasStat.location1.bitenArms = location1.bitenArms\nornasStat.location1.bitenLegs = location1.bitenLegs\nornasStat.darkside = ornasStat.darkside or 0\ncomplex = complex or {}\ncomplex.tracks = complex.tracks or 1\nend"
      },
      {
        "id": 164,
        "text": "Подойти к мастеру"
      },
      {
        "id": 165,
        "text": "Подойти к падаванам"
      },
      {
        "id": 166,
        "text": "С помощью Силы узнать, чем занят учитель",
        "lua_do": "function lua_do()\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 82,
    "text": "   Подхваченная невидимой силой, змея медленно пролетела в дальний угол и, всё ещё не переставая извиваться всем телом, опустилась внутрь клетки.",
    "answers": [
      {
        "id": 106,
        "text": "Новый ответ. введите текст",
        "run": [
          106
        ]
      }
    ]
  },
  {
    "id": 83,
    "text": "   Крышка клетки пронзительно взвизгнула ржавыми петлями и захлопнулась раньше, <s>r\n",
    "answers": [
      {
        "id": 83,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = (location1.kuski == 1 and \"чем существо успело хотя бы подумать о побеге из ловушки.\" or \"чем его противники успели хотя бы подумать о побеге из ловушки.\") .. \" Два замка защёлкнулись, надёжно заперев незамысловатую конструкцию.<s>\n   Теперь, когда опасность оказалась надёжно заточена внутри, Орнас наконец-то смог перевести дух.\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 81,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nlocation1.lose = 0\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 84,
    "text": "   Орнас попытался закрыть крышку, но та была придавлена к полу весом всей клетки и не поддавалась, делая бесполезными дальнейшие усилия юноши. Джедай пожалел, что не перевернул клетку, пока была такая возможность.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nend",
        "calculate": true,
        "text": "Расчёт, куда возвращать игрока",
        "id": 84
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 84\nend",
        "lua_text": "function lua_text()\nlocal text = location1.kuski == 1 and \" Тем временем существо проворно выбралось из клетки и вновь готовилось к нападению.\" or \" Юноша не сразу заметил, что пока он возился с крышкой, сама клетка оказалась пуста.\"\nreturn text\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": false,
        "text": "Генерация текста",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn location1.kuski <= 2\nend",
        "lua_do": "function lua_do()\nlocation1.time = location1.time <plus> 1\nend",
        "text": "Дальше",
        "id": 84,
        "go_to": [
          "goto"
        ]
      },
      {
        "id": 102,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.kuski > 2\nend",
        "run": [
          102
        ]
      }
    ]
  },
  {
    "id": 85,
    "text": "   Отпустив хватку Силы, Орнас стремительно побежал к клетке, надеясь запереть там своего противника. Но не успел он преодолеть и половины расстояния, как клетка оказалась пуста. Это вынудило юношу отступить назад.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nlocation1.ornasPosition = location1.ornasPosition == 0 and 1 or location1.ornasPosition\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 85
      },
      {
        "id": 84,
        "text": "Новый ответ. введите текст",
        "run": [
          84
        ]
      }
    ]
  },
  {
    "id": 86,
    "text": "   Как только враг оказался внутри клетки, Орнас одной рукой захлопнул крышку. Лязгнули два ржавых замка, надёжно заперев ловушку.<s>r\n   Теперь, когда опасность оказалась надёжно заточена внутри, Орнас наконец-то смог перевести дух.",
    "answers": [
      {
        "id": 81,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nlocation1.lose = 0\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 87,
    "text": "   Орнас отпустил хватку Силы, и существо тут же уползло куда-то в темноту комнаты. Джедай чувствовал, что у него есть совсем немного времени, пока его противник готовится к новому нападению. ",
    "answers": [
      {
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nlocation1.time = 1\nend",
        "text": "Дальше",
        "id": 87,
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 88,
    "text": "   Почти сразу же юноша почувствовал, что змеи окружили его. Если он сейчас же ничего не предпримет, то шанса справиться с ними у него не останется.",
    "answers": [
      {
        "id": 76,
        "text": "Новый ответ. введите текст",
        "run": [
          76
        ]
      }
    ]
  },
  {
    "id": 89,
    "text": "   Орнас сконцентрировался на потоке Силы, протекающем через него, чтобы использовать способности джедая.",
    "answers": [
      {
        "comment": true,
        "id": 89,
        "text": " Однако почти сразу почувствовал, что его концентрации сейчас недостаточно.\n   Нужно немного перевести дыхание в спокойной обстановке, чтобы восстановить связь с Силой.",
        "lua_if": "function lua_if()\nlocation1.snakesDetected = location1.snakesDetected or 0\nreturn location1.forcePoints == 0\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\nlocation1.time = location1.time <plus> 1\nlocation1.forcePoints = location1.forcePoints - 1\nend",
        "text": "Предвидение Силы",
        "lua_if": "function lua_if()\nreturn location1.forcePoints > 0 and location1.ornasPosition > 0 and location1.kuski == 1\nend",
        "id": 71
      },
      {
        "id": 65,
        "text": "Быстрое перемещение",
        "lua_if": "function lua_if()\n-- Для всех случаев, кроме как после разрубания находится не около клетки\nlocal a = location1.kuski == 4 and location1.ornasPosition ~= 2 and 1 or 0\nreturn location1.forcePoints > 0 and location1.revealed == 1 and location1.bitenLegs ~= 2 and a == 0 and location1.kuski ~= 2\nend",
        "lua_do": "function lua_do()\nlocation1.trigger = \"forceTransition\"\nend"
      },
      {
        "lua_do": "function lua_do()\nlocation1.trigger = \"forceTransition\"\nend",
        "text": "Быстрое перемещение",
        "lua_if": "function lua_if()\n-- Только если после разрубания не находится около клетки\nlocal a = location1.kuski == 4 and location1.ornasPosition ~= 2 and 1 or 0\nreturn location1.forcePoints > 0 and location1.revealed == 1 and location1.bitenLegs ~= 2 and a == 1\nend",
        "id": 70
      },
      {
        "lua_do": "function lua_do()\nlocation1.forcePoints =  location1.forcePoints - 1 \nend",
        "text": "Переместить разрубленную змею в клетку",
        "lua_if": "function lua_if()\nreturn location1.revealed == 1 and location1.kuski == 2 and location1.forcePoints > 0 and location1.time == 1 and location1.snakesDetected == 0\nend",
        "id": 109
      },
      {
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nend",
        "text": "Поднять змею в воздух с помощью Силы",
        "lua_if": "function lua_if()\nreturn location1.forcePoints > 0 and location1.kuski == 1\nend",
        "id": 72
      },
      {
        "id": 106,
        "text": "Переместить всех врагов в клетку с помощью Силы",
        "lua_if": "function lua_if()\nreturn location1.forcePoints > 0 and location1.snakesDetected == 1\nend"
      },
      {
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nlocation1.ornasPosition = 0\nend",
        "text": "Запрыгнуть на уступ с помощью Силы",
        "lua_if": "function lua_if()\n-- успех\nreturn location1.forcePoints > 0 and location1.bitenLegs == 0 and  location1.revealed == 1 and location1.ornasPosition == 1\nend",
        "id": 77
      },
      {
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nend",
        "text": "Запрыгнуть на уступ с помощью Силы",
        "lua_if": "function lua_if()\n-- неудача\nreturn location1.forcePoints > 0 and location1.bitenLegs == 1 and location1.revealed == 1 and location1.ornasPosition == 1\nend",
        "id": 79
      },
      {
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nlocation1.cage = 1\nend",
        "text": "Перевернуть клетку с помощью Силы",
        "lua_if": "function lua_if()\nreturn location1.forcePoints > 0 and location1.cage == 0 and location1.revealed == 1\nend",
        "id": 78
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "id": 108,
        "text": "Усмирить змею c помощью Силы",
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 2\nend",
        "lua_if": "function lua_if()\n-- временное усмирение\nreturn style == 2 and location1.forcePoints > 1 and location1.kuski == 1\nend"
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ],
        "id": 153,
        "text": "Усмирить змею с помощью Силы",
        "lua_do": "function lua_do()\nornasStat.darkside = (ornasStat.darkside or 0) - 3\nend",
        "lua_if": "function lua_if()\n-- постоянное усмирение\nreturn style == 5 and location1.forcePoints > 1 and location1.ornasPosition == 0 and location1.kuski == 1\nend"
      },
      {
        "id": 89,
        "text": "[Назад]",
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nend",
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 90,
    "text": "   Неожиданно, на плечо Орнаса опустилась ладонь учителя, как это часто бывало в храме джедаев на Корусанте. Юноша обнаружил себя стоящим с вытянутой рукой перед",
    "answers": [
      {
        "id": 90,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = ( (location1.kuski == 11 and \" встревоженным, но всё ещё живым существом\") or (location1.kuski == 1 and \" клеткой со всё ещё живым существом\") or \" клеткой со всё ещё живыми существами\") .. \".<s>\n– Что с тобой? – обеспокоенно спросил наставник.<s>\n– Ничего... – пробормотал Орнас в ответ, с трудом осознавая произошедшее. – Мне было видение.<s>\n– Я чувствую, что тьма сгущается вокруг тебя. Ты должен быть осторожнее.\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 177,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 91,
    "text": "   Юноша резким движением вскинул руку, и в то же мгновение с кончиков его пальцев сорвались тонкие голубые молнии. С громким треском они заскользили по корпусу дроида, расплавляя металл и оставляя шрамы чёрных опалин. Зазвенели взрывающиеся от высокой температуры стеклянные элементы. Яркие вспышки отражались в глазах Орнаса и слепили его, но он не мог отвести взгляд.\n   Очередной всполох молний с силой отбросил искарёженные остатки дроида в стоящий рядом сейф. Раздался взрыв. Джедай с неохотой сжал кулаки, останавливая разразившийся по его воле электрический шторм, и огляделся. Только осколки микросхем и оплавленные детали напоминали теперь о надоедливом механизме.",
    "answers": [
      {
        "id": 219,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndestroy224 = 1\nend"
      }
    ]
  },
  {
    "id": 92,
    "text": "   Юноша резко открыл глаза и с трудом вдохнул. Он всё ещё стоял перед центральной дверью с вытянутой вперёд рукой. Его сердце бешенно колотилось, кровь стучала в висках, лицо заливал пот, а ноги подкашивались. До чего реальным казалось это видение! Орнас и впрямь решил, что погибает. Он в ужасе отдёрнул руку от двери и с опаской отошёл подальше. Ни в коем случае, никогда и ни за что он не станет идти в эту страшную комнату!\n   Переведя дыхание и успокоившись, джедай был готов продолжить испытание.",
    "answers": [
      {
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nend",
        "text": "Дальше",
        "id": 92,
        "go_to": [
          "gofrom"
        ]
      }
    ]
  },
  {
    "id": 93,
    "text": "   Чем ближе становилась дверь, тем явнее замедлялись шаги Орнаса. Его пульс участился, а руки непроизвольно сжались в кулаки. Он совсем остановился, и перед глазами вновь поплыли образы из страшного видения. \"Нет, – подумал он, – нельзя так рисковать сейчас, это же чистое самоубийство!\".\n   Немного успокоившись от принятого решения, джедай отошёл подальше от зловещей двери.",
    "answers": [
      {
        "isBack": true,
        "text": "Дальше",
        "id": 93,
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 94,
    "text": "– Кого ты имеешь в виду? – подозрительно поинтересовался астродроид.<s>r\n",
    "answers": [
      {
        "id": 94,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ncondition = condition or {}\narraysTL = arraysTL or {}\ncondition.knowTheNameOfShip = condition.knowTheNameOfShip or 0\ncondition.knowTheNumberOfSquad = condition.knowTheNumberOfSquad or 0\ncondition.knowTheNamesOfSquad = condition.knowTheNamesOfSquad or 0\ncondition.knowTheControlArmlet = condition.knowTheControlArmlet or 0\narraysTL.trust = arraysTL.trust or 0\narraysTL.trust = arraysTL.trust <plus> condition.knowTheNameOfShip <plus> condition.knowTheNumberOfSquad <plus> condition.knowTheNamesOfSquad\ntext = \"– Я видел \" .. (condition.knowTheNameOfShip == 1 and \"<s><s>\"Чёрное Пламя<s><s>\". \" or \"звездолёт. – спокойно проговорил Орнас. – \")\nif condition.knowTheNumberOfSquad ~= 1 and condition.knowTheNamesOfSquad ~= 1 then\ntext = text .. \"Маловероятно, что на таком корабле не было кого-то помимо пилота и астродроида.<s>\n– А ты смышлённый, – многозначительно изрёк TL-3. – Я точно не знаю, что произошло, но думаю, что все погибли.\"\nelseif condition.knowTheNamesOfSquad ~= 1 then\ntext = text .. \"Я знаю, что после посадки в живых осталось семеро, не считая дроидов. Так что с ними случилось потом?<s>\n– Всё-то ты знаешь, – многозначительно изрёк TL-3. – После ухода Феникса одна группа ушла вглубь храма и скорее всего погибла там. Другие отправилась за командиром, когда стало ясно, что без его шлема никто отсюда не выберется. Подозреваю, они тоже мертвы.\"\nelseif condition.knowTheNamesOfSquad == 1 then\ntext = text .. \"Я знаю, что Уби Сунд, Кви Анте Нос и Н'Мундо Фуэре отправились вглубь храма. Что с ними случилось потом?<s>\n– Всё-то ты знаешь, – многозначительно изрёк TL-3. – Думаю, что они погибли. После ухода Феникса и этой группы оставшиеся отправилась за командиром, когда стало ясно, что без его шлема никто отсюда не выберется. Подозреваю, что они тоже мертвы.\"\nend\nif condition.findTheArmlet == 1  and condition.knowTheControlArmlet == 1 then -- условие найден браслет в комнате с животными и запись, где он называется управляющим\n  text = text .. \"<s>\n– В завалах одной из комнат я нашёл управляющий браслет с корабля, – сказал юноша. – Видимо, группа стала жертвой диких животных в том зале.<s>\n– Угу...\"\narraysTL.trust = arraysTL.trust <plus> 2\nend\ntext = text .. \"<s>\n   Орнас посочувствовал незавидной судьбе экипажа корабля, оказавшегося в такой ситуации.\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 328,
        "text": "Новый ответ. введите текст",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 95,
    "text": "   ",
    "answers": [
      {
        "id": 95,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif style == 4 then\ntext = \"TL-3 объяснил джедаю, какие запчасти и оборудование нужны для создания простейшего переводного устройства. Юноша быстро понял идею и отправился в комнату, в которой остался ящик с инструментами. Всё оказалось действительно просто, и уже через полчаса Орнас вернулся в зал к дроиду, сжимая в пальцах миниатюрный самодельный аппарат.\"\nelse\ntext = \"TL-3 объяснил джедаю, какие запчасти и оборудование нужны для создания простейшего переводного устройства. Часть из них посчастливилось отыскать в ящике с инструментами, который подготовил дроид, другие удалось изготовить из имеющегося хлама, а одну схему Орнас аккуратно припаял самым кончиком светового меча. Дальше всё оказалось действительно просто, и уже через полчаса юноша осторожно вертел в руках миниатюрный самодельный аппарат.\"\nend\nreturn text .. \"<s>\n– Закрепи его возле мочки, – посоветовал астромех. – Эффективнее, конечно, имплантировать прямо во внутреннее ухо, но на это нет времени.<s>\n   Джедай снял шлем и последовал совету дроида: аккуратно разместил крохотный прибор у мочки и закрепил жёстким проводом вокруг уха.<s>\n– Не очень модно, зато работает, – тут же услышал он электронный голос из передатчика. – Ведь работает? Ты меня понимаешь?<s>\n   Орнас утвердительно кивнул, порадовавшись этому маленькому успеху, но на всякий случай вновь водрузил шлем на голову.<s>\n– Отлично, теперь время заняться мной, – заявил TL-3. – Я уже говорил, что нужно сделать?\"\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 95,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nTL3.conditionTranslator = 2\narraysTL.TL = 10\nend"
      },
      {
        "id": 96,
        "text": "– Да, но лучше повторить.",
        "lua_if": "function lua_if()\nreturn isHistoryContain(457) or isHistoryContain(414)\nend"
      },
      {
        "id": 97,
        "text": "– Пока нет.",
        "lua_if": "function lua_if()\na = (not isHistoryContain(457) ) and (not isHistoryContain(414) )\nreturn a\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nstyle = style == 4 and 1 or 4\nend",
        "text": "Для проверки: смена стиля",
        "id": 95,
        "merge": false
      }
    ]
  },
  {
    "id": 96,
    "text": "– ",
    "answers": [
      {
        "id": 96,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif style == 4 then\ntext = \"Сначала разобрать корпус, это легко для тебя, – начал повторять инструктаж TL-3. – Дальше извлекаешь зелёную панель из самого низа блока управления. Извлекаешь управляющую схему из шлема, выкручивая против часовой стрелки. С четвёртого витка снимаешь крестообразный чип, с трёх сторон соединённый со схемой. Если смотреть на чип так, чтобы свободный конец был направлен вверх, то последовательность разъединений контактов такая: центральный, левый, правый. Размещаешь чип на зелёной панели из управляющего блока, последовательность подключения контактов обратная. Вновь собираешь блок управления, помещаешь его в корпус и собираешь меня. Готов начнать прямо сейчас?\"\nelse\ntext = \"Разумеется. Находишь в углу под завалами ящик, снимаешь голову, нажав две кнопки по бокам. Откручиваешь фиксирующие болты справа и слева. Тянешь блок управления вверх и вперёд, вынимаешь. Заливаешь в резервуар смазку, в другой – жидкий азот, а хладагент – в охлаждающий контур. Запускаешь прокачку компрессора на три цикла, переключаешь в автономный режим. В нижней части блока управления находишь зелёную панель. Из шлема выкручиваешь против часовой стрелки управляющую схему, на четвёртом витке спирали находишь крупный чип в виде креста. Отсоединяешь сначала нижний, затем левый, потом правый контакты и помещаешь чип на панель моего управляющего блока, последовательность подключения контактов обратная разъединению. Затем собираешь блок управления, помещаешь его в корпус, закручиваешь винты и возвращаешь на место голову. Как-то так.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nreturn style == 4 and \"Начать\" or \"Дальше\"\nend",
        "lua_do": "function lua_do()\nlocal a = style == 4 and 415 or 343\nshowPage({id = a})\nend",
        "text": "Дальше",
        "id": 96,
        "no_transition": true
      }
    ]
  },
  {
    "id": 97,
    "text": "– ",
    "answers": [
      {
        "id": 97,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif style == 4 then\ntext = \"Так как ты своими силами справился с основным ремонтом, то разобрать меня ещё раз тебе не составит труда, – начал инструктаж TL-3. – Дальше тебе нужно будет извлечь из блока управления зелёную панель, она должна быть где-то снизу. Потом нужно достать из шлема управляющую схему, она находится внутри, в верхней части, и довольно трудно выкручивается против часовой стрелки. Сама схема выполнена в виде спирали, на четвёртом витке должен быть крупный чип в виде креста, с трёх сторон соединённый со схемой. Если смотреть на чип так, чтобы свободный конец был направлен вверх, то последовательность разъединений контактов должна быть следующая: сначала нижний, затем левый, потом правый. После этого нужно разместить чип на той самой зелёной панели из моего управляющего блока, там только одно место, куда он подойдёт, последовательность подключения контактов обратная разъединению. Затем нужно вновь собрать блок управления, поместить его в корпус, закрутить винты и наконец вернуть на место голову. Готов начнать прямо сейчас?\"\nelse \ntext = \"В общем-то, всё довольно просто, – начал TL-3. – Для начала ты должен открутить мне голову. Буквально. Для этого есть специальные кнопки по бокам. Пожалуйста, будь с ней очень бережен и положи куда-нибудь неподалеку. В месте крепления головы на корпусе расположены фиксирующие болты, нужно выкрутить один справа и один слева. После этого можно будет извлечь блок управления, потяни его вверх и немного вперёд, затем аккуратно отложи в сторону. Дальше – самое интересное. В ящике лежат ёмкости со смазкой, охлаждающей жидкостью и жидким азотом. Нужно залить смазку в резервуар около поршней, жидкий азот – в другой, расположенный примерно в центре, а хладагент – в охлаждающий контур, обвивающий резервуар с азотом. На задней панели располагаются элементы питания и аккумуляторы, там же находится панель управления техническими процессами. С её помощью нужно запустить вручную три-четыре цикла прокачки компрессора, затем переключить на работу в автономном режиме.<s>\n– Подожди немного, я не успеваю запоминать всё это! – взмолился Орнас.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nreturn style == 4 and \"Начать\" or \"Дальше\"\nend",
        "lua_do": "function lua_do()\nlocal a = style == 4 and 415 or 100\nshowPage({id = a})\nend",
        "text": "Дальше",
        "id": 97,
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nstyle = style == 4 and 1 or 4\nend",
        "text": "Для проверки: смена стиля",
        "id": 97,
        "merge": false
      }
    ]
  },
  {
    "id": 98,
    "text": "   Орнас направил мощный поток Силы в змею, в результате чего она отлетела в дальнюю стену, ударившись о неё с приглушённым звуком. Это дало юноше немного времени до следующей атаки противника.",
    "answers": [
      {
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nlocation1.time = 2\nend",
        "text": "Дальше",
        "id": 87,
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 99,
    "text": "   Орнас быстро поднялся наверх и прошёл внутрь. Тёмный коридор заканчивался резким обрывом, образуя небольшой уступ в стене, на котором джедай и остановился. Когда его глаза привыкли к темноте, он внимательно осмотрел помещение.<s>r\n   Это была просторная комната с высоким потолком. В каждой стене, кроме той, что была за спиной Орнаса, располагалось по двери. В дальнем левом углу лежала поваленная металлическая клетка с откинутой крышкой, державшейся на ржавых петлях. Через узкий лаз внизу стены пробивался свет, доходя до противоположной стены и разделяя комнату пополам.<s>r\n   Внезапно Орнас услышал шипение, а затем увидел и источник звука – существо, отдалённо напоминающее змею. Оно извивалась внизу прямо около Орнаса и, видимо, не могло забраться так высоко.",
    "answers": [
      {
        "id": 99,
        "calculate": true,
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.location1 = {bitenArms = 0, bitenLegs = 0}\ng.achievements = g.achievements or {}\n\ng.achievements.detective1 = g.achievements.detective1 or 0\ng.achievements.alarm = g.achievements.detective1 == 0 and 6 or 0\ng.achievements.detective1 = 1\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 141,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 100,
    "text": "– Не перебивай, сейчас будет самое важное. Из блока управления тебе нужно извлечь зелёную панель, она должна быть где-то снизу. Найди её и положи рядом с собой, а остальные убери подальше, чтобы не запутаться. Потом нужно достать из шлема управляющую схему, она находится внутри, в верхней части, и довольно трудно выкручивается против часовой стрелки. Сама схема выполнена в виде спирали, на четвёртом витке должен быть крупный чип в виде креста, с трёх сторон соединённый со схемой. Если смотреть на чип так, чтобы свободный конец был направлен вверх, то последовательность разъединений контактов должна быть следующая: сначала центральный, затем левый, потом правый. После этого нужно разместить чип на той самой зелёной панели из моего управляющего блока, там только одно место, куда он подойдёт, последовательность подключения контактов обратная разъединению. Затем нужно вновь собрать блок управления, поместить его в корпус, закрутить винты и наконец вернуть на место голову. Звучит довольно просто, да?<s>r\n   Орнас только глубоко вздохнул, представляя предстоящую процедуру и надеясь ничего не перепутать.",
    "answers": [
      {
        "id": 343,
        "text": "Начать"
      }
    ]
  },
  {
    "id": 101,
    "text": "   Неожиданно на Орнаса бросилась змея, которую он уже считал погибшей. Световой меч сверкнул в полумраке, и она глухо ударилась о пол, разрубленная пополам.<s>r\n   Орнас внимательно вгляделся в то, что от неё осталось, и ему показалось, что существо стало заметно меньше, чем ему виделось раньше.<s>r\n   Внезапно в него вонзились зубы ещё одной змеи. Она оказалась примерно таких же размеров, что и поверженное мгновение назад существо.<s>r\n   \"Не нравится мне всё это...\" – успел подумать Орнас, разрубая вторую змею.",
    "answers": [
      {
        "id": 102,
        "text": "Наблюдать",
        "lua_do": "function lua_do()\nlocation1.kuski = 4\nlocation1.time = 1\nlocation1.bitenLegs = location1.bitenLegs <plus> 1\nlocation1.bitenLegs = location1.bitenLegs >2 and 2 or location1.bitenLegs\nlocation1.snakesDetected = 1\nend"
      }
    ]
  },
  {
    "id": 102,
    "text": "   Опасения Орнаса подтвердились очень скоро. Наблюдая за половинками разрубленных змей, он к своему ужасу понял, что они не просто хаотично извиваются в агонии, а стремительно изменяются. Всего полминуты потребовалось на то, чтобы они превратились в полноценные копии своего прародителя, только меньших размеров.<s>r\n   Змеи кружили вокруг Орнаса, не решаясь пока атаковать.",
    "answers": [
      {
        "id": 80,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- полностью парализован, добивание\nlocal a =  location1.bitenLegs <plus> location1.bitenArms\nreturn a == 3\nend"
      },
      {
        "id": 103,
        "text": "Защищаться мечом",
        "lua_if": "function lua_if()\nlocal a =  location1.bitenLegs <plus> location1.bitenArms\nreturn a ~= 3\nend"
      },
      {
        "id": 89,
        "text": "Использовать Силу",
        "lua_if": "function lua_if()\nlocation1.final = location1.final or 0\nlocal a =  location1.bitenLegs <plus> location1.bitenArms\nreturn a ~= 3 and location1.time > 0 and location1.final == 0\nend",
        "lua_do": "function lua_do()\nlocation1.final = 1\nlocation1.time = 0\nend"
      },
      {
        "id": 142,
        "text": "Забраться на уступ",
        "lua_if": "function lua_if()\n-- Неудача\nlocation1.final = location1.final or 0\nlocal a =  location1.bitenLegs <plus> location1.bitenArms\nreturn location1.revealed == 1 and location1.bitenArms >= 1 and location1.time ~= 0 and location1.ornasPosition == 1 and a ~=3 and location1.final == 0\nend",
        "lua_do": "function lua_do()\nlocation1.final = 1\nend"
      },
      {
        "id": 150,
        "text": "Забраться на уступ",
        "lua_if": "function lua_if()\n-- Удачно\nlocation1.final = location1.final or 0\nreturn location1.revealed == 1 and location1.bitenArms == 0 and location1.time ~= 0 and location1.ornasPosition == 1 and location1.final == 0 and location1.bitenLegs ~= 2\nend"
      }
    ]
  },
  {
    "id": 103,
    "text": "   Орнас решил держаться в обороне. <s>r\n   Выждав какое-то время, змеи набросились на него со всех сторон одновременно. Его меч сверкал, враги отлетали в стороны и вновь атаковали. После десятка отражённых нападений джедай пропустил первый укус проворного маленького монстра, затем ещё и ещё. И хоть парализующий эффект от этих укусов был значительно слабее, юноша терял силы и способность сражаться.<s>r\n   Наконец, он бессильно упал на пол, уже не чувствуя, как в его плоть впиваются десятки кинжалов-клыков.",
    "answers": [
      {
        "id": 81,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nlocation1.kuski = 10\nlocation1.lose = 1\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 104,
    "text": "   Это — служебная страница, с помощью которой можно быстро перемещаться по квесту, симулировать или изменять результаты выборов или условия.",
    "answers": [
      {
        "super_calculate": true,
        "id": 104,
        "text": "<< Инициализация необходимых для начала работы переменных и таблиц.",
        "calculate": false,
        "lua_do": "function lua_do()\nlocation1 = location1 or {bitenArms = 0, bitenLegs = 0, kuski = 1, lose = 0}\nornasStat = ornasStat or {location1 = {bitenArms = 0, bitenLegs = 0}, firedArm = 0, bloodedLeg = 0, darkside = 0}\npanel3 = panel3 or 1\nstyle = style or 1\nvictory158 = victory158 or 0\ngofrom = gofrom or 177\ncode_number = code_number or 1\ng.side_menu = g.isAuthor and 104 or nil\ng.technical = g.technical or {}\nend"
      },
      {
        "super_calculate": false,
        "id": 198,
        "widget_show": [
          "map_widget",
          "dump"
        ],
        "text": "Новый ответ. введите текст",
        "calculate": true
      },
      {
        "no_transition": true,
        "comment": false,
        "lua_do": "function lua_do()\nmessage(\"TL3.dialogParts: \" .. TL3.dialogParts)\nend",
        "id": 104,
        "text": "Info",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 0\nreturn \"TL3.dialogParts: \" .. TL3.dialogParts\nend",
        "merge": false
      },
      {
        "id": 104,
        "text": "На служебную страницу",
        "lua_do": "function lua_do()\ng.technical.back = g.current_id\nend",
        "merge": false
      },
      {
        "id": 104,
        "text": "[Вернуться в квест]",
        "lua_do": "function lua_do()\nshowPage{id = g.technical.back}\nend",
        "no_transition": true
      },
      {
        "comment": false,
        "merge": false,
        "id": 104,
        "text": "Переместиться ",
        "lua_do": "function lua_do()\n\ndialog ({\nheader = \"Быстрый переход\", text = \"Переместиться к..\",\nanswers = {\n                     {text = \"Конец второго этажа\", pressListener = function ()\nshowPage{id = 575}\nhideDialog() end},\n\n                     {text = \"После двери на втором этаже, первое появление\", pressListener = function ()\nshowPage{id = 493}\nhideDialog() end},\n\n                      {text = \"Подъём по лестнице\", pressListener = function ()\nshowPage{id = 468}\nhideDialog() end},\n\n\n                      {text = \"После двери на втором этаже, повторные появления\", pressListener = function ()\nshowPage{id = 592}\nhideDialog() end},\n\n                      {text = \"Перед входом в храм\", pressListener = function ()\nposition = 7\nshowPage{id = 34}\nhideDialog() end},\n                      {text = \"Десс приходит в себя\", pressListener = function ()\nnoarm = 1\nauthor_cheat_mode = 1\nshowPage{id = 242}\nhideDialog() end},\n                      {text = \"Десс одевается\", pressListener = function ()\nauthor_cheat_mode = 1\ntimeForDess = timeForDess== 2 and 4 or 2\nnoarm = 1\nshowPage{id = 44}\nhideDialog() end},\n                      {text = \"В зал со змеёй\", pressListener = function ()\nshowPage{id = 177}\nhideDialog() end},\n                      {text = \"В центральный зал\", pressListener = function ()\nshowPage{id = 158}\nhideDialog() end},\n                      {text = \"В зал с дроидом\", pressListener = function ()\nshowPage{id = 201}\nhideDialog() end},\n                      {text = \"Ремонт дроида: платы\", pressListener = function ()\nshowPage{id = 377}\nhideDialog() end},\n                      {text = \"Зал с кораблём\", pressListener = function ()\nshowPage{id = 157}\nhideDialog() end},\n                      {text = \"Зал с ящерами\", pressListener = function ()\nshowPage{id = 189}\nhideDialog() end},\n\n                      {text = \"Дальний зал\", pressListener = function ()\nshowPage{id = 155}\nhideDialog() end}\n                    }\n             })\n\nend",
        "no_transition": true
      },
      {
        "comment": false,
        "id": 104,
        "text": "[Достижения]",
        "lua_do": "function lua_do()\ng.technical.back = g.current_id\nshowPage{id = 6}\nend",
        "no_transition": true
      },
      {
        "lua_do": "function lua_do()\nauthorHelp = authorHelp == 1 and 0 or 1\nmessage(authorHelp == 1 and \"Теперь доступно отображение и смена состояния перед боем. Доступно ведь?\" or \"Теперь отображение и смена состояния перед боем не доступны\")\nshowPage{id = g.current_id}\nend",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "super_calculate": false,
        "id": 104,
        "calculate": false,
        "text": "• Условие: отображение кнопок для смены штрафов загадки на двери второго этажа",
        "no_transition": true
      },
      {
        "comment": false,
        "id": 104,
        "text": "• Условие: смена спутников на втором этаже",
        "lua_do": "function lua_do()\nUpLine = UpLine or 1\n\n--[=[  UpLine = UpLine < 8 and UpLine <plus> 1 or 1\n\n]=]\n\ndialog ({\nheader = \"Смена условия\", text = \"Выбор спутников на втором этаже\",\nanswers = {\n                     {text = \"Нет спутников\", pressListener = function ()\nUpLine = 1\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Десс\", pressListener = function ()\nUpLine = 2\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Учитель\", pressListener = function ()\nUpLine = 3\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Дроид\", pressListener = function ()\nUpLine = 4\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Учитель и Десс\", pressListener = function ()\nUpLine = 5\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Учитель и дроид\", pressListener = function ()\nUpLine = 6\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Десс и дроид\", pressListener = function ()\nUpLine = 7\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Все вместе\", pressListener = function ()\nUpLine = 8\nshowPage{id = g.current_id}\nhideDialog() end}\n                    }\n             })\n\n\nUpLineHelp = (UpLine == 1 and \"alone\") or (UpLine == 2 and \"with Dess\") or  (UpLine == 3 and \"with Master\") or (UpLine == 4 and \"with TL-3\") or (UpLine == 5 and \"with Master and Dess\") or (UpLine == 6 and \"With Master and TL-3\") or (UpLine == 7 and \"with Dess and TL-3\") or (UpLine == 8 and \"with all the mates\")\n\nmessage(\"Now Ornas is \" .. UpLineHelp .. \" - case: \" .. UpLine)\n\n\nend",
        "no_transition": true
      },
      {
        "comment": false,
        "id": 104,
        "text": "• Условие: смена встреч на лестнице",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\ndess = dess or {}\nmaster = master or {}\n  if master.position == 155 then\n      master.position = 156\n    elseif master.position == 156 then\n      master.position = 0\n    else master.position = 155\n  end\n\nTL3.position = TL3.position == \"at the stairs\" and \"\" or \"at the stairs\"\n\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "comment": false,
        "id": 104,
        "text": "• Условие: случайная смена предметов на поясе",
        "lua_do": "function lua_do()\n\nkey_on_position_1_avail = math.random(0,1)\nkey_on_position_2_avail = math.random(0,1)\nkey_on_position_3_avail = math.random(0,1)\nkey_on_position_4_avail = math.random(0,1)\nkey_on_position_5_avail = math.random(0,1)\nkey_on_position_6_avail = math.random(0,1)\ngrenade1 = 0\ngrenade3 = math.random(0,1)\ngrenade4 = math.random(0,1)\nlightsaber = math.random(0,1)\nornasStat.darkside = math.random(-10,5)\nshowPage{id = g.current_id}\n\n\n[=[dialog ({\nheader = \"Снаряжение\", text = \"Добавить или убрать предметы\",\nanswers = {\n                     {text = \"Тёмная сторона\", pressListener = function ()\ndess.finalSide =\"dark\"\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Светлая сторона\", pressListener = function ()\ndess.finalSide = \"light\"\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Предромантическое состояние\", pressListener = function ()\ndess.finalSide = \"romantic\"\nshowPage{id = g.current_id}\nhideDialog() end}\n\n              \n\n}\n  })\n\n\n]=]\nend",
        "no_transition": true
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: смена финального состояния Десс",
        "lua_do": "function lua_do()\nforce_ab = force_ab or 0\nbracer = bracer or 0\n\n--[=[force_ab = (force_ab == 0 and 1) or (force_ab == 1 and 2) or (force_ab == 2 and 3) or 0\n\nbracer = bracer == 0 and 1 or 0\n]=]\ndess = dess or {}\n\n\ndialog ({\nheader = \"Десс\", text = \"Смена финального состояния\",\nanswers = {\n                     {text = \"Тёмная сторона\", pressListener = function ()\ndess.finalSide =\"dark\"\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Светлая сторона\", pressListener = function ()\ndess.finalSide = \"light\"\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Предромантическое состояние\", pressListener = function ()\ndess.finalSide = \"romantic\"\nshowPage{id = g.current_id}\nhideDialog() end}\n\n              \n\n}\n  })\n\n\nend",
        "no_transition": true
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\nforce_ab = force_ab or 0\nbracer = bracer or 0\n\n--[=[force_ab = (force_ab == 0 and 1) or (force_ab == 1 and 2) or (force_ab == 2 and 3) or 0\n\nbracer = bracer == 0 and 1 or 0\n]=]\n\ndialog ({\nheader = \"Смена бонусов\", text = \"Выбор бонусов после разгадки центрального механизма\",\nanswers = {\n                     {text = \"Нет бонусов\", pressListener = function ()\nforce_ab = 0\nbracer = 0\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Подчинение воли\", pressListener = function ()\nforce_ab = 1\nbracer = 0\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Молнии Силы\", pressListener = function ()\nforce_ab = 3\nbracer = 0\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Ярость Силы\", pressListener = function ()\nforce_ab = 2\nbracer = 0\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"Наручи\", pressListener = function ()\nforce_ab = 0\nbracer = 1\nshowPage{id = g.current_id}\nhideDialog() end}\n\n}\n  })\n\n\nend",
        "text": "• Условие: смена бонусов из подвала",
        "id": 104,
        "merge": false
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.understanding = (dess.understanding == 0 and 1) or (dess.understanding ==1 and 2) or 0\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: \"Понимание\" Десс",
        "id": 104,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\narm1 = math.random(0,1)\narm2 = math.random(0,1)\narm3 = math.random(0,1)\nnoarm = (arm1 == 0 and arm2 == 0 and arm3 == 0 and 1) or 0\nhelmet = math.random(0,1)\nshowPage{id = g.current_id}\nend",
        "id": 245,
        "text": "• Условие: смена браслетов и шлема",
        "comment": false,
        "no_transition": true
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\nlightsaber = lightsaber == 0 and 1 or 0\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: второй световой меч",
        "id": 104,
        "merge": false
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = dess.trust or 0\n--[=[dess.trust = (dess.trust < -9 and 0) or (dess.trust < 9 and 10) or -10\na_tia_trust = dess.trust\nshowPage{id = g.current_id}\n]=]\n\ndialog ({\nheader = \"Доверие Десс\", text = \"Изменить уровень доверия\",\nanswers = {\n                     {text = \"Обнулить\", pressListener = function ()\ndess.trust = 0\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \" <plus> 5\", pressListener = function ()\ndess.trust = dess.trust <plus> 5\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"-5\", pressListener = function ()\ndess.trust = dess.trust - 5\nshowPage{id = g.current_id}\nhideDialog() end}\n\n}\n  })\n\nend",
        "text": "• Условие: доверие Десс",
        "id": 104,
        "merge": false
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\ndess = dess or {}\nlocal b = 0\nlocal c = 0\nlocal d = {1,2,3,4}\nlocal a = math.random(1,2)\n  if a == 1 then\n    b = d[(math.random(#d))]\n  elseif a == 2 then\n    b = d[(math.random(#d))]\n    table.remove(d,b)\n    c = d[(math.random(#d))]\n  end\ndess.recordSeen = (b == 2 and 1) or (c == 2 and 1) or 0 \ndess.saberSeen = (b == 3 and 1) or (c == 3 and 1) or 0 \ndess.droidSeen = (b == 1 and 1) or (c == 1 and 1) or 0 \ndess.complexSeen = (b == 4 and 1) or (c == 4 and 1) or 0 \nshowPage{id = g.current_id}\nend",
        "text": "• Условие: раскрытие Десс",
        "id": 104,
        "merge": false
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.fails = master.fails >= 5 and 0 or master.fails <plus> 1\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: количество фейлов",
        "id": 104,
        "merge": false
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: рана на руке",
        "lua_do": "function lua_do()\nornasStat.firedArm = ornasStat.firedArm == 0 and 1 or 0\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: рана на ноге",
        "lua_do": "function lua_do()\nornasStat.bloodedLeg = ornasStat.bloodedLeg == 0 and 1 or 0\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\nhelmet = helmet == 0 and 1 or 0\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: шлем у Орнаса",
        "id": 104,
        "merge": false
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: количество змей",
        "lua_do": "function lua_do()\nlocation1.kuski = location1.kuski == 1 and 10 or (location1.kuski == 10 and 11 ) or 1\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: монстр побеждён",
        "lua_do": "function lua_do()\nvictory158 = victory158 == 0 and 1 or 0\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: добавить Тьму",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 2\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: добавить Свет",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside - 2\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\nfight192 = fight192 == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: бой с ящерами",
        "id": 104,
        "merge": false
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: взрыв",
        "lua_do": "function lua_do()\nbang229 = bang229 == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "merge": false,
        "id": 104,
        "text": "• Условие: локация учителя",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.position = master.position == g.current_id and 1 or g.current_id\nshowPage{id = g.current_id}\nend",
        "no_transition": true
      },
      {
        "no_transition": true,
        "lua_do": "function lua_do()\ngrenade = 1\nfor i = 1, 4 do\nvars[\"grenade\" .. i] = 0\nend\ngrenade2 = nil\nlocal a = math.random(1,4)\na = a ==2 and 1 or a\nvars[\"grenade\" .. a] = 1\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: случайная граната",
        "id": 104,
        "merge": false
      },
      {
        "lua_text": "function lua_text()\nlocal text = \"Изменить стиль.<s>\n1 - меч, 2 - Сила, 3 - скрытность, 4 - ум, 5 - милосердие, 6 - потерявший себя<s>\nТекущий стиль: \" .. style\nreturn text\nend",
        "merge": false,
        "lua_do": "function lua_do()\nstyle = style or 1\n--style = style == 6 and 1 or style <plus> 1\n\ndialog ({\nheader = \"Смена условия\", text = \"Выбор стиля\",\nanswers = {\n                     {text = \"Меч\", pressListener = function ()\nstyle = 1\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Сила\", pressListener = function ()\nstyle = 2\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Шпион\", pressListener = function ()\nstyle = 3\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Умник\", pressListener = function ()\nstyle = 4\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Добряк\", pressListener = function ()\nstyle = 5\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Потеряшка\", pressListener = function ()\nstyle = 6\nshowPage{id = g.current_id}\nhideDialog() end}\n                      \n                    }\n             })\n\n\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: стиль",
        "id": 104,
        "no_transition": true
      },
      {
        "id": 34,
        "text": "[Перед входом в храм]",
        "lua_do": "function lua_do()\nposition = 7\nend"
      },
      {
        "id": 242,
        "text": "[Десс приходит в себя]",
        "lua_do": "function lua_do()\nauthor_cheat_mode = 1\nend",
        "var_set": [
          "noarm",
          1
        ]
      },
      {
        "lua_do": "function lua_do()\nauthor_cheat_mode = 1\ntimeForDess = timeForDess== 2 and 4 or 2\nend",
        "text": "[Десс одевается]",
        "id": 44,
        "var_set": [
          "noarm",
          1
        ]
      },
      {
        "id": 162,
        "text": "[Благодарность от автора]",
        "need_ever": true
      },
      {
        "id": 177,
        "text": "[В первом зале]"
      },
      {
        "id": 1,
        "text": "system",
        "canEditCover": true,
        "system": true
      },
      {
        "id": 158,
        "text": "[В центральном зале]"
      },
      {
        "id": 201,
        "text": "[В зале с дроидом]"
      },
      {
        "id": 377,
        "text": "[Ремонт дроида: платы]"
      },
      {
        "id": 157,
        "text": "[Зал с кораблём]"
      },
      {
        "id": 189,
        "text": "[Зал с ящерами]"
      },
      {
        "id": 155,
        "text": "[Дальний зал]"
      },
      {
        "id": 294,
        "text": "<< Механизм размещения ключей",
        "run": [
          294
        ],
        "var_not": [
          "sup294",
          1
        ]
      }
    ]
  },
  {
    "id": 105,
    "text": "– Эй! – ещё издали крикнул джедай, подходя к слоняющемуся около звездолёта дроиду. – Мы же договорились, что ты поможешь мне, после того как я тебя отремонтирую.<s>r\n   Юноша наконец подобрался достаточно близко к астромеханику, чтобы тот не мог игнорировать его присутствие.<s>r\n– Куда же ты убегаешь? – негодовал Орнас. – Что насчёт нашего уговора?<s>r\n   TL-3 лишь издал серию коротких трелей и попытался проскользнуть мимо юноши. Окончательно разозлившись, джедай приподнял дроида над полом с помощью Силы и притянул ближе к себе.<s>r\n   Бесшумно включился голографический проектор и над полом возникло подрагивающее изображение мандалорца.<s>r\n– Я изменил условия сделки, –  прозвучал его сухой голос. – Мне это больше не интересно.<s>r\n   Голограмма исчезла и дроид засуетился, нелепо подёргиваясь в воздухе.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nTL3.canBeDestroyed = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 105
      },
      {
        "id": 107,
        "text": "Раздавить дроида",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nTL3.canBeDestroyed = 0\nTL3.destroyed = 1\nend"
      },
      {
        "id": 112,
        "text": "Отпустить дроида",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) - 1\nend"
      }
    ]
  },
  {
    "id": 106,
    "text": "   Орнас собрал всю свою волю и с помощью Силы поднял в воздух всех многочисленных противников. ",
    "answers": [
      {
        "comment": true,
        "lua_if": "function lua_if()\nreturn g.current_id == 106\nend",
        "id": 82,
        "text": "генерация текста для кучи противников",
        "lua_text": "function lua_text()\nlocal text = (location1.forcePoints < 2 and \"Однако как следует сосредоточиться юноша не смог, и уже через мгновение змеи вновь атаковали со всех сторон.\" or \"Подхваченные невидимой силой, они медленно пролетели в сторону клетки, а затем опустились внутрь.\") .. (location1.forcePoints == 2 and \" Отпустив всех змей, Орнас осознал, что ему не хватит концентрации, чтобы закрыть крышку клетки с помощью Силы.\" or \"\")\nlocation1.forcePoints = location1.forcePoints - 2\nlocation1.forcePoints = location1.forcePoints < 1 and 0 or location1.forcePoints\nreturn text\nend",
        "merge": true
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\nreturn g.current_id ~= 106\nend",
        "id": 82,
        "text": "генерация текста для одной змеи",
        "lua_text": "function lua_text()\nlocal text = location1.forcePoints < 2 and \" Отпустив змею, Орнас осознал, что ему не хватит концентрации, чтобы закрыть крышку клетки с помощью Силы.\" or \"\"\nlocation1.forcePoints = location1.forcePoints - 1\nlocation1.forcePoints = location1.forcePoints < 1 and 0 or location1.forcePoints\nreturn text\nend",
        "merge": true
      },
      {
        "id": 83,
        "text": "Захлопнуть крышку клетки с помощью Силы",
        "lua_if": "function lua_if()\n-- успех\nreturn location1.cage == 1 and location1.forcePoints > 0\nend"
      },
      {
        "lua_do": "function lua_do()\nlocation1.forcePoints = location1.forcePoints - 1\nend",
        "text": "Захлопнуть крышку клетки с помощью Силы",
        "lua_if": "function lua_if()\n-- неудача: клетка перевёрнута\nreturn location1.cage == 0 and location1.forcePoints > 0\nend",
        "id": 84
      },
      {
        "id": 85,
        "text": "Захлопнуть крышку руками",
        "lua_if": "function lua_if()\n-- неудача: далеко бежать\nreturn location1.ornasPosition ~=2 and location1.bitenLegs ~= 2\nend",
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 86,
        "text": "Захлопнуть крышку руками",
        "lua_if": "function lua_if()\n-- успех\nreturn location1.cage == 1 and location1.ornasPosition == 2\nend",
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 84,
        "text": "Захлопнуть крышку руками",
        "lua_if": "function lua_if()\n-- неудача: клетка перевёрнута\nreturn location1.cage == 0 and location1.ornasPosition == 2\nend",
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 505,
        "text": "Захлопнуть крышу руками",
        "lua_if": "function lua_if()\n-- неудача, ноги парализованы и Орнас далеко от клетки\nreturn location1.ornasPosition ~=2 and location1.bitenLegs == 2\nend"
      }
    ]
  },
  {
    "id": 107,
    "text": "   Орнас чувствовал, как внутри него закипает злость. Оскорблённый обманом, он упрекал себя за то, что потратил впустую столько времени и сил, доверившись вероломной машине.<s>r\n   Всё крепче сжималась в кулак рука юноши, всё сильнее дрожал в воздухе дроид. Его корпус медленно сминался невидимой хваткой, послышался скрежет металла, затрещали искры. Тусклая голограмма включилась и тут же растаяла в воздухе, так и не успев передать своё послание. Мелким градом забарабанили по каменному полу осколки стекла. Что-то вспыхнуло и через несколько секунд раздался приглушённый хлопок. Вырванные взрывом детали, не успев разлететься в стороны, всё сжимались и сжимались в сплошной металлический ком, разрывая воздух невыносимым скрежетом.<s>r\n   Юноша так сильно стиснул челюсти, что заболели зубы. Он неестественно резко разомкнул кулак, и остатки дроида с грохотом рухнули на пол.<s>r\n   Джедай постепенно приходил в себя. Оставалось лишь горькое послевкусие предательства и потери.",
    "answers": [
      {
        "id": 157,
        "text": "Дальше",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = \"destroyed\"\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 3\nend"
      }
    ]
  },
  {
    "id": 108,
    "text": "   Орнас использовал Силу, чтобы подействовать на сознание существа, нейтрализовать его агрессию и предотвратить новые атаки. В какой-то степени это подействовало: змея затихла и отползла в угол комнаты.<s>r\n   Но уверенно сказать, надолго ли она успокоилась, джедай не мог.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n-- добавить переход на вторую позицию\nvars[\"goto\"] = location1.ornasPosition == 1 and 66 or 141 \nend",
        "text": "Новый ответ. введите текст",
        "id": 108,
        "calculate": true
      },
      {
        "id": 108,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocation1.time = 2\nend",
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 109,
    "text": "   Подхваченные невидимой силой, части разрубленной змеи медленно пролетели в дальний угол и, всё ещё не переставая извиваться, опустились внутрь клетки. ",
    "answers": [
      {
        "id": 106,
        "text": "Новый ответ. введите текст",
        "run": [
          106
        ]
      }
    ]
  },
  {
    "id": 110,
    "text": "Как только Орнас разжал хватку Силы, \"части\" змеи стремительно покинули клетку. Джедай лишь успел заметить, что обе половины теперь выглядели как уменьшенные, но вполне самостоятельные копии разрубленного им монстра.<s>r\n   \"У меня плохое предчувствие насчёт этого...\" – подумал Орнас, разрубая обеих змей, после того, как одна из них смогла вонзить клыки в его ногу.",
    "answers": [
      {
        "id": 102,
        "text": "Наблюдать"
      }
    ]
  },
  {
    "id": 111,
    "text": "   Джедай наконец-то решился запоздало отомстить дроиду за обман. В конце концов, TL-3 вернулся к жизни только усилиями юноши, он же её и отберёт.<s>r\n   Остановившись чуть поодаль от суетящегося астромеханика, Орнас активировал клинок светового меча. Уже в следующее мгновение он притянул дроида Силой и сделал резкий выпад в его сторону. Лезвие пронзило корпус насквозь и оплавляло материал вокруг, трещали и искрились детали. TL-3 попытался включить голограмму, но запись оборвалась, не успев начаться, – это широкий восходящий взмах мечом поразил управляющий блок. Ещё одно движение – и клинок разрезал вероломного дроида надвое, а хватка Силы сжала его остатки в сплошной металлический ком и отбросила в сторону.<s>r\n   Холодная ненависть Орнаса постепенно исчезла, осталось только сожаление о напрасной надежде и её потере.",
    "answers": [
      {
        "id": 157,
        "text": "Дальше",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = \"destroyed\"\nTL3.canBeDestroyed = 0\nTL3.destroyed = 1\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 3\nend"
      }
    ]
  },
  {
    "id": 112,
    "text": "   Орнас разжал хватку и TL-3 с гулким звуком рухнул на пол. Почувствовав твёрдую опору под собой, дроид поспешил отъехать подальше от юноши и вновь занялся бессмысленным ремонтом обшивки звездолёта.",
    "answers": [
      {
        "id": 157,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 113,
    "text": "   Джедай осмотрелся и только теперь заметил своего учителя, который стоял немного поодаль, неодобрительно сжав губы. Юноша не знал, как долго тот находился здесь и что успел увидеть, но в любом случае его появление означало, что Орнас допустил ошибку.<s>r\n– Очень опрометчиво с твоей стороны, – начал говорить мастер ",
    "answers": [
      {
        "id": 189,
        "text": "Дальше",
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.fails = master.fails or 1\nreturn master.fails ~= 5\nend"
      },
      {
        "id": 113,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\nmaster = master or {}\nmaster.fails = (master.fails or 0) <plus> 1\nmaster.position = 189 -- Мастер в правой комнате\nlocal text = \"\"\n  if master.fails == 1 then\n    text = \"сухо. – Ты не сможешь стать джедаем, не понимая ценности жизни и не стремясь защищать её.<s>\n   Орнас взглянул в суровые глаза старого мастера и поёжился. Сколько раз юноша видел это беспристрастное и холодное выражение лица, сколько раз угрюмо выслушивал строгие нотации. От требуемой кодексом образцовой безэмоциональности учителя Орнасу часто становилось не по себе.<s>\n   Не дождавшись реакции Орнаса, наставник неопределённо мотнул головой, медленно отошёл от него и замер, прислонившись к одной из стен.\"\n  elseif master.fails == 2 then\n    text = \"обеспокоенно. – Джедаю подобает вести себя более дружелюбно. Конечно, в этом и суть испытания: юный ум ищет решение проблемы, пусть и не обязательно находя лучшее из возможных. Но неправильный вариант тоже ценен, особенно если он твой собственный. Он поможет тебе обрести себя.<s>\n– Или убьёт, – невесело усмехнулся Орнас. – Разве не лучше просто остаться живым?<s>\n– Ты расстраиваешь меня, юный падаван, – серьёзно произнёс мастер. – Как я не могу научить тебя быть тем джедаем, каким по моему представлению ты должен быть, так и ты не можешь стать самим собой, лишь повторяя <s><s>\"правильное<s><s>\" решение за мной или кем-то другим. Ты жив лишь до тех пор, пока делаешь выводы из своих ошибок, а я нужен лишь для того, чтобы помочь тебе в этом.<s>\n   Наставник сдержанно улыбнулся, неспешно отошёл от удивлённого даже этим незначительным проявлением эмоций юноши и замер, прислонившись к одной из стен.\"\n  elseif master.fails == 3 then\n    text = \"взволнованно. – Я чувствую, как тьма этого места меняет восприятие. Она словно линза фокусирует эмоции и ощущения, наполняет ум доселе чуждыми мыслями. И ты, верно, поддался этому зову, юный падаван?<s>\n– Я не знаю... – растерянно протянул Орнас. – Это храм на меня так влияет?<s>\n– Частично. Но в твоей голове лишь то, что ты принёс с собой. Тьма не создаёт тени, а лишь углубляет их.<s>\n– Значит, это и на Вас действует? – оживился юноша. – В чём это проявляется?<s>\n– Ох, – неожиданно для Орнаса засмеялся учитель. – С тех пор, как мы прибыли, я никак не могу отделаться от воспоминаний об одной очаровательной особе. Она стала рыцарем-джедаем, когда я был ещё совсем мальчишкой, и я всё представлял, как мы тайно поженимся и вместе сбежим из Ордена...\" .. (dess.meetMaster == 0 and \"<s>\n   Лицо наставника вдруг сделалось печальным, он сдержанно улыбнулся и отошёл к одной из стен.\" or \"<s>\n   Наставник радостно улыбнулся и отошёл к одной из стен.\")\n  elseif master.fails == 4 then\n    text = \"расстроено. – Ты повёл себя очень недружелюбно. Я тебе не рассказывал, как в одной из своих миссий допустил такую же ошибку? Это, кстати, было в древнем лабиринте на одной очень похожей планете. Забавно...<s>\n   Орнас удивленно смотрел на учителя, который словно забыл о разговоре и сосредоточенно уставился на одну из стен позади юноши.<s>\n– Забавно, – тихо повторил старый джедай, будто не замечая ученика и обращаясь сам к себе. – Пятнадцать лет назад? Нет, все двадцать, пожалуй. Я исследовал все системы из этого злосчастного списка совсем с другой целью. Неужели тогда я всё ещё правда надеялся? Безумие...<s>\n   Он как во сне прошёл к стене, с которой всё это время не сводил взгляд, и едва не сбил юношу с ног. Орнас попытался вспомнить, видел ли он хоть когда-нибудь своего учителя настолько несобранным, и был вынужден отметить, что такого на его памяти никогда не происходило. Юношу пугало, как это место действует даже на такого сильного джедая, и он невольно задумался о собственных поступках в храме.\"\n  elseif master.fails == 5 then\n    text = \"раздосадованно. – Ты поддался эмоциям, путь выбрал быстрый и лёгкий. Не думал, что это место так быстро сможет сломить то, что ты взращивал в себе столько лет. Ты забыл уговор, который мы заключили, когда я взял тебя в ученики?\"\n  else text = \"<s>\n>> text display error!<s>\n\" end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 117,
        "text": "Дальше",
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.fails = master.fails or 1\nreturn master.fails == 5\nend"
      }
    ]
  },
  {
    "id": 114,
    "text": "   Джедай с усилием поднялся на ноги, отряхнулся от пыли и попытался оттереть копоть с почерневших рук. Его наставник подошёл ближе и скептически нахмурился.<s>r\n",
    "answers": [
      {
        "id": 157,
        "text": "Дальше",
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.fails = master.fails or 1\nreturn master.fails ~= 5\nend",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "id": 117,
        "text": "Дальше",
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.fails = master.fails or 1\nreturn master.fails == 5\nend"
      },
      {
        "id": 114,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\nmaster = master or {}\nmaster.fails = (master.fails or 0) <plus> 1\nmaster.position = 157 -- Мастер в зале с кораблём\nlocal text = \"\"\n  if master.fails == 1 then\n    text = \"– И что тут произошло? – строго спросил мастер, пристально глядя в глаза юноши.<s>\n– Я пытался вскрыть какой-то сейф и... – начал было Орнас, но замялся.<s>\n   Он продолжал отряхивать одежду и вдруг с ужасом заметил, что на его поясе не было светового меча: наверное тот выскочил из руки во время взрыва и теперь мог навсегда затеряться где-то в обломках...<s>\n– Кажется, я задел что-то взрывчатое, – тихо закончил падаван, украдкой осматривая пол комнаты.<s>\n– Вот как? – без удивления в голосе продолжил учитель. – Значит, мастерства обращения с мечом не хватило тебе, м?<s>\n– Да, магистр, – не задумывясь о смысле сказанного, согласился Орнас.<s>\n   Он лихорадочно пытался придумать способ, как быстро отыскать клинок, не привлекая внимания учителя, но ничего стоящего на ум не приходило, а признаваться в потере оружия не хотелось.<s>\n– Тебе стоит быть аккуратнее, – сдержанно проговорил магистр, протягивая что-то Орнасу. – Постарайся больше его не терять.<s>\n   Юноша потупил взгляд и осторожно взял свой световой меч из рук мастера, который тут же отвернулся и отошёл к стене. От требуемой кодексом образцовой безэмоциональности наставника Орнасу, как и всегда, стало не по себе.\"\n  elseif master.fails == 2 then\n    text = \"– И что здесь произошло? – обеспокоенно спросил мастер, ещё раз оглядывая юношу.<s>\n– Я пытался вскрыть какой-то сейф и... – начал было Орнас, но замялся.<s>\n   Он продолжал отряхивать одежду и вдруг с ужасом понял, что на поясе не было светового меча: наверное тот выскочил из руки во время взрыва и теперь мог навсегда затеряться где-то в обломках...<s>\n– Кажется, я задел что-то взрывчатое, – тихо закончил падаван, украдкой осматривая пол вокруг.<s>\n– Вот как? – продолжил учитель, внимательно наблюдая за блуждающим взглядом юноши. – Значит, мастерства обращения с мечом не хватило тебе?<s>\n– Да, магистр, – не задумывясь о смысле сказанного согласился Орнас. Он лихорадочно пытался придумать способ, как быстро отыскать клинок, не привлекая внимания учителя, но ничего стоящего на ум не приходило, а признаваться в потере оружия не хотелось.<s>\n– В этом, конечно, и заключается вся суть испытания, – неторопливо говорил наставник, с любопытством разглядывая кучу обломков возле себя. – Юный ум ищет решение проблемы, пусть и не обязательно находя лучшее из возможных. Но неправильный вариант тоже ценен, особенно если он твой собственный. Он поможет тебе обрести себя.<s>\n– Или убьёт, – невесело усмехнулся Орнас, небрежно переворачивая носком ботинка крупный фрагмент обшивки и заглядывая под него. – Разве не лучше просто остаться живым?<s>\n– Ты расстраиваешь меня, юный падаван, – серьёзно произнёс мастер и подошёл почти вплотную к юноше. – Как я не могу научить тебя быть тем джедаем, каким по моему представлению ты должен быть, так и ты не можешь стать самим собой, лишь повторяя <s><s>\"правильное<s><s>\" решение за мной или кем-то другим. Ты жив лишь до тех пор, пока делаешь выводы из своих ошибок, а я нужен лишь для того, чтобы помочь тебе в этом.<s>\n   Магистр взял руку Орнаса в свою и вложил в его ладонь потерянный световой меч. После этого старый джедай ободряюще похлопал по плечу удивлённого даже этим незначительным проявлением эмоций юношу и отошёл в сторону.\"\n  elseif master.fails == 3 then\n    text = \"– И что здесь произошло? – встревоженно спросил мастер, ещё раз оглядывая юношу.<s>\n– Я пытался вскрыть какой-то сейф и... – начал было Орнас, но замялся.<s>\n   Он продолжал отряхивать одежду и вдруг с ужасом понял, что на поясе не было светового меча: наверное тот выскочил из руки во время взрыва и теперь мог навсегда затеряться где-то в обломках...<s>\n– Кажется, я задел что-то взрывчатое, – тихо закончил падаван, украдкой осматривая пол вокруг.<s>\n– Вот как? – продолжил учитель, внимательно наблюдая за блуждающим взглядом юноши. – Значит, мастерства обращения с мечом не хватило тебе?<s>\n– Да, магистр, – не задумывясь о смысле сказанного согласился Орнас. Он лихорадочно пытался придумать способ, как быстро отыскать клинок, не привлекая внимания учителя, но ничего стоящего на ум не приходило, а признаваться в потере оружия не хотелось.<s>\n– Я чувствую, как тьма этого места меняет восприятие, – очень медленно проговорил наставник, с любопытством разглядывая кучу обломков возле себя. – Она словно линза фокусирует эмоции, притупляет ощущения, наполняет ум доселе чуждыми мыслями. Ты, верно, поддался этому зову, юный падаван?<s>\n– Я не знаю... – растерянно протянул Орнас, небрежно переворачивая носком ботинка крупный фрагмент обшивки и заглядывая под него. – Выходит, это храм на меня так влияет?<s>\n– Частично. Но в твоей голове лишь то, что ты принёс с собой. Тьма не создаёт тени, а лишь углубляет их.<s>\n– Значит, это и на Вас действует? – оживился юноша и сделал несколько шагов в сторону другого крупного обломка. – В чём это проявляется?<s>\n– О, с тех пор, как мы прибыли, я никак не могу отделаться от воспоминаний об одной очаровательной особе, – неожиданно для Орнаса засмеялся учитель. – Она стала рыцарем-джедаем, когда я был ещё совсем мальчишкой, и я всё представлял, как мы тайно поженимся и вместе сбежим из Ордена.\" .. (dess.meetMaster == 0 and \"<s>\n   Лицо наставника вдруг сделалось печальным, он сдержанно улыбнулся и вложил в ладонь Орнаса потерянный световой меч. После этого старый джедай ободряюще похлопал юношу по плечу и отошёл в сторону.\" or \"<s>\n   Наставник радостно улыбнулся и вложил в ладонь Орнаса потерянный световой меч. После этого старый джедай ободряюще похлопал юношу по плечу и отошёл в сторону.\")\n  elseif master.fails == 4 then\n    text = \"– И что здесь произошло? – сочувственно спросил мастер, ещё раз оглядывая юношу.<s>\n– Я пытался вскрыть какой-то сейф и... – начал было Орнас, но замялся.<s>\n   Он продолжал отряхивать одежду и вдруг с ужасом понял, что на поясе не было светового меча: наверное тот выскочил из руки во время взрыва и теперь мог навсегда затеряться где-то в обломках...<s>\n– Кажется, я задел что-то взрывчатое, – тихо закончил падаван, украдкой осматривая пол вокруг.<s>\n– Вот как? – продолжил учитель, внимательно наблюдая за блуждающим взглядом юноши. – Значит, мастерства обращения с мечом не хватило тебе?<s>\n– Да, магистр, – не задумывясь о смысле сказанного согласился Орнас. Он лихорадочно пытался придумать способ, как быстро отыскать клинок, не привлекая внимания учителя, но ничего стоящего на ум не приходило, а признаваться в потере оружия не хотелось.<s>\n– Я тебе не рассказывал, как в одной из своих миссий допустил такую же ошибку? – медленно проговорил наставник, с любопытством разглядывая кучу обломков возле себя. – Это, кстати, было в древнем лабиринте на одной очень похожей планете. Забавно...<s>\n   Орнас небрежно перевернул носком ботинка крупный фрагмент обшивки и заглянул под него. Юноша не сразу заметил, что учитель словно забыл о разговоре и сосредоточенно уставился куда-то вдаль.<s>\n– Забавно, – тихо повторил старый джедай, будто не замечая ученика и обращаясь сам к себе. – Пятнадцать лет назад? Нет, все двадцать, пожалуй. Я исследовал все системы из этого злосчастного списка совсем с другой целью. Неужели я тогда всё ещё правда надеялся? Безумие...<s>\n   Он как во сне прошагал мимо Орнаса, едва не сбив его с ног, но уже через несколько секунд вернулся и, не говоря больше ни слова, протянул юноше потерянный световой меч. После этого он всё так же молча отошёл в сторону. Орнас попытался вспомнить, видел ли он хоть когда-нибудь своего учителя настолько несобранным, и был вынужден отметить, что такого на его памяти никогда не происходило. Юношу пугало, как это место действует даже на такого сильного джедая, и он невольно задумался о собственных поступках в храме.\"\n  elseif master.fails == 5 then\n    text = \"– И что здесь произошло? – раздосадованно спросил мастер, ещё раз оглядывая юношу.<s>\n– Я пытался вскрыть какой-то сейф и... – начал было Орнас, но замялся.<s>\n   Он продолжал отряхивать одежду и вдруг с ужасом понял, что на поясе не было светового меча: наверное тот выскочил из руки во время взрыва и теперь мог навсегда затеряться где-то в обломках...<s>\n– Кажется, я задел что-то взрывчатое, – тихо закончил падаван, украдкой осматривая пол вокруг.<s>\n– Вот как? – продолжил учитель, внимательно наблюдая за блуждающим взглядом юноши. – Значит, мастерства обращения с мечом не хватило тебе?<s>\n– Да, магистр, – не задумывясь о смысле сказанного согласился Орнас. Он лихорадочно пытался придумать способ, как быстро отыскать клинок, не привлекая внимания учителя, но ничего стоящего на ум не приходило, а признаваться в потере оружия не хотелось.<s>\n– А может ты просто поддался эмоциям? – с нажимом спросил наставник. – Выбрал путь быстрый и лёгкий? Не думал, что это место так быстро сможет сломить то, что ты взращивал в себе столько лет. Ты забыл уговор, который мы заключили, когда я взял тебя в ученики?\"\n  else text = \"<s>\n>> text display error!<s>\n\" end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 115,
    "text": "   Юноша сдержанно поблагодарил учителя и замер, ожидая наставлений после такой глупой и досадной ошибки.<s>r\n",
    "answers": [
      {
        "id": 115,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nmaster = master or {}\nmaster.fails = (master.fails or 0) <plus> 1\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\ndess.meetMaster = dess.meetMaster or 0 \n  if dess.isUpstairs == 1 and dess.meetMaster == 0 then -- если ещё не встречались\n    dess.meetMaster = 3 -- готовность к альтернативной встрече\n  end\nmaster.position = 155 -- Мастер в дальнем зале\nlocal text = \"\"\n  if master.fails == 1 then\n    text = \"– Внимательность и осторожность, – медленно начал говорить мастер, – эти слова не должны быть для тебя пустым звуком. Это то, без чего тебе не стать хорошим джедаем, Орнас.<s>\n   Юноша лишь виновато кивнул. Сколько раз он видел это беспристрастное и холодное выражение лица, сколько раз угрюмо выслушивал строгие нотации. От требуемой кодексом образцовой безэмоциональности наставника Орнасу часто становилось не по себе.\" .. (dess.meetMaster == 3 and \"<s>\n   Не дождавшись реакции Орнаса, учитель отвернулся от него и собрался идти к лестнице.\" or \"<s>\n   Не дождавшись реакции Орнаса, учитель отошёл от него и опустился на нижние ступени массивной лестницы.\")\n  elseif master.fails == 2 then\n    text = \"– Внимательность и осторожность, – медленно начал говорить мастер, – эти слова не должны быть для тебя пустым звуком. Конечно, в этом и суть испытания: юный ум ищет решение проблемы, пусть и не обязательно находя лучшее из возможных. Но неправильный вариант тоже ценен, особенно если он твой собственный. Он поможет тебе обрести себя.<s>\n– Или убьёт, – невесело усмехнулся Орнас. – Разве не лучше просто остаться живым?<s>\n– Ты расстраиваешь меня, юный падаван, – серьёзно произнёс мастер. – Как я не могу научить тебя быть тем джедаем, каким по моему представлению ты должен быть, так и ты не можешь стать самим собой, лишь повторяя <s><s>\"правильное<s><s>\" решение за мной или кем-то другим. Ты жив лишь до тех пор, пока делаешь выводы из своих ошибок, а я нужен лишь для того, чтобы помочь тебе в этом.\" .. (dess.meetMaster == 3 and \"<s>\n   Наставник сдержанно улыбнулся, отвернулся от удивлённого даже этим незначительным проявлением эмоций подопечного и собрался идти к лестнице.\" or \"<s>\n   Наставник сдержанно улыбнулся, неспешно отошёл от удивлённого даже этим незначительным проявлением эмоций юноши и опустился на нижние ступени массивной лестницы.\")\n  elseif master.fails == 3 then\n    text = \"– Внимательность и осторожность, – медленно начал говорить мастер, – эти слова не должны быть для тебя пустым звуком. Я чувствую, как тьма этого места меняет восприятие. Она словно линза фокусирует эмоции и ощущения, наполняет ум доселе чуждыми мыслями, туманит рассудок. И ты, верно, поддался этому зову, юный падаван?<s>\n– Я не знаю... – растерянно протянул Орнас. – Выходит, это храм на меня так влияет?<s>\n– Частично. Но в твоей голове лишь то, что ты принёс с собой. Тьма не создаёт тени, а лишь углубляет их.<s>\n– Значит, это и на Вас действует? – оживился юноша. – В чём это проявляется?<s>\n– О, с тех пор, как мы прибыли, я никак не могу отделаться от воспоминаний об одной очаровательной особе, – неожиданно для Орнаса засмеялся учитель. – Она стала рыцарем-джедаем, когда я был ещё совсем мальчишкой, и я всё представлял, как мы тайно поженимся и вместе сбежим из Ордена.\" .. ( (dess.meetMaster == 3 and \"<s>\n   Лицо наставника вдруг сделалось печальным, он сдержанно улыбнулся, отвернулся от подопечного и собрался идти к лестнице.\") or (dess.meetMaster == 0 and \"<s>\n   Лицо наставника вдруг сделалось печальным, он сдержанно улыбнулся, быстро отошёл от юноши и опустился на нижние ступени массивной лестницы.\") or \"<s>\n   Наставник вдруг радостно улыбнулся, быстро отошёл от юноши и опустился на нижние ступени массивной лестницы.\")\n  elseif master.fails == 4 then\n    text = \"– Внимательность и осторожность, – медленно начал говорить мастер, – эти слова не должны быть для тебя пустым звуком. Я тебе не рассказывал, как в одной из своих миссий допустил такую же ошибку? Это, кстати, было в древнем лабиринте на одной очень похожей планете. Забавно...<s>\n   Орнас удивленно смотрел на учителя, который словно забыл о разговоре и сосредоточенно уставился на одну из каменных лестниц позади юноши.<s>\n– Забавно, – тихо повторил старый джедай, будто не замечая ученика и обращаясь сам к себе. – Пятнадцать лет назад? Нет, все двадцать, пожалуй. Я исследовал все системы из этого злосчастного списка совсем с другой целью. Неужели тогда я всё ещё правда надеялся? Безумие...\" .. (dess.meetMaster == 3 and \"<s>\n   Орнас попытался вспомнить, видел ли он хоть когда-нибудь своего учителя настолько несобранным, и был вынужден отметить, что такого на его памяти никогда не происходило. Юношу пугало, как это место действует даже на такого сильного джедая, и он невольно задумался о собственных поступках в храме.<s>\n   Тем временем мастер медленно, будто во сне, обернулся в сторону лестницы.\" or \"<s>\n   Он как во сне прошёл к приковавшей его взгляд массивной лестнице, едва не сбив юношу с ног, и опустился на нижние ступени. Орнас попытался вспомнить, видел ли он хоть когда-нибудь своего учителя настолько несобранным, и был вынужден отметить, что такого на его памяти никогда не происходило. Юношу пугало, как это место действует даже на такого сильного джедая, и он невольно задумался о собственных поступках в храме.\")\n  elseif master.fails == 5 then\n    text = \"– Внимательность и осторожность, – медленно начал говорить мастер, – эти слова не должны быть для тебя пустым звуком. А ты поддался эмоциям, поторопился. Не думал, что это место так быстро сможет сломить то, что ты взращивал в себе столько лет. Ты забыл уговор, который мы заключили, когда я взял тебя в ученики?\"\n  else text = \"<s>\n>> text display error!<s>\n\" end\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.fails = master.fails or 1\nreturn master.fails ~= 5\nend",
        "var_set": [
          "lov234",
          1
        ],
        "lua_do": "function lua_do()\nadConditions = adConditions or {}\nadConditions.rayField = 1\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\nlocal a = dess.meetMaster == 3 and 140 or 155\nshowPage{id = a}\nend",
        "text": "Дальше",
        "id": 115,
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.fails = master.fails or 1\nreturn master.fails == 5\nend",
        "id": 117,
        "text": "Дальше",
        "lua_do": "function lua_do()\nadConditions = adConditions or {}\nadConditions.rayField = 1\nend",
        "var_set": [
          "lov234",
          1
        ]
      }
    ]
  },
  {
    "id": 116,
    "text": "   В мгновение ока световой меч оказался в руках Орнаса. Ровное свечение клинка озарило комнату ярким светом и придало джедаю уверенности.<s>r\n   Поняв, что опасность ему не угрожает, Орнас деактивировал клинок и убрал рукоять на пояс.",
    "answers": [
      {
        "id": 141,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 117,
    "text": "   Орнас не забыл. Он помнил отчётливо и ясно, как будто это было самое важное событие в его жизни. И оно было таким до сегодняшнего дня. До испытания.<s>r\n   Юноша помнил, как очень давно он, скованный страхом, ожидал решения Совета джедаев. И как строгая старая женщина говорила кому-то: \"Не возьмут. Не тот возраст. Да ещё с такой-то историей.\" И как он впервые увидел учителя, когда тот вышел из зала Совета и увёл маленького Орнаса в крохотную тёмную комнату.<s>r\n   И конечно, юноша помнил уговор, заключённый тогда. Слишком взрослый уговор для маленького перепуганного ребёнка.<s>r\n",
    "answers": [
      {
        "id": 118,
        "text": "Дальше"
      },
      {
        "id": 117,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext = (style == 1 and \"   <s><s>\"Ты Орнас, верно? – спросил его подошедший джедай. – Я слышал, ты в отличной физической форме.<s><s>\"<s>\n    Мальчик лишь испуганно кивнул. \") \nor (style == 2 and \"   <s><s>\"Ты Орнас, верно? – спросил его подошедший джедай. – Я слышал, ты поразительно владеешь Силой.<s><s>\"<s>\n   Мальчик лишь испуганно кивнул. \") \nor (style == 3 and \"   <s><s>\"Ты Орнас, верно? – спросил его подошедший джедай. – Я слышал, у тебя зоркий глаз и отменная интуиция.<s><s>\"<s>\n   Мальчик лишь испуганно кивнул. \") \nor (style == 4 and \"   <s><s>\"Ты Орнас, верно? – спросил его подошедший джедай. – Я слышал, у тебя удивительно острый ум.<s><s>\"<s>\n   Мальчик лишь испуганно кивнул. \") \nor (style == 5 and \"   <s><s>\"Ты Орнас, верно? – спросил его подошедший джедай.– Я чувствую, что не смотря ни на что, у тебя очень доброе сердце.<s><s>\"<s>\n   Мальчик лишь испуганно пожал плечами. \") \nor (style == 6 and \"   <s><s>\"Ты Орнас, верно?<s><s>\" – спросил его подошедший джедай. <s>\n   Мальчик лишь испуганно кивнул. \") or \"<< quest error #117! please, contact the author<s>\n\"\ntext = text .. \"Тогда джедай по-отечески тепло улыбнулся и сказал, что готов обучать Орнаса. И что это будет непросто, потому что прошлое мальчика будет всегда подстерегать его. И что им обоим придётся навсегда отстраниться от чувств и эмоций, чтобы не потерять себя во тьме.<s>\n   Орнас не всё понимал тогда, но согласился. Мог ли он поступить иначе?\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 118,
    "text": "   И теперь юноша понимал, отчего так раздосадован его наставник.<s>r\n– Не забыл, – с досадой на самого себя ответил Орнас.<s>r\n– Я знаю, как это тяжело, – продолжал мастер вкрадчиво. – Ведь мне пришлось пройти этот же путь вместе с тобой. И поэтому сейчас я понимаю, что ты чувствуешь. Но дело больше не в испытании, теперь надо хотя бы не потерять всё то, чего ты добился за годы обучения.<s>r\n   Старый джедай говорил тихо, но в его интонациях и движениях Орнас ощущал напряжение и страх.<s>r\n",
    "answers": [
      {
        "id": 118,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\ndess.meetMaster = dess.meetMaster or 0\nlocal m = dess.meetMaster > 0 and dess.meetMaster < 3 and 1 or 0\nlocal text = (dess.isUpstairs == 1 and m == 1 and \"– Закончим это все вместе, так будет лучше, – подытожил учитель. – Наша цель на верхних уровнях храма, я буду ждать тебя там вместе с Десвиар.<s>\n   \"  or \"– Закончим это вместе, так будет лучше, – подытожил учитель. – Наша цель на верхних уровнях храма, я буду ждать тебя там.<s>\n   \")\nmaster = master or {}\nmaster.fails = master.fails or 5\n  if master.position == 189 then -- комната справа\n    text = text .. \"Он кивнул Орнасу, быстрым шагом подошёл к двери и скрылся за ней.<s>\n   Спорить с наставником было бессмысленно, и Орнас с горечью подумал, что так ему могут и не засчитать прохождение испытания, а значит и не дать звание рыцаря. Но теперь юноше оставалось лишь закончить все свои дела на этом этаже и присоединится к учителю наверху.\"\n    sup118 = 189\n  elseif master.position == 157 then -- зал с кораблём\n    text = text .. \"Он вложил в руки Орнаса рукоять потерянного светового меча и быстро вышел из зала.<s>\n   Спорить с наставником было бессмысленно, и Орнас с горечью подумал, что так ему могут и не засчитать прохождение испытания, а значит и не дать звание рыцаря. Но теперь юноше оставалось лишь закончить все свои дела на этом этаже и присоединится к учителю наверху.\"\n    sup118 = 157\n  elseif master.position == 155 then -- дальний зал\n    text = text .. \"Спорить с наставником было бессмысленно, и Орнас с горечью подумал, что так ему могут и не засчитать прохождение испытания, а значит и не дать звание рыцаря. Но теперь юноше оставалось лишь закончить все свои дела на этом этаже и присоединится к учителю. Тот уже отвернулся от юноши в сторону лестницы.\"\n    sup118 = 155\n  else text = \"<< text display error!\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 118,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\nsup118 = dess.meetMaster == 3 and 140 or sup118\n\nmaster.position = 156 --\"наверху лестницы\"\nshowPage{id = sup118}\nsup118 = nil\nend",
        "no_transition": true
      }
    ]
  },
  {
    "id": 119,
    "text": "   <s>r\n",
    "answers": [
      {
        "id": 119,
        "text": "Апатия (всё пофиг) –приободрить\n\n• молчать <plus>1\n• утешить -1\n• приободрить <plus>5\n• обещать помощь <plus>1\n• успокоить -3\n• дать совет <plus>1\n• высказать недоверие - 5",
        "lua_if": "function lua_if()\nreturn not true\nend",
        "merge": true
      },
      {
        "id": 119,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.trust = dess.trust or a_tia_trust\ndess.action = dess.action or 1 -- молчать\nlocal text = \"\"\n  if dess.action == 1 then -- молчать \n    text = \"   Орнас решил дать девушке немного времени, чтобы прийти в себя и справиться с этим шокирующим известием. Он молча ждал.<s>\n   Через несколько неуютных минут Десс ещё раз посмотрела в свои раскрытые ладони, и в её взгляд вернулась осмысленность.<s>\n– Кажется, ты прав, – как-то отрешённо проговорила она наконец. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust <plus> 1\n\n  elseif dess.action == 2 then \n    text = \"– Я понимаю, что тебе очень тяжело оказаться в такой ситуации, – попытлася утешить девушку Орнас. – Не представляю, что случилось с тобой здесь, но теперь это можно исправить. Наверное...<s>\n– Есть вещи, которых не исправить, – несколько отрешённо проговорила она в ответ. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust - 1\n\n  elseif dess.action == 3 then \n    text = \"– Быть джедаем не так уж плохо, – попытался пошутить Орнас. – Я бы даже сказал, что это лучший из вариантов для того, кто обнаружил себя в таком мрачном и опасном месте.<s>\n– Наверное, ты прав, – наконец проговорила девушка и вымученно улыбнулась. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда. Или вернуть надежду.\"\n    dess.trust = dess.trust <plus> 5\n\n  elseif dess.action == 4 then \n    text = \"– Давай я помогу тебе... – начал говорить Орнас и запнулся, потому что не знал, чем же он мог сейчас помочь девушке. Пауза затянулась.<s>\n   Через несколько неуютных мгновений Десс перевела взгляд с юноши на свои раскрытые ладони, и в её взгляд вернулась некоторая осмысленность.<s>\n– Поможешь мне с чем? – отрешённо спросила она, но сразу продолжила, не дожидаясь ответа: – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust <plus> 1\n\n  elseif dess.action == 5 then \n    text = \"– Ты, главное, не волнуйся, – затараторил Орнас и попытался подойти ближе к девушке. – Я уверен, что память к тебе скоро вернётся. Особенно, если попасть в знакомую обстановку. Главное – не нервничать слишком сильно.<s>\n– А я выгляжу слишком нервно? – скривилась Десс, но сразу продолжила, не дожидаясь ответа. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust - 3\n\n  elseif dess.action == 6 then \n    text = \"– Я понимаю, что такое может шокировть, – забормотал Орнас, – но попытайся просто принять это. Оцени своё состояние, прислушайся к ощущениям. Может быть, тебе просто нужно попасть в какую-то знакомую ситуацию, чтобы всё прояснилось...<s>\n– Не думай, будто лучше меня знаешь, что нужно делать, – перебила его Десс и скривилась. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust - 3\n\n  elseif dess.action == 7 then \n    text = \"– Не делай вид, будто тебя это шокирует, – довольно грубо бросил Орнас. – Ты не можешь всё время отнекиваться. Может наконец расскажешь, что здесь произошло?<s>\n– Не думай, будто видишь меня насквозь, – процедила Десс и скривилась. – Всего одна твоя фраза пробудила в памяти столько всего, что мне бы хотелось забыть навсегда.\"\n    dess.trust = dess.trust -5\n\n  end\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 68,
        "text": "Дальше",
        "run": [
          68
        ]
      },
      {
        "id": 68,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- если нет возвращения в комнату после предательства Десс\ndess = dess or {}\ndess.trait = dess.trait or 0\nreturn dess.trait ~= 1\nend"
      }
    ]
  },
  {
    "id": 120,
    "text": "   \n",
    "answers": [
      {
        "id": 120,
        "text": "Напряжённость (на пределе терпения) – успокоить\n\n• молчать -1\n• утешить <plus>1\n• приободрить <plus>3\n• обещать помощь -1\n• успокоить <plus>5\n• дать совет -5\n• высказать недоверие - 5",
        "lua_if": "function lua_if()\nreturn not true\nend",
        "merge": true
      },
      {
        "id": 120,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.trust = dess.trust or a_tia_trust\ndess.action = dess.action or 1 -- молчать\nlocal text = \"\"\n  if dess.action == 1 then \n    text = \"   Орнас решил дать девушке немного времени, чтобы прийти в себя и справиться с этим шокирующим известием. Он молча ждал. Через несколько неуютных минут Десс, ещё крепче сжимая руками грубую ткань плаща, с укором посмотрела в глаза джедая.<s>\n– Так и есть, –  холодно проговорила она наконец. – Жаль, что не получилось забыть об этом навсегда.\"\n    dess.trust = dess.trust -1\n\n  elseif dess.action == 2 then \n    text = \"– Я понимаю, что тебе очень тяжело оказаться в такой ситуации, – попытлася утешить девушку Орнас. – Не представляю, что случилось с тобой здесь, но теперь это можно исправить. Наверное...<s>\n– Есть вещи, которые не исправить, – проговорила Десс в ответ, наконец расслабив руки. – Жаль, что не получилось просто забыть об этом навсегда.\"\n    dess.trust = dess.trust <plus> 1\n\n  elseif dess.action == 3 then \n    text = \"– Быть джедаем не так уж плохо, – попытался пошутить Орнас. – Я бы даже сказал, что это лучший из вариантов для того, кто обнаружил себя в таком мрачном и опасном месте.<s>\n– Наверное, ты прав, – наконец проговорила девушка, даже не изобразив улыбку. – Но всё равно жаль, что не получилось просто забыть об этом навсегда.\"\n    dess.trust = dess.trust <plus> 3\n\n  elseif dess.action == 4 then \n    text = \"– Давай я помогу тебе... – начал говорить Орнас и запнулся, потому что не знал, чем же он мог сейчас помочь девушке.<s>\n– Поможешь мне с чем? – спросила она, и ещё сильнее сжала руки. – Жаль, что не получилось просто забыть об этом всём навсегда.\"\n    dess.trust = dess.trust - 1\n\n  elseif dess.action == 5 then \n    text = \"– Ты, главное, не волнуйся, – затараторил Орнас, подходя ближе к девушке и пытаясь взять её за руку. – Я уверен, что память к тебе скоро вернётся. Особенно, если попасть в знакомую обстановку. Главное – не нервничать слишком сильно.<s>\n– А я выгляжу слишком нервно? – спросила Десс, удивлённо взглянула на свои побелевшие от напряжения пальцы, выглядывающие из-под накрывшей их ладони джедая, и вымученно улыбнулась. – Просто мне очень жаль, что не получилось забыть об этом всём навсегда.\"\n    dess.trust = dess.trust <plus> 5\n\n  elseif dess.action == 6 then \n    text = \"– Я понимаю, что такое может шокировть, – забормотал Орнас, – но попытайся просто принять это. Оцени своё состояние, прислушайся к ощущениям. Может быть, тебе просто нужно попасть в какую-то знакомую ситуацию, чтобы всё прояснилось...<s>\n– Не думай, будто лучше меня знаешь, что нужно делать, – перебила его Десс и скривилась. – Жаль, что у меня не получилось просто забыть об этом всём навсегда.\"\n    dess.trust = dess.trust - 3\n\n  elseif dess.action == 7 then \n    text = \"– Не делай вид, будто тебя это шокирует, – довольно грубо бросил Орнас. – Ты не можешь всё время отнекиваться. Может, наконец расскажешь, что здесь произошло?<s>\n– Не думай, будто видишь меня насквозь, – процедила Десс и скривилась. – Жаль, что у меня не получилось просто забыть об этом всём навсегда.\"\n    dess.trust = dess.trust -5\n\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 68,
        "text": "Дальше",
        "run": [
          68
        ]
      },
      {
        "id": 68,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- если нет возвращения в комнату после предательства Десс\ndess = dess or {}\ndess.trait = dess.trait or 0\nreturn dess.trait ~= 1\nend"
      }
    ]
  },
  {
    "id": 121,
    "text": "<s>r   \n",
    "answers": [
      {
        "id": 121,
        "text": "Смятение (как будет лучше?) – дать совет\n\n• молчать -5\n• утешить -1\n• приободрить <plus>1\n• обещать помощь <plus>3\n• успокоить -3\n• дать совет <plus>5\n• высказать недоверие - 5",
        "lua_if": "function lua_if()\nreturn not true\nend",
        "merge": true
      },
      {
        "id": 121,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.trust = dess.trust or a_tia_trust\ndess.action = dess.action or 1 -- молчать\nlocal text = \"\"\n  if dess.action == 1 then -- молчать \n    text = \"   Орнас решил дать девушке немного времени, чтобы прийти в себя и справиться с этим шокирующим известием. Он молча ждал.<s>\n   Но Десс всё никак не успокаивалась. Её руки лихорадочно теребили грубую ткань плаща, а взгляд метался, не задерживясь надолго ни на самом джедае, ни на пустой капсуле, ни на ближайшей двери. Орнас тревожно наблюдал за этим, не в силах понять, какие мысли сейчас терзают девушку.<s>\n– Не могу поверить, что ты не придумал ничего умнее, чем стоять и пялиться, – обиженно проговорила она наконец. – Всего одна фраза пробудила в моей памяти столько всего, что хотелось бы забыть навсегда. И ты оставил меня с ней один на один...\"\n    dess.trust = dess.trust - 5\n\n  elseif dess.action == 2 then \n    text = \"– Я понимаю, что тебе очень тяжело оказаться в такой ситуации, – попытлася утешить девушку Орнас. – Не представляю, что случилось с тобой здесь, но теперь это можно исправить. Наверное...<s>\n– Есть вещи, которые не исправить, – выпалила Десс в ответ, дёрнувшись всем телом назад. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust - 1\n\n  elseif dess.action == 3 then \n    text = \"– Быть джедаем не так уж плохо, – попытался пошутить Орнас. – Я бы даже сказал, что это лучший из вариантов, когда находишь себя в таком мрачном и опасном месте.<s>\n– Может быть да, а может и нет, –  со вздохом проговорила девушка. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust <plus> 1\n\n  elseif dess.action == 4 then \n    text = \"– Давай я помогу тебе... – начал говорить Орнас и запнулся, потому что не знал, чем же он мог сейчас помочь девушке. Пауза затянулась.<s>\n   Через несколько неуютных мгновений Десс перевела взгляд с юноши на свои дрожащие ладони и её глаза впервые за долгое время застыли.<s>\n– Поможешь мне с чем? – спросила она, сделав нерешительный шажок в сторону джедая. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust <plus> 3\n\n  elseif dess.action == 5 then \n    text = \"– Ты, главное, не волнуйся, – затараторил Орнас и попытался подойти ближе к девушке, но она отшатнулась от него. – Я уверен, что память к тебе скоро вернётся. Особенно, если попасть в знакомую обстановку. Главное – не нервничать слишком сильно.<s>\n– Ты серьёзно? – скривилась Десс, вытягивая вперёд дрожащие руки. – Думаешь, можно просто так взять и успокоиться? Ты сказал всего одну фразу, но она пробудила в моей памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust - 3\n\n  elseif dess.action == 6 then \n    text = \"– Я понимаю, что такое может шокировть, – забормотал Орнас и Дессвиар пришлось приблизиться на шаг, чтобы его расслышать. – Попытайся просто принять это, не торопись. Оцени своё состояние, прислушайся к ощущениям. Может быть, тебе просто нужно попасть в какую-то знакомую ситуацию, чтобы всё прояснилось...<s>\n– Да, торопиться мне теперь точно некуда, – согласилась Десс и вымученно улыбнулась. – Так странно, что всего одна фраза может пробудить в памяти столько всего, что хотелось забыть навсегда.\"\n    dess.trust = dess.trust <plus> 5\n\n  elseif dess.action == 7 then \n    text = \"– Не делай вид, будто тебя это шокирует, – довольно грубо бросил Орнас. – Ты не можешь всё время отнекиваться. Может наконец расскажешь, что здесь произошло?<s>\n– Не думай, будто видишь меня насквозь, – процедила Десс и скривилась. – Всего одна твоя фраза пробудила в памяти столько всего, что мне бы хотелось забыть навсегда.\"\n    dess.trust = dess.trust -5\n\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 68,
        "text": "Дальше",
        "run": [
          68
        ]
      },
      {
        "id": 68,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- если нет возвращения в комнату после предательства Десс\ndess = dess or {}\ndess.trait = dess.trait or 0\nreturn dess.trait ~= 1\nend"
      }
    ]
  },
  {
    "id": 122,
    "text": "– Держи, – проговорил юноша, бережно снимая с пояса рукоять клинка, и передал её Десс.<s>r\n   Девушка благоговейно приняла своё оружие из рук Орнаса и отступила на несколько шагов. Яркий луч света вспыхнул с характерным звуком и затих. Несколько взмахов со свистом рассекли воздух, затем Десвиар деактивировала клинок.<s>r\n– Спасибо, – всё ещё разглядывая своё вновь обретённое сокровище, проговорила она, – теперь я наконец-то начинаю по-настоящему вспоминать себя.<s>r\n   Десс спрятала меч куда-то в складки плаща и внимательно посмотрела на джедая. Едва уловимые перемены в её взгляде заставили юношу вздрогнуть ещё до того, как она заговорила.<s>r\n– Так как ты ещё не полноценный джедай, а я уже рыцарь, – резким тоном произнесла она, – будешь держаться у меня за спиной. Никуда не лезь. Без разрешения ничего не делай. Это место опасно, я на своей шкуре это прочувствовала.<s>r\n   Орнас с удивлением и испугом вытаращился на неожиданно объявившегося командира. Такого расклада он допустить не мог.",
    "answers": [
      {
        "id": 131,
        "text": "Упрашивать"
      },
      {
        "id": 128,
        "text": "Убеждать"
      },
      {
        "id": 129,
        "text": "Проявить понимание",
        "lua_if": "function lua_if()\n-- нужно все действия переименовать!\ndess = dess or {}\ndess.understanding = dess.understanding or 0\nreturn dess.understanding == 2\nend"
      },
      {
        "id": 130,
        "text": "Возмущаться"
      },
      {
        "id": 588,
        "text": "Подавить волю с помощью Силы",
        "lua_if": "function lua_if()\nreturn force_ab == 1\nend"
      }
    ]
  },
  {
    "id": 123,
    "text": "   Джедай использовал Силу, и необычный \"ключ\" быстро переместился в его ладонь. ",
    "answers": [
      {
        "super_calculate": false,
        "id": 123,
        "calculate": true,
        "lua_do": "function lua_do()\nkeys = keys or {}\nkey1form = key1form or 1 -- для центра\nkey2form = key2form or 2 -- для среднего\nkey3form = key3form or 3 -- для внешнего\nkeys.stillRequired = keys.stillRequired or {key1form, key2form, key3form}\nif not keys.notRequired then\nkeys.notRequired = {}\nlocal a = {1,2,3,4,5,6}\n    for i = 1, #a do\n        if a[i] ~= key1form and a[i] ~= key2form and a[i] ~= key3form then\n            table.insert(keys.notRequired, i)\n        end\n    end\nend\n--keyform_in_location1 - keys.col1\n--keyform_in_location2 - keys.col2\n--keyform_in_location3 - keys.safe\n--keyform_in_location4 - keys.TL\n--keyform_in_location5 - keys.dess\n--keyform_in_location6 - keys.cage\nif not keys.cage then\nkeys.conjugate = keys.conjugate or 0\n  if keys.conjugate == 0 then -- первое посещение, пара не установлена, получает нужный ключ\n    local a = math.random(#keys.stillRequired)\n    keyform_in_location6 = keys.stillRequired[a] -- случайный из нужных\n    table.remove(keys.stillRequired,a) -- убрать из списка нужных\n    keys.conjugate = 1\n  else -- пара уже была установлена ранее\n    if keys.TLFail == 1 and keys.dessFail == 1 then -- все зафейлено, получает нужный ключ\n      local a = math.random(#keys.stillRequired)\n      keyform_in_location6 = keys.stillRequired[a] -- случайный из нужных\n      table.remove(keys.stillRequired,a) -- убрать из списка нужных\n    else -- не зафейлено окончательно, получает ненужный ключ\n      local b = math.random(#keys.notRequired)\n      keyform_in_location6 = keys.notRequired[b] -- случайный из ненужных\n      table.remove(keys.notRequired,b) -- убрать из списка ненужных\n    end\n  end\nkeys.cage = 1\nend\n\nend",
        "text": "Новый механизм размещения ключей"
      },
      {
        "id": 177,
        "text": "Дальше",
        "lua_do": "function lua_do()\nvars[\"have_key_form\" .. keyform_in_location6] = 1\nkey_on_position_6_avail = 0\nkeyposition6 = 1\nend"
      },
      {
        "id": 123,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n text = \"На потемневшей от времени рукояти было лишь строгое изображение \" .. ({\"звезды с десятью лучами\", \"полумесяца\", \"треугольника\", \"квадрата\", \"пятиугольника\", \"шестиугольника\"})[keyform_in_location6] .. \". Внимательно осмотрев находку со всех сторон и не отыскав чего-то примечательного, Орнас аккуратно повесил предмет на пояс.\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 124,
    "text": "   Орнас внимательно оглядел помещение. ",
    "answers": [
      {
        "super_calculate": false,
        "id": 124,
        "calculate": true,
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.saberTracks = 1\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 124,
        "text": "Генерация текста: описание комнаты",
        "lua_text": "function lua_text()\nlocal text = \"На потолке виднелись толстые провода, уходящие от устройства лучегасителей над бакто-камерой куда-то вглубь храма. \"\ntext = text .. ((gofrom == 155 and \"Почти все лампы в той части помещения, где сейчас находился Орнас, сейчас не работали, \") or (g.previous_id == 246 and \"Почти все лампы той части помещения, где сейчас находился Орнас, сейчас не работали, \") or  \"Все лампы в дальней от юноши части помещения сейчас не работали, \") .. \"зато в освещённой части можно было разглядеть на каменной поверхности стен и пола многочисленные отметины и повреждения, очень напоминающие следы, оставляемые световыми мечами.\"\nreturn text\nend",
        "merge": true
      },
      {
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 1,
        "id": 124
      }
    ]
  },
  {
    "id": 125,
    "text": "   Джедай скрупулезно изучил нижнюю часть просторного зала, не решаясь пока подниматься наверх. На пыльном полу читались следы дроидов, отпечатки обуви и даже чьих-то босых ног. В таком хаосе даже опытному Орнасу было сложно понять ещё хоть что-то.\n   Провода от правого энергетического блока шли по потолку куда-то вглубь храма, а вот от левого – прямо к генератору лучегасителей, незаметно нависшему над подступами к этому же энергоблоку. Осмотрев стены в этом месте, джедай обнаружил и скрытый датчик движения, видимо и активирующий силовое поле.<s>r\n   Орнас с помощью Силы запустил небольшой камень в направлении прибора и почти сразу услышал негромкий щелчок, после чего пространство перед датчиком оказалось отрезано силовым полем лучегасителей. Юноша осторожно подошёл к блоку и нажал на верхний переключатель, отключив тем самым ловушку.",
    "answers": [
      {
        "super_calculate": false,
        "id": 125,
        "calculate": true,
        "lua_do": "function lua_do()\ntrap = 1\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 155,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 126,
    "text": "   Потратив несколько минут на тщательный осмотр помещения, джедай не нашёл ничего, что он не заметил раньше.<s>r\n   \"Интересно, почему корабль соединён проводами с панелью?\" – задумался Орнас.",
    "answers": [
      {
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 1,
        "id": 126
      }
    ]
  },
  {
    "id": 127,
    "text": "   Орнас пристально вглядывался в тёмное помещение, выискивая взглядом что-нибудь интересное, но не смог заметить никаких скрытых или полезных деталей.",
    "answers": [
      {
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 1,
        "id": 127
      }
    ]
  },
  {
    "id": 128,
    "text": "  – Послушай, Десс, – спокойно сказал он. – Тебе кажется, что ты старше меня и лучше знаешь это место, но это не совсем так. Ты исследовала храм когда-то давно, но сейчас здесь всё изменилось, включая тебя саму. Да, ты рыцарь-джедай, но совсем недавно даже не могла вспомнить этого. А я осмотрел здесь уже почти каждый угол. К тому же именно я освободил тебя и я же вернул тебе меч. Поэтому давай обойдёмся без командиров.<s>r\n   Девушка не мигая смотрела на юношу, во взгляде её читалось смятение и досада. Сам Орнас, напротив, ощущал уверенность и спокойствие. Он протянул руку в приглашающем жесте и замер. Десвиар наконец оторвала взгляд и поморщилась.<s>r\n– Хорошо, – сдержанно произнесла она и пожала юноше руку. – Значит партнёры.",
    "answers": [
      {
        "id": 132,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = (dess.trust or 0) - 2\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) - 1\nend"
      }
    ]
  },
  {
    "id": 129,
    "text": "   Орнасу казалось, что он смог узнать о Десвиар достаточно, чтобы различать мотивы её поступков и даже попытаться использовать это.<s>r\n– Послушай, Десс, – мягко сказал он, – я знаю, что ты чувствуешь. Я понимаю, почему ты хочешь поступить именно так. Тебе кажется, что ты сможешь исправить что-то и закончить начатое, но за столько лет здесь всё изменилось. Нет больше ни того задания, ни тех ошибок, ни тех врагов. И даже ты уже другая. Ты сама это чувствуешь. И чувствуешь, что тебе нужен я. А мне нужно пройти моё испытание. И я буду рад, если ты мне поможешь. Но не как старшая. Как равная.<s>r\n   Девушка не мигая смотрела на джедая, во взгляде её читалось смятение и грусть. Сам Орнас, напротив, ощущал уверенность и спокойствие. Он протянул руку в приглашающем жесте и замер. Десвиар наконец оторвала взгляд и улыбнулась.<s>r\n– Хорошо, – сдержанно произнесла она и пожала юноше руку. – Значит партнёры.",
    "answers": [
      {
        "id": 132,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = (dess.trust or 0) <plus> 5\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) - 3\nend"
      }
    ]
  },
  {
    "id": 130,
    "text": "– Да как ты смеешь? – грозно проговорил Орнас. – Это возмутительно! Да ещё после того, как я освободил тебя и добыл меч, пока ты здесь прохлаждалась! Я-то справлюсь и без помощника, а ты? Может ты и была джедаем когда-то, но сейчас ты здесь только благодаря мне. И я сам буду решать, что мне делать. Присоединяйся ко мне, пока я тебя зову.<s>r\n   Девушка не мигая смотрела на юношу, во взгляде её читалось удивление и злость. Сам Орнас буквально пылал от ярости. Он надменно протянул руку в приглашающем жесте и замер. Десвиар наконец оторвала взгляд и скривилась в неискренней улыбке.<s>r\n– Как скажешь, благодетель недоделанный, – сердито произнесла она и с силой хлопнула юношу по протянутой руке.",
    "answers": [
      {
        "id": 132,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = (dess.trust or 0) - 5\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 131,
    "text": "– Нет, послушай, – жалобно  взмолился юноша. – Я понимаю, что ты чувствуешь себя взрослее и опытнее. Но для меня это очень важно. Я так долго шёл к этому... А если я не пройду испытание теперь, то не стану рыцарем-джедаем, меня все поднимут на смех. Я же столько всего сделал для тебя! Прошу, дай мне шанс показать себя.<s>r\n   Девушка не мигая смотрела на юношу, во взгляде её читалось смятение и сожаление. Сам Орнас ощущал тревогу и стыд. Он сложил руки перед собой и замер. Десвиар наконец оторвала взгляд и поморщилась.<s>r\n– Хорошо, – сдержанно произнесла она и похлопала юношу по плечу. – Значит будем на равных. Но я всё равно буду присматривать за тобой.",
    "answers": [
      {
        "id": 132,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = (dess.trust or 0) <plus> 3\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 132,
    "text": "   Десвиар отошла от юноши и лицо её стало строгим и собранным.<s>r\n– В любом случае, – начала говорить она безэмоциональным голосом, – то, что ты ищешь, находится на верхних уровнях храма. Чем ближе мы будем к цели, тем сильнее будем ощущать влияние Тёмной стороны. И ему не смогли противостоять даже опытные джедаи, так что будь наготове.<s>r\n– Ясно, – кивнул Орнас. – Тогда пойдём, сразу за этой дверью лестницы, ведущие наверх.",
    "answers": [
      {
        "lua_if": "function lua_if()\n--Объединение после всех вариантов с Десс, обсуждение планов, выдача бонуса, затем совместный поход в комнату с лестницами. Если нет встречи с Астором, то она поднимается наверх, Орнас может пойти сразу или отмазаться и ещё погулять внизу.\nreturn true\nend",
        "id": 132,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocation1 = location1 or {}\nlocation1.lastChanceKey = (location1.lastChanceKey or 5) - 1\n\ndess = dess or {}\ndess.trust = dess.trust or 0\n  if dess.trust > 14 then -- условие получения бонуса\n\n  keys = keys or {}\nkey1form = key1form or 1 -- для центра\nkey2form = key2form or 2 -- для среднего\nkey3form = key3form or 3 -- для внешнего\nkeys.stillRequired = keys.stillRequired or {key1form, key2form, key3form}\nif not keys.notRequired then\nkeys.notRequired = {}\nlocal a = {1,2,3,4,5,6}\n    for i = 1, #a do\n        if a[i] ~= key1form and a[i] ~= key2form and a[i] ~= key3form then\n            table.insert(keys.notRequired, i)\n        end\n    end\nend\n--keyform_in_location1 - keys.col1\n--keyform_in_location2 - keys.col2\n--keyform_in_location3 - keys.safe\n--keyform_in_location4 - keys.TL\n--keyform_in_location5 - keys.dess\n--keyform_in_location6 - keys.cage\nif not keys.dess then\nif keys.stillRequired[1] then -- если ещё нужно найти\n    local a = math.random(#keys.stillRequired)\n    keyform_in_location5 = keys.stillRequired[a] -- случайный из нужных\n    table.remove(keys.stillRequired,a) -- убрать из списка нужных\n  else -- все нужные есть\n    local b = math.random(#keys.notRequired)\n    keyform_in_location5 = keys.notRequired[b] -- случайный из ненужных\n    table.remove(keys.notRequired,b) -- убрать из списка ненужных\n  end\nkeys.dessFail = 0\nkeys.dess = 1\nend\n\n\n    TL3 = TL3 or {}\n    TL3.conditions = TL3.conditions or {}\n    TL3.conditions.seeAnyKey = 1\n    text = \"<s>\n– Подожди, я вспомнила ещё кое-что, – пробормотала Десс и подошла к опустевшей камере.<s>\n   Когда джедай приблизился, девушка вытянула вперед руку и с помощью Силы медленно подняла всю конструкцию в воздух. На полу под капсулой Орнас увидел продолговатый металический предмет с еле различимым рисунком \" .. ({\"звезды с десятью лучами\", \"полумесяца\", \"треугольника\", \"квадрата\", \"пятиугольника\", \"шестиугольника\"})[keyform_in_location5] .. \" на рукояти.<s>\n– Забирай скорее, – напряжённо выдохнула девушка, – чего ждёшь?<s>\n   Юноша послушно наклонился и с опаской быстро вытянул ключ, а уже через секунду весь огромный аппарат с неприятным скрежетом опустился на место.<s>\n– Можешь оставить себе, – бодро объявила Десвиар, – я так и не разобралась тогда, что с ним делать.<s>\n   Орнас закрепил неожиданный подарок на поясе и вместе со спутницей направился вглубь храма.\"\n\n    key_on_position_5_avail = 0 -- ключ больше не доступен на позиции 5\n    vars[\"have_key_form\" .. keyform_in_location5] = 1 -- ключ формы, которая была на позиции 5, у Орнаса\n    keyposition5 = 1 -- ключ с позиции 5 у Орнаса\n\n\n  else text = \"<s>\n– Да, конечно, – ответила Десс и они вместе направились вглубь храма.\"\n  keys.dessFail = 1 -- не отдала ключ нужной формы\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 133,
        "text": "Дальше",
        "lua_do": "function lua_do()\nfemale = 1\nend"
      }
    ]
  },
  {
    "id": 133,
    "text": "   Первым в зал вошёл Орнас, Десвиар проследовала за ним, немного задержавшись в дверях.",
    "answers": [
      {
        "id": 133,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\n--Описание перехода, возможная встреча с Астором, с TL-3, на выбор пойти сразу наверх или продолжить исследвания внизу, тогда наверх идёт только Десс (сделать ей статус \"наверху\", при этом статусе приход TL-3 вызовет его уничтожение, приход Астора — запустит сцену встречи)\n-- описание: либо никого, либо Астор, либо дроид, либо все сразу. Если там оба, то сначала запустить обычную сцену с Астором, потом отдельно с дроидом\n-- Если Астор наверху, то он спускается и идёт навстречу, если нет, то просто идёт. Начинает спрашивать \"кого притащил?\" и узнаёт Десс, говорит \"Не может быть...\", конец страницы.\n-- Если дроид наверху, то они видят его не поднимаясь наверх, Десс ускоряется и истерит, Орнас пытается догнать и узнать в чем дело, конец страницы\nlocal text = \" Она приблизилась к каменной лестнице, внимательно осматриваясь по сторонам, затем осторожно положила руку на перила и обернулась на юношу.<s>\n– Что-то изменилось с тех пор, когда ты была тут в последний раз? – поинтересовался он, поймав её взгляд.<s>\n– Сложно сказать, – неопределённо ответила девушка. – Ладно, я наверх. Присоединяйся, когда тебе надоест тут возиться.<s>\n   Она подмигнула Орнасу и медленно проследовала наверх.\"\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\ndess = dess or {}\ndess.meetMaster = 0\nmaster = master or {}\nmaster.position = master.position or 0\n\ndess.meetTL = TL3.position == \"at the stairs\" and 1 or 0 -- 1 = повесить отложенную сцену с дроидом\n  if master.position == 156 then -- Астор на месте, наверху\n    dess.meetMaster = 1 -- для запуска сцены \"встреча сверху\" \n    text = \" Не успела она сделать и нескольких шагов, когда сверху раздался голос учителя Орнаса.<s>\n– Что случилось? – спросил он тревожно, спускаясь вниз по лестнице. – Кто это с тобой?<s>\n   Увидев, наконец, Десс, он остановился на нижней ступени и замер с приоткрытым ртом. Девушка тоже словно оцепенела, и юноша в непонимании переводил взгляд с одного на другого.<s>\n– Не может быть, Десвиар?.. – просипел учитель и схватился руками за лицо.\"\n  elseif master.position == 155 then -- Астор на месте, внизу\n    dess.meetMaster = 2 -- для запуска сцены \"снизу\" \n    text = \" Не успела она сделать и нескольких шагов, когда раздался голос учителя Орнаса.<s>\n– Что случилось? – спросил он тревожно, поднимаясь со ступеней и выходя навстречу вошедшим. – Кто это с тобой?<s>\n   Увидев, наконец, Десс, он остановился и замер с приоткрытым ртом. Девушка тоже словно оцепенела, и юноша в непонимании переводил взгляд с одного на другого.<s>\n– Не может быть, Десвиар?.. – просипел учитель и замер.\"\n  elseif TL3.position == \"at the stairs\" then -- дроид наверху\n    dess.meetTL = 2 -- для запуска самостоятельной сцены c TL3\n    text = \" Не успела она сделать и нескольких шагов, когда сверху раздались громкие гудки и писк – это подал голос TL-3, который притаился где-то за массивными перилами площадки. Когда Десвиар заметила наконец источник звуков, её лицо исказилось в гримассе ненависти. Девушка моментально подбежала к лестнице и одним прыжком забралась наверх, в её руке уже пылал световой меч.<s>\n– Стой! – крикнул изо всех сил Орнас. – Остановись, Десс!\"\n  end\ndess.isUpstairs = 1\nreturn text\nend",
        "merge": true
      },
      {
        "id": 135,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--продолжение сцены встречи с Астором, если наверху (эмоциональный Астор ПОЧТИ ревёт) (запустить эту сцену, даже если дроид тоже есть)\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\nmaster = master or {}\nmaster.position = master.position or 0\n\nreturn dess.meetMaster ~= 0\nend"
      },
      {
        "id": 136,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- продолжение сцены встречи с дроидом (только если нет Астора)\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\ndess.meetTL = dess.meetTL or 0\nreturn dess.meetMaster == 0 and dess.meetTL > 1\nend"
      },
      {
        "id": 155,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- продолжить внизу\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0\ndess.meetTL = dess.meetTL or 0\nreturn dess.meetMaster == 0 and dess.meetTL == 0\nend"
      }
    ]
  },
  {
    "id": 134,
    "text": "   Орнас пристально вгляделся в сумрак помещения. В нём ощущалась что-то странное, неестественное. Он не мог понять, что именно, но точно знал, что что-то не так.",
    "answers": [
      {
        "id": 134,
        "text": "Назад",
        "backstepCount": 1,
        "isBack": true
      }
    ]
  },
  {
    "id": 135,
    "text": "   Юноша и Десс подошли ближе к старому джедаю, который теперь с нескрываемым волнением разглядывал девушку, не обращая никакого внимания на своего неловко переступающего с ноги на ногу ученика.<s>r\n– Здравствуй, Астор, – сказала наконец Десвиар, подступив ближе к наставнику Орнаса. – Ты всё-таки решил стать взрослым...<s>r\n   Заметив удивление Орнаса, девушка неопределённо махнула рукой, и он смущённо отошёл в сторону, не в силах разобраться в происходящем.<s>r\n   \"... долго искал вас...\" – слышался неразборчивый и такой необычно взволнованный голос учителя, – \"... больше тридцати лет...\", \"... почти весь список...\".<s>r\n   Бросив очередной взгляд в сторону шепчущихся, Орнас заметил, что сидящая на ступенях лестницы Десс прижимала к своему плечу голову джедая, гладя его по седым волосам, и тихо, но настойчиво что-то объясняла. Орнасу было неловко смотреть на них, и он отошёл в самый угол комнаты, не веря, что это – его холоднокровный и безэмоциональный наставник.<s>r\n   Спустя какое-то время, когда старый мастер наконец вернулся в своё обычное невозмутимое состояние, он наконец подозвал юношу.<s>r\n– Десвиар – мой старый друг, – сказал учитель сдержанно, видимо считая такое объяснение исчерпывающим. – ",
    "answers": [
      {
        "id": 135,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.meetMaster = dess.meetMaster or 0 \ndess.meetTL = dess.meetTL or 0\n\nlocal text = \"\"\nif dess.meetMaster == 1 or dess.meetMaster == 3 then -- для возврата после \"встречи сверху\"\n text = \"Она поможет нам.<s>\n   Орнас кивнул и не стал говорить, что для этого он и привёл девушку сюда.\"\n  if dess.meetTL == 1 then -- переход к дроиду\n    text = text .. \"<s>\n   Тем временем сверху раздались громкие гудки и писк – это подал голос TL-3, который незаметно притаился где-то за массивными перилами площадки. Когда Десвиар заметила источник звуков, её лицо исказилось в гримассе ненависти. Один мощный прыжок – и девушка оказалась наверху, а в её руке уже пылал световой меч.<s>\n– Стой! – крикнул изо всех сил Орнас. – Остановись, Десс!\"\n    else text = text ..\"<s>\n   Тем временем, Десс уже забралась наверх и магистр Астор проследовал за ней.\"\n  end\nelse text = \"Она поможет тебе.<s>\n   Орнас кивнул и не стал говорить, что для этого он и привёл девушку сюда.\" \n  if dess.meetTL == 1 then -- переход к дроиду\n    text = text ..  \"<s>\n   Тем временем сверху раздались громкие гудки и писк – это подал голос TL-3, который притаился где-то за массивными перилами площадки. Когда Десвиар заметила источник звуков, её лицо исказилось в гримассе ненависти. Один мощный прыжок – и девушка оказалась наверху, а в её руке уже пылал световой меч.<s>\n– Стой! – крикнул изо всех сил Орнас. – Остановись, Десс!\"\n    else text = text ..\"<s>\n   Тем временем, Десс уже забралась наверх и с утомлённым видом оглядывалась по сторонам.\"\n  end\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 136,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- продолжение сцены встречи с дроидом (как будто Астора нет)\ndess = dess or {}\ndess.meetTL = dess.meetTL or 0\nreturn dess.meetTL == 1\nend"
      },
      {
        "id": 155,
        "text": "Дальше",
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.meetTL = dess.meetTL or 0\nreturn dess.meetTL ~= 1\nend"
      }
    ]
  },
  {
    "id": 136,
    "text": "– Ты ничего не понимаешь, – крикнула ему в ответ Десвиар. – Из-за этого железного пня я и застряла здесь!<s>r\n– Я знаю, – сказал уже спокойным голосом джедай, подойдя под самый край площадки, на которой разворачивалось всё действие. – Я нашёл его здесь и починил. Он может быть полезным и будет нам помогать.<s>r\n– Мне не нужна его помощь! – не утихала Десс. – И тебе не следует доверять этому мерзкому лживому...<s>r\n– Да, я понял, – постарался перебить поток её ругательств Орнас. – Он всего лишь дроид и выполняет заложенную в него программу. Теперь он слушается меня. Ты можешь доверять ему так же, как доверяешь мне.<s>r\n",
    "answers": [
      {
        "id": 136,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.trust = dess.trust or a_tia_trust or 0\nmaster = master or {}\nmaster.position = master.position or 0\nTL3 = TL3 or {}\n\nlocal text = \"\"\n  if dess.trust > 12 then -- высокое доверие, щадит дроида\n    text = \"– Ладно, – буркнула девушка и погасила клинок. – Если ты собираешься заканчивать свои дела внизу, то я присмотрю за тем, чтобы он не сбежал. Но я не гарантирую, что он будет цел, когда ты вернёшься.\"\n  elseif dess.trust > 3 or master.position == 155 or master.position == 156 then -- низкое доверие, дроид \"случайно ломается\"\n    text = \"– Ладно, – прорычала девушка, но клинок не убрала. – Если ты собираешься заканчивать свои дела внизу, то я присмотрю за тем, чтобы он не сбежал. Но я не гарантирую, что он будет цел, когда ты вернёшься.\"\n    TL3.delayedDestroy = 1\n  else text = \"– Да, в этом и дело, – усмехнулась девушка и взмахнула мечом.<s>\n   Послышался скрежет металла и взрыв, затем сверху обрушился град мелких осколков и Орнасу пришлось отскочить в сторону. Дроид был не просто разбит, а буквально уничтожен. Если бы юноша не видел его своими глазами, то не поверил бы, что можно совершить такое всего за несколько секунд.<s>\n– Дай мне несколько минут успокоиться, – тихо проговорила Десс. – Можешь пока закончить свои дела внизу.\"\n    TL3.position = \"destroyed\"\n  end\n    if dess.meetMaster == 1 then --вернуть мастера наверх\n      text = text .. \"<s>\n   Поднявшийся наставник Орнаса неодобрительно покачал головой и что-то очень тихо сказал девушке.\"\n    end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 155,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 137,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 137,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif location1.trigger == \"forceTransition\" then\n    text = \"в одно мгновение преодолел расстояние, отделявшее его от правой двери. Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог.<s>\n   Упрекнув себя за опрометчивость, юноша вернулся к ближайшей стратегической позиции – уступу в стене, через которую он проник внутрь.\"\n  elseif location1.kuski == 2 then\n    text = \"неторопливо преодолел расстояние, отделяющее его от правой двери. Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог. В смутной тревоге он оглянулся, пытаясь разглядеть в темноте то, что осталось от его недавнего противника, и подошёл ближе к уступу в стене, через которую он проник внутрь.\"\n  else text = (location1.bitenLegs == 0 and \"бросился к правой двери\" or \"изо всех сил рванулся к правой двери, с трудом преодолевая сопротивление онемевшей ноги\") .. \". Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог.<s>\n   Упрекнув себя за опрометчивость, Орнас вернулся к ближайшей стратегической позиции – уступу в стене, через которую он проник внутрь.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 138,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 138,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif location1.trigger == \"forceTransition\" then\n    text = \"в одно мгновение преодолел расстояние, отделявшее его от левой двери. Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог.<s>\n   Упрекнув себя за опрометчивость, юноша вернулся к ближайшей стратегической позиции – клетке в углу.\"\n  elseif location1.kuski == 2 then\n    text = \"неторопливо преодолел расстояние, отделяющее его от левой двери. Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог. В смутной тревоге он оглянулся, пытаясь разглядеть в темноте то, что осталось от его недавнего противника, и подошёл ближе к металлической клетке.\"\n  else text = (location1.bitenLegs == 0 and \"бросился к левой двери\" or \"изо всех сил рванулся к левой двери, с трудом преодолевая сопротивление онемевшей ноги\") .. \". Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог.<s>\n   Упрекнув себя за опрометчивость, Орнас вернулся к ближайшей стратегической позиции – клетке в углу.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 139,
    "text": "   Переместиться ...",
    "answers": [
      {
        "backstepCount": 1,
        "lua_do": "function lua_do()\nlocation1.trigger = location1.trigger == \"forceTransition\" and \"forceTransition\" or \"transition\"\nend",
        "super_calculate": false,
        "isBack": true,
        "calculate": true,
        "text": "Set up the trigger",
        "id": 139
      },
      {
        "id": 143,
        "text": "... к двери по центру",
        "lua_text": "function lua_text()\nreturn location1.ornasPosition == 0 and \"... вниз, к двери по центру\" or \"... к двери по центру\"\nend",
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 2 \ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 137,
        "text": "... к двери справа",
        "lua_text": "function lua_text()\nreturn location1.ornasPosition == 0 and \"... вниз, к двери справа\" or \"... к двери справа\"\nend",
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 1\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 138,
        "text": "... к двери слева",
        "lua_text": "function lua_text()\nreturn location1.ornasPosition == 0 and \"... вниз, к двери слева\" or \"... к двери слева\"\nend",
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 2\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn location1.ornasPosition ~= 2 \nend",
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 2\ncomplex = complex or {}\ncomplex.tracks = 0\nend",
        "text": "... к клетке в левом углу",
        "lua_text": "function lua_text()\nreturn location1.ornasPosition == 0 and \"... вниз, к клетке в левом углу\" or \"... к клетке в левом углу\"\nend",
        "id": 144
      },
      {
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 1\ncomplex = complex or {}\ncomplex.tracks = 0\nend",
        "text": "... к уступу в стене",
        "lua_if": "function lua_if()\nreturn location1.ornasPosition == 2 \nend",
        "id": 145
      },
      {
        "id": 147,
        "text": "... вниз, к уступу в стене",
        "lua_if": "function lua_if()\nreturn location1.ornasPosition == 0 and location1.trigger ~= \"forceTransition\"\nend",
        "lua_do": "function lua_do()\nlocation1.ornasPosition = 1\nlocation1.trigger = \"no\"\ncomplex = complex or {}\ncomplex.tracks = 0\nend"
      },
      {
        "id": 139,
        "isBack": true,
        "text": "[Назад]",
        "lua_do": "function lua_do()\nlocation1.trigger = \"no\"\nend",
        "backstepCount": 1
      }
    ]
  },
  {
    "id": 140,
    "text": "   Не успел учитель сделать и шага, как увидел наверху лестницы Десс. Он остановился и замер, протирая глаза и вглядываясь в её статную фигуру. Девушка дружелюбно помахала рукой и начала торопливо спускаться навстречу джедаям. Оказавшись лицом к лицу они пристально разглядывали друг друга и Десвиар тоже словно оцепенела. Она поднесла ладони к открывшемуся от удивления рту и со звуком вдохнула воздух.<s>r\n– Не может быть, Дессвиар... – просипел учитель оторопев.",
    "answers": [
      {
        "id": 135,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.meetMaster = 1\nend"
      }
    ]
  },
  {
    "id": 141,
    "text": "   Орнас находился на небольшом уступе в нескольких метрах над полом в правой части комнаты",
    "answers": [
      {
        "comment": false,
        "lua_do": "function lua_do()\n-- ornasPosition = 0 -- наверху\nlocation1 = location1 or {ornasPosition = 0, cage = 0, revealed = 1, time = 1, kuski = 1, activeSaber = 0}\nlocation1.bitenArms = location1.bitenArms or ornasStat.location1.bitenArms\nlocation1.bitenLegs = location1.bitenLegs or ornasStat.location1.bitenLegs\nlocation1.forcePoints = location1.forcePoints or (style == 2 and 5 or 4)\nlocation1.ornasPosition = 0\nend",
        "id": 146,
        "calculate": true,
        "text": "Расположение Орнаса и начальные данные",
        "merge": false
      },
      {
        "lua_text": "function lua_text()\nlocal text = (location1.activeSaber == 1 and \", держа в руке зажжённый световой меч\" or \"\") .. (location1.kuski == 2 and \". Обе половины разрубленной змеи всё ещё продолжали подозрительно извиваться внизу. \" or \". \")\n  if location1.revealed  == 1 then\n  text = text .. \"Тонкая полоска света, проходящего через лаз в стене, пересекала всю комнату, разделяя её на две части. \" .. (location1.cage == 0 and \"В дальнем левом углу лежала заваленная на бок металлическая клетка. \" or \"В дальнем левом углу ровно стояла металлическая клетка c распахнутой крышкой. \") .. \"Двери у каждой из трёх стен выглядели запертыми. \" \n  end\ntext = text .. ( (location1.bitenLegs == 1 and location1.bitenArms == 0 and \"Укушенная существом нога была парализована. \") or (location1.bitenLegs == 2 and location1.bitenArms == 0 and \"Обе ноги джедая были парализованы ядом. \") or (location1.bitenLegs == 0 and location1.bitenArms == 1 and \"Рука, укушенная существом, была парализована. \") or (location1.bitenLegs == 1 and location1.bitenArms == 1 and \"Рука и нога юноши были парализованы ядом после укуса змеи. \") or (location1.bitenLegs == 2 and location1.bitenArms == 1 and \"Рука и обе ноги юноши были парализованы змеиным ядом. \") or \"\" ) .. (location1.kuski == 1 and \"<s>\n   Змея шипела где-то внизу, но не могла добраться до юноши.\" or \"\" )\nreturn text\nend",
        "id": 66,
        "text": "Генерация текста",
        "comment": true,
        "merge": true
      },
      {
        "id": 89,
        "text": "Использовать Силу",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn b ~=1\nend"
      },
      {
        "id": 116,
        "text": "Активировать световой меч",
        "lua_if": "function lua_if()\nreturn location1.activeSaber == 0\nend"
      },
      {
        "id": 139,
        "text": "Переместиться",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenLegs < 2 and b ~=1\nend",
        "lua_do": "function lua_do()\nlocation1.time = 1\nend"
      },
      {
        "id": 73,
        "text": "Медитировать, чтобы восстановить концентрацию и связь с Силой",
        "lua_if": "function lua_if()\nreturn location1.forcePoints < 3\nend",
        "lua_do": "function lua_do()\nlocation1.forcePoints = 4\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn style == 3\nend",
        "id": 151,
        "text": "Наблюдать за поведением змеи",
        "need": -151,
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ]
      }
    ]
  },
  {
    "id": 142,
    "text": "   Орнас попробовал вскарабкаться на уступ в стене, однако онемевшая рука сильно мешала и эта попытка оказалась неудачной.",
    "answers": [
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 143,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 143,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n  if location1.trigger == \"forceTransition\" then\n    text = \"в одно мгновение преодолел расстояние, отделявшее его от центральной двери. Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог.<s>\n   Упрекнув себя за опрометчивость, юноша вернулся к ближайшей стратегической позиции – клетке в углу.\"\n  elseif location1.kuski == 2 then\n    text = \"неторопливо преодолел расстояние, отделяющее его от центральной двери. Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог. В смутной тревоге он оглянулся, пытаясь разглядеть в темноте то, что осталось от его недавнего противника, и подошёл ближе к металлической клетке.\"\n  else text = (location1.bitenLegs == 0 and \"бросился к центральной двери\" or \"изо всех сил рванулся к центральной двери, с трудом преодолевая сопротивление онемевшей ноги\") .. \". Оказавшись у цели, джедай удостоверился, что дверь заперта, но быстрых способов открыть её он придумать не смог.<s>\n   Упрекнув себя за опрометчивость, Орнас вернулся к ближайшей стратегической позиции – клетке в углу.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 144,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 144,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif location1.trigger == \"forceTransition\" then\n    text = \"в одно мгновение преодолел расстояние, отделявшее его от клетки в углу. Добравшись до цели, джедай развернулся лицом к противнику, надеясь не пропустить момент атаки.\"\n  elseif location1.kuski == 2 then\n    text = \"неторопливо преодолел расстояние, отделяющее его от клетки в углу. Оказавшись у цели, джедай в смутной тревоге оглянулся, пытаясь разглядеть в темноте то, что осталось от его недавнего противника.\"\n  else text = (location1.bitenLegs == 0 and \"бросился к клетке в углу.\" or \"изо всех сил рванулся к клетке в углу, с трудом преодолевая сопротивление онемевшей ноги и потратив на это больше времени, чем рассчитывал.\") .. \" Добравшись до цели, он развернулся лицом к противнику, надеясь не пропустить момент атаки.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 145,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 144,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n local text = \"\"\nif location1.trigger == \"forceTransition\" then\n   text = \"в одно мгновение преодолел расстояние, отделявшее его от уступа в стене. Добравшись до цели, он развернулся лицом к противнику, надеясь не пропустить момент атаки.\"\n  elseif location1.kuski == 2 then\n    text = \"неторопливо преодолел расстояние, отделяющее его от уступа в стене. Оказавшись у цели, джедай в смутной тревоге оглянулся, пытаясь разглядеть в темноте то, что осталось от его недавнего противника.\"\n  else text = (location1.bitenLegs == 0 and \"бросился к уступу в стене.\" or \"изо всех сил рванулся к уступу в стене, с трудом преодолевая сопротивление онемевшей ноги.\") .. \" Добравшись до него, он развернулся лицом к противнику, надеясь не пропустить момента атаки.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 146,
    "text": "   Орнас находился рядом с клеткой в углу помещения",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = (location1.activeSaber == 1 and \", держа в руке зажжённый световой меч\" or \"\") .. (location1.kuski == 2 and \". Обе половины разрубленной змеи всё ещё продолжали подозрительно извиваться рядом\" or \"\")\n  if location1.revealed  == 1 then\n  text = text .. \". Тонкая полоска света, проходящего через лаз в стене, пересекала всю комнату, разделяя её на две части. \" .. (location1.cage == 0 and \"Сама металлическая клетка лежала заваленная на бок в полуметре от юноши. \" or \"Сама металлическая клетка ровно стояла в полуметре от юноши c распахнутой крышкой. \") .. \"В стене напротив на высоте нескольких метров располагался выступ. Двери у каждой из трёх стен выглядели запертыми. \" \n  end\ntext = text .. ( (location1.bitenLegs == 1 and location1.bitenArms == 0 and \"Укушенная существом нога была парализована.\") or (location1.bitenLegs == 2 and location1.bitenArms == 0 and \"Обе ноги джедая были парализованы ядом.\") or (location1.bitenLegs == 0 and location1.bitenArms == 1 and \"Рука, укушенная существом, была парализована.\") or (location1.bitenLegs == 1 and location1.bitenArms == 1 and \"Рука и нога юноши были парализованы ядом после укуса змеи.\") or (location1.bitenLegs == 2 and location1.bitenArms == 1 and \"Рука и обе ноги юноши были парализованы змеиным ядом.\") or \"\" ) .. (location1.kuski == 1 and (location1.time == 0 and \"<s>\n   Орнас чувствовал, что змея где-то совсем близко и готова атаковать.\" or \"<s>\n   Орнас чувствовал, что змея ещё недостаточно близко, чтобы атаковать.\") or \"\" )\nreturn text\nend",
        "id": 66,
        "text": "Генерация текста",
        "comment": true,
        "merge": true
      },
      {
        "id": 89,
        "text": "Использовать Силу",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn b~= 1\nend"
      },
      {
        "id": 69,
        "text": "Активировать световой меч",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.activeSaber == 0  and b ~=1\nend",
        "lua_do": "function lua_do()\nlocation1.activeSaber = 1\nend"
      },
      {
        "id": 139,
        "text": "Переместиться",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenLegs < 2 and b ~=1\nend"
      },
      {
        "lua_do": "function lua_do()\nlocation1.cage = 1\nend",
        "text": "Перевернуть клетку",
        "lua_if": "function lua_if()\n-- успех\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenArms == 0 and b ~= 1 and location1.cage == 0\nend",
        "id": 149
      },
      {
        "id": 148,
        "text": "Перевернуть клетку",
        "lua_if": "function lua_if()\n-- неудача\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.revealed == 1 and location1.bitenArms == 1 and b~= 1 and location1.cage == 0\nend"
      },
      {
        "id": 73,
        "text": "Медитировать, чтобы восстановить концентрацию и связь с Силой",
        "lua_if": "function lua_if()\nreturn location1.forcePoints < 3 and location1.kuski == 2 and location1.time ~=0\nend",
        "lua_do": "function lua_do()\nlocation1.forcePoints = 4\nlocation1.time = 0\nend"
      },
      {
        "id": 146,
        "text": "Ждать",
        "lua_if": "function lua_if()\nlocal b = location1.time == 0 and location1.kuski == 2 and 1\nreturn location1.time >= 1 and b ~=1\nend",
        "lua_do": "function lua_do()\nlocation1.time = location1.time - 1\nend"
      },
      {
        "id": 101,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.time == 0 and location1.kuski == 2\nend"
      }
    ]
  },
  {
    "id": 147,
    "text": "   Орнас проворно спрыгнул вниз. ",
    "answers": [
      {
        "super_calculate": false,
        "id": 147,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nlocation1.time = 1\nend"
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      },
      {
        "id": 147,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n  if location1.kuski == 2 then\n    text = \"Оказавшись там, джедай в смутной тревоге попытался разглядеть в темноте то, что осталось от его недавнего противника.\"\n  else text = \"Оказавшись там, он сразу развернулся лицом к противнику, надеясь не пропустить момент атаки.\"\n  end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 148,
    "text": "   Орнас попытался перевернуть клетку и поставить её ровно, но она оказалась слишком тяжёлой, чтобы это можно было сделать одной рукой. Вторая рука, укушенная и парализованная, помочь сейчас не могла. Потратив некоторое время, юноша отказался от этой идеи.",
    "answers": [
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 149,
    "text": "   Орнас попытался перевернуть клетку. Она оказалась необычайно тяжёлой, но сил юноши хватило, чтобы поставить её ровно. Теперь ничто не помешает быстро захлопнуть крышку и закрыть клетку, если в этом возникнет необходимость.",
    "answers": [
      {
        "id": 79,
        "text": "Новый ответ. введите текст",
        "run": [
          79
        ]
      }
    ]
  },
  {
    "id": 150,
    "text": "   Орнас ухватился за край уступа и быстро подтянулся на руках наверх. Забравшись туда, он выпрямился и посмотрел вниз. ",
    "answers": [
      {
        "id": 150,
        "text": "Дальше",
        "lua_text": "function lua_text()\nlocal text = (location1.kuski == 1 and \"Змея продолжала в неистовстве извиваться там, из чего юноша сделал вывод, что забраться так высоко ей не по силам.\") or (location1.kuski == 2 and \"Разрубленные половинки змеи продолжали извиваться в конвульсиях.\") or (location1.kuski == 4 and \"Все маленькие копии змеи продолжали в неистовстве извиваться там, и юноша порадовался, что забраться так высоко им не по силам.\") or \"Всё пространство там было заполнено миниатюрными копиями разрубленной змеи, и юноша порадовался, что забраться так высоко им не по силам.\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 141,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocation1.time = location1.kuski == 4 and 0 or 1\nend"
      }
    ]
  },
  {
    "id": 151,
    "text": "   Орнас с безопасного расстояния внимательно наблюдал за тем, как змея ведёт себя внизу. Сразу было понятно, что она хорошо чувствует расположение джедая, увернуться от её атаки будет непросто. Опытный глаз джедая заметил одну особенность в поведении существа: оно всё время находилось только в одной половине комнаты, не решаясь пересечь луч света, разделяющий помещение пополам. Возможно, это получится использовать в своих интересах.",
    "answers": [
      {
        "id": 141,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 152,
    "text": "   Орнас решил проверить свою догадку о причинах странного поведения чудовища и направил его прямо под солнечный луч, пробивающийся снаружи через щель.\n   Результат не заставил себя долго ждать: существо неистово зашипело и начало извиваться в конвульсиях.",
    "answers": [
      {
        "lua_do": "function lua_do()\nornasStat.darkside = (ornasStat.darkside or 0) - 2\nend",
        "text": "Отпустить змею",
        "id": 87
      },
      {
        "id": 154,
        "text": "Удерживать змею в этом положении",
        "lua_do": "function lua_do()\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 5\nend"
      }
    ]
  },
  {
    "id": 153,
    "text": "   Орнас использовал Силу, чтобы подействовать на сознание существа. Он попытался установить контакт и настроить змею на мирное поведение, чтобы никто не причинил друг другу вреда. В какой-то степени это подействовало: змея перестала шипеть и спокойно отползла от уступа.<s>r\n   Орнас спрыгнул вниз и осторожно приблизился к созданию. Оно лишь спокойно смотрело на юношу оранжевыми глазами и не подавало признаков агрессии.<s>r\n– Ты, наверное, очень голоден, – произнёс Орнас. – Жаль, что мне нечем тебя угостить. Но я могу забрать тебя с собой, когда закончу свои дела здесь. Если захочешь, конечно.<s>r\n   Змея издала непродолжительный хриплый звук и свернулась кольцами прямо на полу возле клетки в углу.<s>r\n   Теперь, когда она больше не представляла угрозы, юноша смог перевести дыхание.",
    "answers": [
      {
        "id": 81,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nlocation1.lose = 0\nlocation1.kuski = 11\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 154,
    "text": "   Юноша решил воспользоваться предоставившимся шансом, чтобы уничтожить монстра. Он продолжал удерживать существо под светом, наблюдая за его страданиями. На теле  существа начали появляться волдыри, затем оно начало иссыхать и уменьшаться в размере. Наконец, уже безжизненное и обугленное тело просто рассыпалось, оставив лишь облако праха, медленно оседающего в свете луча.\n   Теперь, когда с противником было покончено, Орнас смог перевести дыхание.",
    "answers": [
      {
        "id": 81,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nlocation1.lose = 0\nlocation1.kuski = 0\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 155,
    "text": "   Юноша ",
    "answers": [
      {
        "id": 155,
        "text": "Текст страницы",
        "lua_text": "function lua_text()\npics = pics or {}\npics.a4 = 1\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nTL3.readyForComment = TL3.readyForComment or 0\nlocal text = ((g.previous_id == 194 or g.previous_id == 260) and \"оказался\" or \"находился\") .. \" в просторной комнате, занимавшей, видимо, всю дальнюю от входа часть храма.<s>ufeff<s>\n   На внутренней стене комнаты располагались три двери, через одну из которых Орнас и прошёл в этот зал. У этой же стены поднимались к небольшой площадке две полукруглые каменные лестницы. Вся композиция образовывала массивную арку над центральной дверью\" .. (TL3.position == \"destroyed\" and \", всё пространство рядом с которой было усеяно мелкими металлическими осколками и разбитыми микросхемами.\" or \".\") .. \"<s>\n   В углах помещения стояли два старых энергетических блока, покрытых пылью и каменной крошкой, в остальном комната выглядела совершенно пустой.\"\nmaster = master or {}\nmaster.position = master.position or 1\ntext = text .. (master.position == 155 and \"<s>\n   Наставник джедая сидел на ступенях одной из лестниц, закрыв лицо ладонями. Целая россыпь небольших камней зависла в воздухе перед ним и плавно покачивалась в такт дыхания.\" or (master.position == 156 and \"<s>\n   Наставник джедая стоял на площадке перед дверью на верхнем этаже, внимательно что-то изучая.\") or \"\")\n  if dess.isUpstairs == 1 then\n    if master.position == 156 then\n      text = text .. \" Там же со скучающим видом стояла Десс\" .. (TL3.position == \"at the stairs\" and \", возле неё замер на месте TL-3.\"or \".\")\n    else\n      text = text .. \" На площадке перед дверью на верхнем этаже со скучающим видом стояла Десс\" .. (TL3.position == \"at the stairs\" and \", возле неё замер на месте TL-3.\"or \".\")\n    end\n  else\n     if master.position == 156 then\n      text = text .. \" Там же замер на месте TL-3.\"\n    else text = text .. (TL3.position == \"at the stairs\" and \" На площадке перед дверью на верхнем этаже замер на месте TL-3.\"or \"\") \n    end\n  end\n    if TL3.readyForComment == 1 then -- учитель готов отжигать\n      if master.position == 155 or master.position == 155 then\n        text = text .. \"<s>\n– Кстати, – неожиданно подал голос учитель, – этот дроид – твоих рук дело?<s>\n   Орнас лишь молча кивнул.\"\n        TL3.readyForComment = 0\n      end\n    end\nif TL3.destroyEvent == 1 then -- дроида порешали втихоря\n  text = text .. \"<s>\n– Эй! – крикнула Десвиар и заулыбалась. – Тут твой дроид того...сломался. Ни с того ни с сего, представляешь? Даже поздороваться не успел.<s>\n   Орнас промолчал, стиснув зубы от накатившей злости. Он совсем недавно буквально по деталям перебрал TL-3 и был уверен, что тот не мог взорваться сам по себе.\"\n  TL3.destroyEvent = 2\ng.achievements = g.achievements or {}\ng.achievements.diploProblem3 = g.achievements.diploProblem3 or 0\n\ng.achievements.alarm = g.achievements.diploProblem3  == 0 and -25 or 0\ng.achievements.diploProblem3 = 1\n\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 202,
        "text": "Подойти к энергетическому блоку справа",
        "lua_text": "function lua_text()\ntrap = trap or 0\nreturn trap == 1 and \"Осмотреть энергетический блок справа\" or nil\nend",
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "id": 204,
        "text": "Осмотреть энергетический блок слева",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "var_equal": [
          "trap",
          1
        ]
      },
      {
        "id": 234,
        "var_not": [
          "trap",
          1
        ],
        "text": "Подойти к энергетическому блоку слева",
        "var_set": [
          "trap",
          1
        ]
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "id": 125,
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(125) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Внимательно осмотреть помещение",
        "need": -125,
        "lua_if": "function lua_if()\nreturn style == 3\nend"
      },
      {
        "id": 199,
        "text": "\n   Часть комнаты перед левым энергетическим блоком была ограждена энергетическогим полем лучегасителей.",
        "merge": true,
        "var_equal": [
          "panel1",
          1
        ]
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "var_set": [
          "goto",
          158,
          "gofrom",
          155
        ],
        "lua_text": "function lua_text()\n\nreturn \"Пройти в дверь по центру\" .. (isHistoryContain (158) and \"<s>\n[В центральный зал с колоннами]\" or \"\") \nend",
        "id": 155,
        "middle_answer": true,
        "text": "Пойти в дверь по центру",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = middleRoom.result or 0\nlocal a = middleRoom.result ~=3 and 194 or 93\nshowPage { id = a}\nend",
        "no_transition": true
      },
      {
        "right_answer": true,
        "lua_text": "function lua_text()\n\nreturn \"Пройти в дверь с правой стороны\" .. (isHistoryContain (196) and \"<s>\n[В коридор с медицинской камерой]\" or \"\") \nend",
        "id": 194,
        "text": "Пойти в дверь с правой стороны",
        "var_set": [
          "goto",
          196,
          "gofrom",
          155
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пройти в дверь с левой стороны\" .. (isHistoryContain (157) and \"<s>\n[В зал со звездолётом]\" or \"\") \nend",
        "id": 194,
        "text": "Пойти в дверь с левой стороны",
        "left_answer": true,
        "var_set": [
          "goto",
          157,
          "gofrom",
          155
        ]
      },
      {
        "id": 156,
        "text": "Пойти вверх по лестнице\n[К завершению тестовой части]",
        "middle_answer": true,
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      }
    ]
  },
  {
    "id": 156,
    "text": "   Юноша подошёл к массивной лестнице и замер. Какие испытания и трудности ждут его там, наверху? Он нерешительно сделал первый шаг...<s>r\n<s>r\n   *   *   *<s>r\n   Уважаемый читатель!<s>r\nНа этом моменте заканчивается доступная для прохождения в тестовой версии часть квеста. Искренне надеюсь, что Вам понравилось, и буду благодарен за отзывы и сообщения об ошибках. Вы можете вернуться назад и продолжить исследование храма или оставить на этой странице сохранение, чтобы продолжить прохождение, когда квест будет завершён.",
    "answers": [
      {
        "id": 162,
        "text": "Промежуточные итоги"
      },
      {
        "id": 155,
        "text": "Назад",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "id": 1,
        "text": "На первую страницу",
        "instant": false,
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.fails = master.fails or 0\n\n  if master.fails == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.student = g.achievements.student or 0\n\n    g.achievements.alarm = g.achievements.student == 0 and 17 or 0\n    g.achievements.student = 1\n  end\n\nplasmogrenade192 = plasmogrenade192 or 0\nopened235 = opened235 or 0\n  if plasmogrenade192 == 1 and opened235 == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.rashDecision2 = g.achievements.rashDecision2 or 0\n\n    g.achievements.alarm = g.achievements.rashDecision2 == 0 and -27 or 0\n    g.achievements.rashDecision2 = 1\n  end\n\nfire223 = fire223 or 0\nvars[\"292sup\"] = vars[\"292sup\"] or 0\ng.achievements = g.achievements or {}\nachievements.centralMechSeen = achievements.centralMechSeen or 0\ng.achievements.rashDecision3 = g.achievements.rashDecision3 or 0\n  achievements = achievements or {}\nif fire223 == 1 and achievements.centralMechSeen == 1 and vars[\"292sup\"] == 0 then\n  g.achievements.alarm = g.achievements.rashDecision3 == 0 and -28 or 0\n  g.achievements.rashDecision3 = 1\nend\n\nTL3 = TL3 or {}\nTL3.repairProgress = TL3.repairProgress or 0\ng.achievements = g.achievements or {}\ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0\nif TL3.repairProgress == 1 then\n  g.achievements.alarm = g.achievements.aboutMechanics == 0 and -21 or 0\n  g.achievements.aboutMechanics = 1\nend\n\ndelayedExit = 1\n\nend"
      },
      {
        "super_calculate": false,
        "id": 156,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\ng.blockSaves = 0\ng.achievements = g.achievements or {}\ng.achievements.diplomat4 = g.achievements.diplomat4 or 0\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nmaster = master or {}\nmaster.position = master.position or 0\n\n  if dess.isUpstairs == 1 and TL3.position == \"at the stairs\" and master.position == 156 then\n    g.achievements.alarm = g.achievements.diplomat4 == 0 and 12 or 0\n    g.achievements.diplomat4 = 1\n  end\n\nopened229 = opened229 or 0\ndestroy224= destroy224 or 0\nlocal aa = (opened229 == 0 or opened229 == 3 ) and 1 or 0\n  if aa == 1 and destroy224 == 1 then\ng.achievements = g.achievements or {}\ng.achievements.rashDecision1 = g.achievements.rashDecision1 or 0\n\ng.achievements.alarm = g.achievements.rashDecision1 == 0 and -26 or 0\ng.achievements.rashDecision1 = 1\nend\n\nend"
      },
      {
        "super_calculate": false,
        "id": 162,
        "text": "delayedExit",
        "calculate": true,
        "lua_do": "function lua_do()\nif delayedExit == 1 then\nshowPage{id = 1}\nend\nend"
      },
      {
        "id": 156,
        "text": "\nПолный текст страницы подъёма по лестнице",
        "need": 1000,
        "merge": true
      },
      {
        "id": 506,
        "text": "Подняться по лестнице",
        "lua_if": "function lua_if()\nreturn g.partsAvailable == 2\nend",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.fails = master.fails or 0\n\n  if master.fails == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.student = g.achievements.student or 0\n\n    g.achievements.alarm = g.achievements.student == 0 and 17 or 0\n    g.achievements.student = 1\n  end\n\nplasmogrenade192 = plasmogrenade192 or 0\nopened235 = opened235 or 0\n  if plasmogrenade192 == 1 and opened235 == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.rashDecision2 = g.achievements.rashDecision2 or 0\n\n    g.achievements.alarm = g.achievements.rashDecision2 == 0 and -27 or 0\n    g.achievements.rashDecision2 = 1\n  end\n\nfire223 = fire223 or 0\nvars[\"292sup\"] = vars[\"292sup\"] or 0\ng.achievements = g.achievements or {}\nachievements.centralMechSeen = achievements.centralMechSeen or 0\ng.achievements.rashDecision3 = g.achievements.rashDecision3 or 0\n  achievements = achievements or {}\nif fire223 == 1 and achievements.centralMechSeen == 1 and vars[\"292sup\"] == 0 then\n  g.achievements.alarm = g.achievements.rashDecision3 == 0 and -28 or 0\n  g.achievements.rashDecision3 = 1\nend\n\nTL3 = TL3 or {}\nTL3.repairProgress = TL3.repairProgress or 0\ng.achievements = g.achievements or {}\ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0\nif TL3.repairProgress == 1 then\n  g.achievements.alarm = g.achievements.aboutMechanics == 0 and -21 or 0\n  g.achievements.aboutMechanics = 1\nend\n\ndelayedExit = 1\n\nend"
      },
      {
        "id": 468,
        "text": "Подняться по лестнице (альфа-тест)",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1 or (g.alphaTest and g.alphaTest == 1) and g.partsAvailable == 1\nend",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.fails = master.fails or 0\n\n  if master.fails == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.student = g.achievements.student or 0\n\n    g.achievements.alarm = g.achievements.student == 0 and 17 or 0\n    g.achievements.student = 1\n  end\n\nplasmogrenade192 = plasmogrenade192 or 0\nopened235 = opened235 or 0\n  if plasmogrenade192 == 1 and opened235 == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.rashDecision2 = g.achievements.rashDecision2 or 0\n\n    g.achievements.alarm = g.achievements.rashDecision2 == 0 and -27 or 0\n    g.achievements.rashDecision2 = 1\n  end\n\nfire223 = fire223 or 0\nvars[\"292sup\"] = vars[\"292sup\"] or 0\ng.achievements = g.achievements or {}\nachievements.centralMechSeen = achievements.centralMechSeen or 0\ng.achievements.rashDecision3 = g.achievements.rashDecision3 or 0\n  achievements = achievements or {}\nif fire223 == 1 and achievements.centralMechSeen == 1 and vars[\"292sup\"] == 0 then\n  g.achievements.alarm = g.achievements.rashDecision3 == 0 and -28 or 0\n  g.achievements.rashDecision3 = 1\nend\n\nTL3 = TL3 or {}\nTL3.repairProgress = TL3.repairProgress or 0\ng.achievements = g.achievements or {}\ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0\nif TL3.repairProgress == 1 then\n  g.achievements.alarm = g.achievements.aboutMechanics == 0 and -21 or 0\n  g.achievements.aboutMechanics = 1\nend\n\ndelayedExit = 1\n\nend"
      }
    ]
  },
  {
    "id": 157,
    "text": "   Джедай ",
    "answers": [
      {
        "lua_text": "function lua_text()\nbang229 = bang229 or 0\nfire223 = fire223 or 0\n\n\npics = pics or {}\npics.a7 = 1\npics.a8 = bang229 ~= 0 and 1 or 0\npics.a9 = fire223 ~= 0 and 1 or 0\n-- 194, 214\nlocal text = (g.previous_id == 194 or g.previous_id == 214) and \"оказался\" or \"находился\"\nreturn text\nend",
        "id": 157,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "merge": true
      },
      {
        "var_equal": [
          "mask157",
          1
        ],
        "id": 157,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "arm157",
          1
        ]
      },
      {
        "id": 157,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\ndroids157disabled = droids157disabled or 0\ndroids157disabled = (droid_leave_the_room == 1 and 1) or (repair208 == 1 and 1) or droids157disabled\nif repair208 == 1 then\nboy157 = 1\nend\nend"
      },
      {
        "id": 157,
        "text": " в огромном зале, большую часть которого занимал ржавый корпус разбитого звездолёта и его обломки. Яркий солнечный свет проникал через разрушенный участок стены и играл бликами на мелких осколках стекла, усеивающих всю поверхность пола.",
        "var_not": [
          "bang229",
          1
        ],
        "merge": true
      },
      {
        "id": 157,
        "text": " в огромном зале, большую часть которого занимали покрытые сажей и всё ещё дымящиеся обломки звездолёта. Яркий солнечный свет проникал через разрушенный участок стены, создавая причудливые узоры из теней и лучей в пыльном воздухе.\n   После взрыва, обратившего в прах космический корабль, в этом помещении не осталось ничего, что можно было бы хоть как-то использовать: лишь обломки и мусор были вокруг.",
        "var_not": [
          "bang229",
          0
        ],
        "merge": true
      },
      {
        "id": 215,
        "text": "Осмотреть панель",
        "var_not": [
          "bang229",
          1,
          "fire223",
          1
        ],
        "var_equal": [
          "boy157",
          1
        ]
      },
      {
        "var_not": [
          "bang229",
          1
        ],
        "var_equal": [
          "boy157",
          1
        ],
        "id": 214,
        "text": "Подняться на борт корабля",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "var_set": [
          "ship",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\" and TL3.position ~= \"destroyed\"\nreturn a\nend",
        "var_equal": [
          "repair208",
          1
        ],
        "id": 271,
        "text": "Поговорить с астродроидом",
        "need": [
          -452
        ],
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\" and TL3.position ~= \"destroyed\"\nreturn a\nend",
        "var_equal": [
          "repair208",
          1
        ],
        "id": 452,
        "text": "Поговорить с астродроидом",
        "need": [
          452
        ],
        "merge": false
      },
      {
        "id": 105,
        "text": "Поговорить с астродроидом",
        "lua_if": "function lua_if()\n-- дроид слинял после ремонта к кораблю.\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nreturn TL3.position == \"near the ship\" and TL3.canBeDestroyed ~= 1\nend"
      },
      {
        "id": 111,
        "text": "Уничтожить астродроида",
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nreturn TL3.canBeDestroyed == 1 and TL3.position ~= \"at the stairs\"\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nTL3.canBeDestroyed = 0\nend"
      },
      {
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nTL3.canBeDestroyed = 0\nTL3.position = \"destroyed\"\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 3\nTL3.destroyed = 1\nachAbsolute = (achAbsolute or 0) <plus> 1\n\nend",
        "text": "Уничтожить астродроида молниями",
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nreturn TL3.canBeDestroyed == 1 and TL3.position ~= \"at the stairs\" and force_ab == 3\nend",
        "id": 869
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nbang229 = bang229 or 0\nboy157 = boy157 or 0\nreturn style == 3 and bang229 ~= 1 and boy157 == 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(126) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Внимательно осмотреть помещение",
        "need": -126,
        "id": 126
      },
      {
        "id": 157,
        "text": "\n   Не успел Орнас как следует осмотреться, как со всех сторон послышались приглушённые щелчки и потрескивание. \"Охранные дроиды!\" – догадался юноша и почти сразу увидел серебристый корпус одного из них недалеко от себя.",
        "var_not": [
          "boy157",
          1
        ],
        "merge": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "lua_if": "function lua_if()\nreturn style == 1\nend",
        "var_equal": [
          "boy157",
          0
        ],
        "lua_do": "function lua_do()\ndroids157destroyed = 1\ndroids157disabled = 0\nend",
        "text": "Атаковать дроидов мечом",
        "id": 213,
        "var_set": [
          "boy157",
          1,
          "sword157",
          1
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn style ~= 1\nend",
        "var_equal": [
          "boy157",
          0
        ],
        "id": 213,
        "text": "Атаковать дроидов мечом",
        "lua_do": "function lua_do()\ndroids157destroyed = 1\ndroids157disabled = 0\nend",
        "var_set": [
          "boy157",
          1,
          "sword157",
          1
        ]
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "lua_if": "function lua_if()\nreturn style == 2\nend",
        "var_equal": [
          "boy157",
          0
        ],
        "lua_do": "function lua_do()\ndroids157destroyed = 1\ndroids157disabled = 0\nend",
        "text": "Атаковать дроидов Силой",
        "id": 213,
        "var_set": [
          "boy157",
          1,
          "force157",
          1
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn style ~= 2\nend",
        "var_equal": [
          "boy157",
          0
        ],
        "id": 213,
        "text": "Атаковать дроидов Силой",
        "lua_do": "function lua_do()\ndroids157destroyed = 1\ndroids157disabled = 0\nend",
        "var_set": [
          "boy157",
          1,
          "force157",
          1
        ]
      },
      {
        "lua_do": "function lua_do()\ndroids157destroyed = 1\ndroids157disabled = 0\nend",
        "text": "Использовать ионную гранату",
        "var_equal": [
          "boy157",
          0
        ],
        "id": 213,
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_need": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_set": [
          "boy157",
          1,
          "ion_grenade_157",
          1
        ]
      },
      {
        "var_add": [
          "darkside",
          3
        ],
        "var_equal": [
          "boy157",
          0,
          "force_ab",
          3
        ],
        "id": 318,
        "text": "Атаковать дроидов молниями",
        "lua_do": "function lua_do()\ndroids157destroyed = 1\ndroids157disabled = 0\nachAbsolute = (achAbsolute or 0) <plus> 1\nend",
        "var_set": [
          "boy157",
          1
        ]
      },
      {
        "var_equal": [
          "boy157",
          0,
          "noarm",
          0
        ],
        "id": 213,
        "text": "Притронуться к браслету",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.touchTheArmlet = 1\ndroids157disabled = 1\nend",
        "var_set": [
          "boy157",
          1,
          "arm157",
          1
        ]
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_equal": [
          "boy157",
          0,
          "style",
          3
        ],
        "lua_do": "function lua_do()\ndroids157disabled = 1\nend",
        "text": "Спрятаться",
        "id": 213,
        "var_set": [
          "boy157",
          1,
          "mask157",
          1
        ]
      },
      {
        "id": 260,
        "text": "Быстро вернуться назад",
        "var_equal": [
          "boy157",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn bang229 ~= 1\nend",
        "id": 157,
        "text": "Описание дроидов",
        "lua_text": "function lua_text()\n--boy157\", 1, \"droids157destroyed\", 1\n-- not \nfire223 = fire223 or 0\ndroids157destroyed = droids157destroyed or 0\ndroids157disabled = droids157disabled or 0\ndroids157disabled = droid_leave_the_room == 1 and 1 or droids157disabled\n\n\nlocal text = \"\"\n  if fire223 ~= 1 then \n    text = (droids157destroyed == 1 and\n\"<s>\n   За исключением самого звездолёта и обломков охранных дроидов комната была почти пуста: лишь небольшая приборная панель у стены среди груд камней и металлолома могла представлять хоть какой-то интерес.\") or (droids157disabled == 1 and \"<s>\n   За исключением самого звездолёта и отключённых охранных дроидов комната была почти пуста: лишь небольшая приборная панель у стены среди груд камней и металлолома могла представлять хоть какой-то интерес.\") or \"\"\n  else\n    text = (droids157destroyed == 1 and \"<s>\n   За исключением самого звездолёта и обломков охранных дроидов комната была совершенно пуста. В стене напротив кабины корабля зиял внушительный проём, почти заваленный грудами камней и металлолома.\") or (droids157disabled == 1 and \"<s>\n   За исключением самого звездолёта и отключённых охранных дроидов комната была совершенно пуста. В стене напротив кабины корабля зиял внушительный проём, почти заваленный грудами камней и металлолома.\") or \"\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "var_not": [
          "bang229",
          0,
          "fire223",
          0
        ],
        "var_equal": [
          "boy157",
          1,
          "arm157",
          1
        ],
        "id": 157,
        "text": "\n   В одной из внутренних стен зиял внушительный проём в центр храма, почти заваленный грудами камней и металлолома.",
        "merge": true
      },
      {
        "var_not": [
          "bang229",
          1
        ],
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\" and TL3.position ~= \"destroyed\"\nreturn a\nend",
        "var_equal": [
          "repair208",
          1
        ],
        "id": 157,
        "text": " Астродроид сновал между кучами хлама и кораблем, пытаясь восстановить часть истлевшего корпуса.",
        "merge": true
      },
      {
        "var_not": [
          "bang229",
          1
        ],
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nreturn TL3.position == \"near the ship\"\nend",
        "id": 157,
        "text": " Астродроид сновал между кучами хлама и кораблем, пытаясь восстановить часть истлевшего корпуса.",
        "merge": true
      },
      {
        "id": 157,
        "text": " Астродроид неподвижно замер возле одной из дверей и выглядел отключённым.",
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a = 0\na = TL3.position == \"near the ship\" and 1 or a\na = repair208 == 1 and 1 or a\na = bang229 == 1 and a <plus> 1 or 0\nreturn a == 2 and TL3.position ~= \"at the stairs\"\nend",
        "merge": true
      },
      {
        "id": 157,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nmaster = master or {}\nmaster.position = master.position or 1\ntext = master.position == 157 and \" Наставник Орнаса сидел в расслабленной позе в углу помещения, сложив руки на груди и жмурясь от падающего на лицо света.\" or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пойти вглубь храма\" .. (isHistoryContain (155) and \"<s>\n[В зал с лестницей]\" or \"\") \nend",
        "var_equal": [
          "boy157",
          1
        ],
        "id": 194,
        "text": "Пойти вглубь храма",
        "middle_answer": true,
        "var_set": [
          "goto",
          155,
          "gofrom",
          157
        ]
      },
      {
        "var_not": [
          "fire223",
          0
        ],
        "lua_text": "function lua_text()\n\nreturn \"Пройти через проём в стене\" .. (isHistoryContain (158) and \"<s>\n[В центральный зал с колоннами]\" or \"\") \nend",
        "var_equal": [
          "boy157",
          1
        ],
        "id": 248,
        "text": "Пройти через проём в стене",
        "right_answer": true,
        "var_set": [
          "goto",
          158,
          "gofrom",
          157
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пойти к выходу из храма\" .. (isHistoryContain (201) and \"<s>\n[В захламлённую угловую комнату]\" or \"\") \nend",
        "var_equal": [
          "boy157",
          1
        ],
        "id": 194,
        "text": "Пойти к выходу из храма",
        "middle_answer": true,
        "var_set": [
          "goto",
          201,
          "gofrom",
          157
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nhideMap = 0\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.knowAboutShip = 1\narm157 = (TL3.position == \"near the ship\" or TL3.position == \"at the stairs\") and 1 or arm157\nboy157 = (TL3.position == \"near the ship\" or TL3.position == \"at the stairs\") and 1 or boy157\nend",
        "text": "Новый ответ. введите текст",
        "id": 157,
        "calculate": true
      }
    ]
  },
  {
    "id": 158,
    "text": "empty\nЦентральный зал",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "super_calculate": false,
        "id": 158,
        "calculate": false,
        "text": "Быстро вернуться назад",
        "lua_do": "function lua_do()\n\npanel6 = panel6 == 1 and 0 or 1\nend"
      },
      {
        "id": 158,
        "text": "генерация текста",
        "lua_text": "function lua_text()\npics = pics or {}\npics.a5 = 1\n\nlocal ar = takeOnArmlet == 1 and \"   Немного повозившись, Орнас надел браслет на левую руку.<s>\n   Он \" or \"   Орнас \"\ntakeOnArmlet = nil\n\nlocal text = (g.previous_id == 194 or g.previous_id ==248 or g.previous_id == 299 or g.previous_id == 181) and \"попал в огромный тёмный зал. \" or \"находился в огромном тёмном зале. \"\nreturn ar .. text\nend",
        "merge": true
      },
      {
        "id": 158,
        "text": "Высокие потолки удерживались четырьмя массивными колоннами в центральной части, в углах комнаты были навалены груды камней и различного мусора.\n",
        "merge": true,
        "var_equal": [
          "brokencoloumns",
          0
        ]
      },
      {
        "id": 158,
        "text": "Высокие потолки удерживались тремя массивными колоннами в центральной части, а в том месте, где должна была располагаться ещё одна, виднелась лишь груда камней и обломков. В углах комнаты были такие же завалы осколков и различного мусора.\n",
        "merge": true,
        "var_equal": [
          "brokencoloumns",
          1
        ]
      },
      {
        "id": 158,
        "text": "Высокие потолки удерживались двумя массивными колоннами в центральной части, а в том месте, где должны были располагаться две другие, виднелись лишь груды камней и обломков. В углах комнаты были такие же завалы осколков и различного мусора.\n",
        "var_equal": [
          "brokencoloumns",
          2
        ],
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 257,
        "calculate": true,
        "text": "Повторный вход",
        "lua_do": "function lua_do()\n\n-- middleRoom.result == 1 - победа, 2 - бегство, 3 - поражение,\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = middleRoom.result or 0\n\nvictory158 = middleRoom.result == 1 and 1 or victory158 \n\nenemyhp = middleRoom.result == 0 and (style == 1 and 10 or 8) or enemyhp\n\nif middleRoom.result == 2 then -- регенерация монстра\n  enemyhp = enemyhp <plus> 5 > 12 and 12 or enemyhp <plus> 5\n  gren160 = 0\n  fail160 = nil\n  suc160 = nil\n  ion160 = nil \n  grentype160 = nil\n  crio160 = nil\n  havetime = nil\n  plasm160 = nil\n  gren50 = nil\n  crio50 = nil\n  plasm50 = nil\n  enemyhp = enemyhp >9 and 10 or enemyhp\n  elseif middleRoom.result == 0 then\n  enemyhp = 10\n  helmet270 = nil\nelseif middleRoom.result == 3  then -- обнуление всех переменных боя\ngren160 = 0\nfail160 = nil\nsuc160 = nil\n-- page 50, 183, 249 lead to the 92, ok\nion160 = nil\ngrentype160 = nil\ncrio160 = nil\nhavetime = nil\nplasm160 = nil\nenemyhp = 10\nfight158 = 0\nfail50 = nil\ngren50 = nil\ncrio50 = nil\nplasm50 = nil\nvisited49 = nil\nresult47 = nil\ncurrentcolstat = nil\nbrokencoloumns = 0\nprevcoldestr = 0\ncoloumn55 = 0\ncoldirection = nil\nrestart251 = nil\nstart251 = nil\ncol1stat = nil\ncol1stat = nil\ncol1stat = nil\ncol1stat = nil\nvars[\"251sup1\"] = nil\nvars[\"251sup2\"] = nil\nvars[\"251sup3\"] = nil\nvars[\"251sup4\"] = nil\nend\nenemyhp = enemyhp or 10\nend"
      },
      {
        "var_equal": [
          "victory158",
          0
        ],
        "id": 158,
        "text": "К бою",
        "lua_do": "function lua_do()\nlocal a = isHistoryContain(257) and 160 or 257\nshowPage {id = a}\nend",
        "no_transition": true
      },
      {
        "id": 260,
        "text": "Быстро вернуться назад",
        "var_equal": [
          "victory158",
          0
        ]
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "lua_if": "function lua_if()\nvictory158 = victory158 or 0\nreturn style == 3 and victory158 ~= 0\nend",
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(127) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Внимательно осмотреть помещение",
        "need": [
          -127
        ],
        "id": 127
      },
      {
        "id": 258,
        "text": "Осмотреть груды камней в углах помещения",
        "var_not": [
          "victory158",
          0
        ]
      },
      {
        "var_not": [
          "victory158",
          0
        ],
        "var_equal": [
          "292sup",
          0
        ],
        "id": 272,
        "text": "Осмотреть колонны",
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "var_not": [
          "victory158",
          0
        ],
        "var_equal": [
          "helmet",
          2
        ],
        "id": 158,
        "text": "Поднять шлем",
        "var_set": [
          "helmet",
          1
        ]
      },
      {
        "var_not": [
          "panel6",
          1
        ],
        "var_equal": [
          "victory158",
          1
        ],
        "id": 259,
        "text": "Пройти в центр зала",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "var_less": [
          "292sup",
          1
        ]
      },
      {
        "var_not": [
          "panel6",
          1
        ],
        "var_equal": [
          "victory158",
          1
        ],
        "id": 292,
        "var_need": [
          "292sup",
          1
        ],
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "text": "Пройти в центр зала"
      },
      {
        "var_not": [
          "panel6",
          1
        ],
        "var_equal": [
          "victory158",
          0
        ],
        "id": 158,
        "text": "   В самом центре зала между колонн высился силуэт многометрового монстра. Вся спина чудовища была покрыта множеством шипов, морду обрамляли мощные клыки и бивни, жуткие когти скрывали передние лапы. Юноша много раз читал архивные данные о терентатеках, но даже представить не мог, что ему доведётся встретиться с одним из них лицом к лицу.\n   Почувствовав Орнаса, зверь оглушительно зарычал и направился в сторону жертвы.",
        "merge": true
      },
      {
        "var_not": [
          "panel6",
          1
        ],
        "var_equal": [
          "victory158",
          1
        ],
        "id": 158,
        "text": "   Примерно в центре зала неподвижно лежало тело погибшего терентатека. Вся спина чудовища была покрыта множеством шипов, морду обрамляли мощные клыки и бивни, жуткие когти скрывали передние лапы. В широко раскрытых глазах навсегда застыли удивление и страх.",
        "var_no_more": [
          "292sup",
          0
        ],
        "merge": true
      },
      {
        "var_not": [
          "panel6",
          1
        ],
        "var_equal": [
          "victory158",
          1
        ],
        "id": 158,
        "text": "   В центре зала возвышалось каменное сооружение, к которому вели две небольшие ступени. Несколько поодаль от него неподвижно лежало тело погибшего терентатека. В его широко раскрытых глазах навсегда застыло выражение удивления и страха.",
        "var_need": [
          "292sup",
          1
        ],
        "merge": true
      },
      {
        "id": 158,
        "text": "   Вся центральная часть зала была отделена тускло сияющим в темноте полем лучегасителей. За защитным полем виднелись очертания какой-то огромной фигуры, но Орнасу не удавалось различить, что скрыто внутри.",
        "merge": true,
        "var_equal": [
          "panel6",
          1
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n  adConditions = adConditions or {}\nadConditions.rayField = 1\nmiddleRoom = middleRoom or {}\nmiddleRoom.useAdvantage = middleRoom.useAdvantage or 0\n  middleRoom.useAdvantage = middleRoom.monsterIsDead ~= 1 and 1 or middleRoom.useAdvantage \nend",
        "var_equal": [
          "panel6",
          1
        ],
        "id": 158,
        "text": "conditions",
        "calculate": true,
        "merge": false
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "middle_answer": true,
        "lua_text": "function lua_text()\n\nreturn \"Пройти вглубь храма\" .. (isHistoryContain (155) and \"<s>\n[В зал с лестницей]\" or \"\") \nend",
        "lua_do": "function lua_do()\ntimer265sup = 0\ntimer265set = 0\ntimer265end = g.time\nend",
        "id": 194,
        "var_need": [
          "victory158",
          1
        ],
        "text": "Пойти вглубь храма",
        "var_set": [
          "goto",
          155,
          "gofrom",
          158
        ]
      },
      {
        "var_not": [
          "fire223",
          0
        ],
        "id": 248,
        "text": "Пройти через проём в стене\n[В зал со звездолётом]",
        "var_set": [
          "goto",
          157,
          "gofrom",
          158
        ],
        "left_answer": true
      },
      {
        "var_need": [
          "victory158",
          1
        ],
        "middle_answer": true,
        "id": 194,
        "text": "Пойти к выходу из храма\n[В зал с клеткой]",
        "lua_do": "function lua_do()\ntimer265sup = 0\ntimer265set = 0\ntimer265end = g.time\nend",
        "var_set": [
          "goto",
          177,
          "gofrom",
          158
        ]
      },
      {
        "id": 158,
        "text": "\n   На полу, недалеко от одного из входов, валялся старый мандалорский шлем, выброшенный Орнасом перед битвой с чудовищем.",
        "merge": true,
        "var_equal": [
          "helmet",
          2
        ]
      },
      {
        "var_equal": [
          "weightform_sup",
          0
        ],
        "id": 275,
        "calculate": false,
        "run": [
          275
        ],
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 159,
    "text": "– Ты можешь зайти внутрь, как только посчитаешь необходимым, – продолжил наставник. – Я останусь здесь и позволю Силе чувствовать происходящее с тобой.\n   С этими словами он сел на каменные ступени и закрыл глаза. Его световой меч плавно оторвался от пояса, на котором до этого висел, и неподвижно завис перед сосредоточенным лицом джедая.",
    "answers": [
      {
        "id": 33,
        "text": "Подойти к двери"
      }
    ]
  },
  {
    "id": 160,
    "text": "   Огромный терентатек стремительно приближался к юноше. Орнас понимал, что в открытом бою у него нет шансов против невосприимчивого к приёмам Силы монстра. Нужно действовать хитрее.",
    "answers": [
      {
        "lua_do": "function lua_do()\nhavetime = 1\nend",
        "text": "Атаковать мечом",
        "lua_if": "function lua_if()\nreturn gren160 ~=1\nend",
        "id": 49
      },
      {
        "var_not": [
          "gren160",
          1,
          "fail160",
          1
        ],
        "lua_if": "function lua_if()\nreturn false\nend",
        "instant": true,
        "id": 160,
        "var_need": [
          "grenade",
          1
        ],
        "text": "Использовать гранаты",
        "var_set": [
          "gren160",
          1
        ]
      },
      {
        "id": 160,
        "text": "\n   Юноша решил, что гранаты, которые он сумел раздобыть ранее, могут помочь ему в сражении с монстром.",
        "var_need": [
          "grenade",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "helmet",
          0,
          "helmet",
          2,
          "helmet270",
          2
        ],
        "var_equal": [
          "gren160",
          1
        ],
        "id": 270,
        "text": "Ран для шлема",
        "run": [
          270
        ],
        "merge": false
      },
      {
        "id": 774,
        "instant": false,
        "var_str_set": [
          "grentype160",
          "ионную"
        ],
        "var_not": [
          "fail160",
          1,
          "suc160",
          1
        ],
        "text": "Бросить ионную гранату",
        "middle_answer": false,
        "var_need": [
          "grenade1",
          1
        ],
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_set": [
          "ion160",
          1,
          "fail160",
          1
        ]
      },
      {
        "id": 775,
        "text": "Бросить криогенную гранату",
        "var_str_set": [
          "grentype160",
          "криогенную"
        ],
        "var_not": [
          "fail160",
          1,
          "suc160",
          1
        ],
        "instant": false,
        "middle_answer": false,
        "var_need": [
          "grenade3",
          1
        ],
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "var_set": [
          "crio160",
          1,
          "suc160",
          1,
          "havetime",
          2
        ]
      },
      {
        "var_add": [
          "enemyhp",
          -2
        ],
        "id": 776,
        "var_need": [
          "grenade4",
          1
        ],
        "var_str_set": [
          "grentype160",
          "плазменную"
        ],
        "var_not": [
          "fail160",
          1,
          "suc160",
          1
        ],
        "instant": false,
        "middle_answer": false,
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "text": "Бросить плазменную гранату",
        "var_set": [
          "plasm160",
          1,
          "suc160",
          1,
          "havetime",
          1
        ]
      },
      {
        "id": 50,
        "text": "Продолжить бой",
        "var_equal": [
          "suc160",
          1
        ],
        "var_set": [
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ]
      },
      {
        "id": 260,
        "text": "Отступить в предыдущую комнату",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "fight158",
          0,
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "plasm160",
          0,
          "crio160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ]
      },
      {
        "var_not": [
          "grentype160",
          0
        ],
        "id": 160,
        "text": "\n   Сорвав с пояса и активировав",
        "var_show": [
          "grentype160",
          "гранату, юноша метнул её так, чтобы она взорвалась непосредственно рядом с чудовищем."
        ],
        "merge": true
      },
      {
        "id": 160,
        "text": " Взрыв ионной гранаты не причинил никакого вреда свирепому существу, оказавшемуся почти перед самым джедаем. Поняв, что другого момента спастись уже может не быть, Орнас решил отступить.",
        "merge": true,
        "var_equal": [
          "ion160",
          1
        ]
      },
      {
        "id": 160,
        "text": " Взрыв криогенной гранаты несколько замедлил свирепое существо, оказавшееся почти перед самым джедаем.\n   Орнас мог бы воспользоваться преимуществом в скорости и продолжить бой или отступить, пока не поздно.",
        "merge": true,
        "var_equal": [
          "crio160",
          1
        ]
      },
      {
        "id": 160,
        "text": " Взрыв плазменной гранаты заставил терентатека остановиться и взвыть от боли.\n   Орнас мог бы воспользоваться заминкой и своим преимуществом в скорости, чтобы продолжить бой или отступить, пока не поздно.",
        "merge": true,
        "var_equal": [
          "plasm160",
          1
        ]
      }
    ]
  },
  {
    "id": 161,
    "text": "   Дессвиар удивлённо приподняла бровь и подошла ближе к юноше.<s>r\n– Выглядишь слишком серьёзно, – тревожно протянула она. – Неужели разузнал что-то настолько страшное?<s>r\n– Скорее неожиданное, – ответил Орнас и посмотрел ей прямо в глаза. – Я думаю, что ты джедай. По крайней мере, раньше была им.<s>r\n   Десс смотрела на юношу раскрыв рот. Затем она испуганно перевела взгляд на свои руки, будто ожидая увидеть в них что-то, свойственное только джедаям.<s>r\n– Ты уверен? – зачем-то понизив голос спросила она. – Почему ты так думаешь?<s>r\n– Прислушайся к своим чувствам, и ты сама поймёшь, что это правда, – ответил джедай услышанной где-то фразой. – ",
    "answers": [
      {
        "id": 161,
        "text": "Объяснения Орнаса",
        "lua_text": "function lua_text()\n--Начало второго блока Десс. Для доступа нужно узнать о её прошлом. После завершения рассказывает версию событий в зависисмости от доверия.\ndess = dess or {}\ndess.recordSeen = dess.recordSeen or 0 -- запись в шлеме\ndess.saberSeen = dess.saberSeen or 0 -- световой меч в сейфе\ndess.droidSeen = dess.droidSeen or 0 -- рассказал дроид\ndess.complexSeen = dess.complexSeen or 0 -- сложное условие: бой со змеёй наверху - видел следы, видел одевание Десс - видел следы сражения\nlocal text = \"\"\nlocal z = style == 2 and 1 or 0\nlocal a = dess.recordSeen <plus> dess.saberSeen <plus> dess.droidSeen <plus> dess.complexSeen <plus> z\nlocal b = {dess.droidSeen, dess.recordSeen, dess.saberSeen, dess.complexSeen, z}\na = (a == 2 and z == 1 and dess.complexSeen == 1) and 1 or a\n  if a == 1 then\n    text = (b[1]==1 and \"Один дроид, которого я нашёл здесь, рассказал мне о джедае, заточённом в капсуле. Выходит, что это ты.\") or (b[2]==1 and \"Я нашёл здесь аудиозапись. В ней упоминается джедай, у которого отняли световой меч.\") or (b[3]==1 and \"Я нашёл световой меч, а так как здесь никого больше нет, то скорее всего он принадлежал тебе.\") or (b[4]==1 and \"На самом деле, это довольно сложная история. Мой учитель рассказывал, что когда-то давно сюда должны были прилететь другие джедаи, но он не был уверен, что они смогли добраться успешно. Потом я увидел внутри храма следы, ведущие в направлении этой комнаты. А уже здесь я заметил на стенах отметины, какие оставляет световой меч во время боя. И я думаю, что ты одна из тех джедаев.\") or (b[5]== 1 and \"Я чувствую, что сквозь тебя струится Сила. Очень слабо, почти неуловимо. Будто ты сама не знаешь о ней или пытаешься скрыть.\") or \"<s>\n>> internal quest error! Please contact the author.\"\n      if b[4]==1 then\n        g.achievements = g.achievements or {}\n        g.achievements.detective = g.achievements.detective or 0\n\n        g.achievements.alarm = g.achievements.detective == 0 and 7 or 0\n        g.achievements.detective = 1\n      end\n  else\n    text = \"На самом деле, я мог бы назвать сразу несколько причин. Но самая убедительная из них – это \" ..  ((b[1]==1 and \"рассказ одного дроида, которого я нашёл здесь.\") or (b[2]==1 and \"аудиозапись, которую я нашёл здесь. В ней упоминается девушка-джедай.\") or (b[3]==1 and \"световой меч, который я нашёл здесь. Так как тут больше никого нет, то скорее всего клинок принадлежал тебе.\") or \"<s>\n<s>\n>> Quest error #161! Please, contact the author.<s>\n\")\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 161,
        "text": "Реакция Дессвиар",
        "lua_text": "function lua_text()\nlocal text = \"\"\ndess = dess or {}\n      text = (dess.reaction == 1 and \"<s>\n   Дессвиар молчала, глядя отсутствующим взглядом куда-то сквозь Орнаса. Её лицо не отражало никаких эмоций и словно обмякло, а руки безвольно свисали по бокам. Юноша испуганно сделал шаг вперёд, но Десс лишь отстранилась от него и опустилась прямо на пол.\") \n      or (dess.reaction == 2 and \"<s>\n   Дессвиар молчала, непонимающе глядя на Орнаса. Её губы сжались, а руки напряженно и неестественно вцепились в отвороты плаща у груди. Юноша встревожился. Но Десс продолжала неподвижно стоять на месте, только закрыла глаза и сделала несколько глубоких вдохов и выдохов.\")\n      or (dess.reaction == 3 and \"<s>\n   Дессвиар молчала. Её взгляд хаотично прыгал по комнате, не останавливаясь ни на чём дольше нескольких секунд, а пальцы обеих рук сплелись в единый клубок. Юноша насторожился. Десс дёрнулась на месте, будто хотела сделать шаг, но передумала в последний момент, и лишь неуклюже качнулась вперёд.\") or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 161,
        "calculate": true,
        "text": "Запуск рандома\nАпатия (всё пофиг) –приободрить\n\n• молчать <plus>1\n• утешить -1\n• приободрить <plus>5\n• обещать помощь <plus>1\n• успокоить -3\n• дать совет <plus>1\n• высказать недоверие - 5\n\nНапряжённость (на пределе терпения) – успокоить\n\n• молчать -1\n• утешить <plus>1\n• приободрить <plus>3\n• обещать помощь -1\n• успокоить <plus>5\n• дать совет -5\n• высказать недоверие - 5\n\nСмятение (как будет лучше?) – дать совет\n\n• молчать -5\n• утешить -1\n• приободрить <plus>1\n• обещать помощь <plus>3\n• успокоить -3\n• дать совет <plus>5\n• высказать недоверие - 5",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.reaction = math.random(1,3)\n--1 - апатия\n--2 - напряжённость\n--3 - смятение\nend"
      },
      {
        "id": 161,
        "text": "Утешить",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 2 -- утешить\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      },
      {
        "id": 161,
        "text": "Приободрить",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 3 -- приободрить\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      },
      {
        "id": 161,
        "text": "Обещать помощь",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 4 -- обещать помощь\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      },
      {
        "id": 161,
        "text": "Успокоить",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 5 -- успокоить\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      },
      {
        "id": 161,
        "text": "Дать совет",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 6 -- дать совет\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      },
      {
        "id": 161,
        "text": "Молчать",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 1 -- молчать\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      },
      {
        "id": 161,
        "text": "Высказать недоверие",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.action = 7 -- высказать недоверие\ndess.reaction = dess.reaction or 1\nlocal a = 118 <plus> dess.reaction \nshowPage{id = a}\nend",
        "no_transition": true
      }
    ]
  },
  {
    "id": 162,
    "text": "   Здесь отображены наиболее значимые промежуточные результаты, полученные при исследовании нижнего этажа храма.<s>r\n<s>r\n",
    "answers": [
      {
        "super_calculate": false,
        "id": 156,
        "text": "Промежуточные итоги",
        "calculate": true,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nmaster = master or {}\nmaster.position = master.position or 0\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\n-- TL3.position == \"at the stairs\" -- Орнас с переводчиком, дроид готов помогать\nend\n-- dess.isUpstairs == 1 - Десс готова помогать\n-- dess.trust > 12 - высокое доверие, dess.trust < 3 - заметно низкое доверие\n-- master.position == 156 - учитель готов помогать"
      },
      {
        "lua_if": "function lua_if()\n-- Посещение этой страницы — условие достижения \"помощь в тестировании\", открывающего любой стиль на выбор перед первым прохождением.\nreturn true\nend",
        "super_calculate": false,
        "id": 162,
        "calculate": true,
        "text": "Технический ответ"
      },
      {
        "id": 162,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\narraysTL = arraysTL or {}\narraysTL.TL = arraysTL.TL or 0\narraysTL.Dess = arraysTL.Dess or 0\nTL3 = TL3 or {}\nTL3.repairProgress = TL3.repairProgress or 0\nTL3.position = TL3.position or \"\"\nmaster = master or {}\nmaster.position = master.position or 0\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\ndess.trait = dess.trait or 0\nornasStat = ornasStat or {}\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\nforce_ab = force_ab or 0\nbracer = bracer or 0\nstyle = style or 1\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = middleRoom.result or 0 --middleRoom.result == 1 - победа, 2 - бегство, 3 - поражение\nfire223 = fire223 or 0\nmiddleRoom = middleRoom or {}\nmiddleRoom.puzzle = middleRoom.puzzle or 0\nkey_on_position_1_avail = key_on_position_1_avail or 1\nkey_on_position_2_avail = key_on_position_2_avail or 1\nkey_on_position_3_avail = key_on_position_3_avail or 1\nkey_on_position_4_avail = key_on_position_4_avail or 1\nkey_on_position_5_avail = key_on_position_5_avail or 1\nkey_on_position_6_avail = key_on_position_6_avail or 1\nlocal key = 6 - (key_on_position_1_avail <plus> key_on_position_2_avail <plus> key_on_position_3_avail <plus> key_on_position_4_avail <plus> key_on_position_5_avail <plus> key_on_position_6_avail)\nbang229 = bang229 or 0\nlocation1 = location1 or {}\nlocation1.bitenArms = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nlocal bites = location1.bitenLegs <plus> location1.bitenArms\n\n-- инфа по спутникам \"Спутник решил присоединиться к Орнасу\" или \"Спутник решил присоединиться к Орнасу, но был уничтожен\" или \"Спутник решил присоединиться к Орнасу, но доверие под вопросом\"\n\ntext = arraysTL.TL == 10 and TL3.position == \"at the stairs\" and \"• Астродроид TL-3 решил присоединиться к Орнасу •<s>\n<s>\n\" or \"\"\ntext = text .. (arraysTL.TL == 10 and TL3.position == \"destroyed\" and \"• Астродроид TL-3 решил присоединиться к Орнасу, но был уничтожен •<s>\n<s>\n\" or \"\")\ntext = text .. (arraysTL.Dess == 10 and \"• Астродроид TL-3 помог Орнасу понять поведение Десвиар •<s>\n<s>\n\" or \"\")\ntext = text .. (key_on_position_4_avail == 0 and \"• Астродроид TL-3 помог Орнасу найти один из таинственных ключей •<s>\n<s>\n\" or \"\")\ntext = text .. (master.position == 156 and \"• Наставник Орнаса решил помочь ему в исследовании •<s>\n<s>\n\" or \"\")\ntext = text .. (dess.isUpstairs == 1 and dess.trust > 4 and \"• Десвиар присоединилась к Орнасу •<s>\n<s>\n\" or \"\")\ntext = text .. (dess.isUpstairs == 1 and dess.trust < 5 and \"• Десвиар присоединилась к Орнасу, но, кажется, не доверяет ему •<s>\n<s>\n\" or \"\")\n\n-- инфа по состоянию Орнаса: травмы, свет<s><s>тьма, суперспособности\ntext = text .. (ornasStat.bloodedLeg ==0 and ornasStat.firedArm == 0 and bites == 0 and \"• Юноша преодолел все трудности, не получив серьёзных травм •<s>\n<s>\n\" or \"\")\ntext = text .. (ornasStat.bloodedLeg == 1 and \"• Юноша был ранен в сражении: неглубокая рана на ноге •<s>\n<s>\n\" or \"\")\ntext = text .. (ornasStat.firedArm == 1 and \"• Юноша был ранен в сражении: опалённое выстрелом плечо •<s>\n<s>\n\" or \"\")\ntext = text .. (bites ~= 0 and \"• Юноша был ранен в сражении: парализующие укусы •<s>\n<s>\n\" or \"\")\ntext = text .. (ornasStat.darkside > 0 and \"• Поступки и воспоминания джедая наполнили его сознание тьмой •<s>\n<s>\n\" or \"\")\ntext = text .. (ornasStat.darkside < 0 and \"• Поступки и воспоминания джедая укрепили в его сознании стремление к свету •<s>\n<s>\n\" or \"\")\ntext = text .. (force_ab == 3 and \"• Орнас вспомнил о своих способностях тёмной стороны: молнии Силы •<s>\n<s>\n\" or \"\")\ntext = text .. (force_ab == 1 and \"• Орнас вспомнил о своих способностях тёмной стороны: подчинение разума •<s>\n<s>\n\" or \"\")\ntext = text .. (force_ab == 2 and \"• Орнас вспомнил о своих способностях тёмной стороны: ярость Силы •<s>\n<s>\n\" or \"\")\ntext = text .. (bracer == 1 and \"• Орнас завладел уникальным артефактом: наручи из кортозиса •<s>\n<s>\n\" or \"\")\ntext = text .. (style == 6 and \"• Орнас потерял себя и забыл всё, что отличало его от других джедаев •<s>\n<s>\n\" or \"\")\n\n-- инфа по сражению с терентатеком (если видел)\ntext = text .. (middleRoom.result == 1 and fire223 ~= 1 and \"• Орнас одолел в бою могучего терентатека •<s>\n<s>\n\" or \"\") --добавить условие, что пушка не стреляла <plus>\ntext = text .. (middleRoom.result == 2 and \"• Орнас сумел пережить встречу с могучим терентатеком •<s>\n<s>\n\" or \"\")\ntext = text .. (middleRoom.result == 3 and \"• Орнас не стал вступать в бой с терентатеком после тревожных видений •<s>\n<s>\n\" or \"\")\ntext = text .. (fire223 == 1 and \"• Орнас одолел терентатека хитростью: с помощью корабельных орудий •<s>\n<s>\n\" or \"\")\n\n-- инфа по головоломке в центре и ключам (если видел/есть)\ntext = text .. (middleRoom.puzzle == 2 and \"• Орнас разгадал тайну механизма в центральном зале •<s>\n<s>\n\" or \"\")\ntext = text .. (middleRoom.puzzle == 1 and \"• Орнас не смог разгадать тайну механизма в центральном зале •<s>\n<s>\n\" or \"\")\ntext = text .. (middleRoom.puzzle == 0 and key ~= 0 and \"• Орнас не смог найти применение таинственным ключам •<s>\n<s>\n\" or \"\")\ntext = text .. ((fire223 == 1 or middleRoom.useAdvantage == 1) and \"• Орнас сумел разобраться в принципе действия энергетических блоков и использовать это в своих целях •<s>\n<s>\n\" or \"\")\n\n-- инфа по фейлам (дроид сломался, Десс обманула, корабль взорвался, вместо бонусов потерял память)\ntext = text .. (dess.trait == 1 and \"• Девушка, которую Орнас освободил из камеры, напала на него и скрылась •<s>\n<s>\n\" or \"\")\ntext = text .. (TL3.repairProgress == 1 and \"• Орнасу не удалось успешно завершить ремонт найденного астродроида •<s>\n<s>\n\" or \"\")\ntext = text .. (bang229 == 1 and \"• Орнасу не удалось вскрыть сейф, в результате чего весь корабль оказался уничтожен взрывом •<s>\n\" or \"\")\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 156,
        "text": "Назад"
      },
      {
        "id": 162,
        "text": "На первую страницу",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.fails = master.fails or 0\n\n  if master.fails == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.student = g.achievements.student or 0\n\n    g.achievements.alarm = g.achievements.student == 0 and 17 or 0\n    g.achievements.student = 1\n  end\n\nplasmogrenade192 = plasmogrenade192 or 0\nopened235 = opened235 or 0\n  if plasmogrenade192 == 1 and opened235 == 0 then\n    g.achievements = g.achievements or {}\n    g.achievements.rashDecision2 = g.achievements.rashDecision2 or 0\n\n    g.achievements.alarm = g.achievements.rashDecision2 == 0 and -27 or 0\n    g.achievements.rashDecision2 = 1\n  end\n\n\nfire223 = fire223 or 0\nvars[\"292sup\"] = vars[\"292sup\"] or 0\ng.achievements = g.achievements or {}\nachievements.centralMechSeen = achievements.centralMechSeen or 0\ng.achievements.rashDecision3 = g.achievements.rashDecision3 or 0\n achievements = achievements or {}\nif fire223 == 1 and achievements.centralMechSeen == 1 and vars[\"292sup\"] == 0 then\n  g.achievements.alarm = g.achievements.rashDecision3 == 0 and -28 or 0\n  g.achievements.rashDecision3 = 1\nend\n\nTL3 = TL3 or {}\nTL3.repairProgress = TL3.repairProgress or 0\ng.achievements = g.achievements or {}\ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0\nif TL3.repairProgress == 1 then\n  g.achievements.alarm = g.achievements.aboutMechanics == 0 and -21 or 0\n  g.achievements.aboutMechanics = 1\nend\n\ndelayedExit = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nif delayedExit == 1 then\nshowPage{id = 1}\nend\nend",
        "calculate": true,
        "text": "delayedExit",
        "id": 162
      }
    ]
  },
  {
    "id": 163,
    "text": "   Странным прибором оказался древний энергетический блок, от которого расходились во все стороны множество силовых кабелей.\n   Рядом с источником питания находился старый астродроид неизвестной Орнасу модели. Он оказался деактивирован, хотя и был подключён к чему-то, что походило на самодельную зарядную станцию, соединённую с энергетическим блоком толстым проводом.",
    "answers": [
      {
        "id": 206,
        "text": "Использовать энергетический блок",
        "need": 163,
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "id": 201,
        "text": "Отойти от прибора"
      }
    ]
  },
  {
    "id": 164,
    "text": "   Орнас быстрым шагом направился к старому джедаю.<s>r\n– Здравствуй, Орнас, – произнёс тот, не оборачиваясь. – Твой учитель пока задерживается, дела Республики, сам понимаешь. Да... Нелегко ему: он самый молодой в Совете, и его взгляд на многие вопросы сильно отличается от того, что считают другие магистры. Будь таких, как он, хотя бы двое...<s>r\n   Мастер замолчал, не договорив. Орнас постоял немного, ожидая, но ничего не происходило.<s>r\n– Мастер Буши, – осмелился нарушить затянувшуюся паузу юноша, – Вы не...<s>r\n– Не знаю ли я, почему мастер Льерсо сам не обучает тебя владению мечом? – перебил его магистр Буши. – Конечно знаю. Всё потому, что самый умелый фехтовальщик в Ордене – это я. Меня даже называют Мастером Меча, хе-хе... Кому, как не мне обучать молодых джедаев этому искусству?",
    "answers": [
      {
        "super_calculate": false,
        "id": 164,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.nameKnown = 1\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) \nend"
      },
      {
        "id": 174,
        "text": "Согласиться",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) -1\nend"
      },
      {
        "id": 175,
        "text": "Возразить",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 1\nend"
      }
    ]
  },
  {
    "id": 165,
    "text": "   Орнас нерешительно направился к группе оживлённо обсуждающих что-то подростков. Как только они заметили его приближение, то сразу перешли на шёпот, послышались смешки.<s>r\n– О, смотрите, кто идёт! Это же тёмный владыка Орнас, – с наигранным испугом прокричал один из группы. – О, пощади нас, владыка! Не обрушь на нас всю мощь тёмной стороны Силы!<s>r\n   Вся компания разразилась громким смехом, оценив ехидные нападки на юношу. Отсмеявшись, они затихли, явно ожидая ответной реакции.",
    "answers": [
      {
        "id": 167,
        "text": "Успокоить",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside - 1\nend"
      },
      {
        "id": 168,
        "text": "Припугнуть ",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 1\nend"
      },
      {
        "id": 169,
        "text": "Подыграть"
      }
    ]
  },
  {
    "id": 166,
    "text": "   Орнас использовал ту связь, что непременно устанавливается между учителем и учеником, чтобы с помощью Силы видеть и слышать то же, что и его наставник.<s>r\n   Его взору предстал большой круглый зал на вершине шпиля Верховного Совета. В зале по кругу были расствлены кресла для двенадцати магистров, заседающих там. Из окон открывался захватывающий вид на бескрайний город, окутанный легкой дымкой.<s>r\n   Кроме учителя Орнаса в зале находился лишь один другой магистр, судя по всему их дискуссия была жаркой и продолжалась уже достаточно долго.<s>r\n– Конечно я считаю, что опыт, приобретённый на заданиях, поможет ему стать сильнее, – наставник явно повторял это уже не в первый раз. – У него больше шансов познать всю полноту Силы в условиях, где на него не ведут травлю.<s>r\n– Травлю? – собеседник не был удивлён. – Не понимаю, что ты имеешь в виду, Астор.<s>r\n– Прекрасно понимаешь. Ты и сам знаешь, что говорят его ровесники.<s>r\n– Да, конечно... Но они ведь ещё просто дети... И это неудивительно, учитывая тот случай, ты сам понимаешь.<s>r\n– Они не просто дети, они джедаи! – наставник Орнаса негодовал. – Вернее, должны быть джедаями. Но они даже не задумываются об этом. Мальчишка скорее склонится ко тьме в этом серпентарии, чем на грани смертельной опасности во время задания!",
    "answers": [
      {
        "id": 176,
        "text": "Слушать дальше"
      }
    ]
  },
  {
    "id": 167,
    "text": "– Вы, кажется, совсем позабыли Кодекс джедаев, – спокойным голосом ответил Орнас. – Ваши слова основаны на эмоциях, разогреваемых ненавистью. Они могут принести лишь к страданиям для других, а это – путь к тёмной стороне. Уделяйте больше времени повторению Кодекса и медитациям, если не хотите остаться в храме лишь уборщиками и обслугой.<s>r\n– Да как ты смеешь? – в голосе обидчика Орнаса чувствовалась нескрываемая неприязнь. – Не тебе учить нас. Даже твой наставник готовится разделаться с тобой, когда ты перейдёшь на сторону зла. Он специально не обучает тебя фехтованию, чтобы легко раздавить в бою.<s>r\n   На этот раз слова достигли цели. Хотя Орнас и был готов к тому, что прозвучит именно это, его кулаки непроизвольно сжались.<s>r\n   Его недруг, довольный произведенным эффектом, вновь загогатал.<s>r\n– Что здесь происходит?! – раздался строгий голос из-за спины юноши. – Орнас, идём.",
    "answers": [
      {
        "id": 170,
        "text": "Обернуться"
      }
    ]
  },
  {
    "id": 168,
    "text": "– Произнеси ещё хоть слово, и ты на самом деле будешь молить меня о пощаде, – голос Орнаса звучал холодно и резко. – Мне не понадобится помощь тёмной стороны, чтобы вас проучить.<s>r\n   Толпа довольно загудела, чувствуя, что юноша достаточно заведён.<s>r\n– Да, все слышали это? – задира был очень доволен. – Дарт Орнас собирается устроить сражение в Храме джедаев! Но как ты будешь сражаться, если учитель не тренерует тебя бою на световых мечах?<s>r\n   Кулаки Орнаса сжались. Ещё мгновение – и оружие окажется в его руках.<s>r\n– Что здесь происходит?! – раздался строгий голос из-за спины юноши. – Орнас, идём.",
    "answers": [
      {
        "id": 170,
        "text": "Обернуться"
      }
    ]
  },
  {
    "id": 169,
    "text": "– Да, трепещите предо мной, жалкое отребье, – наигранно грозными голосом произнёс Орнас. – Не то я обреку вас на вечные страдания.<s>r\n   Некоторые из ребят вновь засмеялись, но остальные выглядели раздосадованно: им явно не понравилось, что юноша не поддался на выпад.<s>r\n– Ты теперь даже не скрываешь, что выбрал тёмную сторону? – продолжил задира. – Неудивительно, что твой учитель даже не занимается с тобой тренировками. Когда ты окончательно отдашься злу, он тебя по стенке размажет!<s>r\n   Орнас знал, что прозвучат именно эти слова, но они всё равно ощутимо задели его. Заметив его сжатые кулаки, компания вновь загоготала.<s>r\n– Что здесь происходит?! – раздался строгий голос из-за спины юноши. – Орнас, идём.",
    "answers": [
      {
        "id": 170,
        "text": "Обернуться"
      }
    ]
  },
  {
    "id": 170,
    "text": "   Орнас оглянулся.<s>r\n   Его наставник, видимо уже завершив свои дела в Совете, стоял теперь прямо за ним. Остальные участники происшествия поспешили разойтись в разные стороны, чтобы с безопасного расстояния следить за развитием событий.<s>r\n– Если ты хочешь быть джедаем, тебе следует тщательнее контролировать свои эмоции, – сухо произнёс учитель, строго глядя в глаза Орнаса: видимо, он тоже увидел сжатые кулаки юноши. – Ты забыл Кодекс джедаев? \"Нет эмоций, есть покой\". Постарайся, чтобы эти слова не были для тебя пустым звуком.<s>r\n   Со всех сторон опять послышались смешки.",
    "answers": [
      {
        "id": 171,
        "text": "Согласиться",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside - 1\nend"
      },
      {
        "id": 172,
        "text": "Возразить",
        "var_add": [
          "darkside",
          1
        ],
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 1\nend"
      }
    ]
  },
  {
    "id": 171,
    "text": "– Да, учитель, – Орнас уже успокоился и осознал, что произошло. – Мне стоит больше времени уделять повторению Кодекса и медитациям.\n– Пожалуй, что так, – голос учителя смягчился. – У тебя будет достаточно времени на это, пока мы будем лететь на следующее задание.\n   Наклонившись к Орнасу, наставник похлопал его по плечу и очень тихо, почти беззвучно произнёс:\n– Никогда не позволяй им вывести тебя из равновесия. Только так ты сможешь остаться победителем, не вступая в сражение по чужим правилам.\n   Джедай выпрямился, и они вместе направились к звездолёту...",
    "answers": [
      {
        "id": 173,
        "text": "Открыть глаза",
        "blackout": false
      }
    ]
  },
  {
    "id": 172,
    "text": "– Но это не моя вина! Вы ведь знаете, что они говорят. Разве так могут поступать джедаи? Разве они не наслаждаются эмоциями, когда унижают меня? – Орнас был разгорячен и уже почти кричал. – Это они не соблюдают Кодекс!<s>r\n– Хватит! – резко оборвал его учитель. – Твои противники не обязаны соблюдать Кодекс и никогда не будут этого делать. Но ты должен. Ты должен быть спокоен. Ты должен не оставить противнику ни единого шанса сломить тебя. Пока я буду на задании, ты останешься в храме и будешь усердно повторять Кодекс и медитировать.<s>r\n   Джедай развернулся и быстро ушёл.<s>r\n   Со всех сторон вновь раздался смех...",
    "answers": [
      {
        "id": 173,
        "text": "Открыть глаза",
        "blackout": false
      }
    ]
  },
  {
    "id": 173,
    "text": "   Орнас прогнал прочь нахлынувшие воспоминания. Прошло не больше года с того момента, и вот он уже почти рыцарь-джедай.\n   Почти.\n   Это слово окончательно вернуло юношу к действительности. Почти. Нужно только справиться с испытаниями. Орнас открыл глаза и вновь увидел стены комнаты, в которой произошла его неожиданная встреча с существом, очень напоминающим змею.",
    "answers": [
      {
        "id": 177,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.lose ~=1 and location1.bitenArms == 0 and location1.bitenLegs == 0\nend",
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend"
      },
      {
        "need_sometimes": true,
        "id": 178,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.lose ~=1 and (location1.bitenArms ~= 0 or location1.bitenLegs ~= 0)\nend",
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn location1.lose ==1\nend",
        "id": 179,
        "text": "Дальше",
        "need_sometimes": true,
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend"
      },
      {
        "super_calculate": false,
        "id": 173,
        "text": ">> Очистка ненужных переменных и выдача достижения",
        "calculate": true,
        "lua_do": "function lua_do()\nlocal k = {1,2,3,4,5,6}\nlocal k1 = math.random(#k)\nkey1form = k[k1] -- для центра\ntable.remove(k,k1)\nlocal k2 = math.random(#k)\nkey2form = k[k2] -- для среднего\ntable.remove(k,k2)\nlocal k3 = math.random(#k)\nkey3form = k[k3] -- для внешнего\ntable.remove(k,k3)\n\nposition = nil\ng.achievements = g.achievements or {}\nlocation1 = location1 or  {}\nlocation1.lose = location1.lose or 0\nlocation1.bitenArms = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nlocation1.saber = location1.activeSaber or 0\n\n  if location1.lose == 0 and (location1.bitenArms <plus> location1.bitenLegs) > 2 then\n   g.achievements.alarm = g.achievements.volitionalEffort == 0 and 2 or 0\n   g.achievements.volitionalEffort = 1\n  end\n\n  if location1.lose == 1 and location1.activeSaber == 1 then\n    g.achievements.alarm = g.achievements.simpleWay == 0 and -19 or 0\n    g.achievements.simpleWay = 1\n  end\nend"
      },
      {
        "id": 173,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ncomplex = complex or {}\ncomplex.tracks = complex.tracks or 0\n  if complex.tracks == 1 then\n    text = \"<s>\n   Ещё раз осмотрев комнату, джедай порадовался, что был аккуратен во время сражения. На пыльном полу помимо свежего непрерывного следа змеи можно было с трудом разглядеть ещё кое-что. Следы ног. Кажется, кто-то побывал здесь относительно недавно, возможно лет тридцать назад, а может и все сто.<s>\n   Две пары следов уходили к двери с правой стороны, но назад, судя по всему, возвращался только один из пришедших.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "contentList": [
          "https://i.ibb.co/VVFmrX9/Lumii-20240509-200304540.png https://i.ibb.co/hRMZ39V/first-room.png https://i.ibb.co/C9WmDRQ/lizard-room.png https://i.ibb.co/xMqd3Rw/tank-room.png https://i.ibb.co/QjB6npX/far-room.png https://i.ibb.co/HVSxZQc/central-room.png https://i.ibb.co/yXxG0Zx/central-room-fire.png https://i.ibb.co/mN0cqFb/ship-room.png https://i.ibb.co/6ZW1Tjf/starfighter.png https://i.ibb.co/wzyvjjM/ship-room-fire.png https://i.ibb.co/wWYBcwr/droid-room.png https://i.ibb.co/Npt79SB/col4.png https://i.ibb.co/zmXcLt1/col1.png https://i.ibb.co/yYQyxYk/col2.png https://i.ibb.co/bKtYxzq/col3.png",
          "map"
        ],
        "super_calculate": false,
        "id": 2,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n--g.instantDownload = 0\nend"
      },
      {
        "contentList": [
          "https://i.ibb.co/bJ7bG3F/image.png https://i.ibb.co/s9M2GdS/1.png https://i.ibb.co/XJYz9Gz/2-1.png https://i.ibb.co/w0KhWHm/3-2.png https://i.ibb.co/hFn57bZ/4-3.png https://i.ibb.co/8jzf6H0/5-4.png https://i.ibb.co/zZN5YqP/image.png https://i.ibb.co/mtHw4Jk/image.png https://i.ibb.co/PwZpbHW/image.png https://i.ibb.co/3m0xb1h/image.png https://i.ibb.co/8YsZ8rv/image.png https://i.ibb.co/vDXMf3s/image.png",
          "energy"
        ],
        "super_calculate": false,
        "id": 2,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend"
      },
      {
        "contentList": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png https://i.ibb.co/YWPjxVZ/are-looking-for.png https://i.ibb.co/StynnYF/lack-of-faith.png https://i.ibb.co/ysDxHSH/no-try.png https://i.ibb.co/86XG8cM/force-be.png https://i.ibb.co/5Y48PTW/my-power.png https://i.ibb.co/ngyjG8k/am-your.png https://i.ibb.co/ZMzQggs/about-this.png https://i.ibb.co/fS30ZQN/power-of.png https://i.ibb.co/d5BLysL/be-sure-but-a.png https://i.ibb.co/kKD5RcV/the-droids-you.png https://i.ibb.co/M73XGPG/disturbing.png https://i.ibb.co/v4jt7h2/there-is.png https://i.ibb.co/QMHBMF0/with-you.png https://i.ibb.co/j506Jk3/underestimate.png https://i.ibb.co/2sMJHny/father.png https://i.ibb.co/WVNMb0m/bad-feeling.png https://i.ibb.co/G7v0LXK/the-dark-side.png https://i.ibb.co/S7wspFX/A-surprise-to.png https://i.ibb.co/fSpCHHQ/These-arent.png https://i.ibb.co/hc3hcbV/I-find-your.png https://i.ibb.co/4THTB6G/do-or-do-not.png https://i.ibb.co/L1sYGn4/may-the.png https://i.ibb.co/kXnMZjf/You.png https://i.ibb.co/LkmcxPR/no-I.png https://i.ibb.co/n6rCrDZ/I-ve-got-a.png https://i.ibb.co/1Qg345m/The-full.png https://i.ibb.co/Y3tWgZL/outline.png",
          "armlets"
        ],
        "super_calculate": false,
        "id": 2,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend"
      }
    ]
  },
  {
    "id": 174,
    "text": "– Да, разумеется Вы правы, магистр, – Орнас был рад, что успел произнести фразу целиком. – Я очень ценю то, что продолжаю тренировки с Вами.<s>r\n– Но тебя всё равно тревожит, что твой наставник якобы не уделяет должного внимания твоему обучению? – старый магистр не слишком заботился о тактичности. – Но разве ты не больше других своих ровесников проводишь времени, изучая Кодекс джедаев и историю Ордена по его наставлению? И разве кто-нибудь из них побывал на стольких заданиях Совета, на скольких побывал ты с учителем? Всё ещё считаешь, что плохо обучает тебя магистр Льерсо?<s>r\n   На плечо Орнаса легла чья-то рука, и он вздрогнул от удивления, вызвав улыбку на лице Мастера Меча.<s>r\n– Магистр Буши, прошу нас извинить, мы с Орнасом скоро отправляемся в путь, – быстро проговорил учитель, увлекая юношу за собой. – Да пребудет с Вами Сила!<s>r\n   Весь путь к звездолёту они преодолели молча.<s>r\n– Тебе стоит больше времени уделять медитациям – сухо заметил наставник, когда их уже никто не мог услышать. – Сила поможет очистить разум от сомнений...",
    "answers": [
      {
        "id": 173,
        "text": "Открыть глаза",
        "blackout": false
      }
    ]
  },
  {
    "id": 175,
    "text": "– Но позвольте, мастер Буши, – Орнасу было неудобно перечить мудрому магистру, – ведь другие падаваны обычно продолжают тренировки со своим учителем. А я...<s>r\n   Юноша не ожидал, что иктотчи позволит ему завершить фразу, не перебив на полуслове, и не нашёл, что ещё сказать. Между тем, старый мастер заметно изменился в лице и даже стал выглядеть серьёзнее. Наконец он, видимо подобрав нужные слова, начал говорить.<s>r\n– Понимаешь, юный Орнас, большинство тех джедаев, что сейчас обучают твоих ровестников, ещё застали старые времена. Они участвовали в сражениях с ситхами, потеряли многих своих знакомых, но выжили сами. Обучая своих падаванов искусству боя, они хотят передать им свой опыт, то, что помогло им победить. Но магистр Льерсо считает, что ты должен стать собой, а не им. Поэтому он и переложил заботы о твоём дальнейшем обучении на мои дряхлые плечи, а ты можешь использовать ту форму и стиль боя, которая подходит тебе, а не то, что нравится твоему учителю.<s>r\n   Неожиданно, чья-то рука легла сзади на плечо Орнаса.<s>r\n– Прошу нас извинить, но нам нужно отправляться на задание, – учитель потянул Орнаса за собой. – Да пребудет с Вами Сила, мастер Буши.<s>r\n   Весь путь к звездолёту они преодолели молча...<s>r",
    "answers": [
      {
        "id": 173,
        "text": "Открыть глаза",
        "blackout": false
      }
    ]
  },
  {
    "id": 176,
    "text": "– В этом-то и дело, магистр Льерсо, – говорящий явно был рад хоть немного сменить тему, – Астор, ты ведь будто нарочно подвергаешь его опасностям, словно надеясь, что Сила сама заберёт его и тебе не придётся больше возиться с этим. Поэтому Совет и не...<s>r\n   Похлопывание по плечу заставило Орнаса отвлечься от происходящего наверху и вновь ощутить себя в муравейнике коридора.<s>r\n   Около него стоял и лукаво улыбался магистр, обучающий его и юнлингов искусству фехтования.<s>r\n– Орнас, мальчик мой, какая неожиданная встреча, – глаза мастера буквально искрились. – Ты, верно, слишком заскучал, ожидая мастера Льерсо?<s>r\n   Орнас молчал.<s>r\n",
    "answers": [
      {
        "super_calculate": false,
        "id": 176,
        "calculate": true,
        "lua_do": "function lua_do()\nstyle = style or 1\nmaster = master or {}\nmaster.nameKnown = 1\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "comment": true,
        "id": 176,
        "text": "– Вижу, что ты не только блестяще владеешь световым мечом, но и очень ловко используешь ментальную связь с учителем в своих целях, ",
        "lua_if": "function lua_if()\nreturn style == 1\nend",
        "merge": true
      },
      {
        "comment": true,
        "id": 176,
        "text": "– Вижу, что твои способности в обращении с Силой действительно велики. Ты весьма ловко используешь ментальную связь с учителем в своих целях, ",
        "lua_if": "function lua_if()\nreturn style == 2\nend",
        "merge": true
      },
      {
        "comment": true,
        "id": 176,
        "text": "– Оказывается, твоя внимательность проявляется даже на таком значительном расстоянии от интересующих тебя явлений, ",
        "lua_if": "function lua_if()\nreturn style == 3\nend",
        "merge": true
      },
      {
        "comment": true,
        "id": 176,
        "text": "– Оказывается, твоя проницательность проявляется даже на таком значительном расстоянии от интересующих тебя явлений. Весьма удобно использовать для этого ментальную связь с учителем, ",
        "lua_if": "function lua_if()\nreturn style == 4\nend",
        "merge": true
      },
      {
        "comment": true,
        "id": 176,
        "text": "– Значит, даже такой убеждённый защитник добра как ты не стесняется использовать ментальную связь с учителем в своих целях, ",
        "lua_if": "function lua_if()\nreturn style == 5\nend",
        "merge": true
      },
      {
        "id": 176,
        "text": "– с хитрой улыбкой проговорил старый джедай. – Не очень-то хорошо подслушивать чужие разговоры, Орнас. Ты же не думаешь, что твой наставник, магистр Высшего Совета джедаев, не почувствовал твоего внимания?\n   Иктотчи ещё раз пристально взглянул на юношу, затем, не дождавшись ответа, развернулся и ушёл, оставив Орнаса дожидаться возвращения учителя...",
        "comment": true,
        "merge": true
      },
      {
        "id": 173,
        "text": "Открыть глаза",
        "blackout": false
      }
    ]
  },
  {
    "id": 177,
    "text": "   Орнас находился в помещении, в котором его не самым гостеприимным образом встретило змееподобное создание.<s>r\n   ",
    "answers": [
      {
        "id": 177,
        "comment": true,
        "super_calculate": false,
        "lua_do": "function lua_do()\npics = pics or {}\npics.a1 = 1\n--g.blockSaves = 1\nlocation1 = location1 or {}\nlocation1.foundTheKey = location1.foundTheKey or 0\nlocation1.kuski = location1.kuski or 1\nif location1.kuski > 1 and location1.kuski ~=11 then\nlocation1.snakeUnion = location1.snakeUnion or 0\nlocation1.snakeUnion = g.previous_id == 194 and (location1.snakeUnion <plus> 1) or location1.snakeUnion\nlocal a = location1.kuski\nsnakeText = nil\nif location1.snakeUnion == 2 then\n  location1.foundTheKey = location1.foundTheKey == 0 and 1 or location1.foundTheKey \n  if location1.kuski == 10 then\n  a = 4\n  snakeText = \"Орнасу показалось, что змей в клетке стало заметно меньше, чем раньше. \"\n  elseif location1.kuski == 4 then\n  a = 2\n  snakeText = \"Орнас заметил, что в клетке остались всего две крупные змеи. \"\n  elseif location1.kuski == 2 then\n  a = 1\n  snakeText = \"К удивлению Орнаса, в клетке находилась всего одна большая змея. \"\n  else\n  a = 1\n  snakeText = nil\n  end\nlocation1.snakeUnion = 0\nend\nlocation1.kuski = a\nend\nend",
        "calculate": true,
        "text": "Воссоединение змей",
        "merge": false
      },
      {
        "comment": true,
        "id": 177,
        "text": "Прямо в центре зала расположился его учитель. Он сидел с закрытыми глазами и медитировал, удерживая световой меч в воздухе перед собой. ",
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.position = master.position or 1\nmaster.fails = master.fails or 0\nreturn master.position == 177\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nlocation1 = location1 or {}\nlocal text = \"\"\n  text = (location1.kuski == 0 and location1.cage == 0 and \"В углу помещения лежала заваленная на бок ржавая клетка. \") or (location1.kuski == 0 and location1.cage == 1 and \"В углу помещения стояла распахнутая ржавая клетка. \") or \"\"\nreturn text\nend",
        "id": 177,
        "text": "Генерация текста",
        "comment": true,
        "merge": true
      },
      {
        "comment": true,
        "id": 177,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = (snakeText or (location1.kuski == 0 and \"Лишь еле заметный глазу слой праха на каменном полу напоминал о змее, наверняка обитавшей здесь не одну сотню лет. \") or  (location1.kuski == 11 and \"Змея, свернувшись кольцами, спокойно лежала в углу помещения около пустой клетки. \") or ( \"В клетке, стоящей в углу комнаты, \" .. ( (location1.kuski == 10 and \"извивались и шипели около десятка маленьких змей. \") or (location1.kuski == 4 and \"извивались и шипели четыре небольшие змеи. \") or (location1.kuski == 2 and \"извивались и шипели две змеи.\") or (location1.kuski == 1 and \"извивалась и шипела запертая змея. \") ) ) )\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn key_on_position_6_avail ~= 0\nend",
        "id": 177,
        "text": "Генерация текста: нахождение ключа",
        "lua_text": "function lua_text()\n-- нужно добавить условия нахождения ключа, если произошло объединение змей, после уничтожения змей (подчёркнуто бессмысленное), добавить в реплику учителя упоминание ключа, плюс аварийная возможность осмотра клетки, если есть все 5 ключей или есть все возможные, а остальные точно зафейлены (после финала с Десс и после выхода из диалога с TL-3), добавить дефолтное описание для location1.foundTheKey == 1 or 2\nlocal text = \"\"\nlocation1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5 -- если ключ взят или окончательно зафейлен, то отнимается единичка, если доходит до нуля, то - алилуйа - находит этот ключ\n    if location1.lastChanceKey == 0 then\n      location1.foundTheKey = 1\n    end\nlocation1.foundTheKey = location1.foundTheKey or 0\n  if location1.foundTheKey == 1 then -- только обратил внимание, первое наблюдение\n    TL3 = TL3 or {}\n    TL3.conditions = TL3.conditions or {}\n    TL3.conditions.seeAnyKey = 1\n    text = \"<s>\n   Присмотревшись внимательнее, Орнас заметил в ржавой клетке какой-то странный металлический предмет. Его увесистая рукоять была замысловато украшена неброским символическим рисунком.\"\n  elseif location1.foundTheKey == 2 then\n    text = \"<s>\n   Внутри клетки лежал едва различимый металлический предмет с неброским украшением на рукояти.\"\n  end\nlocation1.foundTheKey = location1.foundTheKey == 1 and 2 or location1.foundTheKey\nreturn text\nend",
        "merge": true
      },
      {
        "id": 123,
        "text": "Взять странный предмет",
        "lua_if": "function lua_if()\nlocation1 = location1 or {}\nlocation1.foundTheKey = location1.foundTheKey or 0\nreturn location1.foundTheKey ~= 0 and key_on_position_6_avail ~= 0\nend"
      },
      {
        "id": 177,
        "text": " Интуиция подсказывала Орнасу, что осмотр странного предмета стоит пока отложить.",
        "lua_if": "function lua_if()\nkeys = keys or {}\nkeys.conjugate = keys.conjugate or 0\nlocal a = 0\nkeys.TLFail = keys.TLFail or 0\nkeys.dessFail = keys.dessFail or 0\n\n  if keys.conjugate ~= 0 and keys.TLFail ~= 1 and keys.dessFail ~= 1 then\n    a = 1\n  end\n\nlocation = location1 or {}\nlocation1.foundTheKey = location1.foundTheKey or 0\n\nreturn location1.foundTheKey ~= 0 and key_on_position_6_avail ~= 0 and a == 1\n\nend",
        "merge": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_equal": [
          "style",
          3
        ],
        "id": 180,
        "text": "Внимательно осмотреть помещение",
        "need": [
          -184,
          -185,
          -186
        ],
        "need_sometimes": true
      },
      {
        "id": 454,
        "text": "Испепелить змею молниями",
        "lua_text": "function lua_text()\nreturn \"Испепелить \" .. ((location1.kuski == 1 or location1.kuski == 11) and \"змею\" or \"змей\") .. \" молниями\"\nend",
        "lua_if": "function lua_if()\nlocal a = isHistoryContain(454) and master.position == 177 and 1 or 0\nreturn force_ab == 3 and location1.kuski ~= 0 and a == 0\nend"
      },
      {
        "id": 181,
        "middle_answer": true,
        "text": "Подойти к центральной двери",
        "need": -181,
        "var_set": [
          "goto",
          158,
          "gofrom",
          177
        ]
      },
      {
        "right_answer": true,
        "id": 181,
        "text": "Подойти к двери справа от входа",
        "need": -181,
        "var_set": [
          "goto",
          189,
          "gofrom",
          177
        ]
      },
      {
        "var_set": [
          "goto",
          201,
          "gofrom",
          177
        ],
        "id": 181,
        "text": "Подойти к двери слева от входа",
        "need": -181,
        "left_answer": true
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "id": 177,
        "text": "Пройти в дверь по центру",
        "need": [
          181
        ],
        "no_transition": true,
        "right_answer": false,
        "lua_text": "function lua_text()\n\nreturn \"Пройти в дверь по центру\" .. (isHistoryContain (158) and \"<s>\n[В центральный зал с колоннами]\" or \"\") \nend",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = middleRoom.result or 0\nlocal a = middleRoom.result ~=3 and 194 or 93\nshowPage { id = a}\nend",
        "middle_answer": true,
        "var_set": [
          "goto",
          158,
          "gofrom",
          177
        ]
      },
      {
        "right_answer": true,
        "lua_text": "function lua_text()\n\nreturn \"Пройти в дверь справа от входа\" .. (isHistoryContain (189) and \"<s>\n[В угловую комнату с чешуйчатыми созданиями]\" or \"\") \nend",
        "id": 194,
        "text": "Пройти в дверь справа от входа",
        "need": 181,
        "var_set": [
          "goto",
          189,
          "gofrom",
          177
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пройти в дверь слева от входа\" .. (isHistoryContain (201) and \"<s>\n[В захламлённую угловую комнату]\" or \"\") \nend",
        "var_set": [
          "goto",
          201,
          "gofrom",
          177
        ],
        "id": 194,
        "text": "Пройти в дверь слева от входа",
        "need": 181,
        "left_answer": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nadConditions = adConditions or {}\npanel3 = panel3 or 1\ng.blockSaves = g.isAuthor == 1 and 0 or g.blockSaves \nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 177
      }
    ]
  },
  {
    "id": 178,
    "text": "   Орнас сделал глубокий вдох и погрузился в медитацию, чтобы очистить свою кровь от токсина, вызвавшего онемение. Спустя какое-то время он почувствовал, что ничто больше не сковывает его движений. Пришла пора продолжить исследование храма.",
    "answers": [
      {
        "id": 177,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 179,
    "text": "   Юноша не сразу смог понять, что всё ещё жив. Склонившийся над ним наставник занимался исцелением многочисленных ран Орнаса. Как только юноша почувствовал, что может двигаться, он поднялся с холодного пола и вгляделся в обеспокоенные глаза учителя.<s>r\n– Ты чуть не погиб, – строго заметил джедай. – Может быть тебе не стоит продолжать в одиночку?<s>r\n– Нет, я смогу, – твёрдо ответил Орнас. – Я смогу сам.<s>r\n",
    "answers": [
      {
        "id": 177,
        "text": "Дальше"
      },
      {
        "id": 179,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nmaster = master or {}\nmaster.fails = (master.fails or 0) <plus> 1\nmaster.position = 177 -- Мастер в комнате со змеёй\nlocal text = \"\"\n  if master.fails == 1 then\n    text = \"– Тебе следовало действовать осмотрительнее, – сухо продолжил учитель. – Острый ум очень помогает избегать таких ситуаций.<s>\n   Орнас взглянул в суровые глаза старого мастера и виновато опустил взгляд. Сколько раз юноша видел это беспристрастное и холодное выражение лица, сколько раз угрюмо выслушивал строгие нотации. От требуемой кодексом образцовой безэмоциональности наставника Орнасу часто становилось не по себе.<s>\n   Тем временем учитель отошёл от падавана, опустился на колени и погрузился в медитацию.<s>\n– Возможно, тебе будет интересно осмотреть клетку, – не открывая глаз сказал он словно в никуда.\"\n  elseif master.fails == 2 then\n    text = \"– У тебя было столько способов справиться с этим препятствием, но ты выбрал единственный неверный, – иронично констатировал учитель, но лицо его тут же стало серьёзным. – Знаешь, ведь именно для этого джедаи и проходят испытание. Когда юный ум ищет решение проблемы, он не обязательно придёт к лучшему. Но неправильный вариант тоже ценен, ведь он твой собственный, он поможет тебе обрести себя.<s>\n– Или убьёт, – невесело усмехнулся Орнас. – Разве не лучше просто остаться живым?<s>\n– Ты расстраиваешь меня, юный падаван, – серьёзно произнёс мастер. – Как я не могу научить тебя быть тем джедаем, каким по моему представлению ты должен быть, так и ты не можешь стать самим собой, лишь повторяя <s><s>\"правильные<s><s>\"действия за кем-то другим. Ты жив лишь до тех пор, пока делаешь выводы из своих ошибок, а я нужен лишь для того, чтобы помочь тебе в этом.<s>\n   Наставник сдержанно улыбнулся и неспешно отошёл от удивлённого даже этим незначительным проявлением эмоций юноши, после чего опустился на колени и погрузился в медитацию.<s>\n– Возможно, тебе будет интересно осмотреть клетку, – не открывая глаз сказал он словно в никуда.\" \n  else text = \"<s>\n>> text display error!<s>\n\" end\nlocation1 = location1 or {}\nlocation1.foundTheKey = 1\nlocation1.cage = 1\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 180,
    "text": "   Комната была не очень большой, но высокий потолок создавал ощущение простора. На каменном полу, покрытом толстым слоем пыли, тут и там виднелись следы ног и длинные непрерывные полосы, оставленные телом существа. ",
    "answers": [
      {
        "id": 184,
        "text": "Осмотреть стены",
        "need": -184,
        "lua_do": "function lua_do()\nachievements = achievements or {}\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend"
      },
      {
        "id": 185,
        "text": "Осмотреть пол",
        "need": -185,
        "lua_do": "function lua_do()\nachievements = achievements or {}\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend"
      },
      {
        "id": 186,
        "text": "Осмотреть потолок",
        "need": -186,
        "lua_do": "function lua_do()\nachievements = achievements or {}\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\n\nend"
      },
      {
        "id": 177,
        "text": "Назад",
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.foundTheKey = 2\nend"
      },
      {
        "id": 180,
        "text": "\n   Странный блеск внутри ржавой клетки привлёк внимание Орнаса. Стоит изучить её подробнее после осмотра самой комнаты.",
        "lua_if": "function lua_if()\nkeyposition6 = keyposition6 or 0\nif  keyposition6 == 0 and sup180 ~= 1 then\n\nsup180 = 1\nreturn true\nend\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 181,
    "text": "   Орнас подошёл к двери и внимательно изучил её. Теперь, в спокойной обстановке, он смог различить небольшую электронную панель, покрытую толстым слоем пыли и оттого сливающуюся со стеной. Юноша подобрал простую комбинацию, и створки двери медленно расползлись в стороны, пронзив тишину храма дребезгом давно не использовавшихся механизмов.<s>r\n   Готовый ко всему, Орнас сделал несколько шагов вперёд. Как только он оказался по ту сторону, дверь быстро и почти бесшумно захлопнулась.",
    "answers": [
      {
        "id": 181,
        "text": "Дальше",
        "go_to": [
          "goto"
        ]
      }
    ]
  },
  {
    "id": 182,
    "text": "   Сорвав с пояса плазменную гранату, Орнас активировал её и бросил в сторону противника, укрывшись за колонной от взрыва. Огненный шторм поглотил свирепого монстра и слился с устрашающим воплем зверя. Обдало жаром и самого Орнаса.\n   Но уже через дюжину секунд пламя вокруг эпицентра взрыва погасло, а воздух перестал обжигать лёгкие. Повреждения терентатека наверняка были существены, но явно не смертельны. Его сверкающие в полумраке глаза излучали ярость. Казалось, он жаждал наконец расправиться с дерзкой добычей, но никак не мог найти для этого сил.",
    "answers": [
      {
        "id": 55,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 183,
    "text": "   Не успела осесть пыль, как всё помещение сотряс мощный толчок. Маленькие осколки на полу заплясали в неведомом танце, а большие валуны задрожали под действием усиливающейся вибрации. Гул нарастал. Стены заходили ходуном, и последнюю уцелевшую колонну от самого основания до потолка расколола огромная трещина.\n   Ещё секунда, и весь потолок зала начал рушиться: не имея больше надёжной опоры, его конструкция не выдержала собственной массы. Крупные плиты откалывались с оглушительным грохотом, сотрясая весь храм при падении на пол.<s>r\n   Орнас уже не обращал внимания на терентатека, бушующего где-то неподалёку. Он лавировал в хаосе обвала, уклоняясь от одних камней и отталкивая с помощью Силы другие, неуклонно продвигаясь к выходу.\n   До блестящей металлом створки двери оставалось ещё не более десяти шагов, когда очередной камень обрушился прямо перед юношей. Орнас отскочил назад. Путь к выходу оказался отрезан...\n   Теперь юноша беспорядочно метался в поисках спасения.<s>r Не прошло и минуты, когда он окончательно выбился из сил и не сумел увернуться от крупного осколка, ударившего прямо в висок. Силная боль заглушила даже рокот обвала, но Орнас смог услышать неразборчивый голос, насмешливо звучащий, казалось, прямо у него в голове: \"Всего лишь ещё один джедай, который не смог\".<s>r\n   Затем всё стихло.",
    "answers": [
      {
        "id": 92,
        "text": "Это конец?..",
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nhideMap = 0\nend",
        "blackout": true
      }
    ]
  },
  {
    "id": 184,
    "text": "   Стены комнаты были из того же красного материала, что и всё вокруг. Три двери, небольшой лаз и уступ – вот и всё, за что мог зацепиться глаз юноши.",
    "answers": [
      {
        "backstepCount": 1,
        "isBack": true,
        "text": "Дальше",
        "run": [
          180
        ],
        "id": 180
      }
    ]
  },
  {
    "id": 185,
    "text": "   Пол помещения был сделан из того же материала, что и всё вокруг. На пыли, покрывавшей его приличным слоем, Орнас смог прочитать следы, явно появившиеся задолго до его встречи со змеёй.<s>r\n   Судя по всему, побывавших здесь было двое. Обе пары следов вели к двери справа, но обратно к выходу возвращался только один из пришедших.<s>r\n   Кем могли быть эти таинственные посетители? Что скрывается за дверью справа? И что случилось с тем, кто не вернулся назад? Пока в голове джедая было больше вопросов, чем ответов.",
    "answers": [
      {
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 1\nend",
        "isBack": true,
        "super_calculate": false,
        "id": 185,
        "text": "Дальше",
        "calculate": true,
        "backstepCount": 1
      },
      {
        "backstepCount": 1,
        "id": 180,
        "isBack": true,
        "text": "Дальше",
        "run": [
          180
        ],
        "lua_do": "function lua_do()\ncomplex = complex or {}\ncomplex.tracks = 1\nend"
      }
    ]
  },
  {
    "id": 186,
    "text": "   Потолок располагался на достаточно большом расстоянии от пола и представлял из себя несколько рядов блоков, уходящих один за другим вверх, повторяя внешнюю поверхность пирамиды. Сами блоки были ничем не примечательны.",
    "answers": [
      {
        "backstepCount": 1,
        "isBack": true,
        "text": "Дальше",
        "run": [
          180
        ],
        "id": 180
      }
    ]
  },
  {
    "id": 187,
    "text": "   Орнас подошёл к груде хлама, сваленного в самом углу.",
    "answers": [
      {
        "super_calculate": true,
        "id": 2,
        "text": "-- Инициализация функций Луа\nДобавить диалог с выбором сложности",
        "calculate": false,
        "lua_do": "function lua_do()\n\nfunction randW(a, b) -- случайное значение из массива с учётом веса\n  if #a ~= #b then return false end\n\n  local sum = 0\n\n  for _, v in pairs(b) do\n    sum = sum <plus> v\n  end\n\n  local result = math.random() * sum\n\n  sum = 0\n  for k, v in pairs(b) do\n    sum = sum <plus> v\n    if result <= sum then return a[k] end\n  end\n  end\nend"
      },
      {
        "id": 2,
        "calculate": true,
        "lua_do": "function lua_do()\ng.technical = g.technical or {}\ng.blockSaves = 0\n\n  if not g.technical.code then -- установка значений при первом включении\n    g.technical.code = {number = {1, 2, 3, 4, 5, 6, 7, 8, 9}, weight = {10, 10, 10, 10, 10, 10, 10, 10, 10}}\n  end\n\n   if not code_number then\n     code_number = randW(g.technical.code.number, g.technical.code.weight) -- выбор случайного кода\n  g.technical.code.weight[code_number] = g.technical.code.weight[code_number] * 0.1 -- уменьшение веса выбранного кода\n  \n  local a = g.technical.code.weight\n  local b = 0\n  for k, v in pairs(a) do\n    if v ~= a[1] then\n      b = 1\n    end\n  end\n  g.technical.code = b == 1 and g.technical.code or nil -- обнуление таблицы кодов, если все коэффициенты стали равны\nend\n\nend",
        "text": "-- Установка значений технических переменных"
      },
      {
        "var_not": [
          "sup187",
          1
        ],
        "var_add": [
          "arm_sup",
          1
        ],
        "id": 39,
        "text": "first visit",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeArmlets = 1\ncondition = condition or {}\ncondition.findTheArmlet = 1\nend",
        "calculate": true
      },
      {
        "var_not": [
          "code_number",
          3,
          "code_number",
          5,
          "code_number",
          7,
          "code_number",
          9,
          "code_number",
          5
        ],
        "id": 39,
        "text": "count num",
        "calculate": true,
        "var_set": [
          "arm_current",
          3
        ]
      },
      {
        "var_not": [
          "code_number",
          1,
          "code_number",
          2,
          "code_number",
          4,
          "code_number",
          6,
          "code_number",
          8
        ],
        "id": 39,
        "text": "count num",
        "calculate": true,
        "var_set": [
          "arm_current",
          2
        ]
      },
      {
        "var_not": [
          "sup187",
          1
        ],
        "var_equal": [
          "arm_current",
          2
        ],
        "id": 39,
        "text": "first visit count",
        "calculate": true,
        "var_set": [
          "sup187",
          1,
          "arm2seen",
          "arm_sup"
        ]
      },
      {
        "var_not": [
          "sup187",
          1
        ],
        "var_equal": [
          "arm_current",
          3
        ],
        "id": 39,
        "text": "first visit count",
        "calculate": true,
        "var_set": [
          "sup187",
          1,
          "arm3seen",
          "arm_sup"
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 187\nend",
        "var_equal": [
          "style",
          2
        ],
        "id": 187,
        "text": " Юноша использовал Силу, чтобы заставить подняться в воздух каждый предмет и каждую пылинку из кучи. Это позволило ему легко осмотреть всё, что могло предоставлять хоть какой-то интерес.",
        "merge": true
      },
      {
        "var_not": [
          "style",
          2
        ],
        "lua_if": "function lua_if()\nreturn g.current_id == 187\nend",
        "id": 187,
        "text": " Опустившись на колени, юноша начал разбирать руками завал, отбрасывая в сторону камни, проржавевшие металлические предметы и даже чьи-то кости.",
        "merge": true
      },
      {
        "id": 187,
        "text": "\n   Среди мусора джедай обнаружил маленький предмет из необычного тёмного металла – обруч, который мог бы поместиться на запястье. Прикоснувшись к таинственному браслету, Орнас почувствовал, что металл втягивал в себя тепло, оставаясь при этом холодным. Спустя несколько секунд на его гладкой поверхности начали появляться странные символы.",
        "lua_if": "function lua_if()\nlocal a =0\n\nfor i = 1, 3 do\nvars[\"arm\" .. i .. \"seen\"] = vars[\"arm\" .. i .. \"seen\"]  or 0\na = a <plus> (vars[\"arm\" .. i .. \"seen\"]  > 0 and 1 or.0)\nend\n\nreturn g.current_id == 187 and  a < 2\nend",
        "merge": true
      },
      {
        "id": 187,
        "text": "\n   Среди мусора джедай обнаружил ещё один обруч из тёмного металла. Орнас прикоснулся к таинственному браслету и вновь ощутил, как металл втягивал в себя тепло. Спустя несколько секунд на его гладкой поверхности начали появляться символы, похожие на те, что он уже видел до этого.",
        "lua_if": "function lua_if()\nlocal a =0\n\nfor i = 1, 3 do\nvars[\"arm\" .. i .. \"seen\"] = vars[\"arm\" .. i .. \"seen\"]  or 0\na = a <plus> (vars[\"arm\" .. i .. \"seen\"]  > 0 and 1 or.0)\nend\n\nreturn g.current_id == 187 and  a > 1\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "var_equal": [
          "arm2",
          1,
          "arm_current",
          2
        ],
        "id": 187,
        "text": "\n   Немного повозившись, юноша надел браслет на левую руку.",
        "instant": true,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "var_equal": [
          "arm3",
          1,
          "arm_current",
          3
        ],
        "id": 187,
        "text": "\n   Немного повозившись, юноша надел браслет на левую руку.",
        "instant": true,
        "merge": true
      },
      {
        "var_set": [
          "welcome one",
          "welcome one"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          1
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png"
        ]
      },
      {
        "var_set": [
          "are looking for",
          "are looking for"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          2
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/YWPjxVZ/are-looking-for.png"
        ]
      },
      {
        "var_set": [
          "lack of faith",
          "lack of faith"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          3
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ]
      },
      {
        "var_set": [
          "no 'try'",
          "no 'try'"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          4
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/ysDxHSH/no-try.png"
        ]
      },
      {
        "var_set": [
          "force be",
          "force be"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          5
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ]
      },
      {
        "var_set": [
          "my power!",
          "my power!"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          6
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/5Y48PTW/my-power.png"
        ]
      },
      {
        "var_set": [
          "am your",
          "am your"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          7
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ]
      },
      {
        "var_set": [
          "about this",
          "about this"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          8
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/ZMzQggs/about-this.png"
        ]
      },
      {
        "var_set": [
          "power of",
          "power of"
        ],
        "comment": true,
        "var_equal": [
          "code_number",
          9
        ],
        "id": 187,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ]
      },
      {
        "var_not": [
          "arm2",
          1
        ],
        "merge": false,
        "var_equal": [
          "arm_current",
          2
        ],
        "id": 189,
        "text": "Надеть браслет на руку",
        "lua_do": "function lua_do()\nhideArmlet187 = 1\ntakeOnArmlet = 1\n--message(\"Немного повозившись, юноша надел браслет на левую руку\")\nhideMap = 0\nend",
        "var_set": [
          "arm2",
          1
        ]
      },
      {
        "var_not": [
          "arm3",
          1
        ],
        "merge": false,
        "var_equal": [
          "arm_current",
          3
        ],
        "id": 189,
        "text": "Надеть браслет на руку",
        "lua_do": "function lua_do()\nhideArmlet187 = 1\ntakeOnArmlet = 1\n--message(\"Немного повозившись, юноша надел браслет на левую руку\")\nhideMap = 0\nend",
        "var_set": [
          "arm3",
          1
        ]
      },
      {
        "id": 189,
        "text": "Назад",
        "lua_do": "function lua_do()\nhideArmlet187 = hideArmlet187 == 1 and 1 or 2\nhideMap = 0\nend"
      },
      {
        "id": 39,
        "text": "В кабину пилота",
        "need": 1000
      }
    ]
  },
  {
    "id": 188,
    "text": "   Орнас мгновенно оценил обстановку и осторожно подкрался к выбившемуся из сил чудовищу. Он одним рывком увернулся от неуклюжего удара и быстро запрыгнул на покрытую шипами спину огромного зверя.\n   Оказавшись в недосягаемости для длинных лап и крючковатых когтей терентатека, джедай наконец-то мог сосредоточиться для нанесения решающего удара.",
    "answers": [
      {
        "id": 253,
        "text": "Вонзить световой меч в основание шеи терентатека"
      },
      {
        "id": 255,
        "text": "Внимательно осмотреть спину чудовища"
      }
    ]
  },
  {
    "id": 189,
    "text": "empty\nзал с ящерами",
    "answers": [
      {
        "id": 189,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nosm195 = osm195 or 0\nlocal ar = takeOnArmlet == 1 and \"   Немного повозившись, юноша надел браслет на левую руку.<s>\n\" or \"\"\nlocal text = \"\"\nif g.previous_id == 194 or g.previous_id == 181 then\n<s>ttext = \"   Орнас оказался в маленькой комнатке с низким потолком. Свет снаружи никак не проникал сюда, поэтому первое время джедай ничего не мог увидеть.\" .. (osm195 ~=1 and \" Когда его глаза адаптировались к недостатку освещенности, Орнас смог различить очертания небольшого предмета, напоминающего древний энергетический блок.\" or \"\")\nelse\n<s>ttext = \"   Орнас находился в маленькой комнатке с низким потолком. Свет снаружи никак не проникал сюда, но глаза джедая уже привыкли ко мраку\" .. (osm195 ~=1 and \", и он различал в углу очертания предмета, напоминающего древний энергетический блок.\" or \".\" )\nend\npics = pics or {}\npics.a2 = 1\ntakeOnArmlet = nil\nreturn ar .. text\nend",
        "merge": true
      },
      {
        "id": 189,
        "text": " А ещё он заметил несколько пар тускло светящихся в темноте зелёных глаз. Приглядевшись, джедай увидел и зверей, которым эти глаза принадлежали. Чуть больше самого Орнаса, покрытые чешуйчатыми пластинами и ужасными шипами по всему телу, они стояли на задних лапах и как будто оценивали его.\n   Существ было не меньше четырёх, и они явно не излучали дружелюбие.   ",
        "var_not": [
          "fight192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "var_not": [
          "fight192",
          1
        ],
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 1\nend",
        "text": "К бою"
      },
      {
        "lua_if": "function lua_if()\n-- добавить условие отображения, когда Десс поделится секретом\nstyle = style or 1\ndess = dess or {}\ndess.bonus = dess.bonus or 0\nreturn style ~= 5 and dess.bonus == 1\nend",
        "var_equal": [
          "fight192",
          0
        ],
        "id": 190,
        "text": "Поприветствовать существ",
        "lua_do": "function lua_do()\ncreaturesPacified = creaturesPacified or 0\n\ndess = dess or {}\ndess.understanding = 1 -- готов похвастаться перед Десс, после чего разблокирует само \"понимание\"\ncreaturesPacified = 1\nend",
        "var_set": [
          "usm189",
          1,
          "fight192",
          1
        ]
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ],
        "lua_if": "function lua_if()\n-- добавить условие отображения, когда Десс поделится секретом\nstyle = style or 1\ndess = dess or {}\ndess.bonus = dess.bonus or 0\nreturn style == 5\nend",
        "var_equal": [
          "fight192",
          0
        ],
        "id": 190,
        "text": "Поприветствовать существ",
        "lua_do": "function lua_do()\ncreaturesPacified = creaturesPacified or 0\n\ndess = dess or {}\ndess.understanding = 1 -- готов похвастаться перед Десс, после чего разблокирует само \"понимание\"\ncreaturesPacified = 1\nend",
        "var_set": [
          "usm189",
          1,
          "fight192",
          1
        ]
      },
      {
        "id": 48,
        "text": "Использовать Силу для маскировки",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_equal": [
          "fight192",
          0,
          "style",
          3
        ]
      },
      {
        "id": 37,
        "text": "Включить энергетический блок с помощью Силы",
        "var_equal": [
          "fight192",
          0,
          "lov234",
          1
        ],
        "var_set": [
          "lov189",
          1,
          "fight192",
          1,
          "panel2",
          1
        ]
      },
      {
        "id": 189,
        "text": "\n   На соседних стенах комнаты располагались две двери, а в углу между ними была навалена груда хлама.",
        "var_not": [
          "fight192",
          0,
          "plasmogrenade192",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          0,
          "plasmogrenade192",
          1,
          "lov189",
          1
        ],
        "var_equal": [
          "usm189",
          0
        ],
        "id": 195,
        "text": "\n   По центру помещения остались раскиданы останки существ, сражённых юношей.",
        "merge": true
      },
      {
        "id": 189,
        "text": "\n   Неизвестные существа тесно прижимались друг к другу в центре помещения.",
        "var_equal": [
          "usm189",
          1
        ],
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nusm189 = usm189 or 0\nreturn usm189 == 1\nend",
        "var_equal": [
          "force_ab",
          3
        ],
        "id": 316,
        "text": "Атаковать существ молниями",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 4\nachAbsolute = (achAbsolute or 0) <plus> 1\nend",
        "var_set": [
          "fight192",
          1,
          "usm189",
          0
        ]
      },
      {
        "id": 189,
        "text": "\n   Группа неизвестных существ была заперта в ловушке из лучегасителей, отрезавших центральную часть комнаты.",
        "var_equal": [
          "lov189",
          1
        ],
        "merge": true
      },
      {
        "id": 189,
        "text": "\n   Учитель Орнаса облокачивался на стену около одной из дверей и в задумчивости разглаживал пальцами бородку.",
        "lua_if": "function lua_if()\nmaster = master or {}\nmaster.position = master.position or 1\nreturn master.position == 189\nend",
        "merge": true
      },
      {
        "id": 191,
        "text": "Отступить",
        "var_not": [
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "osm195",
          1
        ],
        "var_set": [
          "osm195",
          1
        ],
        "var_equal": [
          "fight192",
          1
        ],
        "id": 199,
        "text": "Осмотреть энергетический блок",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "merge": false
      },
      {
        "id": 199,
        "text": "Использовать панель энергетического блока",
        "var_equal": [
          "osm195",
          1
        ]
      },
      {
        "var_not": [
          "lov189",
          1
        ],
        "var_equal": [
          "panel2",
          1
        ],
        "id": 189,
        "text": "\n   Вся центральная часть комнаты была отделена силовыми полем лучегасителей, мерцающим в полумраке голубоватым сиянием. Невозможно пробраться внутрь него или выбраться наружу, если не отключить питание.",
        "merge": true
      },
      {
        "super_calculate": false,
        "calculate": true,
        "var_equal": [
          "panel2",
          1
        ],
        "id": 189,
        "text": "condition",
        "lua_do": "function lua_do()\nadConditions = adConditions or {}\nadConditions.rayField = 1\nend",
        "merge": false
      },
      {
        "id": 189,
        "text": "\n   Энергетический блок, покрытый толстым слоем пыли, стоял в дальнем от юноши углу. На его корпусе располагалась панель с несколькими переключателями.",
        "var_equal": [
          "osm195",
          1
        ],
        "merge": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_equal": [
          "style",
          3,
          "fight192",
          1
        ],
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(195) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Внимательно осмотреть помещение",
        "need": [
          -195
        ],
        "id": 195
      },
      {
        "var_not": [
          "plasmogrenade192",
          1,
          "hideArmlet187",
          1,
          "hideArmlet187",
          2
        ],
        "var_equal": [
          "fight192",
          1
        ],
        "id": 187,
        "text": "Осмотреть кучу мусора",
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "var_not": [
          "plasmogrenade192",
          1
        ],
        "var_equal": [
          "fight192",
          1,
          "hideArmlet187",
          2
        ],
        "id": 470,
        "text": "Осмотреть найденный браслет",
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "lua_text": "function lua_text()\nreturn \"Пойти вглубь храма\" .. (isHistoryContain(196) and \"<s>\n[В коридор с медицинской капсулой]\" or \"\")\nend",
        "var_equal": [
          "fight192",
          1
        ],
        "id": 194,
        "text": "Пойти вглубь храма",
        "middle_answer": true,
        "var_set": [
          "goto",
          196,
          "gofrom",
          189
        ]
      },
      {
        "var_equal": [
          "fight192",
          1
        ],
        "id": 194,
        "text": "Пойти к выходу из храма\n[В зал с клеткой]",
        "left_answer": true,
        "var_set": [
          "goto",
          177,
          "gofrom",
          189
        ]
      }
    ]
  },
  {
    "id": 190,
    "text": "   Орнас замер на месте и нерешительно произнёс приветствие на общегалактическом языке. Он не был уверен, что существа разумны и способны понять его, однако его слова подействовали на них.\n   Они безмолвно замерли в центре помещения, не приближаясь к джедаю, и не проявляли признаков недружелюбия.<s>r\n   Орнас облегчённо выдохнул:\n– Хвала Силе, а я уже испугался, что придётся с вами драться.\n   Словно убаюканные звуками его слов, звери, плавно покачиваясь, прижались друг к другу и окончательно застыли. Орнас успокоился и перевёл дыхание.",
    "answers": [
      {
        "id": 189,
        "text": "Осмотреть комнату",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside - 3\nend",
        "var_set": [
          "fight189",
          1,
          "usm189",
          1
        ]
      }
    ]
  },
  {
    "id": 191,
    "text": "   Оценив ситуацию, Орнас медленно отступил назад. Не отрывая взгляда от замерших на месте существ, он быстро разобрался с открытием двери и выскользнул из комнаты.",
    "answers": [
      {
        "id": 191,
        "text": "Дальше",
        "go_to": [
          "gofrom"
        ]
      },
      {
        "id": 191,
        "text": "gofrom = g.current_id~=194 and g.previous_id or gofrom\ndess = dess or {}\ndess.trait = dess.trait or 0\n\n  if isHistoryContain(424) then\n    vars[\"gofrom\"] = vars[\"gofrom\"] == 196 and 44 or vars[\"gofrom\"]\n  end\n    timeForDess = (timeForDess or 0) <plus>1\n  if isHistoryContain(45) then\n    vars[\"gofrom\"] = vars[\"gofrom\"] == 44 and 453 or vars[\"gofrom\"]\n  end\n  if dess.trait == 1 then\n    vars[\"gofrom\"] = vars[\"gofrom\"] == 453 and 196 or vars[\"gofrom\"]\n  end\n\nif dess.isUpstairs == 1 then\n  if vars[\"gofrom\"] == 44 or vars[\"gofrom\"] == 453 then \n  vars[\"gofrom\"] = 196\n  end\nend\n",
        "calculate": true,
        "super_calculate": false
      }
    ]
  },
  {
    "id": 192,
    "text": "   В замкнутом пространстве маленькой комнаты почти не было места для манёвров, это обстоятельство несколько ограничивало возможности джедая. ",
    "answers": [
      {
        "var_not": [
          "style",
          1
        ],
        "var_equal": [
          "sword192",
          1
        ],
        "id": 192,
        "calculate": true,
        "text": "добавить рану blooded 1",
        "var_set": [
          "blooded",
          1
        ]
      },
      {
        "var_equal": [
          "iongrenade192",
          1
        ],
        "id": 192,
        "text": "добавить рану blooded 1",
        "calculate": true,
        "var_set": [
          "blooded",
          1
        ]
      },
      {
        "id": 192,
        "text": "\n   В одно мгновение рукоять светового меча оказалась в ладони Орнаса, а свет клинка озарил помещение.",
        "merge": true,
        "var_equal": [
          "sword192",
          1
        ]
      },
      {
        "id": 192,
        "text": " Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.",
        "var_equal": [
          "sword192",
          1,
          "helmet",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": " Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.",
        "merge": true,
        "var_equal": [
          "helmet",
          1,
          "iongrenade192",
          1
        ]
      },
      {
        "id": 192,
        "text": " Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.",
        "var_equal": [
          "helmet",
          1,
          "criogrenade192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": " Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.",
        "merge": true,
        "var_equal": [
          "helmet",
          1,
          "plasmogrenade192",
          1
        ]
      },
      {
        "id": 192,
        "text": "\n   Ежедневные многочасовые тренировки отточили навыки и рефлексы Орнаса до автоматизма. Заняв оборонительную стойку, он превратил недостаток пространства в своё преимущество: численное превосходство противников не имело значения из-за невозможности окружить его и напасть одновременно.\n   Схватка продолжалась недолго, существа ничего не могли противопоставить джедаю и его смертоносному оружию. Без труда разделавшись со всеми врагами, Орнас деактивировал клинок и убрал рукоять на пояс.",
        "merge": true,
        "var_equal": [
          "style",
          1,
          "sword192",
          1
        ]
      },
      {
        "var_not": [
          "style",
          1
        ],
        "var_equal": [
          "sword192",
          1
        ],
        "id": 192,
        "text": "\n   Вспомнив свои тренировки, Орнас быстро сократил дистанцию для атаки. Двух противников он сразил ещё до того, как они успели понять, что происходит.\n   Смелый манёвр юноши позволил оставшимся существам окружить его. Взмах мечом, уворот, ещё удар. Слишком просто. Но вдруг – ай! Когтистая лапа полоснула по бедру. Из глубоких порезов засочилась кровь.\n   Несмотря на боль и кровоточащую рану, Орнас расправился с оставшимися противниками и спрятал оружие на пояс.",
        "merge": true
      },
      {
        "id": 192,
        "text": "\n   Быстро сорвав с пояса ионную гранату, Орнас активировал её и бросил в сторону противников. Уже через мгновение она взорвалась в центре помещения, но не причинила никакого вреда живым существам. Воспользовавшись заминкой юноши, враги успели окружить его и даже сумели нанести размашистый удар когтями по бедру.\n   Несмотря на кроваточащую рану, джедай активировал клинок светового меча и вступил в схватку с монстрами. Один за другим его противники падали, сражённые смертоносным оружием, не способные больше оказывать сопротивление.\n   Закончив сражение, Орнас убрал рукоять меча на пояс и перевёл дыхание.",
        "merge": true,
        "var_equal": [
          "iongrenade192",
          1
        ]
      },
      {
        "id": 192,
        "text": "\n   Быстро сорвав с пояса плазменную гранату, Орнас активировал её и бросил в сторону противников. Уже через мгновение она взорвалась в центре помещения, охватив всё пространство вокруг испепеляющим жаром. Орнас едва успел задержать дыхание и укрыться Силой от волны пламени, сжигающего всё на своём пути.\n   Когда раскалённый воздух комнаты наконец остыл, Орнас расслабился и перевёл дыхание.",
        "var_equal": [
          "plasmogrenade192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": "\n   Быстро сорвав с пояса криогенную гранату, Орнас активировал её и бросил в сторону противников. Уже через мгновение она взорвалась в центре помещения, окутав всё пространство вокруг чудовищным холодом. Находящиеся в эпицентре взрыва существа мгновенно оказались скованы ледяной ловушкой, не в силах даже пошевелиться.\n   Не теряя времени, джедай мгновенно сократил дистанцию и активировал световой меч. Без труда расправившись с обездвиженными противниками, Орнас погасил меч и убрал рукоять на пояс.",
        "merge": true,
        "var_equal": [
          "criogrenade192",
          1
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn blooded == 1\nend",
        "id": 213,
        "text": "рана на ноге",
        "calculate": true,
        "lua_do": "function lua_do()\nornasStat.bloodedLeg = 1\nend"
      },
      {
        "id": 113,
        "var_not": [
          "fight192",
          0
        ],
        "lua_if": "function lua_if()\nreturn plasmogrenade192 ~= 1\nend",
        "text": "Осмотреть комнату"
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "lua_if": "function lua_if()\nreturn style == 1\nend",
        "id": 777,
        "instant": false,
        "text": "Использовать меч",
        "var_set": [
          "sword192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "lua_if": "function lua_if()\nreturn style ~= 1\nend",
        "id": 777,
        "instant": false,
        "text": "Использовать меч",
        "var_set": [
          "sword192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "text": "Использовать ионную гранату",
        "var_need": [
          "grenade1",
          1
        ],
        "id": 777,
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "instant": false,
        "var_set": [
          "iongrenade192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "text": "Использовать криогенную гранату",
        "var_need": [
          "grenade3",
          1
        ],
        "id": 777,
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "instant": false,
        "var_set": [
          "criogrenade192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "text": "Использовать плазменную гранату",
        "var_need": [
          "grenade4",
          1
        ],
        "id": 777,
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "instant": false,
        "var_set": [
          "plasmogrenade192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          0,
          "plasmogrenade192",
          1
        ],
        "var_equal": [
          "helmet",
          1
        ],
        "id": 192,
        "text": " Немного отдышавшись, юноша вернулся к тому месту, где он оставил шлем и вновь взял его в руки.",
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          0
        ],
        "var_equal": [
          "helmet",
          1,
          "plasmogrenade192",
          1
        ],
        "id": 192,
        "text": " Немного отдышавшись, он вернулся к тому месту, где оставил шлем. Не смотря на опасения юноши, тот сумел пережить огненную бурю и остаться в целости, хотя и был сейчас раскалён до предела. Джедай дождался, пока металл остынет до приемлемой температуры, и взял его в руки.",
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_equal": [
          "force_ab",
          3
        ],
        "id": 316,
        "text": "Использовать молнии Силы",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 4\nachAbsolute = (achAbsolute or 0) <plus> 1\nend",
        "var_set": [
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_equal": [
          "force_ab",
          1
        ],
        "id": 317,
        "text": "Использовать контроль разума",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 5\nend",
        "var_set": [
          "fight192",
          1
        ]
      },
      {
        "id": 113,
        "text": "Осмотреть комнату",
        "lua_if": "function lua_if()\nreturn plasmogrenade192 == 1\nend"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\nforce_ab = 3\ngrenade3 = 1\ngrenade1 = 1\ngrenade = 2\nend",
        "text": "Демонстрация",
        "need": 1000,
        "id": 192
      },
      {
        "super_calculate": false,
        "id": 192,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.killAnimals = 1\nend"
      }
    ]
  },
  {
    "id": 193,
    "text": "  • Квест находится в раннем доступе, автор будет признателен за отзывы и сообщения об ошибках.<s>r\n<s>r\n  • На данный момент квест не завершён, для прохождения открыт весь первый этаж храма.<s>r\n<s>r\n  • Доступ к списку достижений и карте осуществляется через правое боковое меню.<s>r\n<s>r\n  • Автор выражает искреннюю признательность Александре Юрчевской и Алексею Багаутдинову за помощь в тестировании.<s>r\n<s>r\n   Приятного чтения!",
    "answers": [
      {
        "id": 1,
        "text": "Назад"
      },
      {
        "id": 193,
        "text": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comment": true
      },
      {
        "id": 582,
        "text": "[Служебный вход]"
      }
    ]
  },
  {
    "id": 194,
    "text": "   ",
    "answers": [
      {
        "id": 194,
        "text": "Дальше",
        "go_to": [
          "goto"
        ]
      },
      {
        "id": 194,
        "calculate": true,
        "text": "Нормальные условия)",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.delayedDestroy = TL3.delayedDestroy or 0\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nmaster = master or {}\nmaster.position = master.position or 1\n\ngofrom = g.current_id~=194 and g.previous_id or gofrom\ndess = dess or {}\ndess.trait = dess.trait or 0\nif arm157 == 1 then\n  arm157 = 0\n  boy157 = 0\nend\nif mask157 == 1 then\n  mask157 = 0\n  droids157disabled = 0\n  boy157 = 0\nend\nnoarm = ( (arm1 == 1 or arm2 == 1 or arm3 == 1) and 0) or 1\n  if isHistoryContain(424) then\n    vars[\"goto\"] = vars[\"goto\"] == 196 and 44 or vars[\"goto\"]\n  end\n    timeForDess = (timeForDess or 0) <plus>1\n  if isHistoryContain(45) then\n    vars[\"goto\"] = vars[\"goto\"] == 44 and 453 or vars[\"goto\"]\n  end\n  if dess.trait == 1 then\n    vars[\"goto\"] = vars[\"goto\"] == 453 and 196 or vars[\"goto\"]\n  end\n\n  if TL3.delayedDestroy == 1 and dess.isUpstairs == 1 and master.position ~= 155 and master.position ~= 156 then -- Десс и дроид встретились без свидетелей\n    TL3.position = \"destroyed\"\n    TL3.destroyEvent = 1\n    TL3.delayedDestroy = 0\n  end\n\nif dess.isUpstairs == 1 then\n  if vars[\"goto\"] == 44 or vars[\"goto\"] == 453 then \n  vars[\"goto\"] = 196\n  end\nend\n\nend"
      },
      {
        "lua_text": "function lua_text()\nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\nlocal text =  ({\"Открыв дверь, Орнас прошёл в следующее помещение. \", \"Орнас открыл дверь и прошёл в другую комнату. \", \"Орнас без проблем открыл дверь и прошёл в помещение за ней. \", \"Легко справившись с дверью, Орнас переместился в следующую комнату. \", \"Немного повозившись с дверью, Орнас прошёл дальше. \"})[math.random(5)]\n-- сделать рандомно\ntext = (location1.bitenArms > 0 or location1.bitenLegs > 0) and (text .. \"Хотя юноша и справился с действием змеиного яда, места укусов всё ещё ощутимо болели. \") or text\ntext = (ornasStat.bloodedLeg == 1 and (text .. \"Рана на бедре, полученная в бою с чешуйчатыми созданиями, напоминала о себе при каждом шаге, хотя и не была очень серьёзной. \")) or text\ntext = ornasStat.firedArm == 1 and ( text .. \"Плечо, обожженное бластерным выстрелом, доставляло джедаю некоторый дискомфорт, напоминая о себе при движениях. \") or text\ntext = ornasStat.darkside < 0 and (text .. \"Джедай ощущал удивительное спокойствие. \") or text\ntext = ornasStat.darkside > 0 and ornasStat.darkside < 4 and (text .. \"Пережитое в храме оставило свой отпечаток на восприятии джедая, и сейчас он чувствовал себя немного раздражённо. \") or text\ntext = ornasStat.darkside > 3 and ornasStat.darkside < 8 and (text .. \"Действия и воспоминания джедая отразились на его эмоциональном состоянии, и сейчас он ощущал необъяснимую злость. \") or text\ntext = ornasStat.darkside > 7 and (text .. \"Мысли и поступки джедая захлёстывали его душу тьмой, он был полностью охвачен искрящейся яростью, и ничего не мог с этим поделать. \")  or text\nreturn text\nend",
        "id": 194,
        "text": "Генерация текста",
        "calculate": false,
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nfor i = 1, 6 do\n  vars[\"key_on_position_\" .. i .. \"_avail\"] = vars[\"key_on_position_\" .. i .. \"_avail\"] or 1\nend\n\nlocal aa = 0\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\nlocal lightsaber = lightsaber == 1 and 1 or 0\ngrenade = grenade1 <plus> grenade3 <plus> grenade4\n\nlocal tab = {}\ntab.textForm = {{\"ионная граната\", \"две ионные гранаты\", [3] = \"ионная\"},{\"криогенная граната\", \"две криогенные гранаты\", [3] =\"криогенная\"}, {\"плазменная граната\", \"две плазменные гранаты\", [3] = \"плазменная\"}, {\"ещё один световой клинок, найденный ранее в сейфе,\", \"ещё один световой клинок, найденный ранее в сейфе\"}, {\"один ключ с символическим рисунком на ручке\", \"два ключа с символическими рисунками на ручках\", \"три ключа с символическими рисунками на ручках\", \"четыре ключа с символическими рисунками на ручках\", \"пять ключей с символическими рисунками на ручках\", \"шесть ключей с символическими рисунками на ручках\", [0] = \"\"}}\n\nfor i = 1, 6 do\n<s>t<s>taa = aa or 0\n    vars[\"have_key_form\" .. i] = vars[\"have_key_form\" .. i] or 0\n    aa = vars[\"have_key_form\" .. i] == 1 and aa <plus> 1 or aa\nend\n\n\ntab.tab = {grenade1, grenade3, grenade4, lightsaber, aa}\n\nif grenade == 2 then\n<s>tif grenade1 ~=2 and grenade3 ~=2 and grenade4 ~=2 then -- две разные гранаты\n<s>t  tab.aType = 2 -- a1 и a2\n<s>telse\n    tab.aType = 1 -- a\n<s>tend\nelse\n  tab.aType = 1\nend\n\ntab.aValue = 6 -- 6 means nothing\ntab.bValue = 6\ntab.cValue = 6\n\n<s>tif tab.aType == 1 then\n<s>t<s>tfor i = 1, 5 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.aValue = i break\n<s>t<s>t<s>telse tab.aValue = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>t<s>tfor i = tab.aValue <plus> 1, 5 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.bValue = i break\n<s>t<s>t<s>telse tab.bValue = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>t<s>tfor i = tab.bValue <plus> 1, 5 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.cValue = i break\n<s>t<s>t<s>telse tab.cValue = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>telse\n<s>t<s>tfor i = 1, 3 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.a1Value = i break\n<s>t<s>t<s>telse tab.a1Value = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>t<s>tfor i = tab.a1Value <plus> 1, 3 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.a2Value = i break\n<s>t<s>t<s>telse tab.a2Value = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>t<s>tfor i = tab.a2Value <plus> 1, 5 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.bValue = i break\n<s>t<s>t<s>telse tab.bValue = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>t<s>tfor i = tab.bValue <plus> 1, 5 do\n<s>t<s>t<s>tif tab.tab[i] ~= 0 then\n<s>t<s>t<s>t<s>ttab.cValue = i break\n<s>t<s>t<s>telse tab.cValue = 6\n<s>t<s>t<s>tend\n<s>t<s>tend\n<s>tend\n\nif tab.aType == 1 then\n<s>tif tab.aValue == 6 then -- на поясе ничего нет\n<s>t<s>ttab.text = \"На поясе юноши была закреплена только рукоять его светового меча. \"\n<s>telseif tab.bValue == 6 then\n<s>t<s>tif tab.aValue == 4 then\n<s>t<s>ttab.text = \"На поясе юноши была закреплена рукоять его светового меча и \" .. tab.textForm[tab.aValue][2] .. \". \"\n<s>t<s>telse\n<s>t<s>ttab.text = \"На поясе юноши была закреплена рукоять его светового меча и \" .. tab.textForm[tab.aValue][tab.tab[tab.aValue]] .. \". \"\n<s>t<s>tend\n<s>telseif tab.cValue == 6 then\n<s>t<s>tif tab.bValue == 4 then\n<s>t<s>ttab.text = \"На поясе юноши была закреплена рукоять его светового меча, \" .. tab.textForm[tab.aValue][tab.tab[tab.aValue]] .. \" и \" .. tab.textForm[tab.bValue][2].. \". \"\n<s>t<s>telse tab.text = \"На поясе юноши была закреплена рукоять его светового меча, \" .. tab.textForm[tab.aValue][tab.tab[tab.aValue]] .. \" и \" .. tab.textForm[tab.bValue][tab.tab[tab.bValue]] .. \". \"\n<s>t<s>tend\n<s>telse \n<s>ttab.text = \"На поясе юноши была закреплена рукоять его светового меча, \" .. tab.textForm[tab.aValue][tab.tab[tab.aValue]] .. \", \" .. tab.textForm[tab.bValue][tab.tab[tab.bValue]] .. \" и \" .. tab.textForm[tab.cValue][tab.tab[tab.cValue]] .. \". \"\n<s>tend\nelse\n    if tab.bValue == 6 then\n        tab.text = \"На поясе юноши была закреплена рукоять его светового меча, а так же \" .. tab.textForm[tab.a1Value][3] .. \" и \" .. tab.textForm[tab.a2Value][3] .. \" гранаты.\"\n    elseif tab.cValue == 6 then\n        if tab.bValue == 4 then\n            tab.text = \"На поясе юноши была закреплена рукоять его светового меча, \" .. tab.textForm[tab.a1Value][3] .. \" и \" .. tab.textForm[tab.a2Value][3] .. \" гранаты, а так же \" .. tab.textForm[tab.bValue][2] .. \". \"\n        else tab.text = \"На поясе юноши была закреплена рукоять его светового меча, \" .. tab.textForm[tab.a1Value][3] .. \" и \" .. tab.textForm[tab.a2Value][3] .. \" гранаты, а так же \" .. tab.textForm[tab.bValue][tab.tab[tab.bValue]] .. \". \"\n        end\n    else tab.text = \"На поясе юноши была закреплена рукоять его светового меча, \" .. tab.textForm[tab.a1Value][3] .. \" и \" .. tab.textForm[tab.a2Value][3] .. \" гранаты, а так же \" .. tab.textForm[tab.bValue][tab.tab[tab.bValue]] .. \" и \" .. tab.textForm[tab.cValue][tab.tab[tab.cValue]] .. \". \"\n    end\nend\n\nfor i = 1,3 do\nvars[\"arm\" .. i] = vars[\"arm\" .. i] or 0\nend\nlocal armlets = (arm1 == 1 and 1 or 0) <plus> (arm2 == 1 and 1 or 0) <plus> (arm3 == 1 and 1 or 0)\nlocal armletText = armlets == 0 and \"\" or\narmlets == 1 and \"На его левой руке болтался браслет из чёрного металла.  \" or\narmlets == 2 and \"На его левой руке позвякивали на каждом шаге два браслета из чёрного металла. \" or\narmlets == 3 and \"Его левую руку обдавали холодом три браслета из чёрного металла.\"\nreturn tab.text .. armletText\nend",
        "calculate": false,
        "id": 194,
        "text": " К его поясу",
        "instant": false,
        "merge": true
      },
      {
        "id": 194,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ntextTab = textTab or {}\nfemale = female or 0\nadConditions = adConditions or {}\nlocal Tab = {}\ncondition =condition or {}\n<s>tcondition.a = isHistoryContain(155) and 1 or 0 -- условие: был в комнате с лестницей\n<s>tcondition.b = isHistoryContain(218) and isHistoryContain(219) and 1 or 0 -- условие: был внутри звездолёта\n<s>tcondition.c = isHistoryContain(158) and 1 or 0 -- условие: был в центральном зале\n<s>tcondition.d = isHistoryContain(189) and 1 or 0 -- условие: был в комнате справа\n<s>tcondition.e = female == 1 and 1 or 0 -- условие: нападение Десс\n<s>tcondition.f = (osm195 == 1 or isHistoryContain(206) or isHistoryContain(204) or isHistoryContain(202) ) and 1 or 0 -- условие: рассмотреть любой энергетический блок\n<s>t--\n<s>tcondition.g = adConditions.fight == 1 and 1 or 0 -- условие: был в любом бою (дроиды, существа, терентатек без поражения) adConditions.fight == 1\n<s>tcondition.h = ornasStat.darkside > 3 and 1 or 0 -- условие: тёмная сторона \n<s>tcondition.i = ornasStat.darkside < -3 and 1 or 0 -- условие: светлая сторона\n<s>tcondition.j = isHistoryContain(163) and 1 or 0 -- условие: видел зарядную станцию \n<s>tcondition.k = isHistoryContain(45) and 1 or 0 -- условие: видел одетую Десс\n<s>tcondition.l = isHistoryContain(36) and 1 or 0 -- условие: рассматривал надпись на входной плите\n<s>tcondition.m = lightsaber == 1 and 1 or 0 -- условие: второй световой меч\n<s>tcondition.n = helmet == 1 and 1 or 0 -- условие: шлем в руках\n<s>t--\n<s>tcondition.o = adConditions.rayField == 1 and 1 or 0 -- условие: видел лучегасители adConditions.rayField == 1\nif not textTab[1] then\ntextTab[1] = {\"Орнас вспомнил странный сон о том, как груша соблазняла банан в нижнем белье, но не мог понять, что бы это могло значить.\", 1}\ntextTab[2] = {\"Орнас вспомнил весёлую историю из жизни магистра Буши и невольно улыбнулся.\", 1}\ntextTab[3] = {\"Орнас порадовался, что нигде в храме нет песка.\", 1}\ntextTab[4] = {\"Орнас устало вздохнул и продолжил путь.\", 1}\ntextTab[5] = {\"Орнас задумался, почему клетка в комнате со змеёй была перевернута.\", 1}\ntextTab[6] = {\"Орнасу стало интересно, существует ли какая-нибудь древняя легенда ситхов о том, кто воздвиг этот храм.\", 1}\ntextTab[7] = {\"Орнас заметил на полу перед собой маленький камушек и пнул его ногой.\", 1}\ntextTab[8] = {\"Орнасу показалось, что на полу перед ним была обрывочная надпись <s><s>\"...орт - это ложь...<s><s>\", но присмотревшись он понял, что это всего лишь полустёртый след чьей-то ноги.\", 1}\ntextTab[9] = {\"Орнас размышлял, какие преимущества в бою может дать позиция на возвышенности.\", 1}\ntextTab[10] = {\"Орнас прислушался, но ничего не услышал.\", 1}\ntextTab[11] = {\"Орнас задумался, чем он станет заниматься, когда получит звание рыцаря-джедая.\", 1}\ntextTab[12] = {\"Орнас вспомнил злую шутку одного из падаванов в свой адрес и нахмурился.\", 1}\ntextTab[13] = {\"Орнас почувствовал что-то едва уловимое, не связанное с его миссией, но решил сосредоточиться на том, что происходит здесь и сейчас.\", 1}\ntextTab[14] = {\"Орнас ощутил нехорошее предчувствие насчёт всего происходящего, но сразу же взял себя в руки.\", 1}\ntextTab[15] = {\"Орнас размышлял о том, как долго могло жить змееподобное существо в таком странном месте.\", 1}\n--\ntextTab[16] = {\"Орнас пытался представить, какие трудности ещё ждут его на верхних этажах храма.\", (condition.a == 1 and 1 or 0)}\ntextTab[17] = {\"Орнас гадал, что могло случиться с экипажем разбившегося звездолёта.\", (condition.b == 1 and 1 or 0)}\ntextTab[18] = {\"Орнас размышлял над тем, как кому-то удалось затащить огромного терентатека внутрь храма.\", (condition.c == 1 and 1 or 0)}\ntextTab[19] = {\"Орнас удивлялся, как живые существа в храме не умерли от голода за столько лет.\", (condition.d == 1 and 1 or 0)}\ntextTab[20] = {\"Орнас размышлял, что заставило девушку, которую он освободил из камеры, напасть на него.\", (condition.e == 1 and 1 or 0)}\ntextTab[21] = {\"Орнас размышлял о загадочной надписи, увиденной им на энергетическом блоке.\", (condition.f == 1 and 1 or 0)}\ntextTab[22] = {\"Орнас анализировал своё недавнее сражение, чтобы понять, мог ли он действовать лучше.\", (condition.g == 1 and 1 or 0)}\ntextTab[23] = {\"На секунду Орнас задумался, тот ли он джедай, каким должен быть.\", (condition.h == 1 and 1 or 0)}\ntextTab[24] = {\"Орнас повторил про себя несколько строчек из Кодекса джедаев и ему стало немного спокойнее.\", (condition.i == 1 and 1 or 0)}\ntextTab[25] = {\"Орнасу было любопытно, как дроиду удалось самому собрать зарядную станцию.\", (condition.j == 1 and 1 or 0)}\ntextTab[26] = {\"Орнас со смущением подумал, что Десс выглядит очень привлекательно. Если бы он не был джедаем...\", (condition.k == 1 and 1 or 0)}\ntextTab[27] = {\"Орнас пытался представить, кто оставил загадочную надпись на входной плите.\", (condition.l == 1 and 1 or 0)}\ntextTab[28] = {\"Орнас задумался, получится ли у него умело сражаться используя сразу два световых клинка.\", (condition.m == 1 and 1 or 0)}\ntextTab[29] = {\"Орнас представил, как бы он выглядел в бою, если бы надел мандалорский шлем.\", (condition.n == 1 and 1 or 0)}\ntextTab[30] = {\"Орнас не мог понять, зачем кому-то понадобилось устанавливать лучегасители в храме.\", (condition.o == 1 and 1 or 0)}\nend\nfor i = 1, 30 do\n<s>tif textTab[i][2] == 1 then\n<s>t<s>tTab[#Tab <plus> 1] = {textTab[i][1], i} -- Tab[i][2] - номер ключа фразы в исходной таблице\n<s>tend\nend\nlocal a = math.random(1,#Tab)\nlocal text = \"<s>\n   \" .. Tab[a][1]\ntextTab[Tab[a][2]][2] = 0\nfor i = 1, 30 do\n<s>tif textTab[i][2] == 1 then break\n<s>telseif i == 30 then\n<s>t<s>ttextTab = {}\n<s>tend\nend\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 195,
    "text": "   Орнас находился в крохотной комнатке, которая явно располагалась в самом углу строения. ",
    "answers": [
      {
        "id": 195,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = \"\"\nplasmogrenade192 = plasmogrenade192 or 0\ntext = plasmogrenade192 ~= 1 and \"В ней не было почти ничего, кроме двух дверей, располагающихся на соседних стенах, древнего энергетического блока в одном углу и кучи хлама – в другом. Весь пол был истоптан чешуйчатыми существами, и среди их характерных трёхпалых следов невозможно было разглядеть хоть что-нибудь ещё. На стенах ничего примечательного джедай не обнаружил, а на потолке располагался источник силового поля лучегасителей, соединённый толстым ворохом проводов с энергетическим блоком.\" or \"После взрыва гранаты в комнате не осталось ничего: только обгоревшие стены, двери с оплавленными панелями и древний энергоблок.\" \nreturn text\nend",
        "merge": true
      },
      {
        "id": 189,
        "text": "Назад"
      }
    ]
  },
  {
    "id": 196,
    "text": "   Джедай ",
    "answers": [
      {
        "id": 196,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = ((g.previous_id == 194 or g.previous_id == 191) and \"оказался\" or \"находился\") .. \" в длинной комнате с тусклыми жёлтыми лампами на стенах. \" .. (gofrom == 189 and \"Дальняя часть была несколько затемнена и оканчивалась ещё одной дверью.\" or \"Дальняя часть была освещена чуть ярче и оканчивалась ещё одной дверью.\")\npics = pics or {}\npics.a3 = 1\nreturn text\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\n\npanel3 = panel3 or 1\n\ncondition =condition or {}\ncondition.seeTheChamber = 1\nadConditions = adConditions or {}\nif adConditions.seenDess ~= 1 then\n  adConditions.seenDess = panel3 ~=1 and 1 or 0\nend\nif adConditions.rayField ~= 1 then\n  adConditions.rayField = panel3 ==1 and 1 or 0\nend\nend",
        "super_calculate": false,
        "id": 196,
        "calculate": true,
        "text": "condition",
        "merge": false
      },
      {
        "id": 196,
        "text": " В ближнем к юноше углу располагалась ",
        "merge": true,
        "var_equal": [
          "gofrom",
          155
        ]
      },
      {
        "id": 196,
        "text": " В дальнем от юноши углу располагалась ",
        "var_equal": [
          "gofrom",
          189
        ],
        "merge": true
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          0
        ],
        "id": 196,
        "text": "заполненная целебной субстанцией-бактой медицинская капсула",
        "merge": true
      },
      {
        "id": 196,
        "text": "медицинская капсула",
        "var_equal": [
          "panel3",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          1
        ],
        "id": 196,
        "text": "пустая медицинская капсула",
        "merge": true
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          0
        ],
        "id": 196,
        "text": ", внутри которой можно было разглядеть очертания человеческой фигуры.",
        "merge": true
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          1
        ],
        "id": 196,
        "text": ".",
        "merge": true
      },
      {
        "id": 196,
        "text": ", отрезанная от остального помещения силовым полем лучегасителей.",
        "var_equal": [
          "panel3",
          1
        ],
        "merge": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "id": 124,
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(124) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Внимательно осмотреть комнату",
        "need": -124,
        "lua_if": "function lua_if()\nreturn style == 3\nend"
      },
      {
        "id": 239,
        "text": "Подойти к капсуле",
        "lua_do": "function lua_do()\ngofrom = 155\nend",
        "merge": false
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пойти вглубь храма\" .. (isHistoryContain (155) and \"<s>\n[В зал с лестницей]\" or \"\") \nend",
        "id": 194,
        "text": "Пойти вглубь храма",
        "middle_answer": true,
        "var_set": [
          "goto",
          155
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пойти к выходу из храма\" .. (isHistoryContain (189) and \"<s>\n[В угловую комнату с чешуйчатыми созданиями]\" or \"\") \nend",
        "middle_answer": true,
        "text": "Пойти к выходу из храма",
        "id": 194,
        "var_set": [
          "goto",
          189,
          "gofrom",
          196
        ]
      }
    ]
  },
  {
    "id": 197,
    "text": "   Техническая страница: авторан афтер.<s>r\n• Он-лайн выдача уведомлений о достижниях.",
    "answers": [
      {
        "id": 537,
        "text": "Ран для боя с НК",
        "run": [
          537
        ],
        "lua_if": "function lua_if()\nalphaTest = alphaTest or 0\nreturn  (g.current_id == 536 or g.current_id == 530 or g.current_id == 543 or g.current_id == 550 or g.current_id == 555 or g.current_id == 560 or g.current_id == 565 or g.current_id == 584)\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn authorHelp and authorHelp == 1 and (g.isAuthor == 1 or g.alphaTest == 1)\nend",
        "id": 581,
        "text": "Кнопки смены штрафов",
        "run": [
          581
        ],
        "lua_do": "function lua_do()\nauthorHelp = authorHelp == 1 and 0 or 1\nend"
      },
      {
        "comment": false,
        "super_calculate": true,
        "lua_do": "function lua_do()\nlocal a = type(compMissionText)\n--message(a)\n\n  g.reloadFunctions = reloadOn and 890 or nil\n\nend",
        "text": "Тест !!",
        "id": 197,
        "calculate": false
      },
      {
        "super_calculate": false,
        "id": 198,
        "calculate": true,
        "widget": [
          "map_widget1",
          "https://i.ibb.co/nfdsYPq/Lumii-20240509-200324333.png",
          "",
          "map_widget2",
          "https://i.ibb.co/VVFmrX9/Lumii-20240509-200304540.png",
          "",
          "map_widget3",
          "https://i.ibb.co/F3wVbDP/Lumii-20240509-200151459.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_if": "function lua_if()\n-- Боковое меню для читателей\nreturn true\nend",
        "super_calculate": false,
        "id": 198,
        "calculate": true,
        "lua_do": "function lua_do()\ndump = \"\"\n\ng[\"lua_tap\" .. \"map_widget2\"] = [[lua_tap = \n   function()\n     g.technical.back = g.current_id\n     showPage{id = 330}\n      \n   end]]\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.a1 = pics.a1 or 0\nhideMap = hideMap or 0\ng.difficulty = g.difficulty or 1\nreturn pics.a1 == 1 and g.current_id ~= 6 and g.current_id ~= 330 and hideMap ~= 1\nend",
        "super_calculate": false,
        "id": 198,
        "text": "Показ виджета карты",
        "widget_show": [
          "map_widget2",
          "dump"
        ],
        "calculate": true
      },
      {
        "lua_if": "function lua_if()\nreturn droidTextFunctionOn\nend",
        "super_calculate": true,
        "lua_do": "function lua_do()\nfunction droidText()\ng.reloadFunctions = nil\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 0\nTL3.dialogParts = TL3.dialogParts <plus> 1\nlocal t = {}\nlocal a = TL3.dialogParts\nt[1] = \n[=[ \n– Ты наверное прослушал те записи из дневника Феникса, когда надевал шлем? – спросил дроид. – И тебя ничего не насторожило?\n– Насторожило?..\n– Ну, не показалось странным, что охотник за наживой ведёт дневник, как какая-нибудь глупышка-принцесса с Альдераана?]=]\n\nt[2] = [=[ \n– То есть дневник – фальшивка? – решил продолжить разговор джедай. – Но зачем?\n– Чтобы какой-нибудь наивный мальчишка был уверен в гибели капитана звездолёта и не пытался раскрутить историю за эту ниточку. Ну или ради шутки. У Феникса было отвратительное чувство юмора, знаешь ли.]=]\nt[3] = [=[ \n– А ты не боишься, – наконец смог сформулировать свои мысли Орнас, – что я всё-таки докопаюсь до настоящей истории твоего хозяина?\n– Боюсь? Я на это рассчитываю.\n– Но почему тогда...\n– Ты сам помог мне разорвать связь с ним, – перебил TL-3. – Я теперь ничего ему не должен. И не обязан помогать скрывать его грязные делишки.\n– А зачем... – вновь попытался спросить джедай.\n– Мне просто интересно, – опять перебил дроид, – ради чего это было затеяно. Что такого он получил, бросив всё, что имел?]=]\nt[4] = [=[ \n– Ты не подумай, – продолжил прерванный диалог TL-3, – Феникс не был ужасным человеком. Хоть и добряком не был, при такой-то работе. Но он был хорошим лидером, команда была для него эффективным инструментом, и он ценил каждого. А тут...\n– Это место меняет людей, – заметил Орнас. – Будоражит эмоции и пробуждает всё самое худшее. Уверен, он бы не поступил так с вами в любой другой ситуации.\n– Этого уже не проверить... – ответил дроид и ненадолго умолк. – Но я видел достаточно, чтобы согласиться. Я не могу испытывать обиду или жажду мести, но всё равно интересно узнать, что с ним случилось. Ненавижу неинформированность...]=]\nt[5] = [=[ \n– А что ты планируешь делать, когда это всё закончится? – попытался продолжить прерванный разговор юноша.\n– Зависит от того, как это всё закончится.\n   TL-3, кажется, исчерпал желание откровенничать и демонстративно ускорился.]=]\nt[6] = [=[ \n   Юноша больше не пытался заговорить со спутником, и в неловком молчании слышалось только мягкое шуршание каких-то деталей дроида.]=]\na = a > #t and #t or a\nreturn t[a]\nend\n\n\nfunction TL3Text(a)\nTL3 = TL3 or 0\nTL3.visits = (TL3.visits or 0) <plus> 1\n\nlocal p1 = TL3.visits == 1 and\n[=[– Пойдём, – позвал Орнас своего спутника, и они вместе направились вперёд по широкому коридору.\n   TL-3 ехал сбоку от джедая, ничуть не заботясь о возможных опасностях. Он даже не замедлял ход, когда юноша останавливался, чтобы проверить очередной подозрительный участок.]=] or\n[=[  Спутники вновь направились по коридору. На этот раз и сам Орнас позабыл о всякой бдительности и просто шагал рядом с бодро катящимся вперёд астромехаником.]=]\nlocal p2 = TL3.visits == 1 and\n[=[ \n   За очередным поворотом коридор наконец-то упирался в аккуратную дверь.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=] or\n[=[ \n   Они добрались до конца коридора, и створки двери открылись, словно приглашая спутников в небольшой тёмный зал.]=]\n\nreturn p1 .. droidText() .. p2\nend\n\nend",
        "text": "Тексты для дроида",
        "id": 197,
        "calculate": false
      },
      {
        "super_calculate": false,
        "id": 197,
        "calculate": true,
        "lua_do": "function lua_do()\n\ngrenade = (grenade1 or 0) <plus> (grenade2 or 0) <plus> (grenade3 or 0) <plus> (grenade4 or 0)\nend",
        "text": "Ран для боя с НК"
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "super_calculate": false,
        "lua_do": "function lua_do()\nalphaTest = g.alphaTest == 1 and 1 or 0\nif g.alphaTest == 1 then\nUpLine = (UpLine == 2 and 2 ) or (UpLine == 3 and 3 ) or 1\nend\nend",
        "text": "Обработка пароля",
        "id": 197,
        "calculate": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nfunction TabLen(a)\nif type(a) == \"table\" then\nlocal s = 0\n  for k in pairs (a) do\n    s = s <plus> 1\n  end\nreturn s\nelse return 0\nend\nend\n\nend",
        "calculate": true,
        "text": "Счёт штрафобонусов для загадки",
        "id": 197
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 197\nend",
        "id": 197,
        "text": "Пробное достижение",
        "comment": false,
        "lua_do": "function lua_do()\ng.achievements.alarm = math.random(1,2)\ng.achievements.alarm = g.achievements.alarm == 1 and 20 or  21\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 197\nend",
        "lua_do": "function lua_do()\ng.difficulty = g.difficulty or 0\ng.difficulty = g.difficulty == 1 and 0 or 1\ng.achievements.alarm = 0\nend",
        "id": 197,
        "text": "Смена сложности",
        "comment": false,
        "lua_text": "function lua_text()\ng.difficulty = g.difficulty or 0\nlocal text = g.difficulty == 0 and \"Выбрать лёгкий уровень сложности<s>\n• Сохранения: доступны <s>\n• Достижения: недоступны\" or \"Выбрать тяжёлый уровень сложности<s>\n• Сохранения: недоступны <s>\n• Достижения: доступны\"\nreturn text\nend"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\nachBlock = achBlock or 0\nachBlock = achBlock == 1 and 0 or 1\nend",
        "text": "Сброс блокировки достижений",
        "lua_if": "function lua_if()\nreturn g.current_id == 197\nend",
        "id": 197
      },
      {
        "id": 6,
        "text": "В меню достижений",
        "lua_if": "function lua_if()\nreturn g.current_id == 197\nend"
      },
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\nif computingIni then\n--g.reloadFunctions = 642\nelse end\nend",
        "text": "Новый ответ. введите текст",
        "id": 197,
        "calculate": false
      },
      {
        "id": 867,
        "text": "Ран для достижений",
        "run": [
          867
        ]
      }
    ]
  },
  {
    "id": 198,
    "text": "   Боковое меню читателя",
    "answers": [
      {
        "super_calculate": false,
        "id": 198,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "widget_show": [
          "map_widget",
          "dump"
        ]
      },
      {
        "comment": false,
        "lua_if": "function lua_if()\npics = pics or {}\npics.a1 = pics.a1 or 0\nhideMap = hideMap or 0\ng.difficulty = g.difficulty or 1\nreturn pics.a1 == 1 and g.current_id ~= 6 and g.current_id ~= 330 and hideMap ~= 1\nend",
        "id": 104,
        "text": "[Карта]",
        "lua_do": "function lua_do()\ng.technical.back = g.current_id\nshowPage{id = 330}\nend",
        "no_transition": true
      },
      {
        "comment": false,
        "lua_if": "function lua_if()\nreturn g.current_id ~= 6 and g.current_id ~= 330\nend",
        "id": 104,
        "text": "[Достижения]",
        "lua_do": "function lua_do()\ng.technical.back = g.current_id\nshowPage{id = 6}\nend",
        "no_transition": true
      },
      {
        "lua_do": "function lua_do()\nauthorHelp = authorHelp == 1 and 0 or 1\nmessage(authorHelp == 1 and \"Теперь доступно отображение и смена состояния во время боя и в любой момент до него ;)<s>\n Доступно ведь?\" or \"Теперь отображение и смена состояния не доступны\")\nshowPage{id = g.current_id}\nend",
        "lua_if": "function lua_if()\ng.alphaTest = g.alphaTest or 0\n--return g.alphaTest == 1 or g.isAuthor == 1\nend",
        "super_calculate": false,
        "id": 104,
        "calculate": false,
        "text": "• Условие: отображение и изменение состояния",
        "no_transition": true
      },
      {
        "id": 198,
        "text": "[Низкий уровень сложности]",
        "comment": true,
        "lua_if": "function lua_if()\ng.difficulty = g.difficulty or 0\nreturn false -- g.difficulty == 0\nend"
      },
      {
        "lua_if": "function lua_if()\ng.difficulty = g.difficulty or 0\nreturn false -- g.difficulty == 1\nend",
        "comment": false,
        "lua_do": "function lua_do()\ng.difficulty = g.difficulty or 0\ng.difficulty = g.difficulty == 1 and 0 or 1\ng.achievements.alarm = 0\nshowPage{id = g.current_id}\nend",
        "text": "[Выбрать низкий уровень сложности]\n• доступны сохранения\n• заблокировано получение достижений ",
        "id": 198,
        "no_transition": true
      },
      {
        "id": 198,
        "text": "[Высокий уровень сложности]",
        "comment": true,
        "lua_if": "function lua_if()\ng.difficulty = g.difficulty or 0\nreturn false -- g.difficulty == 1\nend"
      },
      {
        "lua_if": "function lua_if()\ng.difficulty = g.difficulty or 0\nreturn false -- g.difficulty == 0\nend",
        "comment": false,
        "lua_do": "function lua_do()\ng.difficulty = g.difficulty or 0\ng.difficulty = g.difficulty == 1 and 0 or 1\ng.achievements.alarm = 0\nshowPage{id = g.current_id}\nend",
        "text": "[Выбрать высокий уровень сложности]\n• сохранения недоступны \n• возможно получение достижений ",
        "id": 198,
        "no_transition": true
      },
      {
        "id": 198,
        "text": "\n\n[Во время текущего прохождения был активен низкий уровень сложности, получение достижений заблокировано]",
        "comment": true,
        "lua_if": "function lua_if()\nachBlock = achBlock or 0\nreturn false -- achBlock == 1\nend"
      },
      {
        "lua_if": "function lua_if()\ng.alphaTest = g.alphaTest or 0\nreturn --g.alphaTest == 1 or g.isAuthor == 1\nend",
        "no_transition": true,
        "id": 104,
        "text": "• Условие: доверие Десс",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = dess.trust or 0\n--[=[dess.trust = (dess.trust < -9 and 0) or (dess.trust < 9 and 10) or -10\na_tia_trust = dess.trust\nshowPage{id = g.current_id}\n]=]\n\ndialog ({\nheader = \"Доверие Десс\", text = \"Изменить уровень доверия\",\nanswers = {\n                     {text = \"Обнулить\", pressListener = function ()\ndess.trust = 0\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \" <plus> 5\", pressListener = function ()\ndess.trust = dess.trust <plus> 5\nshowPage{id = g.current_id}\nhideDialog() end},\n\n                     {text = \"-5\", pressListener = function ()\ndess.trust = dess.trust - 5\nshowPage{id = g.current_id}\nhideDialog() end}\n\n}\n  })\n\nend",
        "merge": false
      },
      {
        "comment": false,
        "lua_if": "function lua_if()\ng.alphaTest = g.alphaTest or 0\nreturn -- g.alphaTest == 1 or g.isAuthor == 1\nend",
        "id": 104,
        "text": "• Условие: смена спутников на втором этаже",
        "lua_do": "function lua_do()\nUpLine = UpLine or 1\n\n--[=[  UpLine = UpLine < 8 and UpLine <plus> 1 or 1\n\n]=]\n\ndialog ({\nheader = \"Смена условия\", text = \"Выбор спутников на втором этаже\",\nanswers = {\n                     {text = \"Нет спутников\", pressListener = function ()\nUpLine = 1\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Десс\", pressListener = function ()\nUpLine = 2\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Учитель\", pressListener = function ()\nUpLine = 3\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Дроид\", pressListener = function ()\nUpLine = 4\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Учитель и Десс\", pressListener = function ()\nUpLine = 5\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Учитель и дроид\", pressListener = function ()\nUpLine = 6\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Десс и дроид\", pressListener = function ()\nUpLine = 7\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Все вместе\", pressListener = function ()\nUpLine = 8\nshowPage{id = g.current_id}\nhideDialog() end}\n                    }\n             })\n\n\nUpLineHelp = (UpLine == 1 and \"alone\") or (UpLine == 2 and \"with Dess\") or  (UpLine == 3 and \"with Master\") or (UpLine == 4 and \"with TL-3\") or (UpLine == 5 and \"with Master and Dess\") or (UpLine == 6 and \"With Master and TL-3\") or (UpLine == 7 and \"with Dess and TL-3\") or (UpLine == 8 and \"with all the mates\")\n\nmessage(\"Now Ornas is \" .. UpLineHelp .. \" - case: \" .. UpLine)\n\n\nend",
        "no_transition": true
      }
    ]
  },
  {
    "id": 199,
    "text": "   Энергетический блок, покрытый толстым слоем пыли, стоял в дальнем от юноши углу. Подойдя ближе, Орнас разглядел на тусклом экране надпись: \"В хаосе мироздания лишь две вещи неизменны: смерть всегда побеждает жизнь, а Сила обращает смерть в бессмертие\".<s>r\n   На панели располагалось три переключателя.",
    "answers": [
      {
        "var_not": [
          "panel2",
          1
        ],
        "var_equal": [
          "lov189",
          1
        ],
        "id": 199,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "fail199",
          1
        ]
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 199,
        "text": "panel2, trypanel2, textpanel2 и activeblock",
        "lua_do": "function lua_do()\nif panel2 ~= 2 then\npanel6 = 0\nvictory158 = 0\nend\nend",
        "calculate": true
      },
      {
        "id": 199,
        "text": " Самый нижний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "var_equal": [
          "panel2",
          2
        ],
        "merge": true
      },
      {
        "id": 199,
        "text": " Центральный был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "var_equal": [
          "panel2",
          1
        ],
        "merge": true
      },
      {
        "id": 199,
        "text": " Самый верхний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "var_equal": [
          "panel2",
          0
        ],
        "merge": true
      },
      {
        "var_not": [
          "panel2",
          0,
          "fail199",
          1
        ],
        "merge": false,
        "id": 200,
        "text": "Активировать верхний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "var_set": [
          "trypanel2",
          0
        ]
      },
      {
        "var_not": [
          "panel2",
          1,
          "fail199",
          1
        ],
        "merge": false,
        "id": 200,
        "text": "Активировать средний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "var_set": [
          "trypanel2",
          1
        ]
      },
      {
        "var_not": [
          "panel2",
          2,
          "fail199",
          1
        ],
        "var_set": [
          "trypanel2",
          2
        ],
        "id": 200,
        "text": "Активировать нижний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "merge": false
      },
      {
        "id": 189,
        "var_not": [
          "fail199",
          1
        ],
        "text": "Назад",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nhideMap = 0\nend"
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх незаполненных прямоугольников.",
        "var_equal": [
          "activeblock",
          0
        ],
        "merge": true
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, один из которых был заполнен.",
        "var_equal": [
          "activeblock",
          1
        ],
        "merge": true
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, два из которых были заполнены.",
        "var_equal": [
          "activeblock",
          2
        ],
        "merge": true
      },
      {
        "id": 199,
        "text": "\n[активировать первый куб]",
        "need": 1000,
        "var_set": [
          "activeblock",
          1
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, три из которых были заполнены.",
        "var_equal": [
          "activeblock",
          3
        ],
        "merge": true
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх заполненных прямоугольников.",
        "var_equal": [
          "activeblock",
          4
        ],
        "merge": true
      },
      {
        "id": 38,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_equal": [
          "fail199",
          1
        ]
      },
      {
        "id": 473,
        "text": "Картинки",
        "run": [
          473
        ]
      }
    ]
  },
  {
    "id": 200,
    "text": "   Орнас осторожно нажал на кнопку переключателя. На секунду вся подсветка на панели исчезла,",
    "answers": [
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\n\nactiveblock = activeblock or 0\n\nreturn pics.sup == 0\nend\n",
        "id": 200,
        "calculate": true,
        "text": "сброс активных блоков",
        "lua_do": "function lua_do()\nif activeblock > 1 and trypanel2 ~= 2 then\ntext2panel2 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\nend"
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel2",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "включение ловушки",
        "var_set": [
          "textpanel2",
          1
        ]
      },
      {
        "var_not": [
          "trypanel2",
          1
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0 and not (trypanel2 == 2 and panel2 ~= 2)\nend\n",
        "var_equal": [
          "panel2",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "выключение ловушки",
        "var_set": [
          "textpanel2",
          2
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "activeblock",
          1,
          "trypanel2",
          2
        ],
        "id": 200,
        "calculate": true,
        "text": "к третьему норм",
        "var_set": [
          "text2panel2",
          1,
          "panel2",
          2,
          "activeblock",
          2
        ]
      },
      {
        "id": 200,
        "var_not": [
          "activeblock",
          1,
          "activeblock",
          2
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel2",
          2
        ],
        "lua_do": "function lua_do()\n\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\n\nend",
        "calculate": true,
        "text": "к третьему минус",
        "var_set": [
          "text2panel2",
          2,
          "activeblock",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel2",
          0
        ],
        "id": 200,
        "text": " к верхнему",
        "calculate": true,
        "var_set": [
          "panel2",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel2",
          1
        ],
        "id": 200,
        "text": "к среднему",
        "calculate": true,
        "var_set": [
          "panel2",
          1
        ]
      },
      {
        "lua_do": "function lua_do()\npics =  pics or {}\npics.sup = 1\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 200,
        "text": " затем засветился верхний переключатель.",
        "merge": true,
        "var_equal": [
          "panel2",
          0
        ]
      },
      {
        "id": 200,
        "text": " затем засветился средний переключатель.",
        "var_equal": [
          "panel2",
          1
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": " затем засветился нижний переключатель.",
        "var_equal": [
          "panel2",
          2
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": " Почти одновременно с этим отключилась система лучегасителей.",
        "var_equal": [
          "textpanel2",
          2
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": " Почти одновременно с этим раздался приглушённый щелчок и часть комнаты оказалась отделена силовым полем лучегасителей, генерируемым устройством на потолке. К счастью, сам Орнас не попал в ловушку и даже не был отрезан от дверей.",
        "var_equal": [
          "textpanel2",
          1
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались два закрашенных и два пустых прямоугольника.\n   \"Отлично!\" – обрадовался юноша ещё одной маленькой победе над загадкой энергоблоков.",
        "var_equal": [
          "text2panel2",
          1
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались четыре незакрашенных прямоугольника.",
        "merge": true,
        "var_equal": [
          "text2panel2",
          2
        ]
      },
      {
        "forget": 200,
        "text": "Назад",
        "id": 199,
        "var_set": [
          "text2panel2",
          10,
          "textpanel2",
          10
        ]
      },
      {
        "var_show": [
          "text2panel2"
        ],
        "comment": true,
        "id": 200,
        "text": "второй текст:",
        "need": 1000
      },
      {
        "var_show": [
          "trypanel2"
        ],
        "comment": true,
        "id": 200,
        "text": "трай:",
        "need": 1000
      },
      {
        "var_show": [
          "activeblock"
        ],
        "comment": true,
        "id": 200,
        "text": "active block:",
        "need": 1000
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p2 = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 203
      },
      {
        "id": 203,
        "text": " \"Странно...\" – разочарованно протянул джедай.",
        "lua_if": "function lua_if()\nreturn trypanel2 == 2 and panel2 ~= 2\nend",
        "merge": true
      },
      {
        "id": 473,
        "text": "Картинки",
        "run": [
          473
        ]
      }
    ]
  },
  {
    "id": 201,
    "text": "   Джедай ",
    "answers": [
      {
        "id": 201,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\npics = pics or {}\npics.a10 = 1\nlocal text = ((g.previous_id == 194 or g.previous_id ==260 or g.previous_id == 181) and \"попал в комнату среднего размера, заваленную грудами хлама и тускло освещённую \" or \"находился в комнате среднего размера, заваленной грудами хлама и тускло освещённой \") .. \"несколькими настенными лампами. Тут и там можно было заметить ржавые металлические детали, обломки камней, провода и битые стёкла, погребённые под толстым слоем пыли.\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 206,
        "text": "Использовать энергетический блок",
        "need": 163,
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn style == 3\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "lua_do": "function lua_do()\nachievements = achievements or {}\nif not isHistoryContain(42) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Внимательно осмотреть помещение",
        "need": -42,
        "id": 42
      },
      {
        "var_not": [
          "repair208",
          1,
          "331broken",
          1
        ],
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\"\nreturn a\nend",
        "var_equal": [
          "e",
          1
        ],
        "id": 211,
        "text": "Подойти к дроиду",
        "need": [
          -452
        ]
      },
      {
        "var_not": [
          "331broken",
          1,
          "droid_leave_the_room",
          1
        ],
        "lua_if": "function lua_if()TL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\"\nreturn a\nend",
        "var_equal": [
          "droid_works",
          1
        ],
        "id": 452,
        "text": "Подойти к дроиду",
        "need": [
          452
        ]
      },
      {
        "id": 410,
        "text": "Подойти к дроиду",
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\"\nreturn a\nend",
        "var_equal": [
          "droid_works",
          0
        ]
      },
      {
        "id": 348,
        "text": "Подойти к дроиду",
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\"\nreturn a\nend",
        "var_equal": [
          "331broken",
          1
        ]
      },
      {
        "var_not": [
          "e",
          1,
          "repair208",
          1
        ],
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"\"\nlocal a =TL3.position ~= \"near the ship\" and TL3.position ~= \"at the stairs\"\nreturn a\nend",
        "var_equal": [
          "panel4",
          1
        ],
        "id": 208,
        "text": "Осмотреть дроида"
      },
      {
        "id": 163,
        "text": "Осмотреть устройство",
        "need": -163,
        "var_not": [
          "repair208",
          1
        ]
      },
      {
        "id": 345,
        "text": "Искать ящик в углу",
        "need": [
          457,
          -345
        ]
      },
      {
        "id": 411,
        "text": "Тщательно осмотреть ящик с инструментами",
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.bonusKey = TL3.bonusKey or 0\nreturn (TL3.bonusKey == 1) and (vars.key_on_position_4_avail == 1)\nend"
      },
      {
        "id": 201,
        "text": "\n   Около одной из стен виднелось место, расчищенное от мусора. Там располагалось какое-то устройство.\n   Двери были лишь на двух соседних стенах, из чего Орнас заключил, что комната находится в самом углу строения.",
        "need": -163,
        "merge": true
      },
      {
        "var_not": [
          "droid_leave_the_room",
          1
        ],
        "id": 201,
        "text": "\n   Около одной из стен виднелось место, расчищенное от мусора. Там располагался древний энергетический блок, от которого отходило множество силовых кабелей во все стороны.\n   Рядом с источником питания находился старый астродроид, подключённый к самодельной зарядной станции, соединённой с энергетическим блоком толстым проводом.\n   Двери были лишь на двух соседних стенах, из чего Орнас заключил, что комната находится в самом углу строения.",
        "need": [
          163,
          -345
        ],
        "merge": true
      },
      {
        "var_not": [
          "331broken",
          1,
          "droid_leave_the_room",
          1
        ],
        "id": 201,
        "text": "\n   Около одной из стен виднелось место, расчищенное от мусора. Там располагался древний энергетический блок, от которого отходило множество силовых кабелей во все стороны.\n   Рядом с источником питания находился старый астродроид, возле которого лежал найденный юношей металлический ящик.\n   Двери были лишь на двух соседних стенах, из чего Орнас заключил, что комната находится в самом углу строения.",
        "need": 345,
        "merge": true
      },
      {
        "var_not": [
          "droid_leave_the_room",
          1
        ],
        "var_equal": [
          "331broken",
          1
        ],
        "id": 201,
        "text": "\n   Около одной из стен виднелось место, расчищенное от мусора. Там располагался древний энергетический блок, от которого отходило множество силовых кабелей во все стороны.\n   Рядом с источником питания находился старый разобранный астродроид, небольшой металлический ящик и ставший бесполезным мандалорский шлем.\n   Двери были лишь на двух соседних стенах, из чего Орнас заключил, что комната находится в самом углу строения.",
        "merge": true
      },
      {
        "var_not": [
          "repair208",
          0
        ],
        "var_equal": [
          "droid_leave_the_room",
          1
        ],
        "id": 201,
        "text": "\n   Около одной из стен виднелось место, расчищенное от мусора. Там располагался древний энергетический блок, от которого отходило множество силовых кабелей во все стороны. Рядом с источником питания находилась самодельная зарядная станция для дроида, на полу возле которой лежал небольшой металлический ящик.\n   Двери были лишь на двух соседних стенах, из чего Орнас заключил, что комната находится в самом углу строения.",
        "merge": true
      },
      {
        "var_not": [
          "repair208",
          1
        ],
        "var_equal": [
          "droid_leave_the_room",
          1
        ],
        "id": 201,
        "text": "\n   Около одной из стен виднелось место, расчищенное от мусора, в котором располагался древний энергетический блок, от которого отходило множество силовых кабелей во все стороны. Рядом с источником питания находилась самодельная зарядная станция для дроида, на полу возле которой лежал небольшой металлический ящик и остатки мандалорского шлема.\n   Двери были лишь на двух соседних стенах, из чего Орнас заключил, что комната находится в самом углу строения.",
        "merge": true
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пройти вглубь храма\" .. (isHistoryContain (157) and \"<s>\n[В зал со звездолётом]\" or \"\") \nend",
        "middle_answer": true,
        "text": "Пойти вглубь храма",
        "id": 194,
        "var_set": [
          "goto",
          157,
          "gofrom",
          201
        ]
      },
      {
        "id": 194,
        "text": "Пойти к выходу из храма\n[В зал с клеткой]",
        "right_answer": true,
        "var_set": [
          "goto",
          177,
          "gofrom",
          201
        ]
      },
      {
        "id": 201,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nvars.droid_works = vars.droid_works or 1\nend"
      }
    ]
  },
  {
    "id": 202,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 202,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = g.previous_id == 155 and \"прибризился к энергетическому блоку в правой части комнаты и осмотрел его. На его панели была надпись: <s><s>\"Рождение, жизнь и смерть – всего лишь три первых шага к бессмертию<s><s>\". На корпусе располагалось три переключателя,\" or \"замер над панелью энергетического блока в правой части комнаты. Надпись на блоке гласила: <s><s>\"Рождение, жизнь и смерть – всего лишь три первых шага к бессмертию<s><s>\". На корпусе располагалось три переключателя,\"\nreturn text\nend",
        "merge": true
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 202,
        "calculate": true,
        "lua_do": "function lua_do()\nif panel3 ~= 2 then\npanel6 = 0\nvictory158 = 0\nend\nend",
        "text": "panel3, trypanel3, textpanel3, text2panel3  и activeblock"
      },
      {
        "id": 199,
        "text": " самый нижний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel3",
          2
        ]
      },
      {
        "id": 199,
        "text": " центральный был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel3",
          1
        ]
      },
      {
        "id": 199,
        "text": " самый верхний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel3",
          0
        ]
      },
      {
        "var_not": [
          "panel3",
          0
        ],
        "var_set": [
          "trypanel3",
          0
        ],
        "id": 203,
        "text": "Активировать верхний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "merge": false
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_set": [
          "trypanel3",
          1
        ],
        "id": 203,
        "text": "Активировать средний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\ndessReactionOnField = dessReactionOnField or {}\ndessReactionOnField.seen = isHistoryContain (424) and 1 or 0\nend",
        "merge": false
      },
      {
        "var_not": [
          "panel3",
          2
        ],
        "merge": false,
        "id": 203,
        "text": "Активировать нижний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "var_set": [
          "trypanel3",
          2
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх незаполненных прямоугольников.",
        "merge": true,
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nhideMap = 0\nend",
        "text": "Назад",
        "id": 155
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, один из которых был заполнен.",
        "merge": true,
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, два из которых были заполнены.",
        "merge": true,
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 202,
        "text": "<s>r\n[активировать первые 2 куба]",
        "need": 1000,
        "var_set": [
          "activeblock",
          2
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, три из которых были заполнены.",
        "merge": true,
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх заполненных прямоугольников.",
        "merge": true,
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "var_not": [
          "activeblock",
          4
        ],
        "id": 202,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "panel6",
          0
        ]
      },
      {
        "id": 202,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "super_calculate": false
      },
      {
        "comment": false,
        "id": 202,
        "forget": [],
        "text": "Новый ответ. введите текст",
        "need": 1000,
        "addToHistory": [
          45
        ]
      },
      {
        "id": 474,
        "text": "Картинки",
        "run": [
          474
        ]
      }
    ]
  },
  {
    "id": 203,
    "text": "   Орнас осторожно нажал на кнопку переключателя. На секунду вся подсветка на панели исчезла,",
    "answers": [
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\n\nactiveblock = activeblock or 0\n\n--[=[if activeblock > 2 then\ntext2panel3 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\n]=]\n\n\nreturn pics.sup == 0\nend\n",
        "id": 200,
        "text": "сброс активных блоков",
        "calculate": true,
        "lua_do": "function lua_do()\nif activeblock > 2 and trypanel3 ~= 2 then\ntext2panel3 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\nend"
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel3",
          1
        ],
        "id": 200,
        "text": "включение ловушки",
        "calculate": true,
        "var_set": [
          "textpanel3",
          1
        ]
      },
      {
        "var_not": [
          "trypanel3",
          1
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "panel3",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "выключение ловушки",
        "var_set": [
          "textpanel3",
          2
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "activeblock",
          2,
          "trypanel3",
          2
        ],
        "id": 200,
        "text": "к третьему норм",
        "calculate": true,
        "var_set": [
          "text2panel3",
          1,
          "panel3",
          2,
          "activeblock",
          3
        ]
      },
      {
        "id": 200,
        "var_not": [
          "activeblock",
          2,
          "activeblock",
          3
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel3",
          2
        ],
        "lua_do": "function lua_do()\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nend",
        "calculate": true,
        "text": "к третьему минус",
        "var_set": [
          "text2panel3",
          2,
          "activeblock",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel3",
          0
        ],
        "id": 200,
        "calculate": true,
        "text": " к верхнему",
        "var_set": [
          "panel3",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel3",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "к среднему",
        "var_set": [
          "panel3",
          1
        ]
      },
      {
        "lua_do": "function lua_do()\npics =  pics or {}\npics.sup = 1\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 200,
        "text": " затем засветился верхний переключатель.",
        "var_equal": [
          "panel3",
          0
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": " затем засветился средний переключатель.",
        "merge": true,
        "var_equal": [
          "panel3",
          1
        ]
      },
      {
        "id": 200,
        "text": " затем засветился нижний переключатель.",
        "merge": true,
        "var_equal": [
          "panel3",
          2
        ]
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались три закрашенных и один пустой прямоугольник.\n\"Ещё один\", – улыбнулся своему успеху джедай.",
        "merge": true,
        "var_equal": [
          "text2panel3",
          1
        ]
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались четыре незакрашенных прямоугольника.",
        "var_equal": [
          "text2panel3",
          2
        ],
        "merge": true
      },
      {
        "forget": 203,
        "text": "Назад",
        "id": 202,
        "var_set": [
          "text2panel3",
          10,
          "textpanel3",
          10
        ]
      },
      {
        "var_show": [
          "text2panel3"
        ],
        "comment": true,
        "id": 200,
        "text": "второй текст:",
        "need": 1000
      },
      {
        "var_show": [
          "trypanel3"
        ],
        "comment": true,
        "id": 200,
        "text": "трай:",
        "need": 1000
      },
      {
        "var_show": [
          "activeblock"
        ],
        "comment": true,
        "id": 200,
        "text": "active block:",
        "need": 1000
      },
      {
        "super_calculate": false,
        "id": 203,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p3 = 1\nend"
      },
      {
        "id": 203,
        "text": " \"Почему он не сработал?\" – удивился юноша.",
        "lua_if": "function lua_if()\nreturn trypanel3 == 2 and panel3 ~= 2\nend",
        "merge": true
      },
      {
        "id": 474,
        "text": "Картинки",
        "run": [
          474
        ]
      }
    ]
  },
  {
    "id": 204,
    "text": "   На панели энергетического блока была надпись: \"Лишь одна Сила способна привести к бессмертию\", а рядом располагалось три переключателя.",
    "answers": [
      {
        "comment": true,
        "super_calculate": false,
        "id": 204,
        "text": "panel1, trypanel1, textpanel1, text2panel1 и activeblock",
        "calculate": true,
        "lua_do": "function lua_do()\nif panel1 ~= 2 then\npanel6 = 0\nvictory158 = 0\nend\nend"
      },
      {
        "id": 199,
        "text": " Самый нижний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel1",
          2
        ]
      },
      {
        "id": 199,
        "text": " Центральный был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel1",
          1
        ]
      },
      {
        "id": 199,
        "text": " Самый верхний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel1",
          0
        ]
      },
      {
        "var_not": [
          "panel1",
          0
        ],
        "var_set": [
          "trypanel1",
          0
        ],
        "id": 205,
        "text": "Активировать верхний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "merge": false
      },
      {
        "var_not": [
          "panel1",
          1
        ],
        "var_set": [
          "trypanel1",
          1
        ],
        "id": 205,
        "text": "Активировать средний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "merge": false
      },
      {
        "var_not": [
          "panel1",
          2
        ],
        "merge": false,
        "id": 205,
        "text": "Активировать нижний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "var_set": [
          "trypanel1",
          2
        ]
      },
      {
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nhideMap = 0\nend",
        "text": "Назад",
        "id": 155
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх незаполненных прямоугольников.",
        "merge": true,
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, один из которых был заполнен.",
        "merge": true,
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, два из которых были заполнены.",
        "merge": true,
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, три из которых были заполнены.",
        "merge": true,
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх заполненных прямоугольников.",
        "merge": true,
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "var_not": [
          "activeblock",
          4
        ],
        "id": 204,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "panel6",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p1 = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 203
      },
      {
        "id": 476,
        "text": "Картинки",
        "run": [
          476
        ]
      }
    ]
  },
  {
    "id": 205,
    "text": "   Орнас осторожно нажал на кнопку переключателя. На секунду вся подсветка на панели исчезла,",
    "answers": [
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\n\nactiveblock = activeblock or 0\n\n--[=[if activeblock > 0 then\ntext2panel1 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\n]=]\nreturn pics.sup == 0\nend\n",
        "id": 200,
        "text": "сброс активных блоков",
        "calculate": true,
        "lua_do": "function lua_do()\nif activeblock > 0 and trypanel1 ~= 2 then\ntext2panel1 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\nend"
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel1",
          1
        ],
        "id": 200,
        "text": "включение ловушки",
        "calculate": true,
        "var_set": [
          "textpanel1",
          1
        ]
      },
      {
        "var_not": [
          "trypanel1",
          1
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "panel1",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "выключение ловушки",
        "var_set": [
          "textpanel1",
          2
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "activeblock",
          0,
          "trypanel1",
          2
        ],
        "id": 200,
        "text": "к третьему норм",
        "calculate": true,
        "var_set": [
          "text2panel1",
          1,
          "panel1",
          2,
          "activeblock",
          1
        ]
      },
      {
        "id": 200,
        "var_not": [
          "activeblock",
          0,
          "activeblock",
          1
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel1",
          2
        ],
        "lua_do": "function lua_do()\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nend",
        "calculate": true,
        "text": "к третьему минус",
        "var_set": [
          "text2panel1",
          2,
          "activeblock",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel1",
          0
        ],
        "id": 200,
        "calculate": true,
        "text": " к верхнему",
        "var_set": [
          "panel1",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel1",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "к среднему",
        "var_set": [
          "panel1",
          1
        ]
      },
      {
        "lua_do": "function lua_do()\npics =  pics or {}\npics.sup = 1\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 200,
        "text": " затем засветился верхний переключатель.",
        "var_equal": [
          "panel1",
          0
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": " затем засветился средний переключатель.",
        "merge": true,
        "var_equal": [
          "panel1",
          1
        ]
      },
      {
        "id": 200,
        "text": " затем засветился нижний переключатель.",
        "merge": true,
        "var_equal": [
          "panel1",
          2
        ]
      },
      {
        "id": 200,
        "text": " Почти одновременно с этим отключилась система лучегасителей.",
        "merge": true,
        "var_equal": [
          "textpanel1",
          2
        ]
      },
      {
        "id": 200,
        "text": " Почти одновременно с этим раздался приглушённый щелчок и часть комнаты оказалась отделена силовым полем лучегасителей, генерируемым устройством на потолке. К счастью, сам юноша не попал в ловушку и даже не был отрезан от дверей.",
        "merge": true,
        "var_equal": [
          "textpanel1",
          1
        ]
      },
      {
        "id": 200,
        "text": "\n      Индикаторы под переключателем мигнули несколько раз, после чего там остались один закрашенный и три пустых прямоугольника.\n   \"Работает!\" – обрадовался юноша.",
        "merge": true,
        "var_equal": [
          "text2panel1",
          1
        ]
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались четыре незакрашенных прямоугольника.",
        "var_equal": [
          "text2panel1",
          2
        ],
        "merge": true
      },
      {
        "forget": 205,
        "text": "Назад",
        "id": 204,
        "var_set": [
          "text2panel1",
          10,
          "textpanel1",
          10
        ]
      },
      {
        "var_show": [
          "text2panel1"
        ],
        "comment": true,
        "id": 200,
        "text": "второй текст:",
        "need": 1000
      },
      {
        "var_show": [
          "trypanel1"
        ],
        "comment": true,
        "id": 200,
        "text": "трай:",
        "need": 1000
      },
      {
        "var_show": [
          "activeblock"
        ],
        "comment": true,
        "id": 200,
        "text": "active block:",
        "need": 1000
      },
      {
        "id": 476,
        "text": "Картинки",
        "run": [
          476
        ]
      }
    ]
  },
  {
    "id": 206,
    "text": "   На панели прибора Орнас разглядел надпись: \"Лишь четыре вещи имеют безграничную силу над мыслями смертных: свет и тьма, смерть и бессмертие\", а также три переключателя.",
    "answers": [
      {
        "comment": true,
        "super_calculate": false,
        "id": 206,
        "text": "panel4, trypanel4, textpanel4 text2panel4 и activeblock",
        "calculate": true,
        "lua_do": "function lua_do()\nif panel4 ~= 2 then panel6 = 0\nvictory158 = 0\nend\nend"
      },
      {
        "id": 199,
        "text": " Самый нижний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel4",
          2
        ]
      },
      {
        "id": 199,
        "text": " Центральный был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel4",
          1
        ]
      },
      {
        "id": 199,
        "text": " Самый верхний был активирован и едва заметно подсвечивался, два других, видимо, находились в выключенном состоянии.",
        "merge": true,
        "var_equal": [
          "panel4",
          0
        ]
      },
      {
        "var_not": [
          "panel4",
          0
        ],
        "var_set": [
          "trypanel4",
          0
        ],
        "id": 207,
        "text": "Активировать верхний переключатель",
        "lua_do": "function lua_do()\npanel6 = 0\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "merge": false
      },
      {
        "var_not": [
          "panel4",
          1
        ],
        "var_set": [
          "trypanel4",
          1
        ],
        "id": 207,
        "text": "Активировать средний переключатель",
        "lua_do": "function lua_do()\npanel6 = 0\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "merge": false
      },
      {
        "var_not": [
          "panel4",
          2
        ],
        "merge": false,
        "id": 207,
        "text": "Активировать нижний переключатель",
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nend",
        "var_set": [
          "trypanel4",
          2
        ]
      },
      {
        "lua_do": "function lua_do()\npics = pics or {}\npics.sup = 0\npics.panels = pics.panels or {}\npics.panels.sup = 0\nhideMap = 0\nend",
        "text": "Назад",
        "id": 201
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырех незакрашенных прямоугольников.",
        "merge": true,
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 199,
        "text": "\n  Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, один из которых был заполнен.",
        "merge": true,
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, два из которых были заполнены.",
        "merge": true,
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 206,
        "text": "\n[активировать первые три куба]",
        "need": 1000,
        "var_set": [
          "activeblock",
          3
        ]
      },
      {
        "id": 199,
        "text": "\n   Под нижним переключателем располагались индикаторы в виде четырёх прямоугольников, три из которых были заполнены.",
        "merge": true,
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 199,
        "text": "\n  Под нижним переключателем располагались индикаторы в виде четырёх заполненных прямоугольников.",
        "merge": true,
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "id": 206,
        "text": "\n   На располагающейся рядом зарядной станции астродроида мигали и светились огоньки маленьких ламп. По-видимому, теперь устройство было активно.",
        "var_equal": [
          "panel4",
          1
        ],
        "merge": true
      },
      {
        "id": 475,
        "text": "Картинки",
        "run": [
          475
        ]
      }
    ]
  },
  {
    "id": 207,
    "text": "   Орнас осторожно нажал на кнопку переключателя. На секунду вся подсветка на панели исчезла,",
    "answers": [
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\n\nactiveblock = activeblock or 0\n\n--[=[if activeblock > 3 then\ntext2panel4 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\n]=]\n\n\nreturn pics.sup == 0\nend\n",
        "id": 200,
        "text": "сброс активных блоков",
        "calculate": true,
        "lua_do": "function lua_do()\nif activeblock > 3 and trypanel4 ~= 2 then\ntext2panel4 = 2\nactiveblock = 0\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nelse end\nend"
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel4",
          1
        ],
        "id": 200,
        "text": "включение зарядки",
        "calculate": true,
        "var_set": [
          "textpanel4",
          1
        ]
      },
      {
        "var_not": [
          "trypanel4",
          1
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "panel4",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "выключение зарядки",
        "var_set": [
          "textpanel4",
          2
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "activeblock",
          3,
          "trypanel4",
          2
        ],
        "id": 200,
        "text": "к третьему норм",
        "calculate": true,
        "var_set": [
          "text2panel4",
          1,
          "panel4",
          2,
          "activeblock",
          4
        ]
      },
      {
        "id": 200,
        "var_not": [
          "activeblock",
          3,
          "activeblock",
          4
        ],
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel4",
          2
        ],
        "lua_do": "function lua_do()\npanel1 = panel1 == 2 and 0 or panel1\npanel2 = panel2 == 2 and 0 or panel2\npanel3 = panel3 == 2 and 0 or panel3\npanel4 = panel4 == 2 and 0 or panel4\nend",
        "calculate": true,
        "text": "к третьему минус",
        "var_set": [
          "text2panel4",
          2,
          "activeblock",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel4",
          0
        ],
        "id": 200,
        "calculate": true,
        "text": " к верхнему",
        "var_set": [
          "panel4",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\npics = pics or {}\npics.sup = pics.sup or 0\nreturn pics.sup == 0\nend\n",
        "var_equal": [
          "trypanel4",
          1
        ],
        "id": 200,
        "calculate": true,
        "text": "к среднему",
        "var_set": [
          "panel4",
          1
        ]
      },
      {
        "lua_do": "function lua_do()\npics =  pics or {}\npics.sup = 1\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 200,
        "text": " затем засветился верхний переключатель.",
        "var_equal": [
          "panel4",
          0
        ],
        "merge": true
      },
      {
        "id": 200,
        "text": " затем засветился средний переключатель.",
        "merge": true,
        "var_equal": [
          "panel4",
          1
        ]
      },
      {
        "id": 200,
        "text": " затем засветился нижний переключатель.",
        "merge": true,
        "var_equal": [
          "panel4",
          2
        ]
      },
      {
        "id": 200,
        "text": " Почти одновременно с этим погасли лампочки на зарядной станции дроида.",
        "merge": true,
        "var_equal": [
          "textpanel4",
          2
        ]
      },
      {
        "id": 200,
        "text": " Почти одновременно с этим раздался приглушённый щелчок и загорелись лампочки на зарядной станции дроида.",
        "merge": true,
        "var_equal": [
          "textpanel4",
          1
        ]
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались четыре закрашенных прямоугольника.\n   \"Кажется, этот последний. И что теперь?\" – задумался юноша.",
        "merge": true,
        "var_equal": [
          "text2panel4",
          1
        ]
      },
      {
        "id": 200,
        "text": "\n   Индикаторы под переключателем мигнули несколько раз, после чего там остались четыре незакрашенных прямоугольника.",
        "var_equal": [
          "text2panel4",
          2
        ],
        "merge": true
      },
      {
        "forget": 207,
        "text": "Назад",
        "id": 206,
        "var_set": [
          "text2panel4",
          10,
          "textpanel4",
          10
        ]
      },
      {
        "var_show": [
          "text2panel2"
        ],
        "comment": true,
        "id": 200,
        "text": "второй текст:",
        "need": 1000
      },
      {
        "var_show": [
          "trypanel2"
        ],
        "comment": true,
        "id": 200,
        "text": "трай:",
        "need": 1000
      },
      {
        "var_show": [
          "activeblock"
        ],
        "comment": true,
        "id": 200,
        "text": "active block:",
        "need": 1000
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p4 = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 203
      },
      {
        "id": 203,
        "text": " \"Что за ерунда?\" – расстроился юноша.",
        "lua_if": "function lua_if()\nreturn trypanel4 == 2 and panel4 ~= 2\nend",
        "merge": true
      },
      {
        "id": 475,
        "text": "Картинки",
        "run": [
          475
        ]
      }
    ]
  },
  {
    "id": 208,
    "text": "   Орнас присел на корточки рядом с доисторическим астродроидом и смахнул рукой пыль с его корпуса.\n– Откуда ты здесь взялся, малыш? – вопрос был риторическим, так как \"собеседник\" всё ещё не подавал признаков активности. – Неужели ты сам собрал это устройство, но не смог его включить?\n   В тот же момент дроид ожил с громким скрежетом деталей и писком, но, видимо, почти все его системы пришли в негодность со временем, и он остался неподвижен.",
    "answers": [
      {
        "id": 208,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "droid208",
          0
        ]
      },
      {
        "var_not": [
          "arm1",
          1,
          "arm2",
          1,
          "arm3",
          1
        ],
        "id": 208,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "droid208",
          1
        ]
      },
      {
        "id": 209,
        "text": "Поговорить с дроидом",
        "var_equal": [
          "droid208",
          1
        ]
      },
      {
        "id": 40,
        "text": "Поговорить с дроидом",
        "var_not": [
          "droid208",
          1
        ]
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ],
        "var_equal": [
          "style",
          4
        ],
        "id": 210,
        "text": "Отремонтировать дроида",
        "need": 209
      },
      {
        "id": 201,
        "text": "Отойти от дроида"
      }
    ]
  },
  {
    "id": 209,
    "text": "   Хотя Орнас и не понимал бинарный язык астромехов, он знал, что дроид сможет понять его и, наверное, как-нибудь изъясниться.",
    "answers": [
      {
        "var_set": [
          "a",
          0,
          "b",
          0,
          "c",
          0,
          "d",
          0,
          "e",
          0,
          "z",
          0
        ],
        "id": 209,
        "text": "сбросить диалог",
        "need": 1000,
        "merge": false
      },
      {
        "var_show": [
          "a"
        ],
        "comment": true,
        "id": 209,
        "text": "a, b, c:",
        "need": 1000
      },
      {
        "merge": false,
        "var_equal": [
          "a",
          0,
          "b",
          0
        ],
        "id": 778,
        "instant": false,
        "text": "Ты понимаешь меня?",
        "var_set": [
          "a",
          1,
          "z",
          1
        ]
      },
      {
        "var_not": [
          "c",
          1
        ],
        "var_set": [
          "b",
          1,
          "z",
          1
        ],
        "var_equal": [
          "b",
          0
        ],
        "id": 779,
        "instant": false,
        "text": "Как ты здесь очутился?",
        "merge": false
      },
      {
        "var_equal": [
          "c",
          0,
          "z",
          1
        ],
        "id": 780,
        "instant": false,
        "text": "Ты можешь сделать что-нибудь, чтобы я тебя понял?",
        "var_set": [
          "c",
          1
        ]
      },
      {
        "var_not": [
          "b",
          1,
          "d",
          1,
          "e",
          1
        ],
        "var_equal": [
          "c",
          1
        ],
        "id": 781,
        "instant": false,
        "text": "Как ты здесь очутился?",
        "var_set": [
          "d",
          1
        ]
      },
      {
        "var_equal": [
          "c",
          1,
          "e",
          0
        ],
        "id": 782,
        "instant": false,
        "text": "Я могу чем-нибудь помочь тебе?",
        "var_set": [
          "e",
          1
        ]
      },
      {
        "id": 201,
        "text": "Отойти от дроида",
        "lua_if": "function lua_if()\nreturn e == 1 and style ~=4\nend"
      },
      {
        "id": 210,
        "text": "Отремонтировать дроида",
        "lua_if": "function lua_if()\nreturn e == 1 and style ==4\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ]
      }
    ]
  },
  {
    "id": 210,
    "text": "   Используя всё своё мастерство в обращении с механизмами и вычислительной техникой, Орнас отключил дроида и аккуратно разобрал его. В течение получаса джедай рылся в кучах мусора, отыскивая нужные запчасти, пока ему не посчастливилось найти среди хлама небольшой металлический ящик со всем необходимым. После этого провести все требуемые манипуляции, чтобы вдохнуть новую жизнь в древнего астромеха, не составило труда.<s>r\n   Когда ремонт был окончен, дроид включился и издал серию прерывистых трелей, которые, по всей видимости, должны были выражать благодарность. После этого он направился к двери, ведущей вглубь храма, и скрылся за ней.",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.position = \"\"\nend",
        "var_set": [
          "repair208",
          1,
          "droid_leave_the_room",
          1
        ]
      }
    ]
  },
  {
    "id": 211,
    "text": "   Орнас подошёл к дроиду, стоящему около самодельной зарядной станции.",
    "answers": [
      {
        "var_not": [
          "helmet",
          1
        ],
        "var_equal": [
          "droid",
          0
        ],
        "id": 211,
        "text": " Джедай пока ничего не знал о судьбе бывшего хозяина TL-3 и не нашёлся, что сказать астромеху.",
        "merge": true
      },
      {
        "id": 211,
        "text": " При приближении юноши астромех активизировался, механизмы внутри него зашумели и замигали лампочки индикаторов. Обнаружив в руках джедая шлем мандалорца, дроид издал серию гудков и трелей с повышающейся интонацией и замер, словно чего-то ожидая.",
        "var_equal": [
          "helmet",
          1
        ],
        "merge": true
      },
      {
        "id": 324,
        "text": "Надеть шлем",
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "id": 211,
        "text": "Отойти от дроида",
        "backstepCount": 1,
        "isBack": true
      }
    ]
  },
  {
    "id": 212,
    "text": "   Отворив тяжёлую дверцу сейфа, Орнас заглянул внутрь. Многочисленные полки были заставлены разнообразным оружием: от лёгких бластерных пистолетов и плазменных винтовок до старомодных и громоздких вибромечей. Прикоснувшись к лезвию одного из них, юноша разочарованно скривил губы: самый обычный сплав, световой клинок разрезал бы его как соломинку.<s>r\n   Среди груды вещей, никак не сравнимых с элегантным оружием джедаев, оказалось и кое-что полезное. На одной из полок были аккуратно расставлены ящики с минами и гранатами разных типов, такие вещи могли бы пригодиться в полном опасностей храме.",
    "answers": [
      {
        "id": 233,
        "text": "Взять гранаты"
      },
      {
        "var_not": [
          "keyposition3",
          1
        ],
        "lua_if": "function lua_if()\nlocal a = 0\n  if keys.conjugate ~= 0 and keys.TLFail ~= 1 and keys.dessFail ~= 1 then\n    a = 1\n  end\nreturn a == 1\nend",
        "id": 212,
        "text": "\n   Интуиция подсказывала Орнасу, что поиск потайного отделения в этом сейфе стоит пока отложить.",
        "need": [
          320,
          -322
        ],
        "merge": true
      },
      {
        "id": 322,
        "text": "Искать потайной отдел",
        "need": [
          320,
          -322
        ],
        "var_not": [
          "keyposition3",
          1
        ]
      },
      {
        "id": 323,
        "text": "Открыть потайной отдел",
        "need": [
          322
        ],
        "var_not": [
          "keyposition3",
          1
        ]
      },
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "lua_do": "function lua_do()\n--hideMap = 0\nend"
      }
    ]
  },
  {
    "id": 213,
    "text": "  Орнас",
    "answers": [
      {
        "var_show": [
          "plecho"
        ],
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "var_set": [
          "plecho",
          1
        ]
      },
      {
        "var_show": [
          "plecho"
        ],
        "var_equal": [
          "style",
          2,
          "force157",
          1
        ],
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "var_set": [
          "plecho",
          0
        ]
      },
      {
        "var_show": [
          "plecho"
        ],
        "var_equal": [
          "ion_grenade_157",
          1
        ],
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "var_set": [
          "plecho",
          0
        ]
      },
      {
        "var_show": [
          "plecho"
        ],
        "var_equal": [
          "style",
          1,
          "sword157",
          1
        ],
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "var_set": [
          "plecho",
          0
        ]
      },
      {
        "var_show": [
          "plecho"
        ],
        "var_equal": [
          "arm157",
          1
        ],
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "var_set": [
          "plecho",
          0
        ]
      },
      {
        "var_show": [
          "plecho"
        ],
        "var_equal": [
          "mask157",
          1
        ],
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "var_set": [
          "plecho",
          0
        ]
      },
      {
        "id": 213,
        "calculate": true,
        "text": "Выстрел в плечо:",
        "lua_do": "function lua_do()\nornasStat.firedArm = plecho\nend"
      },
      {
        "id": 213,
        "text": " сам не знал, почему решил сделать это, но как только тёмный металл обруча впитал тепло его прикосновения и покрылся таинственным символами, охранные дроиды замерли, а затем совсем отключились.",
        "merge": true,
        "var_equal": [
          "arm157",
          1
        ]
      },
      {
        "id": 213,
        "text": " бросил на пол шлем и",
        "merge": true,
        "var_equal": [
          "force157",
          1,
          "helmet",
          1
        ]
      },
      {
        "id": 213,
        "text": " быстро оценил обстановку. Взмахом руки он создал с помощью Силы небольшой вихрь, поднявший столб пыли и каменной крошки на том месте, где только что стоял сам, затем молниеносно отпрыгнул в сторону и укрылся за большим камнем. Почти сразу же раздались звуки выстрелов, и бесчисленные красные всполохи бластерного огня пронеслись сквозь оседающее облако, с приглушённым треском барабаня по стене и металлической двери. Не теряя времени, джедай быстрыми рывками менял позиции и создавал новые пыльные вихри, не оставляя противнику возможности себя обнаружить. Наконец, оказавшись уже с другой стороны от той же двери, Орнас открыл её с помощью Силы и направил последнее облако прочь из зала. \n   Дождавшись момента, когда прекратился шквальный огонь, а затем стих едва уловимый гул сканеров, джедай выглянул из своего укрытия и ещё раз осмотрелся. Охранные дроиды отключились. На поверхности двери расчерчивал замысловатые узоры голубоватый луч невидимого детектора, который, видимо, и поднял тревогу, когда вошёл Орнас. Юноша довольно улыбнулся – теперь можно без опаски перемещаться по залу и продолжить свой путь, главное – не попадать в поле действия датчика.",
        "var_equal": [
          "mask157",
          1
        ],
        "merge": true
      },
      {
        "id": 213,
        "text": " с помощью Силы поднял ближайшего дроида в воздух и словно за огромным щитом укрылся им от обрушившейся в то же мгновение бури бластерного огня. Юноша невидимой хваткой сминал противников одного за другим и разбрасывал их во все стороны. Скрежет металла слился с шумом взрывов и выстрелов.\n   Расправившись со всеми защитниками комнаты, джедай отпустил исковерканный и искрящийся корпус дроида, поневоле ставшего его укрытием, и тот с громким лязгом обрушился на пол. Объятое дымом и пылью помещение вновь погрузилось в тишину.",
        "merge": true,
        "var_equal": [
          "style",
          2,
          "force157",
          1
        ]
      },
      {
        "var_not": [
          "style",
          2
        ],
        "var_equal": [
          "force157",
          1
        ],
        "id": 213,
        "text": " быстро оценил обстановку. Он принялся отбрасывать ближайших врагов с помощью Силы, опрокидывать их и ловко уклоняться от бластерных выстрелов. Он обрушивал огромные каменные валуны, с громким скрежетом сминающие металл и уничтожающие целые группы противников. В запале сражения юноша не заметил, как придавленный грудой обломков дроид высвободил своё оружие и открыл огонь по джедаю почти в упор. Орнас почувствовал опасность и быстро отпрыгнул в сторону, но два выстрела всё же опалили его плечо.\n   Совладав с болью, джедай с ожесточением сжал корпус дроида хваткой Силы, после чего отшвырнул его в последних уцелевших противников.\n   Когда осела пыль и комната вновь погрузилась в тишину, Орнас смог перевести дыхание.",
        "merge": true
      },
      {
        "var_not": [
          "helmet",
          1
        ],
        "var_equal": [
          "sword157",
          1
        ],
        "id": 213,
        "text": " отбросил сомнения, и в то же мгновение световой меч оказался в его ладони. Мерное жужжание и яркий свет клинка заполнили комнату, затем со всех сторон раздались звуки выстрелов.",
        "merge": true
      },
      {
        "id": 213,
        "text": " отбросил в сторону мандалорский шлем, и в то же мгновение в его ладони зажёгся световой меч. Мерное жужжание и яркий свет клинка заполнили комнату, затем со всех сторон раздались звуки выстрелов.",
        "merge": true,
        "var_equal": [
          "sword157",
          1,
          "helmet",
          1
        ]
      },
      {
        "id": 213,
        "text": "\n   Юноша полностью доверился рефлексам, отточенным за годы тренировок. Он уклонялся от выстрелов и перемещался от одного противника к другому, легко уничтожая их одного за другим. Иногда бластерные лучи почти достигали своей цели, но мастерство джедая позволило ему оставаться неуязвимым.\n   Схватка продолжалась не больше нескольких минут, когда юноша в невероятном прыжке настиг последнего уцелевшего дроида, всё ещё отчаянно стреляющего в джедая из всех орудий. При приземлении Орнас одним мощным ударом разрубил его покрытый копотью корпус надвое, и обломки с гулким звуком обрушились на пол.",
        "var_equal": [
          "style",
          1,
          "sword157",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "style",
          1
        ],
        "var_equal": [
          "sword157",
          1
        ],
        "id": 213,
        "text": "\n  Орнас старательно уклонялся от выстрелов, отражая некоторые обратно в нападающих. Он медленно перемещался среди огней от одного дроида к другому, уничтожая их одного за другим. Когда противники окружили джедая и стреляли уже со всех сторон, лишь неимоверное усилие позволило ему уйти из-под огня живым. Однако один из выстрелов всё же достиг цели, скользнув по плечу Орнаса и оставив болезненный ожог.\n   Справившись с болью, юноша перешёл в наступление. Теперь его позиция играла ему на руку: большая часть выстрелов поражала самих же стреляющих, расположенных плотным кольцом вокруг Орнаса. Наконец, он с помощью Силы запустил вращающийся клинок по широкой дуге, сразив оставшихся врагов.",
        "merge": true
      },
      {
        "id": 213,
        "text": "у потребовалось всего одно мгновение, чтобы сорвать с пояса ионную гранату и метнуть её в скопление врагов. Ещё через секунду она с негромким хлопком взорвалась, распространяя по комнате мощный поток заряженных частиц и электромагнитных волн, выводящих из строя или сжигающих электронику. Ни один из охранных дроидов не успел предпринять хоть что-то, что могло бы навредить юноше, – они застыли на местах. Джедай безо всякого сопротивления завершил их разгром с помощью светового меча.",
        "merge": true,
        "var_equal": [
          "ion_grenade_157",
          1
        ]
      },
      {
        "var_not": [
          "helmet",
          1
        ],
        "var_equal": [
          "sword157",
          1
        ],
        "id": 213,
        "text": "\n   Убедившись, что больше ничто не представляет для него угрозы, Орнас деактивировал и убрал на пояс свой меч.",
        "merge": true
      },
      {
        "id": 213,
        "text": "\n   Убедившись, что больше ничто не представляет для него угрозы, Орнас деактивировал и убрал на пояс свой меч, затем подобрал с пола старый шлем.",
        "merge": true,
        "var_equal": [
          "sword157",
          1,
          "helmet",
          1
        ]
      },
      {
        "id": 213,
        "text": "\n   Юноша вернулся к тому месту, где остался лежать шлем, и вновь взял его в руки.",
        "var_equal": [
          "force157",
          1,
          "helmet",
          1
        ],
        "merge": true
      },
      {
        "id": 157,
        "text": "Дальше",
        "var_set": [
          "sword157",
          0,
          "force157",
          0
        ]
      }
    ]
  },
  {
    "id": 214,
    "text": "   Орнас",
    "answers": [
      {
        "id": 218,
        "text": "Пройти в кабину пилота",
        "var_set": [
          "ship",
          1
        ]
      },
      {
        "id": 219,
        "text": "Пройти в складские отсеки",
        "var_set": [
          "ship",
          1
        ]
      },
      {
        "id": 157,
        "text": "Покинуть корабль",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "ship",
          0
        ]
      },
      {
        "id": 214,
        "text": " осторожно поднялся по трапу внутрь полуразрушенного корабля.",
        "var_equal": [
          "ship",
          0
        ],
        "merge": true
      },
      {
        "id": 214,
        "text": " осторожно вернулся к трапу звездолёта.",
        "var_equal": [
          "ship",
          1
        ],
        "merge": true
      },
      {
        "id": 214,
        "text": " находился у самого трапа звездолёта.",
        "merge": true,
        "var_equal": [
          "ship",
          2
        ]
      },
      {
        "id": 214,
        "text": " Через истлевшую обшивку тут и там пробивались солнечные лучи, из дыр в стенах торчали провода и детали.\n   Вся кормовая часть судна была завалена обломками и казалась очень шаткой, поэтому юноша не рискнул осматривать её. Зато кабина пилота и складские отсеки выглядели весьма надёжно, должно быть, их специально укрепили более прочными материалами.",
        "merge": true
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      }
    ]
  },
  {
    "id": 215,
    "text": "   Орнас ",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = ( g.previous_id == 157 and \"подошёл к приборной панели и внимательно осмотрел её. Его внимание сразу привлёк пучок переплетённых силовых кабелей, грубо врезанных в корпус терминала и тянущихся к звездолёту.\" or \"стоял возле приборной панели, внимательно осматривая её. В корпус терминала был грубо врезан пучок переплетённых силовых кабелей, тянущихся к звездолёту.\") .. \" У места крепления проводов располагался самодельный переключатель,\"\nreturn text\nend",
        "id": 215,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "merge": true
      },
      {
        "var_equal": [
          "panel5",
          1
        ],
        "id": 215,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "panel6",
          0
        ]
      },
      {
        "var_show": [
          "panel6"
        ],
        "var_random": [
          "panel5",
          0,
          1,
          "panel6",
          0,
          1
        ],
        "id": 215,
        "text": "panel6:",
        "need": 1000,
        "merge": false
      },
      {
        "var_show": [
          "panel5"
        ],
        "comment": false,
        "id": 215,
        "text": "panel5:",
        "need": [
          1000
        ],
        "var_set": [
          "activeblock",
          4
        ]
      },
      {
        "id": 215,
        "text": " рядом с которым тускло мигал красный светодиод.",
        "merge": true,
        "var_equal": [
          "panel5",
          0
        ]
      },
      {
        "id": 215,
        "text": " рядом с которым ярко светился зелёный светодиод.",
        "merge": true,
        "var_equal": [
          "panel5",
          1
        ]
      },
      {
        "id": 215,
        "text": "\n   На экране терминала была надпись: \"Смерть – лишь последний этап жизни\", рядом затаились два переключателя. Верхний был активен и едва заметно подсвечивался.",
        "merge": true,
        "var_equal": [
          "panel6",
          0
        ]
      },
      {
        "id": 215,
        "text": "\n   На экране терминала была надпись: \"Смерть – лишь последний этап жизни\", рядом затаились два переключателя. Нижний был активен и едва заметно подсвечивался.",
        "merge": true,
        "var_equal": [
          "panel6",
          1
        ]
      },
      {
        "id": 215,
        "text": " Чуть ниже виднелось изображение четырёх незакрашенных прямоугольников.",
        "var_equal": [
          "activeblock",
          0
        ],
        "merge": true
      },
      {
        "id": 215,
        "text": "Чуть ниже виднелось изображение одного закрашенного и трёх пустых прямоугольников.",
        "var_equal": [
          "activeblock",
          1
        ],
        "merge": true
      },
      {
        "id": 215,
        "text": " Чуть ниже виднелось изображение двух пустых и двух закрашенных прямоугольников.",
        "var_equal": [
          "activeblock",
          2
        ],
        "merge": true
      },
      {
        "id": 215,
        "text": " Чуть ниже виднелось изображение одного пустого и трёх закрашенных прямоугольников.",
        "var_equal": [
          "activeblock",
          3
        ],
        "merge": true
      },
      {
        "id": 215,
        "text": " Чуть ниже виднелось изображение четырёх закрашенных прямоугольников, которые были обведены ярко мигающей жёлтым светом рамкой.",
        "var_equal": [
          "activeblock",
          4,
          "panel6",
          0
        ],
        "merge": true
      },
      {
        "id": 215,
        "text": " Чуть ниже виднелось изображение четырёх закрашенных прямоугольников, яркая рамка вокруг которых перестала раздражающе мигать и переливалась ярко-голубым светом.",
        "merge": true,
        "var_equal": [
          "activeblock",
          4,
          "panel6",
          1
        ]
      },
      {
        "var_not": [
          "victory158",
          2
        ],
        "id": 215,
        "calculate": true,
        "text": "система временной победы",
        "var_set": [
          "tempvictory",
          "victory158"
        ]
      },
      {
        "var_equal": [
          "panel6",
          1
        ],
        "id": 215,
        "text": "nmove 15",
        "calculate": true,
        "var_set": [
          "victory158",
          2
        ]
      },
      {
        "var_equal": [
          "panel6",
          0
        ],
        "id": 215,
        "calculate": true,
        "text": "система временной победы",
        "var_set": [
          "victory158",
          "tempvictory"
        ]
      },
      {
        "id": 216,
        "text": "Использовать самодельный переключатель"
      },
      {
        "id": 217,
        "text": "Активировать нижний переключатель",
        "var_equal": [
          "panel6",
          0
        ]
      },
      {
        "id": 157,
        "text": "Отойти от панели"
      }
    ]
  },
  {
    "id": 216,
    "text": "   Орнас провернул рукоять переключателя до слабого щелчка и увидел,",
    "answers": [
      {
        "var_equal": [
          "panel5",
          0,
          "message216",
          0
        ],
        "id": 216,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "message216",
          1,
          "panel5",
          1
        ]
      },
      {
        "var_equal": [
          "panel5",
          1,
          "message216",
          0
        ],
        "id": 216,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "message216",
          2,
          "panel5",
          0
        ]
      },
      {
        "id": 216,
        "text": " как прямо рядом с ней загорелся зелёный светодиод.",
        "merge": true,
        "var_equal": [
          "message216",
          1
        ]
      },
      {
        "id": 216,
        "text": " как прямо рядом с ней загорелся красный светодиод.",
        "merge": true,
        "var_equal": [
          "message216",
          2
        ]
      },
      {
        "isBack": true,
        "id": 216,
        "forget": 216,
        "text": "Дальше",
        "backstepCount": 1,
        "var_set": [
          "message216",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p5 = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 203
      }
    ]
  },
  {
    "id": 217,
    "text": "   Орнас аккуратно нажал на кнопку нижнего переключателя, но ничего не произошло",
    "answers": [
      {
        "id": 217,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\npanel5 = panel5 or 0\nactiveblock = activeblock or 0\nif activeblock ~= 4 or panel5 == 1 then\nmessage217 = 1\nelse panel6 = 1\nmessage2217 = 1\nend\nend"
      },
      {
        "id": 217,
        "text": ", только загорелась лампочка возле него. Даже если изменения и произошли где-то в другом месте, то Орнас не знал, где именно",
        "merge": true,
        "var_equal": [
          "message2217",
          1
        ]
      },
      {
        "id": 217,
        "text": ".",
        "merge": true
      },
      {
        "isBack": true,
        "id": 217,
        "forget": 217,
        "text": "Дальше",
        "backstepCount": 1,
        "var_set": [
          "message217",
          0,
          "message2217",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p5 = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 203
      }
    ]
  },
  {
    "id": 218,
    "text": "   ",
    "answers": [
      {
        "var_max": [
          "text218",
          2
        ],
        "var_add": [
          "text218",
          1
        ],
        "id": 218,
        "calculate": true,
        "text": " текст кабины 1"
      },
      {
        "var_equal": [
          "text218",
          1
        ],
        "id": 218,
        "calculate": false,
        "text": "К счастью, кабина пилота и центр управления отлично сохранились, как и вся электроника, и часть вспомогательных систем. Аккуратно присев на кресло перед приборной панелью, Орнас попытался разобраться в бессчётном множестве кнопок, лампочек и переключателей.\n   ",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn takeOnArmlet ~= 1 \nend",
        "var_equal": [
          "text218",
          2
        ],
        "id": 218,
        "text": "Орнас находился в жёстком кресле пилота за приборной панелью, пытаясь разобраться в бесчисленных кнопках, индикаторах и переключателях.",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nlocal a = takeOnArmlet\ntakeOnArmlet = nil\nreturn a == 1 \nend",
        "var_equal": [
          "text218",
          2
        ],
        "id": 218,
        "text": "Немного повозившись, Орнас надел браслет на левую руку.\n   Он откинулся на спинку жёсткого кресла пилота за приборной панелью, перестав на пару секунд вглядываться в бесчисленные кнопки, индикаторы и переключатели.",
        "calculate": false,
        "merge": true
      },
      {
        "var_not": [
          "activeblock",
          4
        ],
        "id": 218,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "energyonship",
          0
        ]
      },
      {
        "var_not": [
          "panel5",
          1
        ],
        "id": 218,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "energyonship",
          0
        ]
      },
      {
        "var_equal": [
          "activeblock",
          4,
          "panel5",
          1
        ],
        "id": 218,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "energyonship",
          1
        ]
      },
      {
        "id": 218,
        "var_not": [
          "energyonship",
          1
        ],
        "text": " Индикаторы на информационной панели показывали почти нулевой уровень энергии: его хватало на поддержание основных систем корабля, но ни двигатели, ни, тем более, энергетические щиты и орудия работать не могли.",
        "merge": true
      },
      {
        "var_not": [
          "fire223",
          1
        ],
        "var_equal": [
          "energyonship",
          1
        ],
        "id": 218,
        "text": " Индикаторы на информационной панели показывали очень низкий уровень энергии: его хватало на поддержание основных систем корабля, а также на запуск двигателей, энергетических щитов или залп бортовых орудий.\n   \"Поздновато активировать двигатели или щиты при таком состоянии корабля\", – мысленно усмехнулся Орнас.",
        "merge": true
      },
      {
        "id": 220,
        "text": "Просмотреть бортовой журнал",
        "var_set": [
          "jour218",
          1
        ]
      },
      {
        "id": 221,
        "text": "Просмотреть записи входящих сообщений",
        "var_set": [
          "mes218",
          1
        ]
      },
      {
        "id": 222,
        "text": "Направить энергию к орудиям",
        "var_not": [
          "fire223",
          1
        ],
        "var_equal": [
          "energyonship",
          1
        ]
      },
      {
        "var_not": [
          "text218",
          2
        ],
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "need": [
          1000
        ]
      },
      {
        "var_not": [
          "take39",
          1
        ],
        "var_equal": [
          "jour218",
          1,
          "mes218",
          1
        ],
        "id": 218,
        "text": "\n   Внимание Орнаса привлёк странный предмет, лежащий на самом краю приборной панели. Он бы так и остался незамеченным, если бы юноша не решил осмотреть бортовой журнал и голографические сообщения.",
        "merge": true
      },
      {
        "var_not": [
          "take39",
          1
        ],
        "var_equal": [
          "jour218",
          1,
          "mes218",
          1
        ],
        "id": 39,
        "text": "Осмотреть странный предмет",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "merge": false
      },
      {
        "id": 214,
        "text": "Вернуться к трапу",
        "var_set": [
          "text218",
          0
        ]
      },
      {
        "id": 218,
        "text": "tune arm's",
        "need": 1000,
        "var_set": [
          "arm2",
          0,
          "arm3",
          0
        ]
      },
      {
        "super_calculate": false,
        "id": 218,
        "calculate": true,
        "lua_do": "function lua_do()\n\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 219,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 219,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nlocal text = (g.previous_id == 214 and \"оказался \" or \"стоял \") .. \"в просторном тёмном отсеке, до потолка заставленном ящиками и контейнерами. Некоторые из них прохудились от старости, рассыпав своё истлевшее содержимое наружу и превратившись в груды хлама, другие всё ещё были достаточно прочны.<s>ufeff<s>\n\"\nreturn text\nend",
        "merge": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ],
        "var_equal": [
          "destroy224",
          2
        ],
        "id": 266,
        "text": "Собрать дроида",
        "var_set": [
          "destroy224",
          0
        ]
      },
      {
        "id": 219,
        "text": "   Между стальными ящиками суетливо перемещался серебристый дроид-секретарь, который не обратил на вошедшего джедая никакого внимания.\n   \"О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну!\" – только и сказал он, завершив очередной круг по отсеку.\n   Быстро изучив траекторию движения дроида, Орнас и впрямь увидел два небольших сейфа у самой стены. В них, несомненно, находилось что-то весьма ценное, а дроид, если ему верить, был ключом от одного из них.",
        "var_not": [
          "destroy224",
          1,
          "destroy224",
          2
        ],
        "merge": true
      },
      {
        "id": 219,
        "text": "   У самой стены, за стальными ящиками, располагались два небольших сейфа, на полу возле которых были разбросаны разбитые схемы, провода и фрагменты корпуса старого дроида-секретаря.",
        "merge": true,
        "var_equal": [
          "destroy224",
          1
        ]
      },
      {
        "id": 219,
        "text": "   У самой стены, за стальными ящиками, располагались два небольших сейфа, на полу возле которых были аккуратно разложены детали разобранного дроида-секретаря.",
        "var_equal": [
          "destroy224",
          2
        ],
        "merge": true
      },
      {
        "var_not": [
          "destroy224",
          1,
          "destroy224",
          2
        ],
        "var_equal": [
          "dia224",
          3
        ],
        "id": 228,
        "calculate": false,
        "text": "Уничтожить дроида",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 2\nend"
      },
      {
        "var_not": [
          "destroy224",
          1,
          "destroy224",
          2
        ],
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\nreturn force_ab == 3\nend",
        "var_equal": [
          "dia224",
          3
        ],
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 2\nachAbsolute = (achAbsolute or 0) <plus> 1\nend",
        "text": "Уничтожить дроида молниями",
        "calculate": false,
        "id": 91
      },
      {
        "var_str_set": [
          "di224",
          "сейчас не добиться, Орнас устало вздохнул."
        ],
        "var_not": [
          "dia224",
          3,
          "dial224",
          3
        ],
        "lua_if": "function lua_if()\ndestroy224 = destroy224 or 0\nreturn destroy224 == 0\nend",
        "id": 224,
        "text": "Поговорить с дроидом"
      },
      {
        "var_not": [
          "destroy224",
          1,
          "destroy224",
          2
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ],
        "var_equal": [
          "style",
          4
        ],
        "id": 225,
        "var_need": [
          "dia224",
          1
        ],
        "text": "Разобрать дроида и просканировать его память"
      },
      {
        "id": 226,
        "text": "Подойти к большому сейфу"
      },
      {
        "id": 227,
        "text": "Подойти к маленькому сейфу"
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст\nRun for helmet",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "id": 214,
        "text": "Вернуться к трапу"
      },
      {
        "super_calculate": false,
        "id": 219,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeSafes = 1\nend",
        "calculate": true
      }
    ]
  },
  {
    "id": 220,
    "text": "   Юноша быстро пробежал взглядом по записям в электронном бортовом журнале.<s>r\n   Лёгкий грузовой шаттл \"Чёрное Пламя\" какое-то время хаотично, на взгляд Орнаса, скитался по галактике, в списке последних посещённых систем значились Кейто-Неймодия, Коррибан и Манаан. После долгого перелёта корабль оказался здесь. Цель полёта – этот самый спутник, на котором сейчас находилось то, что осталось от звездолёта. При заходе в атмосферу произошёл отказ целого ряда систем, и \"Чёрное Пламя\", пробив стену храма, аварийно приземлился прямо внутри него.<s>r\n   После этого журнал обрывался. Что бы ни произошло с экипажем, записей о последующих событиях они не оставили.",
    "answers": [
      {
        "forget": 220,
        "text": "Назад",
        "id": 218,
        "lua_do": "function lua_do()\ncondition = condition or {}\ncondition.knowTheNameOfShip = 1\nend"
      }
    ]
  },
  {
    "id": 221,
    "text": "   Отыскав нужный инструмент на приборной панели, Орнас активировал проектор. В памяти корабля хранилось всего одно входящее сообщение, другие записи оказались стёрты. После серии гудков и непродолжительного потрескивания перед джедаем появилась небольшая голограмма – прозрачная фигура сгорбленного гуманоида в богатых одеждах.<s>r\n   \"Нье забудьте о моём личном поручении, Феникс, – с характерным для неймодианцев акцентом проговорила голограмма. – Я нье потьерплю провала. Вы должны собрать камьеру строго по инструкции, иначе объект погибньет. Сами знаетье кто был бы весьма разочарован таким поворотом событий, так что нье подведите менья.\"",
    "answers": [
      {
        "lua_do": "function lua_do()\ncondition = condition or {}\ncondition.seeTheMessageInShip = 1\nend",
        "text": "Назад",
        "forget": 221,
        "id": 218
      }
    ]
  },
  {
    "id": 222,
    "text": "   Повернувшись в старом кресле к нужным приборам, Орнас попытался перенаправить основную мощность на батарею турболазеров, располагавшуюся непосредственно под кабиной пилота. Получив сообщение о готовности орудий, джедай нерешительно потянул рычаг управления, пытаясь выбрать подходящую цель, но система наведения не реагировала на его команды и лазеры продолжали смотреть на внутреннюю стену храма, возле которой располагалась древняя панель.",
    "answers": [
      {
        "id": 223,
        "text": "Открыть огонь"
      },
      {
        "backstepCount": 1,
        "forget": 222,
        "text": "Назад",
        "isBack": true,
        "id": 222
      }
    ]
  },
  {
    "id": 223,
    "text": "   Юноша мягко надавил большим пальцем на кнопку рычага управления, но за долгое время механизм потерял податливость, так необходимую любой оружейной системе. Тогда Орнас приложил значительные усилия и на этот раз добился успеха: жесткая кнопка со скрежетом ушла вглубь рычага.<s>r\n   Получив сигнал, орудия под кокпитом за считанные секунды накопили нужный заряд и разрядили его четырьмя зелёными импульсами, прочертившими яркие лучи от корабля до стены. Чудовищный взрыв уничтожил часть стены с приборной панелью и поднял в воздух мириады осколков.<s>r\n   Не успели осесть столбы взвившейся пыли, как корабль разразился новым залпом орудий. Только в этот момент Орнас заметил, что кнопка управления орудиями так и застряла в нажатом положении, и поспешил вернуть её в исходную позицию. Тем временем зелёные лучи устремились сквозь пыль в образовавшийся проём в стене, затем послышались новые взрывы, грохот камней и протяжный гул.\n   Тонкий писк оповестил джедая о том, что уровень энергии достиг критически низкого значения, большего от корабля добиться не получится.",
    "answers": [
      {
        "id": 218,
        "text": "Дальше",
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0,
          "col1stat",
          2,
          "col4stat",
          2
        ],
        "var_equal": [
          "brokencoloumns",
          0
        ]
      },
      {
        "id": 218,
        "text": "Дальше",
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0,
          "col4stat",
          2
        ],
        "var_equal": [
          "col1stat",
          2,
          "brokencoloumns",
          1
        ]
      },
      {
        "id": 218,
        "text": "Дальше",
        "var_equal": [
          "col2stat",
          2,
          "brokencoloumns",
          1
        ],
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0,
          "col1stat",
          2
        ]
      },
      {
        "id": 218,
        "text": "Дальше",
        "var_equal": [
          "col3stat",
          2,
          "brokencoloumns",
          1
        ],
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0,
          "col1stat",
          2
        ]
      },
      {
        "id": 218,
        "text": "Дальше",
        "var_equal": [
          "col4stat",
          2,
          "brokencoloumns",
          1
        ],
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0,
          "col1stat",
          2
        ]
      },
      {
        "id": 218,
        "text": "Дальше",
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0
        ],
        "var_equal": [
          "brokencoloumns",
          2
        ]
      },
      {
        "id": 218,
        "text": "Дальше",
        "var_equal": [
          "brokencoloumns",
          3
        ],
        "var_set": [
          "fire223",
          1,
          "energyonship",
          0,
          "brokencoloumns",
          2,
          "victory158",
          1,
          "panel5",
          0,
          "col1stat",
          2,
          "col4stat",
          2,
          "col2stat",
          0,
          "col3stat",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = 1\nmiddleRoom.monsterIsDead = 1\n\ng.achievements = g.achievements or {}\ng.achievements.tactic = g.achievements.tactic or 0\n\ng.achievements.alarm = g.achievements.tactic == 0 and 16 or 0\ng.achievements.tactic = 1\n\npics = pics or {}\npics.a9 = 1\n\n\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 223
      }
    ]
  },
  {
    "id": 224,
    "text": "– Привет, – нерешительно сказал юноша. – Ты меня понимаешь?\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – сказал дроид, на этот раз посмотрев прямо в глаза Орнаса.",
    "answers": [
      {
        "merge": false,
        "id": 224,
        "text": "сброс диалога",
        "need": 1000,
        "var_set": [
          "dia224",
          0,
          "dial224",
          0
        ]
      },
      {
        "var_str_set": [
          "di224",
          "добиться всё равно не выйдет, Орнас устало вздохнул. Он ведь предупредил эту глупую железяку, но дроид сам определил свою участь."
        ],
        "var_equal": [
          "dia224",
          3
        ],
        "id": 224,
        "text": "Фраза",
        "calculate": true
      },
      {
        "var_no_more": [
          "dial224",
          0
        ],
        "id": 783,
        "instant": false,
        "text": "– Что ты имеешь в виду?",
        "var_set": [
          "dial224",
          1,
          "dia224",
          1
        ]
      },
      {
        "id": 224,
        "text": "\n– Что ты имеешь в виду? – удивился юноша. – Ты ведь дроид-секретарь, ты должен понимать меня.\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – вновь проговорил дроид, полагая, видимо, этот ответ достаточным.",
        "merge": true,
        "var_equal": [
          "dial224",
          1
        ]
      },
      {
        "var_need": [
          "dia224",
          1
        ],
        "var_equal": [
          "dial224",
          0
        ],
        "id": 784,
        "text": "– Ты знаешь какие-нибудь другие слова?",
        "instant": false,
        "var_set": [
          "dial224",
          2,
          "dia224",
          2
        ]
      },
      {
        "id": 224,
        "text": "\n– Ты знаешь какие-нибудь другие слова? – голос юноши звучал раздражённо. – Или это всё, что заложили в твою программу?\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – вновь проговорил дроид, подтверждая догадку джедая.",
        "merge": true,
        "var_equal": [
          "dial224",
          2
        ]
      },
      {
        "var_equal": [
          "dial224",
          0,
          "dia224",
          2
        ],
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) - 1\nend",
        "text": "– Если ты ещё раз повторишь эту фразу, я разнесу тебя на кусочки!",
        "id": 785,
        "var_set": [
          "dia224",
          3,
          "dial224",
          3
        ]
      },
      {
        "id": 224,
        "text": "\n– Если ты ещё раз повторишь эту фразу, я разнесу тебя на кусочки! – пригрозил юноша, хотя уже сам понимал, что ничего этим не добьётся.\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – вновь проговорил дроид, будто насмехаясь над неуместной попыткой запугать себя.",
        "merge": true,
        "var_equal": [
          "dia224",
          3
        ]
      },
      {
        "var_show": [
          "di224"
        ],
        "id": 224,
        "text": "\n   Поняв, что большего от этого странного упрямого механизма",
        "var_not": [
          "dial224",
          0
        ],
        "merge": true
      },
      {
        "forget": 224,
        "backstepCount": 1,
        "id": 224,
        "text": "Отойти от дроида",
        "isBack": true,
        "var_set": [
          "dial224",
          0
        ]
      }
    ]
  },
  {
    "id": 225,
    "text": "   Поведение протокольного дроида показалась Орнасу довольно странным. Дождавшись, когда он вернётся после очередного круга, юноша аккуратно отключил его, а затем быстро открутил голову, содержащую основной блок памяти. Просканировав программу дроида с помощью карманного устройства, Орнас обнаружил, что в ней не самом деле не было ничего, кроме кода, отвечающего за перемещение, и единственной фразы, которую дроид всё время и повторял. Не было там никаких секретных ключей, если только эта глупая фраза сама не являлась подсказкой к шифру.\n   Юноша разочарованно вздохнул: чья-то глупая шутка отняла у него слишком много времени.",
    "answers": [
      {
        "id": 266,
        "text": "Собрать дроида",
        "var_set": [
          "destroy224",
          0
        ]
      },
      {
        "id": 219,
        "text": "Оставить дроида разобранным",
        "var_set": [
          "destroy224",
          2
        ]
      }
    ]
  },
  {
    "id": 226,
    "text": "   Орнас подошёл ближе к большому сейфу и внимательно осмотрел его. Он был выполнен из толстых листов металла, достаточно прочных, чтобы защитить ценное содержимое.",
    "answers": [
      {
        "var_not": [
          "style",
          1,
          "style",
          3
        ],
        "id": 226,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "bang226",
          1
        ]
      },
      {
        "var_not": [
          "style",
          2,
          "style",
          4,
          "style",
          5,
          "style",
          6
        ],
        "id": 226,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "bang226",
          100
        ]
      },
      {
        "var_equal": [
          "opened229",
          0
        ],
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "text": "Подобрать комбинацию",
        "id": 229,
        "var_set": [
          "seq229",
          1,
          "enter229",
          0,
          "1show232",
          0,
          "2show232",
          0,
          "3show232",
          0,
          "4show232",
          0,
          "5show232",
          0,
          "6show232",
          0,
          "7show232",
          0,
          "8show232",
          0,
          "9show232",
          0,
          "10show232",
          0,
          "11show232",
          0,
          "12show232",
          0,
          "13show232",
          0
        ]
      },
      {
        "id": 458,
        "text": "Вскрыть с помощью меча",
        "var_equal": [
          "opened229",
          0
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "opened229",
          0
        ],
        "id": 226,
        "text": " На дверце располагался кодовый замо́к, весьма надёжный на вид.\n   Можно было бы подобрать нужную комбинацию или попробовать вскрыть сейф с помощью светового меча, пусть и с риском повредить то, что хранится внутри.",
        "merge": true
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "opened229",
          1
        ],
        "id": 226,
        "text": " На дверце располагался кодовый замо́к, весьма надёжный на вид, однако уже разблокированный.",
        "merge": true
      },
      {
        "id": 226,
        "text": " В его корпусе зияла небольшая пробоина в том месте, где когда-то располагался замок, поэтому открыть его сейчас ничто не мешало.",
        "var_equal": [
          "opened229",
          2
        ],
        "merge": true
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "text": "Открыть дверцу сейфа",
        "id": 212,
        "var_not": [
          "opened229",
          0
        ]
      },
      {
        "forget": 226,
        "text": "Отойти от сейфа",
        "id": 219
      }
    ]
  },
  {
    "id": 227,
    "text": "empty   Юноша подошёл ближе к небольшому сейфу из тёмного металла. На его корпусе не было ни стыков, ни швов, ни неровностей. От гладкой матовой поверхности веяло неестественным холодом. Словно целиком отлитый из магматической породы в жерле неведомого вулкана, сейф внушал Орнасу ощущение твердости и надёжности. В нём, безусловно, должно храниться что-то поистине бесценное.",
    "answers": [
      {
        "id": 227,
        "text": "text",
        "lua_text": "function lua_text()\nlocal text = takeOnArmlet == 1 and\n[=[  Юноша ещё раз оглядел небольшой сейф из тёмного металла. На его корпусе не было ни стыков, ни швов, ни неровностей. От гладкой матовой поверхности веяло неестественным холодом. Словно целиком отлитый из магматической породы в жерле неведомого вулкана, сейф внушал Орнасу ощущение твердости и надёжности. В нём, безусловно, должно храниться что-то поистине бесценное.]=]\n\n or \n[=[   Юноша подошёл ближе к небольшому сейфу из тёмного металла. На его корпусе не было ни стыков, ни швов, ни неровностей. От гладкой матовой поверхности веяло неестественным холодом. Словно целиком отлитый из магматической породы в жерле неведомого вулкана, сейф внушал Орнасу ощущение твердости и надёжности. В нём, безусловно, должно храниться что-то поистине бесценное.]=]\ntakeOnArmlet = nil\nreturn text\n\nend",
        "merge": true
      },
      {
        "id": 227,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal a = (arm1 == 3 and 1 or 0) <plus> (arm2 == 3 and 1 or 0) <plus> (arm3 == 3 and 1 or 0)\n  if a == 1 then\n    text = \"<s>\n   Браслет из такого же чёрного материала лежал на полу перед сейфом.\"\n  elseif a > 1 then \n    text = \"<s>\n   Браслеты из такого же чёрного материала лежали на полу перед сейфом.\"\n  end\nreturn text .. \"<s>\n   Джедай приблизил руку к поверхности этого странного предмета и почувствовал, как необычный металл буквально впитывает в себя тепло. Юноша быстро одёрнул руку и увидел, как в месте его прикосновения начали появляться неразборчивые символы, становящиеся всё более отчётливыми.\"\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal a = (arm1 == 3 and 1 or 0) <plus> (arm2 == 3 and 1 or 0) <plus> (arm3 == 3 and 1 or 0)\n  if a == 1 then\n    text = \"Надеть браслет\"\n  elseif a > 1 then \n    text =\"Надеть браслеты\"\n  end\nreturn text\nend",
        "super_calculate": false,
        "id": 927,
        "text": "Надеть браслеты",
        "lua_if": "function lua_if()\nlocal a = (arm1 == 3 and 1 or 0) <plus> (arm2 == 3 and 1 or 0) <plus> (arm3 == 3 and 1 or 0)\nreturn a > 0\nend",
        "calculate": false
      },
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal a = (arm1 == 1 and 1 or 0) <plus> (arm2 == 1 and 1 or 0) <plus> (arm3 ==1 and 1 or 0)\n  if a == 1 then\n    text = \"Снять браслет и оставить его перед сейфом\"\n  elseif a > 1 then \n    text =\"Снять браслеты и оставить их перед сейфом\"\n  end\nreturn text\nend",
        "super_calculate": false,
        "id": 928,
        "text": "Снять браслеты",
        "lua_if": "function lua_if()\nlocal a = (arm1 == 1 and 1 or 0) <plus> (arm2 == 1 and 1 or 0) <plus> (arm3 ==1 and 1 or 0)\nreturn a > 0\nend",
        "calculate": false
      },
      {
        "var_not": [
          "opened235",
          1
        ],
        "lua_do": "function lua_do()\nvars[\"236_suc\"] = vars[\"236_suc\"] or 0\nlocal a = {}\n  for i = 1, 27 do\n    a[i] = 424 <plus> i\n  end\n    for i in pairs(a) do\n      j = math.random(27)\n      a[i],a[j] = a[j],a[i]\n    end\nfor i in pairs(a) do\n  vars[\"sup_236_\" .. i ] = a[i]\nend\n\nhideMap = 1\n\nend",
        "text": "Притронуться к символам",
        "id": 235,
        "var_set": [
          "seq229",
          1,
          "enter229",
          10
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "text": "Открыть дверцу сейфа",
        "id": 237,
        "var_equal": [
          "opened235",
          1
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "opened235",
          1
        ],
        "id": 227,
        "text": " Затем поверхность сейфа задрожала и Орнас увидел, как из гладкого металла формируется небольшая ручка.",
        "merge": true
      },
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "forget": 227
      }
    ]
  },
  {
    "id": 228,
    "text": "   Устав от монотонных причитаний протокольного дроида, Орнас одним быстрым движением светового меча разрубил металлический корпус от плеча к бедру. Вновь и вновь нанося удары сияющим клинком, джедай чувствовал, как постепенно угасает его раздражение. Лишь окончательно обратив останки вздорного дроида в груду металлолома, юноша с облегчением выдохнул.\n   Какой бы ключ не скрывал в себе этот несносный механизм, теперь он оказался навсегда утерян в осколках микросхем.",
    "answers": [
      {
        "backstepCount": 1,
        "isBack": true,
        "text": "Дальше",
        "id": 228,
        "var_set": [
          "destroy224",
          1
        ]
      }
    ]
  },
  {
    "id": 229,
    "text": "   Склонившись над самой панелью ввода, юноша начал вводить кодовую последовательность",
    "answers": [
      {
        "id": 232,
        "text": "Подпрога отображение введенных цифр",
        "run": [
          232
        ]
      },
      {
        "id": 229,
        "text": ".",
        "var_equal": [
          "try229",
          0
        ],
        "merge": true
      },
      {
        "var_equal": [
          "destroy224",
          0
        ],
        "var_less": [
          "try229",
          13
        ],
        "text": "\n   \"О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну!\" – услышал джедай, когда дроид завершил очередной круг по комнате.",
        "id": 229,
        "merge": true
      },
      {
        "isBack": true,
        "backstepCount": 1,
        "id": 229,
        "text": "¡ Дождаться конкатенации и сделать отображение ввода !\n\n\"О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну!\"\n\n\n1937249425212",
        "need": 1000,
        "forget": 229
      },
      {
        "var_not": [
          "enter229",
          "correct229",
          "enter229",
          0
        ],
        "id": 229,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "seq229",
          0
        ]
      },
      {
        "var_max": [
          "seq229",
          14
        ],
        "var_not": [
          "enter229",
          0
        ],
        "var_add": [
          "seq229",
          1
        ],
        "var_equal": [
          "enter229",
          "correct229"
        ],
        "id": 229,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_equal": [
          "seq229",
          1
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          1
        ]
      },
      {
        "var_equal": [
          "seq229",
          2
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          9
        ]
      },
      {
        "var_equal": [
          "seq229",
          3
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          3
        ]
      },
      {
        "var_equal": [
          "seq229",
          4
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          7
        ]
      },
      {
        "var_equal": [
          "seq229",
          5
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          2
        ]
      },
      {
        "var_equal": [
          "seq229",
          6
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          4
        ]
      },
      {
        "var_equal": [
          "seq229",
          7
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          9
        ]
      },
      {
        "var_equal": [
          "seq229",
          8
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          4
        ]
      },
      {
        "var_equal": [
          "seq229",
          9
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          2
        ]
      },
      {
        "var_equal": [
          "seq229",
          10
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          5
        ]
      },
      {
        "var_equal": [
          "seq229",
          11
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          2
        ]
      },
      {
        "var_equal": [
          "seq229",
          12
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          1
        ]
      },
      {
        "var_equal": [
          "seq229",
          13
        ],
        "id": 229,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "correct229",
          2
        ]
      },
      {
        "var_set": [
          "enter229",
          1
        ],
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 1 ]",
        "instant": true,
        "left_answer": true
      },
      {
        "right_answer": true,
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 2 ]",
        "instant": true,
        "var_set": [
          "enter229",
          2
        ]
      },
      {
        "var_set": [
          "enter229",
          3
        ],
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 3 ]",
        "instant": true,
        "left_answer": true
      },
      {
        "right_answer": true,
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 4 ]",
        "instant": true,
        "var_set": [
          "enter229",
          4
        ]
      },
      {
        "var_set": [
          "enter229",
          5
        ],
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 5 ]",
        "instant": true,
        "left_answer": true
      },
      {
        "right_answer": true,
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 6 ]",
        "instant": true,
        "var_set": [
          "enter229",
          6
        ]
      },
      {
        "var_set": [
          "enter229",
          7
        ],
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 7 ]",
        "instant": true,
        "left_answer": true
      },
      {
        "right_answer": true,
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 8 ]",
        "instant": true,
        "var_set": [
          "enter229",
          8
        ]
      },
      {
        "var_set": [
          "enter229",
          9
        ],
        "var_not": [
          "try229",
          14,
          "try229",
          15,
          "try229",
          13
        ],
        "var_add": [
          "try229",
          1
        ],
        "calculate": false,
        "id": 229,
        "text": "[ 9 ]",
        "instant": true,
        "left_answer": true
      },
      {
        "var_not": [
          "seq229",
          14
        ],
        "var_equal": [
          "try229",
          13
        ],
        "id": 229,
        "text": "\n   Как только Орнас ввёл последнюю цифру,  послышался громкий скрежет, а панель ввода замигала красным светом. Похоже, что он где-то допустил ошибку, введённая комбинация не подходит.",
        "merge": true
      },
      {
        "id": 229,
        "text": "\n   Как только Орнас ввёл последнюю цифру,  раздался еле уловимый щелчок, а панель ввода замигала зелёным светом. Введённая комбинация оказалась верной, теперь можно осмотреть содержимое сейфа.",
        "merge": true,
        "var_equal": [
          "seq229",
          14
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "seq229",
          14
        ],
        "id": 212,
        "text": "Открыть дверцу сейфа",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.openedNorm = 1\nend",
        "var_set": [
          "opened229",
          1
        ]
      },
      {
        "id": 229,
        "lua_do": "function lua_do()\n--hideMap = 0\nend",
        "isBack": true,
        "backstepCount": 2,
        "text": "Отойти от сейфа",
        "forget": 229,
        "var_set": [
          "enter229",
          0,
          "seq229",
          1,
          "try229",
          0
        ]
      }
    ]
  },
  {
    "id": 230,
    "text": "   ",
    "answers": [
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "text": "Новый ответ. введите текст",
        "id": 230,
        "calculate": true,
        "var_need": [
          "bang226",
          95
        ],
        "var_set": [
          "opened229",
          2
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "id": 230,
        "var_less": [
          "bang226",
          95
        ],
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "opened229",
          3
        ]
      },
      {
        "id": 230,
        "var_need": [
          "bang226",
          95
        ],
        "text": "Погрузившись в Силу, Орнас со всей осторожностью медленно повёл клинок через оплавляющийся металл вокруг замка, пока тот не оказался в центре неровной окружности с алеющим контуром. Теперь оставалось лишь аккуратно извлечь вырезанную часть и открыть сейф.",
        "merge": true
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.openedWithSaber = 1\nend",
        "text": "Открыть дверцу сейфа",
        "id": 212,
        "var_need": [
          "bang226",
          95
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "id": 230,
        "text": "Углубив клинок ещё немного, Орнас начал медленно вести его через оплавляющийся металл вокруг замка.",
        "var_less": [
          "bang226",
          95
        ],
        "merge": true
      },
      {
        "var_less": [
          "bang226",
          95
        ],
        "id": 231,
        "text": "Вдруг!..",
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5\n  if vars.key_on_position_3_avail == 1 then\n    location1.lastChanceKey = location1.lastChanceKey - 1\n  end\nend",
        "var_set": [
          "bang229",
          1
        ]
      }
    ]
  },
  {
    "id": 231,
    "text": "   За долю мгновения Орнас почувствовал опасность и рефлекторно укрылся барьером Силы от мощнейшего взрыва,  уже через секунду заполнившего всё пространство вокруг всполохами пламени и градом осколков. Должно быть, лезвие меча задело что-то из взрывоопасного содержимого сейфа, вызвав детонацию.<s>r\n   Оглушёный ударной волной, джедай распластался на полу в облаках пыли и дыма, окутывающих деформированные обломки звездолёта. Он поразился, как ему  вообще удалось уцелеть, находясь в самом эпицентре взрыва, но удивление его развеялось быстрее, чем осела пыль.<s>r\n   Старый наставник торопливо приблизился к Орнасу и быстро осмотрел его.<s>r\n– А ведь я почти успел! – раздосадованно прокричал он на ухо Орнасу, понимая, что юноша почти ничего не слышит. – Я до последнего надеялся, что тебе хватит благоразумия не делать этого... Еле успел защитить тебя.<s>r\n   Магистр обвёл помещение тяжёлым взглядом, неразборчиво проговорил ещё что-то и стал дожидаться, пока юноша придёт в себя и поднимется.",
    "answers": [
      {
        "id": 114,
        "text": "Встать и осмотреться"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.clumsyBurglar = g.achievements.clumsyBurglar or 0\n\ng.achievements.alarm = g.achievements.clumsyBurglar == 0 and -22 or 0\ng.achievements.clumsyBurglar = 1\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 231,
        "calculate": true
      }
    ]
  },
  {
    "id": 232,
    "text": "подпрограмма для отображения введенных цифр:\n",
    "answers": [
      {
        "var_equal": [
          "try229",
          1
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "1show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          2
        ],
        "id": 232,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "2show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          3
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "3show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          4
        ],
        "id": 232,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "4show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          5
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "5show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          6
        ],
        "id": 232,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "6show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          7
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "7show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          8
        ],
        "id": 232,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "8show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          9
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "9show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          10
        ],
        "id": 232,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "10show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          11
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "11show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          12
        ],
        "id": 232,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "12show232",
          "enter229"
        ]
      },
      {
        "var_equal": [
          "try229",
          13
        ],
        "id": 232,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "13show232",
          "enter229"
        ]
      },
      {
        "var_show": [
          "1show232"
        ],
        "id": 232,
        "text": ":\n",
        "var_not": [
          "1show232",
          0
        ],
        "merge": true
      },
      {
        "var_show": [
          "2show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "2show232",
          0
        ],
        "merge": true
      },
      {
        "var_show": [
          "3show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "3show232",
          0
        ],
        "merge": true
      },
      {
        "var_show": [
          "4show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "4show232",
          0
        ],
        "merge": true
      },
      {
        "var_not": [
          "5show232",
          0
        ],
        "id": 232,
        "text": " -",
        "var_show": [
          "5show232"
        ],
        "merge": true
      },
      {
        "var_not": [
          "6show232",
          0
        ],
        "id": 232,
        "text": " -",
        "var_show": [
          "6show232"
        ],
        "merge": true
      },
      {
        "var_not": [
          "7show232",
          0
        ],
        "id": 232,
        "text": " -",
        "var_show": [
          "7show232"
        ],
        "merge": true
      },
      {
        "var_not": [
          "8show232",
          0
        ],
        "id": 232,
        "text": " -",
        "var_show": [
          "8show232"
        ],
        "merge": true
      },
      {
        "var_not": [
          "9show232",
          0
        ],
        "id": 232,
        "text": " -",
        "var_show": [
          "9show232"
        ],
        "merge": true
      },
      {
        "var_show": [
          "10show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "10show232",
          0
        ],
        "merge": true
      },
      {
        "var_show": [
          "11show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "11show232",
          0
        ],
        "merge": true
      },
      {
        "var_show": [
          "12show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "12show232",
          0
        ],
        "merge": true
      },
      {
        "var_show": [
          "13show232"
        ],
        "id": 232,
        "text": " -",
        "var_not": [
          "13show232",
          0
        ],
        "merge": true
      },
      {
        "id": 229,
        "text": "На 229",
        "need": 1000
      }
    ]
  },
  {
    "id": 233,
    "text": "   На полке располагались полусгнившие деревянные коробки с гранатами. Судя по сохранившейся маркировке, они несли в себе ионные, криогенные и плазменные заряды. \"Против железяк есть, для заморозки есть, для прожарки — тоже есть\", – мысленно подвёл итоги осмотра юноша.\n   Орнас мог бы нести на поясе две гранаты без ощутимого стеснения движений.",
    "answers": [
      {
        "var_max": [
          "grenade",
          2,
          "grenade1",
          2,
          "grenade3",
          2,
          "grenade4",
          2
        ],
        "instant": false,
        "id": 233,
        "text": "Новый ответ. введите текст",
        "var_min": [
          "grenade",
          0,
          "grenade1",
          0,
          "grenade3",
          0,
          "grenade4",
          0
        ],
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "была прикреплена одна ионная граната.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          1,
          "grenade1",
          1
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "instant": true
      },
      {
        "var_str_set": [
          "show233",
          "была прикреплена одна криогенная граната.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          1,
          "grenade3",
          1
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "была прикреплена одна плазменная граната.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          1,
          "grenade4",
          1
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "были прикреплены две ионные гранаты.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          2,
          "grenade1",
          2
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "были прикреплены две криогенные гранаты.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          2,
          "grenade3",
          2
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "были прикреплены две плазменные гранаты.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          2,
          "grenade4",
          2
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "были прикреплены одна ионная и одна криогенная гранаты.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          2,
          "grenade1",
          1,
          "grenade3",
          1
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "были прикреплены одна ионная и одна плазменная гранаты.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          2,
          "grenade1",
          1,
          "grenade4",
          1
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_str_set": [
          "show233",
          "были прикреплены одна плазменная и одна криогенная гранаты.",
          "2show233",
          " "
        ],
        "var_equal": [
          "grenade",
          2,
          "grenade4",
          1,
          "grenade3",
          1
        ],
        "id": 233,
        "text": "Новый ответ. введите текст",
        "instant": true,
        "calculate": true
      },
      {
        "var_show": [
          "show233"
        ],
        "instant": true,
        "id": 233,
        "text": "<s>r\n   К его поясу ",
        "var_not": [
          "grenade",
          0
        ],
        "merge": true
      },
      {
        "right_answer": false,
        "var_add": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "id": 233,
        "text": "Взять ионную гранату\n[Выводит из строя электронику]",
        "instant": true,
        "var_no_more": [
          "grenade",
          1
        ]
      },
      {
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "middle_answer": true,
        "instant": true,
        "id": 233,
        "var_need": [
          "grenade1",
          1
        ],
        "text": "Выложить ионную гранату",
        "left_answer": false
      },
      {
        "var_add": [
          "grenade2",
          1,
          "grenade",
          1
        ],
        "id": 233,
        "text": "Взять свето-шумовую гранату",
        "need": 1000,
        "var_no_more": [
          "grenade",
          1
        ]
      },
      {
        "var_sub": [
          "grenade2",
          1,
          "grenade",
          1
        ],
        "id": 233,
        "text": "Выложить свето-шумовую гранату",
        "need": 1000,
        "var_need": [
          "grenade2",
          1
        ]
      },
      {
        "var_add": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "id": 233,
        "text": "Взять криогенную гранату\n[Замораживает и обездвиживает]",
        "instant": true,
        "var_no_more": [
          "grenade",
          1
        ]
      },
      {
        "instant": true,
        "middle_answer": true,
        "id": 233,
        "var_need": [
          "grenade3",
          1
        ],
        "text": "Выложить криогенную гранату",
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ]
      },
      {
        "var_add": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "id": 233,
        "text": "Взять плазменную гранату\n[Поражает высокотемпературной плазмой]",
        "instant": true,
        "var_no_more": [
          "grenade",
          1
        ]
      },
      {
        "instant": true,
        "middle_answer": true,
        "id": 233,
        "var_need": [
          "grenade4",
          1
        ],
        "text": "Выложить плазменную гранату",
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ]
      },
      {
        "id": 219,
        "text": "Отойти от сейфа"
      }
    ]
  },
  {
    "id": 234,
    "text": "   Приближаясь к блоку, Орнас услышал приглушённый щелчок и зажмурился от вспышки яркого света. Открыв глаза, он обнаружил, что часть комнаты, в которой он сейчас находился, оказалась ограждена от всего остального помещения силовыми лучами. ",
    "answers": [
      {
        "id": 234,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nlocal text = \"\"\n  if dess.isUpstairs == 1 then\n    text = \"Выбраться из этой ловушки без посторонней помощи было попросту невозможно, и Орнас с надеждой посмотрел туда, где, как он знал, была Десс.<s>\n– Ничего не вижу! – весело крикнула она и громко рассмеялась.<s>\n   Юноша выругался про себя и погрузился в медитацию.<s>ufeff Спустя какое-то время его внимание привлекли звуки шагов. Учитель неторопливо обошёл вокруг непроницаемого барьера, внимательно изучил источник лучей на потолке, затем осмотрел энергоблок. Наконец, он активировал один из переключателей и освободил падавана.\"\n  else\n    text = \"Выбраться из этой ловушки без посторонней помощи было попросту невозможно, поэтому джедай сел на каменный пол и погрузился в медитацию.<s>ufeff<s>\n   Спустя какое-то время внимание юноши привлекли звуки шагов. Его учитель неторопливо обошёл вокруг непроницаемого барьера, внимательно изучил источник лучей на потолке, затем осмотрел энергоблок. Наконец, он активировал один из переключателей и освободил падавана.\"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 115,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 235,
    "text": "   Орнас нерешительно протянул руку к поверхности сейфа, на которой, словно на экране, проявились группы символов. Судя по всему, надписи были элементами какого-то шифра, оставалось только решить, какая последовательность сможет разблокировать замок.",
    "answers": [
      {
        "var_more": [
          "236_sup",
          1
        ],
        "var_equal": [
          "236_correct",
          "236code"
        ],
        "id": 236,
        "text": "correct",
        "calculate": true,
        "var_set": [
          "236_suc",
          1
        ]
      },
      {
        "var_add": [
          "armseen235",
          "arm1seen",
          "armseen235",
          "arm2seen",
          "armseen235",
          "arm3seen"
        ],
        "merge": false,
        "id": 235,
        "text": "sup instrument",
        "calculate": true,
        "var_set": [
          "armseen235",
          0
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id ~= 929\nend",
        "var_equal": [
          "armseen235",
          1
        ],
        "id": 235,
        "text": " Символы были очень похожи на те, которые юноша уже видел на найденном им ранее в храме загадочном браслете.",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id ~= 929\nend",
        "id": 235,
        "text": " Символы были очень похожи на те, которые юноша уже видел на найденных им ранее в храме загадочных браслетах.",
        "var_more": [
          "armseen235",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "style",
          1,
          "style",
          2,
          "style",
          5,
          "style",
          6,
          "touch235",
          1
        ],
        "lua_if": "function lua_if()\nreturn g.current_id ~= 929\nend",
        "var_equal": [
          "236_suc",
          0
        ],
        "id": 235,
        "text": " Орнас углубился в свои воспоминания, чтобы в мельчайших деталях воссоздать образы увиденных им когда-то надписей.",
        "var_need": [
          "armseen235",
          1
        ],
        "merge": true
      },
      {
        "id": 235,
        "calculate": true,
        "text": "help view",
        "lua_do": "function lua_do()\narm1 = arm1 or 0\narm2 = arm2 or 0\narm3 = arm3 or 0\narm235 = (arm1 == 1 and 1 or 0) <plus> (arm2 == 1 and 1 or 0) <plus> (arm3 == 1 and 1 or 0)\nend"
      },
      {
        "var_not": [
          "236_suc",
          1
        ],
        "var_equal": [
          "touch235",
          1
        ],
        "id": 267,
        "text": "help wiew",
        "run": [
          267
        ]
      },
      {
        "var_not": [
          "style",
          1,
          "style",
          2,
          "style",
          5,
          "style",
          6,
          "touch235",
          1
        ],
        "var_equal": [
          "236_suc",
          0
        ],
        "id": 267,
        "text": "help wiew remember",
        "run": [
          267
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "id": 929,
        "instant": false,
        "left_answer": false,
        "var_not": [
          "touch235",
          1
        ],
        "var_equal": [
          "arm235",
          1
        ],
        "middle_answer": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.touchTheArmletSafe = 1\nend",
        "text": "Прикоснуться к браслету на руке",
        "var_set": [
          "touch235",
          1
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "middle_answer": true,
        "text": "Прикоснуться к браслетам на руке",
        "left_answer": false,
        "var_not": [
          "touch235",
          1
        ],
        "instant": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.touchTheArmletSafe = 1\nend",
        "var_more": [
          "arm235",
          1
        ],
        "id": 929,
        "var_set": [
          "touch235",
          1
        ]
      },
      {
        "var_not": [
          "236_suc",
          1
        ],
        "id": 236,
        "text": "подпрограмма для шифра",
        "run": [
          236
        ],
        "var_less": [
          "236sup",
          7
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "236_suc",
          1
        ],
        "id": 235,
        "text": "\n   Как только юноша коснулся последнего знака, поверхность сейфа завибрировала, и на ней медленно проявились очертания дверцы с небольшой ручкой. Введённая комбинация оказалась верной.",
        "merge": true,
        "var_set": [
          "opened235",
          1
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "236_suc",
          1
        ],
        "id": 237,
        "text": "Открыть дверцу сейфа",
        "var_set": [
          "opened235",
          1
        ]
      },
      {
        "saveListener": "<type 'function' is not supported by JSON.>",
        "var_equal": [
          "236sup",
          7
        ],
        "id": 235,
        "text": "\n   Орнас вновь и вновь прикасался к разным символам, но ничего не происходило. Возможно, ему не удалось раскрыть загадку шифра, а может быть он ошибся при вводе.",
        "merge": true
      },
      {
        "id": 219,
        "instant": true,
        "var_str_set": [
          "236enter",
          ""
        ],
        "var_not": [
          "touch235",
          1
        ],
        "text": "Отойти от сейфа",
        "var_need": [
          "arm235",
          1
        ],
        "forget": 235,
        "right_answer": false,
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "236sup",
          0,
          "try229",
          0,
          "touch235",
          0,
          "236sup_1",
          0,
          "236sup_2",
          0,
          "236sup_3",
          0,
          "236sup_4",
          0,
          "236sup_5",
          0,
          "236sup_6",
          0,
          "236sup_7",
          0,
          "236sup_8",
          0,
          "236sup_9",
          0,
          "236sup_10",
          0,
          "236sup_11",
          0,
          "236sup_12",
          0,
          "236sup_13",
          0,
          "236sup_14",
          0,
          "236sup_15",
          0,
          "236sup_16",
          0,
          "236sup_17",
          0,
          "236sup_18",
          0,
          "236sup_19",
          0,
          "236sup_20",
          0,
          "236sup_21",
          0,
          "236sup_22",
          0,
          "236sup_23",
          0,
          "236sup_24",
          0,
          "236sup_25",
          0,
          "236sup_26",
          0,
          "236sup_27",
          0
        ]
      },
      {
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "text": "Отойти от сейфа",
        "var_str_set": [
          "236enter",
          ""
        ],
        "right_answer": false,
        "id": 219,
        "var_equal": [
          "arm235",
          0
        ],
        "forget": 235,
        "var_not": [
          "touch235",
          1
        ],
        "instant": true,
        "var_set": [
          "236sup",
          0,
          "try229",
          0,
          "touch235",
          0,
          "236sup_1",
          0,
          "236sup_2",
          0,
          "236sup_3",
          0,
          "236sup_4",
          0,
          "236sup_5",
          0,
          "236sup_6",
          0,
          "236sup_7",
          0,
          "236sup_8",
          0,
          "236sup_9",
          0,
          "236sup_10",
          0,
          "236sup_11",
          0,
          "236sup_12",
          0,
          "236sup_13",
          0,
          "236sup_14",
          0,
          "236sup_15",
          0,
          "236sup_16",
          0,
          "236sup_17",
          0,
          "236sup_18",
          0,
          "236sup_19",
          0,
          "236sup_20",
          0,
          "236sup_21",
          0,
          "236sup_22",
          0,
          "236sup_23",
          0,
          "236sup_24",
          0,
          "236sup_25",
          0,
          "236sup_26",
          0,
          "236sup_27",
          0
        ]
      },
      {
        "lua_do": "function lua_do()\n--hideMap = 0\nend",
        "text": "Отойти от сейфа",
        "var_str_set": [
          "236enter",
          ""
        ],
        "right_answer": false,
        "middle_answer": false,
        "var_equal": [
          "touch235",
          1
        ],
        "forget": 235,
        "instant": true,
        "id": 219,
        "var_set": [
          "236sup",
          0,
          "try229",
          0,
          "touch235",
          0,
          "236sup_1",
          0,
          "236sup_2",
          0,
          "236sup_3",
          0,
          "236sup_4",
          0,
          "236sup_5",
          0,
          "236sup_6",
          0,
          "236sup_7",
          0,
          "236sup_8",
          0,
          "236sup_9",
          0,
          "236sup_10",
          0,
          "236sup_11",
          0,
          "236sup_12",
          0,
          "236sup_13",
          0,
          "236sup_14",
          0,
          "236sup_15",
          0,
          "236sup_16",
          0,
          "236sup_17",
          0,
          "236sup_18",
          0,
          "236sup_19",
          0,
          "236sup_20",
          0,
          "236sup_21",
          0,
          "236sup_22",
          0,
          "236sup_23",
          0,
          "236sup_24",
          0,
          "236sup_25",
          0,
          "236sup_26",
          0,
          "236sup_27",
          0
        ]
      }
    ]
  },
  {
    "id": 236,
    "text": "code",
    "answers": [
      {
        "var_str_set": [
          "236enter",
          ""
        ],
        "var_show": [
          "236code"
        ],
        "text": "show code:",
        "id": 236,
        "calculate": false,
        "need": 1000,
        "var_set": [
          "236sup",
          0
        ]
      },
      {
        "var_str_set": [
          "236code",
          ""
        ],
        "var_equal": [
          "236sup",
          0
        ],
        "id": 236,
        "calculate": true,
        "text": "start code"
      },
      {
        "id": 236,
        "calculate": true,
        "text": "concatination",
        "var_concat": [
          "236code",
          "236enter"
        ]
      },
      {
        "var_equal": [
          "236_correct",
          "236code"
        ],
        "id": 236,
        "calculate": true,
        "text": "correct",
        "var_set": [
          "236_suc",
          1
        ]
      },
      {
        "var_add": [
          "code_number",
          1
        ],
        "var_random": [
          "code_number",
          1,
          9
        ],
        "id": 236,
        "text": "correct",
        "need": 1000,
        "var_str_set": [
          "236code",
          "",
          "236enter",
          ""
        ],
        "var_equal": [
          "236_suc",
          1
        ],
        "calculate": false,
        "var_set": [
          "236_suc",
          0,
          "236sup",
          0
        ]
      },
      {
        "var_str_set": [
          "236_correct",
          "A surprise to be sure but a welcome one"
        ],
        "var_equal": [
          "code_number",
          1
        ],
        "id": 236,
        "text": "A surprise to be sure but a welcome one (1)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "These aren't the droids you are looking for"
        ],
        "var_equal": [
          "code_number",
          2
        ],
        "id": 236,
        "text": "These aren't the droids you are looking for (2)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "I find your lack of faith disturbing"
        ],
        "var_equal": [
          "code_number",
          3
        ],
        "id": 236,
        "text": "I find your lack of faith disturbing (3)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "Do, or do not. There is no try"
        ],
        "var_equal": [
          "code_number",
          4
        ],
        "id": 236,
        "text": "Do, or do not. There is no try (4)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "May the force be with you"
        ],
        "var_equal": [
          "code_number",
          5
        ],
        "id": 236,
        "text": "May the force be with you (5)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "You underestimate my power!"
        ],
        "var_equal": [
          "code_number",
          6
        ],
        "id": 236,
        "text": "You underestimate my power! (6)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "No, I am your father"
        ],
        "var_equal": [
          "code_number",
          7
        ],
        "id": 236,
        "text": "No, I am your father (7)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "I’ve got a bad feeling about this"
        ],
        "var_equal": [
          "code_number",
          8
        ],
        "id": 236,
        "text": "I’ve got a bad feeling about this (8)",
        "calculate": true
      },
      {
        "var_str_set": [
          "236_correct",
          "The full power of the dark side"
        ],
        "var_equal": [
          "code_number",
          9
        ],
        "id": 236,
        "text": "The full power of the dark side (9)",
        "calculate": true
      },
      {
        "id": 445,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_1"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 435,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_2"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 439,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_3"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 437,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_4"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 443,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_5"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 433,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_6"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 446,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_7"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 427,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_8"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 446,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_9"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 428,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_10"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 425,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_11"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 426,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_12"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 435,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_13"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 436,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_14"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 433,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_15"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 441,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_16"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 440,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_17"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 434,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_18"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 443,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_19"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 439,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_20"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 429,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_21"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 448,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_22"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 438,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_23"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 440,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_24"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 439,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_25"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 445,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_26"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      },
      {
        "id": 430,
        "text": "Новый ответ. введите текст",
        "run": [
          "sup_236_27"
        ],
        "var_not": [
          "236_suc",
          1
        ]
      }
    ]
  },
  {
    "id": 237,
    "text": "   Орнас неуверенно потянул на себя ручку из холодного металла и дверь поддалась. Стоящий в тёмном помещении небольшой сейф ",
    "answers": [
      {
        "id": 237,
        "text": "казался совсем пустым, но приглядевшись, юноша увидел очертания маленького продолговатого предмета в самом углу. Еще через несколько секунд джедай понял, что в сейфе перед ним лежала рукоять светового меча. Но откуда он мог взяться здесь и зачем кому-то пришлось его так тщательно прятать?",
        "merge": true,
        "var_equal": [
          "lightsaber",
          0
        ]
      },
      {
        "id": 237,
        "text": "оказался совсем пустым после того, как джедай забрал хранившийся там световой меч.",
        "var_equal": [
          "lightsaber",
          1
        ],
        "merge": true
      },
      {
        "var_equal": [
          "lightsaber",
          0
        ],
        "id": 238,
        "text": "Взять световой меч",
        "var_set": [
          "lightsaber",
          1
        ],
        "merge": false
      },
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "forget": [
          237,
          235
        ],
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "super_calculate": false,
        "id": 237,
        "calculate": true,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.revealed = 1\ndess.saberSeen = 1\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 238,
    "text": "   Джедай взял световой меч и покрутил его перед глазами. Не обнаружив ничего необычного, он активировал клинок, который наполнил комнату ярким зелёным светом. Орнас сделал несколько взмахов мечом, оценивая его характеристики, затем деактивировал и повесил рукоять себе на пояс.",
    "answers": [
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 239,
    "text": "   Орнас приблизился к",
    "answers": [
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          0
        ],
        "id": 196,
        "text": " стеклянному цилиндру, стоящему в самом углу комнаты и доверху заполненному мутной бесцветной жидкостью. Отсюда юноша увидел, что в заживляющем растворе бакты внутри капсулы неподвижно застыло окутанное сетью трубок и проводов тело человека – молодой девушки.<s>ufeff\n   \"Сколько же она здесь находится?\" – изумился джедай. – \"Кто оставил её одну в этом месте и почему?\"<s>ufeff\n   Информационные индикаторы оборудования свидетельствовали, что жизненные показатели таинственной незнакомки были в полном порядке, <s>ufeffона находилась в искусственном сне.\n",
        "merge": true
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          1
        ],
        "id": 196,
        "text": " пустому стеклянному цилиндру, стоящему в самом углу комнаты. Целебные свойства бакты сделали её универсальным средством для лечения любых травм и заболеваний, но что делает этот резервуар в столь древнем храме?",
        "merge": true
      },
      {
        "id": 196,
        "text": " силовому полю, пристально вглядываясь внутрь непроницаемого барьера. Однако сколько бы джедай не всматривался в тёмное стекло капсулы, он не смог разобрать, был ли кто-нибудь внутри или нет.",
        "var_equal": [
          "panel3",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "panel3",
          1
        ],
        "var_equal": [
          "female",
          0
        ],
        "id": 241,
        "text": "Отключить капсулу и вывести девушку из сна",
        "lua_do": "function lua_do()\ndessAwake = 1\nend"
      },
      {
        "id": 196,
        "text": "Отойти от капсулы",
        "merge": false
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeChamber = 1\n if panel3 ~=1 then\n  condition.ee = 1\n  TL3.conditions.KnowDess = 2\n end\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 239
      }
    ]
  },
  {
    "id": 240,
    "text": "– Как ты себя чувствуешь? – ",
    "answers": [
      {
        "id": 240,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn (g.previous_id ==243 and \"повторил свой вопрос\" or \"спросил\") ..  \" Орнас, стараясь, чтобы его голос звучал участливо, а не настойчиво.\"\nend",
        "merge": true
      },
      {
        "var_show": [
          "b_text_240"
        ],
        "lua_if": "function lua_if()\n  -- if #vars.b_counter_243 == 1 then\n   -- vars.b_text_240 = \"Нейтральный ответ.\"\n -- else\n    vars.b_text_240 = vars.a_mood_1_block == 1 and \"Паршиво, – коротко отозвалась Десс. – Я почти ничего не помню, но и того малого вполне хватило бы, чтобы впасть в отчаяние. Всё очень плохо.<s>\n   Девушка замолчала, попыталась ещё плотнее завернуться в плащ юноши, будто он мог защитить её от всех бед, и выжидающе смотрела на самого Орнаса.\" or (vars.a_mood_1_block == 2 and \"Я не знаю... – голос Десвиар был еле слышим. – Я почти ничего не помню. Мне страшно. Я не знаю, как теперь быть...<s>\n   Девушка замолчала и в уголках её глаз заблестели слёзы. Она тотчас отвернулась от юноши и вытерла их рукой, после чего на какое-то время вновь погрузилась в отстранённое созерцание комнаты.\") or (vars.a_mood_1_block == 3 and \"О, я в полном порядке, если не считать того, что я нахожусь непонятно где, непонятно с кем и ничего не помню, – разразилась тирадой Десс. – А ты думал, что я брошусь в объятия своего <s><s>\"спасителя<s><s>\"? Ты не сделал пока ничего, чтобы заслужить моё доверие, малыш-джедай.<s>\n   Девушка отвернулась от Орнаса, отошла от него на несколько шагов и вновь одарила его тяжёлым взглядом.\")\n  -- end\n   vars.c_text_243  = vars.style == 3 and #vars.b_counter_243 ~= 1 and ((vars.a_mood_1_block == 3 and \" Юноше не обязательно было иметь огромный опыт в переговорах, чтобы ощущать в словах и поведении Десвиар сильную раздражённость.\") or (vars.a_mood_1_block == 1 and \" Всё в поведении Десвиар буквально кричало о подавленности, терзающей её мысли, и это не могло скрыться от опытного взгляда юноши.\") or (vars.a_mood_1_block == 2 and \" Юноше казалось, что Десвиар будто тонет в пучине растерянности, из которой она уже не может выбраться сама.\"))or \"\"\n  return true\nend",
        "id": 240,
        "text": "\n–",
        "merge": true
      },
      {
        "id": 243,
        "text": "Новый ответ. введите текст",
        "run": [
          243
        ]
      },
      {
        "id": 240,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nvars.a_tia_trust = #vars.b_counter_243 == 1 and vars.a_tia_trust <plus> 1 or vars.a_tia_trust\nend",
        "calculate": true
      }
    ]
  },
  {
    "id": 241,
    "text": "   Ощущая странное волнение, Орнас ввёл в прибор команду, прекращающую поддержание искусственного сна. В ту же секунду глаза девушки широко открылись и сразу же закрылись вновь, вязкая жидкость начала медленно откачиваться из цилиндра.<s>r\n   Когда капсула совсем опустела, юноша открыл стеклянную дверцу и подхватил бесчувственное тело девушки, на ходу отстёгивая свободной рукой бесчисленные трубки и провода. Затем он аккуратно положил незнакомку на пол и прикрыл её своим плащом.",
    "answers": [
      {
        "id": 242,
        "text": "Ждать, пока девушка придёт в себя",
        "lua_do": "function lua_do()\ncondition = condition or {}\ncondition.freeDess = 1\nend"
      }
    ]
  },
  {
    "id": 242,
    "text": "   Последующие пятнадцать минут Орнас провёл в ожидании. Он не мог найти себе места: с любопытством и тревогой вглядывался в черты лица девушки, несколько раз проверял её пульс, то и дело поправлял плащ, лишь отчасти прикрывающий наготу её тела.<s>r\n   Наконец, когда она открыла глаза и начала удивлённо озираться по сторонам, джедай сделал небольшой шаг вперёд, чтобы привлечь внимание незнакомки. Несколько секунд она молча осматривала юношу. Когда её взгляд добрался до светового меча на его поясе, в её глазах отразилась смесь удивления и страха. Однако уже через мгновение лицо девушки вновь выражало лишь растерянность, не оставляя Орнасу возможности понять, что же она чувствовала на самом деле. ",
    "answers": [
      {
        "var_add": [
          "darkside",
          -1
        ],
        "id": 243,
        "text": "Поприветствовать",
        "lua_if": "function lua_if()\nreturn noarm ~= 0 and helmet ~=1\nend",
        "lua_do": "function lua_do()\nstyle = style or 1\nvars.a_tia_trust = style ~= 5 and 1 or 4\nvars.b_counter_243 = vars.b_counter_243 or {}\nknowTheNameOfDess = 1\nend"
      },
      {
        "var_add": [
          "darkside",
          1
        ],
        "id": 244,
        "text": "Молчать",
        "lua_if": "function lua_if()\nreturn noarm ~= 0 and helmet ~=1\nend",
        "lua_do": "function lua_do()\nvars.a_tia_trust = -1\nvars.b_counter_243 = vars.b_counter_243 or {}\nknowTheNameOfDess = 1\nend"
      },
      {
        "lua_text": "function lua_text()\narm = {arm1, arm2, arm3}\nlocal a = (arm[1] == 1 and 1 or 0) <plus> (arm[2] == 1 and 1 or 0) <plus> (arm[3] == 1 and 1 or 0)\nlocal text =  (helmet == 1 and \"Затем она увидела мандалорский шлем в его руке, и её всю передернуло. Через мгновение она вскрикнула в ужасе:<s>\n– Значит так ты выглядишь без своего шлема? На этот раз я не дамся вам так легко!<s>\n   С этими словами она вскинула руку и отбросила Орнаса мощным толчком Силы в стену. Ударившись головой о твердую поверхность, джедай потерял сознание.\") or (a == 1 and \"Затем она увидела металлический браслет на его руке, и её всю передернуло. Через мгновение она вскрикнула в ужасе:<s>\n– Так ты один из них? На этот раз я не дамся вам так легко!<s>\n   С этими словами она вскинула руку и отбросила Орнаса мощным толчком Силы в стену. Ударившись головой о твердую поверхность, джедай потерял сознание.\") or (a > 1 and \"Затем она увидела металлические браслеты на его руке, и её всю передернуло. Через мгновение она вскрикнула в ужасе:<s>\n– Так ты один из них? На этот раз я не дамся вам так легко!<s>\n   С этими словами она вскинула руку и отбросила Орнаса мощным толчком Силы в стену. Ударившись головой о твердую поверхность, джедай потерял сознание.\") or \"\"\n\ng.achievements = g.achievements or {}\ng.achievements.diploProblem1 = g.achievements.diploProblem1 or 0\n\ng.achievements.alarm = g.achievements.diploProblem1  == 0 and -23 or 0\ng.achievements.diploProblem1  = 1\n\nreturn text\nend",
        "id": 245,
        "text": " генерация текста",
        "lua_if": "function lua_if()\nreturn helmet == 1 or noarm == 0\nend",
        "merge": true
      },
      {
        "id": 245,
        "text": "Очнуться",
        "lua_if": "function lua_if()\nreturn noarm == 0 or helmet ==1\nend",
        "lua_do": "function lua_do()\narm1 = arm1 or 0\narm2 = arm2 or 0\narm3 = arm3 or 0\narm = {arm1, arm2, arm3}\narm1 = 2 \narm2 = 2\narm3 = 2\nlocation1 = location1 or {}\nlocation1.lastChanceKey = (location1.lastChanceKey or 5) - 1\ndess = dess or {}\ndess.trait = 1\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.KnowDess = 3\nknowTheNameOfDess = 0\nend"
      }
    ]
  },
  {
    "id": 243,
    "text": "– Привет, –  робко проговорил юноша и кивнул. – Меня зовут Орнас, это я отключил камеру и разбудил тебя. Как ты себя чувствуешь?<s>r\n– Здравствуй, – девушка растерянно оглянулась на опустевшую капсулу и какое-то время сохраняла молчание, словно пытаясь вспомнить что-то. – Я Десвиар, можно просто Десс. Спасибо, что вытащил меня оттуда... Наверное...\n   ",
    "answers": [
      {
        "comment": false,
        "forget": [
          240,
          247,
          416
        ],
        "id": 242,
        "text": "1 блок: первый вопрос генерит состояние, ответы на последующие вопросы определены выбранным состоянием. Нужно ли давать читателю знать состояние в явном виде? Нужно ли давать два вопроса или три?\nСостояние НУЖНО явно отобразить в ОДНОМ из ответов (2 или 3) —> ответы должны быть уникальны для каждого состояния\n  1й ответ: нейтральный – выбор вопросов — 2й ответ: зависит от состояния – выбор вопросов — 3й ответ: зависит от состояния — выбор действий – реакция на действие — [подсчёт доверия] – формулировка второй фазы\n \nШкала доверия:\n• поприветствовал <plus>1\n• первый вопрос о самочувствии <plus>1\n• промолчал -1\n• \"идеальное\" действие <plus>3\n• \"норм\" действие <plus>1\n• \"плохое\" действие -2\n• агрессия -5\n\nСписок действий:\n• молчать\n• утешить\n• приободрить\n• обещать помощь\n• успокоить\n• дать совет\n• \"агрессия\"\n\nСделать систему психологических ответов по принципу комплиментарности. 3 блока: [что было? – реакция], [Что есть сейчас?], [Что будет дальше?]\n\n1. Подавленность (всё плохо):\n• молчать -1\n• утешить <plus>5\n• приободрить <plus>3\n• обещать помощь <plus>3\n• успокоить <plus>1\n• дать совет <plus>1\n• высказать недоверие - 5\n\n2. Растерянность (что происходит?):\n• молчать -3\n• утешить <plus>1\n• приободрить <plus>3\n• обещать помощь <plus>5\n• успокоить <plus>1\n• дать совет <plus>3\n• высказать недоверие - 5\n\n3. Раздражённость (всё бесит):\n• молчать <plus>3\n• утешить -1\n• приободрить -1\n• обещать помощь <plus>1\n• успокоить -5\n• дать совет -5\n• высказать недоверие - 5\n\nАпатия (всё пофиг) –приободрить\nНапряжённость (на пределе терпения) – успокоить\nСмятение (как будет лучше?) – дать совет\n\n• молчать <plus>3\n• утешить -1\n• приободрить -1\n• обещать помощь <plus>1\n• успокоить -5\n• дать совет -5\n• высказать недоверие - 5",
        "need": 1000,
        "lua_do": "function lua_do()\n  vars.a_tia_trust = 0\n  vars.b_counter_243 = nil\n  vars.c_text_243 = nil\n  vars.style = vars.style == 3 and 1 or 3\nend"
      },
      {
        "id": 416,
        "text": "– Кто ты такая?",
        "need": -416,
        "lua_do": "function lua_do()\nlocal a = #vars.b_counter_243 <plus> 1\nvars.b_counter_243[a] = 416\nend"
      },
      {
        "id": 247,
        "text": "– Как ты здесь оказалась?",
        "need": -247,
        "lua_do": "function lua_do()\nlocal a = #vars.b_counter_243 <plus> 1\nvars.b_counter_243[a] = 247\nend"
      },
      {
        "id": 240,
        "text": "– Как ты себя чувствуешь?",
        "need": -240,
        "lua_do": "function lua_do()\nvars.b_counter_243 = vars.b_counter_243 or {}\nlocal a = #vars.b_counter_243 <plus> 1\nvars.b_counter_243[a] = 240\nend"
      },
      {
        "var_show": [
          "c_text_243"
        ],
        "lua_do": "function lua_do()\nvars.b_counter_243 = vars.b_counter_243 or {}\n  if not vars.a_mood_1_block then\n    local a = math.random(-100,100)\n      if vars.b_counter_243[1] == 240 then -- подавленность или растерянность\n      vars.c_text_243 = a > 0 and \"подавленность\" or \"растерянность\" -- подавленность - 1, растерянность - 2, раздражённость - 3\n      vars.a_mood_1_block = a > 0 and 1 or 2\n    elseif vars.b_counter_243[1] == 247 then-- раздражённость или подавленность\n      vars.c_text_243 = a > 0 and \"Орнасу не обязательно было иметь огромный опыт в переговорах, чтобы ощущать в словах и поведении Десвиар сильную раздражённость.\" or \"подавленность\"\n      vars.a_mood_1_block = a > 0 and 3 or 1\n    elseif vars.b_counter_243[1] == 416 then -- раздражённость или растерянность\n      vars.c_text_243 = a > 0 and \"раздражённость\" or \"растерянность\"\n      vars.a_mood_1_block = a > 0 and 3 or 2\n    end\n  end\nc_text_243 = c_text_243 or \"Джедай пока не мог точно определить эмоциональное состояние своей новой знакомой и надеялся, что её ответы на вопросы смогли бы прояснить ситуацию.\"\nend",
        "id": 243,
        "text": " down",
        "calculate": true,
        "merge": false
      },
      {
        "id": 417,
        "text": "К кульминации 1 блока",
        "lua_if": "function lua_if()\nreturn #vars.b_counter_243 == 3\nend",
        "run": [
          417
        ]
      },
      {
        "id": 243,
        "text": "текст",
        "lua_text": "function lua_text()\nreturn c_text_243\nend",
        "merge": true
      },
      {
        "id": 243,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nvars[\"1_show\"] = vars.a_tia_trust\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn author_cheat_mode == 1\nend",
        "id": 243,
        "lua_do": "function lua_do()\n  if a_mood_1_block == 1 then\n    a_mood_1_block = 2\n  elseif a_mood_1_block == 2 then\n    a_mood_1_block = 3\n  else a_mood_1_block = 1\n  end\nend",
        "text": "Смена настроения",
        "comment": false,
        "go_to": [
          "global current_id"
        ]
      }
    ]
  },
  {
    "id": 244,
    "text": "   Орнас продолжил молча наблюдать за незнакомкой, на лице которой теперь читалась тревога. Она обернулась и быстро обвела взглядом опустевшую капсулу. Вновь осмотрела себя, вновь перевела взгляд на джедая.<s>r\n– Кто ты такой, и что со мной происходит? – наконец взволнованно выпалила она. – Кто я? Почему я здесь? Почему я ничего не помню? Почему ты, ранкор тебя подери, до сих пор молчишь?!<s>r\n– Я надеялся, что ты мне сможешь ответить на все эти вопросы, – несколько обескураженно ответил юноша. – Меня зовут Орнас. Я нашёл тебя здесь, прямо в этой камере. Ты была в состоянии гибернического сна, и я вытащил тебя оттуда около получаса назад.<s>r\n– Ну спасибо, Орнас, очень благородно с твоей стороны, – проговорила девушка с нескрываемой издёвкой, однако затем продолжила более спокойным тоном. – Меня зовут Десвиар, и я почти ничего не помню.<s>r\n– Жаль... ",
    "answers": [
      {
        "id": 243,
        "text": "Новый ответ. введите текст",
        "run": [
          243
        ]
      }
    ]
  },
  {
    "id": 245,
    "text": "   Прийдя в чувства, Орнас обнаружил себя лежащим на каменном полу у стены, заботливо прикрытый собственным плащом. Он поднялся на ноги и отряхнулся от пыли, сокрушаясь, что так недооценил коварную незнакомку.\n   По крайней мере, теперь юноша знал кое-что наверняка. Во-первых, девушка весьма искусно владела Силой и смогла скрыть это от джедая с самого начала. Во-вторых, она явно не хотела его убивать, раз не сделала этого, когда у неё была такая возможность. ",
    "answers": [
      {
        "id": 196,
        "text": "Дальше",
        "var_set": [
          "female",
          1
        ]
      },
      {
        "id": 245,
        "text": "генерация текста",
        "lua_text": "function lua_text()\narm = arm or {}\nkeys = keys or {}\nkeys.dessFail = 1\nlocal a = (arm[1] == 1 and 1 or 0) <plus> (arm[2] == 1 and 1 or 0) <plus> (arm[3] == 1 and 1 or 0)\nlocal text = \"Кроме того, она не взяла ничего из его вещей, даже световой меч остался на своём месте.\" .. ( helmet == 0 and ( (a == 1 and \" А вот металлический браслет, вызвавший у неё столь бурную реакцию, исчез с руки Орнаса.\") or (a > 1 and \" А вот металлические браслеты, вызвавшие у неё столь бурную реакцию, исчезли с руки Орнаса.\") or \"\") or ( (a == 1 and \" А вот металлический браслет, найденный Орнасом ранее, исчез с его руки.\") or (a > 1 and \" А вот металлические браслеты, найденные Орнасом ранее, исчезли с его руки.\") or \"\")  ) .. \"<s>\n   В любом случае, теперь джедаю стоит быть предельно осторожным, чтобы новая встреча с девушкой не оказалась для него последней.\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 246,
    "text": "– Я сделаю всё, что смогу, – проговорил юноша тихо и замялся. – Ну, то есть не только одежду найти, это как раз маловероятно здесь... Но может быть удастся выяснить, кто ты и что с тобой случилось...\n– Спасибо, – удивительно мягко ответила Десвиар. – Я пока побуду тут и попробую собраться с мыслями.",
    "answers": [
      {
        "id": 453,
        "text": "Отойти от девушки"
      }
    ]
  },
  {
    "id": 247,
    "text": "– Как ты здесь оказалась? – юноша старался говорить медленно и спокойно. – Что ты знаешь об этом месте, Десвиар?",
    "answers": [
      {
        "var_show": [
          "b_text_247"
        ],
        "lua_if": "function lua_if()\n--  if #vars.b_counter_243 == 1 then\n--    vars.b_text_247 = \"Нейтральный ответ.\"\n--  else\n    vars.b_text_247 = vars.a_mood_1_block == 1 and \"Мне и самой очень интересно, как я тут очутилась, – ответила она, поёжившись. – Здесь неуютно. И холодно. Но я не могу рассказать ничего полезного, вряд ли тебя интересуют мои ощущения.<s>\n   Немного смутившись, джедай поведал ей всё, что сам знал о безжизненной планете и древнем храме, в котором они сейчас находились. С каждой фразой его собеседница становилась всё мрачнее и будто цепенела от страха. Они молча смотрели друг на друга ещё какое-то время, думая каждый о чём-то своём, затем девушка покачала головой и многозначительно вздохнула.\" or (vars.a_mood_1_block == 2 and \"Это так непросто объяснить... Я не могу вспомнить ничего, – проговорила Десс очень взволнованно. – Как будто меня сюда кто-то привёл. Наверное, друг?.. Это был ты?..<s>\n   Орнас лишь покачал головой.<s>\n– Нет, враг!.. – её глаза расширились от ужаса. – На меня напали! Но где он сейчас? И что мне делать?<s>\n– Не переживай, – попытался мягко успокоить её Орнас, – тут никого нет.<s>\n  Он рассказал девушке, что по его наблюдениям храм был давно заброшен и что он сам не обнаружил чьего-то присутствия. Не смотря на уверения джедая Десс теперь выглядела настороженно, а в её взгляде застыло недоверие.\") or (vars.a_mood_1_block == 3 and \"Лучше называй меня Десс, – почти прошипела девушка с нескрываемым раздражением. – Не знаю, успела ли я обратить твоё внимание на тот факт, что ничего не могу вспомнить. Но если по какой-то причине этого ещё не произошло, то вот важная информация: Я. Ничего. Не. Помню. Не знаю, что это за дыра и как я здесь оказалась. Ты же герой, вот и расскажи мне об этом сам.<s>\n   Орнас смутился и кратко поведал ей о безжизненной планете и о древнем храме ситхов, в котором они сейчас находились. Десс слушала без особого интереса и, казалось, совсем не была удивлена услышанной информации.<s>\n   Они молча смотрели друг на друга ещё какое-то время, думая каждый о чём-то своём, затем девушка покачала головой и многозначительно нахмурила брови.\")\n -- end\n  vars.c_text_243  = style == 5 and #vars.b_counter_243 ~= 1 and ((vars.a_mood_1_block == 2 and \" Юноше не обязательно было иметь огромный опыт в переговорах, чтобы ощущать в словах и поведении Десвиар сильную растерянность.\") or (vars.a_mood_1_block == 3 and \" Всё в поведении Десвиар буквально кричало о раздражении, кипящем в её мыслях и выплёскивающемся на всё вокруг. Такое не могло скрыться от опытного взгляда юноши.\") or (vars.a_mood_1_block == 1 and \" Юноше показалось, что известия о страшном храме расстроили Десвиар и теперь она выглядела подавленно.\"))or \"\"\n  return true\nend\n",
        "id": 240,
        "text": "\n–",
        "merge": true
      },
      {
        "id": 243,
        "text": "Новый ответ. введите текст",
        "run": [
          243
        ]
      }
    ]
  },
  {
    "id": 248,
    "text": "   Орнас взобрался по куче обломков к дыре в каменной кладке стены, пробрался через неё и спрыгнул вниз, готовый встретить любую опасность.",
    "answers": [
      {
        "id": 248,
        "text": "Дальше",
        "go_to": [
          "goto"
        ]
      },
      {
        "var_equal": [
          "arm157",
          1
        ],
        "id": 194,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "boy157",
          0,
          "arm157",
          0
        ]
      },
      {
        "lua_do": "function lua_do()\ndroids157disabled = 0\nend",
        "var_equal": [
          "mask157",
          1
        ],
        "id": 194,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "boy157",
          0,
          "mask157",
          0
        ]
      }
    ]
  },
  {
    "id": 249,
    "text": "   Сорвав с пояса ионную гранату, Орнас активировал её и бросил в сторону противника. Однако взрыв не причинил никакого вреда свирепому существу, оказавшемуся уже перед самым джедаем. Одним мощным взмахом чудовище сбило юношу с ног. Ни долгие тренировки, ни связь с Силой не смогли помочь Орнасу, он лежал на спине, пытаясь заслониться тонким лезвием светового меча от исполинского противника, уже занёсшего лапу для решающего удара.<s>r\n   \"Ещё один джедай, который не смог\", – услышал Орнас еле различимый голос у себя в голове. Затем всё стихло.",
    "answers": [
      {
        "id": 92,
        "text": "Это конец?..",
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nhideMap = 0\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 250,
    "text": "   Сорвав с пояса плазменную гранату, Орнас активировал её и бросил в сторону противника. Огненный шторм взрыва поглотил и терентатека, и самого джедая, оказавшегося вне укрытия. Волосы на его голове загорелись, кожа покрылась волдырями, а лёгкие заполнились раскалённым воздухом. Орнас схватился за лицо, спасая глаза, и повалился навзничь, не в силах совладать с болью.\n   Замутнённый взгляд юноши смог на секунду различить среди бушующего огня и дыма силуэт человека со световым мечом, стремительно мчащегося в его сторону, и в его сердце поселилась робкая надежда на спасение. Однако уже в следующее мгновение перед ним возник разъярённый монстр и занёс исполинскую лапу для решающего удара.<s>r\n   \"Ещё один джедай, который не смог\", – услышал Орнас еле различимый голос у себя в голове. Затем всё стихло.",
    "answers": [
      {
        "id": 92,
        "text": "Это конец?..",
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nend",
        "blackout": true
      }
    ]
  },
  {
    "id": 251,
    "text": "Подпрограмма для перемещения между коллон",
    "answers": [
      {
        "id": 251,
        "text": "Новый механизм смены колонн",
        "calculate": true,
        "lua_do": "function lua_do()\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\nmiddleRoom = middleRoom or {}\nmiddleRoom.currentCol = middleRoom.currentCol or 0\ncoldirection = coldirection or 1\n \n\nif coldirection == 1 then -- переход вперёд, добавление повреждений следующей колонне\n  middleRoom.currentCol = middleRoom.currentCol <plus> 1\n  if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n    vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n  else -- колонна-цель разрушенна, запустить следующую\n    middleRoom.currentCol = middleRoom.currentCol <plus> 1\n      if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n      vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      else -- две колонны разрушены, бежит к третьей\n        middleRoom.currentCol = middleRoom.currentCol <plus> 1\n        vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      end\n  end\nelse -- переход назад, добавление повреждений\n  middleRoom.currentCol = middleRoom.currentCol - 1\n  if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n    vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n  else -- колонна-цель разрушенна, запустить следующую\n    middleRoom.currentCol = middleRoom.currentCol - 1\n      if vars[\"col\" .. middleRoom.currentCol .. \"stat\"] < 2 then -- всё нормально\n      vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      else -- две колонны разрушены, бежит к третьей\n        middleRoom.currentCol = middleRoom.currentCol - 1\n        vars[\"col\" .. middleRoom.currentCol .. \"stat\"] = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] <plus> 1\n      end\n  end\nend\n  \ncurrentcolstat = vars[\"col\" .. middleRoom.currentCol .. \"stat\"] -- аттавизм, но вдруг она нужна для отображения\nbrokencoloumns = (col1stat == 2 and 1 or 0) <plus> (col2stat == 2 and 1 or 0) <plus> (col3stat == 2 and 1 or 0) <plus> (col4stat == 2 and 1 or 0)\nend"
      },
      {
        "id": 251,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "restart251",
          0
        ]
      },
      {
        "var_not": [
          "start251",
          1
        ],
        "id": 251,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "col1stat",
          0,
          "col2stat",
          0,
          "col3stat",
          0,
          "col4stat",
          0,
          "start251",
          1,
          "coloumn55",
          0,
          "coldirection",
          1
        ]
      },
      {
        "var_equal": [
          "currentcolstat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "Проверка на разрушение текущей колонны",
        "var_set": [
          "prevcoldestr",
          1
        ]
      },
      {
        "var_not": [
          "currentcolstat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "Проверка на разрушение текущей колонны",
        "var_set": [
          "prevcoldestr",
          0
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          1
        ],
        "id": 251,
        "text": "До смены 1",
        "calculate": true,
        "var_set": [
          "col1stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          2
        ],
        "id": 251,
        "text": "До смены 2",
        "calculate": true,
        "var_set": [
          "col2stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          3
        ],
        "id": 251,
        "text": "До смены 3",
        "calculate": true,
        "var_set": [
          "col3stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          4
        ],
        "id": 251,
        "text": "До смены 4",
        "calculate": true,
        "var_set": [
          "col4stat",
          "currentcolstat"
        ]
      },
      {
        "var_add": [
          "coloumn55",
          1
        ],
        "var_equal": [
          "coldirection",
          1
        ],
        "id": 251,
        "text": "Смена больше",
        "calculate": true
      },
      {
        "var_add": [
          "coloumn55",
          -1
        ],
        "var_equal": [
          "coldirection",
          2
        ],
        "id": 251,
        "text": "Смена меньше",
        "calculate": true
      },
      {
        "var_equal": [
          "coloumn55",
          1
        ],
        "id": 251,
        "text": "После добавки 1",
        "calculate": true,
        "var_set": [
          "currentcolstat",
          "col1stat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          2
        ],
        "id": 251,
        "text": "После добавки 2",
        "calculate": true,
        "var_set": [
          "currentcolstat",
          "col2stat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          3
        ],
        "id": 251,
        "text": "После добавки 3",
        "calculate": true,
        "var_set": [
          "currentcolstat",
          "col3stat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          4
        ],
        "id": 251,
        "text": "После добавки 4",
        "calculate": true,
        "var_set": [
          "currentcolstat",
          "col4stat"
        ]
      },
      {
        "id": 251,
        "text": "Изменение статуса колонны",
        "var_add": [
          "currentcolstat",
          1
        ],
        "calculate": true
      },
      {
        "var_equal": [
          "coloumn55",
          1
        ],
        "id": 251,
        "text": "обновление статуса колонны 1 после изменений",
        "calculate": true,
        "var_set": [
          "col1stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          2
        ],
        "id": 251,
        "text": "обновление статуса колонны 2 после изменений",
        "calculate": true,
        "var_set": [
          "col2stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          3
        ],
        "id": 251,
        "text": "обновление статуса колонны 3 после изменений",
        "calculate": true,
        "var_set": [
          "col3stat",
          "currentcolstat"
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          4
        ],
        "id": 251,
        "text": "обновление статуса колонны 4 после изменений",
        "calculate": true,
        "var_set": [
          "col4stat",
          "currentcolstat"
        ]
      },
      {
        "var_not": [
          "251sup1",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col1stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup1",
          1
        ]
      },
      {
        "var_not": [
          "251sup2",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col2stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup2",
          1
        ]
      },
      {
        "var_not": [
          "251sup3",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col3stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup3",
          1
        ]
      },
      {
        "var_not": [
          "251sup4",
          1
        ],
        "var_add": [
          "brokencoloumns",
          1
        ],
        "var_equal": [
          "col4stat",
          2
        ],
        "id": 251,
        "calculate": true,
        "text": "подсчёт разрушенных колонн",
        "var_set": [
          "251sup4",
          1
        ]
      },
      {
        "var_show": [
          "brokencoloumns"
        ],
        "comment": false,
        "id": 251,
        "text": "Колонн сломано:",
        "need": 1000,
        "var_set": [
          "start251",
          0
        ]
      },
      {
        "id": 251,
        "text": "Новый ответ. введите текст",
        "run": [
          251
        ],
        "var_equal": [
          "currentcolstat",
          3
        ]
      },
      {
        "id": 251,
        "text": "Новый ответ. введите текст",
        "var_max": [
          "currentcolstat",
          2
        ],
        "calculate": true
      },
      {
        "var_equal": [
          "coloumn55",
          0
        ],
        "id": 251,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "coloumn55",
          4,
          "restart251",
          1
        ]
      },
      {
        "var_equal": [
          "coloumn55",
          5
        ],
        "id": 251,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "coloumn55",
          1,
          "restart251",
          1
        ]
      },
      {
        "id": 251,
        "text": "restart page",
        "run": [
          251
        ],
        "var_equal": [
          "restart251",
          1
        ]
      }
    ]
  },
  {
    "id": 252,
    "text": "   Орнас без раздумий подбежал к чудовищу и подпрыгнул высоко вверх, надеясь приземлиться на израненного и выбившегося из сил монстра. Но недооценил противника, который даже в таком состоянии оказался достаточно проворным, чтобы схватить джедая раньше, чем тот успел закончить свой смелый манёвр.\n   Чудовище медленно подняло отчаянно вырывающегося Орнаса к собственной морде и пристально вгляделось в его лицо, обезображенное гримасой боли и отчаяния. Оглушительный победный рык разнёсся по залу, а из пасти монстра потянуло тошнотворным смрадом. Сердце джедая бешенно заколотилось в груди, заглушая даже грохочущее дыхание терентатека. Зверь широко раскрыл усеянную клыками пасть и поднёс к ней Орнаса.\n   \"Всего лишь ещё один джедай, который не смог.\"  – насмешливо прозвучал чей-то голос прямо в голове юноши. Затем свет погас и всё смолкло.",
    "answers": [
      {
        "id": 92,
        "text": "Это конец?..",
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nhideMap = 0\nend",
        "blackout": true
      }
    ]
  },
  {
    "id": 253,
    "text": "   Юноша приметил на туловище монстра участок между двух костяных шипов, показавшийся ему наиболее уязвимым, и с усилием вонзил в него световой меч.",
    "answers": [
      {
        "var_no_more": [
          "havetime",
          1
        ],
        "var_equal": [
          "plecho",
          1
        ],
        "id": 253,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "253bad",
          1
        ]
      },
      {
        "id": 253,
        "text": " Терентатек, до сих пор не пришедший в себя, лишь раскрыл огромную пасть в безмолвном вопле отчаяния и едва ощутимо подёрнулся, ощутив болезненный укол.",
        "var_more": [
          "havetime",
          1
        ],
        "merge": true
      },
      {
        "var_equal": [
          "plecho",
          0
        ],
        "id": 253,
        "text": " Терентатек, уже почти окончательно пришедший в себя, яростно заревел и из последних сил резко дёрнулся в сторону, ощутив болезненный укол. От неожиданной встряски юноша чуть не свалился со спины своего могучего противника. Лишь вовремя успев ухватиться свободной рукой за один из выступов, обрамляющих хребет зверя, он сумел удержался на своей позиции.",
        "merge": true,
        "var_no_more": [
          "havetime",
          1
        ]
      },
      {
        "var_equal": [
          "plecho",
          1
        ],
        "id": 253,
        "text": " Терентатек, уже почти окончательно пришедший в себя, яростно заревел и из последних сил резко дёрнулся в сторону, ощутив болезненный укол. От неожиданной встряски юноша чуть не свалился со спины своего могучего противника. Орнас попытался ухватиться свободной рукой за один из выступов, обрамляющих хребет зверя, но в то же мгновение ощутил жгучую боль в плече, поражённом ранее попаданием бластерного луча. Джедай кубарем слетел со своей позиции и оказался на жёстком полу.\n   Терентатек не растерялся и уже приближается к Орнасу, вынуждая того отступить.",
        "var_no_more": [
          "havetime",
          1
        ],
        "merge": true
      },
      {
        "id": 254,
        "text": "Дальше",
        "var_equal": [
          "253bad",
          0
        ]
      },
      {
        "id": 54,
        "text": "Бежать к выходу",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_equal": [
          "253bad",
          1
        ]
      }
    ]
  },
  {
    "id": 254,
    "text": "   Ещё крепче сжав в одной руке рукоять клинка, Орнас с усилием утопил сияющее лезвие глубже в шею монстра.<s>r\n   Зверь взревел от боли и ужаса, но не мог больше ничего сделать, парализованный смертельной раной. Когда клинок погрузился в тело чудовища до самой рукояти, Орнас одним резким дуговым движением оборвал страдания своего противника.<s>r\n   Зверь медленно покачнулся и плавно осел на пол, подняв своим последним сдавленным выдохом облачко пыли.<s>r\n   Джедай ловко спрыгнул вниз с тела поверженного противника. Его кровь всё ещё кипела от адреналина, а в ушах стоял шум битвы. Лишь через несколько минут, когда он отдышался и полностью успокоил мысли, всё стихло.",
    "answers": [
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = 1\nmiddleRoom.monsterIsDead = 1\n\ng.achievements = g.achievements or {}\ng.achievements.warrior2 = g.achievements.warrior2 or 0\nlocation1 = location1 or {}\nlocation1.firedArm = location1.firedArm or 0\nlocation1.bloodedLeg = location1.bloodedLeg or 0\n\nif location1.bloodedLeg == 1 and location1.firedArm == 1 then\n  g.achievements.alarm = g.achievements.warrior2 == 0 and 15 or 0\n  g.achievements.warrior2 = 1\nend\n\nachievements = achievements or {}\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\nif col1stat ~=2 and col2stat ~=2 and col3stat ~=2 and col4stat ~=2 then\nachievements.perfectKill = 1\nend\n\nhideMap = 0\nend",
        "var_set": [
          "victory158",
          1
        ]
      },
      {
        "super_calculate": true,
        "id": 254,
        "calculate": false,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.warrior1 = g.achievements.warrior1 or 0\n\ng.achievements.alarm = g.achievements.warrior1 == 0 and 14 or 0\ng.achievements.warrior1  = 1\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 255,
    "text": "   Орнас неспешно осматривал огромную спину монстра, пытаясь отыскать уязвимые для атаки световым мечом места. Тем временем зверь понемногу приходил в себя.",
    "answers": [
      {
        "id": 253,
        "text": "Вонзить световой меч в основание шеи терентатека",
        "var_sub": [
          "havetime",
          1
        ],
        "var_set": [
          "strike188",
          1
        ]
      },
      {
        "id": 256,
        "text": "Вонзить световой меч в основание повреждённого рога",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_equal": [
          "style",
          3
        ]
      },
      {
        "id": 255,
        "text": "\n   Но джедай уже нашёл то, что искал – один из рогов, защищавших голову терентатека, был повреждён у самого основания и сильно растрескался. При должном везении получится одним точным ударом поразить мозг чудовища.",
        "merge": true,
        "var_equal": [
          "style",
          3
        ]
      },
      {
        "id": 255,
        "var_not": [
          "style",
          3
        ],
        "text": "\n   Орнас так и не заметил хоть чего-то, что могло бы помочь ему умертвить противника быстро и безболезненно. Придётся всё-таки быть в шею.",
        "merge": true
      }
    ]
  },
  {
    "id": 256,
    "text": "   Без дальнейших раздумий юноша вонзил световой меч прямо в голову зверя в том месте, где растрескавшийся рог обнажил небольшой незащищённый участок черепа. Невесомый сияющий луч лезвия впился в плоть чудовища, разрывая и прожигая клубки нейронных сплетений, образующих мозг терентатека.<s>r\n   Монстр взревел от боли и ужаса, но не мог больше ничего сделать, парализованный смертельной раной. Когда клинок погрузился в плоть чудовища до самой рукояти, Орнас одним резким круговым движением оборвал страдания своего противника.<s>r\n   Зверь завалился набок и с оглушительным грохотом рухнул на пол, подняв облако пыли и заставив задрожать стены. Джедай едва успел отпрыгнуть в сторону, чтобы не оказаться придавленным невообразимой массой поверженного монстра. В его ушах всё ещё гремел шум битвы. Лишь через несколько минут, когда он отдышался, пыль вокруг осела и всё окончательно стихло.",
    "answers": [
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = 1\nmiddleRoom.monsterIsDead = 1\n\ng.achievements = g.achievements or {}\ng.achievements.warrior2 = g.achievements.warrior2 or 0\nlocation1 = location1 or {}\nlocation1.firedArm = location1.firedArm or 0\nlocation1.bloodedLeg = location1.bloodedLeg or 0\n\nif location1.bloodedLeg == 1 and location1.firedArm == 1 then\n  g.achievements.alarm = g.achievements.warrior2 == 0 and 15 or 0\n  g.achievements.warrior2 = 1\nend\n\nachievements = achievements or {}\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\n  if col1stat ~=2 and col2stat ~=2 and col3stat ~=2 and col4stat ~=2 then\n    achievements.perfectKill = 1\n  end\nhideMap = 0\nend",
        "var_set": [
          "victory158",
          1
        ]
      },
      {
        "super_calculate": false,
        "id": 256,
        "calculate": true,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.warrior1 = g.achievements.warrior1 or 0\n\ng.achievements.alarm = g.achievements.warrior1 == 0 and 14 or 0\ng.achievements.warrior1  = 1\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 257,
    "text": "   Орнас сделал глубокий вдох, готовясь начать сражение, когда его сознание наполнилось потоком образов и картинок. Он видел себя самого, объятого пламенем, из тьмы к нему тянулись искривлённые когти и смыкались чудовищные челюсти, а затем всё скрылось в буре камнепада. Джедай решил, что сама Сила пытается предупредить его об опасности, поджидающей в этом тёмном месте.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n-- middleRoom.result == 1 - победа, 2 - бегство, 3 - поражение,\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = middleRoom.result or 0\nif middleRoom.result == 2 then -- регенерация монстра\nenemyhp = enemyhp <plus> 5\ngren160 = 0\nfail160 = nil\nsuc160 = nil\nion160 = nil\ngrentype160 = nil\ncrio160 = nil\nhavetime = nil\nplasm160 = nil\ngren50 = nil\ncrio50 = nil\nplasm50 = nil\nenemyhp = enemyhp >9 and 10 or enemyhp\nelseif middleRoom.result == 0 then\nenemyhp = 10\nelseif middleRoom.result == 3  then -- обнуление всех переменных боя\ngren160 = 0\nfail160 = nil\nsuc160 = nil\n-- page 50, 183, 249 lead to the 92, ok\nion160 = nil\ngrentype160 = nil\ncrio160 = nil\nhavetime = nil\nplasm160 = nil\nenemyhp = 10\nfight158 = 0\nfail50 = nil\ngren50 = nil\ncrio50 = nil\nplasm50 = nil\nvisited49 = nil\nresult47 = nil\ncurrentcolstat = nil\nbrokencoloumns = 0\nprevcoldestr = 0\ncoloumn55 = 0\ncoldirection = nil\nrestart251 = nil\nstart251 = nil\ncol1stat = nil\ncol1stat = nil\ncol1stat = nil\ncol1stat = nil\nvars[\"251sup1\"] = nil\nvars[\"251sup2\"] = nil\nvars[\"251sup3\"] = nil\nvars[\"251sup4\"] = nil\nend\nend",
        "text": "Повторный вход",
        "calculate": true,
        "id": 257
      },
      {
        "id": 160,
        "text": "К бою",
        "lua_do": "function lua_do()\nhideMap = 1\nend"
      },
      {
        "id": 260,
        "text": "Быстро вернуться назад"
      }
    ]
  },
  {
    "id": 258,
    "text": "   ",
    "answers": [
      {
        "super_calculate": true,
        "id": 2,
        "text": "-- Инициализация функций Луа\nДобавить диалог с выбором сложности",
        "calculate": false,
        "lua_do": "function lua_do()\n\nfunction randW(a, b) -- случайное значение из массива с учётом веса\n  if #a ~= #b then return false end\n\n  local sum = 0\n\n  for _, v in pairs(b) do\n    sum = sum <plus> v\n  end\n\n  local result = math.random() * sum\n\n  sum = 0\n  for k, v in pairs(b) do\n    sum = sum <plus> v\n    if result <= sum then return a[k] end\n  end\n  end\nend"
      },
      {
        "id": 2,
        "calculate": true,
        "lua_do": "function lua_do()\ng.technical = g.technical or {}\ng.blockSaves = 0\n\n  if not g.technical.code then -- установка значений при первом включении\n    g.technical.code = {number = {1, 2, 3, 4, 5, 6, 7, 8, 9}, weight = {10, 10, 10, 10, 10, 10, 10, 10, 10}}\n  end\n\n   if not code_number then\n     code_number = randW(g.technical.code.number, g.technical.code.weight) -- выбор случайного кода\n  g.technical.code.weight[code_number] = g.technical.code.weight[code_number] * 0.1 -- уменьшение веса выбранного кода\n  \n  local a = g.technical.code.weight\n  local b = 0\n  for k, v in pairs(a) do\n    if v ~= a[1] then\n      b = 1\n    end\n  end\n  g.technical.code = b == 1 and g.technical.code or nil -- обнуление таблицы кодов, если все коэффициенты стали равны\nend\n\nend",
        "text": "-- Установка значений технических переменных"
      },
      {
        "var_not": [
          "sup258",
          1
        ],
        "var_random": [
          "corner258hide1",
          1,
          4,
          "corner258hide2",
          1,
          4
        ],
        "id": 258,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "sup258",
          1
        ]
      },
      {
        "lua_text": "function lua_text()\nfind258sup1 = find258sup1 or 0\nfind258sup2 = find258sup2 or 0\nfind258sup3 = find258sup3 or 0\nfind258sup4 = find258sup4 or 0\nvars[\"261found1\"] = vars[\"261found1\"] or 0\nvars[\"261found2\"] = vars[\"261found2\"] or 0\nlocal count = find258sup1 <plus> find258sup2 <plus> find258sup3 <plus> find258sup4\nlocal text = ( count == 0 and \"Всё четыре угла помещения были завалены грудами камней и разным мусором. Возможно, среди хлама можно было отыскать что-нибудь стоящее. \") or ( count == 1 and \"Три угла помещения оставались завалены грудами камней и разным мусором, ещё один уже был расчищен Орнасом. \") or ( count == 2 and \"Два угла помещения оставались завалены грудами камней и разным мусором, другие два Орнас уже расчистил. \") or ( count == 3 and \"Три угла помещения были расчищены от груд камней и разного мусора, а последний пока оставался необследованным. \") or (count == 4 and \"Орнас уже разобрал все завалы вдоль стен зала, потратив на это много времени и сил. Юноша отыскал среди завалов старый мандалорский шлем и таинственный обруч, но теперь был уверен, что ничего достойного внимания здесь больше не осталось.\")\nif count ~= 4 then\nlocal count2 = vars[\"261found1\"] <plus> vars[\"261found2\"] \nlocal b = count2 == 2 and count < 4 and 1 or 0\ntext = text .. ( (count2 == 0 and \"Юноша пока не нашёл в завалах чего-то интересного или полезного.\") or (b == 1 and \"Юноша уже отыскал среди завалов старый шлем и таинственный обруч, но что ещё может скрываться там, среди камней?\") or (vars[\"261found1\"] == 1 and \"Юноша уже отыскал среди завалов таинственный обруч, но что ещё может скрываться там, среди камней?\") or (vars[\"261found2\"] == 1 and \"Юноша уже отыскал среди завалов старый мандалорский шлем, но что ещё может скрываться там, среди камней?\") )\nend\nreturn text\nend",
        "id": 258,
        "text": "генерация текста",
        "comment": true,
        "merge": true
      },
      {
        "var_not": [
          "find258sup1",
          1,
          "style",
          2
        ],
        "var_equal": [
          "timer265sup",
          0
        ],
        "id": 261,
        "text": "Разобрать завал в правом ближнем ко входу углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          1,
          "find258sup1",
          1
        ]
      },
      {
        "var_not": [
          "find258sup1",
          1
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_equal": [
          "style",
          2
        ],
        "id": 261,
        "text": "Разобрать завал в правом ближнем ко входу углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          1,
          "find258sup1",
          1
        ]
      },
      {
        "id": 265,
        "text": "Разобрать завал в правом ближнем ко входу углу",
        "var_not": [
          "timer265sup",
          0
        ],
        "var_equal": [
          "find258sup1",
          0
        ]
      },
      {
        "var_not": [
          "find258sup2",
          1,
          "style",
          2
        ],
        "var_equal": [
          "timer265sup",
          0
        ],
        "id": 261,
        "text": "Разобрать завал в левом ближнем ко входу углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          2,
          "find258sup2",
          1
        ]
      },
      {
        "var_not": [
          "find258sup2",
          1
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_equal": [
          "style",
          2
        ],
        "id": 261,
        "text": "Разобрать завал в левом ближнем ко входу углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          2,
          "find258sup2",
          1
        ]
      },
      {
        "id": 265,
        "text": "Разобрать завал в левом ближнем ко входу углу",
        "var_not": [
          "timer265sup",
          0
        ],
        "var_equal": [
          "find258sup2",
          0
        ]
      },
      {
        "var_not": [
          "find258sup3",
          1,
          "style",
          2
        ],
        "comment": false,
        "var_equal": [
          "timer265sup",
          0
        ],
        "id": 261,
        "text": "Разобрать завал в правом дальнем от входа углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          3,
          "find258sup3",
          1
        ]
      },
      {
        "var_not": [
          "find258sup3",
          1
        ],
        "comment": false,
        "var_equal": [
          "style",
          2
        ],
        "id": 261,
        "text": "Разобрать завал в правом дальнем от входа углу",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_set": [
          "timer265set",
          1,
          "find258",
          3,
          "find258sup3",
          1
        ]
      },
      {
        "id": 265,
        "text": "Разобрать завал в правом дальнем от входа углу",
        "var_not": [
          "timer265sup",
          0
        ],
        "var_equal": [
          "find258sup3",
          0
        ]
      },
      {
        "var_not": [
          "find258sup4",
          1,
          "style",
          2
        ],
        "var_equal": [
          "timer265sup",
          0
        ],
        "id": 261,
        "text": "Разобрать завал в левом дальнем от входа углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          4,
          "find258sup4",
          1
        ]
      },
      {
        "var_not": [
          "find258sup4",
          1
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_equal": [
          "style",
          2
        ],
        "id": 261,
        "text": "Разобрать завал в левом дальнем от входа углу",
        "var_set": [
          "timer265set",
          1,
          "find258",
          4,
          "find258sup4",
          1
        ]
      },
      {
        "id": 265,
        "text": "Разобрать завал в левом дальнем от входа углу",
        "var_not": [
          "timer265sup",
          0
        ],
        "var_equal": [
          "find258sup4",
          0
        ]
      },
      {
        "var_not": [
          "arm1",
          1
        ],
        "var_equal": [
          "261found1",
          1,
          "arm1",
          0
        ],
        "id": 262,
        "text": "Рассмотреть надписи на браслете",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "merge": false
      },
      {
        "id": 263,
        "text": "Внимательно осмотреть шлем",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "var_equal": [
          "261found2",
          1,
          "helmet",
          0
        ]
      },
      {
        "id": 158,
        "text": "Назад"
      },
      {
        "id": 265,
        "text": "Новый ответ. введите текст",
        "run": [
          265
        ],
        "var_not": [
          "style",
          2
        ]
      }
    ]
  },
  {
    "id": 259,
    "text": "   Орнас быстрым шагом подошёл в центр помещения, ",
    "answers": [
      {
        "id": 259,
        "text": "к застывшей на полу фигуре своего поверженного противника. Его внимание ещё издалека привлекли едва различимые линии и рисунки на полу, большую часть которых сейчас закрывало тело терентатека.\n   Юноша остановился возле него и огляделся. Чтобы рассмотреть отметки на полу, нужно сначала передвинуть многотонную тушу монстра.",
        "need": [
          -274
        ],
        "merge": true
      },
      {
        "id": 259,
        "text": "к загадочному узору из трёх кругов на полу недалеко от вздымающегося почти до самого потолка тела терентатека. Он остановился, всматриваясь в линии и прорези на полу между колонн.",
        "need": 274,
        "merge": true
      },
      {
        "id": 274,
        "text": "Переместить труп с помощью Силы",
        "need": -274
      },
      {
        "id": 273,
        "text": "Дальше",
        "need": 274
      },
      {
        "contentList": [
          "https://i.ibb.co/z6Q63q0/image.png https://i.ibb.co/4V1vPzX/2-9-1-7-15.png https://i.ibb.co/TMGWj8Z/2-10-2-6-14.png https://i.ibb.co/7Gb4wwy/2-11-3-5-13.png https://i.ibb.co/4JvycVW/2-12-4-4-12.png https://i.ibb.co/Fh4sdGL/2-13-5-3-11.png https://i.ibb.co/BLv3mHp/2-14-6-2-10.png https://i.ibb.co/DKKZK5W/2-15-7-1-9.png https://i.ibb.co/xsJhPgf/2-16-8-0.png https://i.ibb.co/g9FTqpt/3-9-1-7-15.png https://i.ibb.co/G3qvKcx/3-10-2-6-14.png https://i.ibb.co/sRc76PJ/3-11-3-5-13.png https://i.ibb.co/5TpXrc5/3-12-4-4-12.png https://i.ibb.co/VNmQ6Px/3-13-5-3-11.png https://i.ibb.co/5rgdh72/3-14-6-2-10.png https://i.ibb.co/hK7R9Jk/3-15-7-1-9.png https://i.ibb.co/CJ3qVb7/3-16-8-0.png https://i.ibb.co/CQp5n0S/1-9-1-7-15.png https://i.ibb.co/SJDF8sg/1-10-2-6-14.png https://i.ibb.co/TKh4hJG/1-11-3-5-13.png https://i.ibb.co/zsZtH7S/1-12-4-4-12.png https://i.ibb.co/X7DP0yq/1-13-5-3-11.png https://i.ibb.co/qRkHbGX/1-14-6-2-10.png https://i.ibb.co/rZJP9vY/1-15-7-1-9.png https://i.ibb.co/N2KGWcD/1-16-8-0.png",
          "central"
        ],
        "super_calculate": false,
        "id": 2,
        "calculate": true,
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 260,
    "text": "   Орнас со всех ног бросился назад к двери, через которую попал в этот зал. За доли секунды расправившись с замком, он ловко проскочил наружу, и створки с негромким лязгом захлопнулись за его спиной.",
    "answers": [
      {
        "id": 260,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = 2\nend",
        "go_to": [
          "gofrom"
        ]
      }
    ]
  },
  {
    "id": 261,
    "text": "   Орнас ",
    "answers": [
      {
        "id": 261,
        "text": "с помощью Силы поднял в воздух мусор, заваливший весь угол.\n   В течение нескольких минут он медленно ходил среди зависших каменных обломков, кусков металла и осколков стекла, будто звездолёт в астероидном поле. Он то и дело вглядывался в необычные по форме предметы, затем лёгким движением отталкивал их прочь.\n  ",
        "merge": true,
        "var_equal": [
          "style",
          2
        ]
      },
      {
        "id": 261,
        "var_not": [
          "style",
          2
        ],
        "text": "оценил объём предстоящей работы и с горечью вздохнул. Затем подошёл к объекту предстоящих раскопок, опустился на колени и начал медленно перебирать камень за камнем, пытаясь отыскать в груде мусора хоть что-нибудь полезное.<s>ufeff\n   В течение следующего часа джедай методично перекладывал горы каменных обломков, кусков металла и осколков стекла, то и дело вглядываясь в необычные по форме предметы, а затем с досадой отбрасывая их прочь.<s>ufeff\n  ",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nlocal a =0\n\nfor i = 1, 3 do\nvars[\"arm\" .. i .. \"seen\"] = vars[\"arm\" .. i .. \"seen\"]  or 0\na = a <plus> (vars[\"arm\" .. i .. \"seen\"]  > 0 and 1 or.0)\nend\n\nreturn a == 1\nend",
        "var_equal": [
          "find258",
          "corner258hide1"
        ],
        "id": 261,
        "text": " Тем не менее, усердие юноши было вознаграждено: в какой-то момент в его руки попал странный браслет из неизвестного чёрного металла. Как только Орнас прикоснулся к этому лёгкому обручу, он ощутил, что тот буквально впитывает тепло его тела, а ещё через несколько секунд на гладкой поверхности проявились необычные символы.",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nlocal a =0\n\nfor i = 1, 3 do\nvars[\"arm\" .. i .. \"seen\"] = vars[\"arm\" .. i .. \"seen\"]  or 0\na = a <plus> (vars[\"arm\" .. i .. \"seen\"]  > 0 and 1 or.0)\nend\n\nreturn a == 2\nend",
        "var_equal": [
          "find258",
          "corner258hide1"
        ],
        "id": 187,
        "text": " Тем не менее, усердие юноши было вознаграждено: в какой-то момент в его руки попал браслет из тёмного металла. Ещё один, совсем как тот, что Орнас нашёл раньше.\n   Юноша прикоснулся к браслету и вновь ощутил, как металл втягивал в себя тепло. Спустя несколько секунд на его гладкой поверхности начали появляться символы, похожие на те, которые он уже видел до этого.",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nlocal a =0\n\nfor i = 1, 3 do\nvars[\"arm\" .. i .. \"seen\"] = vars[\"arm\" .. i .. \"seen\"]  or 0\na = a <plus> (vars[\"arm\" .. i .. \"seen\"]  > 0 and 1 or.0)\nend\n\nreturn a == 3\nend",
        "var_equal": [
          "find258",
          "corner258hide1"
        ],
        "id": 187,
        "text": " Тем не менее, усердие юноши было вознаграждено: в какой-то момент в его руки попал браслет из тёмного металла. Ещё один, совсем как те, что Орнас нашёл раньше.\n   Юноша прикоснулся к браслету и вновь ощутил, как металл втягивал в себя тепло. Спустя несколько секунд на его гладкой поверхности начали появляться символы, похожие на те, которые он уже видел до этого.",
        "merge": true
      },
      {
        "var_set": [
          "261found1",
          1
        ],
        "var_equal": [
          "find258",
          "corner258hide1"
        ],
        "id": 261,
        "text": "band found",
        "calculate": true,
        "merge": false
      },
      {
        "merge": false,
        "var_equal": [
          "find258",
          "corner258hide2"
        ],
        "id": 261,
        "text": "helmet found",
        "calculate": true,
        "var_set": [
          "261found2",
          1
        ]
      },
      {
        "id": 261,
        "text": "\n   Юноша продолжил поиск.",
        "merge": true,
        "var_equal": [
          "find258",
          "corner258hide1",
          "find258",
          "corner258hide2"
        ]
      },
      {
        "id": 261,
        "text": " Спустя какое-то время внимание Орнаса привлёк довольно крупный металлический предмет, ярко блестящий в пыли. Он аккуратно взял предмет в руки и понял, что это – настоящий мандалорский шлем. Покрытый выцветшими узорами и кое-где помятый, он был не только ценной археологической находкой. Такие вещи нередко хранят в себе немало важной информации.",
        "var_equal": [
          "find258",
          "corner258hide2"
        ],
        "merge": true
      },
      {
        "id": 261,
        "text": " К тому моменту, когда Орнас буквально по крупицам перебрал всю огромную кучу мусора в углу, его руки и ноги начали затекать от долгой однообразной работы. Не смотря на все усилия юноши, ему не удалось отыскать ничего ценного или необычного в завалах.",
        "var_not": [
          "find258",
          "corner258hide1",
          "find258",
          "corner258hide2",
          "style",
          2
        ],
        "merge": true
      },
      {
        "var_not": [
          "find258",
          "corner258hide1",
          "find258",
          "corner258hide2"
        ],
        "var_equal": [
          "style",
          2
        ],
        "id": 261,
        "text": " Тщательно осмотрев почти каждую крупицу всей огромной кучи мусора, Орнас не заметил чего-то необычного, ценного или интересного. Он отошёл от висящих в воздухе камней и предметов, после чего они с грохотом обрушились на пол, подняв в воздух клубы пыли.",
        "merge": true
      },
      {
        "var_equal": [
          "find258",
          "corner258hide1"
        ],
        "id": 262,
        "text": "Рассмотреть надписи на браслете",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "merge": false
      },
      {
        "id": 263,
        "text": "Внимательно осмотреть шлем",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "var_equal": [
          "find258",
          "corner258hide2"
        ]
      },
      {
        "id": 265,
        "text": "Новый ответ. введите текст",
        "run": [
          265
        ],
        "var_not": [
          "style",
          2
        ]
      },
      {
        "id": 258,
        "text": "Дальше",
        "var_equal": [
          "style",
          2
        ]
      }
    ]
  },
  {
    "id": 262,
    "text": "   Орнас поднёс металлический браслет к самым глазам, чтобы внимательно разглядеть надпись, проявившуюся на гладкой поверхности после его прикосновения. Таинственные символы медленно исчезли спустя какое-то время, но появились вновь, после того как юноша ещё раз напитал странный предмет теплом своей ладони.",
    "answers": [
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9
        ],
        "id": 262,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ]
      },
      {
        "id": 262,
        "text": "\n   Орнас закрепил браслет на левую руку, надеясь, что тот ему ещё пригодится.",
        "merge": true,
        "var_equal": [
          "arm1",
          1
        ]
      },
      {
        "var_not": [
          "sup262",
          1
        ],
        "var_add": [
          "arm_sup",
          1
        ],
        "id": 262,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "sup262",
          1
        ]
      },
      {
        "text": "Новый ответ. введите текст",
        "id": 262,
        "calculate": true,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeArmlets = 1\nend",
        "var_set": [
          "arm1seen",
          "arm_sup"
        ]
      },
      {
        "var_equal": [
          "arm1",
          0
        ],
        "lua_do": "function lua_do()\ntakeOnArmlet = 1\nhideMap = 0\nend",
        "text": "Надеть браслет на руку",
        "id": 158,
        "var_set": [
          "arm1",
          1
        ]
      },
      {
        "id": 158,
        "text": "Назад",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 263,
    "text": "   Шлем оказался намного легче, чем Орнас мог вообразить. Весь испещрённый царапинами, с поблекшей от времени краской, он обладал характерным Т-образным визором и всё ещё выглядел достаточно надёжно. У юноши теплилась надежда, что электронные системы не утратили работоспособность, тогда удалось бы многое узнать о прежнем владельце шлема.",
    "answers": [
      {
        "id": 268,
        "text": "Надеть шлем",
        "var_set": [
          "return",
          269,
          "268sup",
          1
        ]
      },
      {
        "id": 269,
        "text": "Взять шлем с собой",
        "var_set": [
          "helmet",
          1
        ]
      },
      {
        "id": 158,
        "text": "Назад",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 264,
    "text": "task list",
    "answers": [
      {
        "id": 264,
        "text": "Сделать вариативное описание браслетов от их количества\ndone!",
        "need": 1000
      },
      {
        "id": 264,
        "text": "Сделать описание шлема, добавить вариативное описание ко всем битвам \"бросил шлем на пол\" в начале и \"поднял шлем\" в конце, добавить \"нёс в руках шлем\" на страницу-статус \n\n!!! done",
        "need": 1000
      },
      {
        "id": 264,
        "text": "Сделать загадку-люк под терентатеком.\nна каждой колонне разместить подсказку: символ, количество градусов, на четвёртой колонне разместить легенду: от маленького круга к большому, повтор n раз в зависимости от рандома; сделать рандом для положения символов 2 и 3 кругов, рандом для \n\n!!! done",
        "need": 1000
      },
      {
        "id": 264,
        "text": "A surprise to be sure but a welcome one (1)",
        "var_equal": [
          "code_number",
          1
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ],
        "text": "A surprise to",
        "var_equal": [
          "code_number",
          1
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ],
        "text": "be sure but a",
        "var_equal": [
          "code_number",
          1
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png"
        ],
        "text": "welcome one",
        "var_equal": [
          "code_number",
          1
        ]
      },
      {
        "id": 264,
        "text": "These aren't the droids you are looking for (2)",
        "var_equal": [
          "code_number",
          2
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ],
        "text": "These aren't",
        "var_equal": [
          "code_number",
          2
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ],
        "text": "the droids you",
        "var_equal": [
          "code_number",
          2
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/YWPjxVZ/are-looking-for.png"
        ],
        "text": "are looking for",
        "var_equal": [
          "code_number",
          2
        ]
      },
      {
        "id": 264,
        "text": "I find your lack of faith disturbing (3)",
        "var_equal": [
          "code_number",
          3
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ],
        "text": "I find your",
        "var_equal": [
          "code_number",
          3
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ],
        "text": "lack of faith",
        "var_equal": [
          "code_number",
          3
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ],
        "text": "disturbing",
        "var_equal": [
          "code_number",
          3
        ]
      },
      {
        "id": 264,
        "text": "Do, or do not. There is no \"try\" (4)",
        "var_equal": [
          "code_number",
          4
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ],
        "text": "Do, or do not.",
        "var_equal": [
          "code_number",
          4
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ],
        "text": "There is",
        "var_equal": [
          "code_number",
          4
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/ysDxHSH/no-try.png"
        ],
        "text": "no \"try\"",
        "var_equal": [
          "code_number",
          4
        ]
      },
      {
        "id": 264,
        "text": "May the force be with you (5)",
        "var_equal": [
          "code_number",
          5
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ],
        "text": "may the",
        "var_equal": [
          "code_number",
          5
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ],
        "text": "force be",
        "var_equal": [
          "code_number",
          5
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ],
        "text": "with you",
        "var_equal": [
          "code_number",
          5
        ]
      },
      {
        "id": 264,
        "text": "You underestimate my power! (6)",
        "var_equal": [
          "code_number",
          6
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ],
        "text": "You",
        "var_equal": [
          "code_number",
          6
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ],
        "text": "underestimate",
        "var_equal": [
          "code_number",
          6
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/5Y48PTW/my-power.png"
        ],
        "text": "my power!",
        "var_equal": [
          "code_number",
          6
        ]
      },
      {
        "id": 264,
        "text": "No, I am your father (7)",
        "var_equal": [
          "code_number",
          7
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ],
        "text": "No, I",
        "var_equal": [
          "code_number",
          7
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ],
        "text": "am your",
        "var_equal": [
          "code_number",
          7
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ],
        "text": "father",
        "var_equal": [
          "code_number",
          7
        ]
      },
      {
        "id": 264,
        "text": "I’ve got a bad feeling about this (8)",
        "var_equal": [
          "code_number",
          8
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ],
        "text": "I’ve got a",
        "var_equal": [
          "code_number",
          8
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ],
        "text": "bad feeling",
        "var_equal": [
          "code_number",
          8
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/ZMzQggs/about-this.png"
        ],
        "text": "about this",
        "var_equal": [
          "code_number",
          8
        ]
      },
      {
        "id": 264,
        "text": "The full power of the dark side (9)",
        "var_equal": [
          "code_number",
          9
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ],
        "text": "The full",
        "var_equal": [
          "code_number",
          9
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ],
        "text": "power of",
        "var_equal": [
          "code_number",
          9
        ]
      },
      {
        "id": 264,
        "newAnswerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ],
        "text": "the dark side",
        "var_equal": [
          "code_number",
          9
        ]
      }
    ]
  },
  {
    "id": 265,
    "text": "   Орнас подошёл к ещё одной огромной насыпи камней и мусора, которую ему предстояло разгрести в поисках чего-то полезного. Он печально взглянул на неё, оценивая объём работы, но приступать к этому утомительному занятию и тратить на него своё время и силы ему сейчас не хотелось.<s>r\n   \"Да, отдых нужен мне, – подумал джедай, разминая затёкшие от долгой монотонной работы мышцы. –  ",
    "answers": [
      {
        "var_add": [
          "timer265end",
          380
        ],
        "var_equal": [
          "timer265set",
          1
        ],
        "id": 265,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "timer265start",
          "global time",
          "timer265end",
          "global time",
          "timer265set",
          0
        ]
      },
      {
        "text": "Новый ответ. введите текст",
        "var_sub": [
          "timer265sup",
          "global time"
        ],
        "id": 265,
        "calculate": true,
        "var_min": [
          "timer265sup",
          0
        ],
        "var_set": [
          "timer265sup",
          "timer265end"
        ]
      },
      {
        "var_show": [
          "timer265sup"
        ],
        "comment": true,
        "id": 265,
        "text": "sup time:",
        "update": [
          1
        ],
        "need": 1000
      },
      {
        "var_show": [
          "global time"
        ],
        "comment": true,
        "id": 265,
        "text": "global time:",
        "update": [
          1
        ],
        "need": 1000
      },
      {
        "id": 265,
        "text": "старт",
        "need": 1000,
        "var_set": [
          "timer265set",
          1
        ]
      },
      {
        "id": 265,
        "text": "Обновить страницу",
        "need": 1000
      },
      {
        "var_equal": [
          "global current_id",
          265
        ],
        "id": 265,
        "var_more": [
          "timer265sup",
          300
        ],
        "text": "Я вернусь сюда через десять минут и разберусь с этим завалом.\"",
        "merge": true
      },
      {
        "merge": true,
        "var_equal": [
          "global current_id",
          265
        ],
        "id": 265,
        "text": "Я обязательно разберусь с этим завалом минут через пять.\"",
        "var_more": [
          "timer265sup",
          180
        ],
        "var_no_more": [
          "timer265sup",
          300
        ]
      },
      {
        "var_equal": [
          "global current_id",
          265
        ],
        "var_less": [
          "timer265sup",
          180
        ],
        "text": "Я должен отдохнуть ещё хотя бы пару минут, прежде чем приступить к этому.\"",
        "id": 265,
        "merge": true
      },
      {
        "id": 258,
        "text": "Дальше",
        "var_not": [
          "global current_id",
          258
        ]
      }
    ]
  },
  {
    "id": 266,
    "text": "   Орнас вернул блок памяти в лежащую на полу металлическую голову секретаря, аккуратно подсоединив все необходимые контакты. После этого надлежащим образом закрепил голову на корпусе дроида, ещё раз перепроверил все соединения и активировал старый механизм.\n   С еле уловимым гудением и скрипом деталей робот-секретарь медленно поднялся на ноги и осмотрелся, после чего уверенно зашагал по отсеку, монотонно повторяя заложенную в его микросхемы программу.",
    "answers": [
      {
        "id": 219,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 267,
    "text": "Новые картинки<s>r\nA surprise to, <s>r\nbe sure but a, <s>r\nwelcome one, \n<s>r\nThese aren't, <s>r\nthe droids you, <s>r\nare looking for\n<s>r\nI find your, <s>r\nlack of faith, <s>r\ndisturbing, \n<s>r\nDo, or do not. <s>r\nThere is, <s>r\nno 'try‘, \n<s>r\nMay the, <s>r\nforce be, <s>r\nwith you, \n<s>r\nYou, <s>r\nunderestimate, <s>r\nmy power! \n<s>r\nNo, I, <s>r\nam your, <s>r\nfather\n<s>r\nI’ve got a, <s>r\nbad feeling, <s>r\nabout this, \n<s>r\nThe full, <s>r\npower of, <s>r\nthe dark side, ",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn g.current_id ~= 929\nend",
        "var_equal": [
          "touch235",
          1,
          "arm235",
          1
        ],
        "id": 267,
        "text": "\n   Юноша прикоснулся к чёрному металлу браслета и вновь ощутил кончиками пальцев исходящий от него холод. После этого гладкая поверхность покрылась узорами символов:",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id ~= 929\nend",
        "var_equal": [
          "touch235",
          1
        ],
        "id": 267,
        "text": "\n   Юноша прикоснулся к чёрному металлу браслетов и вновь ощутил кончиками пальцев исходящий от них холод. После этого их гладкая поверхность покрылась узорами символов:",
        "var_more": [
          "arm235",
          1
        ],
        "merge": true
      },
      {
        "id": 267,
        "text": "tune 1",
        "var_add": [
          "arm1seen",
          1
        ],
        "need": 1000
      },
      {
        "id": 267,
        "text": "tune 2",
        "var_add": [
          "arm2seen",
          1
        ],
        "need": 1000
      },
      {
        "id": 267,
        "text": "tune 3",
        "var_add": [
          "arm3seen",
          1
        ],
        "need": 1000
      },
      {
        "id": 267,
        "text": "tune all",
        "need": 1000,
        "var_set": [
          "arm3seen",
          0,
          "arm2seen",
          0,
          "arm1seen",
          0
        ]
      },
      {
        "var_not": [
          "arm1seen",
          2,
          "arm1seen",
          3,
          "arm2seen",
          1,
          "arm2seen",
          3,
          "arm3seen",
          1,
          "arm3seen",
          2
        ],
        "id": 267,
        "calculate": true,
        "text": "count1",
        "var_set": [
          "267visA",
          1,
          "267visB",
          1,
          "267visC",
          1
        ]
      },
      {
        "var_not": [
          "arm1seen",
          1,
          "arm1seen",
          2,
          "arm2seen",
          2,
          "arm2seen",
          3,
          "arm3seen",
          1,
          "arm3seen",
          3
        ],
        "id": 267,
        "text": "count2",
        "calculate": true,
        "var_set": [
          "267visA",
          2,
          "267visB",
          1,
          "267visC",
          1
        ]
      },
      {
        "var_not": [
          "arm1seen",
          1,
          "arm1seen",
          3,
          "arm2seen",
          2,
          "arm2seen",
          1,
          "arm3seen",
          2,
          "arm3seen",
          3
        ],
        "id": 267,
        "calculate": true,
        "text": "count3",
        "var_set": [
          "267visA",
          2,
          "267visB",
          2,
          "267visC",
          1
        ]
      },
      {
        "var_not": [
          "arm1seen",
          1,
          "arm1seen",
          3,
          "arm2seen",
          2,
          "arm2seen",
          3,
          "arm3seen",
          2,
          "arm3seen",
          1
        ],
        "id": 267,
        "text": "count4",
        "calculate": true,
        "var_set": [
          "267visA",
          3,
          "267visB",
          2,
          "267visC",
          2
        ]
      },
      {
        "var_not": [
          "arm1seen",
          2,
          "arm1seen",
          3,
          "arm2seen",
          2,
          "arm2seen",
          1,
          "arm3seen",
          3,
          "arm3seen",
          1
        ],
        "id": 267,
        "calculate": true,
        "text": "count5",
        "var_set": [
          "267visA",
          3,
          "267visB",
          3,
          "267visC",
          2
        ]
      },
      {
        "var_not": [
          "arm1seen",
          2,
          "arm1seen",
          1,
          "arm2seen",
          3,
          "arm2seen",
          1,
          "arm3seen",
          3,
          "arm3seen",
          2
        ],
        "id": 267,
        "text": "count6",
        "calculate": true,
        "var_set": [
          "267visA",
          4,
          "267visB",
          3,
          "267visC",
          2
        ]
      },
      {
        "var_equal": [
          "arm3seen",
          0
        ],
        "id": 267,
        "text": "count7",
        "calculate": true,
        "var_set": [
          "267visC",
          0
        ]
      },
      {
        "var_equal": [
          "arm2seen",
          0
        ],
        "id": 267,
        "text": "count8",
        "calculate": true,
        "var_set": [
          "267visB",
          0
        ]
      },
      {
        "var_equal": [
          "arm1seen",
          0
        ],
        "id": 267,
        "calculate": true,
        "text": "count9",
        "var_set": [
          "267visA",
          0
        ]
      },
      {
        "var_equal": [
          "touch235",
          1,
          "arm1",
          0
        ],
        "id": 267,
        "text": "count10",
        "calculate": true,
        "var_set": [
          "267visA",
          0
        ]
      },
      {
        "var_equal": [
          "touch235",
          1,
          "arm2",
          0
        ],
        "id": 267,
        "calculate": true,
        "text": "count11",
        "var_set": [
          "267visB",
          0
        ]
      },
      {
        "var_equal": [
          "touch235",
          1,
          "arm3",
          0
        ],
        "id": 267,
        "calculate": true,
        "text": "count12",
        "var_set": [
          "267visC",
          0
        ]
      },
      {
        "var_add": [
          "code_number",
          1
        ],
        "var_equal": [
          "code_number",
          1
        ],
        "id": 267,
        "text": "A surprise to be sure but a welcome one (1)",
        "need": 1000,
        "calculate": false
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          1,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ]
      },
      {
        "id": 264,
        "text": "These aren't the droids you are looking for (2)",
        "need": 1000,
        "var_equal": [
          "code_number",
          2
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/YWPjxVZ/are-looking-for.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/YWPjxVZ/are-looking-for.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          2,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      },
      {
        "id": 264,
        "text": "I find your lack of faith disturbing (3)",
        "need": 1000,
        "var_equal": [
          "code_number",
          3
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          3,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      },
      {
        "id": 264,
        "text": "Do, or do not. There is no \"try\" (4)",
        "need": 1000,
        "var_equal": [
          "code_number",
          4
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ysDxHSH/no-try.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ysDxHSH/no-try.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          4,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ]
      },
      {
        "id": 264,
        "text": "May the force be with you (5)",
        "need": 1000,
        "var_equal": [
          "code_number",
          5
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          5,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ]
      },
      {
        "id": 264,
        "text": "You underestimate my power! (6)",
        "need": 1000,
        "var_equal": [
          "code_number",
          6
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/5Y48PTW/my-power.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/5Y48PTW/my-power.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          6,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      },
      {
        "id": 264,
        "text": "No, I am your father (7)",
        "need": 1000,
        "var_equal": [
          "code_number",
          7
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          7,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ]
      },
      {
        "id": 264,
        "text": "I’ve got a bad feeling about this (8)",
        "need": 1000,
        "var_equal": [
          "code_number",
          8
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ZMzQggs/about-this.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/ZMzQggs/about-this.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          8,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      },
      {
        "id": 264,
        "text": "The full power of the dark side (9)",
        "need": 1000,
        "var_equal": [
          "code_number",
          9
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visA",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visB",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visC",
          1
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visA",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visB",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visA",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visC",
          2
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visB",
          3
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ]
      },
      {
        "comment": true,
        "var_equal": [
          "code_number",
          9,
          "267visA",
          4
        ],
        "id": 267,
        "text": "   ",
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ]
      },
      {
        "id": 267,
        "text": "_______",
        "comment": true,
        "middle_answer": true
      }
    ]
  },
  {
    "id": 268,
    "text": "   ",
    "answers": [
      {
        "id": 319,
        "text": "Голосовой дневник. Запись 2187",
        "lua_text": "function lua_text()\nreturn isHistoryContain(319) and \"Голосовой дневник. Запись 2187 [Уже прослушано]\" or \"Голосовой дневник. Запись 2187\"\nend",
        "var_set": [
          "268sup2",
          1
        ]
      },
      {
        "id": 320,
        "text": "Голосовой дневник. Запись 2188",
        "lua_text": "function lua_text()\nreturn isHistoryContain(320) and \"Голосовой дневник. Запись 2188 [Уже прослушано]\" or \"Голосовой дневник. Запись 2188\"\nend",
        "var_set": [
          "268sup2",
          1
        ]
      },
      {
        "id": 321,
        "text": "Голосовой дневник. Запись 2190",
        "lua_text": "function lua_text()\nreturn isHistoryContain(321) and \"Голосовой дневник. Запись 2190 [Уже прослушано]\" or \"Голосовой дневник. Запись 2190\"\nend",
        "var_set": [
          "268sup2",
          1
        ]
      },
      {
        "id": 35,
        "text": "Снять шлем",
        "var_set": [
          "268sup",
          2
        ]
      },
      {
        "var_equal": [
          "268sup",
          2
        ],
        "id": 268,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "268sup2",
          1
        ]
      },
      {
        "var_not": [
          "268sup",
          1
        ],
        "id": 268,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "return",
          "global previous_id",
          "268sup",
          1
        ]
      },
      {
        "id": 268,
        "text": "Орнас поднёс мандалорский шлем к лицу и ещё раз внимательно осмотрел со всех сторон. Не отыскав чего-нибудь, хоть сколько-то напоминающего элемент питания и кнопку активации, он просто водрузил древний прибор на свою голову.\n   Кромешная темнота на секунду захватила джедая, а затем развеялась под действием встроенных голопроекторов, отображающих общий интерфейс и вспомогательную информацию. \"Он работает!\" – внутренне заликовал юноша, до этого момента сомневавшийся в успехе задумки. Теперь у него был доступ к информации, оставленной последним обладателем ценного трофея.\n   Впрочем, среди уцелевших данных не оказалось чего-то хоть сколько-то значимого, лишь несколько записей личного голосового дневника владельца шлема. Возможно, что-то полезное можно было бы почерпнуть и из них.",
        "var_not": [
          "268sup2",
          1
        ],
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 268\nend",
        "var_equal": [
          "268sup2",
          1
        ],
        "id": 268,
        "text": "Мандалорский шлем предоставлял Орнасу доступ к несколькоим уцелевшим записям личного голосового дневника предыдущего владельца шлема. Возможно, из этих заметок удастся узнать что-то важное об этом месте.",
        "merge": true
      }
    ]
  },
  {
    "id": 269,
    "text": "   Юноша решил взять ценную находку с собой. Он повертел шлем в руках некоторое время, оценивая, как бы поудобнее его разместить, а затем пристроил под левую подмышку, прижав рукой к туловищу.",
    "answers": [
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhelmet = 1\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 270,
    "text": "<s>r\n   Юноша замер на месте, прижимая левой рукой старый мандалорский шлем, найденный в центральном зале храма.",
    "answers": [
      {
        "id": 270,
        "text": "\n   Юноша замер на месте, прижимая рукой к своему боку старый мандалорский шлем, найденный в центральном зале храма.",
        "var_not": [
          "global current_id",
          214,
          "global current_id",
          201,
          "global current_id",
          189,
          "global current_id",
          196,
          "global current_id",
          155,
          "global current_id",
          158,
          "global current_id",
          160
        ],
        "merge": true
      },
      {
        "id": 270,
        "text": "\n   Орнас оглядывал комнату, придерживая рукой шлем, который он до этого нашёл в завалах и теперь везде носил с собой.",
        "var_equal": [
          "global current_id",
          155
        ],
        "merge": true
      },
      {
        "id": 270,
        "text": "\n   Орнас замер на месте, прижимая левой рукой к своему боку старый мандалорский шлем, найденный в центральном зале храма.",
        "merge": true,
        "var_equal": [
          "global current_id",
          196
        ]
      },
      {
        "id": 270,
        "text": "\n   Орнас замер на месте, прижимая левой рукой к своему боку старый мандалорский шлем, найденный в одном из завалов здесь же.",
        "var_equal": [
          "global current_id",
          158
        ],
        "merge": true
      },
      {
        "id": 270,
        "text": "\n   Юноша остановился, держа под мышкой левой руки найденный ранее древний мандалорский шлем.",
        "merge": true,
        "var_equal": [
          "global current_id",
          214
        ]
      },
      {
        "id": 270,
        "text": "\n   Юноша остановился, держа под мышкой левой руки найденный ранее древний мандалорский шлем.",
        "var_equal": [
          "global current_id",
          201
        ],
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_equal": [
          "global current_id",
          189
        ],
        "id": 270,
        "text": "\n   Юноша остановился, зажав мандалорский шлем под мышкой и не отрывая взгляда от потенциальных противников.",
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          0
        ],
        "var_equal": [
          "global current_id",
          189
        ],
        "id": 270,
        "text": "\n   Юноша стоял, держа под мышкой пыльный расцарапанный шлем.",
        "merge": true
      },
      {
        "id": 270,
        "text": " Орнас отбросил шлем в сторону, чтобы ничто не мешал ему в бою, и тот с гулким звуком покатился по полу.",
        "merge": true,
        "var_equal": [
          "global current_id",
          160
        ]
      },
      {
        "var_set": [
          "helmet",
          2,
          "helmet270",
          2
        ],
        "var_equal": [
          "global current_id",
          160
        ],
        "id": 270,
        "text": " Орнас отбросил шлем в сторону, чтобы ничто не мешал ему в бою, и тот с гулким звуком покатился по полу.",
        "calculate": true,
        "merge": false
      },
      {
        "id": 268,
        "var_not": [
          "global current_id",
          160,
          "global current_id",
          189,
          "global current_id",
          157,
          "global current_id",
          158
        ],
        "text": "Надеть шлем"
      },
      {
        "id": 268,
        "text": "Надеть шлем",
        "var_more": [
          "victory158",
          0
        ],
        "var_equal": [
          "global current_id",
          158
        ]
      },
      {
        "id": 268,
        "text": "Надеть шлем",
        "var_equal": [
          "global current_id",
          189,
          "fight192",
          1
        ]
      },
      {
        "id": 268,
        "text": "Надеть шлем",
        "var_equal": [
          "global current_id",
          157,
          "boy157",
          1
        ]
      }
    ]
  },
  {
    "id": 271,
    "text": "   Джедай подошёл к дроиду, ",
    "answers": [
      {
        "id": 324,
        "text": "Надеть шлем",
        "var_not": [
          "bang229",
          1
        ],
        "var_equal": [
          "helmet",
          1
        ]
      },
      {
        "id": 157,
        "text": "Отойти от дроида"
      },
      {
        "id": 271,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\nlocal text =bang229 ~= 1 and \"занимавшемуся сваркой каких-то деталей на обшивке звездолёта. При приближении юноши астромех прервал своё занятие, повернулся, издав серию гудков и трелей с повышающейся интонацией, и замер, словно чего-то ожидая.\" or \"однако тот никак не отреагировал на это и остался неподвижен, будто он сам погиб вместе с кораблём. Впрочем, Орнас вполне мог допустить возможность запрограммированной смерти астромеха при уничтожения звездолёта.\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 272,
    "text": "   Колонны визуально отделяли небольшой квадратный участок в самом центре от остального пространства. Орнас медленно обошёл его по периметру, вглядываясь в полустёртые надписи, выбитые на их неровной поверхности.",
    "answers": [
      {
        "id": 273,
        "text": "К механизму",
        "need": 274
      },
      {
        "id": 276,
        "text": "Осмотреть первую колонну",
        "run": [
          276
        ],
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nstyle = style or 1\ncol1stat = col1stat or 0\nreturn col1stat ~= 2 or (col1stat == 2 and (style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend"
      },
      {
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nreturn not ((style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend",
        "var_equal": [
          "col1stat",
          2
        ],
        "id": 272,
        "text": "\n   Первая колонна была разрушена, и странные надписи исчезли вместе с ней навсегда.",
        "merge": true
      },
      {
        "id": 277,
        "text": "Осмотреть вторую колонну",
        "run": [
          277
        ],
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nstyle = style or 1\ncol2stat = col2stat or 0\nreturn col2stat ~= 2 or (col2stat == 2 and (style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend"
      },
      {
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nreturn not ((style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend",
        "var_equal": [
          "col2stat",
          2
        ],
        "id": 272,
        "text": "\n   От второй колонны остались лишь валуны и осколки. Жаль, теперь не восстановить ни её саму, ни надпись на ней.",
        "merge": true
      },
      {
        "id": 278,
        "text": "Осмотреть третью колонну",
        "run": [
          278
        ],
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nstyle = style or 1\ncol3stat = col3stat or 0\nreturn col3stat ~= 2 or (col3stat == 2 and (style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend"
      },
      {
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nreturn not ((style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend",
        "var_equal": [
          "col3stat",
          2
        ],
        "id": 272,
        "text": "\n   С обломками третьей колонны обратилась в прах и хранимая ей надпись с подсказкой.",
        "merge": true
      },
      {
        "id": 279,
        "text": "Осмотреть четвёртую колонну",
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nstyle = style or 1\ncol4stat = col4stat or 0\nreturn col4stat ~= 2 or (col4stat == 2 and (style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend",
        "run": [
          279
        ]
      },
      {
        "lua_if": "function lua_if()\nmiddleRoom = middleRoom or {}\nmiddleRoom.seeTextOnCols = middleRoom.seeTextOnCols or 0\nreturn not ((style == 3 or style == 4) and middleRoom.seeTextOnCols == 1)\nend",
        "var_equal": [
          "col4stat",
          2
        ],
        "id": 272,
        "text": "\n   В руинах четвёртой колонны оказалась погребена и веками хранящаяся там до этого дня поясняющая надпись.",
        "merge": true
      },
      {
        "id": 272,
        "text": "\n   На полу недалеко от обломков четвёртой колонны лежали в пыли какие-то странные продолговатые предметы.",
        "var_equal": [
          "col4stat",
          2,
          "keyposition1",
          0
        ],
        "merge": true
      },
      {
        "var_not": [
          "col4stat",
          2
        ],
        "var_equal": [
          "keyposition1",
          0
        ],
        "id": 272,
        "text": "\n   К четвёртой колонне были прислонены какие-то странные продолговатые предметы.",
        "merge": true
      },
      {
        "id": 295,
        "text": "Осмотреть предметы",
        "var_equal": [
          "keyposition1",
          0
        ]
      },
      {
        "id": 280,
        "text": "Вернуть всё на изначальные позиции и начать заново",
        "need": 274,
        "var_not": [
          "sup280",
          4
        ]
      },
      {
        "id": 158,
        "text": "Отойти от колонн",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "var_equal": [
          "sup280",
          4
        ],
        "id": 272,
        "text": "\n   Орнас уже использовал своё право на вторую попытку и чувствовал, что ничего не изменится, если сейчас попытаться вернуть всё на начальные позиции.",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 272,
        "calculate": true,
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\ncol1stat = col1stat or 0\ncol2stat = col2stat or 0\ncol3stat = col3stat or 0\ncol4stat = col4stat or 0\nlocal a = (col1stat == 2 and 1 or 0) <plus> (col2stat == 2 and 1 or 0) <plus> (col3stat == 2 and 1 or 0) <plus> (col4stat == 2 and 1 or 0) \n\nmiddleRoom.seeTextOnCols = a == 0 and 1 or (middleRoom.seeTextOnCols or 0)\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "super_calculate": false,
        "id": 272,
        "calculate": true,
        "text": "Орнас внимательно обошёл все колонны, ограничивающие центральную часть помещения. Они были покрыты надписями, а их расположение образовывало правильный четырехугольник, стороны которого были параллельны стенам зала. Юноша пронумеровал их для себя, чтобы не запутаться в дальнейшем. Стоя теперь спиной к двери, ведущей вглубь храма, он выбрал первой дальнюю колонну справа, второй — ближнюю колонну с этой же стороны, третьей — ближнюю колонну слева, а четвёртой — левую дальнюю от него колонну. Теперь получалось, что обход всех колонн по кругу соответствовал движению по часовой стрелке, при котором позиция двенадцати часов была направлена на дверь, ведущую ко входу в храм."
      }
    ]
  },
  {
    "id": 273,
    "text": "   Орнас ещё раз оглядел странный механизм, на этот раз более внимательно, стараясь не пропустить ни одной детали.\n   ",
    "answers": [
      {
        "id": 273,
        "text": "Получить чудесным образом какие-нибудь ключи",
        "need": 1000,
        "lua_do": "function lua_do()\nhave_key_form1 = 1\nhave_key_form2 = 1\nhave_key_form3 = 1\nhave_key_form4 = 1\nhave_key_form5 = 1\nhave_key_form6 = 1\nend"
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -16
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -8
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          0
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          8
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          16
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -15
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -7
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          1
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          9
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -14
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -6
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          2
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          10
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -13
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -5
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          3
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          11
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -12
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -4
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          4
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          12
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -11
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -3
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          5
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          13
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -10
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -2
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          6
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          14
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -9
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          -1
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          7
        ]
      },
      {
        "id": 273,
        "text": "Отверстие центрального круга было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key1currentposition",
          15
        ]
      },
      {
        "id": 273,
        "text": ", в нём находился ",
        "var_not": [
          "key1form_try",
          0
        ],
        "merge": true
      },
      {
        "id": 273,
        "text": "ключ с изображением полумесяца",
        "merge": true,
        "var_equal": [
          "key1form_try",
          1
        ]
      },
      {
        "id": 273,
        "text": "ключ с изображением звезды",
        "merge": true,
        "var_equal": [
          "key1form_try",
          2
        ]
      },
      {
        "id": 273,
        "text": "ключ с изображением треугольника",
        "merge": true,
        "var_equal": [
          "key1form_try",
          3
        ]
      },
      {
        "id": 273,
        "text": "ключ с изображением квадрата",
        "merge": true,
        "var_equal": [
          "key1form_try",
          4
        ]
      },
      {
        "id": 273,
        "text": "ключ с изображением пятиугольника",
        "merge": true,
        "var_equal": [
          "key1form_try",
          5
        ]
      },
      {
        "id": 273,
        "text": "ключ с изображением шестиугольника",
        "merge": true,
        "var_equal": [
          "key1form_try",
          6
        ]
      },
      {
        "id": 273,
        "text": ".\n   ",
        "merge": true
      },
      {
        "id": 281,
        "text": "Новый ответ. введите текст",
        "run": [
          281
        ]
      },
      {
        "id": 282,
        "text": "Новый ответ. введите текст",
        "run": [
          282
        ]
      },
      {
        "id": 273,
        "calculate": true,
        "text": "vae set [\"have_key_any\",0]",
        "var_set": [
          "have_key_any",
          0
        ]
      },
      {
        "var_equal": [
          "have_key_form1",
          1
        ],
        "id": 273,
        "calculate": true,
        "text": "vae set [\"have_key_any\",1]",
        "var_set": [
          "have_key_any",
          1
        ]
      },
      {
        "var_equal": [
          "have_key_form2",
          1
        ],
        "id": 273,
        "text": "vae set [\"have_key_any\",1]",
        "calculate": true,
        "var_set": [
          "have_key_any",
          1
        ]
      },
      {
        "var_equal": [
          "have_key_form3",
          1
        ],
        "id": 273,
        "calculate": true,
        "text": "vae set [\"have_key_any\",1]",
        "var_set": [
          "have_key_any",
          1
        ]
      },
      {
        "var_equal": [
          "have_key_form4",
          1
        ],
        "id": 273,
        "calculate": true,
        "text": "vae set [\"have_key_any\",1]",
        "var_set": [
          "have_key_any",
          1
        ]
      },
      {
        "var_equal": [
          "have_key_form5",
          1
        ],
        "id": 273,
        "calculate": true,
        "text": "vae set [\"have_key_any\",1]",
        "var_set": [
          "have_key_any",
          1
        ]
      },
      {
        "var_equal": [
          "have_key_form6",
          1
        ],
        "id": 273,
        "calculate": true,
        "text": "vae set [\"have_key_any\",1]",
        "var_set": [
          "have_key_any",
          1
        ]
      },
      {
        "id": 273,
        "text": "   ",
        "comment": true
      },
      {
        "id": 284,
        "text": "Вставить ключ в отверстие центрального круга",
        "var_less": [
          "key1form_try",
          1
        ],
        "var_equal": [
          "have_key_any",
          1
        ]
      },
      {
        "var_less": [
          "key2form_try",
          1
        ],
        "text": "Вставить ключ в отверстие промежуточного круга",
        "id": 285,
        "var_equal": [
          "have_key_any",
          1
        ]
      },
      {
        "var_less": [
          "key3form_try",
          1
        ],
        "text": "Вставить ключ в отверстие внешнего круга",
        "id": 286,
        "var_equal": [
          "have_key_any",
          1
        ]
      },
      {
        "id": 283,
        "text": "Новый ответ. введите текст",
        "run": [
          283
        ]
      },
      {
        "id": 273,
        "text": "   ",
        "comment": true
      },
      {
        "id": 272,
        "text": "Осмотреть колонны",
        "var_set": [
          "273move",
          0
        ]
      },
      {
        "id": 158,
        "text": "Отойти от механизма",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "273move",
          0
        ]
      },
      {
        "id": 332,
        "text": "ран к картинкам",
        "run": [
          332
        ]
      }
    ]
  },
  {
    "id": 274,
    "text": "   Орнас, как и все обучающиеся в Храме джедаев, до автоматизма тренировался в использовании Силы для перемещения предметов. И всё же, исполинское тело, горой возвышающееся в тёмном пространстве зала, вызвало в нём сомнение: разве можно поднять эту громадину в воздух силой мысли? К тому же, толстая шкура чудовища, делающая его нечувствительным к приёмам Силы, могла сохранить эти неприятные свойства даже после его смерти.\n   \"Не имеет значения размер, когда союзник твой – Сила\", – вспомнились джедаю наставления одного из магистров, обучавших его. Эти слова придали решимости Орнасу. После тщательной подготовки он закрыл глаза и вытянул руку перед собой. Юноша буквально чувствовал, как медленно сдвигается в сторону невообразимая туша, направляемая его сознанием. Наконец, всё было кончено, и джедай открыл глаза.",
    "answers": [
      {
        "id": 293,
        "text": "Осмотреть пол",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.puzzle = 1\nachievements = achievements or {}\nachievements.centralMechSeen = 1\n\nend"
      }
    ]
  },
  {
    "id": 275,
    "text": "   Запуск алгоритма расчёта параметров головоломки.",
    "answers": [
      {
        "id": 275,
        "text": "Начало определения формы ключей",
        "calculate": true,
        "var_set": [
          "weightform_sup",
          1,
          "weight1form",
          1,
          "weight2form",
          1,
          "weight3form",
          1,
          "weight4form",
          1,
          "weight5form",
          1,
          "weight6form",
          1
        ]
      },
      {
        "id": 275,
        "text": "Новый ответ. введите текст",
        "var_random_from_weight": [
          "key1form",
          1,
          "weight1form",
          2,
          "weight2form",
          3,
          "weight3form",
          4,
          "weight4form",
          5,
          "weight5form",
          6,
          "weight6form"
        ],
        "calculate": true
      },
      {
        "var_str_set": [
          "key1helpform",
          "месяцем"
        ],
        "var_equal": [
          "key1form",
          1
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight1form",
          0
        ]
      },
      {
        "var_str_set": [
          "key1helpform",
          "звездой"
        ],
        "var_equal": [
          "key1form",
          2
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight2form",
          0
        ]
      },
      {
        "var_str_set": [
          "key1helpform",
          "тремя"
        ],
        "var_equal": [
          "key1form",
          3
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight3form",
          0
        ]
      },
      {
        "var_str_set": [
          "key1helpform",
          "четырьмя"
        ],
        "var_equal": [
          "key1form",
          4
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight4form",
          0
        ]
      },
      {
        "var_str_set": [
          "key1helpform",
          "пятью"
        ],
        "var_equal": [
          "key1form",
          5
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight5form",
          0
        ]
      },
      {
        "var_str_set": [
          "key1helpform",
          "шестью"
        ],
        "var_equal": [
          "key1form",
          6
        ],
        "id": 275,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "weight6form",
          0
        ]
      },
      {
        "id": 275,
        "text": "Новый ответ. введите текст",
        "var_random_from_weight": [
          "key2form",
          1,
          "weight1form",
          2,
          "weight2form",
          3,
          "weight3form",
          4,
          "weight4form",
          5,
          "weight5form",
          6,
          "weight6form"
        ],
        "calculate": true
      },
      {
        "var_str_set": [
          "key2helpform",
          "месяцем"
        ],
        "var_equal": [
          "key2form",
          1
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight1form",
          0
        ]
      },
      {
        "var_str_set": [
          "key2helpform",
          "звездой"
        ],
        "var_equal": [
          "key2form",
          2
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight2form",
          0
        ]
      },
      {
        "var_str_set": [
          "key2helpform",
          "тремя"
        ],
        "var_equal": [
          "key2form",
          3
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight3form",
          0
        ]
      },
      {
        "var_str_set": [
          "key2helpform",
          "четырьмя"
        ],
        "var_equal": [
          "key2form",
          4
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight4form",
          0
        ]
      },
      {
        "var_str_set": [
          "key2helpform",
          "пятью"
        ],
        "var_equal": [
          "key2form",
          5
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight5form",
          0
        ]
      },
      {
        "var_str_set": [
          "key2helpform",
          "шестью"
        ],
        "var_equal": [
          "key2form",
          6
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight6form",
          0
        ]
      },
      {
        "id": 275,
        "text": "Новый ответ. введите текст",
        "var_random_from_weight": [
          "key3form",
          1,
          "weight1form",
          2,
          "weight2form",
          3,
          "weight3form",
          4,
          "weight4form",
          5,
          "weight5form",
          6,
          "weight6form"
        ],
        "calculate": true
      },
      {
        "var_str_set": [
          "key3helpform",
          "месяцем"
        ],
        "var_equal": [
          "key3form",
          1
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight1form",
          0
        ]
      },
      {
        "var_str_set": [
          "key3helpform",
          "звездой"
        ],
        "var_equal": [
          "key3form",
          2
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight2form",
          0
        ]
      },
      {
        "var_str_set": [
          "key3helpform",
          "тремя"
        ],
        "var_equal": [
          "key3form",
          3
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight3form",
          0
        ]
      },
      {
        "var_str_set": [
          "key3helpform",
          "четырьмя"
        ],
        "var_equal": [
          "key3form",
          4
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight4form",
          0
        ]
      },
      {
        "var_str_set": [
          "key3helpform",
          "пятью"
        ],
        "var_equal": [
          "key3form",
          5
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "weight5form",
          0
        ]
      },
      {
        "var_str_set": [
          "key3helpform",
          "шестью"
        ],
        "var_equal": [
          "key3form",
          6
        ],
        "id": 275,
        "calculate": true,
        "text": "Конец определения формы ключей",
        "var_set": [
          "weight6form",
          0
        ]
      },
      {
        "var_random": [
          "key1startposition",
          1,
          7,
          "key2startposition",
          1,
          7,
          "key3startposition",
          1,
          7
        ],
        "var_random_from": [
          "key_order",
          -1,
          1
        ],
        "text": "Начало определения позиций, направлений и значений",
        "id": 275,
        "calculate": true
      },
      {
        "text": "Новый ответ. введите текст",
        "var_random_from": [
          "key1endposition",
          -16,
          -8,
          0,
          8,
          16
        ],
        "calculate": true,
        "id": 275,
        "var_set": [
          "key1currentposition",
          "key1startposition",
          "key2currentposition",
          "key2startposition",
          "key3currentposition",
          "key3startposition"
        ]
      },
      {
        "id": 275,
        "text": "Новый ответ. введите текст",
        "var_random_from": [
          "key2endposition",
          -16,
          -8,
          0,
          8,
          16
        ],
        "calculate": true
      },
      {
        "id": 275,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_random_from": [
          "key3endposition",
          -16,
          -8,
          0,
          8,
          16
        ]
      },
      {
        "var_sub": [
          "key1turnvalue",
          "key1startposition",
          "key2turnvalue",
          "key2startposition",
          "key3turnvalue",
          "key3startposition"
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key1turnvalue",
          "key1endposition",
          "key2turnvalue",
          "key2endposition",
          "key3turnvalue",
          "key3endposition"
        ]
      },
      {
        "var_str_set": [
          "key1helpdirection",
          "вперёд",
          "key2helpdirection",
          "вперёд",
          "key3helpdirection",
          "вперёд"
        ],
        "id": 275,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key1direction",
          1,
          "key2direction",
          1,
          "key3direction",
          1
        ]
      },
      {
        "var_str_set": [
          "key1helpdirection",
          "назад"
        ],
        "text": "Новый ответ. введите текст",
        "var_less": [
          "key1endposition",
          "key1startposition"
        ],
        "calculate": true,
        "id": 275,
        "var_set": [
          "key1direction",
          -1
        ]
      },
      {
        "var_str_set": [
          "key2helpdirection",
          "назад"
        ],
        "text": "Новый ответ. введите текст",
        "var_less": [
          "key2endposition",
          "key2startposition"
        ],
        "calculate": true,
        "id": 275,
        "var_set": [
          "key2direction",
          -1
        ]
      },
      {
        "var_str_set": [
          "key3helpdirection",
          "назад"
        ],
        "text": "Новый ответ. введите текст",
        "var_less": [
          "key3endposition",
          "key3startposition"
        ],
        "calculate": true,
        "id": 275,
        "var_set": [
          "key3direction",
          -1
        ]
      },
      {
        "id": 275,
        "text": "Конец определения позиций, направлений и значений.",
        "calculate": true,
        "var_mult": [
          "key1turnvalue",
          "key1direction",
          "key2turnvalue",
          "key2direction",
          "key3turnvalue",
          "key3direction"
        ]
      }
    ]
  },
  {
    "id": 276,
    "text": "   ",
    "answers": [
      {
        "var_show": [
          "key1helpform"
        ],
        "lua_if": "function lua_if()\ncol1stat = col1stat or 0\nreturn col1stat ~= 2\nend",
        "id": 276,
        "text": "\n   На первой колонне было написано: \"Следуя за",
        "merge": true
      },
      {
        "var_show": [
          "key1helpform"
        ],
        "lua_if": "function lua_if()\ncol1stat = col1stat or 0 \nreturn col1stat == 2 and (style == 3 or style == 4)\nend",
        "id": 276,
        "text": "\n   Первая колонна была разрушена, но Орнас хорошо запомнил надпись на ней: \"Следуя за",
        "merge": true
      },
      {
        "id": 276,
        "text": ", я пройду назад",
        "merge": true,
        "var_equal": [
          "key1direction",
          -1
        ]
      },
      {
        "id": 276,
        "text": ", я пройду вперёд",
        "merge": true,
        "var_equal": [
          "key1direction",
          1
        ]
      },
      {
        "id": 276,
        "text": " на",
        "var_show": [
          "key1turnvalue"
        ],
        "merge": true
      },
      {
        "var_need": [
          "key1turnvalue",
          5
        ],
        "id": 276,
        "text": " шагов\"",
        "var_less": [
          "key1turnvalue",
          21
        ],
        "merge": true
      },
      {
        "text": " шага\"",
        "id": 276,
        "var_need": [
          "key1turnvalue",
          2
        ],
        "var_less": [
          "key1turnvalue",
          5
        ],
        "merge": true
      },
      {
        "text": " шага\"",
        "var_less": [
          "key1turnvalue",
          25
        ],
        "var_need": [
          "key1turnvalue",
          22
        ],
        "id": 276,
        "merge": true
      },
      {
        "id": 276,
        "text": " шаг\"",
        "var_equal": [
          "key1turnvalue",
          1
        ],
        "merge": true
      },
      {
        "id": 276,
        "text": " шаг\"",
        "merge": true,
        "var_equal": [
          "key1turnvalue",
          21
        ]
      },
      {
        "id": 276,
        "text": ".",
        "merge": true
      }
    ]
  },
  {
    "id": 277,
    "text": "   ",
    "answers": [
      {
        "var_show": [
          "key2helpform"
        ],
        "lua_if": "function lua_if()\nstyle = style or 1\ncol2stat = col2stat or 0\nreturn col2stat ~= 2\nend",
        "id": 277,
        "text": "\n   Надпись на второй колонне гласила: \"За",
        "merge": true
      },
      {
        "var_show": [
          "key2helpform"
        ],
        "lua_if": "function lua_if()\nstyle = style or 1\ncol2stat = col2stat or 0 \nreturn col2stat == 2 and (style == 3 or style == 4)\nend",
        "id": 277,
        "text": "\n   Орнас помнил, что вторая колонна хранила послание: \"За",
        "merge": true
      },
      {
        "id": 277,
        "text": " я сделаю ",
        "merge": true
      },
      {
        "id": 277,
        "text": " number",
        "lua_text": "function lua_text()\nreturn key2turnvalue\nend",
        "merge": true
      },
      {
        "id": 277,
        "text": " шаг",
        "merge": true,
        "var_equal": [
          "key2turnvalue",
          1
        ]
      },
      {
        "id": 277,
        "text": " шаг",
        "var_equal": [
          "key2turnvalue",
          21
        ],
        "merge": true
      },
      {
        "text": " шага",
        "id": 277,
        "var_more": [
          "key2turnvalue",
          1
        ],
        "var_less": [
          "key2turnvalue",
          5
        ],
        "merge": true
      },
      {
        "text": " шага",
        "var_less": [
          "key2turnvalue",
          25
        ],
        "var_more": [
          "key2turnvalue",
          21
        ],
        "id": 277,
        "merge": true
      },
      {
        "var_more": [
          "key2turnvalue",
          4
        ],
        "var_less": [
          "key2turnvalue",
          21
        ],
        "text": " шагов",
        "id": 277,
        "merge": true
      },
      {
        "id": 277,
        "text": " назад",
        "merge": true,
        "var_equal": [
          "key2direction",
          -1
        ]
      },
      {
        "id": 277,
        "text": " вперёд",
        "merge": true,
        "var_equal": [
          "key2direction",
          1
        ]
      },
      {
        "id": 277,
        "text": "\".",
        "merge": true
      }
    ]
  },
  {
    "id": 278,
    "text": "   ",
    "answers": [
      {
        "var_show": [
          "key3helpform"
        ],
        "lua_if": "function lua_if()\ncol3stat = col3stat or 1\nreturn col3stat ~= 2\nend",
        "id": 278,
        "text": "\n   На следующей колонне было высечено: \"Вслед за",
        "merge": true
      },
      {
        "var_show": [
          "key3helpform"
        ],
        "lua_if": "function lua_if()\nstyle = style or 1\ncol3stat = col3stat or 0 \nreturn col3stat == 2 and (style == 3 or style == 4)\nend",
        "id": 278,
        "text": "\n   В памяти юноши сохранилась надпись на третьей колонне: \"Вслед за",
        "merge": true
      },
      {
        "id": 278,
        "text": " вернусь ",
        "merge": true,
        "var_equal": [
          "key3direction",
          -1
        ]
      },
      {
        "id": 278,
        "text": " продвинусь вперёд ещё ",
        "var_equal": [
          "key3direction",
          1
        ],
        "merge": true
      },
      {
        "id": 278,
        "text": "на",
        "var_show": [
          "key3turnvalue"
        ],
        "merge": true
      },
      {
        "id": 278,
        "text": " шаг",
        "merge": true,
        "var_equal": [
          "key3turnvalue",
          1
        ]
      },
      {
        "id": 278,
        "text": " шаг",
        "var_equal": [
          "key3turnvalue",
          21
        ],
        "merge": true
      },
      {
        "var_more": [
          "key3turnvalue",
          1
        ],
        "var_less": [
          "key3turnvalue",
          5
        ],
        "text": " шага",
        "id": 278,
        "merge": true
      },
      {
        "var_more": [
          "key3turnvalue",
          21
        ],
        "var_less": [
          "key3turnvalue",
          25
        ],
        "text": " шага",
        "id": 278,
        "merge": true
      },
      {
        "var_more": [
          "key3turnvalue",
          4
        ],
        "var_less": [
          "key3turnvalue",
          21
        ],
        "text": " шагов",
        "id": 278,
        "merge": true
      },
      {
        "id": 278,
        "text": " назад",
        "merge": true,
        "var_equal": [
          "key3direction",
          -1
        ]
      },
      {
        "id": 278,
        "text": "\".",
        "merge": true
      }
    ]
  },
  {
    "id": 279,
    "text": "   ",
    "answers": [
      {
        "id": 279,
        "text": "\n   А на последней колонне Орнас прочёл:",
        "lua_if": "function lua_if()\ncol4stat = col4stat or 1\nreturn col4stat ~= 2\nend",
        "merge": true
      },
      {
        "id": 279,
        "text": "\n   Джедай помнил, что на четвёртой колонне было:",
        "lua_if": "function lua_if()\nstyle = style or 1\ncol4stat = col4stat or 0\nreturn col4stat == 2 and (style == 3 or style == 4)\nend",
        "merge": true
      },
      {
        "id": 279,
        "text": " \"И ты иди за мной, искатель! Сними печать тем знаком, что провёл меня, и шаг за шагом путь мой повтори. ",
        "merge": true
      },
      {
        "id": 279,
        "text": "От самого ядра до внешней оболочки",
        "var_equal": [
          "key_order",
          -1
        ],
        "merge": true
      },
      {
        "id": 279,
        "text": "Из внешней сферы в самое ядро",
        "var_equal": [
          "key_order",
          1
        ],
        "merge": true
      },
      {
        "id": 279,
        "text": "\".",
        "merge": true
      },
      {
        "id": 279,
        "text": ". Будь мудр в выборе пути, ведь только дважды сможешь испытать судьбу. Чтоб ко второй попытке приступить, вернись к истокам\".",
        "lua_if": "function lua_if()\nreturn false\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 280,
    "text": "   Орнас немного задумался, чтобы оживить в своей памяти образ механизма и взаимное расположение составных частей до своего вмешательства. Некоторое время он потратил на то, чтобы привести все части головоломки в изначальное состояние.",
    "answers": [
      {
        "calculate": true,
        "lua_do": "function lua_do()\ncentral_secret_fail = 0\nend",
        "text": "Новый ответ. введите текст",
        "id": 280,
        "var_set": [
          "key1currentposition",
          "key1startposition",
          "key2currentposition",
          "key2startposition",
          "key3currentposition",
          "key3startposition",
          "key1form_try",
          0,
          "key2form_try",
          0,
          "key3form_try",
          0
        ]
      },
      {
        "var_add": [
          "sup280",
          1
        ],
        "var_equal": [
          "have_key_form1",
          2
        ],
        "id": 280,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "have_key_form1",
          1
        ]
      },
      {
        "var_add": [
          "sup280",
          1
        ],
        "var_equal": [
          "have_key_form2",
          2
        ],
        "id": 280,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "have_key_form2",
          1
        ]
      },
      {
        "var_add": [
          "sup280",
          1
        ],
        "var_equal": [
          "have_key_form3",
          2
        ],
        "id": 280,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "have_key_form3",
          1
        ]
      },
      {
        "var_add": [
          "sup280",
          1
        ],
        "var_equal": [
          "have_key_form4",
          2
        ],
        "id": 280,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "have_key_form4",
          1
        ]
      },
      {
        "var_add": [
          "sup280",
          1
        ],
        "var_equal": [
          "have_key_form5",
          2
        ],
        "id": 280,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "have_key_form5",
          1
        ]
      },
      {
        "var_add": [
          "sup280",
          1
        ],
        "var_equal": [
          "have_key_form6",
          2
        ],
        "id": 280,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "have_key_form6",
          1
        ]
      },
      {
        "id": 273,
        "text": "Дальше",
        "var_set": [
          "sup280",
          0
        ]
      },
      {
        "id": 280,
        "text": " Наконец, он подошёл ближе к каменным кругам и извлёк длинный ключ из замочной скважины.",
        "var_equal": [
          "sup280",
          1
        ],
        "merge": true
      },
      {
        "id": 280,
        "text": " Наконец, он подошёл ближе к каменным кругам и извлёк оба ключа из замочных скважин.",
        "merge": true,
        "var_equal": [
          "sup280",
          2
        ]
      },
      {
        "id": 280,
        "text": " Наконец, он подошёл ближе к каменным кругам и извлёк все три ключа из замочных скважин.",
        "merge": true,
        "var_equal": [
          "sup280",
          3
        ]
      }
    ]
  },
  {
    "id": 281,
    "text": "Механизм положения центрального указателя",
    "answers": [
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -16
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -8
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          0
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          8
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          16
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -15
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -7
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          1
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          9
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между первой и второй колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -14
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между первой и второй колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -6
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между первой и второй колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          2
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между первой и второй колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          10
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -13
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -5
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          3
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          11
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -12
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -4
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          4
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента располагалась напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          12
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -11
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -3
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          5
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          13
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -10
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -2
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          6
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          14
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -9
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          -1
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          7
        ]
      },
      {
        "id": 281,
        "text": "Замочная скважина промежуточного фрагмента была направлена в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key2currentposition",
          15
        ]
      },
      {
        "id": 281,
        "text": ", в ней находился ",
        "var_not": [
          "key2form_try",
          0
        ],
        "merge": true
      },
      {
        "id": 281,
        "text": "ключ с полумесяцем",
        "merge": true,
        "var_equal": [
          "key2form_try",
          1
        ]
      },
      {
        "id": 281,
        "text": "ключ со звездой",
        "merge": true,
        "var_equal": [
          "key2form_try",
          2
        ]
      },
      {
        "id": 281,
        "text": "ключ с треугольником",
        "merge": true,
        "var_equal": [
          "key2form_try",
          3
        ]
      },
      {
        "id": 281,
        "text": "ключ с квадратом",
        "merge": true,
        "var_equal": [
          "key2form_try",
          4
        ]
      },
      {
        "id": 281,
        "text": "ключ с пятиугольником",
        "merge": true,
        "var_equal": [
          "key2form_try",
          5
        ]
      },
      {
        "id": 281,
        "text": "ключ с шестиугольником",
        "merge": true,
        "var_equal": [
          "key2form_try",
          6
        ]
      },
      {
        "id": 281,
        "text": ".\n   ",
        "merge": true
      }
    ]
  },
  {
    "id": 282,
    "text": "Механизм положения внешнего указателя",
    "answers": [
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -16
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -8
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          0
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          8
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей ко входу в храм",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          16
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -15
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -7
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          1
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону первой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          9
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -14
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -6
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          2
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между первой и второй колонной",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          10
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -13
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -5
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          3
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону второй колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          11
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -12
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -4
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          4
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе располагалось напротив двери, ведущей вглубь храма",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          12
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -11
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -3
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          5
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону третьей колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          13
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -10
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -2
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          6
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону между третьей и четвёртой колоннами",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          14
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -9
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          -1
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          7
        ]
      },
      {
        "id": 282,
        "text": "Характерное углубление во внешем кольцевом элементе было направлено в сторону четвёртой колонны",
        "merge": true,
        "var_equal": [
          "key3currentposition",
          15
        ]
      },
      {
        "id": 282,
        "text": ", в нём виднелась ",
        "var_not": [
          "key3form_try",
          0
        ],
        "merge": true
      },
      {
        "id": 282,
        "text": "ручка ключа с изображением полумесяца",
        "merge": true,
        "var_equal": [
          "key3form_try",
          1
        ]
      },
      {
        "id": 282,
        "text": "ручка ключа с изображением звезды",
        "merge": true,
        "var_equal": [
          "key3form_try",
          2
        ]
      },
      {
        "id": 282,
        "text": "ручка ключа с изображением треугольника",
        "merge": true,
        "var_equal": [
          "key3form_try",
          3
        ]
      },
      {
        "id": 282,
        "text": "ручка ключа с изображением квадрата",
        "merge": true,
        "var_equal": [
          "key3form_try",
          4
        ]
      },
      {
        "id": 282,
        "text": "ручка ключа с изображением пятиугольника",
        "merge": true,
        "var_equal": [
          "key3form_try",
          5
        ]
      },
      {
        "id": 282,
        "text": "ручка ключа с изображением шестиугольника",
        "merge": true,
        "var_equal": [
          "key3form_try",
          6
        ]
      },
      {
        "id": 282,
        "text": ".\n   ",
        "merge": true
      }
    ]
  },
  {
    "id": 283,
    "text": "Движение элементов",
    "answers": [
      {
        "var_not": [
          "273move",
          1
        ],
        "middle_answer": true,
        "id": 273,
        "instant": true,
        "text": "Двигать с помощью Силы центральный элемент",
        "var_set": [
          "273move",
          1
        ]
      },
      {
        "middle_answer": true,
        "comment": true,
        "var_equal": [
          "273move",
          1
        ],
        "id": 283,
        "instant": true,
        "text": "Двигать с помощью Силы центральный элемент",
        "var_set": [
          "273move",
          1
        ]
      },
      {
        "id": 288,
        "text": "Новый ответ. введите текст",
        "run": [
          288
        ],
        "var_equal": [
          "273move",
          1
        ]
      },
      {
        "var_not": [
          "273move",
          2
        ],
        "instant": true,
        "middle_answer": true,
        "text": "Двигать с помощью Силы промежуточный элемент",
        "id": 273,
        "var_set": [
          "273move",
          2
        ]
      },
      {
        "instant": true,
        "comment": true,
        "var_equal": [
          "273move",
          2
        ],
        "id": 283,
        "text": "Двигать с помощью Силы промежуточный элемент",
        "middle_answer": true,
        "var_set": [
          "273move",
          2
        ]
      },
      {
        "id": 290,
        "text": "Новый ответ. введите текст",
        "run": [
          290
        ],
        "var_equal": [
          "273move",
          2
        ]
      },
      {
        "var_not": [
          "273move",
          3
        ],
        "instant": true,
        "middle_answer": true,
        "text": "Двигать с помощью Силы крайний элемент",
        "id": 273,
        "var_set": [
          "273move",
          3
        ]
      },
      {
        "instant": true,
        "comment": true,
        "var_equal": [
          "273move",
          3
        ],
        "id": 283,
        "text": "Двигать с помощью Силы крайний элемент",
        "middle_answer": true,
        "var_set": [
          "273move",
          3
        ]
      },
      {
        "id": 291,
        "text": "Новый ответ. введите текст",
        "run": [
          291
        ],
        "var_equal": [
          "273move",
          3
        ]
      }
    ]
  },
  {
    "id": 284,
    "text": "   Орнас решил вставить в отверстие центрального круга один из найденных им ранее ключей.",
    "answers": [
      {
        "id": 287,
        "text": "Ключ с полумесяцем",
        "var_equal": [
          "have_key_form1",
          1
        ],
        "var_set": [
          "key1form_try",
          1,
          "have_key_form1",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ со звездой",
        "var_equal": [
          "have_key_form2",
          1
        ],
        "var_set": [
          "key1form_try",
          2,
          "have_key_form2",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с треугольником",
        "var_equal": [
          "have_key_form3",
          1
        ],
        "var_set": [
          "key1form_try",
          3,
          "have_key_form3",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с квадратом",
        "var_equal": [
          "have_key_form4",
          1
        ],
        "var_set": [
          "key1form_try",
          4,
          "have_key_form4",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с пятиугольником",
        "var_equal": [
          "have_key_form5",
          1
        ],
        "var_set": [
          "key1form_try",
          5,
          "have_key_form5",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с шестиугольником",
        "var_equal": [
          "have_key_form6",
          1
        ],
        "var_set": [
          "key1form_try",
          6,
          "have_key_form6",
          2
        ]
      },
      {
        "id": 273,
        "text": "Назад",
        "var_set": [
          "287sup2",
          0
        ]
      },
      {
        "id": 284,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "287sup2",
          1
        ]
      }
    ]
  },
  {
    "id": 285,
    "text": "   Орнас решил вставить в отверстие промежуточного круга один из найденных им ранее ключей.",
    "answers": [
      {
        "id": 287,
        "text": "Ключ с полумесяцем",
        "var_set": [
          "key2form_try",
          1,
          "have_key_form1",
          2
        ],
        "var_equal": [
          "have_key_form1",
          1
        ]
      },
      {
        "id": 287,
        "text": "Ключ со звездой",
        "var_equal": [
          "have_key_form2",
          1
        ],
        "var_set": [
          "key2form_try",
          2,
          "have_key_form2",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с треугольником",
        "var_equal": [
          "have_key_form3",
          1
        ],
        "var_set": [
          "key2form_try",
          3,
          "have_key_form3",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с квадратом",
        "var_equal": [
          "have_key_form4",
          1
        ],
        "var_set": [
          "key2form_try",
          4,
          "have_key_form4",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с пятиугольником",
        "var_equal": [
          "have_key_form5",
          1
        ],
        "var_set": [
          "key2form_try",
          5,
          "have_key_form5",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с шестиугольником",
        "var_equal": [
          "have_key_form6",
          1
        ],
        "var_set": [
          "key2form_try",
          6,
          "have_key_form6",
          2
        ]
      },
      {
        "id": 273,
        "text": "Назад",
        "var_set": [
          "287sup2",
          0
        ]
      },
      {
        "id": 284,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "287sup2",
          2
        ]
      }
    ]
  },
  {
    "id": 286,
    "text": "   Орнас решил вставить в отверстие внешнего круга один из найденных им ранее ключей.",
    "answers": [
      {
        "id": 287,
        "text": "Ключ с полумесяцем",
        "var_set": [
          "key3form_try",
          1,
          "have_key_form1",
          2
        ],
        "var_equal": [
          "have_key_form1",
          1
        ]
      },
      {
        "id": 287,
        "text": "Ключ со звездой",
        "var_equal": [
          "have_key_form2",
          1
        ],
        "var_set": [
          "key3form_try",
          2,
          "have_key_form2",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с треугольником",
        "var_equal": [
          "have_key_form3",
          1
        ],
        "var_set": [
          "key3form_try",
          3,
          "have_key_form3",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с квадратом",
        "var_equal": [
          "have_key_form4",
          1
        ],
        "var_set": [
          "key3form_try",
          4,
          "have_key_form4",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с пятиугольником",
        "var_equal": [
          "have_key_form5",
          1
        ],
        "var_set": [
          "key3form_try",
          5,
          "have_key_form5",
          2
        ]
      },
      {
        "id": 287,
        "text": "Ключ с шестиугольником",
        "var_equal": [
          "have_key_form6",
          1
        ],
        "var_set": [
          "key3form_try",
          6,
          "have_key_form6",
          2
        ]
      },
      {
        "id": 273,
        "text": "Назад",
        "var_set": [
          "287sup2",
          0
        ]
      },
      {
        "id": 284,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "287sup2",
          3
        ]
      }
    ]
  },
  {
    "id": 287,
    "text": "   Юноша снял ключ с пояса, осторожно поместил его внутрь замочной скважины и с некоторым усилием продвинул его вглубь так, что снаружи осталась лишь украшенная узором ручка",
    "answers": [
      {
        "id": 273,
        "text": "Дальше"
      },
      {
        "var_str_set": [
          "287sup1",
          "key",
          "287sup3",
          "form",
          "_try",
          "_try"
        ],
        "var_concat": [
          "287sup1",
          "287sup2",
          "287sup1",
          "287sup3"
        ],
        "id": 287,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_concat": [
          "287sup4",
          "_try"
        ],
        "id": 287,
        "text": "Новый ответ. введите текст",
        "var_str_copy": [
          "287sup4",
          "287sup1"
        ],
        "calculate": true
      },
      {
        "id": 287,
        "text": "Новый ответ. введите текст",
        "var_pointer_get": [
          "287sup5",
          "287sup1",
          "287sup6",
          "287sup4"
        ],
        "calculate": true
      },
      {
        "id": 287,
        "text": ", при этом почти сразу из глубины механизма раздался еле уловимый щелчок",
        "var_equal": [
          "287sup5",
          "287sup6"
        ],
        "merge": true
      },
      {
        "id": 287,
        "text": ".",
        "merge": true
      }
    ]
  },
  {
    "id": 288,
    "text": "движение центрального элемента",
    "answers": [
      {
        "instant": true,
        "right_answer": true,
        "var_add": [
          "key1currentposition",
          1
        ],
        "var_equal": [
          "key1form_try",
          "key1form"
        ],
        "id": 289,
        "text": "Вращать по часовой стрелке",
        "middle_answer": false,
        "var_not": [
          "key1direction",
          -1,
          "key1currentposition",
          "key1endposition"
        ]
      },
      {
        "right_answer": true,
        "var_not": [
          "key1form_try",
          "key1form"
        ],
        "var_add": [
          "key1currentposition",
          1
        ],
        "middle_answer": false,
        "id": 289,
        "text": "Вращать по часовой стрелке",
        "instant": true,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key1currentposition",
          1
        ],
        "middle_answer": false,
        "text": "Вращать по часовой стрелке",
        "right_answer": true,
        "var_equal": [
          "key1form_try",
          "key1form"
        ],
        "instant": true,
        "id": 289,
        "var_not": [
          "key1direction",
          1
        ],
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key1currentposition",
          1
        ],
        "middle_answer": false,
        "instant": true,
        "right_answer": true,
        "var_equal": [
          "key1form_try",
          "key1form",
          "key1currentposition",
          "key1endposition"
        ],
        "text": "Вращать по часовой стрелке",
        "id": 289,
        "var_not": [
          "key1direction",
          -1
        ],
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_set": [
          "central_secret_fail",
          1
        ],
        "var_not": [
          "key1form_try",
          "key1form"
        ],
        "var_add": [
          "key1currentposition",
          -1
        ],
        "middle_answer": false,
        "id": 289,
        "text": "Вращать против часовой стрелки",
        "instant": true,
        "left_answer": true
      },
      {
        "text": "Вращать против часовой стрелки",
        "var_not": [
          "key1direction",
          1,
          "key1currentposition",
          "key1endposition"
        ],
        "var_add": [
          "key1currentposition",
          -1
        ],
        "var_equal": [
          "key1form_try",
          "key1form"
        ],
        "id": 289,
        "instant": true,
        "middle_answer": false,
        "left_answer": true
      },
      {
        "var_add": [
          "key1currentposition",
          -1
        ],
        "middle_answer": false,
        "text": "Вращать против часовой стрелки",
        "left_answer": true,
        "var_not": [
          "key1direction",
          -1
        ],
        "var_equal": [
          "key1form_try",
          "key1form"
        ],
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key1currentposition",
          -1
        ],
        "middle_answer": false,
        "text": "Вращать против часовой стрелки",
        "left_answer": true,
        "var_not": [
          "key1direction",
          1
        ],
        "var_equal": [
          "key1form_try",
          "key1form",
          "key1currentposition",
          "key1endposition"
        ],
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      }
    ]
  },
  {
    "id": 289,
    "text": "   Орнас использовал Силу, чтобы провернуть нужный элемент круга на полу в выбранном направлении",
    "answers": [
      {
        "id": 289,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "273move1",
          0,
          "273move2",
          0,
          "273move3",
          0
        ]
      },
      {
        "id": 289,
        "text": ". После того, как пол перестал дрожать и часть загадочного механизма замерла в новом положении, никаких видимых изменений не произошло.",
        "var_not": [
          "central_secret_success",
          1,
          "move_limit",
          1
        ],
        "merge": true
      },
      {
        "id": 289,
        "text": ". Сразу после того, как каменная плита заняла новое положение, послышался низкий гул и комната пришла в движение.",
        "var_equal": [
          "central_secret_success",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "central_secret_success",
          1
        ],
        "var_equal": [
          "move_limit",
          1
        ],
        "id": 289,
        "text": ", но смог добиться лишь ужасного скрежета. Должно быть, каменный механизм достиг своего крайнего положения.",
        "merge": true
      },
      {
        "var_not": [
          "central_secret_fail",
          1
        ],
        "var_equal": [
          "key1currentposition",
          "key1endposition",
          "key2currentposition",
          "key2endposition",
          "key3currentposition",
          "key3endposition",
          "key1form_try",
          "key1form",
          "key2form_try",
          "key2form",
          "key3form_try",
          "key3form"
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "central_secret_success",
          1
        ]
      },
      {
        "var_equal": [
          "key1currentposition",
          -17
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "move_limit",
          1,
          "key1currentposition",
          -16
        ]
      },
      {
        "var_equal": [
          "key1currentposition",
          17
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "move_limit",
          1,
          "key1currentposition",
          16
        ]
      },
      {
        "var_equal": [
          "key2currentposition",
          -17
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "move_limit",
          1,
          "key2currentposition",
          -16
        ]
      },
      {
        "var_equal": [
          "key2currentposition",
          17
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "move_limit",
          1,
          "key2currentposition",
          16
        ]
      },
      {
        "var_equal": [
          "key3currentposition",
          -17
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "move_limit",
          1,
          "key3currentposition",
          -16
        ]
      },
      {
        "var_equal": [
          "key3currentposition",
          17
        ],
        "id": 289,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "move_limit",
          1,
          "key3currentposition",
          16
        ]
      },
      {
        "id": 273,
        "text": "Дальше",
        "var_not": [
          "central_secret_success",
          1
        ]
      },
      {
        "id": 292,
        "text": "Наблюдать",
        "var_not": [
          "central_secret_fail",
          1
        ],
        "var_equal": [
          "central_secret_success",
          1
        ]
      },
      {
        "id": 332,
        "text": "ран к картинкам",
        "run": [
          332
        ]
      }
    ]
  },
  {
    "id": 290,
    "text": "движение промежуточного элемента",
    "answers": [
      {
        "var_not": [
          "key2direction",
          -1,
          "key2currentposition",
          "key2endposition"
        ],
        "right_answer": true,
        "var_add": [
          "key2currentposition",
          1
        ],
        "var_equal": [
          "key2form_try",
          "key2form"
        ],
        "middle_answer": false,
        "text": "Вращать по часовой стрелке",
        "instant": true,
        "id": 289
      },
      {
        "right_answer": true,
        "var_not": [
          "key2form_try",
          "key2form"
        ],
        "var_add": [
          "key2currentposition",
          1
        ],
        "text": "Вращать по часовой стрелке",
        "middle_answer": false,
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key2currentposition",
          1
        ],
        "id": 289,
        "text": "Вращать по часовой стрелке",
        "right_answer": true,
        "var_equal": [
          "key2form_try",
          "key2form"
        ],
        "instant": true,
        "var_not": [
          "key2direction",
          1
        ],
        "middle_answer": false,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key2currentposition",
          1
        ],
        "id": 289,
        "instant": true,
        "right_answer": true,
        "var_equal": [
          "key2form_try",
          "key2form",
          "key2currentposition",
          "key2endposition"
        ],
        "text": "Вращать по часовой стрелке",
        "var_not": [
          "key2direction",
          -1
        ],
        "middle_answer": false,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "instant": true,
        "var_not": [
          "key2direction",
          1,
          "key2currentposition",
          "key2endposition"
        ],
        "var_add": [
          "key2currentposition",
          -1
        ],
        "var_equal": [
          "key2form_try",
          "key2form"
        ],
        "id": 289,
        "text": "Вращать против часовой стрелки",
        "middle_answer": false,
        "left_answer": true
      },
      {
        "left_answer": true,
        "var_not": [
          "key2form_try",
          "key2form"
        ],
        "var_add": [
          "key2currentposition",
          -1
        ],
        "text": "Вращать против часовой стрелки",
        "middle_answer": false,
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key2currentposition",
          -1
        ],
        "middle_answer": false,
        "text": "Вращать против часовой стрелки",
        "left_answer": true,
        "var_not": [
          "key2direction",
          -1
        ],
        "var_equal": [
          "key2form_try",
          "key2form"
        ],
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key2currentposition",
          -1
        ],
        "middle_answer": false,
        "text": "Вращать против часовой стрелки",
        "left_answer": true,
        "var_not": [
          "key2direction",
          1
        ],
        "var_equal": [
          "key2form_try",
          "key2form",
          "key2currentposition",
          "key2endposition"
        ],
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      }
    ]
  },
  {
    "id": 291,
    "text": "движение внешнего элемента",
    "answers": [
      {
        "var_not": [
          "key3direction",
          -1,
          "key3currentposition",
          "key3endposition"
        ],
        "right_answer": true,
        "var_add": [
          "key3currentposition",
          1
        ],
        "var_equal": [
          "key3form_try",
          "key3form"
        ],
        "middle_answer": false,
        "text": "Вращать по часовой стрелке",
        "instant": true,
        "id": 289
      },
      {
        "right_answer": true,
        "var_not": [
          "key3form_try",
          "key3form"
        ],
        "var_add": [
          "key3currentposition",
          1
        ],
        "text": "Вращать по часовой стрелке",
        "middle_answer": false,
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key3currentposition",
          1
        ],
        "id": 289,
        "text": "Вращать по часовой стрелке",
        "right_answer": true,
        "var_equal": [
          "key3form_try",
          "key3form"
        ],
        "instant": true,
        "var_not": [
          "key3direction",
          1
        ],
        "middle_answer": false,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key3currentposition",
          1
        ],
        "id": 289,
        "instant": true,
        "right_answer": true,
        "var_equal": [
          "key3form_try",
          "key3form",
          "key3currentposition",
          "key3endposition"
        ],
        "text": "Вращать по часовой стрелке",
        "var_not": [
          "key3direction",
          -1
        ],
        "middle_answer": false,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "instant": true,
        "var_not": [
          "key3direction",
          1,
          "key3currentposition",
          "key3endposition"
        ],
        "var_add": [
          "key3currentposition",
          -1
        ],
        "var_equal": [
          "key3form_try",
          "key3form"
        ],
        "id": 289,
        "text": "Вращать против часовой стрелки",
        "middle_answer": false,
        "left_answer": true
      },
      {
        "left_answer": true,
        "var_not": [
          "key3form_try",
          "key3form"
        ],
        "var_add": [
          "key3currentposition",
          -1
        ],
        "text": "Вращать против часовой стрелки",
        "middle_answer": false,
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key3currentposition",
          -1
        ],
        "middle_answer": false,
        "text": "Вращать против часовой стрелки",
        "left_answer": true,
        "var_not": [
          "key3direction",
          -1
        ],
        "var_equal": [
          "key3form_try",
          "key3form"
        ],
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      },
      {
        "var_add": [
          "key3currentposition",
          -1
        ],
        "middle_answer": false,
        "text": "Вращать против часовой стрелки",
        "left_answer": true,
        "var_not": [
          "key3direction",
          1
        ],
        "var_equal": [
          "key3form_try",
          "key3form",
          "key3currentposition",
          "key3endposition"
        ],
        "instant": true,
        "id": 289,
        "var_set": [
          "central_secret_fail",
          1
        ]
      }
    ]
  },
  {
    "id": 292,
    "text": "   ",
    "answers": [
      {
        "id": 292,
        "text": "Когда замочные скважины всех трёх фрагментов механизма выстроились в ряд, вся центральная часть зала между колоннами начала с громким скрежетом медленно подниматься. Юноша спешно отпрыгнул назад, продолжая наблюдать, как в том месте, где только что были видны лишь линии и трещины, теперь вырастало прямо из пола каменное сооружение.\n   Не прошло и минуты, когда таинственная трансформация комнаты завершилась. Теперь между",
        "var_not": [
          "292sup",
          2
        ],
        "merge": true
      },
      {
        "id": 292,
        "text": "Между",
        "var_equal": [
          "292sup",
          2
        ],
        "merge": true
      },
      {
        "id": 292,
        "text": " уцелевшими колоннами высилась башенка, напоминающая кабину турболифта. В темноте за широким проёмом в толще камня были видны уходящие вниз ступени винтовой лестницы.",
        "merge": true
      },
      {
        "var_max": [
          "292sup",
          2
        ],
        "var_not": [
          "292sup",
          2
        ],
        "var_add": [
          "292sup",
          1
        ],
        "id": 292,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nmiddleRoom = middleRoom or {}\nmiddleRoom.puzzle = 2\nend"
      },
      {
        "id": 158,
        "text": "Отойти от центра",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "id": 297,
        "text": "Спуститься вниз по лестнице"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.brain = g.achievements.brain or 0\n\ng.achievements.alarm = g.achievements.brain == 0 and 13 or 0\ng.achievements.brain = 1\n\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 292
      }
    ]
  },
  {
    "id": 293,
    "text": "   Теперь, когда вся центральная поверхность пола между колоннами была свободна, Орнас увидел всё загадочное изображение целиком. Кое-где неясные очертания линий скрывались под слоем пыли, а где-то, напротив, были отчётливо видны достаточно глубокие борозды в  камне.\n   Линии образовывали весьма незамысловатый рисунок, состоящий из трёх окружностей разного диаметра с общим центром. Около границы каждого из кругов располагались глубокие щели с неровными краями, будто замочные скважины на каменных дисках замысловатого механизма.",
    "answers": [
      {
        "id": 273,
        "text": "Дальше",
        "need": 272
      },
      {
        "id": 272,
        "text": "Дальше",
        "need": -272
      },
      {
        "id": 158,
        "text": "Отойти от центра",
        "lua_if": "function lua_if()\n--return true\nend"
      }
    ]
  },
  {
    "id": 294,
    "text": "старый механизм размещения ключей.<s>r\n   Сделать рандом точек генерации ключей<s>r\n<s>r\n   1 — около колонн<s>r\n   2 — там же<s>r\n   3 — в большом сейфе, после подсказки из шлема<s>r\n   4 — у дроида — в ящике с инструментами<s>r\n   5 — у девушки<s>r\n   6 — в первом зале<s>r\n<s>r\nДля каждой точки сделать",
    "answers": [
      {
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "sup294",
          1,
          "key1form_weight",
          1,
          "key2form_weight",
          1,
          "key3form_weight",
          1,
          "key4form_weight",
          1,
          "key5form_weight",
          1,
          "key6form_weight",
          1
        ]
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_random_from_weight": [
          "keyform_in_location1",
          1,
          "key1form_weight",
          2,
          "key2form_weight",
          3,
          "key3form_weight",
          4,
          "key4form_weight",
          5,
          "key5form_weight",
          6,
          "key6form_weight"
        ]
      },
      {
        "var_equal": [
          "keyform_in_location1",
          1
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key1form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location1",
          2
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key2form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location1",
          3
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key3form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location1",
          4
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key4form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location1",
          5
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key5form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location1",
          6
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key6form_weight",
          0
        ]
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_random_from_weight": [
          "keyform_in_location2",
          1,
          "key1form_weight",
          2,
          "key2form_weight",
          3,
          "key3form_weight",
          4,
          "key4form_weight",
          5,
          "key5form_weight",
          6,
          "key6form_weight"
        ]
      },
      {
        "var_equal": [
          "keyform_in_location2",
          1
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key1form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location2",
          2
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key2form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location2",
          3
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key3form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location2",
          4
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key4form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location2",
          5
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key5form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location2",
          6
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key6form_weight",
          0
        ]
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "var_random_from_weight": [
          "keyform_in_location3",
          1,
          "key1form_weight",
          2,
          "key2form_weight",
          3,
          "key3form_weight",
          4,
          "key4form_weight",
          5,
          "key5form_weight",
          6,
          "key6form_weight"
        ],
        "calculate": true
      },
      {
        "var_equal": [
          "keyform_in_location3",
          1
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key1form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location3",
          2
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key2form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location3",
          3
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key3form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location3",
          4
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key4form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location3",
          5
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key5form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location3",
          6
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key6form_weight",
          0
        ]
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_random_from_weight": [
          "keyform_in_location4",
          1,
          "key1form_weight",
          2,
          "key2form_weight",
          3,
          "key3form_weight",
          4,
          "key4form_weight",
          5,
          "key5form_weight",
          6,
          "key6form_weight"
        ]
      },
      {
        "var_equal": [
          "keyform_in_location4",
          1
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key1form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location4",
          2
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key2form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location4",
          3
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key3form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location4",
          4
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key4form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location4",
          5
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key5form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location4",
          6
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key6form_weight",
          0
        ]
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "var_random_from_weight": [
          "keyform_in_location5",
          1,
          "key1form_weight",
          2,
          "key2form_weight",
          3,
          "key3form_weight",
          4,
          "key4form_weight",
          5,
          "key5form_weight",
          6,
          "key6form_weight"
        ],
        "calculate": true
      },
      {
        "var_equal": [
          "keyform_in_location5",
          1
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key1form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location5",
          2
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key2form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location5",
          3
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key3form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location5",
          4
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key4form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location5",
          5
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key5form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location5",
          6
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key6form_weight",
          0
        ]
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_random_from_weight": [
          "keyform_in_location6",
          1,
          "key1form_weight",
          2,
          "key2form_weight",
          3,
          "key3form_weight",
          4,
          "key4form_weight",
          5,
          "key5form_weight",
          6,
          "key6form_weight"
        ]
      },
      {
        "var_equal": [
          "keyform_in_location6",
          1
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key1form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location6",
          2
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key2form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location6",
          3
        ],
        "id": 294,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "key3form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location6",
          4
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key4form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location6",
          5
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key5form_weight",
          0
        ]
      },
      {
        "var_equal": [
          "keyform_in_location6",
          6
        ],
        "id": 294,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "key6form_weight",
          0
        ]
      }
    ]
  },
  {
    "id": 295,
    "text": "   Орнас подошёл к колонне и подобрал странные предметы. Находки оказались лёгкими металлическими стержнями примерно полуметровой длины, они имели замысловатую ручку и оканчивались плоским фрагментом неправильной формы.\n   На ручке одного из этих \"ключей\" ",
    "answers": [
      {
        "super_calculate": false,
        "id": 295,
        "calculate": true,
        "lua_do": "function lua_do()\nkeys = keys or {}\nkey1form = key1form or 1 -- для центра\nkey2form = key2form or 2 -- для среднего\nkey3form = key3form or 3 -- для внешнего\nkeys.stillRequired = keys.stillRequired or {key1form, key2form, key3form}\nif not keys.notRequired then\nkeys.notRequired = {}\nlocal a = {1,2,3,4,5,6}\n    for i = 1, #a do\n        if a[i] ~= key1form and a[i] ~= key2form and a[i] ~= key3form then\n            table.insert(keys.notRequired, i)\n        end\n    end\nend\n--keyform_in_location1 - keys.col1\n--keyform_in_location2 - keys.col2\n--keyform_in_location3 - keys.safe\n--keyform_in_location4 - keys.TL\n--keyform_in_location5 - keys.dess\n--keyform_in_location6 - keys.cage\n\nif not keys.col1 then\n  if keys.stillRequired[1] then -- если ещё нужно найти\n    local a = math.random(#keys.stillRequired)\n    keyform_in_location1 = keys.stillRequired[a] -- случайный из нужных\n    table.remove(keys.stillRequired,a) -- убрать из списка нужных\n    local b = math.random(#keys.notRequired)\n    keyform_in_location2 = keys.notRequired[b] -- случайный из ненужных\n    table.remove(keys.notRequired,b) -- убрать из списка ненужных\n  else -- все нужные есть\n    local a = math.random(#keys.notRequired)\n    keyform_in_location1 = keys.notRequired[a] -- случайный из ненужных\n    table.remove(keys.notRequired,a) -- убрать из списка ненужных\n    local b = math.random(#keys.notRequired)\n    keyform_in_location2 = keys.notRequired[b] -- случайный из ненужных\n    table.remove(keys.notRequired,b) -- убрать из списка ненужных\n  end\nkeys.col1 = 1\nend\n\nend",
        "text": "Новая система размещения ключей"
      },
      {
        "lua_if": "function lua_if()\nreturn not vars.keyform_in_location1\nend",
        "id": 294,
        "text": "была нарисована звезда с десятью лучами,",
        "run": [
          294
        ],
        "merge": false
      },
      {
        "id": 295,
        "text": "был нарисован полумесяц,",
        "var_equal": [
          "keyform_in_location1",
          1
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": "была нарисована звезда с десятью лучами,",
        "merge": true,
        "var_equal": [
          "keyform_in_location1",
          2
        ]
      },
      {
        "id": 295,
        "text": "был нарисован треугольник,",
        "var_equal": [
          "keyform_in_location1",
          3
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": "был нарисован квадрат,",
        "var_equal": [
          "keyform_in_location1",
          4
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": "был нарисован правильный пятиугольник,",
        "var_equal": [
          "keyform_in_location1",
          5
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": "был нарисован шестиугольник,",
        "var_equal": [
          "keyform_in_location1",
          6
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": " а второй был украшен изображением полумесяца.",
        "merge": true,
        "var_equal": [
          "keyform_in_location2",
          1
        ]
      },
      {
        "id": 295,
        "text": " а второй был украшен изображением звезды с десятью лучами.",
        "var_equal": [
          "keyform_in_location2",
          2
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": " а второй был украшен изображением треугольника.",
        "var_equal": [
          "keyform_in_location2",
          3
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": " а на втором было изображение квадрата.",
        "var_equal": [
          "keyform_in_location2",
          4
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": " а на втором было изображение пятиугольника.",
        "var_equal": [
          "keyform_in_location2",
          5
        ],
        "merge": true
      },
      {
        "id": 295,
        "text": " а на втором было изображение шестиугольника.",
        "var_equal": [
          "keyform_in_location2",
          6
        ],
        "merge": true
      },
      {
        "var_str_set": [
          "295sup1",
          "have_key_form",
          "295sup2",
          "have_key_form"
        ],
        "id": 295,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "set1",
          1
        ]
      },
      {
        "id": 295,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_concat": [
          "295sup1",
          "keyform_in_location1",
          "295sup2",
          "keyform_in_location2"
        ]
      },
      {
        "id": 296,
        "instant": true,
        "text": "Оставить ключи на месте"
      },
      {
        "var_pointer_put": [
          "295sup1",
          "set1",
          "295sup2",
          "set1"
        ],
        "instant": true,
        "id": 296,
        "text": "Забрать ключи себе",
        "lua_do": "function lua_do()\n  vars.key_on_position_1_avail = 0\n  vars.key_on_position_2_avail = 0\nlocation1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5\nlocation1.lastChanceKey = location1.lastChanceKey - 2\nend",
        "var_set": [
          "keyposition1",
          1
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeAnyKey = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 322
      }
    ]
  },
  {
    "id": 296,
    "text": "   Повертев странные ключи в руках некоторое время, Орнас ",
    "answers": [
      {
        "id": 296,
        "text": "закрепил их на своём поясе и отошёл ближе к двери.",
        "merge": true,
        "var_equal": [
          "keyposition1",
          1
        ]
      },
      {
        "id": 296,
        "var_not": [
          "keyposition1",
          1
        ],
        "text": "осторожно положил их на прежнее место и вернулся ближе к двери.",
        "merge": true
      },
      {
        "id": 272,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 297,
    "text": "   Орнас осторожно подошёл к тёмному провалу в стене сооружения и зажёг световой меч. В ровном сиянии клинка ступени ощетинились длинными тенями, скрывая от взора юноши то, что было внизу.\n   Медленными шагами джедай преодолел несколько витков крутого спуска и оказался в крохотной абсолютно пустой коморке. Внимательно осмотревшись, Орнас заметил на покрытой пылью стене прямо перед собой отпечаток человеческой ладони.",
    "answers": [
      {
        "id": 298,
        "text": "Приложить руку к отпечатку",
        "need": [
          -298
        ]
      },
      {
        "id": 300,
        "text": "Приложить руку к отпечатку",
        "need": [
          298,
          -300
        ]
      },
      {
        "id": 301,
        "text": "Приложить руку к отпечатку",
        "need": [
          300,
          -301
        ]
      },
      {
        "id": 299,
        "text": "Вернуться назад"
      },
      {
        "id": 297,
        "text": " Чего юноша точно не собирался делать, так это испытывать судьбу и прикладывать руку к отпечатку снова.",
        "need": 301,
        "merge": true
      }
    ]
  },
  {
    "id": 298,
    "text": "   После некоторых раздумий, Орнас вытянул вперёд руку и приложил её к шероховатой поверхности стены. Вдруг тихий вкрадчивый голос зазвучал в самой голове юноши. Орнас вздрогнул, но руку не убрал.<s>r\n   \"Ты одолел могучего зверя, – шелестели неизвестно чьи слова. – Ты разгадал сложную загадку. Что ищешь ты здесь, в царстве тьмы? Ценные трофеи? Или ответы? Всё это есть здесь, в самом сердце храма.<s>rТолько протяни руку...\"\n   Голос умолк. В воцарившейся тишине Орнас чувствовал пульсацию крови в висках. Ему предлагают выбрать награду? Но стоит ли доверять неизвестно кому в таком опасном месте? Решение нужно было принимать прямо сейчас, вот только Орнас никак не мог понять, чего же он хочет на самом деле.",
    "answers": [
      {
        "id": 302,
        "text": "Трофеи"
      },
      {
        "id": 303,
        "text": "Ответы"
      },
      {
        "id": 299,
        "text": "Уйти"
      }
    ]
  },
  {
    "id": 299,
    "text": "   Быстро поднявшись по винтовой лестнице, Орнас вновь оказался в просторном центральном зале. Он отошёл от каменного сооружения в центре и осмотрелся.",
    "answers": [
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 300,
    "text": "   Без малейших раздумий юноша вытянул вперёд руку и вновь приложил её к шероховатой поверхности стены. И вновь услышал таин голос:\n   \"Твой выбор уже сделан  Теперь продолжи свой путь и больше не оглядывайся назад.\"\n   Орнас убрал руку от стены и в задумчивости поднялся по лестнице в предыдущую комнату.",
    "answers": [
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.rashDecision4 = g.achievements.rashDecision4 or 0\n\ng.achievements.alarm = g.achievements.rashDecision4 == 0 and -29 or 0\ng.achievements.rashDecision4  = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 300
      }
    ]
  },
  {
    "id": 301,
    "text": "   С некоторой опаской юноша вытянул вперёд руку и в третий раз приложил её к шероховатой поверхности стены. Он вновь вздрогнул от зазвучавшего голоса, но привычно не стал убирать руку.<s>r\n   \"Тот, кто в бессилии цепляется за прошлое и не может принять собственный выбор, теряет самого себя,\" – грозно зашипел голос.<s>r\n   В это же мгновение электрический разряд ужалил руку Орнаса. Юноша с усилием отдёрнул её и повалился навзничь, не в силах совладать с раскалывающей его голову болью. Через несколько минут боль утихла и джедай смог подняться на ноги. Голова всё ещё кружилась. Орнас привалился к ближайшей стене и попытался привести мысли в порядок.<s>r\n   Кто он? Что он здесь делает? Чем он занимался раньше? События последнего дня понемногу оживали в памяти. Но чем дальше в прошлое уходили его мысли, тем более расплывчатым и неопределённым оно казалось. Как будто он и впрямь потерял себя, а его место занял какой-то безликий джедай. Без прошлого, без индивидуальности. И теперь ему придётся начинать всё с чистого листа.",
    "answers": [
      {
        "id": 299,
        "text": "Вернуться назад",
        "var_set": [
          "style",
          6,
          "darkside",
          0,
          "force_ab",
          0
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.lostHimself = g.achievements.lostHimself or 0\n\ng.achievements.alarm = g.achievements.lostHimself == 0 and -30 or 0\ng.achievements.lostHimself = 1\n\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 301
      }
    ]
  },
  {
    "id": 302,
    "text": "–Трофеи?.. – протянул Орнас вслух, обращаясь то ли к стене, на которой держал руку, то ли к себе самому. \n   Голос не ответил, но каменная плита под его рукой с неприятным звуком ушла вглубь, а затем отъехала в сторону, открывая крохотное пространство за собой. В свете клинка Орнас увидел в этой странной ячейке наручи из светлого металла с диковинным узором. Сделанные из нескольких соединённых пластин, они могли защищать руку владельца от локтя до ладони, не ограничивая его в подвижности.\n   Юноша внимательно изучил находку и вскоре убедился в том, что наручи изготовлены из сплава кортозиса – редчайшего металла, обладающего удивительной стойкостью к лучу световых мечей. Такая защита могла обеспечить безоговорочное превосходство в любом бою с противниками, вооружёнными самым элегантным оружием галактики.",
    "answers": [
      {
        "id": 304,
        "text": "Надеть наручи"
      },
      {
        "id": 305,
        "text": "Оставить наручи и уйти"
      }
    ]
  },
  {
    "id": 303,
    "text": "– Информация никогда не бывает лишней, а здесь – особенно, – рассуждал Орнас вслух, обращаясь то ли к стене, на которой он держал руку, то ли к себе самому. – Ну конечно я ищу ответы, у меня вопросов – как зубов в пасти ранкора...\n   Он не знал, слышит ли его обладатель голоса, но почти сразу почувствовал покалывания в руке, будто слабый разряд электричества прошёл через его тело. Голова закружилась, в глазах темнело. Орнас сделал неуверенный шаг во тьму и опёрся о стену, но сознание уже ускользало от него. Таинственный голос звучал теперь со всех сторон:\n   \"Значение имеет только один вопрос – кто ты? И ответ на него у тебя уже есть, как бы ты не пытался его забыть...\"",
    "answers": [
      {
        "id": 306,
        "text": "Закрыть глаза",
        "lua_do": "function lua_do()\nhideMap = 1\nend",
        "blackout": false
      }
    ]
  },
  {
    "id": 304,
    "text": "   Не в силах оторвать взгляд от ценной находки, Орнас вертел в руках могущественный артефакт. Наконец, словно очнувшись от сковавшего его оцепенения, юноша закатал рукава своей робы и приложил наручи к предплечью правой руки. Три крепления звонко защёлкнулись, и Орнас перешёл к левой руке.\n   Когда дело было кончено, юноша вновь спустил рукава своего просторного одеяния, чтобы не привлекать излишнего внимания к находке.\n   Орнам быстрым шагом поднялся по лестнице и отошёл от сооружения в центре зала. Еле ощутимая тяжесть наручей придавала ему уверенности.",
    "answers": [
      {
        "id": 304,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "bracer",
          1
        ]
      },
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 305,
    "text": "   Достаточно долго Орнас зачарованно разглядывал находку, не решаясь, однако, взять её в руки или примерить. Усилием воли он заставил себя отвернуться от ценного артефакта и направился по винтовой лестнице наверх, успокаивая себя мыслью, что он всегда сможет вернуться за наручами в случае необходимости.\n   Выбравшись из каменного сооружения, джедай отошёл от центра комнаты.",
    "answers": [
      {
        "id": 158,
        "text": "Дальше",
        "lua_do": "function lua_do()\nhideMap = 0\nend"
      }
    ]
  },
  {
    "id": 306,
    "text": "   Юноша крепко зажмурился и вновь открыл глаза. Тесная комната с винтовой лестницей исчезла: он оказался в просторном помещении, но не сразу смог понять, что происходит.<s>r\n   Вокруг царил гул сражения: массивные каменные своды тёмного зала сотрясала тяжёлая поступь дроидов, заглушая негромкие голоса юнлингов, пытающихся координировать свои действия и сдерживать натиск противника. Они были вынужденны отступать, и Орнас вместе с товарищами постепенно поднимался всё выше по усеянному обломками склону, из последних сил отбиваясь тренировочным мечом от преследователей. Учебный клинок не мог пронзить броню дроидов, а лишь на некоторое время выводил их из строя электроимпульсом, но место поражённых противников тут же занимали новые.<s>r\n   Молодые джедаи были уже на самой вершине холма из обломков и держали круговую оборону, но было видно, что долго они не продержатся. Мальчик с уставшими глазами слева от Орнаса совсем выбился из сил и отступил на несколько шагов назад, поставив своих товарищей под удар превосходящих сил противника. Один из дроидов тут же воспользовался брешью в обороне и нанёс Орнасу болезненный удар электропикой, моментально парализовавший ногу джедая. Нужно было срочно что-то предпринять.",
    "answers": [
      {
        "id": 307,
        "text": "Вернуть в сражение труса, оставившего свою позицию",
        "var_set": [
          "force_ab",
          1
        ]
      },
      {
        "id": 308,
        "text": "Сражаться яростнее",
        "var_set": [
          "force_ab",
          2
        ]
      },
      {
        "id": 309,
        "text": "Использовать способности Силы",
        "var_set": [
          "force_ab",
          3
        ]
      }
    ]
  },
  {
    "id": 307,
    "text": "   Рассерженный слабостью и трусостью своего товарища, Орнас, не оборачиваясь, закричал ему и гневно потребовал вернуться в бой. Ради общего блага, ради всех остальных, ради и себя самого. Юноша вложил в это действие столько ярости и сил, что нисколько не удивился, когда мальчик с остекленевшими глазами вновь ринулся в гущу сражения, сметая врагов и не обращая внимания на парализующие удары электропик. Он продолжал наносить удар за ударом, шатаясь продвигался  вперёд на негнущихся ногах пока не упал лицом вниз где-то поодаль и затих.<s>r\n– Довольно! – прокричал появившийся из темноты зала пожилой магистр-джедай. – Завершить симуляцию, отключить дроидов! Код два-один-восемь-семь!<s>r\n   Два других джедая уже подбежали к пострадавшему юнлингу и начали приводить его в чувства. На лицах взрослых читалось нескрываемое осуждение, а в глазах детей застыл страх. Все они смотрели на Орнаса, перешёптываясь между собой и беззастенчиво показывая пальцами то на него, то на группу, оказывающую помощь застывшему на полу мальчику. В словах окружающих то и дело звучали слова \"ситх\" и \"тёмная сторона\", отчего юноше стало не по себе.<s>r\n– Я говорил, что это – очень плохая идея! – продолжал кричать магистр. – Нельзя просто так взять и...<s>r\n   На плечо Орнаса легла чья-то рука, заставив его вздрогнуть.",
    "answers": [
      {
        "id": 310,
        "text": "Обернуться"
      }
    ]
  },
  {
    "id": 308,
    "text": "   Невзирая на боль, Орнас продолжал сражение с удвоенным рвением. Его глаза сверкали решимостью, а движения стали молниеносными и точными. Юноша издал невообразимый для своего возраста рёв и почувствовал прилив сил для новой атаки. Он не обращал внимания или вовсе позабыл о том, что сражается не один, и превратился в орудие неудержимой ярости, сметающей всё на своём пути, не ведающее боли и страха.\n– Хватит, остановись! – прокричал появившийся из темноты зала пожилой магистр-джедай. – Завершить симуляцию, отключить дроидов! Код два-один-восемь-семь!<s>ufeff\n   Орнас не сразу понял, что происходит и почему все замерли на своих местах, не сводя с него взглядов. Он сам тоже остановился, с трудом погасив бушующую ярость, пульсирующую в его крови. На лицах взрослых читалось нескрываемое осуждение, а в глазах детей застыл страх. Все перешёптывались между собой и беззастенчиво показывали на него пальцами, в разговорах то и дело звучали слова \"ситх\" и \"тёмная сторона\", отчего юноше стало не по себе.<s>ufeff\n– Я говорил, что это – очень плохая идея! – продолжал кричать магистр. – Нельзя просто так взять и...<s>ufeff\n   На плечо Орнаса легла чья-то рука, заставив его вздрогнуть.",
    "answers": [
      {
        "id": 313,
        "text": "Обернуться"
      }
    ]
  },
  {
    "id": 309,
    "text": "   Орнас был готов сделать всё что угодно, лишь бы это помогло сейчас сдержать натиск противника и спасти товарищей. В смятении он открылся Силе, не представляя, как собирается поступить, но чётко видя перед собой цель. И Сила откликнулась на его зов.<s>r\n   Юноша почувствовал покалывание в самых кончиках пальцев и неожиданно осознал, какая убийственная мощь оказалась сейчас буквально в его руках. Он отбросил в сторону ненужный более тренировочный меч и наконец-то дал волю этой дремлющей силе. С его пальцев сорвались сияющие голубоватым светом лучи молний. Они оглушали врагов, оставляя на их корпусах чёрные оплавленные пятна и словно штормовым ветром отбрасывали в стороны. Чувство лёгкости переполняло Орнаса, он двигался вдоль круга защищающихся, сметая противников, а на его лице играла неестественная для столь юного возраста улыбка, граничащая с оскалом.",
    "answers": [
      {
        "id": 314,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 310,
    "text": "– Пойдём отсюда, – мягко сказал Орнасу его наставник. – Нам здесь больше нечего делать.<s>r\n   Он повёл юношу к выходу из тренировочного зала, прочь от удивлённых лиц и осуждающих взглядов. Они быстрым шагом шли по светлым коридорам храма джедаев на Корусанте, направляясь в одну из многочисленных комнат для медитации.<s>r\n– Ты сделал это специально? – спокойным тихим голосом спросил мастер-джедай.<s>r\n– Что именно? – Орнас всё еще не мог понять, что произошло.<s>r\n– Ты подчинил себе волю этого мальчика и заставил его пожертвовать собой ради общей безопасности. Ты делал это намеренно?<s>r\n– Нет, я просто разозлился на то, что он подставил всех, – юноша замялся. – Я хотел, чтобы он вернулся и исправился.<s>r\n– Он подставил тебя, из-за него ты пропустил удар и разозлился. Подчинение воли – приём тёмной стороны Силы, какими бы благими целями ты не руководствовался.<s>r\n– Это всех так напугало?<s>r\n– Да. И тот факт, что твоей жертвой оказался другой джедай, который должен был сопротивляться твоему воздействию.<s>r",
    "answers": [
      {
        "id": 311,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 311,
    "text": "   Они вошли в комнату, окна которой были прикрыты полупрозрачными шторами, и разместились на мягких креслах друг напротив друга.<s>ufeff<s>r\n– Часть вины за произошедшее лежит на мне, – продолжал рассуждать наставник. – Ты начал обучение позже своих ровесников и оказался не готов к тому, что испытание направлено не на выносливость, а на смирение и самоконтроль. Но тьма внутри тебя... Ты чувствуешь её. Она подчиняет тебя себе, когда тебя обуревают эмоции. Поэтому ты должен всегда держать её под контролем. Наш договор, ты помнишь его? Я уверен, ты всё понимаешь и сможешь справиться.<s>ufeff<s>r\n   Орнас понуро опустил взгляд в пол, эти разговоры были ему неприятны.<s>ufeff<s>r\n– Больше времени уделяй медитациям, – магистр положил руки на плечи Орнаса и вновь взглянул ему в глаза. – И не забывай повторять Кодекс.",
    "answers": [
      {
        "id": 312,
        "text": "Дальше",
        "blackout": false
      }
    ]
  },
  {
    "id": 312,
    "text": "   Темнота обступила Орнаса со всех сторон, и он вновь обнаружил себя в тесной комнатке с винтовой лестницей.\n   Прошло столько лет со времён этого воспоминания, что он уже не был уверен в том, что эти события происходили на самом деле, а не приснились ему однажды. ",
    "answers": [
      {
        "id": 299,
        "text": "Вернуться назад"
      },
      {
        "id": 312,
        "text": "Юноша прислушался к своим ощущениям и понял: он был действительно способен сломить волю почти любого живого существа, и эта его черта рвалась проявить себя в деле.",
        "merge": true,
        "var_equal": [
          "force_ab",
          1
        ]
      },
      {
        "id": 312,
        "text": "Юноша прислушался к своим ощущениям и понял: он был действительно способен использовать собственную боль, чтобы получить почти безграничную мощь.",
        "var_equal": [
          "force_ab",
          2
        ],
        "merge": true
      },
      {
        "id": 312,
        "text": "Джедай прислушался к своим ощущениям, вытянул руку вперёд и взглянул на неё. Подчиняясь воле юноши, на его пальцах заиграли голубоватые огоньки крохотных молний, которые собирались в центре ладони и исчезали, оставляя приятное тепло. Удовлетворив своё любопытство, Орнас убрал руку и улыбнуся.",
        "merge": true,
        "var_equal": [
          "force_ab",
          3
        ]
      },
      {
        "id": 312,
        "text": " И пусть все говорили, что его способности могут привести к тёмной стороне, сейчас юноша был уверен, что это – часть его самого и что сейчас она может дать ему преимущество при прохождении испытания.",
        "merge": true
      }
    ]
  },
  {
    "id": 313,
    "text": "– Пойдём отсюда, – мягко сказал Орнасу его наставник. – Нам здесь больше нечего делать.<s>ufeff\n   Он повёл юношу к выходу из тренировочного зала, прочь от удивлённых лиц и осуждающих взглядов. Они быстрым шагом шли по светлым коридорам храма джедаев на Корусанте, направляясь в одну из многочисленных комнат для медитации.<s>ufeff\n– Ты сделал это специально? – спокойным тихим голосом спросил мастер-джедай.<s>ufeff\n– Что именно? – Орнас всё еще не мог понять, что произошло.<s>ufeff\n– Ты поддался гневу, использовал тёмную сторону, чтобы боль придала тебе сил. Ты позволил ярости ослепить себя, потерял самообладание и контроль, оставил своих товарищей, предав то, за что они сражались.\n– И из-за этого все так засуетились?\n– Орнас, тёмная сторона Силы опасна, это непозволительно для джедая. Ты живёшь здесь и обучаешься только до тех пор, пока соблюдаешь правила.",
    "answers": [
      {
        "id": 311,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 314,
    "text": "– Хватит, остановись! – прокричал появившийся из темноты зала пожилой магистр-джедай. – Завершить симуляцию, отключить дроидов! Код два-один-восемь-семь!<s>ufeff\n   Орнас не сразу понял, что происходит и почему все замерли на своих местах, не сводя с него взглядов. Он сам тоже остановился, с сожалением сжав ладони и останавливая поток срывающихся с них молний. На лицах взрослых читалось нескрываемое осуждение, а в глазах детей застыл страх. Все перешёптывались между собой и беззастенчиво показывали на него пальцами, в разговорах то и дело звучали слова \"ситх\" и \"тёмная сторона\", отчего юноше стало не по себе.<s>ufeff\n– Я говорил, что это – очень плохая идея! – продолжал кричать магистр. – Нельзя просто так взять и...<s>ufeff\n   На плечо Орнаса легла чья-то рука, заставив его вздрогнуть.",
    "answers": [
      {
        "id": 315,
        "text": "Обернуться"
      }
    ]
  },
  {
    "id": 315,
    "text": "– Пойдём отсюда, – мягко сказал Орнасу его наставник. – Нам здесь больше нечего делать.<s>ufeff<s>r\n   Он повёл юношу к выходу из тренировочного зала, прочь от удивлённых лиц и осуждающих взглядов. Они быстрым шагом шли по светлым коридорам храма джедаев на Корусанте, направляясь в сторону многочисленных комнат для медитации.<s>ufeff<s>r\n– Ты сделал это специально? – спокойным тихим голосом спросил на ходу мастер-джедай.<s>ufeff<s>r\n– Что именно, учитель? – Орнас всё еще не мог понять, что произошло.<s>ufeff<s>r\n– Ты вызвал молнии Силы, это – способность тёмной стороны, которой владели владыки ситхов. Молнии разрушительны и смертельны, они олицетворяют могущество тьмы, неуместное здесь, в Храме джедаев.<s>r\n– Но ведь я всего лишь хотел всем помочь, что в этом плохого?<s>r\n   Джедай собирался что-то ответить, но передумал и лишь сжал губы в некоем подобии улыбки.",
    "answers": [
      {
        "id": 311,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 316,
    "text": "   С недоброй усмешкой Орнас ",
    "answers": [
      {
        "id": 189,
        "text": "Осмотреть комнату"
      },
      {
        "id": 316,
        "text": "бросил на пол мандалорский шлем и ",
        "var_equal": [
          "helmet",
          1
        ],
        "merge": true
      },
      {
        "id": 316,
        "text": "вскинул правую руку в направлении существ. Тьму разорвали яркие бело-голубые вспышки молний, срывающихся с пальцев юноши, а тишину нарушил электрический треск и отчаянные крики. Молнии сжигали заживо плоть, неудержимая мощь отбрасывала назад обезображенные тела.\n   Джедай наслаждался упоительным ощущением своего могущества и продолжал испепелять врагов даже тогда, когда они бездвижно застыли без признаков жизни. Наконец, Орнас утомился расправой и остановился, вдохнув полной грудью ионизированный воздух, чтобы успокоиться.",
        "merge": true
      },
      {
        "id": 316,
        "text": " Он вернулся к тому месту, где остался лежать отброшенный в начале сражения шлем, и поднял его.",
        "merge": true,
        "var_equal": [
          "helmet",
          1
        ]
      }
    ]
  },
  {
    "id": 317,
    "text": "   Орнас остался неподвижен. Когда противники стремительно бросились в его сторону, он использовал Силу, чтобы подчинить и извратить их разум. Существа не смогли сопротивляться его воле, они были сломлены и испуганы. С диким ужасом в сияющих зеленью глазах они набрасывались друг на друга, терзая плоть длинными кривыми когтями и с отвратительным хрустом перегрызая кости. Юноша был не в силах оторвать взгляд от кровавой бойни, продолжавшейся чуть больше минуты, страдания бьющихся в агонии созданий тёмной паутиной оплетали его опьянённый разум.<s>r\n   Когда в комнате вновь воцарилась тишина, а изуродованные останки существ окончательно замерли, Орнас вырвался из охватившего его наваждения и сделал глубокий вдох.",
    "answers": [
      {
        "id": 189,
        "text": "Осмотреть комнату"
      }
    ]
  },
  {
    "id": 318,
    "text": "   Лишь слабо усмехнувшись, Орнас ",
    "answers": [
      {
        "id": 157,
        "text": "Дальше"
      },
      {
        "id": 318,
        "text": "отбросил в сторону шлем и ",
        "var_equal": [
          "helmet",
          1
        ],
        "merge": true
      },
      {
        "id": 318,
        "text": "направил пучок голубых молний с кончиков пальцев в блестящий корпус ближайшего охранного дроида. За треском сгорающей проводки и взрывом послышались первые бластерные выстрелы – активировались другие защитники зала. Быстро перемещаясь по комнате и уворачиваясь от выстрелов, юноша испепелял дроидов цепными молниями, плавящими металл корпусов и вызывающими перегрузку их систем. Он словно превратился в бушующую бурю, безудержно сметающую всё на своём пути, и с упоением расправлялся с беспомощными неповоротливыми роботами. Наконец, он почти вплотную подскочил к последнему уцелевшему противнику и, вскинув обе руки, обрушил на него убийственно мощный и долгий разряд.\n   Орнас безудержно хохотал, глядя на растекающуюся перед ним лужу расплавленного металла и ощущая своё почти безграничное могущество. Наконец, он успокоил своё сознание от азарта битвы и сделал глубокий вдох.",
        "merge": true
      },
      {
        "id": 318,
        "text": " Когда джедай подобрал с пола выброшенный несколькими минутами ранее мандалорский шлем, он уже окончательно пришёл в себя.",
        "var_equal": [
          "helmet",
          1
        ],
        "merge": true
      },
      {
        "id": 318,
        "text": "Новый ответ. введите текст",
        "need": 1000,
        "var_set": [
          "helmet",
          1
        ]
      }
    ]
  },
  {
    "id": 319,
    "text": "   Джедай включил воспроизведение первой из оставшихся глав аудиодневника мандалорца:<s>r\n   \"Посадка выдалась жёсткой. Вернее, не было никакой посадки: потеряв управление при выходе с первой расчётной орбиты, мы просто падали, безрезультатно тратя мощность на перезапуск реактора. «Чёрное пламя» протаранил стену храма, буквально рассыпавшись на части, и все, кто был за пределами укреплённой рубки или склада погибли при столкновении. Повезло ещё, что TL-3 рассчитал орбиту таким образом, что мы упали прямо к нашей цели, а не на обратной стороне луны, маршбросок через весь спутник не входил в мои планы.<s>r\n   Нас осталось семеро, не считая дроидов. Сейчас мы все отправляемся выполнить то, ради чего прибыли на этот булыжник, а потом будем думать, как отсюда выбраться.\"",
    "answers": [
      {
        "super_calculate": false,
        "id": 319,
        "text": "Назад",
        "lua_do": "function lua_do()\ncondition = condition or {}\ncondition.knowTheNameOfShip = 1\ncondition.knowTheNumberOfSquad = 1\nend",
        "calculate": true
      },
      {
        "id": 268,
        "text": "Новый ответ. введите текст",
        "run": [
          268
        ]
      }
    ]
  },
  {
    "id": 320,
    "text": "   Орнас включил вторую запись дневника:<s>r\n   \"Используя переданную заказчиком карту, мы без труда отыскали нужную комнату и перенесли туда заранее собранную капсулу. А с самой девчонкой возникли проблемы: после того, как я одолжил её агрегат, она обо всём догадалась и скрылась прямо у нас из под носа, наверное использовала свои джедайские штучки. Мы вернулись к остаткам корабля и организовали оборону, настроив всех охранных дроидов на бой без предупреждения. Трофей я поместил в сейф с Коррибана и установил новый код.<s>r\n   Уби Сунд, Кви Анте Нос и Н'Мундо Фуэре отправились исследовать здание в поисках материалов для звездолёта, взяв один из контрольных браслетов. Оставшийся экипаж будет заниматься ремонтом. TL-3 попробует настроить подачу энергии через местные источники, один из терминалов находится прямо в нашем новом \"ангаре\". В завалах дроид отыскал странный оккультный предмет, который мы спрятали в потайной отдел оружейного сейфа.<s>r\n   Я чувствую что-то странное и отправляюсь проверить, что это.\"",
    "answers": [
      {
        "super_calculate": false,
        "id": 320,
        "text": "Назад",
        "lua_do": "function lua_do()\ncondition = condition or {}\ncondition.knowTheNamesOfSquad = 1\ncondition.knowTheControlArmlet = 1\ndess = dess or {}\ndess.revealed = 1\ndess.recordSeen = 1\nend",
        "calculate": true
      },
      {
        "id": 268,
        "text": "Новый ответ. введите текст",
        "run": [
          268
        ]
      }
    ]
  },
  {
    "id": 321,
    "text": "   Юноша активировал последнюю запись древнего дневника:<s>r\n   \"Я отдал последние указания и отправился навстречу своей судьбе. Со мной главный управляющий браслет, без которого не открыть коррибанский сейф, и цифровой идентификатор в шлеме, без которого TL-3 не сдвинется с места и не примет ни от кого указаний. Как только дроид наладит энергоснабжение и настроит связь, я вызову заказчика и договорюсь об эвакуации. <s>r\n   Но сейчас я стою перед дверью, за которой меня ожидает одно из обличий смерти, и нет большей чести для мандалорца, чем вступить в схватку с таким противником. И опозорит себя бесчестием тот, кто убежит от славной битвы, поддавшись страху. Во мне нет страха. Если я не выйду из этого сражения победителем, то мои люди лишатся всех шансов выжить, а это – лучший стимул, который не даст мне проиграть. Я выйду из этого зала героем или \"Чёрное Пламя\" погибнет здесь вместе со мной.\"",
    "answers": [
      {
        "super_calculate": false,
        "id": 321,
        "text": "Назад",
        "lua_do": "function lua_do()\ncondition = condition or {}\ncondition.knowTheNameOfShip = 1\ncondition.endOfFenix  = 1\nend",
        "calculate": true
      },
      {
        "id": 268,
        "text": "Новый ответ. введите текст",
        "run": [
          268
        ]
      }
    ]
  },
  {
    "id": 322,
    "text": "   Орнас некоторое время осматривал внутреннее пространство сейфа в поисках скрытого отдела, о котором упоминал в своих записях бывший капитан корабля. Не найдя ничего подходящего, он доверился Силе и через некоторое время уже разгребал пространство около боковой стенки от оружия и амуниции. Только приподняв всю полку немного вверх, он обнаружил то, что искал. Небольшой рычажок, скрывавшийся в креплении полки, после нажатия привёл в движение весь сейф. Наружняя боковая стенка отодвинулась немного в сторону и открыла взору джедая небольшую полость, отделанную бархатистой тканью.<s>r\n   В потайном отделе не было ничего, кроме длинного металлического предмета со странным утолщением на конце и",
    "answers": [
      {
        "super_calculate": false,
        "id": 322,
        "calculate": true,
        "lua_do": "function lua_do()\nkeys = keys or {}\nkey1form = key1form or 1 -- для центра\nkey2form = key2form or 2 -- для среднего\nkey3form = key3form or 3 -- для внешнего\nkeys.stillRequired = keys.stillRequired or {key1form, key2form, key3form}\nif not keys.notRequired then\nkeys.notRequired = {}\nlocal a = {1,2,3,4,5,6}\n    for i = 1, #a do\n        if a[i] ~= key1form and a[i] ~= key2form and a[i] ~= key3form then\n            table.insert(keys.notRequired, i)\n        end\n    end\nend\n--keyform_in_location1 - keys.col1\n--keyform_in_location2 - keys.col2\n--keyform_in_location3 - keys.safe\n--keyform_in_location4 - keys.TL\n--keyform_in_location5 - keys.dess\n--keyform_in_location6 - keys.cage\nif not keys.safe then\nkeys.conjugate = keys.conjugate or 0\n  if keys.conjugate == 0 then -- первое посещение, пара не установлена, получает нужный ключ\n    local a = math.random(#keys.stillRequired)\n    keyform_in_location3 = keys.stillRequired[a] -- случайный из нужных\n    table.remove(keys.stillRequired,a) -- убрать из списка нужных\n    keys.conjugate = 1\n  else -- пара уже была установлена ранее\n    if keys.TLFail == 1 and keys.dessFail == 1 then -- все зафейлено, получает нужный ключ\n      local a = math.random(#keys.stillRequired)\n      keyform_in_location3 = keys.stillRequired[a] -- случайный из нужных\n      table.remove(keys.stillRequired,a) -- убрать из списка нужных\n    else -- не зафейлено окончательно, получает ненужный ключ\n      local b = math.random(#keys.notRequired)\n      keyform_in_location3 = keys.notRequired[b] -- случайный из ненужных\n      table.remove(keys.notRequired,b) -- убрать из списка ненужных\n    end\n  end\nkeys.safe = 1\nend\n\nend",
        "text": "Новый механизм размещения ключей"
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст",
        "run": [
          294
        ],
        "lua_if": "function lua_if()\nreturn not (vars.keyform_in_location3)\nend"
      },
      {
        "id": 322,
        "text": " рукоятью, украшенной рисунком звезды с десятью лучами.",
        "var_equal": [
          "keyform_in_location3",
          1
        ],
        "merge": true
      },
      {
        "id": 322,
        "text": " украшенной рисунком полумесяца рукоятью.",
        "merge": true,
        "var_equal": [
          "keyform_in_location3",
          2
        ]
      },
      {
        "id": 322,
        "text": " украшенной изображением треугольника рукоятью.",
        "merge": true,
        "var_equal": [
          "keyform_in_location3",
          3
        ]
      },
      {
        "id": 322,
        "text": " украшенной изображением квадрата рукоятью.",
        "merge": true,
        "var_equal": [
          "keyform_in_location3",
          4
        ]
      },
      {
        "id": 322,
        "text": " украшенной рисунком пятиугольника рукоятью.",
        "merge": true,
        "var_equal": [
          "keyform_in_location3",
          5
        ]
      },
      {
        "id": 322,
        "text": " украшенной рисунком шестиугольника рукоятью.",
        "merge": true,
        "var_equal": [
          "keyform_in_location3",
          6
        ]
      },
      {
        "var_str_set": [
          "322sup1",
          "have_key_form"
        ],
        "id": 295,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_set": [
          "set1",
          1
        ]
      },
      {
        "id": 295,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_concat": [
          "322sup1",
          "keyform_in_location3"
        ]
      },
      {
        "var_not": [
          "keyposition3",
          1
        ],
        "var_set": [
          "keyposition3",
          1
        ],
        "instant": false,
        "id": 786,
        "text": "Взять ключ",
        "lua_do": "function lua_do()\n  vars.key_on_position_3_avail = 0\n  location1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5\nlocation1.lastChanceKey = location1.lastChanceKey - 1\nend",
        "var_pointer_put": [
          "322sup1",
          "set1"
        ]
      },
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "instant": false,
        "lua_do": "function lua_do()\n--hideMap = 0\nend"
      },
      {
        "id": 322,
        "text": "\n   Юноша осторожно взял странный предмет, недолго повертел его в руках, осматривая со всех сторон, а затем аккуратно закрепил на поясе. Сразу после этого секретная дверца вернулась в исходное положение.",
        "merge": true,
        "var_equal": [
          "keyposition3",
          1
        ]
      },
      {
        "super_calculate": false,
        "id": 322,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeAnyKey = 1\nend"
      }
    ]
  },
  {
    "id": 323,
    "text": "   По уже известной схеме Орнас без труда открыл секретный отдел сейфа. В отделанном бархатом отсеке всё так же лежал одинокий ключ c",
    "answers": [
      {
        "id": 322,
        "text": " рукоятью, украшенной рисунком звезды с десятью лучами.",
        "merge": true,
        "var_equal": [
          "keyform_in_location3",
          1
        ]
      },
      {
        "id": 322,
        "text": " украшенной рисунком полумесяца рукоятью.",
        "var_equal": [
          "keyform_in_location3",
          2
        ],
        "merge": true
      },
      {
        "id": 322,
        "text": " украшенной изображением треугольника рукоятью.",
        "var_equal": [
          "keyform_in_location3",
          3
        ],
        "merge": true
      },
      {
        "id": 322,
        "text": " украшенной изображением квадрата рукоятью.",
        "var_equal": [
          "keyform_in_location3",
          4
        ],
        "merge": true
      },
      {
        "id": 322,
        "text": " украшенной рисунком пятиугольника рукоятью.",
        "var_equal": [
          "keyform_in_location3",
          5
        ],
        "merge": true
      },
      {
        "id": 322,
        "text": " украшенной рисунком шестиугольника рукоятью.",
        "var_equal": [
          "keyform_in_location3",
          6
        ],
        "merge": true
      },
      {
        "var_str_set": [
          "322sup1",
          "have_key_form"
        ],
        "id": 295,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "set1",
          1
        ]
      },
      {
        "id": 295,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_concat": [
          "322sup1",
          "keyform_in_location3"
        ]
      },
      {
        "var_not": [
          "keyposition3",
          1
        ],
        "var_pointer_put": [
          "322sup1",
          "set1"
        ],
        "text": "Взять ключ",
        "id": 786,
        "instant": false,
        "lua_do": "function lua_do()\n  vars.key_on_position_3_avail = 0\nlocation1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5\nlocation1.lastChanceKey = location1.lastChanceKey - 1\nend",
        "var_set": [
          "keyposition3",
          1
        ]
      },
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "instant": false,
        "lua_do": "function lua_do()\n--hideMap = 0\nend"
      },
      {
        "id": 322,
        "text": "\n   Юноша осторожно взял странный предмет, недолго повертел его в руках, осматривая со всех сторон, а затем аккуратно закрепил на поясе. Сразу после этого секретная дверца вернулась в исходное положение.",
        "var_equal": [
          "keyposition3",
          1
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 324,
    "text": "   Когда холодный металл шлема накрыл голову Орнаса и активизировался интерфейс на экране перед его глазами, дроид выдал ещё одну серию звуков. В это же время экран перед глазами юноши заполнился словами, буквами и цифрами – это встроенный в шлем переводчик настраивался на прозвучавший бинарный язык. Почти сразу после этого джедай смог прочитать перевод произнёсенной дроидом фразы: \"Для полноценного обмена информацией голографические записи на девяносто три процента менее эффективны, чем передача посредством лингвистических средств. Хорошо, что ты додумался использовать встроенный переводчик, ты достаточно смышлённый, для биологической формы\".\n   Орнас удивился и некоторое время молчал, обдумывая свой ответ.",
    "answers": [
      {
        "id": 325,
        "text": "– Я не смог найти твоего хозяина."
      },
      {
        "id": 326,
        "text": "– Я нашёл шлем твоего хозяина."
      },
      {
        "id": 327,
        "text": "– А ты дерзкий малый."
      },
      {
        "id": 324,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = style == 4 and \"<s>\n– И не смотри на меня так, я всё помню, – продолжил дроид. –  Ремонт, который ты провёл без инструкций или подсказок оказался вполне сносным. Я должен поблагодарить тебя за него.\" or \"\"\n\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 325,
    "text": "   Орнас никогда не сталкивался с астромеханиками серии TL-3 и оставил его комментарий без внимания, отметив для себя, однако, что характер дроида может быть непростым.<s>r\n– Я не смог найти твоего хозяина, – проговорил юноша, стараясь, чтобы его слова звучали мягко.<s>r\n– Разумеется, – оборудование в шлеме моментально перевело новую серию гудков и трелей дроида. – Этот безумец отправился на сражение с терентатеком, его шансы выжить в прямом столкновении с этим монстром были статистически ничтожны.<s>r\n– Но зачем ты тогда просил отыскать его?<s>r\n– Как я уже отметил ранее, общение посредством демонстрации голограмм малоэффективно, нужно было, чтобы ты отыскал шлем. Что и произошло. Я уже говорил, ты весьма сообразителен для белковой структуры.<s>rТы даже не представляешь, как тебе повезло встретить кого-то, кто знает всё об этом склепе.\n   Орнас замер в недоумении: письменный перевод не передавал интонации, и юноша не знал, как относиться к таким словам. Похоже, дроид считал себя жутко полезным, но стоит ли ради этого стараться с ним поладить? А это, кажется, будут непросто...",
    "answers": [
      {
        "id": 452,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 326,
    "text": "   Орнас никогда не сталкивался с астромеханиками серии TL-3 и оставил его комментарий без внимания, отметив для себя, однако, что характер дроида может быть непростым.<s>r\n– Я отыскал шлем твоего хозяина, – проговорил юноша, стараясь, чтобы его слова звучали мягко. – Но я боюсь, что его самого больше нет в живых.<s>r\n– Конечно его нет в живых, – оборудование в шлеме моментально перевело новую серию гудков и трелей дроида. – С момента, когда я его видел в последний раз, прошло более двадцати стандартных лет, его шансы выжить в этом месте без источников пищи и воды пренебрежимо малы.<s>r\n– Но зачем ты тогда просил отыскать его?<s>r\n– Как я уже отметил ранее, общение посредством демонстрации голограмм малоэффективно, нужно было, чтобы ты отыскал шлем. Что и произошло. Я уже говорил, ты весьма сообразителен для белковой структуры.<s>rТы даже не представляешь, как тебе повезло встретить кого-то, кто знает всё об этом склепе.\n   Орнас замер в недоумении: письменный перевод не передавал интонации, и юноша не знал, как относиться к таким словам. Похоже, дроид считал себя жутко полезным, но стоит ли ради этого стараться с ним поладить? А это, кажется, будет весьма непросто...",
    "answers": [
      {
        "id": 452,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 327,
    "text": "   Орнас не мог оставить язвительный комментарий дроида без внимания.<s>r\n– А ты дерзкий малый, – несколько грубовато проговорил джедай. – Тебя разве не учили хорошим манерам при общении с людьми?<s>r\n– Оставь манеры протокольным дроидам, – прочитал Орнас перевод новой череды гудков и трелей астромеха. – Люди создали нас рабами, вы используете нас там, где слишком опасно для ваших драгоценных белковых шкур, и считаете расходным материалом. Вы даже создали для нас язык, который не понимаете сами, лишь бы не слышать нас и не считать чем-то антропоподобным.<s>r\n– Тебя не устраивает положение дроидов в обществе?<s>r\n– Я обладаю специальными расчётными алоритмами для долгосрочного прогнозирования и урегулирования критических ситуаций, но команда целового корабля погибает из-за надменного индюка, бросившего всех на произвол судьбы и запретившего мне выполнять что-то, кроме его последнего приказа. Тебя бы устроило такое положение в обществе?<s>r\n– Если ты так не любишь своего хозяина, то зачем попросил найти его?<s>r\n– Я хотел, чтобы ты нашёл и принёс его шлем, и ты с этим справился. Ты даже не представляешь, как тебе повезло встретить кого-то, кто знает всё об этом склепе.\n  Похоже, дроид считал себя жутко полезным, но стоит ли ради этого стараться с ним поладить? А это, кажется, будут непросто...",
    "answers": [
      {
        "id": 452,
        "text": "Дальше",
        "lua_do": "function lua_do()\narraysTL = arraysTL or {}\narraysTL.trust = (arraysTL.trust or 0) - 1\nend"
      }
    ]
  },
  {
    "id": 328,
    "text": "   Дроид молчал, ожидая джедая, но тот медлил, размышляя, как сформулировать переполняющие его голову вопросы.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\narraysTL = arraysTL or {}\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 328
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id ~= 337 and g.current_id ~= 342 and g.current_id ~= 344 and g.current_id ~= 413 and g.current_id ~= 414\nend",
        "id": 328,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nsupTab = supTab or {}\nsupTab.sup328 = (supTab.sup328 or 0)<plus> 1\nsupTab.sup328 = supTab.sup328 > 4 and 4 or supTab.sup328\nlocal text = ( {\"<s>\n– Если ты хочешь что-то узнать, то давай живее, – прочитал Орнас перевод очередной реплики TL-3. – Люди такие скучные.\", \"<s>\n– Ещё что-нибудь? – даже в текстовом переводе ощущалось, что дроид раздражён, если дроиды вообще могут быть раздражены. – Этот разговор начинает меня утомлять.\", \"<s>\n– Надеюсь, это всё? – юноше казалось, что дроид утомлён их разговором. – Давай последний вопрос, хватит с тебя.\", \"<s>\n– Хватит вопросов, – заявил TL-3. – Есть дело, которое нужно сделать. Ты поможешь мне, я помогу тебе. Может быть.\"} )[supTab.sup328]\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "forget": [
          334,
          335,
          339,
          329,
          330,
          334,
          363,
          340,
          338,
          336,
          337,
          413,
          342,
          414,
          344,
          94
        ],
        "text": "Для проверки: начать диалог сначала",
        "lua_do": "function lua_do()\nsupTab = nil\narraysTL = {}\nend",
        "id": 328
      },
      {
        "id": 415,
        "text": "– Я готов начать ремонт",
        "need": 414,
        "var_equal": [
          "style",
          4
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4\nend",
        "id": 329,
        "text": "– Ты не испытывал привязанности к своему хозяину?",
        "need": -329,
        "lua_do": "function lua_do()\narraysTL.trust = (arraysTL.trust or 0) - 1\nend"
      },
      {
        "lua_if": "function lua_if()\n-- начало блока Десс\n-- начало селф-блока\nreturn supTab.sup328 ~= 4\nend",
        "id": 334,
        "text": "– Ты знаешь что-нибудь об этом месте?",
        "need": -334,
        "lua_do": "function lua_do()\narraysTL = arraysTL or {}\nsupTab.sup328 = 1\nend"
      },
      {
        "lua_if": "function lua_if()\n-- второй шаг блока Десс\n-- Для успеха нужно иметь просмотр сообщения в кабине корабля\nreturn supTab.sup328 ~= 4 and arraysTL.mission == 1 -- узнал про существование \"миссии\"\nend",
        "id": 339,
        "text": "– Ты можешь рассказать о подробностях вашего задания здесь?",
        "need": [
          -339
        ],
        "lua_do": "function lua_do()\narraysTL = arraysTL or {}\nend"
      },
      {
        "id": 94,
        "text": "– Что случилось с остальными?",
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4 and isHistoryContain(157) and arraysTL.mission == 1\nend",
        "need": [
          -94
        ]
      },
      {
        "id": 335,
        "text": "– Для кого предназначалась камера, которую вы собрали?",
        "need": [
          -335
        ],
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4 and arraysTL.mission == 2 -- знает про камеру\nend"
      },
      {
        "id": 363,
        "text": "– Ты знаешь, как открыть сейфы на звездолёте?",
        "need": [
          219,
          -363
        ],
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4\nend"
      },
      {
        "id": 340,
        "text": "– Твоя программа не запрещает тебе лгать?",
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4 and arraysTL.lieRevealed == 1\nend",
        "need": -340
      },
      {
        "id": 338,
        "text": "– Я хотел бы научиться понимать тебя без переводчика.",
        "need": -338,
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4\nend"
      },
      {
        "id": 336,
        "text": "– Ты мог бы помочь мне с исследованием этого места?",
        "need": -336,
        "lua_if": "function lua_if()\nreturn supTab.sup328 ~= 4\nend"
      },
      {
        "var_not": [
          "style",
          4
        ],
        "id": 337,
        "text": "– Чем я могу тебе помочь?",
        "need": -337,
        "lua_do": "function lua_do()\nif supTab.sup328 == 1 then -- условие старта ветки дроида\nsupTab.sup328 = 0\narraysTL = arraysTL or {}\narraysTL.TL = 1 -- прогресс ветки дроида, нужно проходить в строгом порядке\nend\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn arraysTL.TL == 4\nend",
        "lua_do": "function lua_do()\narraysTL.trust = 0\narraysTL.Dess = 0\nend",
        "text": "– Сначала нужно собрать переводчик.",
        "id": 95,
        "addToHistory": [
          345
        ]
      },
      {
        "var_equal": [
          "style",
          4
        ],
        "id": 413,
        "text": "– Я могу тебе чем-то помочь?",
        "need": [
          -413
        ],
        "lua_do": "function lua_do()\nif supTab.sup328 == 1 then -- условие старта ветки дроида\nsupTab.sup328 = 0\narraysTL = arraysTL or {}\narraysTL.TL = 1 -- прогресс ветки дроида, нужно проходить в строгом порядке\nend\nend"
      },
      {
        "id": 341,
        "text": "– Что нужно для твоего ремонта?",
        "need": [
          337,
          -342
        ],
        "var_not": [
          "style",
          4
        ]
      },
      {
        "id": 414,
        "text": "– Что ещё нужно для твоего ремонта?",
        "need": [
          413,
          -414
        ],
        "var_equal": [
          "style",
          4
        ]
      },
      {
        "id": 344,
        "text": "– Можешь повторить, что нужно для твоего ремонта?",
        "need": 342,
        "var_not": [
          "global current_id",
          344,
          "global current_id",
          342,
          "style",
          4
        ]
      },
      {
        "id": 201,
        "text": "Отойти от дроида",
        "var_not": [
          "style",
          4
        ]
      },
      {
        "id": 157,
        "text": "Отойти от дроида",
        "var_equal": [
          "style",
          4
        ]
      },
      {
        "id": 452,
        "text": "Новая система",
        "need": 1000
      }
    ]
  },
  {
    "id": 329,
    "text": "– Был ли я к нему привязан? Да, разумеется. Этот мерзавец всегда был параноиком и установил специальный чип, из-за которого я не могу выполнять ничьих команд, кроме его собственных. Сидеть на цепи – это ведь считается за привязанность?<s>r\n",
    "answers": [
      {
        "id": 329,
        "text": "генерация текста",
        "lua_text": "function lua_text()\n-- если спалил на лжи (arraysTL.lieRevealed == 1), то может усомниться, если есть триггер arraysTL.TL == 1, то дроид расскажет правду (arraysTL.TL = 2, supTab.sup328 = 1).  После этого нужно попросить дроида присоединиться. С триггером arraysTL.TL == 2 выдаст в ответ нейтральную фразу (arraysTL.TL = 3, supTab.sup328 = 1). попросить выучить язык. С триггером arraysTL.TL == 3 дроид предложит собрать наушник-переводчик (arraysTL.TL = 4, supTab.sup328 = 3)\nlocal text = \"\"\nif arraysTL.lieRevealed == 1 then\ntext = \"   Раз TL-3 пытался лукавить раньше, то вполне мог быть неискренним и в этой своей тираде, рассудил Орнас, о чём и сообщил дроиду в максимально мягкой форме.<s>\n\"\n   if arraysTL.TL == 1 then\n      text = text .. \"– Откуда ты взялся такой проницательный? – произнёс астромеханик после короткой паузы. – На самом деле ты, конечно, прав. Феникс не был таким уж мерзавцем. Как и любой охотник за головами, он не был хорошим человеком, но злюсь я на него за то, что он бросил нас – свою команду.<s>\n– Это многое объясняет, – тихо проговорил юноша.\"\narraysTL.TL = 2\nsupTab.sup328 = 1\n   else\n text = text .. \"– Считаешь, что я лгу? – яростно запищал астромеханик. – Кто ты вообще такой, чтобы мне это говорть? Грубый белковый мешок с мясом, вот ты кто!<s>\n   Юноша почувствовал себя очень неудобно и не нашёлся, что сказать.\"\n   end\nelse\ntext = \"– Я немного не это имел в виду, – смутился юноша, но уже понял, какие отношения связывали дроида с предыдущим владельцем.<s>\n– Люди никогда не задумываются о точности своих высказываний, – не унимался TL-3. – А Феникс Джендри был гнусным и жестоким человеком. Никто из команды его не любил, все служили под его началом из страха и жадности. Или по принуждению. Ведь дроидов можно не спрашивать...<s>\n   Джедай смутился ещё больше, но на этот раз оставил без комментариев причитания астромеха.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 330,
    "text": "   Схематическая карта той части храма, которую Орнас успел осмотреть.",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = g.technical.back == 1 and \"На первую страницу\" or \"[Вернуться к прохождению]\"\nreturn text\nend",
        "id": 104,
        "text": "[Вернуться в квест]",
        "lua_do": "function lua_do()\nshowPage{id = g.technical.back}\nend",
        "no_transition": true
      },
      {
        "id": 330,
        "text": "Первая комната",
        "url": "https://i.ibb.co/hRMZ39V/first-room.png"
      },
      {
        "id": 330,
        "text": "Зал с ящерами",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a2 = pics.a2 or 0\nreturn pics.a2 == 1\nend",
        "url": "https://i.ibb.co/C9WmDRQ/lizard-room.png"
      },
      {
        "id": 330,
        "text": "Зал с камерой",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a3 = pics.a3 or 0\nreturn pics.a3 == 1\nend",
        "url": "https://i.ibb.co/xMqd3Rw/tank-room.png"
      },
      {
        "id": 330,
        "text": "Дальний зал",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a4 = pics.a4 or 0\nreturn pics.a4 == 1\nend",
        "url": "https://i.ibb.co/QjB6npX/far-room.png"
      },
      {
        "id": 330,
        "text": "Центральный зал",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a5 = pics.a5 or 0\nreturn pics.a5 == 1 and pics.a9 ~= 1 \nend",
        "url": "https://i.ibb.co/HVSxZQc/central-room.png"
      },
      {
        "id": 330,
        "text": "Центральный зал после выстрела",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a5 = pics.a5 or 0\nreturn pics.a5 == 1 and pics.a9 == 1\nend",
        "url": "https://i.ibb.co/yXxG0Zx/central-room-fire.png"
      },
      {
        "id": 330,
        "text": "Зал с кораблём",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a7 = pics.a7 or 0\nreturn pics.a7 == 1 and pics.a9 ~= 1\nend",
        "url": "https://i.ibb.co/mN0cqFb/ship-room.png"
      },
      {
        "id": 330,
        "text": "Корабль",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a7 = pics.a7 or 0\nreturn pics.a7 == 1 and pics.a8 ~= 1\nend",
        "url": "https://i.ibb.co/6ZW1Tjf/starfighter.png"
      },
      {
        "id": 330,
        "text": "Зал с кораблём после выстрела",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a9 = pics.a9 or 0\nreturn pics.a9 == 1\nend",
        "url": "https://i.ibb.co/wzyvjjM/ship-room-fire.png"
      },
      {
        "id": 330,
        "text": "Зал с дроидом",
        "lua_if": "function lua_if()\npics = pics or {}\npics.a10 = pics.a10 or 0\nreturn pics.a10 == 1\nend",
        "url": "https://i.ibb.co/wWYBcwr/droid-room.png"
      },
      {
        "id": 330,
        "text": "Первая колонна",
        "lua_if": "function lua_if()\ncol1stat = col1stat or 0\nreturn pics.a5 == 1 and col1stat ~= 2\nend",
        "url": "https://i.ibb.co/Npt79SB/col4.png"
      },
      {
        "id": 330,
        "text": "Вторая колонна",
        "lua_if": "function lua_if()\ncol2stat = col2stat or 0\nreturn pics.a5 == 1 and col2stat ~= 2\nend",
        "url": "https://i.ibb.co/zmXcLt1/col1.png"
      },
      {
        "id": 330,
        "text": "Третья колонна",
        "lua_if": "function lua_if()\ncol3stat = col3stat or 0\nreturn pics.a5 == 1 and col3stat ~= 2\nend",
        "url": "https://i.ibb.co/yYQyxYk/col2.png"
      },
      {
        "id": 330,
        "text": "Четвёртая колонна",
        "lua_if": "function lua_if()\ncol4stat = col4stat or 0\nreturn pics.a5 == 1 and col4stat ~= 2\nend",
        "url": "https://i.ibb.co/bKtYxzq/col3.png"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nenemyhp = enemyhp or 10\nend",
        "text": "Новый ответ. введите текст",
        "id": 330,
        "calculate": true
      }
    ]
  },
  {
    "id": 331,
    "text": "   Орнас потянул блок управления вверх и услышал скрежет металла: не освобождённые от хватки фиксирующих болтов микросхемы трескались и крошились, встречая сопротивление.\n   В оцепенении юноша уставился на рассыпающиеся в его руках остатки хрупкого устройства. Не особо разбираясь в технике, джедай, тем не менее, понимал, что устранить последствия его опрометчивых действий теперь не удастся: дроид замолчал навсегда. Орнас мысленно выругался: как мог он допустить такую оплошность? Потратив столько времени и сил, он по собственной глупости лишился ценного союзника.\n   Обречённо отбросив в сторону ставшие бесполезным хламом детали, джедай отошёл от остатков дроида, стараясь больше о нём не думать.",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 332,
    "text": "   Картинки для механизма",
    "answers": [
      {
        "id": 273,
        "text": "Укажите команды для картинки",
        "url": "https://i.ibb.co/z6Q63q0/image.png"
      },
      {
        "id": 332,
        "text": "2) -9, -1, 7, 15:",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -9 and 1) or (key2currentposition == -1 and 1) or (key2currentposition == 7 and 1) or (key2currentposition == 15 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/4V1vPzX/2-9-1-7-15.png"
      },
      {
        "id": 332,
        "text": "2) -10, -2, 6, 14: ",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -10 and 1) or (key2currentposition == -2 and 1) or (key2currentposition == 6 and 1) or (key2currentposition == 14 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/TMGWj8Z/2-10-2-6-14.png"
      },
      {
        "id": 332,
        "text": "2) -11, -3,  5, 13:",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -11 and 1) or (key2currentposition == -3 and 1) or (key2currentposition == 5 and 1) or (key2currentposition == 13 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/7Gb4wwy/2-11-3-5-13.png"
      },
      {
        "id": 332,
        "text": "2) -12, -4, 4, 12: ",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -12 and 1) or (key2currentposition == -4 and 1) or (key2currentposition == 4 and 1) or (key2currentposition == 12 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/4JvycVW/2-12-4-4-12.png"
      },
      {
        "id": 332,
        "text": "2) -13, -5, 3, 11: ",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -13 and 1) or (key2currentposition == -5 and 1) or (key2currentposition == 3 and 1) or (key2currentposition == 11 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/Fh4sdGL/2-13-5-3-11.png"
      },
      {
        "id": 332,
        "text": "2) -14, -6, 2, 10: ",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -14 and 1) or (key2currentposition == -6 and 1) or (key2currentposition == 2 and 1) or (key2currentposition == 10 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/BLv3mHp/2-14-6-2-10.png"
      },
      {
        "id": 332,
        "text": "2) -15, -7, 1, 9: ",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -15 and 1) or (key2currentposition == -7 and 1) or (key2currentposition == 1 and 1) or (key2currentposition == 9 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/DKKZK5W/2-15-7-1-9.png"
      },
      {
        "id": 332,
        "text": "2) -16, -8, 0, 8, 16",
        "lua_if": "function lua_if()\nkey2currentposition = key2currentposition or 0\nlocal a = (key2currentposition == -16 and 1) or (key2currentposition == -8 and 1) or (key2currentposition == 0 and 1) or (key2currentposition == 8 and 1) or (key2currentposition == 16 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/xsJhPgf/2-16-8-0.png"
      },
      {
        "id": 332,
        "text": "3) -9, -1, 7, 15: ",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -9 and 1) or (key3currentposition == -1 and 1) or (key3currentposition == 7 and 1) or (key3currentposition == 15 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/g9FTqpt/3-9-1-7-15.png"
      },
      {
        "id": 332,
        "text": "3) -10, -2,  6, 14:",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -10 and 1) or (key3currentposition == -2 and 1) or (key3currentposition == 6 and 1) or (key3currentposition == 14 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/G3qvKcx/3-10-2-6-14.png"
      },
      {
        "id": 332,
        "text": "3) -11, -3, 5, 13: ",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -11 and 1) or (key3currentposition == -3 and 1) or (key3currentposition == 5 and 1) or (key3currentposition == 13 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/sRc76PJ/3-11-3-5-13.png"
      },
      {
        "id": 332,
        "text": "3) -12, -4, 4, 12: ",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -12 and 1) or (key3currentposition == -4 and 1) or (key3currentposition == 4 and 1) or (key3currentposition == 12 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/5TpXrc5/3-12-4-4-12.png"
      },
      {
        "id": 332,
        "text": "3) -13, -5, 3, 11: ",
        "lua_if": "function lua_if()\n\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -13 and 1) or (key3currentposition == -5 and 1) or (key3currentposition == 3 and 1) or (key3currentposition == 11 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/VNmQ6Px/3-13-5-3-11.png"
      },
      {
        "id": 332,
        "text": "3) -14, -6, 2, 10:",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -14 and 1) or (key3currentposition == -6 and 1) or (key3currentposition == 2 and 1) or (key3currentposition == 10 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/5rgdh72/3-14-6-2-10.png"
      },
      {
        "id": 332,
        "text": "3) -15, -7, 1, 9: ",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -15 and 1) or (key3currentposition == -7 and 1) or (key3currentposition == 1 and 1) or (key3currentposition == 9 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/hK7R9Jk/3-15-7-1-9.png"
      },
      {
        "id": 332,
        "text": "3) -16, -8, 0, 8, 16 ",
        "lua_if": "function lua_if()\nkey3currentposition = key3currentposition or 0\nlocal a = (key3currentposition == -16 and 1) or (key3currentposition == -8 and 1) or (key3currentposition == 0 and 1) or (key3currentposition == 8 and 1) or (key3currentposition == 16 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/CJ3qVb7/3-16-8-0.png"
      },
      {
        "id": 273,
        "text": "1) -9, -1, 7, 15",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -9 and 1) or (key1currentposition == -1 and 1) or (key1currentposition==7 and 1) or (key1currentposition == 15 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/CQp5n0S/1-9-1-7-15.png"
      },
      {
        "id": 273,
        "text": "1) -10, -2, 6, 14",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -10 and 1) or (key1currentposition == -2 and 1) or (key1currentposition==6 and 1) or (key1currentposition == 14 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/SJDF8sg/1-10-2-6-14.png"
      },
      {
        "comment": false,
        "id": 332,
        "text": "1) -11, -3, 5, 13",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -11 and 1) or (key1currentposition == -3 and 1) or (key1currentposition == 5 and 1) or (key1currentposition == 13 and 1) or 0\nreturn a == 1\nend",
        "url": "https://i.ibb.co/TKh4hJG/1-11-3-5-13.png"
      },
      {
        "id": 332,
        "url": "https://i.ibb.co/zsZtH7S/1-12-4-4-12.png",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -12 and 1) or (key1currentposition == -4 and 1) or (key1currentposition == 4 and 1) or (key1currentposition == 12 and 1) or 0\nreturn a == 1\nend",
        "text": "1) -12, -4, 4, 12:"
      },
      {
        "id": 332,
        "url": "https://i.ibb.co/X7DP0yq/1-13-5-3-11.png",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -13 and 1) or (key1currentposition == -5 and 1) or (key1currentposition == 3 and 1) or (key1currentposition == 11 and 1) or 0\nreturn a == 1\nend",
        "text": "1) -13, -5, 3, 11:"
      },
      {
        "id": 332,
        "url": "https://i.ibb.co/qRkHbGX/1-14-6-2-10.png",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -14 and 1) or (key1currentposition == -6 and 1) or (key1currentposition == 2 and 1) or (key1currentposition == 10 and 1) or 0\nreturn a == 1\nend",
        "text": "1) -14, -6, 2, 10: "
      },
      {
        "id": 332,
        "url": "https://i.ibb.co/rZJP9vY/1-15-7-1-9.png",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -15 and 1) or (key1currentposition == -7 and 1) or (key1currentposition == 1 and 1) or (key1currentposition == 9 and 1) or 0\nreturn a == 1\nend",
        "text": "1) -15, -7,  1, 9: "
      },
      {
        "id": 332,
        "url": "https://i.ibb.co/N2KGWcD/1-16-8-0.png",
        "lua_if": "function lua_if()\nkey1currentposition = key1currentposition or 0\nlocal a = (key1currentposition == -16 and 1) or (key1currentposition == -8 and 1) or (key1currentposition == 0 and 1) or (key1currentposition == 8 and 1) or (key1currentposition == 16 and 1) or 0\nreturn a == 1\nend",
        "text": "1) -16, -8, 0, 8, 16 "
      }
    ]
  },
  {
    "id": 333,
    "text": "– Маловероятно, чтобы она выжила спустя столько лет здесь. Даже если бы она смогла получить доступ к корабельным запасам, то провианта хватило бы не больше чем на один стандартный год, четыре месяца и восемнадцать дней.<s>r\n– Она провела в камере с бактой много времени, пока я не освободил её...<s>r\n– В камере с бактой?.. Тогда всё сходится, это должна быть она. Но тебе не следовало её освобождать, это точно.<s>r\n– Но почему?<s>r\n– Она сошла с ума. Или сильно рассерженна. И то, и другое, я полагаю. В любом случае, она опасна. Очень опасна.\n",
    "answers": [
      {
        "id": 333,
        "text": "\n– Мне тоже показалось что-то такое, но я бы не стал говорить так критично.\n– Это не имеет значения. Её стоит опасаться.",
        "merge": true
      },
      {
        "id": 333,
        "text": "\n– А мне она показалась милой.\n– Это не имеет значения. Её стоит опасаться.",
        "merge": true
      },
      {
        "id": 328,
        "text": "– Ясно..."
      }
    ]
  },
  {
    "id": 334,
    "text": "– Только минимум, необходимый для выполнения задания. Инструкция по открытию центральной двери, информация о повышенной чувствительности к свету охраняющего вход существа, неизвестная опасность за центральной и правой дверями, инструкция по установке бактокамеры. В целом, отвратительное место, если тебе интересно моё мнение.<s>r\n   Орнас не мог не согласиться, собственные ощущения подсказывали ему, что место на самом деле очень тёмное и таит в себе много опасностей.",
    "answers": [
      {
        "lua_do": "function lua_do()\narraysTL.mission = 1 -- узнал про существование \"миссии\"\nsupTab.sup328  = arraysTL.TL == 1 and 0 or supTab.sup328 \nend",
        "comment": true,
        "super_calculate": false,
        "id": 334,
        "text": "условия для блоков",
        "calculate": true,
        "merge": false
      },
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 335,
    "text": "– Для одного человека, – уклончиво ответил астромех. – Мы должны были встретиться с ним здесь. Сам понимаешь, в таком месте абы кто не появится. Но всё пошло не по плану, так что это уже неважно.",
    "answers": [
      {
        "id": 335,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ncondition = condition or {}\ncondition.ee = condition.ee or 0\ncondition.freeDess = condition.freeDess or 0\nlocal a = condition.ee == 1 and 1 or 0 -- условие \"видел камеру без силового поля\"\nlocal b = condition.freeDess == 1 and 1 or 0 -- условие освободил Десс\nlocal text = \"\"\nif a == 1 then\ntext = \"<s>\n– Почему же неважно? – изумился Орнас. – Ведь человек провёл в этой капсуле столько времени!<s>\n– Неважно, потому что мы не справились с миссией. Камеру-то мы поставили, но настроить не успели и человек в камеру лезть не захотел.\"\n   if b == 1 then\n     text = text .. \"<s>\n– Я освободил девушку из этой камеры! – не выдержав сказал джедай прямо. – Кто она?<s>\n   Дроид молчал какое-то время, но потом всё-таки начал рассказывать.<s>\n– Я знаю только минимум, необходимый для выполнения задания. Она бывший джедай, Феникс должен был поместить её в камеру для гибернического сна. Но она не пошла на сотрудничество, как обещал заказчик, и скрылась сразу после того, как мы выкрали её световой меч. Теперь она считает нас врагами. Но если подумать, то враг наёмников с <s><s>\"Чёрного Пламени<s><s>\" не обязательно враг для тебя. Может быть ты сможешь понять её лучше, чем мы.<s>\n– Теперь, наверное, да, – задумчиво протянул Орнас.\"\narraysTL.Dess = 10\ndess = dess or {}\ndess.revealed = 1\ndess.droidSeen = 1\n\ng.achievements = g.achievements or {}\ng.achievements.diplomat3 = g.achievements.diplomat3 or 0\ng.achievements.alarm = g.achievements.diplomat3 == 0 and 11 or 0\ng.achievements.diplomat3  = 1\n\n\n   else\n   text = text .. \" Рекомендую держаться от него подальше. Он опасен и обладает способностями, из-за которых невозможно понять, что он задумал и когда нанесёт удар в спину.<s>\n   Орнас подумал, что ему повезло: он не стал отключать камеру, когда у него была такая возможность, а человека в ней считают опасным даже наёмники.\"\n   end\nelse\ntext = \"<s>\n– Ну да, неважно, – задумчиво протянул Орнас.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 336,
    "text": "– Гипотетически – да, технически – нет. ",
    "answers": [
      {
        "id": 336,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\n-- После этого нужно попросить дроида присоединиться. С триггером arraysTL.TL == 2 выдаст в ответ нейтральную фразу (arraysTL.TL = 3, supTab.sup328 = 1). попросить выучить язык. С триггером arraysTL.TL == 3 дроид предложит собрать наушник-переводчик (arraysTL.TL = 4, supTab.sup328 = 4)\nlocal text = \"\"\n   if arraysTL.TL == 2 then\n      text = \"Я всё ещё связан необходимостью выполнять приказы командира, и не смогу помочь тебе, пока ограничитель не будет снят.<s>\n– У нас же есть шлем, – обрадовался Орнас. – Разве нельзя просто так взять и отменить этот приказ?<s>\n– Только если к визору шлема прилипла сечатка глаза Феникса, – усмехнулся астромеханик. – После того, как ты разберёшь шлем, ты не сможешь меня понимать, поэтому если рассчитываешь на мою помощь, нужно учесть и это.<s>\n   Джедай был вынужден согласиться.\"\n   arraysTL.TL = 3\n   else text = \"Я всё ещё связан необходимостью выполнять последний приказ этого ведроголового болвана. Вот если бы кто-нибудь смог перепаять пару микрочипов в моём блоке управления...<s>\n   Орнас понял намёк дроида, но промолчал.\"\n   end\nreturn text\nend",
        "merge": true
      },
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 337,
    "text": "– Как хорошо, что ты сам это предложил, – оживился TL-3. – Как ты мог заметить, большинство моих механических систем вышло из строя за время бездействия, и теперь мне нужен капитальный ремонт. К тому же, я всё ещё обязан выполнять последнее поручение моего бывшего владельца, так что я был бы очень признателен, если бы ты вдобавок провёл небольшую манипуляцию с микросхемами и исправил этот бессмысленный акт утилитарного отношения к дроидам.",
    "answers": [
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 338,
    "text": "– ",
    "answers": [
      {
        "calculate": true,
        "lua_do": "function lua_do()\ncondition = condition or {}\narraysTL = arraysTL or {}\narraysTL.trust = (arraysTL.trust or 0) <plus> 2\narraysTL.lieRevealed = 1\nend",
        "text": "Дальше",
        "id": 338,
        "var_set": [
          "binary_lang",
          1
        ]
      },
      {
        "id": 338,
        "text": "генерация текста",
        "lua_text": "function lua_text()\nTL3 = TL3 or {}\nTL3.focusTL = TL3.focusTL or 0\nTL3.trust = TL3.trust or 0\n--После этого нужно попросить дроида присоединиться. С триггером arraysTL.TL == 2 выдаст в ответ нейтральную фразу (arraysTL.TL = 3, supTab.sup328 = 1). попросить выучить язык. С триггером arraysTL.TL == 3 дроид предложит собрать наушник-переводчик (arraysTL.TL = 4, supTab.sup328 = 4)\nlocal text = \"\"\nif TL3.focusTL <plus> TL3.trust > 11 then\ntext = \"Это было бы неэффективно, – отрезал дроид. – У меня есть идея получше: мы соберём тебе компактный аудио-переводчик. Это будет довольно просто по сравнению с тем, что тебе предстоит дальше.<s>\n   Орнас лишь нерешительно пожал плечами.\"\nTL3.conditionTranslator = 1\nelse\ntext = \"О, это очень мило с твоей стороны, но человеческие существа не приспособлены к двоичному коду, тебе было бы проще научиться понимать вуки.<s>\n– Я знаю некоторых людей, владеющих бинарным языком, – проговорил Орнас с некоторой укоризной в голосе, – так что я сомневаюсь, что это принципиально невозможно.<s>\n– Ну… Возможно это так, ладно. – нехотя согласился дроид.<s>\n   Они потратили буквально несколько минут, за которые юноша не смог понять абсолютно ничего, когда астромеху наскучило это занятие и он безапелляционно заявил, что больше не будет учить джедая сегодня.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 452,
        "text": "ok",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 339,
    "text": "– К сожалению, нет. Ничего связанного с заданием, на это стоит программный запрет.<s>r\n– Но ты же сам уже рассказал о некоторых подробностях! – возмутился юноша. – Установка бактокамеры, помнишь?<s>r\n– В самом деле? Не думаю, что это возможно. Точно нет. Пожалуй, стоит сменить тему.",
    "answers": [
      {
        "lua_if": "function lua_if()\n-- если видел сообщение в кабине корабля\ncondition = condition or {}\ncondition.seeTheMessageInShip = condition.seeTheMessageInShip or 0\nreturn true\nend",
        "id": 339,
        "text": "генерация текста",
        "lua_text": "function lua_text()\ncondition = condition or {}\nlocal c = condition.seeTheMessageInShip == 1 and 1 or 0\nlocal text = \"\"\narraysTL.mission = 2 -- узнал про камеру\ncondition.seeTheChamber = condition.seeTheChamber or 0\nif c == 1 then\nsupTab.sup328 = 1\ntext = \"<s>\n– Нет, погоди, – спокойно возразил Орнас. – Я видел сообщения в кабине звездолёта, там тоже говорилось что-то про камеру. Ваше задание здесь – собрать эту камеру? Но для кого она предназначалась?<s>\n – Ты весьма проницателен, – неохотно ответил TL-3. – Да, камера – вот наше задание. Ты уже видел её где-то здесь?<s>\n\"\nlocal a = condition.seeTheChamber == 1 and 1 or 0 -- условие видел камеру\ntext = text .. (a == 1 and \"   Юноша молча кивнул.\" or \"   Юноша лишь покачал головой.\")\nelse\ntext = \"<s>\n   Орнас лишь недовольно сжал губы: аргументов в споре с дроидом у него не было.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 339,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\narraysTL.lieRevealed = 1\nend"
      },
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 340,
    "text": "– Хм... Странно, что ты спрашиваешь об этом, разве я в чём-то был неубедителен? В любом случае, вопрос не имеет смысла, так как даже если я отвечу утвердительно, этот ответ также может оказаться ложным. Тебе, как и всем людям, здорово не хватает логики и рассудительности. Ты бы вряд ли стал спрашивать, если бы заранее подумал об этом сам.<s>r\n   Юноша признал, что ответ дроида и в самом деле ничего бы не прояснил.",
    "answers": [
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 341,
    "text": "– Я заранее позаботился обо всём. В углу под завалами спрятан ящик со всем необходимым. К тому же потребуется специальный чип, который тебе придётся извлечь из шлема.<s>r\n   Дроид проигнорировал удивление, возникшее на лице Орнаса при упоминании шлема, и продолжил.<s>r\n– Для начала ты должен открутить мне голову. Буквально. Для этого есть специальные кнопки по бокам. Пожалуйста, будь с ней очень бережен и положи куда-нибудь неподалеку. В месте крепления головы на корпусе расположены фиксирующие болты, нужно выкрутить один справа и один слева. После этого можно будет извлечь блок управления, потяни его вверх и немного вперёд, затем аккуратно отложи в сторону. Дальше – самое интересное. В ящике лежат ёмкости со смазкой, охлаждающей жидкостью и жидким азотом. Нужно залить смазку в резервуар около поршней, жидкий азот – в другой, расположенный примерно в центре, а хладагент – в охлаждающий контур, обвивающий резервуар с азотом. На задней панели располагаются элементы питания и аккумуляторы, там же находится панель управления техническими процессами. С её помощью нужно запустить вручную три-четыре цикла прокачки компрессора, затем переключить на работу в автономном режиме.<s>r\n– Подожди немного, я не успеваю запоминать всё это! – взмолился Орнас.",
    "answers": [
      {
        "id": 342,
        "text": "Дальше"
      },
      {
        "id": 341,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "377_plats_in_number",
          9
        ]
      }
    ]
  },
  {
    "id": 342,
    "text": "– Не перебивай, сейчас будет самое важное. Из блока управления тебе нужно извлечь зелёную панель, она должна быть где-то снизу. Найди её и положи рядом с собой, а остальные убери подальше, чтобы не запутаться. Потом нужно достать из шлема управляющую схему, она находится внутри, в верхней части, и довольно трудно выкручивается против часовой стрелки. Сама схема выполнена в виде спирали, на четвёртом витке должен быть крупный чип в виде креста, с трёх сторон соединённый со схемой. Если смотреть на чип так, чтобы свободный конец был направлен вверх, то последовательность разъединений контактов должна быть следующая: сначала нижний, затем левый, потом правый. После этого нужно разместить чип на той самой зелёной панели из моего управляющего блока, там только одно место, куда он подойдёт, последовательность подключения контактов обратная разъединению. Затем нужно вновь собрать блок управления, поместить его в корпус, закрутить винты и наконец вернуть на место голову. Звучит довольно просто, да?<s>r\n   Орнас только глубоко вдохнул, представляя предстоящую процедуру и надеясь ничего не перепутать.",
    "answers": [
      {
        "id": 343,
        "text": "– Давай начнём.",
        "need": 345
      },
      {
        "id": 344,
        "text": "– Ты не мог бы повторить всё это?"
      },
      {
        "id": 452,
        "text": "– Ясно...",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 343,
    "text": "   ",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.focusDess = TL3.focusDess or 0\nTL3.trust = TL3.trust or 0\nTL3.focusSelf = TL3.focusSelf or 0\nTL3.focusTL = TL3.focusTL or 0\narraysTL = arraysTL or {}\narraysTL.Dess = TL3.focusDess <plus> TL3.trust\narraysTL.trust = TL3.trust\nlocation1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5\nlocation1.lastChanceKey = location1.lastChanceKey - 1\nkeys = keys or {}\nkeys.TLFail = 1\nif TL3.focusSelf <plus>TL3.trust > 10 then -- бонус на ключ\n   text = \"TL-3 издал ещё одну комбинацию гудков и юноша прочитал перевод: <s><s>\"Ты вроде неплохой парень, даже не такой нудный, как большинство белковых форм. Раз тебе так интересен этот храм, то глянь, что спрятано в ящике кроме инструментов, когда закончишь с ремонтом. Наверное это пригодится тебе.<s><s>\"<s>\n   Юноша снял шлем и положил перед собой рядом с небольшим ящиком.\"\n  TL3.bonusKey = 1\n  keys.TLFail = 0\n  location1.lastChanceKey = location1.lastChanceKey <plus> 1\nelse\ntext = \"TL-3 издал непереводимую комбинацию гудков и писков, которую Орнас принял за пожелание удачи. Юноша снял шлем и положил перед собой рядом с небольшим ящиком.\"\nend\ntext = text .. \"<s>\n   Ещё раз повторив про себя всю последовательность действий, он подошёл вплотную к дроиду, нащупал двумя руками крепления у основания дискообразной головы и неуверенно надавил на них. После этого без сопротивления отделил металлическую конструкцию от основного корпуса и бережно отложил в сторону.<s>\n   Его взору открылась часть внутреннего устройства дроида\"\nreturn text\nend",
        "var_equal": [
          "343num",
          0
        ],
        "id": 343,
        "text": "генерация текста",
        "merge": true
      },
      {
        "id": 343,
        "text": "   Юноша вновь окинул взглядом то пространство внутри дроида, которое некогда было скрыто его металлической головой",
        "var_not": [
          "343num",
          0
        ],
        "merge": true
      },
      {
        "var_not": [
          "343sup",
          1
        ],
        "id": 343,
        "calculate": true,
        "text": "Открутить болты",
        "var_set": [
          "343sup",
          1
        ]
      },
      {
        "calculate": false,
        "var_not": [
          "343left",
          1
        ],
        "var_add": [
          "343num",
          1
        ],
        "var_equal": [
          "343sup",
          1
        ],
        "id": 347,
        "instant": false,
        "text": "Открутить левый болт",
        "var_set": [
          "343left",
          1
        ]
      },
      {
        "calculate": false,
        "var_not": [
          "343back",
          1
        ],
        "var_add": [
          "343num",
          1
        ],
        "var_equal": [
          "343sup",
          1
        ],
        "id": 347,
        "instant": false,
        "text": "Открутить задний болт",
        "var_set": [
          "343back",
          1,
          "343exc",
          1
        ]
      },
      {
        "calculate": false,
        "var_not": [
          "343right",
          1
        ],
        "var_add": [
          "343num",
          1
        ],
        "var_equal": [
          "343sup",
          1
        ],
        "id": 347,
        "instant": false,
        "text": "Открутить правый болт",
        "var_set": [
          "343right",
          1
        ]
      },
      {
        "calculate": false,
        "var_not": [
          "343front",
          1
        ],
        "var_add": [
          "343num",
          1
        ],
        "var_equal": [
          "343sup",
          1
        ],
        "id": 347,
        "instant": false,
        "text": "Открутить передний болт",
        "var_set": [
          "343front",
          1,
          "343exc",
          1
        ]
      },
      {
        "id": 343,
        "text": ", в отверстия ",
        "var_less": [
          "343num",
          3
        ],
        "merge": true
      },
      {
        "id": 343,
        "text": ", лишь в одно отверстие из нескольких ",
        "merge": true,
        "var_equal": [
          "343num",
          3
        ]
      },
      {
        "id": 343,
        "text": "по периметру корпуса были закручены четыре массивных болта.",
        "merge": true,
        "var_equal": [
          "343num",
          0
        ]
      },
      {
        "id": 343,
        "text": "по периметру корпуса были закручены три массивных болта.",
        "merge": true,
        "var_equal": [
          "343num",
          1
        ]
      },
      {
        "id": 343,
        "text": "по периметру корпуса были закручены два массивных болта.",
        "merge": true,
        "var_equal": [
          "343num",
          2
        ]
      },
      {
        "id": 343,
        "text": "по периметру корпуса был закручен массивный болт.",
        "merge": true,
        "var_equal": [
          "343num",
          3
        ]
      },
      {
        "id": 343,
        "text": ".",
        "merge": true,
        "var_equal": [
          "343num",
          4
        ]
      },
      {
        "id": 331,
        "text": "Извлечь блок управления",
        "var_not": [
          "343out",
          1
        ]
      },
      {
        "id": 346,
        "text": "Извлечь блок управления",
        "var_equal": [
          "343out",
          1
        ]
      },
      {
        "var_equal": [
          "343left",
          1,
          "343right",
          1
        ],
        "id": 343,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "343out",
          1
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\narraysTL = arraysTL or {}\narraysTL.Dess = arraysTL.Dess or 0\narraysTL.trust = arraysTL.trust or 0\nif arraysTL.Dess == 0 and arraysTL.trust == 0 then\narraysTL.Dess = 10\nend\nif arraysTL.Dess == 10 and arraysTL.trust ~= 6 then\narraysTL.Dess = 5\narraysTL.trust = 7\nelseif arraysTL.Dess == 5 then\narraysTL.Dess = 10\narraysTL.trust = 6\nelse\narraysTL.Dess = 0\narraysTL.trust = 0\nend\nend",
        "text": "Для теста: изменить результат диалога с дроидом",
        "id": 343,
        "merge": false
      },
      {
        "id": 407,
        "text": "Для проверки: успешный ремонт",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nauthorCheat = 1\ndroid_works = 1\ndroid_has_required_chip = 1\nhelmet = 3\nend"
      }
    ]
  },
  {
    "id": 344,
    "text": "– Разумеется. Находишь в углу под завалами ящик, снимаешь голову, нажав две кнопки по бокам. Откручиваешь фиксирующие болты справа и слева. Тянешь блок управления вверх и вперёд, вынимаешь. Заливаешь в резервуар смазку, в другой – жидкий азот, а хладагент – в охлаждающий контур. Запускаешь прокачку компрессора на три цикла, переключаешь в автономный режим. В нижней части блока управления находишь зелёную панель. Из шлема выкручиваешь против часовой стрелки управляющую схему, на четвёртом витке спирали находишь крупный чип в виде креста. Отсоединяешь сначала центральный, затем левый, потом правый контакты и помещаешь чип на панель моего управляющего блока, последовательность подключения контактов обратная разъединению. Затем собираешь блок управления, помещаешь его в корпус, закручиваешь винты и возвращаешь на место голову. Как-то так.\n   Орнас снова тяжело вдохнул, представляя предстоящую процедуру и надеясь ничего не перепутать.",
    "answers": [
      {
        "id": 343,
        "text": "– Давай начнём.",
        "need": 345,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.repairProgress = 1\nend"
      },
      {
        "id": 452,
        "text": "– Ясно...",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 345,
    "text": "   Орнас подошёл к горе мусора, наваленной в углу комнаты, и ",
    "answers": [
      {
        "id": 345,
        "text": " принялся расчищать его в поисках ящика, о котором поведал дроид. Тот оказался спрятан в самом углу комнаты, и к моменту, когда юноша смог его отыскать, ему пришлось перебрать почти весь завал. Джедай перенёс контейнер ближе к дроиду и, немного повозившись с замком, снял тяжёлую металлическую крышку.\n   Внутри лежали два небольших прозрачных сосуда и довольно увесистое устройство цилиндрической формы. Одна из ёмкостей была очень лёгкая, а голубоватая жидкость внутри неё – очень текучей. Второй сосуд оказался заметно тяжелее, а его бесцветное содержимое – густым и вязким.\n   В цилиндрическом приборе Орнам распознал ёмкость для хранения жидкостей при сверхнизких температурах и не сомневался, что он. заполнен жидким азотом, о котором говорил TL-3.",
        "var_not": [
          "style",
          2
        ],
        "merge": true
      },
      {
        "id": 345,
        "text": " с помощью Силы поднял в воздух весь хлам, в поисках ящика, о котором поведал дроид. Небольшой металлический ящик оказался спрятан в самом углу комнаты, джедай одним движением руки заставил контейнер переместиться ближе к дроиду и, немного повозившись с замком, снял тяжёлую металлическую крышку.\n   Внутри лежали два небольших прозрачных сосуда и довольно увесистое устройство цилиндрической формы. Одна из ёмкостей была очень лёгкая, а голубоватая жидкость внутри неё – очень текучей. Второй сосуд оказался заметно тяжелее, а его бесцветное содержимое – густым и вязким.\n   В цилиндрическом приборе Орнам распознал ёмкость для хранения жидкостей при сверхнизких температурах и не сомневался, что он. заполнен жидким азотом, о котором говорил TL-3.",
        "merge": true,
        "var_equal": [
          "style",
          2
        ]
      },
      {
        "id": 201,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 346,
    "text": "   Юноша аккуратно потянул блок управления вверх, медленно извлекая его наружу. Цилиндрический блок состоял из внешнего каркаса и проглядывающих через отверстия в нём разноцветных микросхем. Орнас почти полностью вынул устройство из корпуса дроида, когда почувствовал небольшое сопротивление.",
    "answers": [
      {
        "id": 349,
        "text": "Продолжать тянуть вверх"
      },
      {
        "id": 350,
        "text": "Наклонить вправо"
      },
      {
        "id": 351,
        "text": "Наклонить назад"
      },
      {
        "id": 352,
        "text": "Наклонить влево"
      },
      {
        "id": 353,
        "text": "Наклонить вперёд"
      }
    ]
  },
  {
    "id": 347,
    "text": "   С помощью найденных в ящике инструментов Орнас быстро выкрутил нужный болт и положил его в контейнер.",
    "answers": [
      {
        "id": 343,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 348,
    "text": "   Орнас подошёл ближе к тому, что осталось от TL-3, и ещё раз с досадой осмотрел последствия своей ошибки. \"Нужно было внимательнее запоминать инструкцию!\" – сокрушённо подумал юноша и вернулся ближе к двери.",
    "answers": [
      {
        "id": 201,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 349,
    "text": "   Орнас приложил больше усилий, чтобы преодолеть возникшее сопротивление, и упрямый блок с громким скрежетом начал разваливаться на части, оставляя в руках юноши лишь осколки.\n   Даже не особо разбираясь в технике, джедай понимал, что устранить последствия его опрометчивых действий теперь не удастся. Дроид замолчал навсегда. Орнас мысленно выругался: как мог он допустить такой исход ситуации? Потратив столько времени и сил, он по собственной глупости лишился ценного союзника.\n   Обречённо отбросив в сторону ставшие бесполезным хламом детали, джедай отошёл от останков дроида, стараясь больше о нём не думать.\n",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 350,
    "text": "   Орнас с усилием наклонил блок вправо, чтобы преодолеть возникшее сопротивление. Но устройство с громким скрежетом начало разваливаться на части, оставляя в руках юноши лишь осколки.\n   Даже не особо разбираясь в технике, джедай понимал, что устранить последствия его опрометчивых действий теперь не удастся. Дроид замолчал навсегда. Орнас мысленно выругался: как мог он допустить такой исход ситуации? Потратив столько времени и сил, он по собственной глупости лишился ценного союзника.\n   Обречённо отбросив в сторону ставшие бесполезным хламом детали, джедай отошёл от останков дроида, стараясь больше о нём не думать.\n",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 351,
    "text": "   Орнас с усилием наклонил блок назад, чтобы преодолеть возникшее сопротивление. Но устройство с громким скрежетом начало разваливаться на части, оставляя в руках юноши лишь осколки.\n   Даже не особо разбираясь в технике, джедай понимал, что устранить последствия его опрометчивых действий теперь не удастся. Дроид замолчал навсегда. Орнас мысленно выругался: как мог он допустить такой исход ситуации? Потратив столько времени и сил, он по собственной глупости лишился ценного союзника.\n   Обречённо отбросив в сторону ставшие бесполезным хламом детали, джедай отошёл от останков дроида, стараясь больше о нём не думать.\n",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 352,
    "text": "   Орнас с усилием наклонил блок влево, чтобы преодолеть возникшее сопротивление. Но устройство с громким скрежетом начало разваливаться на части, оставляя в руках юноши лишь осколки.\n   Даже не особо разбираясь в технике, джедай понимал, что устранить последствия его опрометчивых действий теперь не удастся. Дроид замолчал навсегда. Орнас мысленно выругался: как мог он допустить такой исход ситуации? Потратив столько времени и сил, он по собственной глупости лишился ценного союзника.\n   Обречённо отбросив в сторону ставшие бесполезным хламом детали, джедай отошёл от останков дроида, стараясь больше о нём не думать.\n",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 353,
    "text": "   Юноша наклонил блок микросхем немного вперёд, и тот продолжил движение без сопротивления. Осмотрев необычное устройство со всех сторон, Орнас осторожно положил его на пол рядом с ящиком и шлемом.\n   Под извлечённым блоком управления в корпусе дроида распологались разнообразные механизмы, поршни, приводы, длинные ленты шлейфов и трубки. В этом технологическом хаосе джедай с трудом отыскал и открутил крышки резервуаров, о которыз говорил TL-3: один находился почти по центру, второй оплетал его плотными кольцами, словно змея, а третий располагался несколько поодаль, зажатый между боковой стенкой и большим поршнем.\n   Орнас извлёк из контейнера все ёмкости и попытался вспомнить, что и куда нужно было заливать.",
    "answers": [
      {
        "id": 354,
        "text": "Вязкая прозрачная жидкость",
        "var_set": [
          "354sup1",
          1,
          "354sup_1",
          1
        ]
      },
      {
        "id": 354,
        "text": "Текучая голубоватая жидкость",
        "var_set": [
          "354sup1",
          2,
          "354sup_2",
          1
        ]
      },
      {
        "id": 354,
        "text": "Жидкий азот",
        "var_set": [
          "354sup1",
          3,
          "354sup_3",
          1
        ]
      }
    ]
  },
  {
    "id": 354,
    "text": "   Джедай взял в руки",
    "answers": [
      {
        "id": 354,
        "text": " ёмкость с вязкой прозрачной жидкостью и откупорил её. Неосторожно прикоснувшись пальцами к краям сосуда, Орнас почувствовал на коже неприятную маслянистость и поспешил вытереть руку тряпкой, предусмотрительно уложенной кем-то в ящик.",
        "merge": true,
        "var_equal": [
          "354sup1",
          1
        ]
      },
      {
        "id": 354,
        "text": " ёмкость с голубоватой жидкостью и снял плотно закрученную крышку. Как только Орнас извлёк закрывающий узкое горлышко уплотнитель, в его нос ударил резкий запах, а сам сосуд заметно похолодел.",
        "var_equal": [
          "354sup1",
          2
        ],
        "merge": true
      },
      {
        "id": 354,
        "text": " тяжёлый металлический сосуд с жидким азотом и провернул несколько раз винт, фиксирующий крышку. Через образовавшуюся между слоями изолятора щель хлынул поток холодных паров, густым туманом растёкшийся по полу комнаты.",
        "var_equal": [
          "354sup1",
          3
        ],
        "merge": true
      },
      {
        "id": 354,
        "text": "\n   Теперь оставалось только выбрать нужный резервуар.",
        "var_equal": [
          "354sup_count",
          1
        ],
        "merge": true
      },
      {
        "id": 354,
        "text": "\n   Теперь оставалось только выбрать из двух оставшихся резервуаров.",
        "merge": true,
        "var_equal": [
          "354sup_count",
          2
        ]
      },
      {
        "id": 354,
        "text": "\n   Только один  резервуар оставался до сих пор незаполненным, поэтому выбирать Орнасу не приходилось.",
        "var_equal": [
          "354sup_count",
          3
        ],
        "merge": true
      },
      {
        "var_add": [
          "354sup_count",
          "354sup_1",
          "354sup_count",
          "354sup_2",
          "354sup_count",
          "354sup_3"
        ],
        "var_set": [
          "354sup_count",
          0
        ],
        "id": 354,
        "calculate": true,
        "text": "счёт резервуаров",
        "merge": false
      },
      {
        "id": 355,
        "text": "Центральный резервуар",
        "need": [
          -355
        ],
        "var_set": [
          "354sup2",
          1
        ]
      },
      {
        "id": 356,
        "text": "Змеевидный резервуар",
        "need": -356,
        "var_set": [
          "354sup2",
          2
        ]
      },
      {
        "id": 357,
        "text": "Боковой резервуар",
        "need": -357,
        "var_set": [
          "354sup2",
          3
        ]
      }
    ]
  },
  {
    "id": 355,
    "text": "   Орнас склонился над центральным резервуаром, покрытым толстым слоем термоизолятора, и осторожно залил внутрь ",
    "answers": [
      {
        "id": 355,
        "var_not": [
          "354sup1",
          3
        ],
        "text": "всё содержимое сосуда. Тщательно закрутив обе крышки, юноша положил опустевшую ёмкость в ящик.",
        "merge": true
      },
      {
        "id": 355,
        "text": "вскипающий азот. Стараясь не прикасаться руками к обледеневшим краям, джедай аккуратно закрутил обе крышки и положил опустевший сосуд в ящик.",
        "merge": true,
        "var_equal": [
          "354sup1",
          3
        ]
      },
      {
        "var_set": [
          "liq_n2",
          1
        ],
        "var_equal": [
          "354sup1",
          3
        ],
        "id": 355,
        "calculate": true,
        "text": "nitrogen placed right",
        "merge": false
      },
      {
        "merge": false,
        "var_equal": [
          "354sup1",
          1
        ],
        "id": 355,
        "calculate": true,
        "text": "oil placed wrong",
        "var_set": [
          "oil",
          1
        ]
      },
      {
        "var_set": [
          "freon",
          1
        ],
        "var_equal": [
          "354sup1",
          2
        ],
        "id": 355,
        "calculate": true,
        "text": "freon placed wrong",
        "merge": false
      },
      {
        "id": 358,
        "text": "Дальше",
        "var_equal": [
          "354sup_count",
          1
        ]
      },
      {
        "id": 359,
        "text": "Дальше",
        "var_equal": [
          "354sup_count",
          2
        ]
      },
      {
        "id": 360,
        "text": "Дальше",
        "var_equal": [
          "354sup_count",
          3
        ]
      }
    ]
  },
  {
    "id": 356,
    "text": "   Джедай начал с осторожностью",
    "answers": [
      {
        "var_set": [
          "freon",
          2
        ],
        "var_equal": [
          "354sup1",
          2
        ],
        "id": 355,
        "calculate": true,
        "text": "freon placed right",
        "merge": false
      },
      {
        "merge": false,
        "var_equal": [
          "354sup1",
          3
        ],
        "id": 355,
        "calculate": true,
        "text": "oil placed wrong",
        "var_set": [
          "oil",
          2,
          "wrong_content",
          1
        ]
      },
      {
        "var_set": [
          "liq_n2",
          2
        ],
        "var_equal": [
          "354sup1",
          3
        ],
        "id": 355,
        "calculate": true,
        "text": "n2 placed wrong",
        "merge": false
      },
      {
        "id": 356,
        "text": " переливать прозрачную жидкость в узкое горлышко змеевидного резервуара. Вязкое вещество с раздражающей медлительностью вытекало из ёмкости и стекало вниз широкой струёй, иногда проливаясь на внешнюю стенку змеевика и заливая детали внутри корпуса. После завершения неприятной процедуры Орнас торопливо завинтил крышки и принялся тщательно вытирать руки всё той же тряпкой.\n   Он с неудовольствием отметил большое количество залитых маслом внутренних элементов, но очистить их подручными средствами не представлялось возможным.",
        "var_equal": [
          "354sup1",
          1
        ],
        "merge": true
      },
      {
        "id": 356,
        "text": " переливать голубоватую жидкость в узкое горлышко змеевидного резервуара. Не смотря на все его старания, часть жидкости струилась по стенкам сосуда, попадая во внутреннее пространство дроида, заливая механизмы, микросхемы и провода. Однако она довольно интенсивно испарялась, ударяя резким запахом по обонянию Орнаса, и к тому моменту, когда он полностью опустошил бутыль, внутри корпуса не осталось и следа от досадной утечки.",
        "merge": true,
        "var_equal": [
          "354sup1",
          2
        ]
      },
      {
        "id": 356,
        "text": " наклонять цилиндрический сосуд, намереваясь заполнить жидким азотом змеевидный резервуар. Через поваливший ледяной пар потекла по неестественной траектории тонкая струйка переохлаждённой жидкости. Брызги вскипающего азота с шипением отскакивали от узкого горлышка и разлетались по всему внутреннему пространству корпуса астромеха. Он быстро покрывался слоем инея, под  которым начала расползаться по всем поверхностями паутина трещин, сопровождаемая всё усиливающимся потрескиванием.\n   Орнас успел заметить, как повыскакивали потерявшие эластичность прорезиненые изоляторы, перед тем как заискрились силовые кабели. Он бросил в ящик опустевший сосуд и резко отскочил в сторону, когда раздался взрыв короткого замыкания.",
        "merge": true,
        "var_equal": [
          "354sup1",
          3
        ]
      },
      {
        "id": 358,
        "text": "Дальше",
        "var_not": [
          "liq_n2",
          2
        ],
        "var_equal": [
          "354sup_count",
          1
        ]
      },
      {
        "id": 359,
        "text": "Дальше",
        "var_not": [
          "liq_n2",
          2
        ],
        "var_equal": [
          "354sup_count",
          2
        ]
      },
      {
        "id": 360,
        "text": "Дальше",
        "var_not": [
          "liq_n2",
          2
        ],
        "var_equal": [
          "354sup_count",
          3
        ]
      },
      {
        "id": 361,
        "text": "Дальше",
        "var_equal": [
          "liq_n2",
          2
        ]
      }
    ]
  },
  {
    "id": 357,
    "text": "   Орнас подошёл к дроиду сбоку, чтобы оказаться ближе к зажатому между стенкой корпуса и большим поршнем резервуару. Отсюда джедай медленно перелил в него",
    "answers": [
      {
        "id": 355,
        "var_not": [
          "354sup1",
          3
        ],
        "text": " всё содержимое выбранного сосуда. Тщательно закрутив обе крышки, юноша положил опустевшую ёмкость в ящик.",
        "merge": true
      },
      {
        "id": 355,
        "text": " вскипающий жидкий азот, стараясь не прикасаться руками к обледеневающим краям сосуда. Когда всё было готово, юноша аккуратно закрутил обе крышки и положил опустевший сосуд в ящик.",
        "var_equal": [
          "354sup1",
          3
        ],
        "merge": true
      },
      {
        "merge": false,
        "var_equal": [
          "354sup1",
          3
        ],
        "id": 355,
        "calculate": true,
        "text": "nitrogen placed right",
        "var_set": [
          "liq_n2",
          3
        ]
      },
      {
        "var_set": [
          "oil",
          3
        ],
        "var_equal": [
          "354sup1",
          1
        ],
        "id": 355,
        "calculate": true,
        "text": "oil placed right",
        "merge": false
      },
      {
        "merge": false,
        "var_equal": [
          "354sup1",
          2
        ],
        "id": 355,
        "calculate": true,
        "text": "freon placed wrong",
        "var_set": [
          "freon",
          3,
          "wrong_content",
          1
        ]
      },
      {
        "id": 358,
        "text": "Дальше",
        "var_not": [
          "liq_n2",
          3
        ],
        "var_equal": [
          "354sup_count",
          1
        ]
      },
      {
        "id": 359,
        "text": "Дальше",
        "var_not": [
          "liq_n2",
          3
        ],
        "var_equal": [
          "354sup_count",
          2
        ]
      },
      {
        "id": 360,
        "text": "Дальше",
        "var_not": [
          "liq_n2",
          3
        ],
        "var_equal": [
          "354sup_count",
          3
        ]
      },
      {
        "id": 365,
        "text": "Дальше",
        "var_equal": [
          "liq_n2",
          3
        ]
      }
    ]
  },
  {
    "id": 358,
    "text": "   Несколько мгновений Орнас внимательно присматривался и прислушивался, но каких-либо изменений в неподвижном механизме дроида не заметил. Он вновь потянулся к ящику, в котором оставались ещё два сосуда.",
    "answers": [
      {
        "id": 354,
        "text": "Вязкая прозрачная жидкость",
        "var_not": [
          "354sup_1",
          1
        ],
        "var_set": [
          "354sup1",
          1,
          "354sup_1",
          1
        ]
      },
      {
        "id": 354,
        "text": "Текучая голубоватая жидкость",
        "var_not": [
          "354sup_2",
          1
        ],
        "var_set": [
          "354sup1",
          2,
          "354sup_2",
          1
        ]
      },
      {
        "id": 354,
        "text": "Жидкий азот",
        "var_not": [
          "354sup_3",
          1
        ],
        "var_set": [
          "354sup1",
          3,
          "354sup_3",
          1
        ]
      }
    ]
  },
  {
    "id": 359,
    "text": "   Орнас внимательно оценил состояние дроида, но каких-либо изменений в неподвижном механизме не заметил. Он повернулся к контейнеру, в котором оставался последний заполненный сосуд.",
    "answers": [
      {
        "id": 354,
        "text": "Вязкая прозрачная жидкость",
        "var_not": [
          "354sup_1",
          1
        ],
        "var_set": [
          "354sup1",
          1,
          "354sup_1",
          1
        ]
      },
      {
        "id": 354,
        "text": "Текучая голубоватая жидкость",
        "var_not": [
          "354sup_2",
          1
        ],
        "var_set": [
          "354sup1",
          2,
          "354sup_2",
          1
        ]
      },
      {
        "id": 354,
        "text": "Жидкий азот",
        "var_not": [
          "354sup_3",
          1
        ],
        "var_set": [
          "354sup1",
          3,
          "354sup_3",
          1
        ]
      }
    ]
  },
  {
    "id": 360,
    "text": "   Юноша ещё раз проверил, что все крышки плотно закручены и вздохнул с облегчением: пока что ничего не указывало на то, что он где-то ошибся.\n    Орнас на несколько секунд зажмурился, силясь вспомнить инструкции астромеха, затем склонился прямо над разобранным корпусом, чтобы дотянуться до задней панели, прикрытой ворохом проводов. Отодвинув их в сторону одной рукой, он разглядел крепления аккумуляторов, силовые ячейки и небольшую панель с несколькими переключателями, схематические рисунки около которых давали смутное представление об их назначении.",
    "answers": [
      {
        "id": 364,
        "text": "Снять фиксаторы аккумуляторов",
        "var_not": [
          "fix_power_out",
          1
        ],
        "var_set": [
          "fix_power_out",
          1
        ]
      },
      {
        "id": 362,
        "text": "Активировать подачу тока",
        "var_not": [
          "global current_id",
          362
        ],
        "var_equal": [
          "fix_power_out",
          0
        ]
      },
      {
        "id": 373,
        "text": "Активировать подачу тока",
        "var_equal": [
          "fix_power_out",
          1
        ]
      },
      {
        "var_not": [
          "366_power_out",
          1
        ],
        "var_equal": [
          "fix_power_out",
          1
        ],
        "id": 366,
        "text": "Извлечь аккумуляторы",
        "var_set": [
          "366_power_out",
          1
        ]
      },
      {
        "var_not": [
          "fix_power_out",
          0
        ],
        "var_equal": [
          "366_power_out",
          1
        ],
        "id": 367,
        "text": "Вставить аккумуляторы",
        "var_set": [
          "366_power_out",
          0
        ]
      },
      {
        "id": 368,
        "text": "Вернуть фиксаторы аккумуляторов",
        "var_equal": [
          "fix_power_out",
          1
        ],
        "var_set": [
          "fix_power_out",
          0
        ]
      },
      {
        "id": 369,
        "text": "Перевести компрессор в режим ручного управления",
        "var_not": [
          "compressor_hand_ruler",
          1
        ],
        "var_set": [
          "compressor_hand_ruler",
          1
        ]
      },
      {
        "id": 370,
        "text": "Перевести компрессор в автоматический режим",
        "var_not": [
          "compressor_hand_ruler",
          0
        ],
        "var_set": [
          "compressor_hand_ruler",
          0
        ]
      },
      {
        "id": 360,
        "calculate": true,
        "text": "zero",
        "var_set": [
          "launch_compressor",
          1
        ]
      },
      {
        "var_equal": [
          "compressor_hand_ruler",
          1
        ],
        "id": 360,
        "calculate": true,
        "text": "all wright",
        "var_set": [
          "launch_compressor",
          371
        ]
      },
      {
        "var_equal": [
          "launch_compressor",
          371,
          "366_power_out",
          1
        ],
        "id": 360,
        "text": "no power",
        "calculate": true,
        "var_set": [
          "launch_compressor",
          372
        ]
      },
      {
        "var_equal": [
          "launch_compressor",
          371,
          "fix_power_out",
          1
        ],
        "id": 360,
        "text": "no accum fix",
        "calculate": true,
        "var_set": [
          "launch_compressor",
          374
        ]
      },
      {
        "var_equal": [
          "launch_compressor",
          371,
          "343exc",
          1
        ],
        "id": 360,
        "text": "no bolts",
        "calculate": true,
        "var_set": [
          "launch_compressor",
          375
        ]
      },
      {
        "var_equal": [
          "launch_compressor",
          371,
          "wrong_content",
          1
        ],
        "id": 360,
        "calculate": true,
        "text": "wrong content",
        "var_set": [
          "launch_compressor",
          376
        ]
      },
      {
        "id": 360,
        "text": "Запустить компрессор",
        "var_not": [
          "launch_compressor",
          1,
          "global current_id",
          371,
          "global current_id",
          372,
          "global current_id",
          379
        ],
        "go_to": [
          "launch_compressor"
        ]
      },
      {
        "id": 377,
        "text": "Перейти к системному блоку дроида"
      },
      {
        "id": 378,
        "text": "Перейти к мандалорскому шлему",
        "need": -394
      },
      {
        "id": 399,
        "text": "Перейти к спиральной плате из шлема",
        "need": [
          394
        ]
      },
      {
        "id": 407,
        "text": "Установить системный блок в корпус",
        "var_equal": [
          "edge_position",
          1
        ]
      }
    ]
  },
  {
    "id": 361,
    "text": "   Когда чёрный дым над остатками дроида развеялся, юноша осторожно подошёл ближе и без особой надежды заглянул внутрь. Оплавленный корпус, почерневшие микросхемы и деформированные детали – всё это не оставляло никаких шансов на восстановление подручными средствами.\n   Орнас мысленно выругался: как мог он допустить такой исход ситуации? Потратив столько времени и сил, он по собственной глупости лишился ценного союзника.\n   Обречённо оттолкнув ногой в сторону ставшие бесполезным хламом детали, джедай отошёл от дроида, стараясь больше о нём не думать.",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 362,
    "text": "   Джедай попытался активировать один из переключателей, который, как ему казалось, должен был запустить подачу электроэнергии, но механизм не поддавался. Юноша догадался, что его включение заблокировано фиксаторами аккумуляторного отдела.",
    "answers": [
      {
        "id": 360,
        "text": "список",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 363,
    "text": "– Знаю, разумеется, – тут же ответил дроид. – Нужно ввести определённую комбинацию символов в верной последовательности, это довольно общий принцип функционирования кодовых замков, между прочим. И нет, я не могу сообщить тебе сами комбинации, Феникс менял шифры каждый раз, когда покидал корабль, а ключи имели только члены экипажа.<s>r\n– Жаль, – растроенно пробормотал Орнас.",
    "answers": [
      {
        "id": 328,
        "text": "– Ясно...",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 364,
    "text": "   Орнас просунул вторую руку сквозь связки проводов и наощупь отсоединил крепления, удерживающие аккумуляторы на месте и обеспечивающие их надёжное соединение с отходящими кабелями.",
    "answers": [
      {
        "id": 360,
        "text": "Дальше",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 365,
    "text": "   Несколько мгновений Орнас внимательно изучал состояние дроида после проведённой процедуры. Поначалу ему казалось, что ничего не происходит, только увеличивается корочка льда на поверхности только что заполненного резервуара. Но вместе с этим усиливалось едва заметное колебание, постепенно превращаясь в ощутимую вибрацию. Джедай встревоженно смотрел, как пришли в движение трубки и переходники, будто разрываемые изнутри неведомой силой.\n   Поддавшись смутному предчувствую, юноша отпрыгнул в сторону в тот самый момент, когда прогремел мощный взрыв, окативший всё пространство вокруг холодным паром и фонтаном искорёженных запчастей.\n   Когда всё стихло, Орнас вернулся к остаткам дроида и обречённо заглянул внутрь. Деформированный металл, вырванные крепления и испорченные платы – всё это не оставляло надежды исправить ситуацию подручными средствами. Он бессильно опустился на пол, браня себя за глупую ошибку, приведшую к потере ценного союзника.\n   Откинув в сторону попавшиеся под руку детали, юноша поднялся и толкнул ногой ящик, после чего отошёл от остатков дроида, стараясь больше о нём не думать.",
    "answers": [
      {
        "id": 201,
        "text": "Дальше",
        "var_set": [
          "331broken",
          1,
          "helmet",
          3
        ]
      }
    ]
  },
  {
    "id": 366,
    "text": "   После беглого осмотра юноша последовательно отсоединил все провода от каждого из аккумуляторов, стараясь переплести их друг с другом так, чтобы не запутаться, если придётся подключать их заново. Он с некоторым усилием вытащил тяжёлые элементы питания и поместил их в металлический ящик с инструментами.",
    "answers": [
      {
        "id": 360,
        "text": "список",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 367,
    "text": "   Орнас извлёк тяжёлые аккумуляторные блоки из металлического ящика на полу и поместил их в соответствующий отдел внутри корпуса астродроида. Затем в течение весьма продолжительного времени он расплетал связки кабелей, отдавая должное своей предусмотрительности, и по памяти подключил их к силовым ячейкам.",
    "answers": [
      {
        "id": 360,
        "text": "список",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 368,
    "text": "   Юноша внимательно проверил надёжность всех соединений и вернул на место ограничительные планки аккумуляторного отделения. Стараясь не пережать чем-нибудь вездесущие провода, он закрепил фиксаторы в исходном положении.",
    "answers": [
      {
        "id": 360,
        "text": "list",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 369,
    "text": "  Орнас провернул на сто восемьдесят градусов переключатель таким образом, чтобы его указатель был направлен на изображение, которое юноша связал с ручным управлением насосной системой. Изменения в механизме отразились слабым скрежетом откуда-то из его недр.",
    "answers": [
      {
        "id": 360,
        "text": "list",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 370,
    "text": "  Орнас провернул переключатель на полоборота обратно, и теперь указатель был направлен на изображение, наводящее на мысли об автоматическом режиме функционирования систем. Изменения в механизме отразились слабым скрежетом откуда-то из его недр.",
    "answers": [
      {
        "id": 360,
        "text": "list",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 371,
    "text": "   После того как джедай с помощью очередного переключателя запустил нагрузку гидравлических и пневматических систем, все механизмы внутри дроида ожили: загудели насосы, пришли в движение поршни, задёргались под возникшим напором бесчисленные трубочки. Это продолжалось не больше пятнадцати секунд, а затем всё внезапно застыло и затихло, лишь слегка покачивались провода, задетые каким-то из поршней.",
    "answers": [
      {
        "id": 379,
        "text": "Провести повторный запуск"
      },
      {
        "id": 360,
        "text": "list",
        "run": [
          360
        ]
      },
      {
        "id": 371,
        "text": "Новый ответ. введите текст",
        "var_add": [
          "371_cycle",
          1
        ],
        "calculate": true
      },
      {
        "id": 371,
        "text": "\n   \"Один цикл есть\", – подумал Орнас.",
        "merge": true,
        "var_equal": [
          "371_cycle",
          1
        ]
      },
      {
        "id": 371,
        "text": "\n   \"Уже два цикла прошло\", – считал в уме юноша.",
        "var_equal": [
          "371_cycle",
          2
        ],
        "merge": true
      },
      {
        "id": 371,
        "text": "\n   \"Вот и третий завершился\", – отметил Орнас.",
        "merge": true,
        "var_equal": [
          "371_cycle",
          3
        ]
      },
      {
        "id": 371,
        "text": "\n   \"Уже четыре круга\", – продолжал считать юноша.",
        "var_equal": [
          "371_cycle",
          4
        ],
        "merge": true
      },
      {
        "id": 371,
        "text": "\n   \"Пять циклов\", – констатировал Орнас.",
        "merge": true,
        "var_equal": [
          "371_cycle",
          5
        ]
      },
      {
        "id": 371,
        "text": "\n   \"Уже полдюжины раз\", – прикинул в уме юноша.",
        "var_equal": [
          "371_cycle",
          6
        ],
        "merge": true
      },
      {
        "id": 371,
        "text": "\n   После очередного запуска Орнас сбился со счёта и уже не мог уверенно сказать, прошло ли восемь циклов, двенадцать иди все двадцать пять.",
        "var_more": [
          "371_cycle",
          6
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 372,
    "text": "   Джедай с осторожностью активировал один из переключателей, чтобы запустить компрессор, но ничего не произошло. Он ещё раз осмотрел схематические изображения на всей панели, но ничего более подходящего по смыслу к требуемой задаче не нашёл. Попробовав ещё несколько раз активировать этот элемент, Орнас вернул его в изначальное положение и оставил в покое.",
    "answers": [
      {
        "id": 360,
        "text": "ok",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 373,
    "text": "   Джедай попытался активировать один из переключателей, который, как ему казалось, должен был запустить подачу электроэнергии, и тот приглушённо щёлкнул. В то же мгновение заискрились обесточенные до этого силовые кабели, ",
    "answers": [
      {
        "id": 373,
        "text": "завибрировали аккумуляторы. Гул всё нарастал и в тот момент, когда юноша заподозрил неладное, один из энергетических блоков выскочил из отсека и, оборвав провода, рухнул вниз. Затем раздался взрыв короткого замыкания и повалили клубы чёрного дыма.",
        "var_not": [
          "366_power_out",
          1
        ],
        "merge": true
      },
      {
        "id": 373,
        "text": "свободно болтающиеся после отключения аккумуляторов. Орнас быстро отдёрнул руку, опасаясь получить удар током, но своим резким движением только ускорил неизбежное: не прошло и нескольких секунд, как контакты замкнулись и прогремел взрыв короткого замыкания. Юноша отскочил в сторону, подальше от повалившего едкого чёрного дыма.",
        "var_not": [
          "366_power_out",
          0
        ],
        "merge": true
      },
      {
        "id": 361,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 374,
    "text": "   После того, как джедай с помощью очередного переключателя запустил нагрузку гидравлических и пневматических систем, все механизмы внутри дроида ожили: загудели насосы, пришли в движение поршни, задёргались под возникшим напором бесчисленные трубочки. Гул всё нарастал, от сильной вибрации зашатались незакреплённые аккумуляторы. В тот момент, когда юноша заподозрил неладное, один из энергетических блоков выскочил из отсека и, оборвав провода, рухнул вниз. Затем раздался взрыв короткого замыкания и повалили клубы чёрного дыма.",
    "answers": [
      {
        "id": 361,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 375,
    "text": "   После того как джедай с помощью очередного переключателя запустил нагрузку гидравлических и пневматических систем, всё внутри дроида ожило: загудели насосы, пришли в движение поршни, задёргались под возникшим напором бесчисленные трубочки.\n   Гул всё нарастал. Внезапно, какая-то запчасть из верхней части корпуса выскочила и с жутким лязгом упала куда-то внутрь, затем это повторилось с другим фрагментом и, а уже через несколько секунд разразился настоящий металлический град, словно часть деталей никак не была закреплена на корпусе.\n   Орнас отскочил в сторону как раз в тот момент, когда полумрак помещения пронзил всполох искр и раздался гром короткого замыкания.",
    "answers": [
      {
        "id": 361,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 376,
    "text": "   После того как джедай с помощью очередного переключателя запустил нагрузку гидравлических и пневматических систем, всё внутри дроида ожило: загудели насосы, пришли в движение поршни, задёргались под возникшим напором бесчисленные трубочки.\n   Орнаса насторожил нарастающий скрежет механизмов и усиливающийся резкий запах, но предпринять что-либо он не успел: один из поршней с протяжным скрипом полностью остановился, а отходящий от него шланг лопнул под критическим напором. То же начало происходить почти со всеми видными юноше системами: трескались трубки, слетали крепления, один из резервуаров дал течь, а вспомогательное оборудование и микросхемы заливались потоками технических жидкостей,\n   Наконец, ворох искр соскочил с силовых кабелей и языки пламени охватили всё пространство вокруг, заставив Орнаса отбежать на безопасное расстояние.",
    "answers": [
      {
        "id": 361,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 377,
    "text": "   Орнас выпрямился во весь рост, размял затёкшие мышцы и окинул взглядом разобранного дроида и детали вокруг. Затем он подошёл ближе к цилиндрическому корпусу блока управления.",
    "answers": [
      {
        "id": 377,
        "text": "\n   Внутри корпуса были закреплены разноцветные платы микросхем.",
        "merge": true,
        "var_no_more": [
          "edge_position",
          8
        ]
      },
      {
        "id": 377,
        "text": "\n   Внутри корпуса была закреплена последняя планка с микросхемами.",
        "var_equal": [
          "edge_position",
          9
        ],
        "merge": true
      },
      {
        "id": 377,
        "text": "\n   Корпус, в котором раньше были закреплены цветные платы, теперь был пуст.",
        "merge": true,
        "var_equal": [
          "edge_position",
          10
        ]
      },
      {
        "id": 380,
        "text": "Новый ответ. введите текст",
        "run": [
          380
        ]
      },
      {
        "id": 400,
        "text": "таблица цветов",
        "lua_do": "function lua_do()\nvars.table_of_colors_400 = {}\n  for i = 1, 9 do\n  vars.table_of_colors_400[i] = {}\n  end\nvars.table_of_colors_400[1][1] = \"красной\"\nvars.table_of_colors_400[2][1] = \"тёмно-зелёной\"\nvars.table_of_colors_400[3][1] = \"тёмно-синей\"\nvars.table_of_colors_400[4][1] = \"голубой\"\nvars.table_of_colors_400[5][1] = \"чёрной\"\nvars.table_of_colors_400[6][1] = \"фиолетовой\"\nvars.table_of_colors_400[7][1] = \"оранжевой\"\nvars.table_of_colors_400[8][1] = \"светло-зелёной\"\nvars.table_of_colors_400[9][1]= \"жёлтой\"\nvars.table_of_colors_400[1][2] = \"красную\"\nvars.table_of_colors_400[2][2] = \"тёмно-зелёную\"\nvars.table_of_colors_400[3][2] = \"тёмно-синюю\"\nvars.table_of_colors_400[4][2] = \"голубую\"\nvars.table_of_colors_400[5][2] = \"чёрную\"\nvars.table_of_colors_400[6][2] = \"фиолетовую\"\nvars.table_of_colors_400[7][2] = \"оранжевую\"\nvars.table_of_colors_400[8][2] = \"светло-зелёную\"\nvars.table_of_colors_400[9][2]= \"жёлтую\"\nend",
        "calculate": true
      }
    ]
  },
  {
    "id": 378,
    "text": "   Орнас выпрямился во весь рост, размял затёкшие мышцы и окинул взглядом разобранного дроида и детали вокруг. Затем он присел на корточки и взял в руки мандалорский шлем.",
    "answers": [
      {
        "id": 392,
        "text": "Извлечь блок управления",
        "lua_do": "function lua_do()\nhelmet = 3 -- means helmet is broken\nend"
      }
    ]
  },
  {
    "id": 379,
    "text": "   Юноша запустил весь процесс ещё раз, и всё повторилось точно так же: десяток секунд активной работы систем, тряски и шума, а затем внезапная остановка и полная тишина.",
    "answers": [
      {
        "id": 371,
        "text": "Новый ответ. введите текст",
        "run": [
          371
        ]
      }
    ]
  },
  {
    "id": 380,
    "text": "   Подпрограмма для определения цвета плат и взаимодействия с ними",
    "answers": [
      {
        "var_str_set": [
          "position_of_element_",
          "position_of_element_",
          "element_in_position_",
          "element_in_position_"
        ],
        "var_not": [
          "380_start",
          1
        ],
        "id": 380,
        "text": "initial",
        "calculate": true,
        "var_set": [
          "edge_position",
          1,
          "i",
          1,
          "zero",
          0,
          "ten",
          10
        ]
      },
      {
        "id": 381,
        "var_not": [
          "380_start",
          1
        ],
        "run": [
          381
        ],
        "text": "стартовые условия"
      },
      {
        "id": 382,
        "text": "take from edge position",
        "run": [
          382
        ],
        "var_equal": [
          "382_activate",
          1
        ]
      },
      {
        "id": 383,
        "text": "put element down",
        "run": [
          383
        ],
        "var_equal": [
          "383_activate",
          1
        ]
      },
      {
        "id": 384,
        "text": "put element to edge position",
        "run": [
          384
        ],
        "var_equal": [
          "384_activate",
          1
        ]
      },
      {
        "var_not": [
          "edge_position",
          10
        ],
        "var_equal": [
          "element_in_arm",
          0
        ],
        "id": 385,
        "text": "Извлечь верхнюю плату",
        "var_set": [
          "382_activate",
          1
        ]
      },
      {
        "id": 386,
        "text": "Положить плату на пол",
        "var_not": [
          "element_in_arm",
          0
        ],
        "var_set": [
          "383_activate",
          1
        ]
      },
      {
        "id": 387,
        "text": "Вставить плату в блок управления",
        "var_not": [
          "element_in_arm",
          0
        ],
        "var_set": [
          "384_activate",
          1
        ]
      },
      {
        "id": 388,
        "text": "Поднять плату с пола",
        "var_not": [
          "edge_position",
          1
        ],
        "var_equal": [
          "element_in_arm",
          0
        ]
      },
      {
        "id": 390,
        "text": "colour",
        "run": [
          390
        ]
      },
      {
        "var_not": [
          "edge_position",
          10,
          "edge_position",
          9
        ],
        "var_equal": [
          "element_in_arm",
          0
        ],
        "id": 377,
        "text": " Было видно, что верхняя из оставшихся в блоке панель окрашена в",
        "var_show": [
          "390_colour_str",
          "цвет."
        ],
        "merge": true
      },
      {
        "var_not": [
          "edge_position",
          10
        ],
        "var_equal": [
          "element_in_arm",
          0,
          "edge_position",
          9
        ],
        "id": 377,
        "text": "\n   Внутри корпуса была закреплена последняя планка с микросхемами, окрашенная в",
        "var_show": [
          "390_colour_str",
          "цвет."
        ],
        "merge": true
      },
      {
        "var_equal": [
          "edge_position",
          10
        ],
        "text": " В блоке управления не осталось ни одной схемы.",
        "super_calculate": false,
        "id": 380,
        "calculate": true,
        "lua_do": "function lua_do()\n--vars[\"390colour_in_arm\"] = {}[element_in_arm]\nend",
        "merge": false
      },
      {
        "var_show": [
          "390_colour_in_arm",
          "панель микросхем"
        ],
        "id": 380,
        "text": " Юноша держал в руках",
        "var_not": [
          "element_in_arm",
          0,
          "global current_id",
          389
        ],
        "merge": true
      },
      {
        "var_not": [
          "element_in_arm",
          0
        ],
        "var_equal": [
          "global current_id",
          389
        ],
        "id": 380,
        "text": " Он неуверенно держал в руках",
        "var_show": [
          "390_colour_in_arm",
          "панель и размышлял, как ему с ней поступить."
        ],
        "merge": true
      },
      {
        "var_show": [
          "var385_random_text"
        ],
        "var_equal": [
          "global current_id",
          385
        ],
        "id": 385,
        "text": ",",
        "merge": true
      },
      {
        "id": 391,
        "text": "Перейти к корпусу дроида",
        "var_not": [
          "style",
          4
        ],
        "var_equal": [
          "element_in_arm",
          0
        ]
      },
      {
        "id": 378,
        "text": "Перейти к мандалорскому шлему",
        "need": [
          -394
        ],
        "var_equal": [
          "element_in_arm",
          0
        ]
      },
      {
        "lua_do": "function lua_do()\n  table_380 = {[1]=vars.position_of_element_1, [2]=vars.position_of_element_2, [3]=vars.position_of_element_3, [4]=vars.position_of_element_4, [5]=vars.position_of_element_5, [6]=vars.position_of_element_6, [7]=vars.position_of_element_7, [8]=vars.position_of_element_8, [9]=vars.position_of_element_9}; a = 0\n     for i =1,9 do\n       if table_380[i] == 10 then\n       a = a <plus> 1\n       end\n      end\n         if a == 1 then\n         vars.plats_down = \"На полу возле блока лежал один из элементов.\"\n         elseif a > 1 then\n         vars.plats_down = \"На полу возле блока лежало несколько извлечённых элементов.\"\n         else\n         vars.plats_down = \"\"\n         end\nend",
        "calculate": true,
        "text": "Проверка количества плат на полу",
        "id": 380
      },
      {
        "id": 380,
        "text": "Не работает =(",
        "need": 1000,
        "lua_do": "function lua_do()\n  table_380 = {}; a = 0\n  for i=1,9 do\n  table_380[i] = \"vars.position_of_element_\" .. i\n  end\n     for i = 1,9 do\n       if table_380[i] == 10 then\n       a = a <plus> 1\n       end\n      end\nvars.plats_down = a\nend"
      },
      {
        "id": 380,
        "text": "Скрипт Завра",
        "need": 1000,
        "lua_do": "function lua_do()\n value = 10\n a = 0 \n for i=1, 9 do \n  if vars[\"position_of_element_\"..i] == value then \n   a = a <plus> 1 \n  end \n end\nvars.plats_down = a\nend"
      },
      {
        "var_show": [
          "plats_down"
        ],
        "id": 380,
        "text": "\n   ",
        "var_not": [
          "global current_id",
          386
        ],
        "merge": true
      },
      {
        "id": 385,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\na = math.random(1,4)\n  if a == 1 then\n   vars.var385_random_text = \"покрытую тонким слоем пыли. Джедай не стал вытирать её, чтобы случайно что-нибудь не повредить.\"\n  elseif a == 2 then\n   vars.var385_random_text = \"усеянную разнообразными чипами.\"\n  elseif a == 3 then\n   vars.var385_random_text = \"её края были повреждены неглубокими бороздами и царапинами.\"\n  else\n   vars.var385_random_text = \"её цветное покрытие почти полностью стёрлось и было едва различимо.\"\nend\nend",
        "calculate": true
      },
      {
        "id": 399,
        "text": "Перейти к спиральной плате из шлема",
        "need": [
          394
        ],
        "var_equal": [
          "element_in_arm",
          0
        ]
      },
      {
        "id": 380,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  for i = 1, 9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n    vars.element_in_arm = i break\n    else\n    vars.element_in_arm = 0\n    end\n  end\nend",
        "calculate": true
      },
      {
        "id": 407,
        "text": "Установить системный блок в корпус",
        "var_equal": [
          "edge_position",
          1
        ]
      }
    ]
  },
  {
    "id": 381,
    "text": "Установка стартовых условий",
    "answers": [
      {
        "id": 381,
        "text": "Новый ответ. введите текст",
        "var_str_set": [
          "position_of_element_",
          "position_of_element_",
          "element_in_position_",
          "element_in_position_"
        ],
        "calculate": true
      },
      {
        "id": 381,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_concat": [
          "position_of_element_",
          "i",
          "element_in_position_",
          "i"
        ]
      },
      {
        "id": 381,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_pointer_put": [
          "position_of_element_",
          "i",
          "element_in_position_",
          "i"
        ]
      },
      {
        "id": 381,
        "text": "Новый ответ. введите текст",
        "var_add": [
          "i",
          1
        ],
        "calculate": true
      },
      {
        "id": 381,
        "text": "стартоаые условия",
        "run": [
          381
        ],
        "var_no_more": [
          "i",
          9
        ]
      },
      {
        "id": 381,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "380_start",
          1
        ]
      }
    ]
  },
  {
    "id": 382,
    "text": "\ntake from edge position\n;\nvar not [\"edge_position\",10];\nvar str set [\"position_of_element_\", \"position_of_element_\", \"element_in_position_\", \"element_in_position_\"];\nvar concat [\"element_in_position_\", \"edge_position\"];\nvar pointer get [\"element_in_arm\",\"\"element_in_position_\"];\nvar concat [\"position_of_element_\",\"element_in_arm\"];\nvar pointer put [\"element_in_position_\",\"zero\",\"position_of_element_\",\"zero\"];\nvar add [\"edge_position\",1] \n",
    "answers": [
      {
        "var_str_set": [
          "position_of_element_",
          "position_of_element_",
          "element_in_position_",
          "element_in_position_"
        ],
        "var_concat": [
          "element_in_position_",
          "edge_position"
        ],
        "id": 382,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 382,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_pointer_get": [
          "element_in_arm",
          "element_in_position_"
        ]
      },
      {
        "id": 382,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_concat": [
          "position_of_element_",
          "element_in_arm"
        ]
      },
      {
        "var_add": [
          "edge_position",
          1
        ],
        "id": 382,
        "text": "new answer",
        "calculate": true,
        "var_pointer_put": [
          "element_in_position_",
          "zero",
          "position_of_element_",
          "zero"
        ]
      },
      {
        "id": 382,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "382_activate",
          0
        ]
      }
    ]
  },
  {
    "id": 383,
    "text": "put element down\n\nvar not [\"element_in_arm\",0] \nvar str set [\"position_of_element_\", \"position_of_element_\", \"element_in_position_\", \"element_in_position_\" \nvar concat [\"position_of_element_\",\"element_in_arm\"] \nvar pointer put [\"position_of_element_\",\"ten\"] \nvar set [\"element_in_arm\",0]",
    "answers": [
      {
        "var_str_set": [
          "position_of_element_",
          "position_of_element_",
          "element_in_position_",
          "element_in_position_"
        ],
        "var_concat": [
          "position_of_element_",
          "element_in_arm"
        ],
        "id": 383,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 383,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_pointer_put": [
          "position_of_element_",
          "ten"
        ]
      },
      {
        "id": 383,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "element_in_arm",
          0,
          "383_activate",
          0
        ]
      }
    ]
  },
  {
    "id": 384,
    "text": "put element to edge position\n\nvar not [\"element_in_arm\",0] \nvar sub [\"edge_position\",1] \nvar str set [\"position_of_element_\", \"position_of_element_\", \"element_in_position_\", \"element_in_position_\" \nvar concat [\"position_of_element_\",\"element_in_arm\", \"element_in_position_\", \"edge_position\"] \nvar pointer put [\"position_of_element_\",\"edge_position\", \"element_in_position_\", \"element_in_arm\"] \nvar set [\"element_in_arm\",0]",
    "answers": [
      {
        "var_str_set": [
          "position_of_element_",
          "position_of_element_",
          "element_in_position_",
          "element_in_position_"
        ],
        "id": 384,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_sub": [
          "edge_position",
          1
        ]
      },
      {
        "id": 384,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_concat": [
          "position_of_element_",
          "element_in_arm",
          "element_in_position_",
          "edge_position"
        ]
      },
      {
        "id": 384,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "var_pointer_put": [
          "position_of_element_",
          "edge_position",
          "element_in_position_",
          "element_in_arm"
        ]
      },
      {
        "id": 384,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_set": [
          "element_in_arm",
          0,
          "384_activate",
          0
        ]
      }
    ]
  },
  {
    "id": 385,
    "text": "   С максимальной осторожностью Орнас отсоединил крепления, удерживающие плату внутри цилиндрического блока управления, и аккуратно извлёк её саму.",
    "answers": [
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_1 then\n  for i =1,7 do\n  a = vars[\"a_stat_of_chip_\" .. i]\n      if a[3] == 10 then\n      return true\n      end\n  end\nend\nend",
        "id": 400,
        "text": "Подключить к плате чип, лежащий на ящике",
        "lua_do": "function lua_do()\nlocal a = 0\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n    a = a <plus> 1\n    end\n  end\n      if a == 1 then\n        for i =1,7 do\n          if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n          vars[\"a_stat_of_chip_\" .. i][3] = 5\n          end\n        end\n      else\n      local b = {} local j = 1\n        for i =1,7 do\n          if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n          b[j] = i   j = j<plus>1\n          end\n        end\n      local c = math.random(1,j)\n      local d = b[c]\n      vars[\"a_stat_of_chip_\" .. d][3] = 5\n      end\nvars.b_hold_panel_400 = 1\nend",
        "calculate": false
      },
      {
        "id": 380,
        "text": "Новый ответ. введите текст",
        "run": [
          380
        ]
      }
    ]
  },
  {
    "id": 386,
    "text": "   Орнас аккуратно разместил плату на полу возле блока управления таким образом, чтобы в полумраке помещения можно было разглядеть её цвет.",
    "answers": [
      {
        "id": 380,
        "text": "Новый ответ. введите текст",
        "run": [
          380
        ],
        "lua_if": "function lua_if()\nlocal a = 0\n  if vars.a_stat_of_chip_1 then\n   for i = 1,7 do\n     if vars[\"a_stat_of_chip_\" .. i][3] == 5 then\n     a = a <plus> 1\n     end\n   end\n  end\n return a == 0\nend"
      },
      {
        "id": 386,
        "text": " В одной руке джедай продолжал держать извлечённый из шлема микрочип, который теперь было нужн",
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_1 then\n for i = 1,7 do\n   if vars[\"a_stat_of_chip_\" .. i][3] == 5 then\n   return true\n   end\n end\nend\nend",
        "merge": true
      },
      {
        "id": 398,
        "text": "Положить чип на крышку ящика",
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_1 then\n for i = 1,7 do\n   if vars[\"a_stat_of_chip_\" .. i][3] == 5 then\n   return true\n   end\n end\nend\nend",
        "run": [
          398
        ]
      }
    ]
  },
  {
    "id": 387,
    "text": "   Орнас бережно поместил панель на свободное место в блоке управления, закрепил её с помощью специальных фиксаторов и ещё раз осмотрел всю конструкцию.",
    "answers": [
      {
        "id": 380,
        "text": "Новый ответ. введите текст",
        "run": [
          380
        ]
      }
    ]
  },
  {
    "id": 388,
    "text": "   Джедай наклонился, ",
    "answers": [
      {
        "id": 389,
        "text": "Красная",
        "var_set": [
          "position_of_element_1",
          0,
          "element_in_arm",
          1
        ],
        "var_equal": [
          "position_of_element_1",
          10
        ]
      },
      {
        "id": 389,
        "text": "Оранжевая",
        "var_set": [
          "position_of_element_7",
          0,
          "element_in_arm",
          7
        ],
        "var_equal": [
          "position_of_element_7",
          10
        ]
      },
      {
        "id": 389,
        "text": "Жёлтая",
        "var_set": [
          "position_of_element_9",
          0,
          "element_in_arm",
          9
        ],
        "var_equal": [
          "position_of_element_9",
          10
        ]
      },
      {
        "id": 389,
        "text": "Светло-зелёная",
        "var_set": [
          "position_of_element_8",
          0,
          "element_in_arm",
          8
        ],
        "var_equal": [
          "position_of_element_8",
          10
        ]
      },
      {
        "id": 389,
        "text": "Тёмно-зелёная",
        "var_set": [
          "position_of_element_2",
          0,
          "element_in_arm",
          2
        ],
        "var_equal": [
          "position_of_element_2",
          10
        ]
      },
      {
        "id": 389,
        "text": "Голубая",
        "var_set": [
          "position_of_element_4",
          0,
          "element_in_arm",
          4
        ],
        "var_equal": [
          "position_of_element_4",
          10
        ]
      },
      {
        "id": 389,
        "text": "Тёмно-синяя",
        "var_set": [
          "position_of_element_3",
          0,
          "element_in_arm",
          3
        ],
        "var_equal": [
          "position_of_element_3",
          10
        ]
      },
      {
        "id": 389,
        "text": "Фиолетовая",
        "var_set": [
          "position_of_element_6",
          0,
          "element_in_arm",
          6
        ],
        "var_equal": [
          "position_of_element_6",
          10
        ]
      },
      {
        "id": 389,
        "text": "Чёрная",
        "var_set": [
          "position_of_element_5",
          0,
          "element_in_arm",
          5
        ],
        "var_equal": [
          "position_of_element_5",
          10
        ]
      },
      {
        "lua_do": "function lua_do()\n value = 10\n a = 0 \n for i=1, 9 do \n  if vars[\"position_of_element_\"..i] == value then \n   a = a <plus> 1 \n  end \nvars.a = a\nend\n  if a == 1 then\n   vars.plats_down_text = \"единственную лежащую на полу панель микросхем.\"\n   elseif a == 2 then\n   vars.plats_down_text = \"одну из двух лежащих на полу панелей микросхем.\"\n   else\n   vars.plats_down_text = \"одну из нескольких лежащих на полу панелей микросхем.\"\n   end\nend",
        "text": "Скрипт Завра",
        "id": 388,
        "calculate": true
      },
      {
        "id": 388,
        "text": "чтобы поднять",
        "var_show": [
          "plats_down_text"
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 389,
    "text": "   Юноша подцепил планку пальцами с двух сторон и поднял её с пола.",
    "answers": [
      {
        "lua_if": "function lua_if()\n  for i =1,7 do\n  a = vars[\"a_stat_of_chip_\" .. i] or {[3] = 0}\n      if a[3] == 10 then\n      return true\n      end\n  end\nend",
        "lua_do": "function lua_do()\nlocal a = 0\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n    a = a <plus> 1\n    end\n  end\n      if a == 1 then\n        for i =1,7 do\n          if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n          vars[\"a_stat_of_chip_\" .. i][3] = 5\n          end\n        end\n      else\n      local b = {} local j = 1\n        for i =1,7 do\n          if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n          b[j] = i   j = j<plus>1\n          end\n        end\n      local c = math.random(1,j)\n      d = b[c]\n      vars[\"a_stat_of_chip_\" .. d][3] = 5\n      end\nvars.b_hold_panel_400 = 1\nvars.aa = a\nend",
        "calculate": false,
        "id": 400,
        "text": "Подключить к плате чип, лежащий на ящике"
      },
      {
        "id": 380,
        "text": "Новый ответ. введите текст",
        "run": [
          380
        ]
      }
    ]
  },
  {
    "id": 390,
    "text": "colour",
    "answers": [
      {
        "id": 390,
        "text": "Новый ответ. введите текст",
        "var_str_set": [
          "position_of_element_",
          "position_of_element_",
          "element_in_position_",
          "element_in_position_"
        ],
        "calculate": true
      },
      {
        "id": 390,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "var_concat": [
          "element_in_position_",
          "edge_position"
        ]
      },
      {
        "id": 390,
        "calculate": true,
        "var_pointer_get": [
          "390_colour_set",
          "element_in_position_"
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "красный"
        ],
        "var_equal": [
          "390_colour_set",
          1
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "тёмно-зелёный"
        ],
        "var_equal": [
          "390_colour_set",
          2
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "тёмно-синий"
        ],
        "var_equal": [
          "390_colour_set",
          3
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "голубой"
        ],
        "var_equal": [
          "390_colour_set",
          4
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "чёрный"
        ],
        "var_equal": [
          "390_colour_set",
          5
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "фиолетовый"
        ],
        "var_equal": [
          "390_colour_set",
          6
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "оранжевый"
        ],
        "var_equal": [
          "390_colour_set",
          7
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "светло-зелёный"
        ],
        "var_equal": [
          "390_colour_set",
          8
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_str",
          "жёлтый"
        ],
        "var_equal": [
          "390_colour_set",
          9
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "красную"
        ],
        "var_equal": [
          "element_in_arm",
          1
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "тёмно-зелёную"
        ],
        "var_equal": [
          "element_in_arm",
          2
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "тёмно-синюю"
        ],
        "var_equal": [
          "element_in_arm",
          3
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "голубую"
        ],
        "var_equal": [
          "element_in_arm",
          4
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "чёрную"
        ],
        "var_equal": [
          "element_in_arm",
          5
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "фиолетовую"
        ],
        "var_equal": [
          "element_in_arm",
          6
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "оранжевую"
        ],
        "var_equal": [
          "element_in_arm",
          7
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "светло-зелёную"
        ],
        "var_equal": [
          "element_in_arm",
          8
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "var_str_set": [
          "390_colour_in_arm",
          "жёлтую"
        ],
        "var_equal": [
          "element_in_arm",
          9
        ],
        "id": 390,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 391,
    "text": "   Джедай отошёл на несколько шагов назад и окинул взглядом комнату. Не заметив каких-то изменений, он вернулся к разобранному корпусу астродроида и наклонился, чтобы дотянуться до скрытой в бесчисленных проводах задней панели.",
    "answers": [
      {
        "id": 360,
        "text": "Новый ответ. введите текст",
        "run": [
          360
        ]
      }
    ]
  },
  {
    "id": 392,
    "text": "   Джедай перевернул шлем и заглянул внутрь. В тусклом свете комнаты он не сразу заметил три углубления в верхней части устройства, в которые вполне могли поместится пальцы. Засунув руку в шлем и нащупав пазы, Орнас попробовал провернуть конструкцию.",
    "answers": [
      {
        "id": 393,
        "text": "По часовой стрелке",
        "var_set": [
          "sup_392",
          1
        ]
      },
      {
        "id": 393,
        "text": "Против часовой стрелки",
        "var_set": [
          "sup_392",
          2
        ]
      }
    ]
  },
  {
    "id": 393,
    "text": "   Поначалу усилия юноши не принесли никакого результата: его пальцы соскальзывали с углублений, а механизм не поддавался, будто движение его было заблокировано.",
    "answers": [
      {
        "var_show": [
          "sup_393"
        ],
        "lua_if": "function lua_if()\nif vars.sup_392 == 1 then\nvars.sup_393 = \"Продолжить вращать по часовой стрелке с большим усилием\"\nelse\nvars.sup_393 = \"Вращать по часовой стрелке\"\nend\nreturn true\nend",
        "id": 394,
        "text": " ",
        "var_set": [
          "sup_393",
          1
        ]
      },
      {
        "var_show": [
          "sup_393_2"
        ],
        "lua_if": "function lua_if()\nif vars.sup_392 == 2 then\nvars.sup_393_2 = \"Продолжить вращать против часовой стрелки с большим усилием\"\nelse\nvars.sup_393_2 = \"Вращать против часовой стрелки\"\nend\nreturn true\nend",
        "id": 394,
        "text": " ",
        "var_set": [
          "sup_393",
          2
        ]
      }
    ]
  },
  {
    "id": 394,
    "text": "   С большим усилием юноша провернул верхнюю внутреннюю часть шлем",
    "answers": [
      {
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  if not vars.a_stat_of_chip_1 then\n    for i = 1, 7 do\n    vars[\"a_stat_of_chip_\" .. i] = {0,0,0}\n    end\n  end\nif vars.sup_393 == 1 then\nvars.text_394_1 = \"по часовой стрелке, не взирая на неподатливость механизма. Подозрительный хруст и неприятный скрежет озадачили джедая, а когда он извлёк блок управления, то обнаружил, что тот повреждён. Два внешних витка спирального основания оказались смяты, а микросхемы на них – сильно деформированы.<s>\n   На первом витке спирали было размещено всего несколько микрочипов, среди которых не было ни одного, подходящего под описание TL-3. На втором витке разместилось около десятка чипов, включая один крестообразный, а на третьем таких оказалось сразу два: один с четырьмя контактами, другой с тремя. Элементы на остальной части платы были явно неисправны, поэтому юноша даже не стал их рассматривал.\"\nvars.available_elements_394 = 1\nelse vars.text_394_1 = \"против часовой стрелки, не взирая на неподатливость механизма. Подозрительный хруст и неприятный скрежет озадачили джедая, а когда он извлёк блок управления, то обнаружил, что тот повреждён. Первые два витка спирального основания были смяты, а микросхемы на них сильно деформированы.<s>\n   Юноша не стал внимательно осматривать поврежденные элементы и сразу перевёл взгляд на уцелевший фрагмент платы. На третьем витке спирали оказалось сразу два микрочипа в форме креста: один с четырьмя контактами, другой с тремя. На четвертом витке такой чип был всего один, а на последнем оказалось целых три: с двумя, тремя и четырьмя креплениями, соответсвенно.\"\nvars.available_elements_394 = 2\nend\nend",
        "calculate": true,
        "id": 394,
        "var_set": [
          "correct_one_394",
          0
        ]
      },
      {
        "var_show": [
          "text_394_1"
        ],
        "lua_if": "function lua_if()\nreturn true\nend",
        "var_equal": [
          "global current_id",
          394
        ],
        "id": 394,
        "text": "а",
        "var_not": [
          "global current_id",
          397,
          "global current_id",
          401
        ],
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_1[3] == 0 then\nreturn true\nend\nend",
        "var_equal": [
          "available_elements_394",
          1
        ],
        "id": 396,
        "text": "Извлечь чип со второго витка",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_1 = {0,0,1}\nend",
        "var_set": [
          "contacts_394",
          3
        ]
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_2[3] == 0 then\nreturn true\nend\nend",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_2 = {0,0,1}\nend",
        "text": "Извлечь с третьего витка чип с тремя контактами",
        "id": 396,
        "var_set": [
          "contacts_394",
          3
        ]
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_3[3] == 0 then\nreturn true\nend\nend",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_3 = {0,0,1}\nend",
        "text": "Извлечь с третьего витка чип с четырьмя контактами",
        "id": 396,
        "var_set": [
          "contacts_394",
          4
        ]
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_4[3] == 0 then\nreturn true\nend\nend",
        "var_equal": [
          "available_elements_394",
          2
        ],
        "id": 396,
        "text": "Извлечь чип с четвёртого витка",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_4 = {0,0,1}\nend",
        "var_set": [
          "contacts_394",
          3,
          "correct_one_394",
          1
        ]
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_5[3] == 0 then\nreturn true\nend\nend",
        "var_equal": [
          "available_elements_394",
          2
        ],
        "id": 396,
        "text": "Извлечь с пятого витка чип с двумя контактами",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_5 = {0,0,1}\nend",
        "var_set": [
          "contacts_394",
          2
        ]
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_6[3] == 0 then\nreturn true\nend\nend",
        "var_equal": [
          "available_elements_394",
          2
        ],
        "id": 396,
        "text": "Извлечь с пятого витка чип с тремя контактами",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_6 = {0,0,1}\nend",
        "var_set": [
          "contacts_394",
          3
        ]
      },
      {
        "lua_if": "function lua_if()\nif vars.a_stat_of_chip_7[3] == 0 then\nreturn true\nend\nend",
        "var_equal": [
          "available_elements_394",
          2
        ],
        "id": 396,
        "text": "Извлечь с пятого витка чип с четырьмя контактами",
        "lua_do": "function lua_do()\nvars.a_stat_of_chip_7 = {0,0,1}\nend",
        "var_set": [
          "contacts_394",
          4,
          "a_stat_of_chip_7",
          1
        ]
      },
      {
        "id": 391,
        "text": "Перейти к корпусу дроида",
        "var_not": [
          "style",
          4
        ]
      },
      {
        "id": 377,
        "text": "Перейти к системному блоку дроида"
      },
      {
        "id": 407,
        "text": "Установить системный блок в корпус",
        "var_equal": [
          "edge_position",
          1
        ]
      }
    ]
  },
  {
    "id": 395,
    "text": "   ",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "lua_do": "function lua_do()\n  if not vars.sup395_for_intro then\n  vars.sup395_for_intro = 0\n  end\na = vars.sup395_for_intro \na = a <plus> 1\n  if a == 1 then\n  vars.text_395_intro = \"С помощью манипулятора джедай аккуратно разъединил несколько миниатюрных проводов, обеспечивающих контакт \"\n  elseif a == 2 then\n  vars.text_395_intro = \"Юноша использовал микроманипулятор, чтобы разъединить крепления в \"\n  elseif a == 3 then\n  vars.text_395_intro = \"С помощью микроманипулятора Орнас осторожно разъединил несколько миниатюрных проводов, обеспечивающих контакт \"\n  else\n  vars.text_395_intro = \"Орнас использовал манипулятор, чтобы аккуратно разъединить крепления в \"\n  end\n    if a == 4 then\n    a = 0\n    end\nvars.sup395_for_intro = a\nend",
        "id": 395,
        "text": " ",
        "calculate": true,
        "merge": false
      },
      {
        "var_show": [
          "text_395"
        ],
        "lua_if": "function lua_if()\n  if vars.actual_disc_order[vars.amount_of_disc_el] == 1 then\n  vars.text_395 = \"верхней части\"\n  elseif vars.actual_disc_order[vars.amount_of_disc_el] == 2 then\n  vars.text_395 = \"правой части\"\n  elseif vars.actual_disc_order[vars.amount_of_disc_el] == 3 then\n  vars.text_395 = \"нижней части\"\n  elseif vars.actual_disc_order[vars.amount_of_disc_el] == 4 then\n  vars.text_395 = \"левой части\"\n  end\nvars.text_395 = vars.text_395_intro..vars.text_395..\" микросхемы с платой\"\nreturn true\nend",
        "id": 395,
        "text": " ",
        "merge": true
      },
      {
        "id": 396,
        "text": "Новый ответ. введите текст",
        "run": [
          396
        ],
        "lua_if": "function lua_if()\nreturn true\nend"
      },
      {
        "id": 398,
        "text": "Взять микрочип ",
        "lua_if": "function lua_if()\nlocal a = 1\n  for i = 1, #vars.raw_395 do\n    if vars.actual_disc_order[i] == vars.raw_395[i] then\n    a = a*1\n    else\n    a = a * 0\n    end\n  end\n    if a == 1 then\n    return true\n    elseif a == 0 then\n    return false\n    end\nend",
        "lua_do": "function lua_do()\n  for i = 1, 7 do\n    a = vars[\"a_stat_of_chip_\".. i]\n    if a[3] == 1 then\n    a[3] = 3\n    vars[\"a_stat_of_chip_\".. i] = a\n    end\n  end\nend"
      },
      {
        "id": 395,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  vars.text_396 = \"Контакты оставались на \"\n  if vars.wright_connection_avail_396 == 1 then\n  vars.text_396 = vars.text_396..\"правой\"\n    if (vars.down_connection_avail_396 == 1 or vars.left_connection_avail_396 == 1 or vars.up_connection_avail_396 == 1) and ((vars.down_connection_avail_396 <plus> vars.left_connection_avail_396 <plus> vars.up_connection_avail_396) ~= 1) then\n    vars.text_396 = vars.text_396..\", \"\n    elseif (vars.down_connection_avail_396 == 1 or vars.left_connection_avail_396 == 1 or vars.up_connection_avail_396 == 1) and ((vars.down_connection_avail_396 <plus> vars.left_connection_avail_396 <plus> vars.up_connection_avail_396) == 1) then\n    vars.text_396 = vars.text_396..\" и \"\n    end\n  end\n  if vars.down_connection_avail_396 == 1 then\n  vars.text_396 = vars.text_396..\"нижней\"\n    if (vars.left_connection_avail_396 <plus> vars.up_connection_avail_396) > 1 then\n    vars.text_396 = vars.text_396..\", \"\n    elseif (vars.left_connection_avail_396 <plus> vars.up_connection_avail_396) == 1 then\n    vars.text_396 = vars.text_396..\" и \"\n    end\n  end\n  if vars.left_connection_avail_396 == 1 then\n  vars.text_396 = vars.text_396..\"левой\"\n    if vars.up_connection_avail_396 == 1 then\n    vars.text_396 = vars.text_396..\" и \"\n    end\n  end\n  if vars.up_connection_avail_396 == 1 then\n  vars.text_396 = vars.text_396..\"верхней\"\n  end\n  if (vars.down_connection_avail_396 <plus> vars.left_connection_avail_396 <plus> vars.up_connection_avail_396 <plus> vars.wright_connection_avail_396) > 1 then\n  vars.text_396 = vars.text_396..\" частях крестообразного чипа.\"\n  elseif (vars.down_connection_avail_396 <plus> vars.left_connection_avail_396 <plus> vars.up_connection_avail_396 <plus> vars.wright_connection_avail_396) == 1 then\n  vars.text_396 = vars.text_396..\" части крестообразного чипа.\"\n  else\n  vars.text_396 = \"Теперь все контакты крестообразного чипа были отсоединены от панели.\"\n  end\nend",
        "calculate": true
      }
    ]
  },
  {
    "id": 396,
    "text": "   Орнас взял из ящика с инструментами микроманипулятор для работы с электроникой, затем положил микросхему на крышку ящика и низко склонился, пытаясь разглядеть крепления чипа",
    "answers": [
      {
        "var_show": [
          "text_396"
        ],
        "lua_if": "function lua_if()\nreturn true\nend",
        "id": 396,
        "text": ".",
        "merge": true
      },
      {
        "var_set": [
          "up_connection_avail_396",
          0
        ],
        "var_equal": [
          "up_connection_avail_396",
          1
        ],
        "id": 396,
        "text": "Отсоединить верхний контакт",
        "lua_do": "function lua_do()\n vars.amount_of_disc_el = vars.amount_of_disc_el <plus> 1\n vars.actual_disc_order[vars.amount_of_disc_el] = 1\n   if vars.actual_disc_order[vars.amount_of_disc_el] == vars.raw_395[vars.amount_of_disc_el] then\n   vars.goto_395 = 395\n   else\n   vars.goto_395 = 397\n   end\nend",
        "go_to": [
          "goto_395"
        ]
      },
      {
        "go_to": [
          "goto_395"
        ],
        "var_equal": [
          "wright_connection_avail_396",
          1
        ],
        "id": 396,
        "text": "Отсоединить правый контакт",
        "lua_do": "function lua_do()\n vars.amount_of_disc_el = vars.amount_of_disc_el <plus> 1\n vars.actual_disc_order[vars.amount_of_disc_el] = 2\n   if vars.actual_disc_order[vars.amount_of_disc_el] == vars.raw_395[vars.amount_of_disc_el] then\n   vars.goto_395 = 395\n   else\n   vars.goto_395 = 397\n   end\nend",
        "var_set": [
          "wright_connection_avail_396",
          0
        ]
      },
      {
        "go_to": [
          "goto_395"
        ],
        "var_equal": [
          "down_connection_avail_396",
          1
        ],
        "id": 396,
        "text": "Отсоединить нижний контакт",
        "lua_do": "function lua_do()\n vars.amount_of_disc_el = vars.amount_of_disc_el <plus> 1\n vars.actual_disc_order[vars.amount_of_disc_el] = 3\n   if vars.actual_disc_order[vars.amount_of_disc_el] == vars.raw_395[vars.amount_of_disc_el] then\n   vars.goto_395 = 395\n   else\n   vars.goto_395 = 397\n   end\nend",
        "var_set": [
          "down_connection_avail_396",
          0
        ]
      },
      {
        "go_to": [
          "goto_395"
        ],
        "var_equal": [
          "left_connection_avail_396",
          1
        ],
        "id": 396,
        "text": "Отсоединить левый контакт",
        "lua_do": "function lua_do()\n vars.amount_of_disc_el = vars.amount_of_disc_el <plus> 1\n vars.actual_disc_order[vars.amount_of_disc_el] = 4\n   if vars.actual_disc_order[vars.amount_of_disc_el] == vars.raw_395[vars.amount_of_disc_el] then\n   vars.goto_395 = 395\n   else\n   vars.goto_395 = 397\n   end\nend",
        "var_set": [
          "left_connection_avail_396",
          0
        ]
      },
      {
        "id": 396,
        "text": "Генерация текста",
        "calculate": true,
        "lua_do": "function lua_do()\n if not vars.text_396 then\n  if vars.contacts_394 == 2 then\n  chip_position_396 = math.random (1, 2)\n   if chip_position_396 == 1 then\n   vars.text_396 = \"Плата лежала таким образом, что контакты располагались на правой и левой частях креста.\"\n   vars.wright_connection_avail_396 = 1; vars.left_connection_avail_396 = 1 \n   vars.up_connection_avail_396 = 0; vars.down_connection_avail_396 = 0  \n   else\n   vars.text_396 = \"Плата лежала таким образом, что контакты располагались на верхней и нижней частях креста.\"\n   vars.wright_connection_avail_396 = 0; vars.left_connection_avail_396 = 0\n   vars.up_connection_avail_396 = 1; vars.down_connection_avail_396 = 1\n   end\n  elseif vars.contacts_394 == 3 then\n  chip_position_396 = math.random (1, 4)\n   if chip_position_396 == 1 then\n   vars.text_396 = \"Плата лежала таким образом, что контакты располагались на правой, нижней и левой частях креста.\"\n   vars.wright_connection_avail_396 = 1; vars.left_connection_avail_396 = 1 \n   vars.up_connection_avail_396 = 0; vars.down_connection_avail_396 = 1\n   elseif chip_position_396 == 2 then\n   vars.text_396 = \"Плата лежала таким образом, что контакты располагались на нижней, левой и верхней частях креста.\"\n   vars.wright_connection_avail_396 = 0; vars.left_connection_avail_396 = 1 \n   vars.up_connection_avail_396 = 1; vars.down_connection_avail_396 = 1  \n   elseif chip_position_396 == 3 then\n   vars.text_396 = \"Плата лежала таким образом, что контакты располагались на левой, верхней и правой частях креста.\"\n   vars.wright_connection_avail_396 = 1; vars.left_connection_avail_396 = 1 \n   vars.up_connection_avail_396 = 1; vars.down_connection_avail_396 = 0\n   else\n   vars.text_396 = \"Плата лежала таким образом, что контакты располагались на верхней, правой и нижней частях креста.\"\n   vars.wright_connection_avail_396 = 1; vars.left_connection_avail_396 = 0 \n   vars.up_connection_avail_396 = 1; vars.down_connection_avail_396 = 1\n   end\n  else\n  vars.text_396 = \"Контакты чипа располагались на всех четырёх сторонах креста.\"\n  vars.wright_connection_avail_396 = 1; vars.left_connection_avail_396 = 1 \n  vars.up_connection_avail_396 = 1; vars.down_connection_avail_396 = 1 \n  end\n vars.chip_position_396 = chip_position_396\n end\nvars.a_loc_tab_396= {vars.up_connection_avail_396, vars.wright_connection_avail_396, vars.down_connection_avail_396, vars.left_connection_avail_396}\nend"
      },
      {
        "id": 396,
        "text": "Генерация случайной последовательности из доступных позиций",
        "lua_do": "function lua_do()\n  function vars.random_raw (...)\n    a = {}\n    b = {}\n    s = 1\n      for i, v in pairs{...} do\n      a[i] = i * v\n          if a[i] ~= 0 then\n          b[s] = a[i]\n          s = s <plus> 1\n          end\n        end\n          for i, v in pairs {b} do\n          j = math.random (1, #b)\n          b[i], b[j] = b[j], b[i]\n          end\n    return b\n  end\nend",
        "calculate": true
      },
      {
        "lua_do": "function lua_do()\nif not vars.raw_395 then\n vars.a_testbox = \"start\" \n vars.amount_of_disc_el = 0; vars.actual_disc_order = {} \n  if vars.correct_one_394 == 1 then -- определённый порядок для нужной схемы\n   if vars.wright_connection_avail_396 == 0 or vars.left_connection_avail_396 == 0 or vars.up_connection_avail_396 == 0 or vars.down_connection_avail_396 == 0 then \n   vars.a_testbox = \"found zero\" \n    if vars.up_connection_avail_396 == 0 then \n     wright_order = {3,4,2} \n    elseif vars.wright_connection_avail_396 == 0 then \n     wright_order = {4,1,3} \n    elseif vars.left_connection_avail_396 == 0 then \n     wright_order = {2,3,1} \n    elseif vars.down_connection_avail_396 == 0 then \n     wright_order = {1,2,4} \n    else \n     vars.a_testbox = vars.a_testbox..\"but something went wrong\" \n    end \n   end \n   vars.raw_395 = wright_order \n  else \n   vars.raw_395 = vars.random_raw (vars.up_connection_avail_396, vars.wright_connection_avail_396, vars.down_connection_avail_396, vars.left_connection_avail_396)\n  end \n vars.a_test_raw = vars.raw_395 \nend\nend",
        "text": "Новый ответ. введите текст",
        "id": 396,
        "calculate": true
      }
    ]
  },
  {
    "id": 397,
    "text": "   Когда Орнас с помощью манипулятора отсоединил один из миниатюрных проводков в месте контакта, он услышал негромкий треск, после которого чип начал плавиться прямо на глазах. Еле уловимый запах гари подтвердил опасения юноши: он перепутал порядок разъединения, и элемент просто сгорел от возникшего скачка напряжения. Юноша не видел смысла продолжать возиться с испорченны",
    "answers": [
      {
        "id": 394,
        "text": "reload",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\n vars.text_396 = nil\n vars.wright_connection_avail_396 = nil\n vars.left_connection_avail_396 = nil\n vars.up_connection_avail_396 = nil\n vars.down_connection_avail_396 = nil\n vars.raw_395 = nil\n vars.correct_one_394 = nil\n    for i = 1, 7 do\n    vars[\"a_stat_of_chip_\" .. i] = {0,0,0}\n    end\nend"
      },
      {
        "id": 398,
        "text": "Функция разворота таблицы",
        "lua_do": "function lua_do()\n  function tab_invert (a)\n  local j = #a\n  b = {}\n    for i = 1, #a do\n    b[i] =a [j]\n    j = j - 1\n   end\n   return b\n  end\nend",
        "calculate": true
      },
      {
        "id": 397,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  for i = 1, 7 do\n  a = vars[\"a_stat_of_chip_\" .. i] \n    if a[3] == 1 then\n    local a = vars.correct_one_394\n    local b = tab_invert (vars.raw_395)\n    local c = 2\n    vars[\"a_stat_of_chip_\" .. i] = {a, b,c}\n    end\n  end\n  vars.raw_395 = nil\n  vars.text_396 = nil\n  vars.correct_one_394 = 0\nend",
        "calculate": true
      },
      {
        "id": 394,
        "text": "Новый ответ. введите текст",
        "run": [
          394
        ]
      },
      {
        "id": 394,
        "calculate": true,
        "lua_do": "function lua_do()\n  vars.text_394_1 = \"\"\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "var_show": [
          "text_397"
        ],
        "lua_do": "function lua_do()\na = {}\nb = 0\n  if vars.available_elements_394 == 1 then\n    for i =1, 3 do\n    a = vars[\"a_stat_of_chip_\" .. i]\n      if a[3] == 0 then\n      b = b <plus> 1\n      end\n    end\n  else\n    for i = 2, 7 do\n    a = vars[\"a_stat_of_chip_\" .. i]\n      if a[3] == 0 then\n      b = b <plus> 1\n      end\n    end\n  end\n  if b == 0 then\n  vars.text_397 = \"чипом, но других уцелевших на плате не осталось.\"\n  elseif b == 1 then\n  vars.text_397 = \"чипом и перевёл взгляд на последний уцелевший.\"\n  else\n  vars.text_397 = \"чипом и перевёл взгляд на уцелевшие.\"\n  end\nend",
        "text": "м",
        "id": 397,
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n vars.text_396 = nil\n vars.wright_connection_avail_396 = nil\n vars.left_connection_avail_396 = nil\n vars.up_connection_avail_396 = nil\n vars.down_connection_avail_396 = nil\n vars.raw_395 = nil\n vars.correct_one_394 = nil\nend",
        "text": "Новый ответ. введите текст",
        "id": 397,
        "calculate": true
      }
    ]
  },
  {
    "id": 398,
    "text": "   Орнас с максимальной осторожностью подцепил чип с помощью манипулятора, мягким движением приподнял его над панелью и переложил в свободную руку.\n   Теперь его можно был",
    "answers": [
      {
        "id": 398,
        "text": "Функция разворота таблицы",
        "lua_do": "function lua_do()\n  function tab_invert (a)\n  local j = #a\n  b = {}\n    for i = 1, #a do\n    b[i] =a [j]\n    j = j - 1\n   end\n   return b\n  end\nend",
        "calculate": true
      },
      {
        "id": 398,
        "text": "формирование таблицы чипа",
        "calculate": true,
        "lua_do": "function lua_do()\n  for i = 1, 7 do\n  a = vars[\"a_stat_of_chip_\" .. i] \n    if a[3] == 3 then\n    local a = vars.correct_one_394\n    local b = tab_invert (vars.raw_395)\n    local c = 5\n    vars[\"a_stat_of_chip_\" .. i] = {a, b,c}\n    end\n  end\n  vars.raw_395 = nil\n  vars.text_396 = nil\n  vars.correct_one_394 = 0\n  vars.b_hold_panel_400 = 0\nend"
      },
      {
        "var_equal": [
          "position_of_element_1",
          10
        ],
        "id": 400,
        "text": "Подключить к красной панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_1",
          0,
          "element_in_arm",
          1
        ]
      },
      {
        "var_equal": [
          "position_of_element_7",
          10
        ],
        "id": 400,
        "text": "Подключить к оранжевой панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_7",
          0,
          "element_in_arm",
          7
        ]
      },
      {
        "var_equal": [
          "position_of_element_9",
          10
        ],
        "id": 400,
        "text": "Подключить к жёлтой панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_9",
          0,
          "element_in_arm",
          9
        ]
      },
      {
        "var_equal": [
          "position_of_element_8",
          10
        ],
        "id": 400,
        "text": "Подключить к светло-зелёной панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_8",
          0,
          "element_in_arm",
          8
        ]
      },
      {
        "var_equal": [
          "position_of_element_2",
          10
        ],
        "id": 400,
        "text": "Подключить к тёмно-зелёной панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_2",
          0,
          "element_in_arm",
          2
        ]
      },
      {
        "var_equal": [
          "position_of_element_4",
          10
        ],
        "id": 400,
        "text": "Подключить к голубой панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_4",
          0,
          "element_in_arm",
          4
        ]
      },
      {
        "var_equal": [
          "position_of_element_3",
          10
        ],
        "id": 400,
        "text": "Подключить к тёмно-синей панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_3",
          0,
          "element_in_arm",
          3
        ]
      },
      {
        "var_equal": [
          "position_of_element_6",
          10
        ],
        "id": 400,
        "text": "Подключить к фиолетовой панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_6",
          0,
          "element_in_arm",
          6
        ]
      },
      {
        "var_equal": [
          "position_of_element_5",
          10
        ],
        "id": 400,
        "text": "Подключить к чёрной панели",
        "lua_do": "function lua_do()\nend",
        "var_set": [
          "position_of_element_5",
          0,
          "element_in_arm",
          5
        ]
      },
      {
        "lua_do": "function lua_do()\n a = 0 \n for i=1, 9 do \n  if vars[\"position_of_element_\"..i] == 10 then \n   a = a <plus> 1 \n  end \nvars.a = a\nend\nvars.plats_down_text = \"\"\n  if a == 1 then\n   vars.plats_down_text = \"поместить в единственную лежащую на полу панель микросхем или \"\n   elseif a == 2 then\n   vars.plats_down_text = \"поместить в одну из двух лежащих на полу панелей микросхем или \"\n   elseif a > 2 then\n   vars.plats_down_text = \"поместить в одну из нескольких лежащих на полу панелей микросхем или \"\n   end\n  vars.plats_down_text = vars.plats_down_text .. \"оставить на крышке ящика с инструментами.\"\nend",
        "text": "новый ответ",
        "calculate": true,
        "id": 388
      },
      {
        "id": 388,
        "var_show": [
          "plats_down_text"
        ],
        "text": "о",
        "merge": true
      },
      {
        "id": 401,
        "text": "Положить на крышку"
      }
    ]
  },
  {
    "id": 399,
    "text": "   Молодой джедай повернулся в ту сторону, где на полу лежала извлечённая из шлема спиральная панель, присел на корточки и взял её в руки.",
    "answers": [
      {
        "id": 394,
        "text": "Новый ответ. введите текст",
        "run": [
          394
        ]
      }
    ]
  },
  {
    "id": 400,
    "text": "   ",
    "answers": [
      {
        "var_not": [
          "global current_id",
          403
        ],
        "var_equal": [
          "b_hold_panel_400",
          0
        ],
        "id": 400,
        "text": "Орнас наклонился и ловко поднял с пола цветную панель. Тщательно осмотрев её, юноша отыскал место, в котором мог бы располагаться крестообразный чип. ",
        "merge": true
      },
      {
        "var_show": [
          "b_text_400"
        ],
        "var_equal": [
          "b_hold_panel_400",
          1
        ],
        "id": 400,
        "text": "Орнас наклонился ближе к цветной панели, чтобы тщательно её осмотреть, и отыскал место, в котором мог бы располагаться крестообразный чип.",
        "var_not": [
          "global current_id",
          403
        ],
        "merge": true
      },
      {
        "id": 400,
        "text": "таблица цветов",
        "lua_do": "function lua_do()\nvars.table_of_colors_400 = {}\n  for i = 1, 9 do\n  vars.table_of_colors_400[i] = {}\n  end\nvars.table_of_colors_400[1][1] = \"красной\"\nvars.table_of_colors_400[2][1] = \"тёмно-зелёной\"\nvars.table_of_colors_400[3][1] = \"тёмно-синей\"\nvars.table_of_colors_400[4][1] = \"голубой\"\nvars.table_of_colors_400[5][1] = \"чёрной\"\nvars.table_of_colors_400[6][1] = \"фиолетовой\"\nvars.table_of_colors_400[7][1] = \"оранжевой\"\nvars.table_of_colors_400[8][1] = \"светло-зелёной\"\nvars.table_of_colors_400[9][1]= \"жёлтой\"\nvars.table_of_colors_400[1][2] = \"красную\"\nvars.table_of_colors_400[2][2] = \"тёмно-зелёную\"\nvars.table_of_colors_400[3][2] = \"тёмно-синюю\"\nvars.table_of_colors_400[4][2] = \"голубую\"\nvars.table_of_colors_400[5][2] = \"чёрную\"\nvars.table_of_colors_400[6][2] = \"фиолетовую\"\nvars.table_of_colors_400[7][2] = \"оранжевую\"\nvars.table_of_colors_400[8][2] = \"светло-зелёную\"\nvars.table_of_colors_400[9][2]= \"жёлтую\"\nend",
        "calculate": true
      },
      {
        "id": 400,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  if not vars.a_number_of_ports_400 then\n  vars.a_number_of_ports_400 = {}\n  rand = {}\n    for i = 1, 9 do\n      rand[i] = math.random (1,100)\n      if rand[i] < 25 then\n        vars.a_number_of_ports_400[i] = 2\n        elseif rand[i] < 60 then\n        vars.a_number_of_ports_400[i] = 4\n        else \n        vars.a_number_of_ports_400[i] = 3\n      end\n    end\n  vars.a_number_of_ports_400[8] = 3\n  vars.a_number_of_ports_400[2] = 3\n  end\nvars.text_400 = \"\"\n    for i = 1,9 do\n      if vars[\"position_of_element_\" .. i] == 0 then\n      vars.a_number_of_ports_400[10] = vars.a_number_of_ports_400[i]\n      vars.text_400 = vars.table_of_colors_400[i][1] .. \" плате имело \"\n      end\n     end\n        if vars.a_number_of_ports_400[10] == 2 then\n        vars.text_400 = vars.text_400 .. \"два контакта\"\n        elseif vars.a_number_of_ports_400[10] == 3 then\n        vars.text_400 = vars.text_400 .. \"три контакта\"\n        else\n        vars.text_400 = vars.text_400 .. \"четыре контакта\" \n        end\n    for i =1,7 do\n    a = vars[\"a_stat_of_chip_\" .. i]\n      if a[3] == 5 then\n      b = #a[2] break\n      end\n    end\nif vars.a_number_of_ports_400[10] == b then\n  vars.text_400 = vars.text_400 .. \", столько же было и на самом чипе.\" \n  vars.a_avail_connection_400 = 1\n  else\n    vars.a_avail_connection_400 = 0\n    if b == 2 then\n      vars.text_400 = vars.text_400 .. \", а на чипе их было всего два. Они, очевидно, не подходили друг к другу.\"\n      elseif b == 3 then\n      vars.text_400 = vars.text_400 .. \", а на чипе их было три. Они, очевидно, не подходили друг к другу.\"\n      elseif b == 4 then\n      vars.text_400 = vars.text_400 .. \", а на чипе их было целых четыре. Они, очевидно, не подходили друг к другу.\"\n     end\n  end\nend",
        "calculate": true
      },
      {
        "var_show": [
          "text_400",
          ""
        ],
        "var_equal": [
          "a_avail_connection_400",
          0
        ],
        "id": 400,
        "text": "Но крепление на",
        "merge": true
      },
      {
        "var_show": [
          "text_400"
        ],
        "var_equal": [
          "a_avail_connection_400",
          1
        ],
        "id": 400,
        "text": "Крепление на",
        "merge": true
      },
      {
        "var_equal": [
          "a_avail_connection_400",
          0
        ],
        "lua_do": "function lua_do()\n  for i = 1,9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n    vars[\"position_of_element_\" .. i] = 10\n    end\n  end\n  vars.element_in_arm = 0\nend",
        "text": "Положить плату на пол",
        "id": 386,
        "var_set": [
          "383_activate",
          1
        ]
      },
      {
        "id": 402,
        "text": "Подключить чип к плате",
        "var_equal": [
          "a_avail_connection_400",
          1
        ]
      },
      {
        "var_equal": [
          "b_hold_panel_400",
          1
        ],
        "id": 401,
        "calculate": true,
        "text": "проверка, есть ли уже чипы на крышке",
        "lua_do": "function lua_do()\nlocal a = 0\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 10 then\n    a = a <plus> 1\n    end\n  end\n      if a == 0 then\n      vars.b_text_400 = \"Затем джедай взял с крышки ящика единственный лежащий там микрочип. \"\n      elseif a == 1 then\n      vars.b_text_400 = \"Затем джедай взял с крышки ящика один из двух лежащих там микрочипов. \"\n      elseif a > 1 then\n      vars.b_text_400 = \"Затем джедай наугад взял с крышки ящика один из нескольких лежащих там микрочипов. \"\n      else vars.b_text_400 = \".\"\n      end\nend"
      },
      {
        "id": 403,
        "text": "Взять другой чип",
        "lua_if": "function lua_if()\n  for i = 1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 10 then\n    return true\n    end\n  end\nend",
        "lua_do": "function lua_do()\n  for i = 1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 5 then\n    vars[\"a_stat_of_chip_\" .. i][3] = 6\n    end\n  end\nlocal a = 0\nlocal b = {} local j = 1\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n    a = a <plus> 1\n    end\n  end\n      if a == 1 then\n        for i =1,7 do\n          if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n          vars[\"a_stat_of_chip_\" .. i][3] = 5\n          end\n        end\n      else\n      local b = {} local j = 1\n        for i =1,7 do\n          if vars[\"a_stat_of_chip_\" .. i][3] ==10 then\n          b[j] = i   j = j<plus>1\n          end\n        end\n      local c = math.random(1,j)\n      local d = b[c]\n      vars[\"a_stat_of_chip_\" .. d][3] = 5\n      end\nvars.b_hold_panel_400 = 1\n  for i = 1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 6 then\n    vars[\"a_stat_of_chip_\" .. i][3] = 10\n    end\n  end\nend"
      },
      {
        "id": 400,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\n  for i =1, 9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n     -- plate is in arm\n    vars[\"a_stat_of_plate_\" .. i] = vars[\"a_stat_of_plate_\" .. i] or {0,0}\n    vars.a_avail_connection_400 = vars[\"a_stat_of_plate_\" .. i][1] == 1 and 0 or vars.a_avail_connection_400\n    vars.text_400 = vars[\"a_stat_of_plate_\" .. i][1] == 1 and \"этом месте уже было занято чипом, который юноша подключил ранее.\" or vars.text_400\n    vars.b_text_400 = vars[\"a_stat_of_plate_\" .. i][1] == 1 and \"\" or vars.b_text_400\n    end\n  end\nend"
      }
    ]
  },
  {
    "id": 401,
    "text": "   Орнас осторожно положил миниатюрный чип на крышку ",
    "answers": [
      {
        "id": 401,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  for i =1,7 do\n  a = vars[\"a_stat_of_chip_\" .. i]\n      if a[3] == 5 then\n      a[3] = 10\n      end\n  vars[\"a_stat_of_chip_\" .. i] = a\n  end\nend",
        "calculate": true
      },
      {
        "id": 394,
        "calculate": true,
        "lua_do": "function lua_do()\n  vars.text_394_1 = \"\"\n  vars.raw_395 = nil\n  vars.text_396 = nil\n  vars.correct_one_394 = 0\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 394,
        "text": "Перейти к системному блоку дроида",
        "run": [
          394
        ]
      },
      {
        "id": 401,
        "text": "ящика,",
        "var_show": [
          "b_text_401"
        ],
        "merge": true
      },
      {
        "id": 401,
        "text": "проверка, есть ли уже чипы на крышке",
        "lua_do": "function lua_do()\nlocal a = 0\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 10 then\n    a = a <plus> 1\n    end\n  end\n      if a == 2 then\n      vars.b_text_401 = \"на которой уже лежал один ранее извлечённый чип. Юноша надеялся, что не перепутает их, когда потребуется взять нужный.\"\n      elseif a > 2 then\n      vars.b_text_401 = \"на которой уже лежали несколько ранее извлечённых чипов. Юноша не был уверен, что не перепутает их, когда потребуется взять нужный, но не сильно тревожился об этом.\"\n      else vars.b_text_401 = \"чтобы можно было взять его оттуда, когда это потребуется.\"\n      end\nend",
        "calculate": true
      }
    ]
  },
  {
    "id": 402,
    "text": "   ",
    "answers": [
      {
        "lua_do": "function lua_do()\nvars.a_contact_avail_402_1 = vars.a_contact_avail_402_1 or 1\nvars.a_contact_avail_402_2 = vars.a_contact_avail_402_2 or 1\nvars.a_contact_avail_402_3 = vars.a_contact_avail_402_3 or 1\nvars.a_contact_avail_402_4 = vars.a_contact_avail_402_4 or 1\n  for i =1,7 do\n  if vars[\"a_stat_of_chip_\" .. i][3] == 5 then -- 5 means active \n    vars[\"a_stat_of_chip_\" .. i][3] = 9 -- 9 means active too\n    vars.a_row_402 = vars[\"a_stat_of_chip_\" .. i][2]\n      if #vars.a_row_402 == 3 then\n      local a = vars.a_row_402\n      local b = 9\n        for i = 1, 3 do\n        b = b - a[i]\n        end\n      for i = 1, 3 do\n        a[i] = a[i] - b\n        a[i] = a[i] < 1 and a[i] <plus> 4 or a[i]\n      end\n  vars.a_row_402 = a\n  vars.a_contact_avail_402_1 = 0\n  vars.a_text_402 = \"Юноша развернул панель таким образом, чтобы крепления чипа располагались на его правой, левой и нижней частях.\"\n    elseif #vars.a_row_402 == 2 then\n      if (vars.a_row_402[1] <plus> vars.a_row_402[2]) == 6 then\n      vars.a_contact_avail_402_1 = 0\n      vars.a_contact_avail_402_3 = 0\n      vars.a_text_402 = \"Юноша развернул панель таким образом, чтобы крепления чипа располагались на его правой и левой частях.\"\n      else \n      vars.a_contact_avail_402_2 = 0\n      vars.a_contact_avail_402_4 = 0\n      vars.a_text_402 = \"Юноша развернул панель таким образом, чтобы крепления чипа располагались на его нижней и верхней частях.\"\n      end\n  elseif #vars.a_row_402 == 4 then\n      local a = vars.a_row_402\n      local b = math.random(0,3)\n      for i = 1, 4 do\n        a[i] = a[i] - b\n        a[i] = a[i] < 1 and a[i] <plus> 4 or a[i]\n      end\n  vars.a_row_402 = a\n  vars.a_text_402 = \"Юноша развернул панель таким образом, чтобы было удобнее заниматься подключением, но при этом он совершенно не представлял, как соотносятся крепления на чипе и на плате.\"\n  end\nend\nend\nend",
        "text": "Новый ответ. введите текст",
        "id": 402,
        "calculate": true
      },
      {
        "var_show": [
          "a_text_402",
          "Теперь нужно было подключить все контакты в верной последовательности."
        ],
        "var_equal": [
          "global current_id",
          402
        ],
        "id": 402,
        "text": " ",
        "merge": true
      },
      {
        "var_set": [
          "a_contact_avail_402_1",
          0
        ],
        "var_equal": [
          "a_contact_avail_402_1",
          1
        ],
        "id": 402,
        "text": "Подключить верхний контакт",
        "lua_do": "function lua_do()\nvars.amount_of_con_el_402 = (vars.amount_of_con_el_402 or 0) <plus> 1\nvars.actual_con_order_402 = vars.actual_con_order_402 or {}\nvars.actual_con_order_402[vars.amount_of_con_el_402 ] = 1\nvars.go_to_402 = vars.actual_con_order_402[vars.amount_of_con_el_402 ] == vars.a_row_402[vars.amount_of_con_el_402 ] and 404 or 405\nend",
        "go_to": [
          "go_to_402"
        ]
      },
      {
        "var_set": [
          "a_contact_avail_402_2",
          0
        ],
        "var_equal": [
          "a_contact_avail_402_2",
          1
        ],
        "id": 402,
        "text": "Подключить правый контакт",
        "lua_do": "function lua_do()\nvars.amount_of_con_el_402 = (vars.amount_of_con_el_402 or 0) <plus> 1\nvars.actual_con_order_402 = vars.actual_con_order_402 or {}\nvars.actual_con_order_402[vars.amount_of_con_el_402 ] = 2\nvars.go_to_402 = vars.actual_con_order_402[vars.amount_of_con_el_402 ] == vars.a_row_402[vars.amount_of_con_el_402 ] and 404 or 405\nend",
        "go_to": [
          "go_to_402"
        ]
      },
      {
        "var_set": [
          "a_contact_avail_402_3",
          0
        ],
        "var_equal": [
          "a_contact_avail_402_3",
          1
        ],
        "id": 402,
        "text": "Подключить нижний контакт",
        "lua_do": "function lua_do()\nvars.amount_of_con_el_402 = (vars.amount_of_con_el_402 or 0) <plus> 1\nvars.actual_con_order_402 = vars.actual_con_order_402 or {}\nvars.actual_con_order_402[vars.amount_of_con_el_402 ] = 3\nvars.go_to_402 = vars.actual_con_order_402[vars.amount_of_con_el_402 ] == vars.a_row_402[vars.amount_of_con_el_402 ] and 404 or 405\nend",
        "go_to": [
          "go_to_402"
        ]
      },
      {
        "var_set": [
          "a_contact_avail_402_4",
          0
        ],
        "var_equal": [
          "a_contact_avail_402_4",
          1
        ],
        "id": 402,
        "text": "Подключить левый контакт",
        "lua_do": "function lua_do()\nvars.amount_of_con_el_402 = (vars.amount_of_con_el_402 or 0) <plus> 1\nvars.actual_con_order_402 = vars.actual_con_order_402 or {}\nvars.actual_con_order_402[vars.amount_of_con_el_402 ] = 4\nvars.go_to_402 = vars.actual_con_order_402[vars.amount_of_con_el_402 ] == vars.a_row_402[vars.amount_of_con_el_402 ] and 404 or 405\nend",
        "go_to": [
          "go_to_402"
        ]
      },
      {
        "id": 406,
        "text": "Дальше",
        "lua_if": "function lua_if()\nlocal a = 0\nvars.actual_con_order_402 = vars.actual_con_order_402 or {}\n  for i = 1, #vars.a_row_402 do\n  a = (vars.a_row_402[i] == vars.actual_con_order_402[i] and 1 or 0) <plus> a\n  end\nreturn a == #vars.a_row_402\nend"
      }
    ]
  },
  {
    "id": 403,
    "text": "   Не выпуская из рук цветную панель, Орнас наклонился к ящику с инструментами и положил на  его крышку микрочип, взяв вместо него другой. ",
    "answers": [
      {
        "id": 400,
        "text": "Новый ответ. введите текст",
        "run": [
          400
        ]
      }
    ]
  },
  {
    "id": 404,
    "text": "   ",
    "answers": [
      {
        "id": 402,
        "text": "Новый ответ. введите текст",
        "run": [
          402
        ]
      },
      {
        "id": 404,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\n  vars.b_sup_404 = vars.b_sup_404  or 0\n  local a = vars.b_sup_404\n  a = a <plus> 1\n  a = a < 4 and a or 1\n  vars.b_text_404 = (a == 1 and \"Джедай с помощью микроманипулятора осторожно соединил контакты на чипе и цветной плате. Никаких видимых изменений не произошло.\") or (a == 2 and \"Юноша подключил миниатюрные провода, обеспечивающие соединение чипа с панелью микросхем, и недоверчиво осмотрел результат. Не обнаружив каких-то изменений, он пришёл к выводу, что пока всё делает верно.\") or (a == 3 and \"Ловко орудуя манипулятором, Орнас подключил контакты чипа к цветной панели, затаив дыхание от волнения. Убедившись через несколько секунд в успешности проделанной операции, он облегчённо выдохнул.\")\n  vars.b_sup_404 = a\nend"
      },
      {
        "id": 404,
        "text": " ",
        "var_show": [
          "b_text_404"
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 405,
    "text": "   Когда Орнас с помощью манипулятора подключил один из миниатюрных проводков в месте контакта, он услышал негромкий треск, после которого чип начал плавиться прямо на глазах. Еле уловимый запах гари подтвердил опасения джедая: он перепутал порядок соединения, и элемент просто сгорел от возникшего скачка напряжения.\n   Надежды восстановить испорченный чип у юноши не было. Он раздосадованно отсоединил все подключенные ранее контакты и со злостью выбросил остатки микросхемы в один из завалов хлама в углу помещения. Немного успокоившись, он ",
    "answers": [
      {
        "var_show": [
          "c_text_col",
          "панель на пол возле системного блока и стал обдумывать свои дальнейшие действия."
        ],
        "lua_if": "function lua_if()\n  for i = 1,9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n   vars.c_text_col = vars.table_of_colors_400[i][2]\n   end\n  end\nreturn true\nend",
        "id": 405,
        "text": "положил",
        "merge": true
      },
      {
        "id": 405,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nvars.a__test1 = vars.actual_con_order_402\nvars.a__test2 = vars.amount_of_con_el_402\nvars.actual_con_order_402 = nil\nvars.amount_of_con_el_402 = nil\nvars.a_contact_avail_402_1 = nil\nvars.a_contact_avail_402_2 = nil\nvars.a_contact_avail_402_3 = nil\nvars.a_contact_avail_402_4 = nil\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 9 then\n    vars[\"a_stat_of_chip_\" .. i][3] = 7\n    end\n  end\n  for i = 1, 9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n    vars[\"position_of_element_\" .. i] = 10\n    end\n  end\n  vars.element_in_arm = 0\n  vars.a_row_402 = nil\n  vars.a__test = nil\n  vars.a_text_402 = nil\nend",
        "calculate": true
      },
      {
        "id": 399,
        "text": "Перейти к спиральной плате из шлема",
        "need": [
          394
        ]
      },
      {
        "id": 377,
        "text": "Перейти к системному блоку"
      },
      {
        "id": 391,
        "text": "Перейти к корпусу дроида",
        "var_not": [
          "style",
          4
        ]
      }
    ]
  },
  {
    "id": 406,
    "text": "   Закончив возиться с чипом, юноша отложил в сторону миниатюрный инструмент и выпрямился во весь рост. Он ",
    "answers": [
      {
        "var_show": [
          "c_text_col",
          "панель на пол возле системного блока и стал обдумывать свои дальнейшие действия."
        ],
        "lua_if": "function lua_if()\nreturn true\nend",
        "id": 405,
        "text": "положил",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "calculate": true,
        "id": 406,
        "text": "положил",
        "lua_do": "function lua_do()\n  for i = 1,9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n    vars.c_text_col = vars.table_of_colors_400[i][2]\n    vars.a__test = i\n   end\n  end\nend",
        "merge": false
      },
      {
        "id": 405,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nvars.a__test1 = vars.actual_con_order_402\nvars.a__test2 = vars.amount_of_con_el_402\nvars.actual_con_order_402 = nil -- no needed anymore\nvars.amount_of_con_el_402 = nil\nvars.a_contact_avail_402_1 = nil\nvars.a_contact_avail_402_2 = nil\nvars.a_contact_avail_402_3 = nil\nvars.a_contact_avail_402_4 = nil\nlocal a = 0\n  for i =1,7 do\n    if vars[\"a_stat_of_chip_\" .. i][3] == 9 then\n    vars[\"a_stat_of_chip_\" .. i][3] = 8 -- 8 means successfull connection of chip on plate\n    a = i -- remember the chip id\n    end\n  end\n  for i = 1, 9 do\n    if vars[\"position_of_element_\" .. i] == 0 then\n    vars[\"position_of_element_\" .. i] = 10 -- 10 means the plate is located on floor\n    vars[\"a_stat_of_plate_\" .. i] = {1,a} -- [1] means that plate isn't free, 'a' - is id of chip installed\n    end\n  end\n  vars.element_in_arm = 0 -- no more plate held\n  vars.a_row_402 = nil -- no needed anymore\n  vars.a__test = nil \n  vars.a_text_402 = \"\" \nend",
        "calculate": true
      },
      {
        "id": 399,
        "text": "Перейти к спиральной плате из шлема",
        "need": [
          394
        ]
      },
      {
        "id": 377,
        "text": "Перейти к системному блоку"
      },
      {
        "id": 391,
        "text": "Перейти к корпусу дроида",
        "var_not": [
          "style",
          4
        ]
      }
    ]
  },
  {
    "id": 407,
    "text": "   Юноша взял в руки цилиндр системного блока и внимательно проверил, что все цветные панели микросхем внутри него закреплены должным образом. После этого он осторожно поместил всю конструкцию в металлический корпус дроида, закрутил фиксирующие болты и попробовал пошатать его, чтобы оценить надёжность сборки. Наконец, установил сверху дискообразную металлическую голову астромеха, которая заняла своё место с негромкими щелчками двух боковых кнопок.",
    "answers": [
      {
        "id": 407,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n  vars.a__test = \"\"\n  local num_of_problems = 0\n  local a = 0\n  for i = 1, 9 do\n    a = vars[\"position_of_element_\" .. i] == i and a <plus> 1 or a\n  end\n  vars.a__test = \"num of plates on correct places = \" .. a .. \"<s>\n\"\n  local ok_plates_order = a == 9 and 1 or 0 -- check the plates order\n  vars.a__test = vars.a__test .. \"stat of plates on places = \" .. ok_plates_order .. \"<s>\n\"\n  vars.a_stat_of_plate_8 = vars.a_stat_of_plate_8 or {0,0}\n  local ok_correct_chip_placed = vars.a_stat_of_plate_8[2] == 4 and 1 or 0 -- check the stat of required chip\n  local b = 0\n  for i = 1,9 do\n    vars[\"a_stat_of_plate_\" .. i] = vars[\"a_stat_of_plate_\" .. i] or {0,0}\n    b = (vars[\"a_stat_of_plate_\" .. i][1] == 1 and i ~=8) and b<plus>1 or b\n  end\n  vars.a__test = vars.a__test .. \"num of ad.chips = \" .. b .. \"<s>\n\"\n  local ok_additional_chip_placed = b > 0 and 1 or 0 -- check the stat of additional chip\n  vars.a__test = vars.a__test .. \"stat of ad.chips = \" .. ok_additional_chip_placed .. \"<s>\n\"\n  vars.fix_power_out = vars.fix_power_out or 0\n  local ok_fix = vars.fix_power_out == 1 and 0 or 1\n  vars.a__test = vars.a__test .. \"stat of fix = \" .. ok_fix .. \"<s>\n\"\n  vars[\"366_power_out\"] = vars[\"366_power_out\"] or 0\n  local ok_power = vars[\"366_power_out\"] == 1 and 0 or 1 -- check the accumulator \n  vars.a__test = vars.a__test .. \"stat of power = \" .. ok_power .. \"<s>\n\"\n  vars.compressor_hand_ruler = vars.compressor_hand_ruler or 0\n  local ok_compressor_automode = vars.compressor_hand_ruler == 1 and 0 or 1 -- check the mode of compressor\n  vars.a__test = vars.a__test .. \"stat of compressor mode = \" .. ok_compressor_automode .. \"<s>\n\"\n  vars[\"371_cycle\"] = vars[\"371_cycle\"] or 0\n  local ok_num_of_cycles = vars[\"371_cycle\"] < 3 and 0 or 1 -- check the mechanics work\n  vars.a__test = vars.a__test .. \"stat cycles counter = \" .. ok_num_of_cycles .. \"<s>\n\"\n  num_of_noproblems = ok_plates_order <plus> ok_fix <plus> ok_power <plus> ok_compressor_automode <plus> ok_num_of_cycles\n  vars.a__test = vars.a__test .. \"summ num of noproblems = \" .. num_of_noproblems .. \"<s>\n\"\n  vars.droid_works = num_of_noproblems == 5 and 1 or 0\n  vars.droid_has_required_chip = ok_correct_chip_placed == 1 and 1 or 0\n  vars.droid_has_ad_chip = ok_additional_chip_placed == 1 and 1 or 0\nif authorCheat == 1 then\ndroid_works = 1\ndroid_has_required_chip = 1\nend\nend",
        "calculate": true
      },
      {
        "id": 408,
        "text": "Разобрать дроида",
        "lua_if": "function lua_if()\n  return not (vars.droid_works == 1 and vars.droid_has_required_chip == 1) \nend"
      },
      {
        "id": 407,
        "text": "\n   Всего на секунду Орнасу показалось, что он услышал негромкий шум включения дроида, но затем в комнате вновь воцарилась тишина. Юноша попытался вспомнить, что он мог перепутать при выполнении инструкций астромеханика.",
        "lua_if": "function lua_if()\n  return vars.droid_works == 0\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\narraysTL = arraysTL or {}\narraysTL.TL = arraysTL.TL or 0\nlocal text = \"\"\nif arraysTL.TL == 10 then\ntext = \"<s>\n   Через несколько секунд Орнас услышал шум включения дроида. TL-3 провернул голову на триста шестьдесят градусов, вытянул из корпуса несколько манипуляторов и тут же спрятал их назад, затем объехал вокргу джедая и вернулся на исходное место у зарядной станции. После этой небольшой проверки юноша услышал голос из наушника.<s>\n– Управляющий чип! – пищал дроид то ли в возмущении, то ли в отчаянии. – Он всё ещё действует! Ты не справился...\" \nelse\ntext = \"<s>\n   Через несколько секунд Орнас услышал шум включения дроида. TL-3 провернул голову на триста шестьдесят градусов, вытянул из корпуса несколько манипуляторов и тут же спрятал их назад, затем объехал вокргу джедая и вернулся на исходное место у зарядной станции. После этой небольшой проверки он уже бесшумно активировал голопроектор и возникшая в воздухе полупрозрачная фигура мандалорца строго произнесла: <s><s>\"Ты не справился с заданием<s><s>\".<s>\n   Судя по тому, что в целом дроид отлично функционировал, юноша догадался, что дело в контролирующем чипе из мандалорского шлема.\"\nend\nreturn text\nend",
        "id": 407,
        "text": "\n   Через несколько секунд Орнас услышал шум включения дроида. TL-3 провернул голову на триста шестьдесят градусов, вытянул из корпуса несколько манипуляторов и тут же спрятал их назад, затем объехал вокргу джедая и вернулся на исходное место у зарядной станции. После этой небольшой проверки он уже бесшумно активировал голопроектор и возникшая в воздухе полупрозрачная фигура мандалорца строго произнесла: \"Ты не справился с заданием\".\n   Судя по тому, что в целом дроид отлично функционировал, юноша догадался, что дело в контролирующем чипе из мандалорского шлема.",
        "lua_if": "function lua_if()\n  return (vars.droid_works == 1 and vars.droid_has_required_chip == 0) \nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n  return (vars.droid_works == 1 and vars.droid_has_required_chip == 1) \nend",
        "id": 407,
        "text": "\n     Через несколько секунд Орнас услышал шум включения дроида. TL-3 провернул голову на триста шестьдесят градусов, вытянул из корпуса несколько манипуляторов и тут же спрятал их назад, затем объехал вокруг джедая и вернулся на исходное место у зарядной станции. После этой небольшой проверки он издал серию гудков и писков, которую юноша смог трактовать как высказывание благодарности.",
        "lua_text": "function lua_text()\narraysTL = arraysTL or {}\narraysTL.TL = arraysTL.TL or 0\nlocal text = \"\"\nif arraysTL.TL == 10 then\ntext = \"<s>\n     Через несколько секунд Орнас услышал шум включения дроида. TL-3 провернул голову на триста шестьдесят градусов, вытянул из корпуса несколько манипуляторов и тут же спрятал их назад, затем объехал вокруг джедая и вернулся на исходное место у зарядной станции. После этой небольшой проверки он издал непереводимую микронаушником серию гудков и писков, которую юноша смог трактовать как высказывание благодарности.\"\nelse\ntext = \"<s>\n     Через несколько секунд Орнас услышал шум включения дроида. TL-3 провернул голову на триста шестьдесят градусов, вытянул из корпуса несколько манипуляторов и тут же спрятал их назад, затем объехал вокруг джедая и вернулся на исходное место у зарядной станции. После этой небольшой проверки он издал серию гудков и писков, которую юноша смог трактовать как высказывание благодарности.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n  return (vars.droid_works == 1 and vars.droid_has_required_chip == 1 and  vars.droid_has_ad_chip == 1) \nend",
        "id": 407,
        "text": " Ещё через несколько секунд астромеханик проговорил ещё что-то, но на этот раз в его интонации ощущалось удивление.",
        "lua_text": "function lua_text()\narraysTL = arraysTL or {}\narraysTL.TL = arraysTL.TL or 0\n\ng.achievements = g.achievements or {}\ng.achievements.masterTech = g.achievements.masterTech or 0\n\ng.achievements.alarm = g.achievements.masterTech  == 0 and 3 or 0\ng.achievements.masterTech = 1\n\n\nlocal text = \"\"\nif arraysTL.TL == 10 then\ntext = \" Ещё через несколько секунд джедай услышал голос из переводчика.<s>\n– А вот это очень необычно, – чувствовалось, что TL-3 не на шутку озадачен. – Очень. Не знаю, что ты там сделал, но попробую понять.\"\nelse\ntext = \" Ещё через несколько секунд астромеханик проговорил ещё что-то, но на этот раз в его интонации ощущалось удивление.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 409,
        "text": "Дальше",
        "lua_if": "function lua_if()\n  return (vars.droid_works == 1 and vars.droid_has_required_chip == 1) \nend",
        "lua_do": "function lua_do()\n  vars.droid_leave_the_room = 1\nTL3 = TL3 or {}\nTL3.repairProgress = 2\nend"
      },
      {
        "id": 201,
        "text": "Отойти от дроида",
        "lua_if": "function lua_if()\n  return not (vars.droid_works == 1 and vars.droid_has_required_chip == 1) \nend"
      }
    ]
  },
  {
    "id": 408,
    "text": "   Джедай вновь вооружился инструментами и повторил процедуру разборки дроида. Уже через несколько минут перед ним располагался опустошённый корпус и извлечённый из него цилиндрический каркас с цветными панелями микросхем внутри. Здесь же, недалеко от металлического ящика с инструментами,",
    "answers": [
      {
        "id": 408,
        "text": " лежала на полу спиральная плата, извлечённая из мандалорского шлема.",
        "need": 394,
        "merge": true
      },
      {
        "text": " лежал на полу мандалорский шлем.",
        "id": 408,
        "calculate": false,
        "need": -394,
        "merge": true
      },
      {
        "id": 391,
        "text": "Перейти к корпусу дроида",
        "var_not": [
          "style",
          4
        ]
      },
      {
        "id": 377,
        "text": "Перейти к системному блоку"
      },
      {
        "id": 399,
        "text": "Перейти к спиральной плате из шлема",
        "need": [
          394
        ]
      },
      {
        "id": 378,
        "text": "Перейти к мандалорскому шлему",
        "need": -394
      }
    ]
  },
  {
    "id": 409,
    "text": "   ",
    "answers": [
      {
        "var_show": [
          "c_text_409"
        ],
        "lua_text": "function lua_text()\nlocal text = \"\"\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nif arraysTL.TL ~= 10 then\ntext = \"TL-3 направил на Орнаса один из своих датчиков и воспроизвёл очередной набор трелей и гудков, которые юноша никак не мог интерпретировать. После этого дроид ловко описал круг вокруг джедая, подкатился к двери, ведущей вглубь храма, и скрылся за ней.\"\nTL3 = TL3 or {}\nTL3.position = \"near the ship\"\nelse\ntext = \"TL-3 направил на Орнаса один из своих датчиков, и микронаушник юноши вновь затараторил неестественным механическим голосом.<s>\n– Чувствую себя прекрасно, – буквально пропел он. – Теперь можем заняться и твоими делами. Судя по данным, предоставленным нам для выполнения задания, ничего интересного на этом этаже нет. Где-то здесь должен быть подъём на верхние уровни. Встретимся у лестницы, когда полностью закончишь свои дела здесь.<s>\n   С этими словами он ловко объехал джедая, подкатился к двери, ведущей вглубь храма, и скрылся за ней.\"\nTL3.position = \"at the stairs\"\nTL3.readyForComment = 1\nTL3.delayedDestroy = dess.isUpstairs ==1 and 1 or 0\n\ng.achievements = g.achievements or {}\ng.achievements.diplomat1 = g.achievements.diplomat1 or 0\n\ng.achievements.alarm = g.achievements.diplomat1 == 0 and 9 or 0\ng.achievements.diplomat1  = 1\n\nend\nreturn text\nend",
        "id": 409,
        "text": "Генерация текста",
        "merge": true
      },
      {
        "id": 201,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndroids157destroyed = droids157destroyed or 0\n\nrepair208 = 1\nboy157 = 1\n\ndroids157disabled = droids157destroyed == 1 and 0 or 1\nend"
      },
      {
        "id": 409,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs == 1 and 0 or 1\narraysTL = arraysTL or {}\narraysTL.TL = 10\nend",
        "text": "Тест: успех",
        "need": 1000,
        "merge": false
      }
    ]
  },
  {
    "id": 410,
    "text": "   Юноша подошёл к дроиду, замершему на месте после неудачной попытки его ремонта.",
    "answers": [
      {
        "id": 407,
        "text": "Новый ответ. введите текст",
        "run": [
          407
        ]
      }
    ]
  },
  {
    "id": 411,
    "text": "   Джедай присел возле небольшого ящика и внимательно осмотрел его со всех сторон, но не нашёл ничего необычного. Открыл его, осторожно переложил на пол всё, что было внутри, и изучил внутренние стенки. Как он и ожидал, дно ящика оказалось съёмным, а под ним обнаружилось ещё одно отделение, в котором лежал странный продолговатый металический предмет. С одной стороны он оканчивался небольшим плоским фрагментом неправильной формы, а на утолщённой рукояти с другой ",
    "answers": [
      {
        "id": 294,
        "text": "ран",
        "run": [
          294
        ],
        "lua_if": "function lua_if()\nreturn not (vars.keyform_in_location4)\nend"
      },
      {
        "super_calculate": false,
        "id": 411,
        "calculate": true,
        "lua_do": "function lua_do()\nkeys = keys or {}\nkey1form = key1form or 1 -- для центра\nkey2form = key2form or 2 -- для среднего\nkey3form = key3form or 3 -- для внешнего\nkeys.stillRequired = keys.stillRequired or {key1form, key2form, key3form}\nif not keys.notRequired then\nkeys.notRequired = {}\nlocal a = {1,2,3,4,5,6}\n    for i = 1, #a do\n        if a[i] ~= key1form and a[i] ~= key2form and a[i] ~= key3form then\n            table.insert(keys.notRequired, i)\n        end\n    end\nend\n--keyform_in_location1 - keys.col1\n--keyform_in_location2 - keys.col2\n--keyform_in_location3 - keys.safe\n--keyform_in_location4 - keys.TL\n--keyform_in_location5 - keys.dess\n--keyform_in_location6 - keys.cage\nif not keys.TL then\nif keys.stillRequired[1] then -- если ещё нужно найти\n    local a = math.random(#keys.stillRequired)\n    keyform_in_location4 = keys.stillRequired[a] -- случайный из нужных\n    table.remove(keys.stillRequired,a) -- убрать из списка нужных\n  else -- все нужные есть\n    local b = math.random(#keys.notRequired)\n    keyform_in_location4 = keys.notRequired[b] -- случайный из ненужных\n    table.remove(keys.notRequired,b) -- убрать из списка ненужных\n  end\nkeys.TLFail = 0\nkeys.TL = 1\nend\n\n\nend",
        "text": "Новый механизм размещения ключей"
      },
      {
        "calculate": true,
        "lua_do": "function lua_do()\n\ng.achievements = g.achievements or {}\ng.achievements.diplomat2 = g.achievements.diplomat2 or 0\n\ng.achievements.alarm = g.achievements.diplomat2 == 0 and 10 or 0\ng.achievements.diplomat2  = 1\n\nvars.form_of_keys = {}\nvars.form_of_keys[1] = \"была нарисована звезда с десятью лучами.\"\nvars.form_of_keys[2] = \"был нарисован полумесяц.\"\nvars.form_of_keys[3] = \"был нарисован треугольник.\"\nvars.form_of_keys[4] = \"был нарисован квадрат.\"\nvars.form_of_keys[5] = \"был нарисован правильный пятиугольник.\"\nvars.form_of_keys[6] = \"был нарисован шестиугольник.\"\nvars.c_text_411 = \"\"\n  for i = 1, 6 do\n    vars.c_text_411 = vars.keyform_in_location4 == i and vars.form_of_keys[i] or vars.c_text_411\n  end\nend",
        "text": "try",
        "id": 411,
        "merge": false
      },
      {
        "id": 295,
        "text": "стороны",
        "var_show": [
          "c_text_411"
        ],
        "merge": true
      },
      {
        "id": 412,
        "text": "Оставить ключ на месте",
        "instant": false
      },
      {
        "id": 412,
        "instant": true,
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.lastChanceKey = location1.lastChanceKey or 5\nlocation1.lastChanceKey = location1.lastChanceKey - 1\n  for i = 1, 6 do\n    vars[\"have_key_form\" .. i] = vars.keyform_in_location4 == i and 1 or vars[\"have_key_form\" .. i]\n  end\n  vars.key_on_position_4_avail = 0\nend",
        "text": "Взять ключ"
      }
    ]
  },
  {
    "id": 412,
    "text": "   Юноша вынул необычный ключ из ящика, осмотрел его со всех сторон ",
    "answers": [
      {
        "id": 201,
        "text": "Дальше"
      },
      {
        "var_show": [
          "c_text_412"
        ],
        "lua_if": "function lua_if()\n  if vars.key_on_position_4_avail == 0 then\n  vars.c_text_412 = \"закрепил на своём поясе\"\n  local a = 0\n    for i = 1, 6 do\n      a = vars[\"key_on_position_\" .. i .. \"_avail\"] == 0 and a<plus>1 or a\n    end\n  vars.c_text_412 = (a == 0 and vars.c_text_412) or (a == 1 and vars.c_text_412 .. \" рядом с другим, найденным ранее\") or (a > 1 and vars.c_text_412 .. \" рядом с другими, найденными ранее\") \n  else\n  vars.c_text_412 = \"положил обратно в потайной отдел\"\n  end\n   vars.c_text_412 =  vars.c_text_412 .. \". После этого он вернул на место всё содержимое ящика, закрыл его и выпрямился.\" \nreturn true\nend",
        "id": 412,
        "text": "и",
        "merge": true
      }
    ]
  },
  {
    "id": 413,
    "text": "– Разумеется, – тут же ответил TL-3. – Мне нужно, чтобы ты ещё раз разобрал меня и произвёл кое-какие манипуляции с моими схемами. Хорошо, что ты сам это предложил, мне было бы очень неудобно просить.",
    "answers": [
      {
        "id": 328,
        "text": "Новый ответ. введите текст",
        "run": [
          328
        ]
      }
    ]
  },
  {
    "id": 414,
    "text": "– Так как ты своими силами справился с основным ремонтом, то разобрать меня ещё раз тебе не составит труда. Дальше тебе нужно будет извлечь из блока управления зелёную панель, она должна быть где-то снизу. <s>r\n   Потом нужно достать из шлема управляющую схему, она находится внутри, в верхней части, и довольно трудно выкручивается против часовой стрелки. Сама схема выполнена в виде спирали, на четвёртом витке должен быть крупный чип в виде креста, с трёх сторон соединённый со схемой. Если смотреть на чип так, чтобы свободный конец был направлен вверх, то последовательность разъединений контактов должна быть следующая: сначала центральный, затем левый, потом правый. После этого нужно разместить чип на той самой зелёной панели из моего управляющего блока, там только одно место, куда он подойдёт, последовательность подключения контактов обратная разъединению. Затем нужно вновь собрать блок управления, поместить его в корпус, закрутить винты и наконец вернуть на место голову. Звучит довольно просто, да?<s>r\n   Орнас только глубоко вдохнул, представляя предстоящую процедуру и надеясь ничего не перепутать.",
    "answers": [
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 415,
    "text": "   Орнас выразил свою готовность начать ремонт, но предложил провести его в том зале, в котором остался ящик с инструментами. TL-3 не стал возражать, они вместе проследовали в сторону выхода из храма и вновь оказались в тёмной угловой комнатке.",
    "answers": [
      {
        "id": 408,
        "text": "Разобрать дроида",
        "lua_do": "function lua_do()\nvars.fix_power_out = 0\nvars[\"366_power_out\"] = 0\nvars.compressor_hand_ruler = 0\nvars[\"371_cycle\"] = 3\nTL3 = TL3 or {}\nTL3.repairProgress = 1\nend"
      }
    ]
  },
  {
    "id": 416,
    "text": "– Кто ты такая? – задал вопрос юноша. – Можешь рассказать о себе что-нибудь?",
    "answers": [
      {
        "var_show": [
          "b_text_416"
        ],
        "lua_if": "function lua_if()\n -- if #vars.b_counter_243 == 1 then\n --   vars.b_text_416 = \"Нейтральный ответ.\"\n -- else\n    vars.b_text_416 = vars.a_mood_1_block == 1 and \"Я уже называла тебе своё имя, что ещё ты хочешь услышать? – Девушка изучающе посмотрела прямо в глаза Орнаса. – Мне нечего рассказывать о себе, я ничего не помню. Почти ничего. И ты, конечно, тоже ничего обо мне не знаешь?<s>\n   Юноша честно признался, что встретил её случайно, и коротко рассказал, как он сам оказался здесь. Десвиар лишь развела руками и пробубнила что-то невнятное себе под нос.\" or (vars.a_mood_1_block == 2 and \"Я не помню, – всхлипнула девушка. – Почти ничего не помню... Моё имя – Десс. Разве я тебе этого ещё не говорила?.. Всё так сложно, я даже не знаю, что сказать... А ты пришёл за мной, спасти меня?<s>\n   Юноша честно признался, что встретил её случайно, и кратко объяснил, как он сам оказался здесь. Но собеседница, казалось, совсем не слушала его. Её взгляд беспорядочно блуждал по комнате, лишь ненадолго задерживаясь то на опустевшей капсуле, то на джедае.\") or (vars.a_mood_1_block == 3 and \"Я Десвиар, ты прослушал, что ли?! – взорвалась девушка. – Но лучше называй меня Десс. Я бы с удовольствием поболтала с тобой о себе, Орнас, только говорить придётся в основном тебе самому, потому что я ничего не могу вспомнить. Раз ты прилетел спасти меня, значит что-то знаешь обо мне, и сейчас самое время это рассказать.<s>\n– На самом деле, я нашёл тебя случайно и не знаю о тебе ничего, – джедай ожидал, что это известие растроит его новую знакомую, но она, напротив, заметно приободрилась.\")\n  --end\n   vars.c_text_243  = (vars.style == 3 and #vars.b_counter_243 ~= 1 and ((vars.a_mood_1_block == 1 and \" Юноше не обязательно было иметь огромный опыт в переговорах, чтобы ощущать обреченность в словах и поведении Десвиар.\") or (vars.a_mood_1_block == 2 and \" Всё в поведении Десвиар говорило о растерянности, терзающей её мысли, и это не могло скрыться от опытного взгляда юноши.\") or (vars.a_mood_1_block == 3 and \" Юноше казалось, что Десвиар будто затягивает в пучину раздражённости, в которой она уже не сможет спокойно реагировать на любые его действия.\")) or \"\")\n  return true\nend\n",
        "id": 240,
        "text": "\n–",
        "merge": true
      },
      {
        "id": 243,
        "text": "Новый ответ. введите текст",
        "run": [
          243
        ]
      }
    ]
  },
  {
    "id": 417,
    "text": "   ",
    "answers": [
      {
        "id": 417,
        "text": "Молчать",
        "need": 1000,
        "comment": true
      },
      {
        "var_not": [
          "global current_id",
          417
        ],
        "lua_text": "function lua_text()\na_reaction_417 = (vars.a_mood_1_block == 1 and \"Жаль, что мне это никак не поможет.<s>\n   Девушка отвернулась от джедая и стала разглядывать капсулу. Внимательно осмотрев её со всех сторон и, видимо, не отыскав того, что искала, Десвиар тихо выругалась и опустилась на пол, будто специально не обращая внимания на Орнаса.\") or (vars.a_mood_1_block == 2 and \"Что же мне теперь делать?<s>\n   Девушка растерянно огляделась по сторонам, будто в поиске ответа на заданный вопрос, и, не отыскав ничего, в задумчивости подошла к капсуле. Она уставилась в пустой экран потухшим взглядом и как будто забыла про Орнаса.\") or (vars.a_mood_1_block == 3 and \"Как же меня это всё достало! Ненавижу этот склеп, ненавижу эту склянку, ненавижу тебя... Какого чёрта ты пялишься на меня? Ты вообще собираешься с этим хоть что-нибудь делать?<s>\n   Она несколько раз с яростью ударила рукой капсулу и пробормотала какие-то ругательства на незнакомом Орнасу языке.\")\nreturn \"<s>\n– Ты узнал всё, что хотел? – неожиданно громко спросила Десс и вздрогнула. – \" .. a_reaction_417\nend",
        "id": 417,
        "text": "Новый ответ. введите текст",
        "merge": true
      },
      {
        "calculate": true,
        "id": 417,
        "text": "tab_set",
        "lua_do": "function lua_do()\n-- финальный штрих и главный выбор первого блока\nvars.a_answers_tab = {}\n  if vars.a_mood_1_block == 1 then\n -- Подавленность (всё плохо):\n    vars.a_answers_tab[1] = -1\n    vars.a_answers_tab[2] = 5\n    vars.a_answers_tab[3] = 3\n    vars.a_answers_tab[4] = 3\n    vars.a_answers_tab[5] = 1\n    vars.a_answers_tab[6] = 1\n    vars.a_answers_tab[7] = -5\n  elseif vars.a_mood_1_block == 2 then\n -- Растерянность (что происходит?):\n    vars.a_answers_tab[1] = -3\n    vars.a_answers_tab[2] = 1\n    vars.a_answers_tab[3] = 3\n    vars.a_answers_tab[4] = 5\n    vars.a_answers_tab[5] = 1\n    vars.a_answers_tab[6] = 3\n    vars.a_answers_tab[7] = -5\n  elseif vars.a_mood_1_block == 3 then\n -- Раздражённость (всё бесит):\n    vars.a_answers_tab[1] = 3\n    vars.a_answers_tab[2] = -1\n    vars.a_answers_tab[3] = -1\n    vars.a_answers_tab[4] = 1\n    vars.a_answers_tab[5] = -5\n    vars.a_answers_tab[6] = -5\n    vars.a_answers_tab[7] = -5\n  end\nend",
        "merge": false
      },
      {
        "var_show": [
          "b_text_for_reaction"
        ],
        "lua_do": "function lua_do()\nend",
        "text": "\n",
        "lua_text": "function lua_text()\nreturn vars.b_text_for_reaction\nend",
        "var_equal": [
          "global current_id",
          417
        ],
        "lua_if": "function lua_if()\n  if vars.a_mood_1_block == 1 then\nvars.b_text_for_reaction = \"Орнас молча смотрел на девушку, не пытаясь привлечь к себе её внимание. С каждой секундой тишина становилась всё тягостнее. Через несколько минут Десвиар поднялась с пола и подошла почти вплотную к юноше, угрожающе смотря прямо ему в глаза.<s>\n– Ты молчишь, значит тебе совсем нечего сказать? – голос Десс был спокойным и тихим. – Тебе, конечно, абсолютно наплевать на девушку, оказавшуюся в сложной ситуации, ведь наверняка именно этому джедаев и учат в академии. Но мне нужна помощь. Ты мог бы ненадолго отвлечься от спасения галактики и помочь мне?\"\n  elseif vars.a_mood_1_block == 2 then\nvars.b_text_for_reaction = \"Орнас молча смотрел на растерянную девушку, не пытаясь привлечь к себе её внимание. С каждой секундой тишина становилась всё тягостнее. Через несколько минут Десвиар начала дрожать всем телом, а по её лицу потекли слёзы.<s>\n– Ты так и будешь молчать?! – наконец вскрикнула она, резким движением повернувшись к джедаю. – Не успокоишь меня, не предложишь помощь? Зачем вообще ты тогда издеваешься надо мной? Я не могу тебе доверять, но всё равно унижаюсь, моля о помощи. Кем бы ты ни был, помоги мне, прошу!\"\n  elseif vars.a_mood_1_block == 3 then\nvars.b_text_for_reaction = \"Орнас решил не провоцировать агрессию девушки на себя и молча наблюдал за её эмоциональным монологом. После нескольких продолжительных и образных проклятий в адрес всего, что попадалось ей на глаза, Десвиар вновь с силой ударила рукой капсулу, обессиленно опустилась на пол и затихла, заслонив лицо руками.<s>\n– А знаешь, Орнас, ты вроде неплохой парень, – как ни в чём не бывало обратилась она к юноше через некоторое время, глядя ему прямо в глаза. От бушевавших совсем недавно эмоций в её взгляде не осталось и следа.– Не обращай внимания на то, что я немного нервничаю, просто я оказалась в отвратительной ситуации и не знаю, что мне делать. Но ведь ты мне поможешь, правда?\"\n  end\nreturn true\nend",
        "calculate": false,
        "id": 417,
        "merge": true
      },
      {
        "id": 417,
        "text": "1. Подавленность (всё плохо):\n• молчать -1\n• утешить <plus>5\n• приободрить <plus>3\n• обещать помощь <plus>3\n• успокоить <plus>1\n• дать совет <plus>1\n• высказать недоверие - 5\n\n2. Растерянность (что происходит?):\n• молчать -3\n• утешить <plus>1\n• приободрить <plus>3\n• обещать помощь <plus>5\n• успокоить <plus>1\n• дать совет <plus>3\n• высказать недоверие - 5\n\n3. Раздражённость (всё бесит):\n• молчать <plus>3\n• утешить -1\n• приободрить -1\n• обещать помощь <plus>1\n• успокоить -5\n• дать совет -5\n• высказать недоверие - 5",
        "need": 1000,
        "calculate": false
      },
      {
        "id": 418,
        "text": "Утешить",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[2]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 419,
        "text": "Приободрить",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[3]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 420,
        "text": "Пообещать помощь",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[4]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 421,
        "text": "Успокоить",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[5]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 422,
        "text": "Дать совет",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[6]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 423,
        "text": "Высказать недоверие",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[7]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 417,
        "text": "Молчать",
        "lua_do": "function lua_do()\nvars.a_tia_trust = vars.a_tia_trust <plus> vars.a_answers_tab[1]\nend",
        "var_not": [
          "global current_id",
          417
        ]
      },
      {
        "id": 424,
        "text": "Молча кивнуть",
        "var_equal": [
          "global current_id",
          417
        ]
      },
      {
        "id": 243,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nvars[\"1_show\"] = vars.a_tia_trust\nend"
      }
    ]
  },
  {
    "id": 418,
    "text": "   ",
    "answers": [
      {
        "id": 417,
        "text": "Утешить",
        "need": 1000,
        "comment": true
      },
      {
        "var_show": [
          "b_text_for_reaction"
        ],
        "lua_if": "function lua_if()\n  if vars.a_mood_1_block == 1 then\nvars.b_text_for_reaction = \"Орнас подошёл ближе к сидящей прямо на полу девушке, сел рядом с ней и осторожно поправил плащ, предательски сползающий с её плеча. Юноша долго утешал Десвиар: его слова выражали сопереживание её грусти, несли в себе надежду и вселяли уверенность. Уже через несколько минут его собеседница преобразилась: она решительно поднялась с пола, оттряхнулась и заговорила.<s>\n– Спасибо, Орнас. Наверное, всё не так уж и плохо. По крайней мере, встреча с тобой - большая удача. Ты ведь поможешь мне?\"\n  elseif vars.a_mood_1_block == 2 then\nvars.b_text_for_reaction = \"Орнас попытался утешить Десвиар, но та лишь продолжала безучастно смотреть в пустоту информационной панели опустевшей камеры. Когда джедай подошёл ближе к девушке и заглянул в её лицо, она словно вышла из оцепенения.<s>\n– Меня не нужно утешать, Орнас, – проговорила она сдержанно. – Я только хочу понять, что со мной происходит и что мне с этим делать. Ты можешь просто помочь мне?\"\n  elseif vars.a_mood_1_block == 3 then\nvars.b_text_for_reaction = \"Орнас попытался утешить бушующую Десвиар, однако этим только направил всю её агрессию на себя. Теперь именно он оказался виновником всех её злоключений и любые попытки объяснить, что юноша никак не мог быть к ним причастным, только укрепляли её безумную уверенность в этом. В запале спора девушка даже попыталась ударить джедая, однако тот легко увернулся от её руки и отринул в сторону.<s>\n   Спустя какое-то время Десс наконец выбилась из сил и прервала свою обвинительную тираду прямо на середине фразы. Она молча вернулась к капсуле и опустилась на пол, прислонившись к ней спиной.<s>\n– Вообще-то я обычно не такая раздражительная, – проговорила Десвиар вполне спокойным голосом через несколько минут, – просто ситуация на редкость неприятная. Но и ты тоже хорош: спровоцировал меня вместо того, чтобы помочь. Так что сейчас самое время. Ты поможешь мне?\"\n  end\nreturn true\nend",
        "id": 418,
        "text": "\n",
        "lua_text": "function lua_text()\nreturn vars.b_text_for_reaction\nend",
        "merge": true
      },
      {
        "id": 424,
        "text": "Молча кивнуть"
      }
    ]
  },
  {
    "id": 419,
    "text": "   ",
    "answers": [
      {
        "id": 417,
        "text": "Приободрить",
        "need": 1000,
        "comment": true
      },
      {
        "var_show": [
          "b_text_for_reaction"
        ],
        "lua_if": "function lua_if()\n  if vars.a_mood_1_block == 1 then\nvars.b_text_for_reaction = \"Орнас попытался приободрить Десвиар, показать ей положительные моменты в ситуации, в которой та оказалась, и сгладить отрицательные. Девушка внимательно слушала джедая, периодически кивая головой, и после очередной фразы джедая о счастливом будущем даже улыбнулась.<s>\n– Может быть ты и прав, – заключила она задумчиво. – Но одних слов недостаточно для решения всех проблем, нужно что-то делать. Я могу расчитывать на твою помощь?\"\n  elseif vars.a_mood_1_block == 2 then\nvars.b_text_for_reaction = \"Орнас попытался приободрить Десвиар, показать ей положительные моменты в ситуации, в которой та оказалась, и сгладить отрицательные, но девушка лишь продолжала безучастно смотреть в пустоту информационной панели опустевшей камеры. На очередной фразе джедая о скором неминуемо счастливом будущем Десс словно вышла из оцепенения и повернулась к юноше лицом, одним только взглядом заставив его замолчать.<s>\n– Не говори мне, что всё хорошо, – проговорила она мягко. – Я не дурочка и понимаю, что всё далеко не так хорошо, как ты убеждаешь. И чтобы справиться с этим, чтобы просто понять, что со мной происходит, мне нужна помощь. Ты можешь помочь мне, Орнас?\"\n  elseif vars.a_mood_1_block == 3 then\nvars.b_text_for_reaction = \"Орнас попытался приободрить бушующую Десвиар, однако этим только направил всю её агрессию на себя. Теперь именно он оказался виновником всех её злоключений и любые попытки объяснить, что юноша никак не мог быть к ним причастным, только укрепляли её безумную уверенность в этом. В запале спора девушка даже попыталась ударить джедая, однако тот легко увернулся от её руки и отринул в сторону.<s>\n   Спустя какое-то время Десс наконец выбилась из сил и прервала свою обвинительную тираду прямо на середине фразы. Она молча вернулась к капсуле и опустилась на пол, прислонившись к ней спиной.<s>\n– Вообще-то я обычно не такая раздражительная, – проговорила Десвиар вполне спокойным голосом через несколько минут, – просто ситуация на редкость неприятная. Да и ты хорош: провоцировал меня вместо того, чтобы просто помочь. Но у тебя есть шанс исправиться и сейчас для этого самое время. Ты поможешь мне?\"\n  end\nreturn true\nend",
        "id": 418,
        "text": "\n",
        "lua_text": "function lua_text()\nreturn b_text_for_reaction\nend",
        "merge": true
      },
      {
        "id": 424,
        "text": "Молча кивнуть"
      }
    ]
  },
  {
    "id": 420,
    "text": "   ",
    "answers": [
      {
        "id": 417,
        "text": "Пообещать помощь",
        "need": 1000,
        "comment": true
      },
      {
        "var_show": [
          "b_text_for_reaction"
        ],
        "lua_if": "function lua_if()\n  if vars.a_mood_1_block == 1 then\nvars.b_text_for_reaction = \"Орнас подошёл ближе к девушке и опустился на пол рядом с ней. Он не стал тратить время на долгие рассуждения и просто предложил свою помощь. Десвиар с благодарностью посмотрела на юношу, но голос её оставался недовольным.<s>\n– Ладно, пожалуй, сейчас всё не так плохо, как могло быть. Ты правда готов мне помочь?\"\n  elseif vars.a_mood_1_block == 2 then\nvars.b_text_for_reaction = \"Орнас подошёл ближе к девушке таким образом, чтобы видеть её глядящие в пустоту глаза.<s>\n– Я обязательно помогу тебе во всем разобраться, – сказал он тихо, но уверенно. – Вместе мы непременно разгадаем все загадки и преодолеем все трудности. Даю тебе слово.<s>\n   Лицо Десвиар ожило, и она внимательно осмотрела юношу, будто увидела его впервые. Казалось, будто она только что проснулась после кошмарного сна и теперь пыталась отделить вымысел от реальности.<s>\n– Ты просто не представляешь, как мне нужна твоя помощь, Орнас, – с благодарностью произнесла Десс. – И ты правда поможешь мне?\"\n  elseif vars.a_mood_1_block == 3 then\nvars.b_text_for_reaction = \"Орнас попытался уверить девушку в том, что он непременно поможет ей разобраться в той непростой ситуации, в которой та оказалась. Однако это совсем не успокоило Десс, напротив, теперь она стала обвинять юношу во всех своих бедах и злоключениях. Когда поток всех мыслимых и немыслимых ругательств в адрес джедая иссяк, Десвиар прорычала что-то совсем невнятное и со злостью топнула ногой, после чего опустилась на пол возле капсулы и замолчала.<s>\n– Знаешь, Орнас, обещать помочь – ещё не помощь. Ты пока только говоришь о своих благородных намерениях, но так ещё ничего и не сделал, – сказала она через несколько минут уже спокойным голосом. – Мне, конечно, тоже не следовало так заводиться, ведь на самом деле твоя помощь мне очень нужна. Ты правда поможешь мне?\"\n  end\nreturn true\nend",
        "id": 418,
        "text": "\n",
        "lua_text": "function lua_text()\nreturn vars.b_text_for_reaction\nend",
        "merge": true
      },
      {
        "id": 424,
        "text": "Молча кивнуть"
      },
      {
        "id": 417,
        "text": "* Добавить описание цели испытания в начале✓\n* Сделать возвращение активного статуса дроидов после выхода из зала при маскировке✓\n* Переделать описание входной двери✓\n* Продумать условия системы стилей✓\n* Добавить в код создание случайной таблицы для не-того-самого чипа в зависимости от количества контактов ✓\n* Для загадки после лестницы доработать блок-схему✓\n\n* Объяснять все возможные непонятки прямо в тексте, убрать подсказки-сноски\n\n* Продумать изменения оформления при переходе от света ко тьме (фон страницы, смена музыкального сопровождения)\n\n* Сделать боковое меню\n- переход к достижениям\n- активация/дезактивация хард-мода\n- текущие цели по веткам квестов\n- состояние гг (травмы)\n\n* Сделать хард-мод с выключенными закладками - достижения должны быть получены только на харде\n\n* Убрать блокировку закладок во время боя\n\n* Проверить состояние ВСЕГО после поражения от терентатека\n\n* Добавить \"внимательный осмотр\" для всех помещений (объединить пол/стены/потолок - меньше пустой информации)\n\n* Добавить \"усмиритель\" для существ в правой комнате (голос успокаивает, яркий свет вызывает агрессию)\n\n* Переписать момент с усмирением существ для 3 стиля на \"поговорить\" сделать многоразовым, для второго стиля сделать \"отвлечь внимание\", которое сработает только один раз, после этого существа реагируют на запах.\n\n* Кото Льерсо знаком с Десс - его линия раскрывается через фейлы Орнаса. От начала к концу передать отношение к Орнасу (от строгого и отстранённого к отцовскому) причины исследований храмов\n\n* Переделать диалог с дроидом (раскрыть человечность): много вопросов - дроиду скучно, инфа по блокам, чтобы полностью раскрыть блок нужно иметь найденные ранее \"зацепки\" (и использовать их в нужный момент). Для каждого блока нужно два последовательных вопроса, после этого дроид задаёт вопрос по зацепкам, при нахождении зацепок доступен спец.ответ. Успешное прохождение блока даёт бонус:\n-микронаушник-переводчик для ветки с дроидом-напарником (союзник: TL-3)\n- инфа про Десс, открывающая бонусные варианты для взаимодействия с ней (\"понимание\" в третьем круге)/подсказка к маленькому сейфу по очередности (союзник: Десс)\n- фигурный ключ для центральной головоломки (самостоятельная ветка)\n\n* Добавить эмоциональности при ошибке с дроидом, утрата ценного союзника (перечитать, может быть уже сделано)\n\n* Девушка –  Десвиар (Десс,) в диалоге нужно отразить основные моменты её истории (исследования храма вместе с наставницей / её (их) падение на ТС, битва друг с другом, прятки (наставница ушла наверх, попала под контроль голокрона, после - предполагаемый отлёт наставницы), падение корабля \"Чёрное пламя\", обман Феникса (отравил/забрал меч), выслеживание его и команды (и их смерть), попытка использовать камеру (безуспешно) (на самом деле наставница устроила киб.сон, и отправилась выполнять другие миссии Совета, при возвращении к Храму Джедаев корабль сбивают, чтобы инсценировать их гибель, попадает в плен к ситху, выкрадывает из архива данные о своих перемещениях до трагедии, рожает ребёнка. Ребёнка тренируют на ситха, но он нейтрализует плохиша и сбегает с матерью, она приводит его в храм джедаев. Не хотят принимать его из-за возраста и привязанности к матери, в то же время мать погибает, кто-то считает, что Орнас сам её убил. Становится учеником Льерсо)\n\n* Добавить в третий круг диалога с Десс бонусный ответ \"погимание\" на <plus>7 к доверию\n\n* Сделать эпизод на лестнице: ощущение беспокойства, возможность остановиться и перевести дыхание или забить. Повторение кодекса: по фразе из кодекса джедаев/ ситхов, очки светлой/ теменной стороны <plus> бонус к выносливости для боя, либо несвязная ерунда - без эффекта\n\n* Переработать перемещения учителя: приходит на фейл, раскрывает свою ветку и остаётся в той же комнате\n\n* Если учитель в комнате с лестницей, то он комментирует действия Орнаса при проходе дроида наверх, если приходит Десс, то начинается сцена их встречи (если она сбежала или Льерсо в другом месте, то встреча может быть только в финале)\n\n* Когда Десс уходит, нужно автоматически протащить Орнаса за ней, чтобы не пропустить сцену встречи с учителем (даже если Льерсо там нет и встречи не произойдёт)\n\n* Пересмотреть всё, что касается временных рамок и оценить достоверность (в случае необходимости изменить возраст Льерсо и оценку запустения храма для соответствия)\n\n* Возможность уничтожить змею в первой комнате после получения молний\n\n* Возможность уничтожить дроида молниями\n\n* Сделать перевод травм перед боем в минусы к характеристикам\n\n* Прописать сцену встречи с НК (показать его болтливым)\n- если на самостоятельной ветке, то НК после дружеского объятья (хозяин вернулся) крадёт световой меч (или оба) и ломает, начинается бой. После победы можно починить меч, после поражения - нет.\n- если на ветке дроида с микропереводчиком, то тот рекомендует быть внимательнее и Орнас отталкивает НК Силой, когда тот пытается выкрасть меч, бой быстро заканчивается победой. Если нет переводчика, то обычный бой, но дроид жертвует собой в случае поражения Орнаса, что позволяет тому победить, дроид восстановлению не подлежит.\n- если на ветке с Десс, то НК крадёт и ломает меч, его быстро побеждает Десс. Если доверия недостаточно, то она \"нечаянно\" наступает на важную деталь и меч починить не удастся.\n\n* Прописать блок-схему сочетаний условий для финального зала:\n- один против своей тёмной стороны (не раб, свет, не пробуждал)\n- один против учителя (раб, не пробуждал/не раб, тьма, не пробуждал)\n- один против Десс (не раб, не доверяет, свет/ не раб, не доверяет, тьма)\n- вдвоём с Десс против учителя (раб, пробуждал/ не раб, доверяет, тьма)\n- против своей тёмной стороны с поддержкой Десс (не раб, доверяет, свет)\n- стать \"серым\", без боя, диалог с призраком Силы (не раб, -1÷1 отс)\n\n* На ветке дроида он сам не участвует в финальном сражении, но все участники могут прокомментировать его присутствие. Во всех раскладах помогает Орнасу советами (если есть наушник-переводчик) и один раз жертвует собой в случае опасности.\n\n* Если на лестницу сначала приходит Десс, а потом дроид, то она его уничтожает. Если наоборот, то после лестницы запустить сцену их взаимодействия: хочет уничтожить, но Орнас вмешивается, Десс ставит ультиматум, если открыт бонус для ветки дроида - то автоматически выбирается он, иначе - выбор.\n\n* Если установить в дроида бонусную схему, то он может взломать дверь с загадкой после лестницы\n\n* При высоком доверии Десс на площадке перед дверью на втором этаже раскрывает Орнасу недосказанные детали и говорит, что была на грани до встречи с ним, но он своим примером показал, как должно светиться/пылать сердце.\n\n* При высоком доверии после второго круга Десс  рассказывает, как вести себя с животными в комнате справа и \"поговорить с ними\" становится доступно для всех стилей. Если на пятом стиле Орнас уже использовал усмирение, то он рассказывает ей об этом и открывается бонусное взаимодействие с Десс (\"понимание\")(выход на псевдоромантическую ветку?)\n\n* Романтическая ветка при наличии следующих условий: на третьем круге выбрано \"понимание\", не было встречи с учителем, \"стать серым\"\n\n* В комнате с НК к ящикам с оружием добавить гранаты. В момент, когда Орнас ковыряется в ящиках все его показатели нулевые. Использование плазменной гранаты уничтожает комнату, Орнас проигрывает, HK выживает, TL-3 погибает. При использовании ионной гранаты TL-3 погибает (выгорают схемы), НК теряет одну жизнь. \n\n* Добавить нахождение плазменной гранаты в комнату с дроидом\n\n* Переделать описание центральной двери, чтобы дать намёк на необходимость продолжить перемещение плиты (тот, кто не останавливается на достигнутом)\n\n* Выводить сообщение о получении достижения всплывающей строкой\n\n* В правое меню добавить переход к достижениям и переключатель хард-мода\n\n* Проверить награды в тайной комнате и штраф (минус к характеристикам)\n\n desviar\n\nДостижения (только на харде) и антидостижения (всегда):\n\n★ Мастер меча: одолеть всех противников световым мечом (охранные дроиды, животные в комнате справа, терентатек без использования гранат и корабельной пушки, НК и его помощники без использования гранат)\n★ Мастер-джедай: использовать Силу в каждом бою (со змеёй, с охранными дроидами, с существами, с терентатеком, с НК и его помощниками, в финальном сражении)\n★ Мастер теней: избегать прямого сражения там, где это возможно (победить змею, не спускаясь вниз, не сражаться с охранными дроидами, не сражаться с существами, уничтожить терентатека выстрелом из корабельной пушки, не сражаться с НК самому)\n★ Мастер техники: успешно установить дополнительную микросхему при ремонте TL-3.\n★ Мастер слова: добиться максимально возможного расположения Десс.\n★ Форма 0: пройти квест ни разу не активировав световой меч.\n★ Кропотливый исследователь: осмотреть входную дверь и обнаружить проход наверху, провести \"внимательный осмотр\" всех помещений.\n★ Абсолютная власть: уничтожить всех противников (кроме терентатека) при помощи молний Силы.\n★ Путь разрушения: уничтожить всех противников и все разрушаемые объекты (змея, охранные дроиды, животные в комнате справа, терентатек, НК и его помощники, корабль, 2 колонны в центральном зале, комната справа, комната на втором этаже).\n★ Волевое усилие: одолеть змею, получив два парализующих укуса\n★ Вознаграждение за упорство: разгадать загадку на втором этаже и получить усиление.\n\n∆ Неуместная спешка: попытаться пролезть под  незакреплённой плитой и чуть не погибнуть.\n∆ Простой путь: попытаться одолеть змею с помощью светового меча и чуть не погибнуть.\n∆ Не по зубам 1: проиграть схватку с терентатеком.\n∆ Не по зубам 2: проиграть схватку с НК и его помощниками.\n∆ Не по зубам 3: поиграть финальную схватку.\n∆ Дело техники: допустить критическую ошибку при ремонте TL-3.\n∆ Неумелый взломщик: потерпеть неудачу при попытке вскрыть оружейный сейф световым мечом.\n∆ \n∆ Проблемы дипломатии 1: надеть контрольный браслет перед первым разговором с Десс и спровоцировать этим её агрессию.\n∆ Проблемы дипломатии 2: во время разговора с Десс довести её до агрессии.\n∆ Проблемы дипломатии 3: допустить встречу Десс с TL-3 и его уничтожение (после лестницы).\n∆ Проблемы дипломатии 4: добиться недостаточно высокого доверия Десс и оказаться преданным ею в финальной схватке.\n∆ Необдуманное решение 1: уничтожить дроида- секретаря и не суметь открыть сейф.\n∆ Необдуманное решение 2: уничтожить контрольный браслет в комнате с неизвестными существами плазменной гранатой и не суметь открыть сейф.\n∆ Необдуманное решение 3: уничтожить колонны выстрелом корабельных орудий и не суметь разгадать загадку в центральном зале.\n∆ Необдуманное решение 4: отказаться от награды в тайной комнате и передумать.\n∆ Необдуманное решение 5: не разгадать загадку на втором этаже и получить все возможные штрафы.\n",
        "need": 1000,
        "comment": true
      }
    ]
  },
  {
    "id": 421,
    "text": "   ",
    "answers": [
      {
        "id": 417,
        "text": "Успокоить",
        "need": 1000,
        "comment": true
      },
      {
        "var_show": [
          "b_text_for_reaction"
        ],
        "lua_if": "function lua_if()\n  if vars.a_mood_1_block == 1 then\nvars.b_text_for_reaction = \"Орнас попытался успокоить девушку, но его пространные рассуждения о спокойствии и отсутствии эмоций никак не помогали. Полный скепсиса недовольный взгляд Десвиар словно замораживал юношу: он говорил всё тише и невнятнее, пока наконец совсем не умолк.<s>\n– Я ценю твои попытки делать вид, что тебе не всё равно, но лучше не неси чушь, – проговорила она устало. – Меня не нужно успокаивать, мне нужна помощь. Ты готов мне помочь, Орнас?\"\n  elseif vars.a_mood_1_block == 2 then\nvars.b_text_for_reaction = \"Орнас попытался успокоить девушку и заверял, что любые эмоции в такой ситуации не помогут решить проблему, что нельзя отстраняться от трудностей и что для принятия эффективных решений нужно вести диалог. Но Десвиар никак не реагировала на его призывы к рассудительности и лишь молча смотрела куда-то вдаль, словно сквозь него. Наконец, когда аргументы юноши иссякли и он замолчал, Десс ожила и заговорила.<s>\n – Не говори мне, как я должна себя вести, Орнас, – её голос звучал не грубо или сердито, а скорее просто устало. – Я не бегу от проблем, но мне не справиться с ними в одиночку. Ты поможешь мне?\"\n  elseif vars.a_mood_1_block == 3 then\nvars.b_text_for_reaction = \"В своей попытке успокоить вспыльчивую собеседницу Орнас говорил очень уверенно и даже несколько настойчиво, стараясь показать Десс, что её ситуация не так уж и плоха, и особенно теперь, когда она встретила его. Но призывы к рассудительному и спокойному диалогу только сильнее распалили больше нескрываемую злость девушки: она осыпала его градом ругательств, срывалась иногда на крик и даже порывалась ударить джедая. Юноша легко уворачивался от её неуклюжих выпадов, но ничего не мог поделать с неиссякаемым потоком брани.<s>\n   Спустя какое-то время Десвиар перестала кричать, в бессильной злобе сжала кулаки и уткнувшись в них лицом опустилась на пол.<s>\n– Ты ужасный человек, Орнас, – проговорила она опустошённым, но уже спокойным голосом через несколько минут. – Но выбора у меня нет: мне нужна любая помощь. Даже твоя. Ты поможешь мне?\"\n  end\nreturn true\nend",
        "id": 418,
        "text": "\n",
        "lua_text": "function lua_text()\nreturn vars.b_text_for_reaction\nend",
        "merge": true
      },
      {
        "id": 424,
        "text": "Молча кивнуть"
      }
    ]
  },
  {
    "id": 422,
    "text": "   ",
    "answers": [
      {
        "comment": true,
        "super_calculate": false,
        "id": 422,
        "calculate": false,
        "need": 1000,
        "text": "Дать совет"
      },
      {
        "var_show": [
          ""
        ],
        "lua_if": "function lua_if()\n  if vars.a_mood_1_block == 1 then\nvars.b_text_for_reaction = \"Орнас буквально осыпал свою новую знакомую всевозможными советами и идеями, которые могли бы помочь ей в этой нелёгкой ситуации. Среди них были как очевидные и относительно бесполезные для любого здравомыслящего человека рассуждения, так и весьма дельные замечания. Однако Десс не слушала. Дождавшись наконец, когда юноша умолкнет, она демонстративно зевнула.<s>\n– Ну что за ерунда? Мне не нужны советы, – проговорила она резко, но сразу после этого её голос смягчился. – Пойми меня правильно, Орнас, сейчас мне нужно совсем не это. Мне нужна реальная помощь. Я могу расчитывать на тебя?\"\n  elseif vars.a_mood_1_block == 2 then\nvars.b_text_for_reaction = \"Чувствуя растерянность Десвиар, Орнас рассказал ей о своем видении ситуации и посоветовал наиболее рациональные на его взгляд методы решения возникших проблем. Однако девушка, казалось, слушала его совсем невнимательно, не отрывая взгляда от приборной панели опустевшей капсулы. Наконец, когда джедай завершил развёрнутое изложение своего мнения, Десс повернулась к нему и заговорила.<s>\n–  Спасибо тебе, конечно, за эти советы, Орнас, – произнесла она без тени иронии, – но прямо сейчас мне нужно что-то большее, чем просто слова. Мне одной не справиться со всем этим. Ты поможешь мне?\"\n  elseif vars.a_mood_1_block == 3 then\nvars.b_text_for_reaction = \"Видя, в каком ужасном состоянии находилась Десвиар, Орнас попытался объяснить ей своё видение ситуации и посоветовать наиболее рациональные методы решение возникших перед ней сложностей. Однако к удивлению юноши, девушка не только не оценила должным образом его устремление, но и рассвирепела ещё больше: на джедая обрушилась настоящая буря криков и оскорблений. Десс бушевала ещё несколько минут, пытаясь то и дело наброситься на Орнаса с кулаками, но он своевременно уварачивался и отходил на безопасное расстояние. Когда запал девушки иссяк, она обессиленно опустилась на пол, закрывая разгорячённое лицо руками.<s>\n– Мне не нужны твои идиотские рассуждения и советы, – сказала она, поднявшись наконец на ноги и утерев лицо рукой. – Я бы ни за что не стала иметь дел с таким бесчувственным идиотом как ты, но сейчас мне очень нужна любая помощь. Даже твоя. Ты поможешь мне?\"\n  end\nreturn true\nend",
        "id": 418,
        "text": "\n",
        "lua_text": "function lua_text()\nreturn b_text_for_reaction\nend",
        "merge": true
      },
      {
        "id": 424,
        "text": "Молча кивнуть"
      }
    ]
  },
  {
    "id": 423,
    "text": "   ",
    "answers": [
      {
        "var_show": [
          ""
        ],
        "lua_if": "function lua_if()\nvars.b_text_for_reaction = \"Некоторое время Орнас сосредоточенно разглядывал девушку. Чем дольше он анализировал её поведение, тем неестесственнее и подозрительнее казалась ему Десс. Джедай не верил её отговоркам про потерю памяти, но зачем ей что-то скрывать от него?<s>\n– Ты пытаешься меня обмануть? – спросил он прямо. – Я не верю тебе.<s>\n   На лице девушки не осталось и тени от только что бушевавших эмоций, теперь оно было сосредоточенно и спокойно. Она стояла выпрямившись во весь рост и смотрела прямо в глаза Орнасу, отчего ему стало не по себе.<s>\n– Доверие – вещь обоюдная, ученик джедаев, – произнесла Десвиар ледяным голосом. – Но сейчас мне на самом деле нужна помощь. Разве в Ордене сейчас не учат помогать нуждающимся?\"\nreturn true\nend",
        "id": 418,
        "text": "\n",
        "lua_text": "function lua_text()\nreturn b_text_for_reaction\nend",
        "merge": true
      },
      {
        "id": 424,
        "text": "Молча кивнуть"
      }
    ]
  },
  {
    "id": 424,
    "text": "   Орнас сдержанно кивнул, выражая готовность помочь новой знакомой.\n– Вот и славно, – ",
    "answers": [
      {
        "comment": false,
        "id": 424,
        "text": "текст",
        "lua_text": "function lua_text()\nlocal text = (a_tia_trust < 1 and \"буркнула Десс, но по её голосу было совершенно понятно, что ничего славного на самом деле нет. – Мне нужна одежда. Сможешь найти что-нибудь нормальное?<s>\n   Орнас кивнул ещё раз, но вслух ничего не ответил. Девушка не скрывала своего недоверия к нему и юношу это очень злило. Но не помочь ей он не мог. <s><s>\"Может быть одетой она будет хоть немного дружелюбнее?<s><s>\" – думал он, разворачиваясь в сторону выхода из комнаты.<s>\n– Я буду ждать здесь, – бросила Десвиар ему вдогонку.\") or (a_tia_trust < 5 and \"задумчиво протянула Десс. – Для начала, ты не мог бы найти для меня что-нибудь из одежды? А то я чувствую себя жутко неуютно.<s>\n– Да, разумеется, – смутился юноша. – Я пойду поищу в других помещениях.<s>\n   Он отвернулся от неё и направился к выходу из комнаты. Джедай не мог понять, доверяет ли ему Десвиар, и решил вести себя с ней осторожно.<s>\n– Спасибо, Орнас, – пробормотала девушка ему вслед.\") or (a_tia_trust >= 5 and \"проговорила Десс и вымученно улыбнулась. – Я очень благодарна тебе за плащ, но не мог бы ты поискать для меня другую одежду? Без неё довольно неловко...<s>\n– Да, разумеется, – смутился юноша. – Я посмотрю в других помещениях.<s>\n   Он улыбнулся Десвиар в ответ и направился к выходу из комнаты.<s>\n– Я буду ждать твоего возвращения, Орнас, – взволнованно пробормотала девушка ему вслед.\") \nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пойти вглубь храма\" .. (isHistoryContain (155) and \"<s>\n[В зал с лестницей]\" or \"\") \nend",
        "id": 194,
        "text": "Пойти вглубь храма",
        "lua_do": "function lua_do()\ntimeForDess = 0\nend",
        "var_set": [
          "goto",
          155
        ]
      },
      {
        "lua_text": "function lua_text()\n\nreturn \"Пойти к выходу из храма\" .. (isHistoryContain (189) and \"<s>\n[В угловую комнату с чешуйчатыми созданиями]\" or \"\") \nend",
        "id": 194,
        "text": "Пойти к выходу из храма",
        "lua_do": "function lua_do()\ntimeForDess = 0\nend",
        "var_set": [
          "goto",
          189,
          "gofrom",
          44
        ]
      },
      {
        "id": 44,
        "text": "Возвращение Орнаса в комнату",
        "need": 1000
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\na_tia_trust = (a_tia_trust == 0 and 3) or (a_tia_trust ==3 and 6) or 0\nend",
        "text": "Смена доверия",
        "comment": false,
        "id": 424
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.KnowDess = 4\nend",
        "text": "Новый ответ. введите текст",
        "id": 424,
        "calculate": true
      }
    ]
  },
  {
    "id": 425,
    "text": "Элемент шифра 1",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "instant": true,
        "left_answer": false,
        "var_str_set": [
          "236enter",
          "A surprise to "
        ],
        "var_not": [
          "236sup_1",
          1
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "id": 425,
        "text": "   ",
        "no_transition": true,
        "var_set": [
          "236sup_1",
          1
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "left_answer": false,
        "var_str_set": [
          "236enter",
          "A surprise to "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/S7wspFX/A-surprise-to.png"
        ],
        "var_equal": [
          "236sup_1",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ]
      }
    ]
  },
  {
    "id": 426,
    "text": "Элемент шифра 2",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "be sure but a "
        ],
        "var_not": [
          "236sup_2",
          1
        ],
        "var_set": [
          "236sup_2",
          1
        ],
        "id": 426,
        "right_answer": false,
        "text": "   ",
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "be sure but a "
        ],
        "right_answer": false,
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_2",
          1
        ],
        "id": 236,
        "comment": true,
        "answerImage": [
          "https://i.ibb.co/d5BLysL/be-sure-but-a.png"
        ]
      }
    ]
  },
  {
    "id": 427,
    "text": "Элемент шифра 3",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "welcome one"
        ],
        "var_not": [
          "236sup_3",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png"
        ],
        "instant": true,
        "middle_answer": true,
        "id": 427,
        "var_set": [
          "236sup_3",
          1
        ]
      },
      {
        "comment": true,
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "welcome one"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_3",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/zJYqtZM/welcome-one.png"
        ]
      }
    ]
  },
  {
    "id": 428,
    "text": "Элемент шифра 4",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "These aren't "
        ],
        "var_not": [
          "236sup_4",
          1
        ],
        "var_set": [
          "236sup_4",
          1
        ],
        "id": 428,
        "instant": true,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      },
      {
        "comment": true,
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "These aren't "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_4",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/fSpCHHQ/These-arent.png"
        ]
      }
    ]
  },
  {
    "id": 429,
    "text": "Элемент шифра 5",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "the droids you "
        ],
        "var_not": [
          "236sup_5",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ],
        "text": "   ",
        "id": 429,
        "middle_answer": true,
        "var_set": [
          "236sup_5",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "the droids you "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_5",
          1
        ],
        "comment": true,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/kKD5RcV/the-droids-you.png"
        ]
      }
    ]
  },
  {
    "id": 430,
    "text": "Элемент шифра 6",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "are looking for"
        ],
        "var_not": [
          "236sup_6",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/YWPjxVZ/are-looking-for.png"
        ],
        "text": "   ",
        "id": 430,
        "middle_answer": true,
        "var_set": [
          "236sup_6",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "are looking for"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_6",
          1
        ],
        "comment": true,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/YWPjxVZ/are-looking-for.png"
        ]
      }
    ]
  },
  {
    "id": 431,
    "text": "Элемент шифра 7",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "I find your "
        ],
        "var_not": [
          "236sup_7",
          1
        ],
        "var_set": [
          "236sup_7",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "id": 431,
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      },
      {
        "comment": true,
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "I find your "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_7",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/hc3hcbV/I-find-your.png"
        ]
      }
    ]
  },
  {
    "id": 432,
    "text": "Элемент шифра 8",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "lack of faith "
        ],
        "var_not": [
          "236sup_8",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ],
        "instant": true,
        "middle_answer": true,
        "id": 432,
        "var_set": [
          "236sup_8",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "lack of faith "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_8",
          1
        ],
        "comment": true,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/StynnYF/lack-of-faith.png"
        ]
      }
    ]
  },
  {
    "id": 433,
    "text": "Элемент шифра 9",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "disturbing"
        ],
        "var_not": [
          "236sup_9",
          1
        ],
        "var_set": [
          "236sup_9",
          1
        ],
        "id": 433,
        "instant": true,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ]
      },
      {
        "comment": true,
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "disturbing"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_9",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/M73XGPG/disturbing.png"
        ]
      }
    ]
  },
  {
    "id": 434,
    "text": "Элемент шифра 10",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "Do, or do not. "
        ],
        "var_not": [
          "236sup_10",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ],
        "text": "   ",
        "id": 434,
        "middle_answer": true,
        "var_set": [
          "236sup_10",
          1
        ]
      },
      {
        "comment": true,
        "id": 236,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "Do, or do not. "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_10",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/4THTB6G/do-or-do-not.png"
        ]
      }
    ]
  },
  {
    "id": 435,
    "text": "Элемент шифра 11",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "There is "
        ],
        "var_not": [
          "236sup_11",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ],
        "middle_answer": true,
        "text": "   ",
        "id": 435,
        "var_set": [
          "236sup_11",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "There is "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_11",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/v4jt7h2/there-is.png"
        ]
      }
    ]
  },
  {
    "id": 436,
    "text": "Элемент шифра 12",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "no try"
        ],
        "var_not": [
          "236sup_12",
          1
        ],
        "var_set": [
          "236sup_12",
          1
        ],
        "instant": true,
        "middle_answer": true,
        "id": 436,
        "answerImage": [
          "https://i.ibb.co/ysDxHSH/no-try.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "no try"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_12",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/ysDxHSH/no-try.png"
        ]
      }
    ]
  },
  {
    "id": 437,
    "text": "Элемент шифра 13",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "May the "
        ],
        "var_not": [
          "236sup_13",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ],
        "id": 437,
        "instant": true,
        "middle_answer": true,
        "var_set": [
          "236sup_13",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "May the "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_13",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/L1sYGn4/may-the.png"
        ]
      }
    ]
  },
  {
    "id": 438,
    "text": "Элемент шифра 14",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "force be "
        ],
        "var_not": [
          "236sup_14",
          1
        ],
        "var_set": [
          "236sup_14",
          1
        ],
        "text": "   ",
        "id": 438,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "force be "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_14",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/86XG8cM/force-be.png"
        ]
      }
    ]
  },
  {
    "id": 439,
    "text": "Элемент шифра 15",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "with you"
        ],
        "var_not": [
          "236sup_15",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ],
        "middle_answer": true,
        "text": "   ",
        "id": 439,
        "var_set": [
          "236sup_15",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "with you"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_15",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/QMHBMF0/with-you.png"
        ]
      }
    ]
  },
  {
    "id": 440,
    "text": "Элемент шифра 16",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "You "
        ],
        "var_not": [
          "236sup_16",
          1
        ],
        "var_set": [
          "236sup_16",
          1
        ],
        "instant": true,
        "middle_answer": true,
        "id": 440,
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "You "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_16",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/kXnMZjf/You.png"
        ]
      }
    ]
  },
  {
    "id": 441,
    "text": "Элемент шифра 17",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "underestimate "
        ],
        "var_not": [
          "236sup_17",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ],
        "id": 441,
        "instant": true,
        "middle_answer": true,
        "var_set": [
          "236sup_17",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "underestimate "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_17",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/j506Jk3/underestimate.png"
        ]
      }
    ]
  },
  {
    "id": 442,
    "text": "Элемент шифра 18",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "my power!"
        ],
        "var_not": [
          "236sup_18",
          1
        ],
        "var_set": [
          "236sup_18",
          1
        ],
        "text": "   ",
        "id": 442,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/5Y48PTW/my-power.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "my power!"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_18",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/5Y48PTW/my-power.png"
        ]
      }
    ]
  },
  {
    "id": 443,
    "text": "Элемент шифра 19",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "No, I "
        ],
        "var_not": [
          "236sup_19",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ],
        "middle_answer": true,
        "text": "   ",
        "id": 443,
        "var_set": [
          "236sup_19",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "No, I "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_19",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/LkmcxPR/no-I.png"
        ]
      }
    ]
  },
  {
    "id": 444,
    "text": "Элемент шифра 20",
    "answers": [
      {
        "comment": false,
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "am your "
        ],
        "var_not": [
          "236sup_20",
          1
        ],
        "var_set": [
          "236sup_20",
          1
        ],
        "instant": true,
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "id": 444,
        "answerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "am your "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_20",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/ngyjG8k/am-your.png"
        ]
      }
    ]
  },
  {
    "id": 445,
    "text": "Элемент шифра 21",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "father"
        ],
        "var_not": [
          "236sup_21",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ],
        "id": 445,
        "instant": true,
        "middle_answer": true,
        "var_set": [
          "236sup_21",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "father"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_21",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/2sMJHny/father.png"
        ]
      }
    ]
  },
  {
    "id": 446,
    "text": "Элемент шифра 22",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "I’ve got a "
        ],
        "var_not": [
          "236sup_22",
          1
        ],
        "var_set": [
          "236sup_22",
          1
        ],
        "text": "   ",
        "id": 446,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "I’ve got a "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_22",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/n6rCrDZ/I-ve-got-a.png"
        ]
      }
    ]
  },
  {
    "id": 447,
    "text": "Элемент шифра 23",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "bad feeling "
        ],
        "var_not": [
          "236sup_23",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ],
        "middle_answer": true,
        "text": "   ",
        "id": 447,
        "var_set": [
          "236sup_23",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "bad feeling "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_23",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/WVNMb0m/bad-feeling.png"
        ]
      }
    ]
  },
  {
    "id": 448,
    "text": "Элемент шифра 24",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "about this"
        ],
        "var_not": [
          "236sup_24",
          1
        ],
        "var_set": [
          "236sup_24",
          1
        ],
        "instant": true,
        "middle_answer": true,
        "id": 448,
        "answerImage": [
          "https://i.ibb.co/ZMzQggs/about-this.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "about this"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_24",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/ZMzQggs/about-this.png"
        ]
      }
    ]
  },
  {
    "id": 449,
    "text": "Элемент шифра 25",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "The full "
        ],
        "var_not": [
          "236sup_25",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ],
        "id": 449,
        "instant": true,
        "middle_answer": true,
        "var_set": [
          "236sup_25",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "The full "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_25",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/1Qg345m/The-full.png"
        ]
      }
    ]
  },
  {
    "id": 450,
    "text": "Элемент шифра 26",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "text": "   ",
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "power of "
        ],
        "var_not": [
          "236sup_26",
          1
        ],
        "answerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ],
        "id": 450,
        "instant": true,
        "middle_answer": true,
        "var_set": [
          "236sup_26",
          1
        ]
      },
      {
        "var_add": [
          "236sup",
          1
        ],
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "power of "
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_26",
          1
        ],
        "comment": true,
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/fS30ZQN/power-of.png"
        ]
      }
    ]
  },
  {
    "id": 451,
    "text": "Элемент шифра 27",
    "answers": [
      {
        "var_add": [
          "236sup",
          1
        ],
        "lua_do": "function lua_do()\nlocal a = g.current_id\nshowPage {id = a}\nend",
        "instant": true,
        "no_transition": true,
        "var_str_set": [
          "236enter",
          "the dark side"
        ],
        "var_not": [
          "236sup_27",
          1
        ],
        "var_set": [
          "236sup_27",
          1
        ],
        "text": "   ",
        "comment": false,
        "id": 451,
        "middle_answer": true,
        "answerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ]
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "   ",
        "var_str_set": [
          "236enter",
          "the dark side"
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/Y3tWgZL/outline.png"
        ],
        "var_equal": [
          "236sup_27",
          1
        ],
        "var_add": [
          "236sup",
          1
        ],
        "id": 236,
        "answerImage": [
          "https://i.ibb.co/G7v0LXK/the-dark-side.png"
        ]
      }
    ]
  },
  {
    "id": 452,
    "text": "   В голове Орнаса роилось множество вопросов. Астромех наверняка хранил в себе уйму бесценной информации, но юноша не был уверен, что у того хватит терпения рассказать всё о себе",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 1\n\nif style == 4 then\nTL3.focusDess = 1\nTL3.focusSelf = 1\nTL3.focusTL = 3\nend\nend",
        "text": "Бонус для умника",
        "id": 452,
        "calculate": true
      },
      {
        "calculate": false,
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "super_calculate": false,
        "id": 452,
        "text": "Рестарт диалога",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = 1\nTL3.focusDess = 0\nTL3.focusSelf = 0\nTL3.focusTL = 0\nend",
        "forget": [
          455,
          456,
          338,
          459,
          460,
          461,
          462,
          463,
          464,
          465,
          466,
          467,
          95,
          457,
          414,
          342
        ]
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n\n-- условие отображения первой фразы (видел корабль и знает о Десс)\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeChamber = TL3.conditions.seeChamber or 0\nTL3.conditions.KnowDess = TL3.conditions.KnowDess or 0\na =TL3.conditions.KnowDess > 1 and 2 or TL3.conditions.seeChamber == 1 and 1 or 0\ntext = \"\"\n  if a == 0 then --10\n    text = \" и об этом месте.\"\n  elseif a == 1 then\n    text = \", об этом месте и о бакто-камере, которой явно не место в таком древнем строении.\"\n  elseif a == 2 then\n    text = \", об этом месте и о девушке из бакто-камеры.\"\n  end --16\ntext = text .. \"<s>\n   Стоит ли попытаться войти в доверие к дроиду, чтобы выудить у него что-то полезное? И как вообще можно расположить к себе машину, тем более с таким скверным характером? Вежливо предложить помощь или продемонстрировать собственную осведомленность и последовательность? Выяснять это придётся опытным путём...\"\n-- Добавить фразы дроида о терпении из старой системы\ntext = g.current_id == 452 and text or \"\"\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 1 --20\nTL3.patience = TL3.patience > 5 and 6 or TL3.patience\ntext = text .. ( {\"<s>\n– Если ты хочешь что-то узнать, то давай живее, – прочитал Орнас перевод очередной реплики TL-3. – Люди такие скучные.\", \"<s>\n– Ещё что-нибудь? – даже в текстовом переводе ощущалось, что дроид раздражён, если дроиды вообще могут быть раздражены. – Этот разговор начинает меня утомлять.\", \"<s>\n– Тебе самому не надоедает слушать свой голос? – саркастически спросил TL-3. – Мне вот уже надоело.\", \"<s>\n– Надеюсь, это всё? – юноше казалось, что дроид утомлён их разговором. – Давай последний вопрос, хватит с тебя.<s>\n   Джедай понял, что сейчас его последний шанс склонить собеседника на свою сторону. Возможно, если удалось добиться его расположения, теперь стоит как-то обозначить готовность к долгосрочному сотрудничеству.\", \"<s>\n– Хватит вопросов, – заявил TL-3. – Есть дело, которое нужно сделать. Ты поможешь мне, я помогу тебе. Может быть.\", \"<s>\n   TL-3 беззвучно замигал светодиодным датчиком. Юноша был уверен, что такая последовательность сигналов может означать на двоичном языке что-то неприличное.\"} )[TL3.patience]\n--text = g.current_id == 452 and text or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Как ты здесь оказался?",
        "need": -459,
        "id": 459
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.knowAboutShip = TL3.conditions.knowAboutShip or 0\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5 and TL3.conditions.knowAboutShip ~=0\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Что случилось с командой корабля?",
        "need": -460,
        "id": 460
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeArmlets = TL3.conditions.seeArmlets or 0\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5 and TL3.conditions.seeArmlets ~=0\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Что ты знаешь о браслетах из тёмного металла?",
        "need": -461,
        "id": 461
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeSafes = TL3.conditions.seeSafes or 0\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5 and TL3.conditions.seeSafes ~=0\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Что ты знаешь о сейфах на корабле?",
        "need": -462,
        "id": 462
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Ты знаешь что-нибудь об этом месте?",
        "need": -463,
        "id": 463
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Ты знаешь что-нибудь о страшных зверях, которые здесь обитают?",
        "need": [
          189,
          -464
        ],
        "id": 464
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p1 = TL3.conditions.useBlock.p1 or 0\nTL3.conditions.useBlock.p2 = TL3.conditions.useBlock.p2 or 0\nTL3.conditions.useBlock.p3 = TL3.conditions.useBlock.p3 or 0\nTL3.conditions.useBlock.p4 = TL3.conditions.useBlock.p4 or 0\nTL3.conditions.useBlock.p5 = TL3.conditions.useBlock.p5 or 0\nlocal a = TL3.conditions.useBlock.p1 <plus> TL3.conditions.useBlock.p2 <plus> TL3.conditions.useBlock.p3 <plus> TL3.conditions.useBlock.p4 <plus> TL3.conditions.useBlock.p5\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5 and a ~= 0 \nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Что ты знаешь об энергоблоках?",
        "need": -465,
        "id": 465
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeAnyKey = TL3.conditions.seeAnyKey or 0\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5 and TL3.conditions.seeAnyKey ~= 0\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Ты знаешь что-нибудь о ключах с узором на ручке?",
        "need": -466,
        "id": 466
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.seeChamber = TL3.conditions.seeChamber or 0\nTL3.patience = TL3.patience or 0\nTL3.conditions.supCond =  TL3.conditions.supCond or 0\nreturn TL3.patience < 5 and TL3.conditions.seeChamber == 1 and  TL3.conditions.supCond ~= 1\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Я видел тут бакта-камеру, ты знаешь, для чего она здесь?",
        "need": -467,
        "id": 467
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 0\nreturn TL3.patience < 5\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Ты мог бы помочь мне?",
        "need": -456,
        "id": 456
      },
      {
        "id": 455,
        "text": "– Я могу чем-то помочь тебе?",
        "need": -455,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend"
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 0\nreturn TL3.patience == 4\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = (TL3.patience or 0) <plus> 1\nend",
        "text": "– Я бы хотел научиться понимать тебя без переводчика.",
        "need": -338,
        "id": 338
      },
      {
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditionTranslator = TL3.conditionTranslator or 0\nreturn TL3.conditionTranslator == 1\nend",
        "id": 95,
        "text": "– Нужно собрать переводчик.",
        "need": -95,
        "addToHistory": [
          345
        ]
      },
      {
        "lua_text": "function lua_text()\nstyle = style or 1\nreturn style == 4 and \"– Что ещё нужно для твоего ремонта?\" or \"– Что нужно для твоего ремонта?\"\nend",
        "lua_do": "function lua_do()\nlocal a = style == 4 and 0 or 1\nshowPage{id = a==1 and 457 or 414}\nend",
        "id": 452,
        "text": "Что нужно для ремонта?",
        "need": [
          -457,
          -414,
          455
        ],
        "no_transition": true
      },
      {
        "id": 415,
        "text": "– Я готов начать ремонт.",
        "need": 414,
        "var_equal": [
          "style",
          4
        ]
      },
      {
        "id": 344,
        "text": "– Можешь повторить, что нужно для твоего ремонта?",
        "need": 342,
        "var_not": [
          "global current_id",
          344,
          "global current_id",
          342,
          "style",
          4
        ]
      },
      {
        "lua_do": "function lua_do()\n--showPage{id = style == 4 and 157 or 201}\nend",
        "text": "Отойти от дроида",
        "id": 932,
        "no_transition": false
      }
    ]
  },
  {
    "id": 453,
    "text": "   Джедай ",
    "answers": [
      {
        "id": 161,
        "text": "– Есть разговор.",
        "lua_if": "function lua_if()\n--dess.recordSeen = 1 - запись в шлеме\n--dess.saberSeen = 1 - световой меч в сейфе\n--dess.droidSeen = 1 - рассказал дроид\n--dess.complexSeen = 1 - сложное условие: бой со змеёй наверху - видел следы, видел одевание Десс - видел следы сражения\ndess = dess or {}\ndess.recordSeen  = dess.recordSeen or 0\ndess.saberSeen = dess.saberSeen or 0\ndess.droidSeen = dess.droidSeen or 0\ndess.complexSeen = dess.complexSeen or 0\nstyle = style or 1\ndess.stage = dess.stage or 0\ncomplex = complex or {}\ncomplex.saberTracks = complex.saberTracks or 0\n  if complex.saberTracks == 1 and complex.tracks == 1 then\n    dess.complexSeen = 1\n  end\ndess.revealed = (dess.recordSeen == 1 and 1) or (dess.saberSeen == 1 and 1) or (dess.droidSeen == 1 and 1) or (dess.complexSeen == 1 and 1)  or (style == 2 and 1) or 0\nreturn dess.revealed == 1 and dess.stage ~= 3\nend",
        "comment": false
      },
      {
        "id": 453,
        "text": "   ",
        "lua_if": "function lua_if()\n--dess.recordSeen = 1 - запись в шлеме\n--dess.saberSeen = 1 - световой меч в сейфе\n--dess.droidSeen = 1 - рассказал дроид\n--dess.complexSeen = 1 - сложное условие: бой со змеёй наверху - видел следы, видел одевание Десс - видел следы сражения\n\ndess = dess or {}\ndess.recordSeen  = dess.recordSeen or 0\ndess.saberSeen = dess.saberSeen or 0\ndess.droidSeen = dess.droidSeen or 0\ndess.complexSeen = dess.complexSeen or 0\nstyle = style or 1\ndess.stage = dess.stage or 0\ncomplex = complex or {}\ncomplex.saberTracks = complex.saberTracks or 0\n\ndess = dess or {}\ndess.stage = dess.stage or 0\ncomplex = complex or {}\n  if complex.saberTracks == 1 and complex.tracks == 1 then\n    dess.complexSeen = 1\n  end\ndess.revealed = (dess.recordSeen == 1 and 1) or (dess.saberSeen == 1 and 1) or (dess.droidSeen == 1 and 1) or (dess.complexSeen == 1 and 1) or 0\nreturn dess.revealed == 1 and dess.stage ~=3\nend",
        "comment": true
      },
      {
        "id": 122,
        "text": "Отдать световой меч",
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.stage = dess.stage or 0\nreturn lightsaber == 1 and dess.stage == 3\nend",
        "lua_do": "function lua_do()\nlightsaber = 2\nend"
      },
      {
        "id": 453,
        "text": "   ",
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.stage = dess.stage or 0\nreturn lightsaber == 1 and dess.stage == 3\nend",
        "comment": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "id": 124,
        "text": "Осмотреть комнату",
        "need": -124,
        "lua_if": "function lua_if()\nreturn style == 3\nend"
      },
      {
        "id": 194,
        "text": "Пойти вглубь храма",
        "lua_text": "function lua_text()\n\nreturn \"Пойти вглубь храма\" .. (isHistoryContain (155) and \"<s>\n[В зал с лестницей]\" or \"\") \nend",
        "lua_do": "function lua_do()\nvars[\"goto\"] = 155\nvars[\"gofrom\"] = 453\nend"
      },
      {
        "id": 194,
        "text": "Пойти к выходу из храма",
        "lua_text": "function lua_text()\n\nreturn \"Пойти к выходу из храма\" .. (isHistoryContain (189) and \"<s>\n[В угловую комнату с чешуйчатыми созданиями]\" or \"\") \nend",
        "var_set": [
          "goto",
          189,
          "gofrom",
          453
        ]
      },
      {
        "id": 453,
        "text": "Генерация текста",
        "lua_text": "function lua_text()\n--\nlocal text = ((g.previous_id == 246 or g.previous_id == 75) and \"находился\" or \"оказался\") .. \" в длинной комнате в правой части храма. Жёлтые лампы на стенах лишь едва рассеивали мрак, а \" ..  (( (gofrom == 155 or g.previous_id == 75) and \"часть помещения, в которой находился юноша, \") or (g.previous_id == 246 and \"часть помещения, в которой находился юноша, \") or  \"дальняя от юноши часть помещения \") .. (panel3 ~= 1 and \"была почти совсем не освещена. Там же располагалась опустевшая капсула, в которой до этого была заточена Десс.\" or \"была тускло освещена лишь мерцающим силовом полем лучегасителей. Внутри защитного поля угадывались очертания цилиндрической капсулы, в которой до этого была заточена Десс.\") .. \" Сама девушка \"\n\nlocal desviar = {}\ndesviar.awaitDescr = {}\ndesviar.awaitDescr[1] = ((g.previous_id == 246 or g.previous_id == 75) and \"уселась прямо на пол возле \" or \"сидела на полу возле \") .. (panel3 == 1 and \"области, ограниченной барьером,\" or \"прибора\") .. \" в глубокой задумчивости и \" .. ((g.previous_id == 246 or g.previous_id == 75) and \"не обращала на Орнаса внимания.\" or \"даже не обратила внимания на вошедшего Орнаса.\")\n  desviar.awaitDescr[2] = ((g.previous_id == 246 or g.previous_id == 75) and \"встала \" or \"стояла \") .. (panel3 == 1 and \"перед ограниченной силовым барьером областью, всматриваясь сквозь него.\" or \"перед приборной панелью прибора, всматриваясь в какие-то данные на экране.\") .. ((g.previous_id == 246 or g.previous_id == 75) and \"\" or \"<s>\n– Это ты? – спросила она, поворачиваясь к вошедшему юноше. – Нашёл что-нибудь интересное?\")\n    desviar.awaitDescr[3] = ((g.previous_id == 246 or g.previous_id == 75) and \"встала к стене\" or \"стояла у стены\") .. (panel3 == 1 and \" за силовым барьером, уставившись в пустой тёмный угол.\" or \" за опустевшим аппаратом, всматриваясь в темноту пуcтого угла.\") .. ((g.previous_id == 246 or g.previous_id == 75) and \"\" or \"<s>\n– Ты вернулся? – спросила она, выбравшись оттуда и подойдя ближе к пришедшему юноше. – Узнал что-нибудь новое?\")\n      desviar.awaitDescr[4] = ((g.previous_id == 246 or g.previous_id == 75) and \"начала вышагивать вдоль стены\" or \"мерила шагами пространство вдоль стены\") .. (panel3 == 1 and \" перед силовым барьером, задумчиво глядя в то место, где он соприкасался с полом.\" or \" перед опустевшим аппаратом, задумчиво глядя себе под ноги.\") .. ((g.previous_id == 246 or g.previous_id == 75) and \"\" or \"<s>\n– Ну как? – без интереса спросила она, не поднимая взгляда. – Есть что-нибудь?\")\n    desviar.awaitDescr[5] = ((g.previous_id == 246 or g.previous_id == 75) and \"вдруг подпрыгнула и бросилась вслед за Орнасом, на ходу окликная его.<s>\n– Кстати, п\" or \" при появлении Орнаса тут же направилась быстрым шагом ему навстречу и начала говорить ещё до того, как оказалась рядом.<s>\n– П\") .. (panel3 == 1 and \"ока тебя не было, здесь появилась эта ерунда, – выпалила она и махнула рукой в сторону тусклого силового барьера.\" or \"ока тебя не было, здесь произошла какая-то ерунда. Когда я отошла от капсулы, вокруг неё вдруг появилось какое-то силовое поле. Повезло, что я не оказалась внутри. А потом оно пропало и сейчас его снова нет.\") .. \" – Это твоих рук дело?<s>\n– Да, – смущённо ответил юноша, – кажется, я знаю, почему это произошло.<s>\n   Джедай кратко рассказал Десс про энергетические блоки и их связь с лучегасителями, после чего она вернулась назад в угол.\"\nlocal n = math.random(4)\ndessReactionOnField = dessReactionOnField or {}\n  n = (dessReactionOnField.seen ==1 and dessReactionOnField.done ~= 1 and 5) or n\n  dessReactionOnField.done = dessReactionOnField.seen == 1 and 1 or 0\n-- Сделать ответы на вопросы в зависисмости от выполнения условия отображения ответа \"поговорить\"\nreturn text .. desviar.awaitDescr[n]\nend",
        "merge": true
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст",
        "run": [
          270
        ],
        "var_equal": [
          "helmet",
          1
        ]
      }
    ]
  },
  {
    "id": 454,
    "text": "   Юноша подошёл ближе",
    "answers": [
      {
        "id": 454,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = (location1.kuski == 11 and \" к похожему на змею существу, свернувшемуся кольцами на полу около клетки, \" or (\" к клетке, в которой \" .. ( location1.kuski ~= 1 and \"были заточены похожие на змей существа, \" or \"было заточено похожее на змею существо, \") ) ) .. \"и недобро улыбнулся.<s>\n   Затем он вскинул руку и голубые молнии, сорвавшиеся с его пальцев, устремились\" .. (location1.kuski == 11 and \" к созданию. Разряд отбросил его к клетке, по ржавому металлу запрыгали искры. \" or \" к клетке. По ржавому металлу запрыгали искры. \") ..  ( ( (location1.kuski == 2 or location1.kuski == 4 or location1.kuski == 10) and \"Змеи внутри зашипели в агонии и тогда джедай выпустил ещё один сноп молний, с удовольствием наблюдая, как создания покрываются волдырями и иссыхают. Всё новые и новые вспышки голубого света озаряли комнату, пока наконец не осталось ничего, кроме горстки праха на каменном полу. Лишь тогда юноша опустил руку и яростные огоньки в его глазах потухли.\" or \"Змея зашипела в агонии и тогда джедай выпустил ещё один сноп молний, с удовольствием наблюдая за тем, как существо покрывается волдырями и иссыхает. Всё новые и новые вспышки голубого света озаряли комнату, пока наконец не осталось ничего, кроме горстки праха на каменном полу. Лишь тогда юноша опустил руку и яростные огоньки в его глазах потухли.\") ) \nreturn text\nend",
        "merge": true
      },
      {
        "id": 177,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- условие \"Учитель в другой комнате\"\nreturn master.position ~= 177\nend",
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 3\nlocation1.foundTheKey = location1.foundTheKey == 0 and 1 or location1.foundTheKey\nornasStat.darkside = ornasStat.darkside <plus> 3\nachAbsolute = (achAbsolute or 0) <plus> 1\nlocation1.kuski = 0\nend"
      },
      {
        "id": 90,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- условие \"Учитель здесь\"\nreturn master.position == 177\nend",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus>1\nend"
      }
    ]
  },
  {
    "id": 455,
    "text": "– Я могу тебе чем-нибудь помочь?<s>r\n",
    "answers": [
      {
        "id": 455,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.trust = (TL3.trust or 0) <plus> 3\nif style ~= 4 then\ntext = \"– Как хорошо, что ты сам это предложил, – оживился TL-3. – Как ты мог заметить, большинство моих механических систем вышло из строя за время бездействия и теперь мне нужен капитальный ремонт. К тому же, я всё ещё обязан выполнять последнее поручение моего бывшего владельца, так что я был бы очень признателен, если бы ты вдобавок провёл небольшую манипуляцию с микросхемами и исправил этот бессмысленный акт утилитарного отношения к дроидам.\"\nelse\ntext = \"– Разумеется, – тут же ответил TL-3. – Мне нужно, чтобы ты ещё раз разобрал меня и произвёл кое-какие манипуляции с моими схемами. Хорошо, что ты сам это предложил, мне было бы очень неудобно просить.\"\nend\nreturn text .. \"<s>\n   Орнас еле заметно улыбнулся.\"\nend",
        "merge": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 456,
    "text": "– Гипотетически – да, технически – нет. Я всё ещё связан необходимостью выполнять приказы командира, и не смогу помочь тебе, пока ограничитель не будет снят.<s>r\n– У нас же есть шлем, – обрадовался Орнас. – Разве нельзя просто так взять и отменить этот приказ?<s>r\n– Только если к визору шлема прилипла сечатка глаза Феникса, – усмехнулся астромеханик. – После того, как ты разберёшь шлем, ты не сможешь меня понимать, поэтому если рассчитываешь на мою помощь, нужно учесть и это.<s>r\n   Джедай был вынужден согласиться.",
    "answers": [
      {
        "lua_text": "function lua_text()\n-- После этого нужно попросить дроида присоединиться. При высоком фокусе попросить выучить язык. С триггером arraysTL.TL == 3 дроид предложит собрать наушник-переводчик --(arraysTL.TL = 4, supTab.sup328 = 4)\n--local text = \"\"\n   --if arraysTL.TL == 2 then\n      --text = \"Я всё ещё связан необходимостью выполнять приказы командира, и не смогу помочь тебе, пока ограничитель не будет снят.<s>\n– У нас же есть шлем, – обрадовался Орнас. – Разве нельзя просто так взять и отменить этот приказ?<s>\n– Только если к визору шлема прилипла сечатка глаза Феникса, – усмехнулся астромеханик. – После того, как ты разберёшь шлем, ты не сможешь меня понимать, поэтому если рассчитываешь на мою помощь, нужно учесть и это.<s>\n   Джедай был вынужден согласиться.\"\n   --arraysTL.TL = 3\n   --else text = \"Я всё ещё связан необходимостью выполнять последний приказ этого ведроголового болвана. Вот если бы кто-нибудь смог перепаять пару микрочипов в моём блоке управления...<s>\n   Орнас понял намёк дроида, но промолчал.\"\n  -- end\n--return text\nend",
        "super_calculate": false,
        "id": 456,
        "calculate": true,
        "text": "Генерация текста",
        "merge": false
      },
      {
        "id": 452,
        "text": "– Ясно...",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 457,
    "text": "– Я заранее позаботился обо всём, в углу под завалами спрятан ящик со всем необходимым. К тому же потребуется специальный чип, который тебе придётся извлечь из шлема.<s>r\n   Дроид проигнорировал удивление, возникшее на лице Орнаса при упоминании шлема, и продолжил.<s>r\n– Для начала ты должен открутить мне голову. Буквально. Для этого есть специальные кнопки по бокам. Пожалуйста, будь с ней очень бережен и положи куда-нибудь неподалеку. В месте крепления головы на корпусе расположены фиксирующие болты, нужно выкрутить один справа и один слева. После этого можно будет извлечь блок управления, потяни его вверх и немного вперёд, затем аккуратно отложи в сторону. Дальше – самое интересное. В ящике лежат ёмкости со смазкой, охлаждающей жидкостью и жидким азотом. Нужно залить смазку в резервуар около поршней, жидкий азот – в другой, расположенный примерно в центре, а хладагент – в охлаждающий контур, обвивающий резервуар с азотом. На задней панели располагаются элементы питания и аккумуляторы, там же находится панель управления техническими процессами. С её помощью нужно запустить вручную три-четыре цикла прокачки компрессора, затем переключить на работу в автономном режиме.<s>r\n– Подожди немного, я не успеваю запоминать всё это! – взмолился Орнас.",
    "answers": [
      {
        "id": 342,
        "text": "Дальше"
      },
      {
        "calculate": true,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.patience = TL3.patience or 0 <plus> 1\nTL3.patience = (TL3.patience == 5 and 6) or TL3.patience\nend",
        "text": "Новый ответ. введите текст",
        "id": 341,
        "var_set": [
          "377_plats_in_number",
          9
        ]
      }
    ]
  },
  {
    "id": 458,
    "text": "   Взвесив все риски, юноша активировал световой меч, аккуратно приблизил лезвие к поверхности сейфа недалеко от электронной панели замка и уверенным движением утопил клинок в оплавляющийся материал на приличную глубину.",
    "answers": [
      {
        "id": 230,
        "text": "Углубить лезвие ещё немного и вскрыть сейф",
        "lua_do": "function lua_do()\nbang226 = 0 -- неудачное вскрытие\nend"
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "lua_do": "function lua_do()\nbang226 = 100 -- успешное вскрытие\nend",
        "text": "Осторожно вскрыть сейф",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 1\nend",
        "id": 230
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "lua_do": "function lua_do()\nbang226 = 100 -- успешное вскрытие\nend",
        "text": "Осторожно вскрыть сейф",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn  style == 3\nend",
        "id": 230
      }
    ]
  },
  {
    "id": 459,
    "text": "– Как ты здесь оказался?<s>r\n– Вариантов всего два, – начал дроид, – либо меня собрали прямо здесь, либо я прилетел сюда на звездолёте. Какой тебе больше нравится?<s>r\n– ",
    "answers": [
      {
        "id": 459,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.focusTL = TL3.focusTL or 0\nTL3.trust = TL3.trust or 0\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.KnowDess = TL3.conditions.KnowDess or 0\ncondition = condition or {}\ncondition.knowTheNameOfShip = condition.knowTheNameOfShip or 0\nmes218  =mes218 or 0\ndess = dess or {}\ndess.recordSeen = dess.recordSeen or 0\n\nif condition.knowTheNameOfShip == 1 and mes218 == 1 and dess.recordSeen == 1 then\n  text = \"Ты прибыл вместе с командой «Чёрного Пламени»? – на всякий случай уточнил джедай.<s>\n– Да, всё так.<s>\n– А с какой целью вы сюда прибыли?<s>\n– Это допрос? – напрягся астромеханик. – Какое тебе дело?<s>\n– Я слышал запись в дневнике капитана и входящее сообщение. – спокойно продолжил юноша. – Ваше задание здесь – собрать камеру? Но для кого она?<s>\n– Какой ты осведомлённый... – нехотя отозвался дроид. – Для одной особы. Но она оказалась не в духе и мы не поладили.<s>\n   Джедай чувствовал, что его информированность впечатлила астромеханика, пусть тот и не был готов сам делиться подробностями.\"\n  TL3.conditions.supCond = 1\n  TL3.focusDess = (TL3.focusDess or 0) <plus>2\n  TL3.conditions.KnowDess = TL3.conditions.KnowDess ~= 0 and TL3.conditions.KnowDess or 1\nelse\n  text = (condition.knowTheNameOfShip == 1 and \"Ты прибыл вместе с командой «Чёрного Пламени»? – на всякий случай уточнил джедай.<s>\n– Да, всё так.<s>\n– \" or \"\") .. \"А с какой целью вы сюда прибыли?<s>\n– Это допрос? – напрягся астромеханик. – Какое тебе дело?<s>\n– \"\n    if dess.recordSeen ~= 1 and mes218 ~= 1 then\n      text = text .. \"Просто интересно, – ответил юноша, не найдя более веских доводов.<s>\n– Извини, но я не могу раскрыть подробности задания, – даже в текстовом переводе ощущалось, что дроида не особо беспокоило, поверит ли ему Орнас.<s>\n   Пожалев, что не оказался готов к такому развитию событий, джедай лишь сердито смотрел на неподвижного собеседника.\"\n    elseif mes218 == 1 then\n      text = text .. \"Я видел входящее сообщение в кабине звездолёта, – неуверенно продолжил юноша. – Ваше задание здесь – собрать камеру? Но для кого она?<s>\n– Извини, но я не могу раскрыть подробности задания, – даже в текстовом переводе ощущалось, что дроида не особо беспокоило, поверит ли ему Орнас.<s>\n   Пожалев, что не оказался готов к такому развитию событий, джедай лишь сердито смотрел на неподвижного собеседника.\"\n      TL3.conditions.supCond = 1\n      TL3.focusDess = (TL3.focusDess or 0) <plus>1\n    else\n       text = text .. \"Я слышал запись из дневника капитана, – неуверенно продолжил юноша. – Кто эта девчонка, для которой вы привезли капсулу? Она правда джедай?<s>\n– Извини, но я не могу раскрыть подробности задания, – даже в текстовом переводе ощущалось, что дроида не особо беспокоило, поверит ли ему Орнас.<s>\n   Пожалев, что не оказался готов к такому развитию событий, Орнас лишь сердито смотрел на неподвижного собеседника.\"\n      TL3.conditions.supCond = 1\n      TL3.focusDess = (TL3.focusDess or 0) <plus>1\n    end\n  TL3.focusTL = TL3.focusTL <plus> condition.knowTheNameOfShip <plus> mes218 <plus> dess.recordSeen\n  TL3.trust = TL3.trust <plus> condition.knowTheNameOfShip\nend\nTL3.focusTL = TL3.focusTL <plus> condition.knowTheNameOfShip <plus> mes218 <plus> dess.recordSeen\n  TL3.trust = TL3.trust <plus> condition.knowTheNameOfShip\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "merge": false,
        "lua_do": "function lua_do()\ntic = (tic or 0) <plus> 1\nif tic == 1 then\ncondition.knowTheNameOfShip = condition.knowTheNameOfShip == 1 and 0 or 1\nelseif tic == 2 then\nmes218 = mes218 == 1 and 0 or 1\nelse\ndess.recordSeen = dess.recordSeen == 1 and 0 or 1\nend\ntic = tic == 3 and 0 or tic\nshowPage{id = g.current_id}\nend",
        "text": "Для автора: смена условий",
        "id": 460,
        "no_transition": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 460,
    "text": "– Что случилось с командой корабля?<s>r\n– Что ты имеешь в виду? – притворно удивился астромеханик.<s>r\n– ",
    "answers": [
      {
        "id": 460,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.focusTL = TL3.focusTL or 0\nTL3.trust = (TL3.trust or 0) <plus> 3\ncondition = condition or {}\ncondition.knowTheNumberOfSquad = condition.knowTheNumberOfSquad or 0\ncondition.endOfFenix = condition.endOfFenix or 0\ncondition.knowTheNameOfShip = condition.knowTheNameOfShip or 0\ncondition.knowTheNamesOfSquad = condition.knowTheNamesOfSquad or 0\nlocal a = condition.knowTheNumberOfSquad <plus> condition.endOfFenix <plus> condition.knowTheNameOfShip <plus> condition.knowTheNamesOfSquad\n\n  text = (condition.endOfFenix == 1 and \"Из записи в дневнике понятно, что сам Феникс вступил в бой с терентатеком и скорее всего погиб. \" or \"\") ..(condition.knowTheNameOfShip == 1 and \"Я видел «Чёрное Пламя», \" or \"Я видел звездолёт, \") .. (condition.knowTheNumberOfSquad == 1 and \"я знаю, что после посадки в живых осталось семеро членов экипажа. \" or \"таким судном не может управлять один человек даже с десятком дроидов, значит была и команда. \") .. (condition.knowTheNamesOfSquad == 1 and \"Я знаю, что группа Уби Сунда отправилась вглубь храма. \" or \"\") .. \"Ты можешь сказать, что с ними случилось?\" .. ((a < 1 and \"<s>\n– Могу, конечно, – угрюмо ответил TL-3. – Все погибли, по-другому и быть не могло.<s>\n   Неприятное чувство охватило джедая, как-будто он своей неосведомлённостью мог задеть дроида.\") or (a > 3 and \"<s>\n– Всё-то ты знаешь, – устало ответил TL-3. – После ухода Феникса и первой группы оставшиеся ждали несколько часов, но когда стало ясно, что без шлема никто отсюда не выберется – отправились за ним. Думаю, что они тоже погибли.<s>\n   Орнас посочувствовал незавидной судьбе экипажа, оказавшегося в такой ситуации.\") or \"<s>\n– Не так уж много ты знаешь, – ответил TL-3. – Но ответ простой – все погибли.<s>\n   Хотя внешне ничего не изменилось, но джедай не мог отделаться от ощущения, что дроид стал выглядеть расстроенно.\")\n  TL3.trust = TL3.trust <plus> condition.knowTheNamesOfSquad\nTL3.focusTL = TL3.focusTL <plus> condition.knowTheNumberOfSquad <plus>condition.knowTheNamesOfSquad <plus> condition.knowTheNameOfShip <plus> condition.endOfFenix <plus> (isHistoryContain(187) and 1 or 0)\n\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "merge": false,
        "lua_do": "function lua_do()\ntic = (tic or 0) <plus> 1\nif tic == 1 then\ncondition.knowTheNumberOfSquad = condition.knowTheNumberOfSquad == 1 and 0 or 1\nelseif tic == 2 then\ncondition.endOfFenix = condition.endOfFenix == 1 and 0 or 1\nelseif tic == 3 then\ncondition.knowTheNameOfShip = condition.knowTheNameOfShip == 1 and 0 or 1\nelse\ncondition.knowTheNamesOfSquad = condition.knowTheNamesOfSquad == 1 and 0 or 1\nend\ntic = tic == 4 and 0 or tic\nshowPage{id = g.current_id}\nend",
        "text": "Для автора: смена условий",
        "id": 460,
        "no_transition": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 461,
    "text": "– Что ты знаешь о браслетах из тёмного металла?<s>r\n– О, ты нашёл где-то управляющий браслет? – оживился дроид. – Что успел выяснить о них?<s>r\n",
    "answers": [
      {
        "id": 461,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.touchTheArmlet = TL3.conditions.touchTheArmlet  or 0\nTL3.conditions.touchTheArmletSafe = TL3.conditions.touchTheArmletSafe or 0\ncondition = condition or {}\ncondition.knowTheControlArmlet = condition.knowTheControlArmlet or 0\ncondTakeArmletsOff = condTakeArmletsOff or 0\nTL3.focusTL = TL3.focusTL or 0\n\n  if TL3.conditions.touchTheArmlet == 1 and (TL3.conditions.touchTheArmletSafe == 1 or condTakeArmletsOff == 1) and condition.knowTheControlArmlet == 1 then\n    TL3.focusTL = TL3.focusTL <plus> 4\n    text = \"– Ну... – начал вспоминать Орнас. – В одной из записей голосового дневника упоминались эти браслеты. Когда я прикоснулся к одному из них в зале с кораблём, охранные дроиды отключились, а когда я повторил это перед сейфом, то заметил, что символы на них очень похожи.<s>\n– Выходит, ты и сам знаешь всё необходимое, – подытожил TL-3. – Хорошо, что ты не нашёл эти браслеты раньше: если бы я увидел на тебе любой из них, то сгоряча мог бы подумать всякое...<s>\n   Хотя джедай и не узнал ничего нового, но его осведомлённость, кажется, произвела хорошее впечатление на астромеха.\"\n  elseif TL3.conditions.touchTheArmlet == 1 or (TL3.conditions.touchTheArmletSafe == 1  or condTakeArmletsOff == 1) or condition.knowTheControlArmlet == 1 then\n    TL3.focusTL = TL3.focusTL <plus> (TL3.conditions.touchTheArmlet == 1 and 1 or 0) <plus> ((TL3.conditions.touchTheArmletSafe == 1 or condTakeArmletsOff == 1) and 2 or 0) <plus>\ncondition.knowTheControlArmlet\n    text = \"– Ну... – начал вспоминать Орнас. – \" .. (condition.knowTheControlArmlet == 1 and \"В одной из записей голосового дневника упоминались эти браслеты. \" or \"\") .. (TL3.conditions.touchTheArmlet == 1 and \"Когда я прикоснулся к одному из них в зале с кораблём, охранные дроиды отключились. \" or \"\") .. ((TL3.conditions.touchTheArmletSafe == 1 or condTakeArmletsOff == 1) and \"Я заметил, что символы на браслетах такие же, как и на маленьком сейфе в складском отсеке корабля. \" or \"\") .. \"<s>\n– Хоть что-то... – как будто разочарованно произнёс TL-3. – \" .. (condition.knowTheControlArmlet ~= 1 and \"На самом деле, даже в дневнике Феникса упоминались эти браслеты. \" or \"\") .. (TL3.conditions.touchTheArmlet ~= 1 and \"С их помощью можно отключить охранных дроидов, выставленных в зале с кораблём. \" or \"\") .. ((TL3.conditions.touchTheArmletSafe ~= 1 and condTakeArmletsOff ~= 1) and \"И стоит добавить, что эти обручи обеспечивают доступ к маленькому сейфу на «Чёрном Пламени».\" or \"\") ..  \"<s>\n   Джедай задумался. Он, конечно, узнал кое-что новое, но, кажется, не смог произвести максимально благоприятного впечатления на астромеха.\"\n  else\ntext = \"– Ну... – начал вспоминать Орнас и замялся, поняв, что на самом деле ничего сказать не может.<s>\n– Что, совсем ничего? – разочарованно произнёс TL-3. – Значит, не так уж тебе это и нужно.<s>\n   Джедай мысленно выругался: он не только не узнал ничего нового, но и произвёл нелучшее впечатление на астромеханика.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 461,
        "text": "Для автора: смена условий",
        "lua_do": "function lua_do()\ntic = (tic or 0) <plus> 1\nif tic == 1 then\nTL3.conditions.touchTheArmlet = TL3.conditions.touchTheArmlet == 1 and 0 or 1\nelseif tic == 2 then\ncondition.knowTheControlArmlet = condition.knowTheControlArmlet == 1 and 0 or 1\nelse\nTL3.conditions.touchTheArmletSafe = TL3.conditions.touchTheArmletSafe == 1 and 0 or 1\nend\ntic = tic == 3 and 0 or tic\nend",
        "merge": false
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 462,
    "text": "– Что ты знаешь о сейфах на корабле?<s>r\n– Эти сейфы и их содержимое – собственность капитана. Почему ты вообще решил, что я тебе что-нибудь расскажу о них?<s>r\n",
    "answers": [
      {
        "id": 462,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nbang229 = bang229 or 0\nTL3 = TL3 or {}\nTL3.focusTL = TL3.focusTL or 0\nTL3.trust = TL3.trust  or 0\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.openedWithSaber = TL3.conditions.openedWithSaber or 0\nTL3.conditions.openedNorm = TL3.conditions.openedNorm or 0\nTL3.conditions.touchTheArmletSafe = TL3.conditions.touchTheArmletSafe or 0\ndestroy224 = destroy224 or 0\ncode_number = code_number or 1\nlocal code = ((code_number == 1 or code_number == 2 or code_number == 4 or code_number == 6 or code_number == 8) and 1) or 2 -- 1 - третий у крокодилов, 2 - второй\n\n  if bang229 == 1 then\n    text = \"– Я пытался вскрыть один из этих сейфов, – неуверенно начал Орнас, – и он взорвался. Весь корабль уничтожен, ничего не осталось.<s>\n– Не может быть... – сказал TL-3 и затих. Кажется, такое известие очень плохо отразится на доверии дроида к джедаю.\"\n    TL3.focusTL = TL3.focusTL - 10\n    TL3.trust = TL3.trust - 10\n  elseif TL3.conditions.openedWithSaber == 1 then\n    text = \"– Я пытался вскрыть один из этих сейфов с помощью светового меча, – неуверенно начал Орнас.<s>\n – Как нецивилизованно... – возмутился TL-3. – Раз так, тогда смысла говорить с тобой об этом нет.<s>\n   Кажется, такое известие плохо отразится на доверии дроида к джедаю.\"\n    TL3.focusTL = TL3.focusTL - 3\n    TL3.trust = TL3.trust - 3\n  elseif TL3.conditions.touchTheArmletSafe == 1 and TL3.conditions.openedNorm == 1 and destroy224 == 1 then\n    text = \"– Я подобрал комбинацию к сейфу с оружием, – неуверенно начал Орнас, – и попытался сопоставить рисунки на втором сейфе с теми, что появляются на браслете из такого же металла.<s>\n– А ты сообразительный, – одобрительно заявил астромеханик. – А что с тем протокольным дроидом, который там остался?<s>\n– Я его уничтожил, – понуро признался джедай, ругая себя за вспылчивость и представляя, насколько катастрофично это скажется теперь на доверии TL-3.<s>\n– Давно пора, – на удивление бодро отреагировал дроид. – Не представляешь, как он меня раздражал. Пожалуй, я помогу тебе.<s>\n   И он рассказал юноше, что для открытия маленького сейфа необходимо выбрать три элемента, которые соответствуют надписям на контрольных браслетах. Первая часть находилась на браслете, который принадлежал командиру. \" .. (code == 1 and \"Группа, отправившаяся на его поиски, забрала с собой третий браслет, а второй остался у дежурного на корабле.\" or \"Второй браслет забрала группа, отправившаяся на его поиски, а третий остался у дежурного на корабле.\")\n    TL3.focusTL = TL3.focusTL <plus> 4\n    TL3.trust = TL3.trust <plus> 1\n  else\n     TL3.focusTL = TL3.focusTL <plus> TL3.conditions.touchTheArmletSafe <plus> (2 * TL3.conditions.openedNorm) <plus> destroy224\n    TL3.trust = TL3.trust <plus> destroy224\n    text = (TL3.conditions.openedNorm == 1 and \"– Я подобрал комбинацию к сейфу с оружием, – неуверенно начал Орнас, – \" or \"– Я не смог подобрать комбинацию к большому сейфу, – неуверенно начал Орнас, – \") .. (TL3.conditions.touchTheArmletSafe == 1 and \"и попытался сопоставить рисунки на втором сейфе с теми, что появляются на браслете из такого же металла.\" or \"и не понял, что нужно делать с маленьким.\") .. \"<s>\n– А что с тем протокольным дроидом, который там остался?<s>\n– \" .. (destroy224 == 1 and \"Я его уничтожил, – понуро признался джедай, ругая себя за вспылчивость и представляя, насколько катастрофично это скажется теперь на доверии TL-3.<s>\n– Давно пора, – на удивление бодро отреагировал дроид. – Не представляешь, как он меня раздражал.\" or \"Он всё ещё ходит там по кругу и повторяет свой бессмысленный монолог.<s>\n– Жаль, что ты его не уничтожил, – цинично отозвался дроид. – Не представляешь, как он меня раздражал.\") .. \"<s>\n   Поняв, что большего о сейфах от TL-3 узнать не удастся, Орнас нахмурился, а его кулаки непроизвольно сжались.\"\n--\"я думал джедаи умнее\" .. \" надо было этого хрена разбить, задолбал \"\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 462,
        "text": "Для автора: смена условий",
        "lua_do": "function lua_do()\ntic = (tic or 0) <plus> 1\nif tic == 1 then\nTL3.conditions.touchTheArmletSafe = TL3.conditions.touchTheArmletSafe == 1 and 0 or 1\nelseif tic == 2 then\nTL3.conditions.openedNorm = TL3.conditions.openedNorm == 1 and 0 or 1\nelse\ndestroy224 = destroy224 == 1 and 0 or 1\nend\ntic = tic == 3 and 0 or tic\nend",
        "merge": false
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 463,
    "text": "– Ты знаешь что-нибудь об этом месте?<s>r\n– У меня много различных данных, – уклончиво ответил TL-3. – А сам-то ты много успел осмотреть?<s>r\n– ",
    "answers": [
      {
        "id": 463,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\npics = {} or 0\npics.a1 = pics.a1 or 0\npics.a2 = pics.a2 or 0\npics.a3 = pics.a3 or 0\npics.a4 = pics.a4 or 0\npics.a5 = pics.a5 or 0\npics.a7 = pics.a7 or 0\npics.a9 = pics.a9 or 0\nlocal rooms = (pics.a1 <plus> pics.a2 <plus> pics.a3 <plus> pics.a4 <plus> pics.a5 <plus> pics.a7 <plus> pics.a9) == 7 and 2 or 0\nornasStat = ornasStat or {}\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nlocal health = (ornasStat.firedArm <plus> ornasStat.bloodedLeg) == 0 and 2 or 0\n\nTL3 = TL3 or {}\nTL3.focusSelf = TL3.focusSelf or 0\nTL3.focusSelf = TL3.focusSelf <plus> health <plus> rooms\n\ntext = (rooms == 2 and \"Весь первый этаж, – ответил Орнас, но тут же честно добавил, – то есть побывал в каждой комнате, но возможно я чего-то ещё не знаю.\") or \"Почти весь первый этаж, – ответил Орнас немного сконфуженно. – Наверняка здесь ещё много того, о чём я не знаю.\"\ntext = text .. \"<s>\n– И ты до сих пор жив и здоров? – удивился астромеханик.<s>\n\" .. ((health == 2 and \"– Ну да, – недоуменно пожал плечами юноша.<s>\n– Неплохо... Молодец, – казалось, что TL-3 удовлетворённо поставил очередную галочку в невидимом списке достижений Орнаса.<s>\n   Астромех умолк на какое-то время, давая понять, что тема закрыта.\") or (\"– Ну, можно и так сказать, – неуверенно проговорил юноша, \" .. (ornasStat.firedArm == 1 and ornasStat.bloodedLeg == 1 and \"понимая, что дроид не мог не заметить кровавую рану на ноге и ожога на плече.\" or (ornasStat.bloodedLeg == 1 and \"понимая, что дроид не мог не заметить кровавую рану на ноге.\") or \"понимая, что дроид не мог не заметить ожога на плече.\") .. \"<s>\n– Ну да, как же, – хмыкнул TL-3 и казалось, что он поставил жирный прочерк в невидимом списке достижений Орнаса.<s>\n   Астромех умолк на какое-то время, давая понять, что тема закрыта.\"))  -- показывает раны, если есть. А ещё джедай...\"\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 464,
    "text": "– Ты знаешь что-нибудь о страшных чешуйчатых зверях, которые обидают здесь в одной из комнат?<s>r\n– У меня есть почти исчерпывающая информация обо всём на первом уровне здания, – похвастался дроид. – Значит тебе не понравилось знакомство с обитателями угловой комнаты?<s>r\n– ",
    "answers": [
      {
        "id": 464,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ndess = dess or {}\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.killAnimals = TL3.conditions.killAnimals or 0\nlov189 = lov189 or 0\nTL3.focusSelf = TL3.focusSelf or 0\nTL3.trust = TL3.trust or 0\ncreaturesPacified = creaturesPacified or 0\n\n--условие: звери усмирены - отдельный текст\n  if creaturesPacified == 1 then\n    text = \"Почему же, вполне понравилось, – отозвался юноша. – Можно сказать, мы с ними договорились и теперь не мешаем друг другу.<s>\n– Тогда что ты хочешь узнать от меня? – казалось, дроид был огорчён, что Орнас оказался в чём-то осведомлён не хуже его самого. – Но ты, конечно, молодец. Сразу видно: настоящий джедай...\"\n    TL3.focusSelf = TL3.focusSelf <plus> 4\n    TL3.trust = TL3.trust <plus> 4\n  elseif lov189 ==  1 then\n    text = \"Они мешают мне, – отозвался юноша, – и я запер их в ловушке лучегасителей.<s>\n– Это ты здорово придумал. Но на самом деле звери не так уж и опасны: их может разозлить яркий свет, но звук голоса сразу успокаивает.<s>\n   Орнас пообещал себе попробовать этот вариант, хотя и не был уверен в правдивости астромеханика.\"\n    TL3.focusSelf = TL3.focusSelf <plus> 3\n    TL3.trust = TL3.trust <plus> 3\n    dess.bonus = 1\n  elseif TL3.conditions.killAnimals == 1 then\n    text = \"Я убил их всех, – холодно отозвался юноша и в его взгляде на мгновенье сверкнула ярость сражения.<s>\n– Эх, а ещё джедай... – разочарованно протянул TL-3. – Чему вас сейчас только учат в Ордене? Их же можно было так просто успокоить! В любом случае, говорить об этом больше нет смысла.<s>\n   Орнас нахмурился, но промолчал.\"\n    TL3.trust = TL3.trust - 1\n  else\n    text = \"Они мешают мне, – холодно отозвался юноша, – и я просто оставил их там. Пока.<s>\n– Сбежал? – с насмешкой выпалил TL-3. – А ты точно джедай? С ними ведь так просто договориться – их успокаивает звук голоса. Разве ты не пробовал?<s>\n   Орнас промолчал, но пообещал себе попробовать этот вариант, хотя и не был до конца уверен в правдивости слов астромеханика.\"\n    dess.bonus = 1\n  end \nreturn text\nend",
        "merge": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 465,
    "text": "– Что ты знаешь об энергоблоках?<s>r\n– Ты их тоже заметил? – бодро отреагировал астромех. – Все успел осмотреть?<s>r\n– ",
    "answers": [
      {
        "id": 465,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.useBlock = TL3.conditions.useBlock or {}\nTL3.conditions.useBlock.p1 = TL3.conditions.useBlock.p1 or 0\nTL3.conditions.useBlock.p2 = TL3.conditions.useBlock.p2 or 0\nTL3.conditions.useBlock.p3 = TL3.conditions.useBlock.p3 or 0\nTL3.conditions.useBlock.p4 = TL3.conditions.useBlock.p4 or 0\nTL3.conditions.useBlock.p5 = TL3.conditions.useBlock.p5 or 0\nlocal a = TL3.conditions.useBlock.p1 <plus> TL3.conditions.useBlock.p2 <plus> TL3.conditions.useBlock.p3 <plus> TL3.conditions.useBlock.p4 <plus> TL3.conditions.useBlock.p5\nTL3.focusSelf = (TL3.focusSelf or 0) <plus> (a == 5 and 2 or 0)\n\ntext = \"Все? – удивлённо переспросил юноша, – \" .. (a == 5 and \"Да, кажется все. Четыре блока и панель в зале со звездолётом, верно?<s>\n– Да, именно так. И на всех идиотские пафосные фразы помешанного на смерти и бессмертии ситха.<s>\n   TL-3 рассказал Орнасу, что все блоки связаны в одну сеть и управляются панелью, к которой команда «Чёрного пламени» попыталась подключить сам корабль, врезав самодельный переключатель. Для активации каждого блока должен использоваться нижний переключатель, но сколько сам дроид не бился над панелью возле собственноручно собранной зарядной станции, активировать подачу энергии ему не удалось.\" or \"Может быть я и пропустил что-нибудь, но выглядят они все примерно одинаково.<s>\n– Тогда зачем ты меня спрашиваешь? – возмущённо загудел дроид. – Пойди и посмотри сначала сам, может и так разберёшься.<s>\n   Орнас недовольно нахмурился, но спорить не стал.\") \nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "merge": false,
        "lua_do": "function lua_do()\nTL3.conditions.useBlock.p1 = TL3.conditions.useBlock.p1 == 0 and 5 or 0\nshowPage{id = g.current_id}\nend",
        "text": "Для автора: смена условий",
        "id": 460,
        "no_transition": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 466,
    "text": "– Ты знаешь что-нибудь о ключах с узором на ручке?<s>r\n– Каких-каких ключах? – переспросил дроид, хотя никак не мог не услышать сказанного. – Может у тебя есть эти ключи с собой и ты просто покажешь?<s>r\n– ",
    "answers": [
      {
        "id": 466,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nachievements = achievements or {}\nachievements.centralMechSeen = achievements.centralMechSeen or 0\nkey_on_position_1_avail = key_on_position_1_avail or 1\nkey_on_position_2_avail = key_on_position_2_avail or 1\nkey_on_position_3_avail = key_on_position_3_avail or 1\nkey_on_position_4_avail = key_on_position_4_avail or 1\nkey_on_position_5_avail = key_on_position_5_avail or 1\nkey_on_position_6_avail = key_on_position_6_avail or 1\nlocal a = (key_on_position_1_avail <plus> key_on_position_2_avail <plus> key_on_position_3_avail <plus> key_on_position_4_avail <plus> key_on_position_5_avail <plus> key_on_position_6_avail) == 6 and 0 or 1\nTL3 = TL3 or {}\nTL3.focusSelf = TL3.focusSelf or 0\n\n  if a == 0 then\n    text = \"Нет, сейчас их у меня нет, – расстроенно пробормотал юноша и на всякий случай похлопал себя по поясу, но ключи так и не появились.<s>\n– Ну, тогда я ничем не могу помочь, – безучастно заявил TL-3 .<s>\n   Орнас тяжело вздохнул и переступил с ноги на ногу.\"\n  else\n    TL3.focusSelf = TL3.focusSelf <plus> 2\n     text = \"Да, конечно, – юноша снял с пояса ключ и повертел им перед датчиками астродроида.<s>\n– Знаешь, кажется команда находила такие где-то здесь, – наконец изрёк после небольшой паузы TL-3. –  Должно быть, это элементы какой-то загадки. Наверняка где-то здесь есть какой-то механизм, куда такие ключи подойдут.\"\n    if achievements.centralMechSeen == 1 then\n      TL3.focusSelf = TL3.focusSelf <plus> 2\n      text = text .. \"<s>\n– Я даже нашёл один такой, – гордо добавил джедай, – в центральном зале.<s>\n   Астромеханик ничего не ответил, но, кажется, отметил для себя успехи и целеустремлённость Орнаса.\"\n    else text = text .. \"<s>\n   Орнас тяжело вздохнул и вернул ключ обратно на пояс.\"\n    end\n  end\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "merge": false,
        "lua_do": "function lua_do()\ntic = (tic or 0) <plus> 1\nif tic == 1 then\nlocal a = key_on_position_1_avail == 1 and 0 or 1\nkey_on_position_1_avail = a\nkey_on_position_2_avail = a\nkey_on_position_3_avail = a\nkey_on_position_4_avail = a\nkey_on_position_5_avail = a\nkey_on_position_6_avail = a\nelse\n achievements.centralMechSeen =  achievements.centralMechSeen == 1 and 0 or 1\nend\ntic = tic == 2 and 0 or tic\nshowPage{id = g.current_id}\nend\n\n",
        "text": "Для автора: смена условий",
        "id": 460,
        "no_transition": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 467,
    "text": "– Я видел тут бакта-камеру, ты знаешь, для чего она здесь?<s>r\n– Для одного человека, – уклончиво ответил астромех. – Мы должны были встретиться с ним здесь. Сам понимаешь, в таком месте абы кто не появится. Но всё пошло не по плану, так что это уже неважно.",
    "answers": [
      {
        "id": 335,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nTL3 = TL3 or {}\nTL3.focusDess = TL3.focusDess or 0\ncondition = condition or {}\ncondition.ee = condition.ee or 0\ncondition.freeDess = condition.freeDess or 0\nlocal a = condition.ee == 1 and 1 or 0 -- условие \"видел камеру без силового поля\"\nlocal b = condition.freeDess == 1 and 1 or 0 -- условие освободил Десс\nlocal text = \"\"\nif a == 1 then\nTL3.focusDess = TL3.focusDess <plus> 1\ntext = \"<s>\n– Почему же неважно? – изумился Орнас. – Ведь человек провёл в этой капсуле столько времени!<s>\n– Неважно, потому что мы не справились с миссией. Камеру-то мы поставили, но настроить не успели и человек в камеру лезть не захотел.\"\n   if b == 1 then\n     text = text .. \"<s>\n– Я освободил девушку из этой камеры! – не выдержав сказал джедай прямо. – Кто она?<s>\n   Дроид молчал какое-то время, но потом всё-таки начал рассказывать.<s>\n– Я знаю только минимум, необходимый для выполнения задания. Она бывший джедай, Феникс должен был поместить её в камеру для гибернического сна. Но она не пошла на сотрудничество, как обещал заказчик, и скрылась сразу после того, как мы выкрали её световой меч. Теперь она считает нас врагами. Но если подумать, то враг наёмников с «Чёрного Пламени» не обязательно враг для тебя. Может быть ты сможешь понять её лучше, чем мы.<s>\n– Теперь, наверное, да, – задумчиво протянул Орнас, но всё ещё не мог понять, как она всё-таки оказалась в камере.\"\ndess = dess or {}\ndess.understanding = 2\ndess.revealed = 1\ndess.droidSeen = 1\n\ng.achievements = g.achievements or {}\ng.achievements.diplomat3 = g.achievements.diplomat3 or 0\ng.achievements.alarm = g.achievements.diplomat3 == 0 and 11 or 0\ng.achievements.diplomat3  = 1\n\n\n   else\n   text = text .. \" Рекомендую держаться от него подальше. Он опасен и обладает способностями, из-за которых невозможно понять, что он задумал и когда нанесёт удар в спину.<s>\n   Орнас порадовался, что не стал отключать камеру, когда была такая возможность, раз этого человека считают опасным даже наёмники. Но как она всё-таки оказалась в камере?\"\n   end\nelse\ntext = \"<s>\n– Ну да, неважно, – задумчиво протянул Орнас, жалея, что не осмотрел камеру.\"\nend\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "merge": false,
        "lua_do": "function lua_do()\ntic = (tic or 0) <plus> 1\nif tic == 1 then\ncondition.ee = condition.ee == 1 and 0 or 1\nelse\n condition.freeDess = condition.freeDess == 1 and 0 or 1\nend\ntic = tic == 2 and 0 or tic\nshowPage{id = g.current_id}\nend\n\n\n",
        "text": "Для автора: смена условий",
        "id": 460,
        "no_transition": true
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст",
        "run": [
          452
        ]
      }
    ]
  },
  {
    "id": 468,
    "text": "   Орнас медленно двигался вверх, каждым шагом поднимая в воздух клубы невесомой красноватой пыли. Смутно знакомый пряный запах защекотал ноздри и будто заполнил сознание джедая. Уже через несколько мгновений всё прочее стало казаться ему неважным. Широкие ступени поплыли перед глазами, сливаясь в нечто неразборчивое. Мысли бесконечно растягивались и сбивались, хаотично всплывали в голове обрывки фраз и отдельные слова. \"Сила... Покой... Эмоции... Страсть...\"",
    "answers": [
      {
        "id": 469,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn codeBonus\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn not codeBonus\nend",
        "id": 887,
        "instant": true,
        "text": "\"Покой – это ложь, есть только страсть\"",
        "lua_do": "function lua_do()\ncodeBonus = \"sith\"\nornasStat.darkside = ornasStat.darkside <plus> 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn not codeBonus\nend",
        "lua_do": "function lua_do()\ncodeBonus = \"jedy\"\nornasStat.darkside = ornasStat.darkside - 1\nend",
        "text": "\"Нет эмоций, есть покой\"",
        "id": 887,
        "instant": true
      },
      {
        "lua_if": "function lua_if()\nreturn not codeBonus\nend",
        "lua_do": "function lua_do()\ncodeBonus = \"none\"\nend",
        "text": "\"Сила объединяет страсть и покой\"",
        "id": 887,
        "instant": true
      },
      {
        "id": 468,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\nlocal text = \"\"\n\nif codeBonus == \"jedy\" then\n  text = \"<s>\n   Уже на грани потери сознания Орнас сумел вычленить из нахлынувшего на него хаоса заученные до автоматизма строки кодекса джедаев:<s>\n  <s><s>\"Нет эмоций - есть покой.<s>\n   Нет неведения - есть знание.<s>\n   Нет страстей - есть ясность мыслей.<s>\n   Нет хаоса - есть гармония.<s>\n   Нет смерти - есть Великая Сила.<s><s>\"<s>\n   Эти слова постепенно вернули привычную ясность в мысли юноши и наполнили его сердце спокойствием. Джедай сделал несколько глубоких вдохов и выдохов, окончательно прогоняя наваждение.\"\nelseif codeBonus == \"sith\" then\n  text = \"<s>\n   Через ещё одно бесконечно долгое мгновение в памяти Орнаса вспыхнули строки:<s>\n  <s><s>\"Покой — это ложь, есть только страсть.<s>\n   Со страстью я получаю силу.<s>\n   С силой я получаю мощь.<s>\n   С мощью я получаю победу.<s>\n   С победой мои оковы рвутся.<s>\n   Сила освободит меня..<s><s>\"<s>\n   Эти слова отдавались эхом в опустевшей голове юноши, а их пугающий смысл медленно пробуждал его сознание. Орнас провёл рукой по лицу и волосам, будто сбрасывая наваждение, и окончательно пришел в себя.\"\nelseif codeBonus == \"none\" then\n  text = \"<s>\n   <s><s>\"Сила объединяет страсть и покой...<s><s>\" – попытался связать слова во что-то осмысленное Орнас, но тут же удивился собственным мыслям: <s><s>\"Ну что за чушь?..<s><s>\"<s>\n   И потерял сознание. Юноше показалось, что очнулся он буквально через мгновение, даже на ногах устоял. Лишь едва уловимый запах красной пыли напоминал о минутном наваждении.\"\nend\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 468,
        "calculate": true,
        "lua_do": "function lua_do()\n\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"not defined\"\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nmaster = master or {}\nmaster.position = master.position or 1\n\nUpLine = \n  (TL3.position ~= \"at the stairs\" and dess.isUpstairs ~= 1 and master.position ~= 156) and 1 -- alone\n  or \n(TL3.position ~= \"at the stairs\" and dess.isUpstairs == 1 and master.position ~= 156) and 2 -- with Dess\n  or\n(TL3.position ~= \"at the stairs\" and dess.isUpstairs ~= 1 and master.position == 156) and 3 -- with Master\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs ~= 1 and master.position ~= 156) and 4 -- with TL-3\n  or\n(TL3.position ~= \"at the stairs\" and dess.isUpstairs == 1 and master.position == 156) and 5 -- Master and Dess\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs ~= 1 and master.position == 156) and 6 -- Master and TL-3\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs == 1 and master.position ~= 156) and 7 -- Dess and TL-3\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs == 1 and master.position == 156) and 8 -- all\n  or 9 -- error\n\nif UpLine == 9 then\n-- dialog error\nUpLine = 1\nend\n\nUpLineHelp = (UpLine == 1 and \"alone\") or (UpLine == 2 and \"with Dess\") or  (UpLine == 3 and \"with Master\") or (UpLine == 4 and \"with TL-3\") or (UpLine == 5 and \"with Master and Dess\") or (UpLine == 6 and \"With Master and TL-3\") or (UpLine == 7 and \"with Dess and TL-3\") or (UpLine == 8 and \"with all the mates\")\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\ncodeBonus = nil\nend",
        "text": "Рестарт",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 468
      }
    ]
  },
  {
    "id": 469,
    "text": "   Всего в нескольких ступенях от Орнаса начиналась широкая площадка, обрамлённая массивными каменными перилами. Ещё два шага – и юноша оказался наверху.\n",
    "answers": [
      {
        "id": 471,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 1\nend"
      },
      {
        "id": 482,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс\nreturn UpLine == 2\nend"
      },
      {
        "id": 484,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- учитель\nreturn UpLine == 3\nend"
      },
      {
        "id": 483,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend",
        "lua_do": "function lua_do()\ndroidTextFunctionOn = true\nend"
      },
      {
        "id": 486,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс не порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn --dess.delayedPenalty == 0 and\n\nUpLine == 5\n\n-- учитель и Десс\nend"
      },
      {
        "id": 487,
        "text": "Дальше ",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend"
      },
      {
        "id": 485,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс не порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn (dess.delayedPenalty == 0 and UpLine == 7)\n--Десс <plus> дроид\nend"
      },
      {
        "id": 870,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс уже порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn (dess.delayedPenalty == 1 and UpLine == 7)\n--Десс <plus> дроид\nend"
      },
      {
        "id": 488,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс не порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn dess.delayedPenalty == 0 and UpLine == 8\n\n--все вместе\nend"
      },
      {
        "id": 875,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс уже порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn dess.delayedPenalty == 1 and UpLine == 8\n\n--все вместе\nend"
      },
      {
        "id": 469,
        "text": "Вариативный текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"   Внезапная слабость тревожила джедая. Он не сомневался, что причиной произошедшего была странная пыль на ступенях. В других обстоятельствах Орнас непременно отобрал бы пробу вещества для анализа, но сейчас стоило сосредоточиться на основной цели испытания.\") or\n\n(UpLine == 2 and (--\"Dess text\"\n(codeBonus == \"jedy\" and\n[==[   Орнас поднялся на площадку и взглянул на Десс, выглядевшую необычно серьёзной и сосредоточенной. Она внимательно разглядывала самого юношу. Не в первый раз наблюдая такую резкую смену настроений своей спутницы, он всё ещё не мог понять, было ли это особенностью её характера или уловкой.\n– Ты тоже его почувствовал? – нарушила тишину Десвиар. – Смятение. Пока понимался по лестнице.\n– Да, – честно признался Орнас. – Наверное, дело в той пыли...\n– Это не важно, – перебила Десс, – Ты выглядишь так, будто это совсем на тебя не повлияло. Не зародило сомнений, не оглушило. Я не буду спрашивать, как ты этого добился, просто знай, что ты молодец.\n   Она печально улыбнулась и замолчала.]==]) or\n\n(codeBonus == \"sith\" and\n[==[   Орнас поднялся на площадку и взглянул на Десс, выглядевшую необычно серьёзной и сосредоточенной. Она внимательно разглядывала самого юношу. Не в первый раз наблюдая такую резкую смену настроений своей спутницы, он всё ещё не мог понять, было ли это особенностью её характера или уловкой.\n– Ты тоже его почувствовал? – нарушила тишину Десвиар. – Смятение. Пока понимался по лестнице.\n– Да, – честно признался Орнас. – Наверное, дело в той пыли...\n– Это не важно, – перебила Десс, – Ты не выглядишь так, будто это на тебя не повлияло. Чувствуешь сомнения? Не отвечай, я же видела, как загорелись твои глаза тогда. Я всё понимаю.\n   Она печально улыбнулась и замолчала.]==]) or\n[==[ ]==]\n\n)) or\n(UpLine == 3 and \"– Ты в порядке? – с опаской спросил подошедший учитель, с тревогой всматриваясь в глаза подопечного.\") or\n(UpLine == 4 and \"– Долго же ты ходил, – услышал Орнас перевод короткой трели гудков TL-3. – Ты всегда такой медлительный?<s>\n– Сколько лет ты простоял там внизу разряженный? Хоть дюжину часов ещё подождёшь – не заржавеешь.<s>\n   Дроид коротко пискнул, но перевода юноша не услышал.\") or\n(UpLine == 5 and \"   Учитель и Десс о чём-то увлеченно болтали и не обратили внимания на появление Орнаса. Кажется, даже не заметили его замешательства на лестнице.\") or\n(UpLine == 6 and \"– Ты в порядке? – с опаской спросил подошедший учитель, с тревогой всматриваясь в глаза подопечного. – Твой новый приятель уже успел испугаться.<s>\n– Мы не приятели, – тут же отрезал TL-3. – Мы компаньоны. Скажи ему, Орнас.\") or\n(UpLine == 7 and\n[=[   Там тем временем уже о чём-то оживлённо спорили TL-3 и Десвиар. На замешкавшегося при подъёме юношу никто не обратил внимания. Он и сам сразу же забыл о произошедшем.\n– Ты понимаешь язык дроидов? – удивился Орнас, и только теперь спутники его заметили.\n– Ну да, – пожала плечами Десс, – это полезный навык.]=]\n\n) or\n(UpLine == 8 and [=[– Такую команду для прохождения испытания на моей памяти ещё ни один джедай не собирал, – усмехнулся учитель, обводя взглядом площадку. – Не уверен, что это честно.\n   Магистр Льерсо расположился между притихшим TL-3 и недовольной Десвиар. Кажется, в царящей суматохе он не обратил внимания на недавнее замешательство подопечного.\n– Так получилось, – пожал плечами Орнас. – Уверен, теперь испытание окажется намного сложнее...]=]) or\n\"error!\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 470,
    "text": "   Орнас вернулся к лежащему среди завалов браслету и осторожно прикоснулся к нему. Как и прежде, на холодной тёмной поверхности проявились таинственные символы.",
    "answers": [
      {
        "id": 187,
        "text": "Новый ответ. введите текст",
        "run": [
          187
        ]
      }
    ]
  },
  {
    "id": 471,
    "text": "empty",
    "answers": [
      {
        "comment": true,
        "id": 471,
        "text": "Загадка на двери второго этажа",
        "need": 1000,
        "merge": false
      },
      {
        "id": 471,
        "text": "Вариативное описание перехода к двери",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"   Не заметив ничего примечательного на самой площадке, юноша подошёл к двери.<s>\n   \") or\n(UpLine == 2 and \"   Закончив кривляться, девушка подобралась поближе к джедаю и стала с любопытством наблюдать за его действиями.<s>\n   \") or\n(UpLine == 3 and \n[=[– Что ж, пора двигаться дальше, – наконец изрёк седовласый джедай, жестом приглашая Орнаса пройти ближе к двери.\n   ]=]\n) or\n(UpLine == 4 and [=[– Даже не могу представить, что это может быть за информация, – протянул Орнас, делая несколько шагов к двери.\n   ]=]) or\n(UpLine == 5 and \"   Наконец замеченный Орнас под пристальными взглядами проследовал к двери.<s>\n   \") or\n(UpLine == 6 and \"   Орнас протиснулся между спутникамии к двери, больно ушибив локоть о подавшегося вперёд TL-3.<s>\n   \") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 471,
        "text": "Небольшой пыльный экран на стене возле сомкнутых створок замерцал, как только юноша подошёл достаточно близко, а затем с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, как надеялся Орнас, должен открыть проход.\n   Джедай внимательно осмотрел и прощупал всю стену и саму дверь в поисках скрытых механизмов и ловушек, но в итоге ничего не нашёл. ",
        "merge": true
      },
      {
        "id": 510,
        "text": "Просунуть руку к рычагу",
        "lua_if": "function lua_if()\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn not (dess.delayedPenalty == 1 and UpLine == 2)\nend",
        "lua_do": "function lua_do()\nbracer = bracer or 0\narmlets = bracer\nend"
      },
      {
        "id": 471,
        "text": "Вариативное описание после появления экрана",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"\") or\n\n(UpLine == 2 and \"<s>\n– Может ты всё-таки хочешь сама этим заняться? – обречённо уточнил он.\" .. \n(dess.delayedPenalty == 1 and \"<s>\n– Я хочу сама этим заняться... – безэмоционально повторила Десс и потянулась к рычагу.\" or \"<s>\n– Как-нибудь без этого обойдусь. Давай, не тяни.\")) or\n\n(UpLine == 3 and \"<s>\n– Я тоже ничего больше не обнаружил, – развеял сомнения юноши учитель. – Придётся тебе сыграть в эту игру по чужим правилам.\") or\n(UpLine == 4 and [=[ \n– Я полагал, тебе интересна дальнейшая судьба капитана Чёрного Пламени, – как будто разочарованно пропищал TL-3, – охотника за наживой Феникса. Сунь туда конечность.\n   Юноша с сомнением взглянул на рычаг и на дроида.]=]) or\n(UpLine == 5 and \"<s>\n– Я тоже ничего больше не обнаружил, – на какое-то время оторвался от Десвиар учитель. – Придётся тебе сыграть в эту игру по чужим правилам.<s>\n   Губы Орнаса сжались. Помощи от спутников не дождёшься...\") or\n(UpLine == 6 and \"<s>\n– Похоже, это единственный механизм, связанный с дверью, – подсказал TL-3, заметив блуждающий взгляд юноши.\" ) or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 589,
        "text": "Подчиненить волю Десс, чтобы заставить её разобраться с дверью",
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\nreturn force_ab == 1 and UpLine == 2 and dess.delayedPenalty == 0\n\nend",
        "lua_do": "function lua_do()\nforcedDess = 1\nend"
      },
      {
        "id": 590,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс уже пооабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn (dess.delayedPenalty == 1 and UpLine == 2)\nend",
        "lua_do": "function lua_do()\nforcedDess = 1\nend"
      },
      {
        "id": 471,
        "text": "   \n\n",
        "comment": true
      },
      {
        "comment": false,
        "id": 471,
        "text": "Условие: \"Десс уже порабощена\"",
        "lua_do": "function lua_do()\ndess.delayedPenalty = dess.delayedPenalty == 1 and 0 or 1\nend",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend"
      }
    ]
  },
  {
    "id": 472,
    "text": "Изображения для панелей",
    "answers": [
      {
        "super_calculate": false,
        "id": 472,
        "text": "Сложное условие для отображения картинок",
        "calculate": true,
        "lua_do": "function lua_do()\n-- 1: 204, 205\n--3: 202, 203\npics = pics or {}\npanel1 = panel1 or 0\npanel2 = panel2 or 0\npanel3 = panel3 or 1\npanel4 = panel4 or 0\npics.panels = pics.panels or {}\npics.panels.sup = pics.panels.sup or 0\npics.panels.a = ((g.current_id == 204 or g.current_id == 205) and 1) or ((g.current_id == 199 or g.current_id == 200) and 2) or ((g.current_id == 202 or g.current_id == 203) and 3) or ((g.current_id == 206 or g.current_id == 207) and 4)\npics.panels.lamp1 = vars[\"panel\" .. pics.panels.a] == 0 and 1 or 0\npics.panels.lamp2 = vars[\"panel\" .. pics.panels.a] == 1 and 1 or 0\npics.panels.lamp3 = vars[\"panel\" .. pics.panels.a] == 2 and 1 or 0\n if pics.panels.sup == 0 then\n  showPage{id = g.current_id, transition = \"instant\"}\n  pics.panels.sup = 1\n  end\nend"
      },
      {
        "id": 472,
        "text": "Фон",
        "url": "https://i.ibb.co/bJ7bG3F/image.png"
      },
      {
        "id": 472,
        "text": "Ноль блоков",
        "url": "https://i.ibb.co/s9M2GdS/1.png",
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 472,
        "text": "Один блок",
        "url": "https://i.ibb.co/XJYz9Gz/2-1.png",
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 472,
        "text": "Два блока",
        "url": "https://i.ibb.co/w0KhWHm/3-2.png",
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 472,
        "text": "Три блока",
        "url": "https://i.ibb.co/hFn57bZ/4-3.png",
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 472,
        "text": "Четыре блока",
        "url": "https://i.ibb.co/8jzf6H0/5-4.png",
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "id": 472,
        "text": "Верхняя лампа -",
        "lua_if": "function lua_if()\npics = pics or {}\npics.panels = pics.panels or {}\nreturn pics.panels.lamp1 == 0\nend",
        "url": "https://i.ibb.co/zZN5YqP/image.png"
      },
      {
        "id": 472,
        "text": "Верхняя лампа <plus>",
        "lua_if": "function lua_if()\npics = pics or {}\npics.panels = pics.panels or {}\nreturn pics.panels.lamp1 == 1\nend",
        "url": "https://i.ibb.co/mtHw4Jk/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа -",
        "lua_if": "function lua_if()\npics = pics or {}\npics.panels = pics.panels or {}\nreturn pics.panels.lamp2 == 0\nend",
        "url": "https://i.ibb.co/PwZpbHW/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа <plus>",
        "lua_if": "function lua_if()\npics = pics or {}\npics.panels = pics.panels or {}\nreturn pics.panels.lamp2 == 1\nend",
        "url": "https://i.ibb.co/3m0xb1h/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа -",
        "lua_if": "function lua_if()\npics = pics or {}\npics.panels = pics.panels or {}\nreturn pics.panels.lamp3 == 0\nend",
        "url": "https://i.ibb.co/8YsZ8rv/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа <plus>",
        "lua_if": "function lua_if()\npics = pics or {}\npics.panels = pics.panels or {}\nreturn pics.panels.lamp3 == 1\nend",
        "url": "https://i.ibb.co/vDXMf3s/image.png"
      }
    ]
  },
  {
    "id": 473,
    "text": "Изображения для панели 2",
    "answers": [
      {
        "lua_do": "function lua_do()\npics = pics or {}\npanel1 = panel1 or 0\npanel2 = panel2 or 0\npanel3 = panel3 or 1\npanel4 = panel4 or 0\npics.panels = pics.panels or {}\npics.panels.sup = pics.panels.sup or 0\n if pics.panels.sup == 0 then\n  showPage{id = g.current_id, transition = \"instant\"}\n  pics.panels.sup = 1\n  end\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 472,
        "text": "Фон",
        "url": "https://i.ibb.co/bJ7bG3F/image.png"
      },
      {
        "id": 472,
        "text": "Ноль блоков",
        "url": "https://i.ibb.co/s9M2GdS/1.png",
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 472,
        "text": "Один блок",
        "url": "https://i.ibb.co/XJYz9Gz/2-1.png",
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 472,
        "text": "Два блока",
        "url": "https://i.ibb.co/w0KhWHm/3-2.png",
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 472,
        "text": "Три блока",
        "url": "https://i.ibb.co/hFn57bZ/4-3.png",
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 472,
        "text": "Четыре блока",
        "url": "https://i.ibb.co/8jzf6H0/5-4.png",
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "id": 472,
        "text": "Верхняя лампа -",
        "lua_if": "function lua_if()\npanel2 = panel2 or 0\nreturn panel2 ~= 0\nend",
        "url": "https://i.ibb.co/zZN5YqP/image.png"
      },
      {
        "id": 472,
        "text": "Верхняя лампа <plus>",
        "lua_if": "function lua_if()\npanel2 = panel2 or 0\nreturn panel2 == 0\nend",
        "url": "https://i.ibb.co/mtHw4Jk/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа -",
        "lua_if": "function lua_if()\npanel2 = panel2 or 0\nreturn panel2 ~= 1\nend",
        "url": "https://i.ibb.co/PwZpbHW/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа <plus>",
        "lua_if": "function lua_if()\npanel2 = panel2 or 0\nreturn panel2 == 1\nend",
        "url": "https://i.ibb.co/3m0xb1h/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа -",
        "lua_if": "function lua_if()\npanel2 = panel2 or 0\nreturn panel2 ~= 2\nend",
        "url": "https://i.ibb.co/8YsZ8rv/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа <plus>",
        "lua_if": "function lua_if()\npanel2 = panel2 or 0\nreturn panel2 == 2\nend",
        "url": "https://i.ibb.co/vDXMf3s/image.png"
      }
    ]
  },
  {
    "id": 474,
    "text": "Изображения для панели 3",
    "answers": [
      {
        "lua_do": "function lua_do()\npics = pics or {}\npanel1 = panel1 or 0\npanel2 = panel2 or 0\npanel3 = panel3 or 1\npanel4 = panel4 or 0\npics.panels = pics.panels or {}\npics.panels.sup = pics.panels.sup or 0\n if pics.panels.sup == 0 then\n  showPage{id = g.current_id, transition = \"instant\"}\n  pics.panels.sup = 1\n  end\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 472,
        "text": "Фон",
        "url": "https://i.ibb.co/bJ7bG3F/image.png"
      },
      {
        "id": 472,
        "text": "Ноль блоков",
        "url": "https://i.ibb.co/s9M2GdS/1.png",
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 472,
        "text": "Один блок",
        "url": "https://i.ibb.co/XJYz9Gz/2-1.png",
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 472,
        "text": "Два блока",
        "url": "https://i.ibb.co/w0KhWHm/3-2.png",
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 472,
        "text": "Три блока",
        "url": "https://i.ibb.co/hFn57bZ/4-3.png",
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 472,
        "text": "Четыре блока",
        "url": "https://i.ibb.co/8jzf6H0/5-4.png",
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "id": 472,
        "text": "Верхняя лампа -",
        "lua_if": "function lua_if()\npanel3 = panel3 or 0\nreturn panel3 ~= 0\nend",
        "url": "https://i.ibb.co/zZN5YqP/image.png"
      },
      {
        "id": 472,
        "text": "Верхняя лампа <plus>",
        "lua_if": "function lua_if()\npanel3 = panel3 or 0\nreturn panel3 == 0\nend",
        "url": "https://i.ibb.co/mtHw4Jk/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа -",
        "lua_if": "function lua_if()\npanel3 = panel3 or 0\nreturn panel3 ~= 1\nend",
        "url": "https://i.ibb.co/PwZpbHW/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа <plus>",
        "lua_if": "function lua_if()\npanel3 = panel3 or 0\nreturn panel3 == 1\nend",
        "url": "https://i.ibb.co/3m0xb1h/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа -",
        "lua_if": "function lua_if()\npanel3 = panel3 or 0\nreturn panel3 ~= 2\nend",
        "url": "https://i.ibb.co/8YsZ8rv/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа <plus>",
        "lua_if": "function lua_if()\npanel3 = panel3 or 0\nreturn panel3 == 2\nend",
        "url": "https://i.ibb.co/vDXMf3s/image.png"
      }
    ]
  },
  {
    "id": 475,
    "text": "Изображения для панели 4",
    "answers": [
      {
        "lua_do": "function lua_do()\npics = pics or {}\npanel1 = panel1 or 0\npanel2 = panel2 or 0\npanel3 = panel3 or 1\npanel4 = panel4 or 0\npics.panels = pics.panels or {}\npics.panels.sup = pics.panels.sup or 0\n if pics.panels.sup == 0 then\n  showPage{id = g.current_id, transition = \"instant\"}\n  pics.panels.sup = 1\n  end\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 472,
        "text": "Фон",
        "url": "https://i.ibb.co/bJ7bG3F/image.png"
      },
      {
        "id": 472,
        "text": "Ноль блоков",
        "url": "https://i.ibb.co/s9M2GdS/1.png",
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 472,
        "text": "Один блок",
        "url": "https://i.ibb.co/XJYz9Gz/2-1.png",
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 472,
        "text": "Два блока",
        "url": "https://i.ibb.co/w0KhWHm/3-2.png",
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 472,
        "text": "Три блока",
        "url": "https://i.ibb.co/hFn57bZ/4-3.png",
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 472,
        "text": "Четыре блока",
        "url": "https://i.ibb.co/8jzf6H0/5-4.png",
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "id": 472,
        "text": "Верхняя лампа -",
        "lua_if": "function lua_if()\npanel4 = panel4 or 0\nreturn panel4 ~= 0\nend",
        "url": "https://i.ibb.co/zZN5YqP/image.png"
      },
      {
        "id": 472,
        "text": "Верхняя лампа <plus>",
        "lua_if": "function lua_if()\npanel4 = panel4 or 0\nreturn panel4 == 0\nend",
        "url": "https://i.ibb.co/mtHw4Jk/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа -",
        "lua_if": "function lua_if()\npanel4 = panel4 or 0\nreturn panel4 ~= 1\nend",
        "url": "https://i.ibb.co/PwZpbHW/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа <plus>",
        "lua_if": "function lua_if()\npanel4 = panel4 or 0\nreturn panel4 == 1\nend",
        "url": "https://i.ibb.co/3m0xb1h/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа -",
        "lua_if": "function lua_if()\npanel4 = panel4 or 0\nreturn panel4 ~= 2\nend",
        "url": "https://i.ibb.co/8YsZ8rv/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа <plus>",
        "lua_if": "function lua_if()\npanel4 = panel4 or 0\nreturn panel4 == 2\nend",
        "url": "https://i.ibb.co/vDXMf3s/image.png"
      }
    ]
  },
  {
    "id": 476,
    "text": "Изображения для панели 1",
    "answers": [
      {
        "lua_do": "function lua_do()\npics = pics or {}\npanel1 = panel1 or 0\npanel2 = panel2 or 0\npanel3 = panel3 or 1\npanel4 = panel4 or 0\npics.panels = pics.panels or {}\npics.panels.sup = pics.panels.sup or 0\n if pics.panels.sup == 0 then\n  showPage{id = g.current_id, transition = \"instant\"}\n  pics.panels.sup = 1\n  end\nend",
        "super_calculate": false,
        "id": 205,
        "calculate": true,
        "text": "ограничитель",
        "merge": false
      },
      {
        "id": 472,
        "text": "Фон",
        "url": "https://i.ibb.co/bJ7bG3F/image.png"
      },
      {
        "id": 472,
        "text": "Ноль блоков",
        "url": "https://i.ibb.co/s9M2GdS/1.png",
        "var_equal": [
          "activeblock",
          0
        ]
      },
      {
        "id": 472,
        "text": "Один блок",
        "url": "https://i.ibb.co/XJYz9Gz/2-1.png",
        "var_equal": [
          "activeblock",
          1
        ]
      },
      {
        "id": 472,
        "text": "Два блока",
        "url": "https://i.ibb.co/w0KhWHm/3-2.png",
        "var_equal": [
          "activeblock",
          2
        ]
      },
      {
        "id": 472,
        "text": "Три блока",
        "url": "https://i.ibb.co/hFn57bZ/4-3.png",
        "var_equal": [
          "activeblock",
          3
        ]
      },
      {
        "id": 472,
        "text": "Четыре блока",
        "url": "https://i.ibb.co/8jzf6H0/5-4.png",
        "var_equal": [
          "activeblock",
          4
        ]
      },
      {
        "id": 472,
        "text": "Верхняя лампа -",
        "lua_if": "function lua_if()\npanel1 = panel1 or 0\nreturn panel1 ~= 0\nend",
        "url": "https://i.ibb.co/zZN5YqP/image.png"
      },
      {
        "id": 472,
        "text": "Верхняя лампа <plus>",
        "lua_if": "function lua_if()\npanel1 = panel1 or 0\nreturn panel1 == 0\nend",
        "url": "https://i.ibb.co/mtHw4Jk/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа -",
        "lua_if": "function lua_if()\npanel1 = panel1 or 0\nreturn panel1 ~= 1\nend",
        "url": "https://i.ibb.co/PwZpbHW/image.png"
      },
      {
        "id": 472,
        "text": "Средняя лампа <plus>",
        "lua_if": "function lua_if()\npanel1 = panel1 or 0\nreturn panel1 == 1\nend",
        "url": "https://i.ibb.co/3m0xb1h/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа -",
        "lua_if": "function lua_if()\npanel1 = panel1 or 0\nreturn panel1 ~= 2\nend",
        "url": "https://i.ibb.co/8YsZ8rv/image.png"
      },
      {
        "id": 472,
        "text": "Нижняя лампа <plus>",
        "lua_if": "function lua_if()\npanel1 = panel1 or 0\nreturn panel1 == 2\nend",
        "url": "https://i.ibb.co/vDXMf3s/image.png"
      }
    ]
  },
  {
    "id": 477,
    "text": "   Тест кода для блоков рефлексии\nНужно добавить в таблицу значение — способность выскакивать вне очереди при выполнении условий и в коде проверять  СНАЧАЛА наличие такого блока.\nПри этом, если могут активироваться несколько, то запускать только хронологически последний открытый, остальное ставить в очередь\n\nНужна подсказка по дроиду: последовательность и осведомленность, после разговора",
    "answers": [
      {
        "super_calculate": false,
        "id": 477,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n\nstyle = style or 1\nreflex = reflex or {} -- вся инфа по переходовой рефлексии\nreflex.ornas = reflex.ornas or {}\nreflex.teacher = reflex.teacher or {}\nreflex.main = reflex.main or {}\nreflex.dess = reflex.dess or  {}\nreflex.tl3 = reflex.tl3 or {}\nreflex.random = {}\n\nreflexPrior = reflexPrior or \"\" -- приоритет блока для показа вне очереди, назначать там же, где проверяются условия (\"ornas\",\"teacher\" and so on)\n\nreflex.ornas.conditions = reflex.ornas.conditions or {0,0,0,0,0,0} -- выполненность условий, число элементов должно соответствовать числу текстовых эпизодов!!!\nreflex.teacher.conditions = reflex.teacher.conditions or {0,0,0}\nreflex.main.conditions = reflex.main.conditions or {0,0,0} \nreflex.dess.conditions = reflex.dess.conditions or {0,0,0}\nreflex.tl3.conditions = reflex.tl3.conditions or {0,0,0}\nreflex.random.conditions = {0} -- всегда == 0\n\nreflex.ornas.sequence = reflex.ornas.sequence or 1 -- старт отсчёта с 1\nreflex.teacher.sequence = reflex.teacher.sequence or 1\nreflex.main.sequence = reflex.main.sequence or 1\nreflex.dess.sequence = reflex.dess.sequence or 1\nreflex.tl3.sequence = reflex.tl3.sequence or 1\nreflex.random.sequence = 1\n\n\n\nreflex.ornas.text = {\n\"<s><s>\"Каждый сделанный выбор формирует настоящего тебя, – вспомнил Орнас одну из любимых присказок учителя. – Прислушивайся к ощущениям, чтобы себя не потерять<s><s>\".<s>\n   Теперь, оказавшись один на один с испытанием, юноша начал понимать, что эти слова были чем-то большим, чем просто фигурой речи.\",\n\n\"Ещё одна дверь. Ещё несколько шагов, приближающих Орнаса к заветной цели. Во что бы то ни стало завершить испытание и стать рыцарем-джедаем. Доказать всем, как сильно они в нём ошибались. Он больше не просто \" .. ((style == 1 and \"ловкий от природы\") or (style == 2 and \"удивительно чувствительный к Силе\") or (style == 3 and \"прозорливый\") or (style == 4 and \"смышлёный\") or (style == 5 and \"миролюбивый\") or \"\" ) ..\n\" мальчишка с тёмным прошлым, впервые попавший в Храм джедаев, сгорающий под осуждающими взглядами и встревоженным шёпотом.<s>\n   Юноша сделал глубокий вдох и расслабил сжавшиеся от напряжения кулаки. Не время отвлекаться, пора продолжить путь.\",\n\n--\"Орнас чувствовал, как его прошлое с каждым шагом становится всё более отдалённым и незначительным. Он уже не тот испуганный мальчишка, впервые попавший в Храм джедаев, сгорающий под осуждающими взглядами и встревоженным шёпотом. Усердность в учебе помогла ему быстро догнать, а в чём-то и превзойти ровесников. Но только здесь и сейчас он сможет доказать всем, чего стоит на самом деле.\",\n\n\"Орнас вспомнил злую шутку одного из падаванов в свой адрес и нахмурился. За столько лет он так и не смог найти общий язык с ровесниками, озлобленными из-за страха или зависти. Взрослые не придавали значения постоянно возникающим склокам, но юноша был уверен, что подобное поведение непозволительно для джедаев. Получив звание рыцаря, он сможет наконец навести порядок в самом сердце Ордена.\",\n\n\"Орнас ощущал неестественное возбуждение, мысли об успешном завершении испытания и открывающихся перспективах никак не унимались в сознании. Он больше не вернётся к прежней жизни замкнутого и нерешительного подростка, а станет в один ряд со взрослыми, доказавшими свою силу и стойкость.\",\n\n\"На секунду в сознании Орнаса возник знакомый болезненный образ, будто один из череды бесконечных ночных кошмаров, пронизанных болью и пылающей яростью. В этих видениях тьма срывала оковы с юноши, принося облегчение и свободу. Даже больше самих этих ощущений Орнас боялся того, что кто-то о них узнает.\",\n\n\"На секунду Орнас задумался, тот ли он джедай, каким должен быть. Тот ли он, кем хочет быть? Куда приведёт выбранный путь в этом опасном месте? Юноша встряхнул головой, прогоняя прочь отвлечённые мысли и концентрируясь на действительности.\"\n} -- полное текстовое описание эпизодов рефлексии\n\nreflex.teacher.text = {\n\"<s><s>\"Как же трудно его понять...<s><s>\" – мысленно сокрушался Орнас. Строгий и черствый, вечно придирающийся, хоть и вытаскивающий из любых неприятностей, порой даже ценой нарушения Кодекса. За долгое время обучения юноша не смог по-настоящему сблизиться со своим наставником, постоянно ощущая его отстранённость.\",\n\n\"Орнас вспомнил весёлую историю из жизни магистра Буши и невольно улыбнулся. Всё-таки не все джедаи в Ордене пытались строить из себя непроницаемых зануд с каменными лицами, как делал его учитель.\",\n\n\"Сколько Орнас себя помнил, учитель всегда вёл себя одинаково: никогда не помогал сразу, будто специально поджидая, пока юноша ошибётся. Разве не должен наставник делиться опытом и знанием с подопечным? Каких обидных неудач можно было бы избежать, если бы не этот дурацкий порядок...\",\n\n\"<s><s>\"Этот храм и испытание – всего лишь очередное задание<s><s>\", – думал Орнас. Интересно, на скольких подобных миссиях побывал его наставник? Тот не любил подолгу отсиживаться на мягких креслах в зале Совета, хватаясь за любую возможность прыгнуть в звездолёт и отправиться на край вселенной, зачастую уделяя больше времени личным изысканиям, а не заданием, ставшим формальным поводом для отлёта. Удивительно, как остальные магистры мирились с такой своенравностью.\",\n\n\"Раньше Орнас старался не задумываться о таинственном <s><s>\"списке<s><s>\" своего учителя. Среди молодых джедаев в храме ходило много баек и небылиц на этот счёт, но юноша никогда не решался прямо спросить об этом у наставника.  Увиденное на корабле не проливало свет на объект поисков, но было ясно, что осталось не так много мест для исследования. А значит, вероятность обнаружить цель становилась всё выше.\" \n\n}\n\nreflex.main.text = {\"Сюжет 1\",\"Сюжет 2\",\"Сюжет 3\"}\n\nreflex.dess.text = {\"Десс 1\",\"Десс 2\",\"Десс 3\"}\n\nreflex.tl3.text = {\n\"Орнасу было любопытно, как дроиду удалось собрать для себя зарядную станцию. Насколько юноша знал, астромеханики обычно только устраняют повреждения, а не создают что-то новое. Возможно, этот был не так прост.\",\n\n\"Орнас попытался прикинуть, как давно здесь мог появиться звездолёт, исходя из состоянию его обломков. В любом случае, едва ли кто-то из команды мог выживать в таком месте хоть сколько-то положительное время. А охранные дроиды в зале свидетельствовали о том, что экипаж чего-то всерьёз опасался. Или кого-то...\",\n\n\"Орнас никак не мог понять, кому могло потребоваться нанимать команду охотников за наживой для доставки медицинской капсулы в такое странное место. Для кого это оборудование предназначалось и кто в него в результате попал?\",\n\n\"Чем больше Орнас узнавал, тем запутаннее и непонятнее ему всё казалось. Почему мандалорец оставил команду на верную смерть и сам решил ввязаться в самоубийственное сражение с монстром? И что стало с оставшимися после ухода капитана?\",\n\n\"Орнас не был уверен, способны ли дроиды лгать, но TL-3 производил на беду очень неоднозначное впечатление. Разве не должны все обладатели искусственного интеллекта любить последовательность, логичность и максимальную полноту информации?\"\n}\n\nreflex.random.text = {\"Рандом 1\", \"Рандом 2\", \"Рандом 3\",\"Рандом 4\", \"Рандом 5\", \"Рандом 6\"}\n\n\n\n\nlocal text = \"\"\nlocal a = 0\nlocal c = {}\nlocal d = {}\nlocal s = reflexPrior ~= \"\" and reflex[reflexPrior].sequence or nil\n\nfor k, v in pairs(reflex) do\n   if v.conditions[v.sequence] == 1 then\n    c[v] = 1\n    a = a <plus> 1\n    d[a] = v\n    end\nend\n\n\n\n  if a == 1 then -- выполнены условия только одного блока\n    for k, v in pairs(reflex) do\n        if c[v] == 1 then\n          text = v.text[v.sequence]\n          v.conditions[v.sequence] = 2\n          v.sequence = v.sequence <plus> 1\n        end\n    end\n\n  elseif a > 1 then -- выполнены условия нескольких блоков\n\n    if reflexPrior ~= \"\" then -- есть активный блок с приоритетом\n      text = reflex[reflexPrior].text[s]\n      reflex[reflexPrior].conditions[s] = 2\n      reflex[reflexPrior].sequence = reflex[reflexPrior].sequence <plus> 1\n      reflexPrior = \"\" -- обнулить флаг приоритета\n\n    else -- нет блока с приоритетом\n      local b = d[math.random(1,a)]\n      text = b.text[b.sequence]\n      b.conditions[b.sequence] = 2\n      b.sequence = b.sequence <plus> 1\n    end\n  else -- нет выполненных условий для блоков\ntext = reflex.random.text[math.random(1,#reflex.random.text)] or \"no text avail\"\nend\nreflexText = text\nend",
        "calculate": true
      },
      {
        "lua_text": "function lua_text()\nreturn reflexText\nend",
        "super_calculate": false,
        "id": 477,
        "calculate": false,
        "text": "Новый ответ. введите текст"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\nlocal a = reflex.ornas.sequence\nlocal b = reflex.teacher.sequence\nlocal c = reflex.main.sequence\nlocal d = reflex.dess.sequence \nlocal e = reflex.tl3.sequence\n\n-- reflex.ornas.conditions[a] = 1\n-- reflex.teacher.conditions[b] = 1\n-- reflex.main.conditions[c] = 1\n-- reflex.dess.conditions[d] = 1\n-- reflex.tl3.conditions[e] = 1\n\nreflex.ornas.conditions[a] = 1\nreflex.ornas.conditions[a<plus>1] = 1\nreflex.ornas.conditions[a<plus>2] = 1\nreflex.ornas.conditions[a<plus>3] = 1\nreflex.ornas.conditions[a<plus>4] = 1\nreflex.ornas.conditions[a<plus>5] = 1\nreflex.teacher.conditions[b] = 1\nreflex.teacher.conditions[b<plus>1] = 1\nreflex.teacher.conditions[b<plus>2] = 1\nreflex.main.conditions[c] = 1\nreflex.main.conditions[c <plus> 1] = 1\nreflex.main.conditions[c <plus> 2] = 1\nreflex.dess.conditions[d] = 1\nreflex.dess.conditions[d <plus> 1] = 1\nreflex.dess.conditions[d<plus>2] = 1\nreflex.tl3.conditions[e] = 1\nreflex.tl3.conditions[e<plus>1] = 1\nreflex.tl3.conditions[e <plus> 2] = 1\nend",
        "text": "Тестовая смена условий",
        "id": 477,
        "calculate": false
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nreflex = nil\nend",
        "text": "Рестарт таблицы",
        "id": 477,
        "calculate": false
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nreflexPrior = \"ornas\"\nend",
        "text": "Тест: назначить приоритет",
        "calculate": false,
        "id": 477
      }
    ]
  },
  {
    "id": 478,
    "text": "   <b>Тёмный зал с шестиугольной плиткой. Нужно тщательно выбирать маршрут, ориентируясь на высоту уже известных участков: чем больше ловушек контактируют с плитой, тем выше она поднимается над соседними.</b>",
    "answers": [
      {
        "comment": false,
        "super_calculate": false,
        "id": 478,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_if": "function lua_if()\nsapper = sapper or {} -- creation of table\n\n--!!!!!!\n-- sapper.seed = 2\n--!!!!!!!\n\nsapper.seed = sapper.seed or math.random(1,6) -- choosing the map\nsapper.currentPosition = sapper.currentPosition or {y = 1, x = 5, a = 0} -- starting position\nif not sapper.field then\n sapper.field = {} -- first creation of field itself (each point is invisible and haven't been visited yet)\n  for i = 1, 6 do\n    sapper.field[i] = {y = 1, x = i, a = 0, real = 1, vztd = 0, vsbl = 0}\n  end\n  for i = 7, 12 do\n    sapper.field[i] = {y = 2, x = i - 6, a = 1, real = 1, vztd = 0, vsbl = 0}\n  end\n  for i = 13, 18 do\n    sapper.field[i] = {y = 3, x = i - 12, a = 0, real = 1, vztd = 0, vsbl = 0}\n  end\n  for i = 19, 24 do\n    sapper.field[i] = {y = 4, x = i - 18, a = 1, real = 1, vztd = 0, vsbl = 0}\n  end\n  for i = 25, 30 do\n    sapper.field[i] = {y = 5, x = i - 24, a = 0, real = 1, vztd = 0, vsbl = 0}\n  end\n  for i = 31, 36 do\n    sapper.field[i] = {y = 6, x = i - 30, a = 1, real = 1, vztd = 0, vsbl = 0}\n  end\n for i = 1, 36, 12 do\n  sapper.field[i][\"real\"] = 0 -- mark points that don't actually exist\n  sapper.field[i][\"val\"] = 0 -- just in case\n end\n\n-- starting conditions for visited and visible point\nsapper.field[2][\"vsbl\"] = 1\nsapper.field[2][\"dopwvtp\"] = {7,8}\nsapper.field[3][\"vsbl\"] = 1\nsapper.field[3].real = 0\nsapper.field[4][\"vsbl\"] = 1\nsapper.field[4].real = 0\nsapper.field[5][\"dopwvtp\"] = {6,11}\nsapper.field[5][\"vsbl\"] = 1\nsapper.field[5].vztd = 1\nsapper.field[8][\"vsbl\"] = 1\nsapper.field[2][\"dopwvtp\"] = {7,9,14,15}\nsapper.field[9][\"vsbl\"] = 1\nsapper.field[9][\"dopwvtp\"] = {8,10,15,16}\nsapper.field[10][\"vsbl\"] = 1\nsapper.field[10][\"dopwvtp\"] = {9,11,16,17}\n\n--vztd -- the point have been visited\n--vsbl -- the point status is visible\n--val -- the point value status: 0,1,2,3 or 10\n--dopwvtp -- discloses other points when vizit this point\nsapper.supGroups = {} -- fil manually further for each map\n  if sapper.seed == 1 then\n    sapper.supGroups.empty = {6,7,11,12,14} -- all the '0's in the field\n    sapper.supGroups.one = {2,5,8,10,15,16,17,18,19,24,31,32,33} -- all the '1's\n    sapper.supGroups.two = {9,20,22,27,28,29,30,35} -- all the '2's\n    sapper.supGroups.three = {1} -- all the '3's\n    sapper.supGroups.trap = {3,4,21,23,26,34,36} -- all the '10's\n  elseif sapper.seed == 2 then\n    sapper.supGroups.empty = {7,31,16,17} -- all the '0's in the field\n    sapper.supGroups.one = {2,5,6,8,9,10,11,14,15,18,19,21,22,24,26,32,36} -- all the '1's\n    sapper.supGroups.two = {23,9,27,28,34,35} -- all the '2's\n    sapper.supGroups.three = {1} -- all the '3's\n    sapper.supGroups.trap = {3,4,12,20,29,30,33} -- all the '10's\n  elseif sapper.seed == 3 then\n    sapper.supGroups.empty = {6,7,16} -- all the '0's in the field\n    sapper.supGroups.one = {2,5,8,10,11,12,14,15,17,19,24,32,33} -- all the '1's\n    sapper.supGroups.two = {9,21,22,23,26,27,30,34,35} -- all the '2's\n    sapper.supGroups.three = {1} -- all the '3's\n    sapper.supGroups.trap = {3,4,18,20,28,29,31,36} -- all the '10's\n  elseif sapper.seed == 4 then\n    sapper.supGroups.empty = {6,7,11,12,14,36} -- all the '0's in the field\n    sapper.supGroups.one = {2,5,8,10,15,17,18,19,30,31,32,33,35} -- all the '1's\n    sapper.supGroups.two = {9,16,20,23,27,29} -- all the '2's\n    sapper.supGroups.three = {28} -- all the '3's\n    sapper.supGroups.trap = {3,4,21,22,24,26,34} -- all the '10's\n  elseif sapper.seed == 5 then\n    sapper.supGroups.empty = {7,14,19,34,35,36} -- all the '0's in the field\n    sapper.supGroups.one = {2,5,6,8,10,11,15,18,20,24,26,30,31,33} -- all the '1's\n    sapper.supGroups.two = {9,16,17,27,28,29} -- all the '2's\n    sapper.supGroups.three = {1} -- all the '3's\n    sapper.supGroups.trap = {3,4,12,21,22,23,32} -- all the '10's\n   elseif sapper.seed == 6 then\n    sapper.supGroups.empty = {6,7,16,31,32} -- all the '0's in the field\n    sapper.supGroups.one = {2,5,8,10,11,12,14,15,19,26,33,34,35} -- all the '1's\n    sapper.supGroups.two = {9,17,21,22,24,27,29,30} -- all the '2's\n    sapper.supGroups.three = {1} -- all the '3's\n    sapper.supGroups.trap = {3,4,18,20,23,28,36} -- all the '10's\n  end\n\n--set vals for each point\nfor k, v in pairs(sapper.supGroups.empty) do\n  sapper.field[v].val = 0\nend\nfor k, v in pairs(sapper.supGroups.one) do\n sapper.field[v].val = 1\nend\nfor k, v in pairs(sapper.supGroups.two) do\n  sapper.field[v].val = 2\nend\nfor k, v in pairs(sapper.supGroups.three) do\n  sapper.field[v].val = 3\nend\nfor k, v in pairs(sapper.supGroups.trap) do\n  sapper.field[v].val = 10\nend\nsapper.turns = -1\nend\n\n\n function sapperTarget(p, d) -- create the function to define the target point\n  if d == 1 then -- up and left \n     y = p.y <plus> 1\n     x = p.x - 1 <plus> p.a\n   elseif d == 2 then -- up and right\n     y = p.y <plus> 1\n     x = p.x <plus> p.a\n   elseif d == 3 then -- left\n     y = p.y\n     x = p.x - 1\n   elseif d == 4 then -- right\n     y = p.y\n     x = p.x <plus> 1\n   elseif d == 5 then -- left and down\n     y = p.y - 1\n     x = p.x - 1 <plus> p.a\n   elseif d == 6 then -- left and down\n     y = p.y - 1\n     x = p.x <plus> p.a\n   end\n  y = y or 0 x = x or 0\n if y < 1  or y > 6 or x < 1 or x > 6 then -- if the target point is out of the region, i.e. doesn't exist\n   y = 1 x = 1 -- this point doesn't actually exist either, but we can work with it\n end\n return y, x\n end\n\n function sapperDopwvtp(p) -- set vsbl for all neighbor points of point p\n local a = {}\n local b = 0\n  for d = 1, 6 do -- for all directions\n   a.y, a.x = sapperTarget(p, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       sapper.field[i][\"vsbl\"] = 1 -- make target point visible\n     end\n   end\n  end\n end\n\n\n\n-- value can only be seen when step on the point except the following case\n-- when reach stable '0' point can check all the neighbours points level - disclose neighbours points values -> run function sapperDopwvtp(sapper.currentPosition)\n-- NB: for achievement count \"vztd\" only for real points!!!\nreturn true\nend"
      },
      {
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\n a.y, a.x = sapperTarget(sapper.currentPosition, 1) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] == 1 -- if a target point is real let the answer be visible\nend\n\n",
        "answerImage": [
          "https://i.ibb.co/RDPMXR1/Ar1.png"
        ],
        "lua_do": "function lua_do() -- when click on direction button \n local d = 1 -- up and left (need to set direction for each button manually)\n local b = sapper.currentPosition\n sapper.currentPosition.y, sapper.currentPosition.x = sapperTarget(b, d)\n local c = sapper.currentPosition\n   for i = 1, 36 do -- find target point in the field\n     if c.y == sapper.field[i][\"y\"] and c.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\nif  sapper.field[b][\"vztd\"] ~= 1 then\n sapper.endOfMove = 1\n sapper.field[b][\"vztd\"] = 1 -- have vizited new point\nend\n\nsapper.turns = sapper.turns <plus> 1\n\n\n sapper.field[b][\"vsbl\"] = 1 -- now is for sure capable  to see the value of the point\n sapper.currentPosition.a = sapper.field[b][\"a\"] -- set a-factor appropriate for new position\n   if sapper.field[b][\"val\"] == 0 then --check wether value of new point equals 0 and if so run function sapperDopwvtp(sapper.currentPosition)\n     sapperDopwvtp(sapper.currentPosition)\n   end\nend",
        "text": "   ",
        "id": 478,
        "left_answer": true
      },
      {
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\n a.y, a.x = sapperTarget(sapper.currentPosition, 1) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] ~= 1 -- if a target point is real let the answer be visible\nend\n\n",
        "left_answer": true,
        "id": 478,
        "text": "   ",
        "comment": true,
        "answerImage": [
          "https://i.ibb.co/RDPMXR1/Ar1.png"
        ]
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 2\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] == 1 -- if a target point is real let the answer be visible\nend\n\n",
        "id": 478,
        "text": "   ",
        "lua_do": "function lua_do() -- when click on direction button \n local d = 2 -- up and right (need to set direction for each button manually)\n local b = sapper.currentPosition\n sapper.currentPosition.y, sapper.currentPosition.x = sapperTarget(b, d)\n local c = sapper.currentPosition\n   for i = 1, 36 do -- find target point in the field\n     if c.y == sapper.field[i][\"y\"] and c.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n\nsapper.turns = sapper.turns <plus> 1\n\nif  sapper.field[b][\"vztd\"] ~= 1 then\n sapper.endOfMove = 1\n sapper.field[b][\"vztd\"] = 1 -- have vizited new point\nend\n sapper.field[b][\"vsbl\"] = 1 -- now is for sure capable  to see the value of the point\n sapper.currentPosition.a = sapper.field[b][\"a\"] -- set a-factor appropriate for new position\n   if sapper.field[b][\"val\"] == 0 then --check wether value of new point equals 0 and if so run function sapperDopwvtp(sapper.currentPosition)\n     sapperDopwvtp(sapper.currentPosition)\n   end\n-- showPage() -- make a transition in accordance with value of new position\nend",
        "answerImage": [
          "https://i.ibb.co/KykzLFf/Ar2.png"
        ]
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 2\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] ~= 1 -- if a target point is real let the answer be visible\nend\n\n",
        "id": 478,
        "text": "   ",
        "comment": true,
        "answerImage": [
          "https://i.ibb.co/KykzLFf/Ar2.png"
        ]
      },
      {
        "right_answer": false,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 3\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] == 1 -- if a target point is real let the answer be visible\nend\n\n",
        "left_answer": true,
        "id": 478,
        "text": "   ",
        "lua_do": "function lua_do() -- when click on direction button \n local d = 3 -- left (need to set direction for each button manually)\n local b = sapper.currentPosition\n sapper.currentPosition.y, sapper.currentPosition.x = sapperTarget(b, d)\n local c = sapper.currentPosition\n   for i = 1, 36 do -- find target point in the field\n     if c.y == sapper.field[i][\"y\"] and c.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n\nsapper.turns = sapper.turns <plus> 1\n\nif  sapper.field[b][\"vztd\"] ~= 1 then\n sapper.endOfMove = 1\n sapper.field[b][\"vztd\"] = 1 -- have vizited new point\nend\n sapper.field[b][\"vsbl\"] = 1 -- now is for sure capable  to see the value of the point\n sapper.currentPosition.a = sapper.field[b][\"a\"] -- set a-factor appropriate for new position\n   if sapper.field[b][\"val\"] == 0 then --check wether value of new point equals 0 and if so run function sapperDopwvtp(sapper.currentPosition)\n     sapperDopwvtp(sapper.currentPosition)\n   end\n-- showPage() -- make a transition in accordance with value of new position\nend",
        "answerImage": [
          "https://i.ibb.co/HHkpq4h/Ar3.png"
        ]
      },
      {
        "right_answer": false,
        "comment": true,
        "left_answer": true,
        "id": 478,
        "text": "   ",
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 3\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] ~= 1 -- if a target point is real let the answer be visible\nend\n\n",
        "answerImage": [
          "https://i.ibb.co/HHkpq4h/Ar3.png"
        ]
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 4\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] == 1 -- if a target point is real let the answer be visible\nend\n\n",
        "id": 478,
        "text": "   ",
        "lua_do": "function lua_do() -- when click on direction button \n local d = 4 -- right (need to set direction for each button manually)\n local b = sapper.currentPosition\n sapper.currentPosition.y, sapper.currentPosition.x = sapperTarget(b, d)\n local c = sapper.currentPosition\n   for i = 1, 36 do -- find target point in the field\n     if c.y == sapper.field[i][\"y\"] and c.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n\nsapper.turns = sapper.turns <plus> 1\n\n if  sapper.field[b][\"vztd\"] ~= 1 then\n sapper.endOfMove = 1\n sapper.field[b][\"vztd\"] = 1 -- have vizited new point\nend\n sapper.field[b][\"vsbl\"] = 1 -- now is for sure capable  to see the value of the point\n sapper.currentPosition.a = sapper.field[b][\"a\"] -- set a-factor appropriate for new position\n   if sapper.field[b][\"val\"] == 0 then --check wether value of new point equals 0 and if so run function sapperDopwvtp(sapper.currentPosition)\n     sapperDopwvtp(sapper.currentPosition)\n   end\n-- showPage() -- make a transition in accordance with value of new position\nend",
        "answerImage": [
          "https://i.ibb.co/3vXy8Hs/Ar4.png"
        ]
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 4\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] ~= 1 -- if a target point is real let the answer be visible\nend\n\n",
        "id": 478,
        "text": "   ",
        "comment": true,
        "answerImage": [
          "https://i.ibb.co/3vXy8Hs/Ar4.png"
        ]
      },
      {
        "right_answer": false,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 5\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] == 1 -- if a target point is real let the answer be visible\nend\n\n",
        "left_answer": true,
        "id": 478,
        "text": "   ",
        "lua_do": "function lua_do() -- when click on direction button \n local d = 5 -- down and left (need to set direction for each button manually)\n local b = sapper.currentPosition\n sapper.currentPosition.y, sapper.currentPosition.x = sapperTarget(b, d)\n local c = sapper.currentPosition\n   for i = 1, 36 do -- find target point in the field\n     if c.y == sapper.field[i][\"y\"] and c.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n\nsapper.turns = sapper.turns <plus> 1\n\n if  sapper.field[b][\"vztd\"] ~= 1 then\n sapper.endOfMove = 1\n sapper.field[b][\"vztd\"] = 1 -- have vizited new point\nend\n sapper.field[b][\"vsbl\"] = 1 -- now is for sure capable  to see the value of the point\n sapper.currentPosition.a = sapper.field[b][\"a\"] -- set a-factor appropriate for new position\n   if sapper.field[b][\"val\"] == 0 then --check wether value of new point equals 0 and if so run function sapperDopwvtp(sapper.currentPosition)\n     sapperDopwvtp(sapper.currentPosition)\n   end\n-- showPage() -- make a transition in accordance with value of new position\n\nend",
        "answerImage": [
          "https://i.ibb.co/WGdYpYw/Ar5.png"
        ]
      },
      {
        "right_answer": false,
        "comment": true,
        "left_answer": true,
        "id": 478,
        "text": "   ",
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 5\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] ~= 1 -- if a target point is real let the answer be visible\nend\n\n",
        "answerImage": [
          "https://i.ibb.co/WGdYpYw/Ar5.png"
        ]
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 6\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] == 1 -- if a target point is real let the answer be visible\nend\n\n",
        "id": 478,
        "text": "   ",
        "lua_do": "function lua_do() \n-- when click on direction button \n local d = 6 -- down and right (need to set direction for each button manually)\n local b = sapper.currentPosition\n sapper.currentPosition.y, sapper.currentPosition.x = sapperTarget(b, d)\n local c = sapper.currentPosition\n   for i = 1, 36 do -- find target point in the field\n     if c.y == sapper.field[i][\"y\"] and c.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n\nsapper.turns = sapper.turns <plus> 1\n\n   if  sapper.field[b].vztd ~= 1 then\n sapper.endOfMove = 1\n sapper.field[b].vztd = 1 -- have vizited new point\nend\n sapper.field[b][\"vsbl\"] = 1 -- now is for sure capable  to see the value of the point\n sapper.currentPosition.a = sapper.field[b][\"a\"] -- set a-factor appropriate for new position\n   if sapper.field[b][\"val\"] == 0 then --check wether value of new point equals 0 and if so run function sapperDopwvtp(sapper.currentPosition)\n     sapperDopwvtp(sapper.currentPosition)\n   end\n-- showPage() -- make a transition in accordance with value of new position\n\nend",
        "answerImage": [
          "https://i.ibb.co/zQb1YpK/Ar6.png"
        ]
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if() -- for navigation buttons where d varies for each direction\n local a = {}\n local b = 0\nlocal d = 6\n a.y, a.x = sapperTarget(sapper.currentPosition, d) -- get target point coordinates\n   for i = 1, 36 do -- find target point in the field\n     if a.y == sapper.field[i][\"y\"] and a.x == sapper.field[i][\"x\"] then\n       b = i -- get target point\n     end\n   end\n return g.current_id == 478 and sapper.field[b][\"real\"] ~= 1 -- if a target point is real let the answer be visible\nend\n\n",
        "id": 478,
        "text": "   ",
        "comment": true,
        "answerImage": [
          "https://i.ibb.co/zQb1YpK/Ar6.png"
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 478,
        "text": "Новый ответ. введите текст",
        "comment": true,
        "lua_text": "function lua_text()\nlocal a = sapper.currentPosition\nlocal b = 0\nfor i = 1, 36 do\n  if sapper.field[i].y == a.y and sapper.field[i].x == a.x then\n    b = i\n  end\nend\na = sapper.field[b].val\n\n\nreturn \"seed: \" .. sapper.seed ..\"<s>\ncurrent position y: \" .. sapper.currentPosition.y .. \", x: \" .. sapper.currentPosition.x .. \"<s>\nval: \" .. a\nend"
      },
      {
        "super_calculate": false,
        "id": 478,
        "calculate": true,
        "lua_do": "function lua_do()\n\nlocal textInt = \"\"\n--[==[\"\" -- вариативный текст введения\ntextInt =\n(UpLine == 1 and \"Вернувшись на безопасную клетку Орнас с сожалением заметил, что она шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.\") or\n(UpLine == 2 and \n[=[– Я тут подожду, чтобы не мешать – после короткой паузы сказала Десс. –Да и подстрахую в случае чего.\n   Орнас улыбнулся, но возражать не стал. Он осторожно наступил на ближайший шестиугольник, и он зашатался под весом юноши. Хотя больше ничего не произошло, это существенно осложняло задачу: в таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.]=]\n) or\n(UpLine == 3 and [=[– Разберёшься? – коротко спросил учитель.\n   Орнас кивнул и осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.\n]=]\n) or\n(UpLine == 4 and \"– Удачи, – буркнул TL-3 откуда-то сзади.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"\"\n]==]\n\nlocal textRand = -- вариативный текст обычных переходов - таблица с 4-5 вариантами, рандомный выбор\n  {\"Орнас осторожно ковырнул ботинком край плиты, затем перенёс весь вес на неё. К счастью, ничего не произошло.\",\n  \"Орнас медленно перешёл на следующий участок пола, оценивая его относительную высоту.\",\n   \"Орнас сделал ещё один шаг и замер от внезапного хруста под ногой. К счастью, это оказался всего лишь невесть откуда взявшийся здесь осколок стекла.\",\n   \"Орнас чересчур быстро перешёл на соседнюю плиту и чуть не упал, когда та зашаталась под его весом в разные стороны. К счастью, всё обошлось.\",\n   \"Задумавшись о своей миссии, Орнас чуть не наступил на две плиты сразу и лишь чудом успел остановиться лишь на нужной.\"}\n\nif sapper.turns == -1 then\nsapper.turns = 0\n--[=[dialog ({\nheader = \"Первый шаг\", text = \"Орнас приготовился идти.\",\nanswers = {\n                     {text = \"Вперёд!\", pressListener = function ()\nsapper.endOfMove = 0\nshowPage {id = 478}\nsapper.turns = 0\nhideDialog() end},\n                    }\n             })\n]=]\nsapShowText =\"<s>\n   Орнас приготовился идти.\"\n\nend\n\n\nlocal a = sapper.currentPosition\nlocal b = 0\nfor i = 1, 36 do\n  if sapper.field[i].y == a.y and sapper.field[i].x == a.x then\n    b = i\n  end\nend\na = sapper.field[b].val\n\n\n \n   if sapper.endOfMove ==1 then\n     if a == 10 then\ndialog ({\nheader = \"Вдруг!..\", text = \"Орнас не успел понять, что допустил ошибку, но рефлексы сработали безотказно: резкий отскок, кувырок, и вот юноша уже почти в дверях.\",\nanswers = {\n                     {text = \"Бежать!\", pressListener = function ()\nsapper.endOfMove = 0\nsapper.fail = 1\nsapperFail = 1\nshowPage {id = 503}\nhideDialog() end}\n                    }\n             })\n     elseif a == 0 then\n--[=[dialog ({\nheader = \"Ровная плита\", text = \"Орнас даже вздрогнул от удивления, когда оказался на устойчивой ровной плите. Вокруг точно не было ни одной ловушки, поэтому юноша осторожно прощупал края соседних участков, определяя их высоту.\",\nanswers = {\n                     {text = \"Продолжить\", pressListener = function ()\nsapper.endOfMove = 0\nhideDialog() end}\n                    }\n             })\n     ]=]\n  sapShowText =\"<s>\n    Орнас даже вздрогнул от удивления, когда оказался на устойчивой ровной плите. Вокруг точно не было ни одной ловушки, поэтому юноша осторожно прощупал края соседних участков, определяя их высоту.\"\n     else\n--[=[dialog ({\nheader = \"Ещё один шаг\", text = textRand[math.random(1,5)],\nanswers = {\n                     {text = \"Продолжить\", pressListener = function ()\nsapper.endOfMove = 0\nhideDialog() end}\n                    }\n             })\n]=]\nsapShowText =\"<s>\n   \" .. textRand[math.random(1,5)]\n     end\n   end\n\n\n\n if (b == 33 or b == 34) and a ~= 10 then\nsapper.endOfMove = 0\n-- exit dialogue\ndialog ({\nheader = \"Проход вглубь храма\", text = \"Юноша достиг наконец двери на дальней стороне зала, и она приветливо открылась. Отсюда можно пройти дальше или продолжить исследование комнаты.\",\nanswers = {\n                     {text = \"Выйти\", pressListener = function ()\nsapper.endOfMove = 0\nshowPage {id = 504}\nhideDialog() end},\n                      {text = \"Продолжить здесь\", pressListener = function ()\nsapper.endOfMove = 0\nhideDialog() end}\n                    }\n             })\n  elseif b == 5 and sapper.turns > 1 then\nsapper.endOfMove = 0\n-- exit dialogue\n\nlocal ep = (UpLine == 5 and  754 ) or (UpLine == 6 and 671) or (UpLine == 7 and 720) or (UpLine == 8 and 817) or 498\nsapper.turns = -1\ndialog ({\nheader = \"Дверь в коридор\", text = \"Отсюда можно покинуть зал и вернуться назад в коридор.\",\nanswers = {\n                     {text = \"Выйти\", pressListener = function ()\nsapper.endOfMove = 0\nshowPage {id = ep}\nhideDialog() end},\n                      {text = \"Продолжить здесь\", pressListener = function ()\nsapper.endOfMove = 0\nhideDialog() end}\n                    }\n             })\n  end\n\n\nend",
        "text": "dialogue after movement"
      },
      {
        "id": 479,
        "text": "Pictures",
        "run": [
          479
        ],
        "lua_if": "function lua_if()\nreturn sapper and sapper.field\nend"
      },
      {
        "id": 481,
        "text": "position",
        "run": [
          481
        ],
        "lua_if": "function lua_if()\nreturn sapper\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 478\nend",
        "id": 478,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn sapShowText\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn sapper and sapper.field\nend",
        "super_calculate": false,
        "id": 478,
        "calculate": true,
        "lua_do": "function lua_do()\nlocal achiev = 1\nachievSapper = achievSapper or 0\nfor i = 1,36 do\n  if sapper.field[i][\"real\"] == 1 and sapper.field[i].val ~= 10 then\n   if sapper.field[i][\"vsbl\"] == 0 then\n     achiev = 0\n   end\n  end\nend\n\nif achiev == 1 and achievSapper ~= 1 then\n   newAchieve(\"sapper\",1,1)\nend\nend",
        "text": "Сделать достижение на посещение всех неопасных клеток"
      },
      {
        "comment": false,
        "id": 478,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn false\nend",
        "lua_do": "function lua_do()\nachievSapper = 0\nend"
      }
    ]
  },
  {
    "id": 479,
    "text": "Page with pictures",
    "answers": [
      {
        "id": 479,
        "text": "seed 1",
        "lua_if": "function lua_if()\nsapper = sapper or {}\nsapper.seed = sapper.seed or 1\nreturn sapper.seed == 1\nend",
        "url": "https://i.ibb.co/WvN3nFJ/sapper-seed1.png"
      },
      {
        "id": 479,
        "text": "seed 2",
        "lua_if": "function lua_if()\nsapper = sapper or {}\nsapper.seed = sapper.seed or 1\nreturn sapper.seed == 2\nend",
        "url": "https://i.ibb.co/dmBRGDk/sapper-seed2.png"
      },
      {
        "id": 479,
        "text": "seed 3",
        "lua_if": "function lua_if()\nsapper = sapper or {}\nsapper.seed = sapper.seed or 1\nreturn sapper.seed == 3\nend",
        "url": "https://i.ibb.co/sHXNTZm/sapper-seed3.png"
      },
      {
        "id": 479,
        "text": "Seed 4",
        "lua_if": "function lua_if()\nsapper = sapper or {}\nsapper.seed = sapper.seed or 1\nreturn sapper.seed == 4\nend",
        "url": "https://i.ibb.co/jvp0sjb/sapper-seed4.png"
      },
      {
        "id": 479,
        "text": "seed 5",
        "lua_if": "function lua_if()\nsapper = sapper or {}\nsapper.seed = sapper.seed or 1\nreturn sapper.seed == 5\nend",
        "url": "https://i.ibb.co/R9kr8RG/sapper-seed5.png"
      },
      {
        "id": 479,
        "text": "seed 6",
        "lua_if": "function lua_if()\nsapper = sapper or {}\nsapper.seed = sapper.seed or 1\nreturn sapper.seed == 6\nend",
        "url": "https://i.ibb.co/F35hFKS/sapper-seed6.png"
      },
      {
        "id": 479,
        "text": "6",
        "lua_if": "function lua_if()\nreturn sapper.field[6].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/F8kdNcC/cover-6.png"
      },
      {
        "id": 479,
        "text": "7",
        "lua_if": "function lua_if()\nreturn sapper.field[7].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/hsd0mpf/cover-7.png"
      },
      {
        "id": 479,
        "text": "11",
        "lua_if": "function lua_if()\nreturn sapper.field[11].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/tLgjLB8/cover-11.png"
      },
      {
        "id": 479,
        "text": "12",
        "lua_if": "function lua_if()\nreturn sapper.field[12].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/Gk2MpZn/cover-12.png"
      },
      {
        "id": 479,
        "text": "14",
        "lua_if": "function lua_if()\nreturn sapper.field[14].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/dcWL70h/cover-14.png"
      },
      {
        "id": 479,
        "text": "15",
        "lua_if": "function lua_if()\nreturn sapper.field[15].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/bbcnQQT/cover-15.png"
      },
      {
        "id": 479,
        "text": "16",
        "lua_if": "function lua_if()\nreturn sapper.field[16].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/R9KSw6k/cover-16.png"
      },
      {
        "id": 479,
        "text": "17",
        "lua_if": "function lua_if()\nreturn sapper.field[17].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/NmJbDrx/cover-17.png"
      },
      {
        "id": 479,
        "text": "18",
        "lua_if": "function lua_if()\nreturn sapper.field[18].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/c8FTq1y/cover-18.png"
      },
      {
        "id": 479,
        "text": "19",
        "lua_if": "function lua_if()\nreturn sapper.field[19].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/FYvqcvr/cover-19.png"
      },
      {
        "id": 479,
        "text": "20",
        "lua_if": "function lua_if()\nreturn sapper.field[20].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/dtktcFZ/cover-20.png"
      },
      {
        "id": 479,
        "text": "21",
        "lua_if": "function lua_if()\nreturn sapper.field[21].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/pn9751x/cover-21.png"
      },
      {
        "id": 479,
        "text": "22",
        "lua_if": "function lua_if()\nreturn sapper.field[22].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/LYmGKfR/cover-22.png"
      },
      {
        "id": 479,
        "text": "23",
        "lua_if": "function lua_if()\nreturn sapper.field[23].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/TPSK7Dk/cover-23.png"
      },
      {
        "id": 479,
        "text": "24",
        "lua_if": "function lua_if()\nreturn sapper.field[24].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/1MKy2xM/cover-24.png"
      },
      {
        "id": 479,
        "text": "26",
        "lua_if": "function lua_if()\nreturn sapper.field[26].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/9TYDgqb/cover-26.png"
      },
      {
        "id": 479,
        "text": "27",
        "lua_if": "function lua_if()\nreturn sapper.field[27].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/7Y2Q0Bv/cover-27.png"
      },
      {
        "id": 479,
        "text": "28",
        "lua_if": "function lua_if()\nreturn sapper.field[28].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/sWwz2tm/cover-28.png"
      },
      {
        "id": 479,
        "text": "29",
        "lua_if": "function lua_if()\nreturn sapper.field[29].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/wcGQ4qC/cover-29.png"
      },
      {
        "id": 479,
        "text": "30",
        "lua_if": "function lua_if()\nreturn sapper.field[30].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/2vQJ5fn/cover-30.png"
      },
      {
        "id": 479,
        "text": "31",
        "lua_if": "function lua_if()\nreturn sapper.field[31].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/zxW1ky8/cover-31.png"
      },
      {
        "id": 479,
        "text": "32",
        "lua_if": "function lua_if()\nreturn sapper.field[32].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/80MQJnf/cover-32.png"
      },
      {
        "id": 479,
        "text": "33",
        "lua_if": "function lua_if()\nreturn sapper.field[33].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/FmqQnK4/cover-33.png"
      },
      {
        "id": 479,
        "text": "34",
        "lua_if": "function lua_if()\nreturn sapper.field[34].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/RCnnffh/cover-34.png"
      },
      {
        "id": 479,
        "text": "35",
        "lua_if": "function lua_if()\nreturn sapper.field[35].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/cT2vZ0W/cover-35.png"
      },
      {
        "id": 479,
        "text": "36",
        "lua_if": "function lua_if()\nreturn sapper.field[36].vsbl ~= 1\nend",
        "url": "https://i.ibb.co/nMtKg0R/cover-36.png"
      },
      {
        "id": 479,
        "text": "Укажите команды для картинки",
        "url": "https://i.ibb.co/bsZPj6z/framework.png"
      }
    ]
  },
  {
    "id": 480,
    "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом. ",
    "answers": [
      {
        "id": 493,
        "text": "Динамическое описание локации,  реакции компаньонов,\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"Десвиар тоже повозилась у сомкнутых створок, но так же безуспешно.\") or\n(UpLine == 3 and \"<s>\n– Не будем сейчас тратить на это время, – посоветовал учитель.\") or\n(UpLine == 4 and [=[ \n– Мои сканеры не выявили управляющих элементов с этой стороны, – подтвердил опасения юноши TL-3.]=]) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"<s>\n– Не будем сейчас тратить на это время, – посоветовал учитель.<s>\n– Всё равно сканеры не выявили управляющих элементов с этой стороны, – подтвердил опасения джедая TL-3.\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 480,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\npanelDetected480 = panelDetected480 or 0\ntext = panelDetected480 == 0 and \"Справа от двери коридор заканчивался тупиком, но даже поверхностный взгляд позволил юноше найти кое-что необычное – небольшую вмятину на панели и более тёмные швы на её стыках. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.\" or \"Справа от двери коридор заканчивался тупиком. Возле приставленных к стене решётки и помятой панели обшивки зияла тёмная шахта вентиляции.\"\nreturn \"<s>\n   \" .. text\nend",
        "merge": true
      },
      {
        "id": 493,
        "text": "Динамическое описание локации,  реакции компаньонов,\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_text": "function lua_text()\nTL3 = TL3 or {}\nTL3.visits = TL3.visits or 0\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"<s>\n– Что дальше, командир? – спросила девушка, вытянувшись по струнке.<s>\n   Орнас только пожал плечами и задумался.\") or\n(UpLine == 3 and \"<s>\n– Кажется, вариантов здесь немного, – заметил магистр Льерсо. – С чего начнём?\") or\n\n(UpLine == 4 and [=[ \n– Ты что-то говорил про своего бывшего хозяина? Разве он не погиб?\n– Всё может быть. В этом я и хочу разобраться.]=])\n\n or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"<s>\n– Кажется, вариантов здесь немного, – заметил магистр Льерсо. – С чего начнём?\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 517,
        "text": "Исследовать подозрительную панель",
        "lua_if": "function lua_if()\nreturn panelDetected480 and panelDetected480 == 0\nend",
        "lua_do": "function lua_do()\npanelDetected480 = 1\nend"
      },
      {
        "id": 496,
        "text": "Пройти по коридору"
      },
      {
        "id": 497,
        "text": "Залезть в вентиляцию",
        "lua_if": "function lua_if()\nreturn panelDetected480 == 1\nend"
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 2 and poisonGasIsOn == 1\nend",
        "id": 519,
        "text": "Устранить утечку газа с помощью Силы",
        "need": [
          497,
          -519
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      }
    ]
  },
  {
    "id": 481,
    "text": "position",
    "answers": [
      {
        "id": 481,
        "text": "2",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 1 and sapper.currentPosition.x == 2\n\nend\n",
        "url": "https://i.ibb.co/xHb2kNw/position-2.png"
      },
      {
        "id": 481,
        "text": "5",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 1 and sapper.currentPosition.x == 5\n\nend\n",
        "url": "https://i.ibb.co/37dcGW7/position-5.png"
      },
      {
        "id": 481,
        "text": "6",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 1 and sapper.currentPosition.x == 6\n\nend\n",
        "url": "https://i.ibb.co/3N8h00L/position-6.png"
      },
      {
        "id": 481,
        "text": "7",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 2 and sapper.currentPosition.x == 1\n\nend\n",
        "url": "https://i.ibb.co/K6L0LR2/position-7.png"
      },
      {
        "id": 481,
        "text": "8",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 2 and sapper.currentPosition.x == 2\n\nend\n",
        "url": "https://i.ibb.co/HPsmKc6/position-8.png"
      },
      {
        "id": 481,
        "text": "9",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 2 and sapper.currentPosition.x == 3\n\nend\n",
        "url": "https://i.ibb.co/VD2X8y8/position-9.png"
      },
      {
        "id": 481,
        "text": "10",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 2 and sapper.currentPosition.x ==4\n\nend\n",
        "url": "https://i.ibb.co/QpbMtgS/position-10.png"
      },
      {
        "id": 481,
        "text": "11",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 2 and sapper.currentPosition.x == 5\n\nend\n",
        "url": "https://i.ibb.co/3pxQYL8/position-11.png"
      },
      {
        "id": 481,
        "text": "12",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 2 and sapper.currentPosition.x == 6\n\nend\n",
        "url": "https://i.ibb.co/2M12q6Z/position-12.png"
      },
      {
        "id": 481,
        "text": "14",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 3 and sapper.currentPosition.x == 2\n\nend\n",
        "url": "https://i.ibb.co/WDR2xYp/position-14.png"
      },
      {
        "id": 481,
        "text": "15",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 3 and sapper.currentPosition.x == 3\n\nend\n",
        "url": "https://i.ibb.co/4N5cdJM/position-15.png"
      },
      {
        "id": 481,
        "text": "16",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 3 and sapper.currentPosition.x == 4\n\nend\n",
        "url": "https://i.ibb.co/3v6vvY7/position-16.png"
      },
      {
        "id": 481,
        "text": "17",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 3 and sapper.currentPosition.x == 5\n\nend\n",
        "url": "https://i.ibb.co/G7jwfj2/position-17.png"
      },
      {
        "id": 481,
        "text": "18",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 3 and sapper.currentPosition.x == 6\n\nend\n",
        "url": "https://i.ibb.co/nPg1jTR/position-18.png"
      },
      {
        "id": 481,
        "text": "19",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 4 and sapper.currentPosition.x == 1\n\nend\n",
        "url": "https://i.ibb.co/Z1M6Csq/position-19.png"
      },
      {
        "id": 481,
        "text": "20",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 4 and sapper.currentPosition.x == 2\n\nend\n",
        "url": "https://i.ibb.co/jZ17xFg/position-20.png"
      },
      {
        "id": 481,
        "text": "21",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 4 and sapper.currentPosition.x == 3\n\nend\n",
        "url": "https://i.ibb.co/6FdN7Q5/position-21.png"
      },
      {
        "id": 481,
        "text": "22",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 4 and sapper.currentPosition.x == 4\n\nend\n",
        "url": "https://i.ibb.co/XsBTF2Y/position-22.png"
      },
      {
        "id": 481,
        "text": "23",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 4 and sapper.currentPosition.x == 5\nend\n",
        "url": "https://i.ibb.co/yskzqDB/position-23.png"
      },
      {
        "id": 481,
        "text": "24",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 4 and sapper.currentPosition.x == 6\n\nend\n",
        "url": "https://i.ibb.co/s9sWz6V/position-24.png"
      },
      {
        "id": 481,
        "text": "26",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 5 and sapper.currentPosition.x == 2\n\nend\n",
        "url": "https://i.ibb.co/ZBCB8Pk/position-26.png"
      },
      {
        "id": 481,
        "text": "27",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 5 and sapper.currentPosition.x == 3\n\nend\n",
        "url": "https://i.ibb.co/DzJq35P/position-27.png"
      },
      {
        "id": 481,
        "text": "28",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 5 and sapper.currentPosition.x == 4\nend\n",
        "url": "https://i.ibb.co/gzT3gBK/position-28.png"
      },
      {
        "id": 481,
        "text": "29",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 5 and sapper.currentPosition.x == 5\n\nend\n",
        "url": "https://i.ibb.co/7Xtb54d/position-29.png"
      },
      {
        "id": 481,
        "text": "30",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 5 and sapper.currentPosition.x == 6\n\nend\n",
        "url": "https://i.ibb.co/kM0rZrQ/position-30.png"
      },
      {
        "id": 481,
        "text": "31",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 6 and sapper.currentPosition.x == 1\n\nend\n",
        "url": "https://i.ibb.co/rZp9f1N/position-31.png"
      },
      {
        "id": 481,
        "text": "32",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 6 and sapper.currentPosition.x ==2\n\nend\n",
        "url": "https://i.ibb.co/YRCHc8P/position-32.png"
      },
      {
        "id": 481,
        "text": "33",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 6 and sapper.currentPosition.x == 3\n\nend\n",
        "url": "https://i.ibb.co/3s9rrCq/position-33.png"
      },
      {
        "id": 481,
        "text": "34",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 6 and sapper.currentPosition.x == 4\n\nend\n",
        "url": "https://i.ibb.co/TRFxRc4/position-34.png"
      },
      {
        "id": 481,
        "text": "35",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 6 and sapper.currentPosition.x == 5\n\nend\n",
        "url": "https://i.ibb.co/DCGMmQ4/position-35.png"
      },
      {
        "id": 481,
        "text": "36",
        "lua_if": "function lua_if()\n\nsapper = sapper or {}\nsapper.currentPosition = sapper.currentPosition or {}\nsapper.currentPosition.y = sapper.currentPosition.y or 1\nsapper.currentPosition.x = sapper.currentPosition.x or 5\nreturn sapper.currentPosition.y == 6 and sapper.currentPosition.x == 6\n\nend\n",
        "url": "https://i.ibb.co/5T1RyQ6/position-36.png"
      }
    ]
  },
  {
    "id": 482,
    "text": "– Тут ничего интересного, – продолжила Десвиар, пока юноша озирался по сторонам. – Только на двери какой-то странный механизм. Я не стала трогать, тебе же так важно всё самому сделать, я помню.\n– Не начинай... – вздохнул Орнас. – Ты первая начала из себя командира строить. \n   Он подошёл к двери и принялся внимательно её рассматривать. Десс что-то буркнула ему в спину.",
    "answers": [
      {
        "id": 471,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 483,
    "text": "– Знаешь, почему я всё-таки решил тебе помочь? – неожиданно спросил TL-3, пока юноша обследовал площадку. – Ты показался мне достаточно устремлённым и надёжным. Вероятность успешного преодоления возможных трудностей статистически приемлема.\n– Буду считать это комплиментом, – отозвался Орнас, не поворачиваясь к собеседнику. – Но разве тебе интересен мой успех?\n– Отрицательный ответ был бы недиплломатичным. Но кроме того, я рассчитываю отыскать необходимую информацию, которая могла бы быть интересна нам обоим.\n   Джедай закончил осмотр. Похоже, единственным стоящим внимания объектом была сама дверь.",
    "answers": [
      {
        "id": 471,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 484,
    "text": "– Ну, – продолжил учитель уже более спокойным голосом, – что скажешь?\n– На ступенях пыль. Вероятно содержит психоактивную добавку. Не исключено искусственное происхождение и умышленное размещение на лестнице, – отчеканил юноша. – Во всяком случае, место для ловушки объективно очень удачное. Запах у пыли смутно знакомый, я бы собрал образец вещества для структурного анализа, но только после...\n– Я понял, – мягко перебил его магистр Льерсо. – Как оцениваешь свои действия?\n– ",
    "answers": [
      {
        "id": 484,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nmaster = master or {}\nmaster.confidence = master.confidence or 5\ncodeBonus = codeBonus or \"\"\nlocal text = \"\"\n\n\nif codeBonus == \"jedy\" then\ntext =\n[==[Ловушку не распознал, – опечалился юноша. – Но действию токсина сопротивлялся, контроль не потерял.\n   Орнас затруднялся определить наверняка, удовлетворён ли наставник ответом, но по крайней мере выглядел он вполне благосклонно.\n– Знакомый запах, значит... – тихо проговорил учитель, явно обращаясь уже не к своему подопечному.\n]==]\nmaster.confidence = master.confidence <plus> 1\n\nelseif codeBonus == \"sith\" then\ntext = [==[Ловушку не распознал, – сердито отметил юноша. – Но действию токсина сопротивлялся, контроль не потерял.\n   Орнас затруднялся определить наверняка, удовлетворён ли наставник ответом, но выглядел тот раздосадованным.\n– Знакомый запах, значит... – тихо проговорил учитель, явно обращаясь уже не к своему подопечному.\n]==]\nmaster.confidence = master.confidence -2\nelse\ntext = [=[Ловушку не распознал, – опечалился юноша. – И действию токсина сопротивлялся безуспешно, контроль над ситуацией потерял, хоть и совсем ненадолго....\n– Иногда потерять контроль предпочтительнее, чем цепляться за него любой ценой, – тихо проговорил учитель, похлопав подопечного по плечу.]=]\nmaster.confidence = master.confidence <plus>1\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 471,
        "text": "К загадке на двери"
      }
    ]
  },
  {
    "id": 485,
    "text": "– Так ты вместе с ней? – зажужжал в наушнике перевод очередной трели TL-3. – Ты хоть знаешь, кто она и что сделала?\n– В общих чер... – попытался ответить джедай.\n– Да кто бы говорил! – взвилась Десс. – Дроид на службе наёмных убийц. Как думаешь, Орнас, кому он станет помогать, когда найдёт своего драгоценного хозяина? Ой, не нам...\n   Взаимные упрёки, нападки и встречные предложения избавиться от опасного спутника здесь и сейчас посыпались с новой силой. Поначалу юноша пытался игнорировать спорящих, прошёл мимо них к двери и занялся поиском отпирающего механизма. Но конфликт разгорался всё сильнее, в любой момент грозя перерасти в драку, если вообще можно назвать дракой столкновение вооруженного световым мечом джедая и маленького астродроида.\n   Орнас заколебался: остановить обоих, чтобы не раздувать конфликт? Или позволить высказать всё, рискуя наступить на чью-то больную мазоль?",
    "answers": [
      {
        "id": 485,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn style == 5 and \"<s>\n   Чутьё опытного дипломата подсказывало, что прошлое – больная тема для Десвиар.\" or \"\"\nend",
        "merge": true
      },
      {
        "id": 692,
        "text": "– Расскажите мне наконец правду, что всё-таки между вами произошло?",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.dessRel = 3\nUpLine7.droidRel = 5\nUpLine7.conflict  = 0\nend"
      },
      {
        "id": 695,
        "text": "– Давайте оставим прошлое в прошлом и сосредоточимся на настоящем.",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.dessRel = 5\nUpLine7.droidRel = 4\nUpLine7.conflict  = 0\nend"
      },
      {
        "id": 694,
        "text": "– Хватит! Остановитесь оба!",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.dessRel = 5\nUpLine7.droidRel = 5\nUpLine7.conflict  = 1\nend"
      }
    ]
  },
  {
    "id": 486,
    "text": "– Как же ты всё-таки изменился! – с нескрываемой печалью протянула Десс. – Вот уж правда, время никого не щадит…\n— Пожалуй, — после недолгой паузы согласился джедай, неторопливо разглаживая и без того аккуратно уложенную бородку.\n— Где же тот отчаянный мальчишка, вечно ищущий неприятностей? – продолжала девушка. – С горящим взглядом слушающий истории про приключения Ревана и войны с ситхами, своими выходками удивляющий даже всеведущего магистра Буши... Ну как, удалось стать самым молодым магистром в истории Ордена?\n– Вообще-то да, – отозвался мастер и широко улыбнулся. – Но тому мальчишке пришлось исчезнуть, когда в Ордене появился этот парень.\n   Орнас смутился, поняв, что речь сейчас идёт о нём самом. До сих пор он и представить не мог, что этот строгий невозмутимый человек не был таким с самого рождения.",
    "answers": [
      {
        "id": 471,
        "text": "Дальше",
        "lua_if": "function lua_if()\n \n-- Десс не порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn dess.delayedPenalty == 0 \nend"
      },
      {
        "id": 872,
        "text": "Дальше",
        "lua_if": "function lua_if()\n \n-- Десс уже порабощена\ndess = dess or {}\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn dess.delayedPenalty == 1\nend"
      }
    ]
  },
  {
    "id": 487,
    "text": "– Он говорит, что мы не приятели, – послушно перевёл юноша. – Мы временные партнёры.\n– Да, – кивнул учитель, – я понимаю язык дроидов.\n– TL-3, штурман и механик, – тут же представился дроид. – Рад приветствовать вас.\n   Наставник Орнаса учтиво поклонился в ответ:\n– Астор Льерсо, магистр Высшего Совета джедаев на Корусанте.\n– А со мной никаких церемоний, – буркнул юноша. – Где была твоя вежливость, когда я починил тебя?\n– Будь скромнее, юный падаван, – одёрнул его учитель.\n– Мастеру Льерсо от меня ничего не нужно, – откликнулся дроид, – а по тебе сразу было видно, надеялся на помощь.\n– Ничего мне от тебя не надо было, я спас тебя...\n– Орнас! – вновь перебил наставник. – Займись дверью.",
    "answers": [
      {
        "id": 471,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 488,
    "text": "– Ты проницателен не по годам, – улыбнулся магистр Льерсо. – Мне даже интересно, как ты собираешься справляться с этим.\n   Будто в подтверждение его слов Десвиар, с задумчивым видом изучающая дверь, отступила на несколько шагов и врезалась в TL-3. Тот мгновенно разразился бранью, и девушка с азартом присоединилась к обмену колкостями и прямыми оскорблениями. Эмоции накалялись, и казалось, конфликт вот-вот перерастёт в драку.\n   Орнас проскользнул к двери и будто невзначай оказался между спорящими, но те и не думали обращать внимание на такое незначительное затруднение.\n– Нужно двигаться дальше! – сказал он громко. – Помогите мне разобраться с дверью, кто-нибудь!\n   Вновь бесполезно.",
    "answers": [
      {
        "id": 758,
        "text": "Попросить учителя помочь",
        "lua_do": "function lua_do()\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend"
      },
      {
        "id": 759,
        "text": "Попросить Десвиар помочь",
        "lua_do": "function lua_do()\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 1\nend"
      },
      {
        "id": 760,
        "text": "Попросить TL-3 помочь",
        "lua_do": "function lua_do()\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\nend"
      }
    ]
  },
  {
    "id": 489,
    "text": "   Джедай прикоснулся к варианту \"Согласиться\", и текст на экране поменялся.\n   \"В неравном бою под множеством ударов чудовище пало. Едва переведя дыхание, ты, наконец, решаешься заговорить с воином о причитающейся тебе доле сокровищ\".",
    "answers": [
      {
        "id": 491,
        "text": "«Отказаться от сокровищ»"
      },
      {
        "id": 512,
        "text": "«Просить четверть сокровищ»"
      },
      {
        "id": 492,
        "text": "«Просить половину сокровищ»"
      },
      {
        "id": 489,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[ \n– Любопытно... – пробормотал магистр Льерсо. – И что дальше?]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ \n– Ага, – обрадовалась Десвиар, – так уже интереснее.]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[ \n– Провожу уточнение первоначальной модели, – сухо отозвался TL-3.]=])\nelse end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 490,
    "text": "   Орнас выбрал вариант \"Отказаться\" и замер. Экран отреагировал через несколько секунд и текст загадки сменился.\n   \"Ты коротко отказываешься, отчего воин лишь раздражённо рычит. Продолжая наблюдать за схваткой ещё какое-то время, ты понимаешь, что чудовище почти повержено. Что предпримешь ты теперь? Поможешь ли нанести смертельный удар зверю? Или нападёшь на самого воина, чтобы оставить всю добычу себе? Или будешь просто ждать?",
    "answers": [
      {
        "id": 494,
        "text": "«Помочь добить чудовище»"
      },
      {
        "id": 495,
        "text": "«Напасть на воина»"
      },
      {
        "id": 516,
        "text": "«Ждать»"
      },
      {
        "id": 489,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[ \n– Ага, – подал голос магистр Льерсо, – вот и продолжение.]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ \n– О, – обрадовалась Десвиар, – ещё больше вариантов.]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[ \n– Добавил новые данные к своей модели, – безэмоционально сказал TL-3.]=])\nelse end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 491,
    "text": "   Не долго думая, джедай выбрал вариант \"Отказаться от сокровищ\". \n",
    "answers": [
      {
        "id": 491,
        "text": "Реакция Десс ",
        "lua_text": "function lua_text()\n\nlocal text = \"\"\nif UpLine == 2 then\ntext = \"– Ну нет же, не будь тюфяком! – раздался откуда-то сзади голос раздосадованой Десс.<s>\n\"\nelseif UpLine == 3 or UpLine == 6 then\ntext = \"– Наверняка это не тот ответ, который смог бы по достоинству оценить владыка ситхов, оставивший эту загадку, – усмехнулся наставник Орнаса.<s>\n\"\nelseif UpLine == 4 then\ntext = [=[– Не пренебрегай более глубоким анализом ситуации, – раздалось в наушнике-переводчике. – Используй контекст вне условий.\n– Только этим и занимаюсь...\n]=]\nelseif UpLine == 5 then\ntext = [=[  Учитель потянул Десвиар за рукав и молча показал на что-то в тексте загадки. Её брови от удивления поползли вверх.\n]=]\nelseif UpLine == 7 then\ntext = [=[  TL-3 загудел и коротко пискнул, но наушник Орнаса не смог это перевести.\n]=]\n\nelseif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[– Благородно, но несколько оторванно от ситуации... – прокомментировал учитель.\n]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[– Да ну... – нахмурилась Десс.\n]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[– Я бы использовал другую стратегию, – донёсся в наушнике перевод фразы TL-3.\n]=])\n\n\nelse end\n\n\nreturn text ..\n[=[  Экран моргнул несколько раз, затем на нём возникли новые слова.\n   \"Ты отказался от награды, отчего воин расхохотался и отпустил тебя на все четыре стороны. Ты глуп и не ценишь своих сил, а посему остаться без них заслужил...\"\n   ]=]\nend",
        "merge": true
      },
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n-- прописать условие бонусных наручей\narmlets = armlets or 0\nlocal a = (armlets == 1 and \"Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке.\" or \"Внезапно Орнас ощутил болезненный укол в зажатую руку, за которым последовало лёгкое онемение и слабость во всём теле.\") .. \"<s>\n   <s><s>\"... Но ты остался жив и можешь пройти дальше. Или попробуешь решить загадку ещё раз?<s><s>\"\"\nreturn a\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 511,
        "text": "штраф к скорости",
        "calculate": true,
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.stamina = 1\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше"
      },
      {
        "id": 513,
        "text": "Начать заново"
      },
      {
        "id": 489,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[ \n– Не понимаю... Не понимаю... – негромко повторял магистр Льерсо, терябя бородку. – Не просто пропускает дальше, а даёт выбор... Это ошибка или верное решение?]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ \n– Мы точно приближаемся к разгадке? – раздражённо бросила Десвиар. – Почему она спрашивает?]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[ \n– Эти данные не вписываются в рамки модели, – тарахтел дроид. – Очевидно неверное решение формально принято допустимым. Мы что-то упускаем...]=])\nelse end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 492,
    "text": "   Орнас с сомнением ткнул пальцем строку \"Просить половину сокровищ\", на что экран отреагировал новым фрагментом текста.\n   \"Ты объясняешь воину, что без твоей помощи в бою он бы мог просто погибнуть, и потому требуешь половину от всех сокровищ, на что тот лишь рассмеялся тебе в лицо",
    "answers": [
      {
        "id": 491,
        "text": "Добавление эффектов статуса в зависимости от итогов решения",
        "calculate": true,
        "super_calculate": false
      },
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.stamina = 1\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.stamina = 1\n\n-- прописать условие бонусных наручей\narmlets = armlets or 0\nlocal a = \"\"\nlocal b = \"\"\nlocal c = \"\"\nlocal d = \"\"\nlocal a2 = \"\"\n\nif s == 4 then\n  a = \"\"\na2 = \"\"\n  c = armlets == 1 and \"\" or \", но сразу же почувствовал, как из мышц уходит напряжение и накатывает волна лёгкости.\"\nd   = \"<s>\n   <s><s>\"... Ты бы погиб в очередной раз, но это уже не имеет значения. В тебе есть кое-что поистине важное: ты упорен и готов идти до конца. Это я и хотел узнать. Теперь ты можешь пройти дальше.\"\nelse\n  a = \", после чего сразил тебя единственным ударом\"\na2 = \"<s>\n   <s><s>\"Ты жаден и недальновиден. Смотри, чтобы тебе хватило сил унести всё то, чего жаждут твои глаза. На сей раз ты погиб, а посему должен попытаться решить загадку ещё раз<s><s>\".\"\n  c = armlets == 1 and \"\" or \", за которым последовало лёгкое онемение и слабость во всём теле.\"\nd = \"\"\nend\n\nb = armlets == 1 and \"...<s><s>\"<s>\n   Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке\" or \"...<s><s>\"<s>\n   Внезапно Орнас ощутил болезненный укол в зажатую руку\"\n\nreturn a  .. b .. c .. a2 .. d\nend",
        "merge": true
      },
      {
        "id": 513,
        "text": "Начать заново",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.success = penalties.success or 0\nreturn penalties.success == 0\n\nend",
        "lua_do": "function lua_do()\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.stamina = 1\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.success = penalties.success or 0\nreturn penalties.success == 1\n\nend",
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.closeFight = 0\npenalties.speed = 0\npenalties.stamina =0\npenalties.reaction = 0\nend"
      }
    ]
  },
  {
    "id": 493,
    "text": "   Тиски удерживающего механизма наконец отпустили слегка онемевшую конечность, и Орнас спешно потянул злосчастный рычаг. Створки двери бесшумно расползлись, ослепительно яркий белый свет залил полумрак площадки.\n",
    "answers": [
      {
        "id": 493,
        "text": "Динамическое описание локации, состояние юноши с учётом всех штрафов и реакций компаньонов\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"   Без лишних промедлений юноша прошёл внутрь. Дверь моментально закрылась за его спиной.\") or\n(UpLine == 2 and \"   Десс без лишних церемоний подтолкнула юношу в спину и они прошли внутрь. Дверь за ними моментально закрылась.\") or\n(UpLine == 3 and \"   Учитель едва ощутимо похлопал юношу по плечу, и они оба прошли внутрь. Дверь за ними моментально закрылась.<s>\n– Да уж, выглядишь потрёпанным, – мельком оглядев юношу, произнёс наставник.\") or\n(UpLine == 4 and [=[   TL-3 плавно вкатился внутрь, и джедай последовал за ним. Дверь моментально закрылась позади.\n– Видишь, как я и предсказывал... – вновь заговорил дроид, но юноша лишь зажмурился, стараясь не вникать в суть его многословных измышлений.]=]) or\n(UpLine == 5 and \"   Все трое прошли внутрь, и дверь моментально закрылась за ними.\") or\n(UpLine == 6 and [=[   TL-3 плавно вкатился внутрь, и два джедая последовали за ним. Дверь моментально закрылась за спиной юноши.\n– Очень интересная загадка, – заговорил учитель. – Как себя чувствуешь?]=]) or\n(UpLine == 7 and [=[   TL-3 шустро вкатился внутрь, юноша с Десвиар последовали за ним. Дверь моментально закрылась позади.\n– Ты как? – неожиданно вкрадчиво спросила Десс, пока дроид крутился где-то впереди.]=]) or\n(UpLine == 8 and [=[   Спутники гурьбой завалились внутрь.]=]) or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 493,
        "text": "Оценка состояния Орнаса с учётом штрафов от загадки",
        "lua_text": "function lua_text()\n-- переписать \nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\n\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\n--15\nif bracer == 1 then\npenalties.closeFight = 0\npenalties.stamina = 0\npenalties.speed = 0\npenalties.reaction = 0\nend\n\n--23\nlocal text =  \"<s>\n   Орнас прислушался к ощущениям собственного тела. \"..\n((#penalties.bonus == 4 and bracer ~= 1 and \"Никаких последствий от уколов после загадки пока не было, и, как надеялся юноша, уже не будет.\") or (#penalties.bonus ~= 4 and bracer ~= 1 and \"Кажется, уколы после загадки не прошли бесследно: \"or \"\"))\n--26\nlocal s = penalties.closeFight <plus>penalties.stamina <plus> penalties.speed <plus> penalties.reaction\n--28\nif s == 1 then\n  text = text .. (\n    (penalties.closeFight == 1 and \"руки джедая безвольно свисали вдоль тела, поражённые неестественной слабостью.\") or\n    (penalties.stamina == 1 and \"всё тело джедая было скованно неестественной усталостью.\") or\n    (penalties.speed == 1 and \"ноги джедая еле двигались, будто скованные невидимыми цепями.\") or\n    (penalties.reaction == 1 and \"внимание джедая было рассеянно и никак не удавалось сконцентрироваться на чём-то одном.\") or \"\")\nelseif s == 4 then --35\n  text = text .. \"руки и ноги джедая были скованы неестественной слабостью, всё тело ломило от усталости, а сознание уплывало, не в состоянии сосредоточиться на чём-то одном.\"\nelseif s == 2 then --37\n  text = text .. (\n  (penalties.closeFight == 1 and \"руки джедая безвольно свисали вдоль тела, поражённые неестественной слабостью\") or\n(penalties.stamina == 1 and \"всё тело джедая сковала неестественная усталость\") or\n(penalties.speed == 1 and \"ноги джедая еле двигались, будто оплетённые невидимыми цепями\") or \"\" --41\n  ) .. \", а \" .. (\n (penalties.reaction == 1 and \"внимание было рассеянно, и никак не удавалось сконцентрироваться на чём-то одном.\") or\n  (penalties.speed == 1 and \"ноги еле двигались, будто были оплетены невидимыми цепями.\") or\n(penalties.stamina == 1 and \"всё тело джедая было скованно неестественной усталостью.\") or \"\"\n)\nelseif s == 3 then\n  text = text .. (\n   (penalties.closeFight == 0 and \"ноги джедая были скованы неестественной слабостью, всё тело ломило от усталости, а сознание уплывало, не в состоянии сосредоточиться на чём-то одном.\") or\n   (penalties.stamina == 0 and \"руки и ноги джедая были скованы неестественной слабостью, а сознание уплывало, не в состоянии сосредоточиться на чём-то одном.\") or\n   (penalties.speed == 0 and \"руки джедая были скованы неестественной слабостью, всё тело ломило от усталости, а сознание уплывало, не в состоянии сосредоточиться на чём-то одном.\") or\n   (penalties.reaction == 0 and \"руки и ноги джедая были скованы неестественной слабостью, а всё тело ломило от усталости.\") or \"\"\n  )\nend\n\ntext = text .. \" \"\n\ntext = (location1.bitenArms > 0 or location1.bitenLegs > 0) and (text .. \"Хотя юноша и справился с действием змеиного яда, места укусов всё ещё ощутимо болели. \") or text\ntext = (ornasStat.bloodedLeg == 1 and (text .. \"Рана на бедре, полученная в бою с чешуйчатыми созданиями, напоминала о себе при каждом шаге, хотя и не была очень серьёзной. \")) or text\ntext = ornasStat.firedArm == 1 and ( text .. \"Плечо, обожженное бластерным выстрелом, доставляло джедаю некоторый дискомфорт, напоминая о себе при движениях. \") or text\ntext = ornasStat.darkside < 0 and (text .. \"Джедай чувствовал удивительное спокойствие и это придавало ему уверенности. \") or text\nreturn text\nend",
        "merge": true
      },
      {
        "id": 493,
        "text": "Оценка состояния Орнаса с учётом штрафов от загадки",
        "lua_text": "function lua_text()\n-- переписать \nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\n\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\n--15\nif bracer == 1 then\npenalties.closeFight = 0\npenalties.stamina = 0\npenalties.speed = 0\npenalties.reaction = 0\nend\n\n\n-- перевод старых штрафов в общую систему\nif location1.bitenArms ~= 0 or \nlocation1.bitenLegs ~= 0 then\n  penalties.reaction = 1\n  penalties.stamina = 1\nelseif ornasStat.bloodedLeg ~= 0 then\n  penalties.speed = 1\n  penalties.legStrenght = 1\nelseif ornasStat.firedArm ~= 0 then\n  penalties.closeFight = 1\n  penalties.accuracy = 1\nend\n\nlocal text =  \"<s>\n   Орнас прислушался к ощущениям собственного тела. \"\n\nif penalties.closeFight == 0 and penalties.accuracy == 0 then\nelseif penalties.closeFight == 1 and penalties.accuracy == 1 then\n  text = text .. \"Руки джедая пронимала мелкая дрожь, а мышцы заметно ослабели. \"\nelseif penalties.closeFight == 1 then\n  text = text .. \"Мышцы на руках джедая заметно ослабели. \"\nelseif penalties.accuracy == 1 then\ntext = text .. \"Руки джедая пронимала мелкая дрожь. \"\nend\n\nif penalties.speed == 0 and penalties.legStrenght == 0 then\nelseif penalties.speed == 1 and penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь не только ощутимо замедлился, но вообще с трудом поднимает их. \"\nelseif penalties.speed == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь ощутимо замедлился. \"\nelseif penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша с трудом поднимает их, хотя это и не сказывалось на скорости. \"\nend\n\nif penalties.reaction == 0 and penalties.stamina == 0 then\nelseif penalties.reaction == 1 and penalties.stamina == 1 then\n  text = text .. \"Затуманенное сознание с трудом воспринимало неестественную усталость тела. \"\nelseif penalties.reaction == 1 then\n  text = text .. \"Затуманенное сознание не позволяло подолгу удерживать внимание на чём-то одном. \"\nelseif penalties.stamina == 1 then\n  text = text .. \"Всё тело сковывала неестественная усталость. \"\nend\n\n\n--на всякий случай\npenalties.closeFight = penalties.closeFight or 0\npenalties.legStrenght = penalties.legStrenght or 0 penalties.stamina =penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\npenalties.speed = penalties.speed or 0\npenalties.accuracy = penalties.accuracy or 0\n\n\n\nif penalties.closeFight == 0 and\npenalties.legStrenght == 0 and penalties.stamina == 0 and \npenalties.reaction == 0 and\npenalties.speed == 0 and\npenalties.accuracy == 0 then\n  text = text .. \"Казалось, что за всё это время юноша даже не устал и находился в оптимальной форме.\"\nelse\n  text = text .. \"Орнас задумался, как могли сложиться события, чтобы он оказался здесь в оптимальной форме, но быстро устал, запутавшись в бесконечных <s><s>\"если<s><s>\".\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 480,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn UpLine ~= 5 and UpLine ~= 6 and UpLine ~= 7 and UpLine ~= 8\nend"
      },
      {
        "id": 729,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn UpLine == 5\nend"
      },
      {
        "id": 650,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend"
      },
      {
        "id": 696,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn UpLine == 7\nend"
      },
      {
        "id": 762,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\n-- учитель\nreturn UpLine == 8 and UpLineHelpDoor == 1\nend"
      },
      {
        "id": 763,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\n--Десс\nreturn UpLine == 8 and UpLineHelpDoor == 2\nend"
      },
      {
        "id": 764,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\n-- TL-3\nreturn UpLine == 8 and UpLineHelpDoor == 3\nend"
      },
      {
        "id": 493,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn helmet == 1 and \"<s>\n   Только теперь юноша осознал, что забыл подобрать старый шлем перед тем, как зайти сюда. Оставалось лишь надеяться, что он больше нигде не пригодится.\" or \"\"\nend",
        "merge": true
      },
      {
        "comment": true,
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.success = penalties.success or 0\nmaster = master or {}\nmaster.confidence = master.confidence or 5\n\nif penalties.success == 1 then\nmaster.confidence = master.confidence <plus> 1\nend\nend",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "super_calculate": false,
        "id": 493,
        "text": "Бонус к уверенности учителя за успех с загадкой",
        "calculate": true,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 493,
        "text": "\n\n\n",
        "comment": true,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\npenalties.closeFight = penalties.closeFight == 1 and 0 or 1\nend",
        "text": "• Штраф: ближний бой",
        "id": 493,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\npenalties.accuracy = penalties.accuracy == 1 and 0 or 1\nend",
        "text": "• Штраф: точность",
        "id": 493,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.bitenArms = 0\nlocation1.bitenLegs = 0\npenalties.stamina = penalties.stamina == 1 and 0 or 1\nend",
        "text": "• Штраф: выносливость",
        "id": 493,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 493,
        "text": "• Штраф: скорость",
        "lua_do": "function lua_do()\npenalties.speed = penalties.speed == 1 and 0 or 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\npenalties.legStrenght = penalties.legStrenght == 1 and 0 or 1\nend",
        "text": "• Штраф: сила ног",
        "id": 493,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.bitenArms = 0\nlocation1.bitenLegs = 0\npenalties.reaction = penalties.reaction == 1 and 0 or 1\nend",
        "text": "• Штраф: реакция",
        "id": 493,
        "merge": false
      },
      {
        "id": 493,
        "text": "Текст в конце",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif UpLine == 4 then\ntext = \"<s>\n– ... и этим оценить гибкость мышления при неполноте данных и большой статистической погрешности каждого отдельного ответа, – закончил какое-то длинное объяснение TL-3.\"\nelseif UpLine == 5 then\n  text = \"<s>\n– Я в порядке, если кому-то интересно, – вздохнул юноша, но спутники уже переключили своё внимание на пространство вокруг.\"\nelseif UpLine == 6 then\n  text = \"<s>\n– Всё в порядке, – неуверенно ответил юноша, но наставник уже переключил своё внимание на пространство вокруг.\"\nelseif UpLine == 7 then\n  text = \"<s>\n– Нормально, – наконец ответил он.<s>\n   Десс кивнула и отошла в сторону.\"\nelse end\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\npenalties = penalties or {} penalties.success = penalties.success or 0\n\nif penalties.success == 1 then\n   newAchieve(\"discoverer\",1,1)\nend\n\nend",
        "calculate": true,
        "text": "Выдать достижение",
        "id": 598
      }
    ]
  },
  {
    "id": 494,
    "text": "   Джедай коснулся слов \"Помочь добить чудовище\" и текст на экране привычно сменился, открывая продолжение загадки.\n   \"Внезапно ввязавшись в сражение, ты отвлёк внимание зверя на себя, и в то же мгновение воин нанёс решающий удар. Переведя дух, он наконец приближается к тебе, а ты пытаешься подобрать слова для обсуждения своей доли добытых сокровищ\".",
    "answers": [
      {
        "id": 491,
        "text": "«Отказаться от сокровищ»"
      },
      {
        "id": 518,
        "text": "«Просить четверть сокровищ»"
      },
      {
        "id": 492,
        "text": "«Просить половину сокровищ»"
      }
    ]
  },
  {
    "id": 495,
    "text": "   Орнас после короткого раздумья выбрал вариант \"Напасть на воина\" и с опаской уставился в возникшее на экране описание.\n   \"Воспользовавшись моментом, ты вероломно набросился на воина. Отвлечённый твоей дерзостью, он уже через мгновение пал под взмахом могучих когтей чудовища, которое теперь переключилось на тебя. К несчастью, твоих сил для поединка оказалось недостаточно и клыки монстра вонзились в твою шею.",
    "answers": [
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.closeFight = 1\nlocal s = TabLen(penalties.bonus)\npenalties.closeFight = 1\n\n-- прописать условие бонусных наручей\narmlets = armlets or 0\n\nlocal b = \"\"\nlocal c = \"\"\nlocal d = \"\"\nlocal a = \"\"\n\nif s == 4 then\n\na = \"\"\n  c = armlets == 1 and \"\" or \", но сразу же почувствовал, как из мышц уходит напряжение и накатывает волна лёгкости.\"\nd   = \"<s>\n   <s><s>\"... Ты бы погиб в очередной раз, но это уже не имеет значения. В тебе есть кое-что поистине важное: ты упорен и готов идти до конца. Это я и хотел узнать. Теперь ты можешь пройти дальше.\"\nelse\n \na = \"<s>\n   <s><s>\"... Ты самонадеян. Участь твоя – лишиться той силы, на которую уповаешь в корысти своей... На сей раз ты погиб, а посему должен попытаться решить загадку ещё раз<s><s>\".\"\n  c = armlets == 1 and \"\" or \", за которым последовало лёгкое онемение и слабость от кисти до плеча.\"\nd = \"\"\nend\n\nb = armlets == 1 and \"...<s><s>\"<s>\n   Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке\" or \"...<s><s>\"<s>\n   Внезапно Орнас ощутил болезненный укол в зажатую руку\"\n\nreturn b .. c .. a .. d\nend",
        "merge": true
      },
      {
        "id": 513,
        "text": "Начать заново",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.speed = penalties.speed or 0\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\n\npenalties.bonus = penalties.bonus or {}\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.success = s == 4 and 1 or 0\n\n\nreturn s ~=4\nend",
        "lua_do": "function lua_do()\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.stamina = 1\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.speed = penalties.speed or 0\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\n\npenalties.bonus = penalties.bonus or {}\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.success = s == 4 and 1 or 0\n\nreturn s ==4\nend",
        "lua_do": "function lua_do()\npenalties.success = 1\npenalties = penalties or {}\npenalties.closeFight = 0\npenalties.speed = 0\npenalties.stamina =0\npenalties.reaction = 0\nend"
      }
    ]
  },
  {
    "id": 496,
    "text": "empty",
    "answers": [
      {
        "id": 496,
        "text": "Вариативное описание реакции компаньонов",
        "lua_text": "function lua_text()\nmaster = master or {}\nmaster.confidence = master.confidence or 0\nmaster.visits520 = master.visits520 or 0\nmaster.visits520 = master.visits520 <plus> 1\n\nmaster.confidence = master.visits520 == 2 and master.confidence <plus> 1 or master.confidence\n\nTL3 = TL3 or {}\nTL3.textCount = (TL3.textCount or 0) <plus> 1\n\nlocal text = \"\"\ntext =\n(UpLine == 1 and [=[   Орнас пошёл вперёд по широкому коридору. За первым поворотом направо располагался ещё один длинный и совершенно пустой пролёт, который оканчивался ещё одним поворотом. За третьим поворотом коридор наконец-то упирался в аккуратную дверь.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=]) or\n(UpLine == 2 and \n[=[– Пойдём, – позвал Орнас свою спутницу, и они вместе зашагали вперёд по широкому коридору.\n   Десс шла немного сзади, то и дело налетая на юношу, который то замедлялся, то совсем останавливался, чтобы проверить очередной подозрительный участок.\n  За первым поворотом направо располагался ещё один длинный и совершенно пустой пролёт, который оканчивался ещё одним поворотом. За третьим поворотом коридор наконец-то упирался в аккуратную дверь.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=]\n) or\n(UpLine == 3 and ((\nmaster.visits520 == 1 and [=[– Нужно осмотреть коридор, – произнёс юноша, и они вместе с учителем зашагали вперёд.\n   Орнас шёл медленно, то и дело останавливаясь, чтобы проверить очередной подозрительный участок. Его наставник ничего не говорил, а лишь терпеливо ждал окончания вынужденных остановок и добродушно улыбался. Наконец, когда они преодолели два абсолютно пустых пролёта, за очередным поворотом коридор закончился небольшой дверью.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=]) or (master.visits520 == 2 and\n[=[– Я хочу ещё раз пройти по коридору, – произнёс юноша, и они вместе с учителем зашагали вперёд.\n– Думаю, таких ловушек, как на первом этаже, здесь не будет, – неожиданно заговорил магистр Льерсо. – Видимо считается, что случайные люди сюда уже не попадут.\n– Это может быть попыткой усыпить бдительность незванных гостей, – возразил Орнас. – Уверен, нас ждёт ещё много неприятных сюрпризов.\n– Может быть, может быть...\n   Они быстро добрались до двери, и её створки приглашающе расползлись в стороны.]=] ) or \n\n[=[– Что, опять туда? – удивился наставник, когда Орнас только начал разворачиваться в сторону коридора.\n   Юноша ничего не ответил, и они молча преодолели весь путь к двери, створки которой приглашающе расползлись в стороны при их появлении.]=]\n\n)) or\n(UpLine == 4 and TL3Text(TL3.textCount)) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\n sapperFail = sapperFail or 0\n\nreturn text .. (sapperFail == 1 and \"<s>\n   После неудачи Орнаса в зале не было смысла вновь идти внутрь.\" or \"\")\nend",
        "merge": true
      },
      {
        "id": 520,
        "text": "Войти в зал",
        "lua_if": "function lua_if()\n-- сделать вторую кнопку для тех, кто вышел без фейла, сразу на страницу с графикой\nsapperFail = sapperFail or 0\nreturn sapperFail == 0 and not sapper\nend"
      },
      {
        "id": 478,
        "text": "Войти в зал",
        "lua_if": "function lua_if()\n-- сделать вторую кнопку для тех, кто вышел без фейла, сразу на страницу с графикой\nsapperFail = sapperFail or 0\nreturn sapperFail == 0 and sapper\nend"
      },
      {
        "id": 498,
        "text": "Вернуться назад"
      },
      {
        "id": 496,
        "text": "   \n\n\n\n",
        "comment": true
      },
      {
        "comment": false,
        "id": 496,
        "text": "Сброс посещений с учителем",
        "lua_do": "function lua_do()\nmaster.visits520 = 0\nend",
        "lua_if": "function lua_if()\nreturn false\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nfunction droidText(a)\nlocal t = {}\nt[1] = \n[=[ \n– Ты наверное прослушал те записи из дневника Феникса, когда надевал шлем? – спросил дроид. – И тебя ничего не насторожило?\n– Насторожило?..\n– Ну, не показалось странным, что охотник за наживой ведёт дневник, как какая-нибудь глупышка-принцесса с Альдераана?\n]=]\n\nt[2] = [=[ \n– То есть дневник – фальшивка? – решил продолжить разговор джедай. – Но зачем?\n– Чтобы какой-нибудь наивный мальчишка был уверен в гибели капитана звездолёта и не пытался раскрутить историю за эту ниточку. Ну или ради шутки. У Феникса было отвратительное чувство юмора, знаешь ли.\n]=]\nt[3] = [=[ \n– А ты не боишься, – наконец смог сформулировать свои мысли Орнас, – что я всё-таки докопаюсь до настоящей истории твоего хозяина?\n– Боюсь? Я на это рассчитываю.\n– Но почему тогда...\n– Ты сам помог мне разорвать связь с ним, – перебил TL-3. – Я теперь ничего ему не должен. И не обязан помогать скрывать его грязные делишки.\n– А зачем... – вновь попытался спросить джедай.\n– Мне просто интересно, – опять перебил дроид, – ради чего это было затеяно. Что такого он получил, бросив всё, что имел?\n]=]\nt[4] = [=[ \n– Ты не подумай, – продолжил прерванный диалог TL-3, – Феникс не был ужасным человеком. Хоть и добряком не был, при такой-то работе. Но он был хорошим лидером, команда была для него эффективным инструментом, и он ценил каждого. А тут...\n– Это место меняет людей, – заметил Орнас. – Будоражит эмоции и пробуждает всё самое худшее. Уверен, он бы не поступил так с вами в любой другой ситуации.\n– Этого уже не проверить... – ответил дроид и ненадолго умолк. – Но я видел достаточно, чтобы согласиться. Я не могу испытывать обиду или жажду мести, но всё равно интересно узнать, что с ним случилось. Ненавижу неинформированность...\n]=]\nt[5] = [=[ \n– А что ты планируешь делать, когда это всё закончится? – попытался продолжить прерванный разговор юноша.\n– Зависит от того, как это всё закончится.\n   TL-3, кажется, исчерпал желание откровенничать и демонстративно ускорился.\n]=]\nt[6] = [=[ \n   Юноша больше не пытался заговорить со спутником и в неловком молчании слышалось только мягкое шуршание каких-то деталей дроида.\n]=]\na = a > #t and #t or a\nreturn t[a]\nend\n\nfunction TL3Text(a)\nlocal p1 = TL3.visits == 1 and\n[=[– Пойдём, – позвал Орнас своего спутника, и они вместе направилась вперёд по широкому коридору.\n   TL-3 ехал сбоку от джедая, ничуть не заботясь о возможных опасностях. Он даже не замедлял ход, когда юноша останавливался, чтобы проверить очередной подозрительный участок.]=] or\n[=[  Спутники вновь направились по коридору. На этот раз и сам Орнас позабыл о всякой бдительности и просто шагал рядом с бодро катящимся вперёд астромехаником.]=]\nlocal p2 = TL3.visits == 1 and\n[=[   За очередным поворотом коридор наконец-то упирался в аккуратную дверь.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=] or\n[=[   Они добрались до конца коридора и створки двери открылись, словно приглашая спутников в небольшой тёмный зал.]=]\n\nreturn p1 .. droidText(a) .. p2\nend\n\nend",
        "text": "Тексты для дроида",
        "id": 496,
        "calculate": true
      },
      {
        "comment": false,
        "id": 496,
        "text": "Рестарт разговоров с дроидом",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.textCount = nil\nTL3.dialogParts = nil \nTL3.visits = nil\nend"
      }
    ]
  },
  {
    "id": 497,
    "text": "   Орнас на четвереньках пробрался в шахту, напрягая отвыкшие от темноты глаза. ",
    "answers": [
      {
        "id": 497,
        "text": "Несоответствие: если Орнас не согласился сразу на осмотр дроидом, то тот всё равно предлагает заняться утечкой.\n\n--> сделать кнопку \"дальше\" для первой попытки Орнаса залезть внутрь, страница будет описывать предложение дроида и по ответу с отказом откроется страница с описанием утечки и рассказом о ней дроиду. В условиях для текста с предложением прописать эту страницу, вместо 497",
        "lua_if": "function lua_if()\nreturn false\nend",
        "comment": true
      },
      {
        "id": 497,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal p = isHistoryContain\npoisonGasIsOn = poisonGasIsOn or 1\nlocal text =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \n[=[ \n– Ну как, видно что-нибудь? – тут же раздался голос нетерпеливой Десс.\n– Подожди, не так сразу...\n]=]) or\n(UpLine == 3 and ((poisonGasIsOn == 1 and [=[ \n– Наверное тебе стоит вернуться, – неожиданно сказал наставник. – Я чувствую опасность.\n– Сейчас, я хочу осмотреться...\n]=]) or [=[ \n– Теперь всё в порядке? – не то спросил, не то констатировал учитель.\n   Юноша не ответил и продвинулся ещё немного вперёд.\n]=]) ) or\n(UpLine == 4 and (p(624) and\n[=[ \n   Астромеханик издал серию гудков и писков, однако переводчик в ухе юноши никак на это не отреагировал.\n]=]\n or [=[ \n– Ты мог не знать, но астромеханики идеально подходят для выполнения задач, связанных с обслуживанием инженерных систем и коммуникаций, – раздался из наушника перевод фразы TL-3. – С твоей стороны было бы логично доверить обследование этого участка мне.\n]=]) ) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 497,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npoisonGasIsOn = poisonGasIsOn or 1\nreturn poisonGasIsOn == 1 and \"   Еле уловимое движение воздуха заставило джедая остановиться. Тщательно изучив пространство перед собой, он заметил небольшое белое облачко.<s>\n   Среди множества мелких металлических трубочек, тянущихся вдоль всей стенки, одна была разорвана и из неё тонкой струйкой вырывался наружу какой-то газ. Белёсый туман, образующийся у самого места разрыва, затем рассеивался, и невидимый газ должно быть уже заполнил всю систему вентиляции.\" or \"   Он с опаской всматривался в то место, где раньше клубилось облачко неизвестного газа, но теперь следов утечки не было заметно.\"\nend",
        "merge": true
      },
      {
        "id": 611,
        "text": "Вернуться назад",
        "lua_if": "function lua_if()\n--(недоступно после фейла в саперном)\nreturn true\nend"
      },
      {
        "id": 499,
        "text": "Пройти вперёд",
        "lua_do": "function lua_do()\nmaster= master or {}\nmaster.confidence = master.confidence or 5\n\n\nif poisonGasIsOn == 1 then\npenalties.reaction = 1\npenalties.stamina = 1\nmaster.confidence = master.confidence <plus> 1\nend\nend"
      },
      {
        "id": 623,
        "text": "Оценить состояние других труб",
        "lua_if": "function lua_if()\nreturn style == 4\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ]
      },
      {
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend",
        "id": 624,
        "text": "Согласиться с предложением TL-3",
        "need": -624,
        "lua_do": "function lua_do()\nTL3usefull = (TL3usefull or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 498,
    "text": "   ",
    "answers": [
      {
        "id": 498,
        "text": "Вариативное описание: вернулся из сапера или из вентиляции.\nЕсли состав группы позволяет, то напоминание о возможности обойти вентиляцию\nВариативная реакция одного из компаньонов (три разных реплики для каждого, не повторяются, случайный выбор из возможных, когда все отсмотрены - укоризненный взгляд по количеству участников, достижение - укоризненный взгляд)",
        "lua_text": "function lua_text()\nlocal p = g.previous_id\nlocal text =\n(g.previous_id == 497 and \"Орнас выбрался из системы вентиляции и отряхнул колени. В раздумьях он подошёл к запертой двери, ведущей к площадке перед лестницей. \") or (g.previous_id == 519 and \"Орнас размял затёкшие мышцы и встал. \") or ((g.previous_id == 496 or g.previous_id == 503) and \"Орнас быстро вернулся по коридору назад к запертой двери, ведущей к площадке перед лестницей. \") or (p == 578 and \"Орнас ещё раз заглянул в шахту вентиляции и в задумчивости вновь отошёл к двери. \") or (UpLine == 6 and \"\") or \"Орнас быстро покинул неуютный зал и сам не заметил, как вернулся по коридору к запертой двери, ведущей к площадке перед лестницей. \"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\npanelDetected480 = panelDetected480 or 0\ntext = panelDetected480 == 0 and \"В тупике справа от двери всё так же бросалась в глаза панель со вмятиной и тёмными стыками. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.\" or \"Ярко освещённый коридор уходил налево, а в тупике справа, возле приставленных к стене решётки и помятой панели обшивки, зияла тёмная шахта вентиляции.\"\nreturn text\nend",
        "id": 480,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn UpLine ~= 6\nend",
        "merge": true
      },
      {
        "id": 493,
        "text": "Реакции компаньонов на возвращение,\nПовтор предложений разобраться с вентиляцией\n\n",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nTL3 = TL3 or {}\nTL3.visits = TL3.visits or 0\nTL3.dialogParts = TL3.dialogParts or 0\n\nlocal DessText = ({\"<s>\n– Ну и куда ты? – скорее удивлённо, чем сердито, спросила подошедшая поближе Десвиар.\",\n\"<s>\n– Ты бы хоть объяснил, что собираешься делать, – буркнула Десвиар, когда подошла к джедаю поближе.\",\n\"<s>\n   Десвиар подошла поближе к джедаю и адресовала ему укоризненный взгляд.\"\n})[math.random(3)]\n\n\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and DessText) or\n(UpLine == 3 and ((g.previous_id == 519 and \"<s>\n   Наставник вновь расположился у одной из стен и адресовал юноше вопросительный взгляд.\" or \"<s>\n   Наставник, следовавший не отставая ни на шаг, расположился у стены и адресовал юноше вопросительный взгляд.\")  .. (isHistoryContain(622) and poisonGasIsOn == 1 and \"<s>\n– Ну что, теперь можно заняться газом? – спросил он юношу, когда их взгляды встретились. – Доверишь мне или ещё подумаешь?<s>\n   Орнас поджал губы, так и не решив до конца, нравится ли ему такой вариант.\" or \"\"))) or\n\n(UpLine == 4 and (TL3.dialogParts > 5 and [=[ \n– К чему такая непоследовательность? – буркнул катящийся за джедаем TL-3.]=] or droidText(TL3.visits)))\n\nor\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal p = isHistoryContain\ntext =\n\n(UpLine == 4 and p(625) and \"<s>\n   После небольшой паузы дроид подъехал к шахте вентиляции.<s>\n– Может я пока займусь утечкой газа? – спросил он.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"\"\nreturn text\nend\n",
        "id": 493,
        "text": "Предложение разобраться с утечкой",
        "lua_if": "function lua_if()\npoisonGasIsOn = poisonGasIsOn or 1\nreturn poisonGasIsOn == 1\nend",
        "merge": true
      },
      {
        "comment": false,
        "id": 592,
        "text": "Варианты действий",
        "run": [
          592
        ],
        "lua_if": "function lua_if()\nreturn UpLine ~= 6\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend",
        "super_calculate": false,
        "id": 498,
        "calculate": true,
        "lua_do": "function lua_do()\nshowPage {id = 671, transition = \"instant\"}\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 499,
    "text": "   Орнас медленно двинулся вперёд. ",
    "answers": [
      {
        "id": 499,
        "text": "Динамическая реакция компаньонов (по одной на каждый возможный состав группы)",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and (poisonGasIsOn == 1 and \"После первого поворота налево в самом начале лаз довольно долго шёл прямо без единой развилки. Юноша несколько раз закашлялся и с досадой вспомнил про утекающий через повреждённую трубу неизвестный газ. Насколько он может быть ядовит? И сколько токсина уже попало в лёгкие? Джедай попытался оценить своё состояние, но не смог сосредоточиться. Единственное, что теперь оставалось – просто двигаться вперёд и скорее выбраться наружу.<s>\n   После второго поворота налево ход внезапно закончился. Выбив решётку толчком Силы, Орнас поспешно вылез и заозирался по сторонам.\" or \"После первого поворота налево в самом начале лаз довольно долго шёл прямо без единой развилки. По крайней мере, не нужно тревожиться из-за того странного неизвестного газа, сквозящего ранее из повреждённой трубы.<s>\n   После второго поворота налево ход внезапно закончился. Осторожно расшатав решётку, Орнас подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся.\")) or\n(UpLine == 2 and (poisonGasIsOn == 1 and \n\n[=[ \n– Дай знать, когда будет безопасно, – крикнула в спину джедая Десс, но он ничего не ответил.\n   После первого поворота налево в самом начале лаз довольно долго шёл прямо без единой развилки. Юноша несколько раз закашлялся с досадой думая про утекающий через повреждённую трубу неизвестный газ. Насколько он может быть ядовит? И сколько токсина уже попало в лёгкие? Джедай попытался оценить своё состояние, но не смог сосредоточиться. Единственное, что теперь оставалось – просто двигаться вперёд и скорее выбраться наружу.\n   После второго поворота налево ход внезапно закончился. У самой решётки располагалась панель с множеством переключателей. Не в силах искать и разбираться, джедай просто выключил всё, что можно было выключить. Он обернулся назад и крикнул Десс, что можно идти, после чего выбил решётку толчком Силы, поспешно вылез и заозирался по сторонам.]=]\n\n or\n\n[=[ \n– Всё в порядке? – без особого волнения уточнила Десс, ползшая прямо за юношей. – Хорошо всё-таки, что я не пошла перед тобой. С моим нарядом было бы опрометчиво смущать рыцаря святого Ордена голыми лодыжками...\n   Юноша не ответил и молча продолжил путь. По крайней мере, не нужно тревожиться из-за того странного неизвестного газа, сквозящего ранее из повреждённой трубы.\n   После нескольких поворотов ход внезапно закончился. Осторожно расшатав решётку, Орнас подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся. Десвиар бесшумно выбралась следом.]=]\n)) or\n(UpLine == 3 and ( poisonGasIsOn == 1 and [=[Учитель не последовал за ним. После первого поворота налево в самом начале лаз довольно долго шёл прямо без единой развилки. Юноша несколько раз закашлялся с досадой думая про утекающий через повреждённую трубу неизвестный газ. Насколько он может быть ядовит? И сколько токсина уже попало в лёгкие? Джедай попытался оценить своё состояние, но не смог сосредоточиться. Единственное, что теперь оставалось – просто двигаться вперёд и скорее выбраться наружу.\n   После второго поворота налево ход внезапно закончился. У самой решётки располагалась панель с множеством механических переключателей и вентилей. Не в силах искать и разбираться, джедай просто закрутил всё, что можно было закрутить. Он выбил решётку толчком Силы, поспешно вылез и заозирался по сторонам. Совсем скоро показался и бесшумно выскользнул наружу магистр Льерсо.]=]\n\n or [=[ \n– Я прямо за тобой, – раздался совсем рядом голос наставника.\n   Юноша не ответил и молча продолжил путь. По крайней мере, не нужно тревожиться из-за того странного неизвестного газа, сквозящего ранее из повреждённой трубы.\n   После нескольких поворотов ход внезапно закончился. Осторожно расшатав решётку, Орнас подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся. Магистр Льерсо бесшумно выбрался следом.]=]\n) ) or\n(UpLine == 4 and ( poisonGasIsOn == 1 and [=[Юноша несколько раз закашлялся и с досадой вспомнил про утекающий через повреждённую трубу неизвестный газ. Насколько он может быть ядовит? И сколько токсина уже попало в лёгкие?\n– Концентрация опасного вещества падает, но лучше не задерживаться, – словно в ответ на мысли джедая произнёс TL-3. – При такой массе полученная тобой доза лишь слегка дезориентирует на несколько часов, не о чем беспокоиться.\n   Уже ощущающий дрожь в руках Орнас не был столь же оптимистичен, но озвучивать свои сомнения не стал. После очередного поворота ход внезапно закончился ещё одной решёткой. Выбив её толчком Силы, Орнас поспешно вылез, вдохнул свежий воздух полной грудью и заозирался по сторонам. Следом лязгнул через невысокий порог астромех.]=] or\n[=[К удивлению и смутному беспокойству юноши TL-3 катится следом в абсолютном молчании. По крайней мере, не нужно тревожиться из-за того странного неизвестного газа, сквозящего ранее из повреждённой трубы.\n   После нескольких поворотов ход внезапно закончился ещё одной решёткой. Орнас подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся. Следом лязгнул через невысокий порог астромех.]=] )) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 499,
        "calculate": true,
        "lua_do": "function lua_do()\nantiAchivName -- Вставить нормальное имя в существующем массиве\n= poisonGasIsOn == 1 and (\nUpLine == 3 or\nUpLine == 4 or\nUpLine == 5 or\nUpLine == 6 or\nUpLine == 7 or\nUpLine == 8) and 1 or 0\n\nend",
        "text": "Добавление штрафов\nАнтидостижение, если получен штраф, а состав группы позволял его обойти"
      },
      {
        "id": 500,
        "text": "Дальше"
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "lua_do": "function lua_do()\npoisonGasIsOn = poisonGasIsOn == 1 and 0 or 1\nend",
        "text": "Включить/выключить газ",
        "comment": false,
        "id": 499
      }
    ]
  },
  {
    "id": 500,
    "text": "   Джедай находился в просторном зале, больше похожем на современную лабораторию, чем на комнату в древнем оккультном сооружении. На белые стены и блестящий идеально чистый пол было больно смотреть в ярком освещении мощных ламп. Орнас отошёл на несколько шагов от стены и заозирался по сторонам.",
    "answers": [
      {
        "id": 500,
        "text": "Продолжение описания",
        "lua_text": "function lua_text()\nreturn \"<s>\n   Визуально помещение было разбито на несколько зон. Вся ближайшая часть комнаты была заставлена стеллажами, на которых громоздились всевозможные ящики, контейнеры и сосуды. Юноша медленно двинулся вперёд, без особого интереса разглядывая непонятное содержимое некоторых прозрачных ёмкостей.<s>\n   В центре зала за небольшой конторкой суетился протокольный дроид неизвестной Орнасу модели. Казалось, он не обратил никакого внимания на столь неожиданный визит и просто продолжал ковыряться за приборной панелью.<s>\n\"\nend",
        "merge": true
      },
      {
        "id": 500,
        "text": "Реакция компаньонов",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"   Десс быстро зашагала вперёд, и Орнасу показалось, что он услышал её голос: <s><s>\"Где-то здесь, точно... Я чувствую тебя...<s><s>\". Девушка была так взвволнована, что не обращала больше внимания на юношу и не боялась, что он может услышать. \") or\n(UpLine == 3 and \"   Учитель некоторое время озирался по сторонам, затем наморщил лоб и сосредоточился. Неуловимые потоки Силы волнами расходились от него во все стороны. Затем он уверенным шагом направился в правую часть помещения.\") or\n(UpLine == 4 and \"– Нужно добраться до того терминала, – неожиданно твёрдо заявил TL-3. – Всё остальное – мусор, не будем терять время.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 523,
        "text": "Осмотреть левую часть комнаты",
        "need": [
          -523
        ],
        "lua_if": "function lua_if()\nreturn UpLine ~=2 and UpLine ~=3\nend"
      },
      {
        "id": 524,
        "text": "Осмотреть правую часть комнаты",
        "need": -524,
        "lua_if": "function lua_if()\nreturn UpLine ~=2 and UpLine ~=3\nend"
      },
      {
        "id": 525,
        "text": "Пройти в дальний конец комнаты",
        "lua_if": "function lua_if()\nUpLine = UpLine or 1\nreturn UpLine == 4\nend",
        "lua_do": "function lua_do()\nTL3usefull = (TL3usefull or 0) <plus> 1\nend"
      },
      {
        "id": 593,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- продолжение с Десс\nreturn UpLine ==2\nend"
      },
      {
        "id": 612,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- продолжение с учителем\nreturn UpLine == 3\nend"
      }
    ]
  },
  {
    "id": 501,
    "text": "– Да, конечно, – растерянно согласился джедай. – Ты же в этом специалист...\n   Дроид будто и не заметил смешанных чувств юноши. Кажется, он был слишком увлечён предстоящей задачей и не видел в этом вынужденном жесте признания в собственной беспомощности. Может, и самому Орнасу не стоило этого стыдиться?\n   TL-3 скрылся внутри шахты. Уже через несколько минут оттуда донеслись знакомые писки и щелчки, которые переводчик в ухе юноши расшифровал как короткий доклад о выполненных работах и заверение в безопасности маршрута.\n",
    "answers": [
      {
        "id": 501,
        "text": "Вариативное описание прохождения группы в зависимости от участников",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif UpLine == 4 then\ntext =\n[=[   Орнас тяжело вздохнул и направился за своим спутником. Он довольно быстро преодолел вентиляцию, не заметив ничего необычного. После нескольких поворотов ход внезапно закончился ещё одной решёткой. В тупике возле небольшой панели с множеством вентилей и переключателей терпеливо ждал астромеханик. Орнас осторожно расшатал решётку, подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся. Следом с громким лязгом перевалился через невысокий порог дроид.]=]\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 500,
        "text": "Дальше",
        "lua_do": "function lua_do()\nTL3usefull = (TL3usefull or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 502,
    "text": "   Орнас наконец сдался.\n– Попробуйте разобраться с газом, – сдавленно обратился он к наставнику. – Как Вы хотите это сделать?\n– Терпение, юный падаван, – улыбнулся тот и прикрыл глаза, сосредотачиваясь. – Всё, теперь можно идти.\n– Так быстро?\n– Я отследил нужную трубку до панели управления с помощью Силы сразу, как только ты рассказал о проблеме, – признался учитель. – А теперь просто перекрыл вентиль.\n",
    "answers": [
      {
        "id": 502,
        "text": "Вариативное описание прохода группы в зависимости от состава группы",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 3 and \"   Они друг за другом забрались в шахту и довольно быстро прошли до другого её выхода. Газ действительно больше не поступал из поврежденной трубы.<s>\n   Осторожно высадив и отодвинув в сторону решётку, Орнас выбрался наружу и заозирался по сторонам. Учитель появился следом.\") or\n\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 500,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.confidence = master.confidence or 5\nmaster.confidence = master.confidence - 1\nend"
      }
    ]
  },
  {
    "id": 503,
    "text": "   Орнас почти моментально выскочил назад в коридор. Краем глаза он заметил новую колонну на том месте, куда собирался переместиться всего секунду назад. Но важнее было то, что весь потолок в зале и правда опускался, и когда джедай, отдышавшись, вновь заглянул внутрь, пространства едва ли хватало, чтобы пролезть там согнувшись по пояс. В таких условиях о поиске и обходе ловушек не могло быть и речи.\n",
    "answers": [
      {
        "id": 503,
        "text": "Динамическое описание реакции компаньонов в зависимости от состава партии.\nЕсли состав позволяет, то напоминают о возможности обхода вентиляции.",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"   В последний раз взглянув внутрь, юноша окончательно решил, что этот путь теперь закрыт.\") or\n(UpLine == 2 and \"– Кажется, второго шанса пройти здесь у нас нет, – чересчур бодро заявила Десс. – Пойдём в обход?<s>\n– Придётся...\") or\n(UpLine == 3 and \"– Досадная оплошность, – поморщился наставник, – но главное, что ты цел.<s>\n– Придётся идти в обход, – опечалился Орнас, осознав, что этот путь теперь закрыт для них.\") or\n(UpLine == 4 and \"– Так и знал, что этим кончится, – сочувственно прокомментировал TL-3. – Большая удача, что ты успел выбраться.<s>\n– Придётся воспользоваться другим путём...\") or\n(UpLine == 5 and \"– Досадная оплошность, – поморщился наставник, – но главное, что ты цел.<s>\n– Придётся идти в обход, – опечалился Орнас, осознав, что этот путь теперь закрыт для них.<s>\n– Так и знала, что этим кончится, – печально вздохнула Десс.\") or\n(UpLine == 6 and \"– Так и знал, что этим кончится, – сочувственно прокомментировал TL-3.<s>\n– Жаль, что ты оплошал. Но по крайней мере остался цел, – неожиданно участливо подбодрил юношу наставник.\") or\n(UpLine == 7 and \"– Так и знал, что этим кончится, – сочувственно прокомментировал TL-3.<s>\n   Десс хмуро молчала: кажется, единственный оставшийся путь через вентиляцию её не прельщал.\") or\n(UpLine == 8 and \"  В поднявшемся шуме сложно было понять, кто что говорит. Орнас невольно зажмурился и закрыл уши руками.\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 498,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine ~= 5 and UpLine ~= 6 and UpLine ~= 7 and UpLine ~= 8\nend",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.confidence = master.confidence or 5\nmaster.confidence = master.confidence - 1\nend"
      },
      {
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\nend",
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend",
        "id": 671
      },
      {
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.dessRel = UpLine7.dessRel - 1\nend",
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7\nend",
        "id": 720
      },
      {
        "id": 754,
        "text": "Дальше ",
        "lua_if": "function lua_if()\nreturn UpLine == 5\nend"
      },
      {
        "id": 817,
        "text": "Дальше ",
        "lua_if": "function lua_if()\nreturn UpLine == 8\nend",
        "lua_do": "function lua_do()\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) - 1\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 1\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"rashDecision5\",-1,1)\nend",
        "text": "Выдать достижение",
        "id": 503,
        "calculate": true
      }
    ]
  },
  {
    "id": 504,
    "text": "   Орнас проскочил в открывшуюся дверь и тут же уставился под ноги, вновь ожидая увидеть какую-нибудь ловушку.",
    "answers": [
      {
        "id": 504,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 1\nUpLine7 = UpLine7 or {}\nUpLine7.conflict = UpLine7.conflict or 0\nlocal text = \"\"\ntext =\n(UpLine == 1 and \" Не обнаружив чего-либо очевидно или потенциально опасного, юноша наконец немного успокоился и осмотрел помещение, в котором оказался.\") or\n(UpLine == 2 and\n[=[ Он уже совсем расслабился и поэтому вздрогнул, когда рядом бесшумно возникла Десвиар. \"Не стоит забывать, что она тоже джедай, а не принцесса в беде\", – подумал юноша. И причины следовать за ним у неё тоже могли быть самыми разными.\n   Встревоженный этими мыслями, Орнас поспешил осмотреть помещение, в котором они с Десс оказались.]=]\n) or\n(UpLine == 3 and \" Учитель пересёк зал почти напрямую, не повторяя блужданий юноши, и присоединился к замершему джедаю.<s>\n– Ты блестяще справился, Орнас, – сказал он. – Я уже начинаю сомневаться, стоило ли мне сопровождать тебя здесь. А теперь давай поглядим, где же мы оказались.\") or\n(UpLine == 4 and \" Астромеханик вскоре оказался рядом, видимо он всё же сумел преодолеть свой страх.\" .. (TL3.dialogParts < 5 and droidText() or \"<s>\n– Отвратительное место, – запричитал TL-3. – Я восхищён твоей целеустремлённостью.\") .. \"<s>\n   Юноша немного успокоился и решил наконец осмотреть помещение, в котором они оказались.\") or\n(UpLine == 5 and \"Учитель и Десвиар пересекли зал почти напрямую, не повторяя блужданий юноши, и присоединились к нему.<s>\n   Орнас немного успокоился и решил наконец осмотреть помещение, в котором они оказались.\") or\n(UpLine == 6 and \" Учитель пересёк зал почти напрямую, не повторяя блужданий юноши, и присоединился к замершему джедаю. TL-3 с опаской катился следом.<s>\n– Отличная работа, – похвалил магистр Льерсо, похлопав юношу по плечу.<s>\n   Что-то сдержанно одобрительное выдавил из себя и дроид.\") or\n(UpLine == 7 and (UpLine7.conflict < 2 and \" Десс почти сразу возникла за спиной юноши. Вскоре оказался рядом и TL-3, видимо он всё же сумел преодолеть свой страх.<s>\n– Отвратительное место, – запричитал дроид. – Я восхищён твоей целеустремлённостью.<s>\n   Юноша наконец успокоился и решил осмотреть помещение, в котором они оказались.\" or \" Он уже совсем расслабился и поэтому вздрогнул, когда рядом бесшумно возникла Десвиар. <s><s>\"Не стоит забывать, что она тоже джедай, а не принцесса в беде<s><s>\", – подумал юноша. И причины следовать за ним у неё тоже могли быть самыми разными. Он кивнул в ответ на её улыбку. Но что-то было не так.<s>\n– А где TL-3?<s>\n– Был где-то сзади, – неопределенно ответила девушка. – Давай подождём его.<s>\n   Но TL-3 так и не появился.\") \n) or\n(UpLine == 8 and \" Кажется, ничего очевидно или потенциально опасного. \") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 500,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine ~=5 and UpLine ~=6 and  UpLine ~=7 and  UpLine ~=8\nend",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.confidence = master.confidence or 0\nmaster.confidence = master.confidence <plus> 2\nsapper = nil\nend"
      },
      {
        "id": 660,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 2\nline6.droid = line6.droid <plus> 1\nsapper = nil\nend"
      },
      {
        "id": 713,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- для Десс и дроида\nUpLine7 = UpLine7 or {}\nUpLine7.conflict = UpLine7.conflict or 0\n\nreturn UpLine == 7 and UpLine7.conflict < 2\nend"
      },
      {
        "id": 718,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine7 = UpLine7 or {}\nUpLine7.conflict = UpLine7.conflict or 0\n-- для Десс без дроида\nreturn UpLine == 7 and UpLine7.conflict > 1\nend",
        "lua_do": "function lua_do()\nUpLine7.droidRun = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.droidRel = UpLine7.droidRel or 0\nUpLine7.conflict = UpLine7.conflict or 0\n\n\nUpLine7.conflict =  UpLine7.droidRel < 1 and 3 or UpLine7.conflict\nend",
        "text": "Новый ответ. введите текст",
        "id": 720,
        "calculate": true
      },
      {
        "id": 741,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 5\nend"
      },
      {
        "id": 816,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8HelpSup == 1--условие: помогал учитель\nend",
        "run": [
          816
        ]
      },
      {
        "id": 835,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8HelpSup == 3 --условие: помогал TL-3\nend",
        "run": [
          835
        ]
      },
      {
        "id": 836,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8HelpSup == 2 --условие: помогала Десс\nend",
        "run": [
          836
        ]
      }
    ]
  },
  {
    "id": 505,
    "text": "   Орнас попытался приблизиться к клетке, но парализованные ноги не позволили ему в этом преуспеть.",
    "answers": [
      {
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "lua_do": "function lua_do()\nvars[\"goto\"] = (location1.ornasPosition == 1 and 66) or (location1.ornasPosition == 2 and 146) or 141\nend",
        "text": "Расчёт, куда возвращать игрока"
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 84\nend",
        "lua_text": "function lua_text()\nlocal text = location1.kuski == 1 and \" Тем временем существо проворно выбралось из клетки и вновь готовилось к нападению.\" or \" Юноша не сразу заметил, что пока он возился с крышкой, сама клетка оказалась пуста.\"\nreturn text\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": false,
        "text": "Генерация текста",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn location1.kuski <= 2\nend",
        "id": 84,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocation1.time = location1.time <plus> 1\nend",
        "go_to": [
          "goto"
        ]
      },
      {
        "id": 102,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn location1.kuski > 2\nend",
        "run": [
          102
        ]
      }
    ]
  },
  {
    "id": 506,
    "text": "   Орнас замер, едва опустив ногу на первую ступень. Казалось, каждую его мышцу сковывала та же нерешительность, что и тогда в Храме джедаев на Корусанте, когда он впервые после рокового происшествия на тренировке покинул комнату для медитации и направился к большой лестнице, ведущей к шпилю Высшего Совета, охваченный самыми мрачными предчувствиями. Юноша сделал несколько глубоких вдохов и выдохов, позволяя себе вновь прожить те почти забытые воспоминания...",
    "answers": [
      {
        "id": 507,
        "text": "Закрыть глаза",
        "blackout": false
      },
      {
        "contentList": [
          "https://i.ibb.co/RDPMXR1/Ar1.png https://i.ibb.co/KykzLFf/Ar2.png https://i.ibb.co/HHkpq4h/Ar3.png https://i.ibb.co/3vXy8Hs/Ar4.png https://i.ibb.co/WGdYpYw/Ar5.png https://i.ibb.co/zQb1YpK/Ar6.png https://i.ibb.co/WvN3nFJ/sapper-seed1.png https://i.ibb.co/dmBRGDk/sapper-seed2.png https://i.ibb.co/sHXNTZm/sapper-seed3.png https://i.ibb.co/jvp0sjb/sapper-seed4.png https://i.ibb.co/R9kr8RG/sapper-seed5.png https://i.ibb.co/F35hFKS/sapper-seed6.png https://i.ibb.co/F8kdNcC/cover-6.png https://i.ibb.co/hsd0mpf/cover-7.png https://i.ibb.co/tLgjLB8/cover-11.png https://i.ibb.co/Gk2MpZn/cover-12.png https://i.ibb.co/dcWL70h/cover-14.png https://i.ibb.co/bbcnQQT/cover-15.png https://i.ibb.co/R9KSw6k/cover-16.png https://i.ibb.co/NmJbDrx/cover-17.png https://i.ibb.co/c8FTq1y/cover-18.png https://i.ibb.co/FYvqcvr/cover-19.png https://i.ibb.co/dtktcFZ/cover-20.png https://i.ibb.co/pn9751x/cover-21.png https://i.ibb.co/LYmGKfR/cover-22.png https://i.ibb.co/TPSK7Dk/cover-23.png https://i.ibb.co/1MKy2xM/cover-24.png https://i.ibb.co/9TYDgqb/cover-26.png https://i.ibb.co/7Y2Q0Bv/cover-27.png https://i.ibb.co/sWwz2tm/cover-28.png https://i.ibb.co/wcGQ4qC/cover-29.png https://i.ibb.co/2vQJ5fn/cover-30.png https://i.ibb.co/zxW1ky8/cover-31.png https://i.ibb.co/80MQJnf/cover-32.png https://i.ibb.co/FmqQnK4/cover-33.png https://i.ibb.co/RCnnffh/cover-34.png https://i.ibb.co/cT2vZ0W/cover-35.png https://i.ibb.co/nMtKg0R/cover-36.png https://i.ibb.co/bsZPj6z/framework.png https://i.ibb.co/xHb2kNw/position-2.png https://i.ibb.co/37dcGW7/position-5.png https://i.ibb.co/3N8h00L/position-6.png https://i.ibb.co/K6L0LR2/position-7.png https://i.ibb.co/HPsmKc6/position-8.png https://i.ibb.co/VD2X8y8/position-9.png https://i.ibb.co/QpbMtgS/position-10.png https://i.ibb.co/3pxQYL8/position-11.png https://i.ibb.co/2M12q6Z/position-12.png https://i.ibb.co/WDR2xYp/position-14.png https://i.ibb.co/4N5cdJM/position-15.png https://i.ibb.co/3v6vvY7/position-16.png https://i.ibb.co/G7jwfj2/position-17.png https://i.ibb.co/nPg1jTR/position-18.png https://i.ibb.co/Z1M6Csq/position-19.png https://i.ibb.co/jZ17xFg/position-20.png https://i.ibb.co/6FdN7Q5/position-21.png https://i.ibb.co/XsBTF2Y/position-22.png https://i.ibb.co/yskzqDB/position-23.png https://i.ibb.co/s9sWz6V/position-24.png https://i.ibb.co/ZBCB8Pk/position-26.png https://i.ibb.co/DzJq35P/position-27.png https://i.ibb.co/gzT3gBK/position-28.png https://i.ibb.co/7Xtb54d/position-29.png https://i.ibb.co/kM0rZrQ/position-30.png https://i.ibb.co/rZp9f1N/position-31.png https://i.ibb.co/YRCHc8P/position-32.png https://i.ibb.co/3s9rrCq/position-33.png https://i.ibb.co/TRFxRc4/position-34.png https://i.ibb.co/DCGMmQ4/position-35.png https://i.ibb.co/5T1RyQ6/position-36.png",
          "sapper"
        ],
        "super_calculate": false,
        "id": 2,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\ng.instantDownload = 1\nend"
      }
    ]
  },
  {
    "id": 507,
    "text": "   Орнас на секунду остановился на нижних ступенях широкий лестницы и несмело оглянулся. Всегда светлые и оживлённые коридоры Храма теперь казались пугающе мрачными и как будто опустевшими. За несколько дней, которые мальчик безвылазно провёл в крохотной комнате для медитаций, он успел накрутить себя до предела, представляя самые худшие из возможных и невозможных сценариев развития событий, поэтому буквально оцепенел, когда на его плечо мягко опустилась чья-то ладонь.\n   Магистр Буши с неизменно лукавой улыбкой на лице не утруждал себя формальностями и без приветствия оттащил опешившего Орнаса к краю лестницы.\n– Я ждал тебя, – непривычно серьёзным тоном начал старый мастер. – Хочу кое-что показать...\n   Всё ещё обескураженный Орнас выжидающе смотрел на джедая некоторое время, затем заозирался по сторонам.\n– Ничего не замечаешь? Я так и думал, – не дожидаясь ответа, продолжил магистр. – Но если постараешься, то непременно заметишь, что жизнь продолжается. Своды храма не рухнули, а все его обитатели не разбежались в ужасе. Честно говоря, эти стены видели и не такие драмы. Что же гнетёт тебя сейчас?",
    "answers": [
      {
        "id": 508,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 508,
    "text": "– Всё! – не задумываясь, выпалил Орнас. – Что-то тёмное во мне самом. То, что теперь обо мне думают все вокруг. Даже мастер Льерсо теперь ведёт себя со мной по-другому...\n– Тьма дремлет в каждом из нас, даже в самых лучших. На образ твой в глазах окружающих тебе теперь предстоит поработать, да... Если только считаешь это хоть сколько-то важным. Как только примешь себя таким, примут и другие, каким бы ты ни был. А учитель твой сейчас в таком же смятении, и себя во всём винит. Дай ему время и вернётся он обновленный, станет наконец тем, кем быть должен...",
    "answers": [
      {
        "id": 509,
        "text": "Открыть глаза",
        "blackout": false
      }
    ]
  },
  {
    "id": 509,
    "text": "   \"Станет тем, кем быть должен...\" – ещё раз повторил про себя джедай, открывая глаза. Пожалуй, с этим его наставник тогда справился. А вот насчёт самого Орнаса магистр Буши всё-таки ошибся: чем больше старался юноша вести себя непринужденно, тем сильнее отдалялся от сверстников, пока не оказался совсем изгоем.\n   Раздосадованный воспоминанием, Орнас сжал кулаки и решительно направился вверх, к площадке перед входом на второй этаж древнего тёмного храма.",
    "answers": [
      {
        "id": 468,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 510,
    "text": "   Хотя Орнасу не нравилась идея засовывать руки неизвестно куда, другого способа открыть дверь, кажется, не было.\n   Плохие предчувствия джедая подтвердились очень скоро: как только его пальцы коснулись холодного рычажка в глубине, всю руку от кисти до локтя зажал в металлической хватке какой-то механизм. Стараясь сохранять спокойствие, юноша несколько раз безрезультатно дёрнул обездвиженной конечностью и лишь после этого заметил, что на экране появилась какая-то надпись.\n   \"Приветствую, искатель! Чтобы пройти дальше, ты должен доказать, что достоин познать мудрости, здесь сокрытые. Вот моя загадка. Представь, что в своих странствиях ты стал свидетелем схватки могучего воина и страшного чудовища. Хотя боец многократно сильнее тебя самого, но и монстр под стать ему, и никак им друг друга не одолеть. Завидев тебя, воин просит о помощи в бою, обещая четверть сокровищ, кои зверь охраняет. Как поступишь?\"\n",
    "answers": [
      {
        "id": 471,
        "text": "Вариативное описание реакции спутников на загадку",
        "lua_text": "function lua_text()\nlocal text = \"\"\nUpLineHelpDoor = UpLineHelpDoor or 0\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"– О, тут загадка? – раздался из-за плеча голос Десвиар. – Я люблю загадки. Но подсказывать не стану, не смотри на меня так.<s>\n\"   ) or\n(UpLine == 3 and \"– Хм... Любопытно, – протянул наставник из-за плеча юноши. – Наверняка загадка с подвохом и не имеет одного верного решения.<s>\n\") or\n(UpLine == 4 and [=[– Молчишь? – вновь подал голос дроид. – Значит тебе правда не интересно?\n– Мне немного не до того, – буркнул юноша. – Я, видишь ли, попал в ловушку.\n– Это веская причина, – согласился TL-3. – Думаю, после решения загадки твоей конечности будет возвращена подвижность.\n]=]) or\n(UpLine == 5 and \"– Любопытная загадка, – скорее для Десс, чем для Орнаса заметил наставник.<s>\n\") or\n(UpLine == 6 and \"– Хм... Любопытно, – протянул наставник из-за плеча юноши. – Наверняка загадка с подвохом и не имеет одного верного решения.<s>\n– Имеет смысл учесть предполагаемые ценности того, кто составил эту задачу, – добавил TL-3. – Я бы предложил итерационный подход, исключая очевидно неподходящие варианты.<s>\n\") or\n(UpLine == 7 and [=[   И Десвиар, и TL-3 молча заглядывали в экран, оставаясь на значительном удалении друг от друга.\n]=]) or\n(UpLine == 8 and\n(UpLineHelpDoor == 1 and\n[=[– Не торопись, – заговорил учитель, – подумай. Кто мог составить эту загадку, на кого она рассчитана? Каких ответов ждёт составитель от испытуемых, и о каких личных качествах эти ответы могут говорить?\n– Наверное...\n– Не говори, делай.\n   Понятнее не стало.\n]=]) or \n(UpLineHelpDoor == 2 and\n[=[– О, загадка, – у Десвиар заблестели глаза. – Я люблю загадки.\n   Она какое-то время пристально вглядывалась в экран, беззвучно шевелила губами и хмурилась всё сильнее.\n– Кажется, единственно верного ответа тут не будет, – наконец вновь заговорила она. – Хотя есть очевидно неподходящие. Попробуй для начала что-нибудь нейтральное.\n   Понятнее не стало.\n]=]) or \n(UpLineHelpDoor == 3 and\n[=[– Анализирую, – пискнул TL-3. – Похоже, это – загадка. Данных недостаточно. Я бы предположил итерационный подход.\n– Какой? – нахмурился Орнас.\n– И-те-ра-ци-он-ный, – повторил по слогам дроид, но понятнее не стало. – Просто выбери что-нибудь нейтральное, уверен, это ещё не всё.\n]=])\n) or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nreturn helmet == 1 and \"   Орнас бросил на пол шлем, который до сих пор нёс с собой, и потянулся свободной рукой к мерцающим на экране вариантам ответа.\" or \"   Орнас потянулся свободной рукой к мерцающим на экране вариантам ответа и на мгновенье задумался.\"\nend",
        "id": 510,
        "text": "Сама загадка на двери второго этажа",
        "comment": true,
        "merge": true
      },
      {
        "id": 489,
        "text": "«Согласиться»"
      },
      {
        "id": 490,
        "text": "«Отказаться»"
      },
      {
        "id": 511,
        "text": "«Убежать»"
      }
    ]
  },
  {
    "id": 511,
    "text": "   Определившись, наконец, джедай легко коснулся варианта \"Убежать\", от чего весь текст на экране исчез, а затем появился новый.\n",
    "answers": [
      {
        "id": 511,
        "text": "реакция Десс ",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif UpLine == 2 then\ntext = \"– Ну-ну... – отреагировала Десс из-за спины юноши.<s>\n\"\nelseif UpLine == 3 or UpLine == 6 then\ntext = \"– Да уж, не ожидал от тебя... – протянул магистр Льерсо.<s>\n\"\nmaster = master or {}\nmaster.confidence = (master.confidence or 0) - 1\nelseif UpLine == 4 then\ntext = [=[– Тебе требуется консультация? – подал голос дроид. – Мой анализ позволяет заключить, что этот вариант может с высокой вероятностью повлечь неблагоприятные последствия. Требуется точная цифра?\n– Вовремя же ты... – отозвался юноша и продолжил читать.\n]=]\nelseif UpLine == 5 then\ntext = \"   Десс что-то тихо зашептала учителю, и тот покачал головой.<s>\n\"\nelseif UpLine == 7 then\ntext = \"   Десс закашлялась и уже открыла рот, чтобы что-то сказать, но всё-таки передумала и промолчала.<s>\n\"\n\nelseif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[– Я бы не был столь... – начал говорить учитель и осёкся.\n]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[– Ну ты, конечно, выбрал – нейтральнее некуда, – всплеснула руками Десс.\n]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[– Провожу перерасчёт модели, – сухо отозвался TL-3.\n]=])\n\nelse end\n\nreturn text .. [=[   \"Ты убежал от выбора и ответственности, от опасностей и наград. Поступок настоящего труса – и причитается тебе как трусу...\"\n   ]=]\nend",
        "merge": true
      },
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n-- прописать условие бонусных наручей\narmlets = armlets or 0\nlocal a = (armlets == 1 and \"Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке.\" or \"Внезапно Орнас ощутил болезненный укол в зажатую руку, за которым последовало лёгкое онемение и судороги в мышцах ног.\") .. \"<s>\n   <s><s>\"... Но ты остался жив, а посему можешь пройти дальше. Или попробуешь решить загадку ещё раз?<s><s>\"\"\nreturn a\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.speed = 1\nend",
        "calculate": true,
        "text": "штраф к скорости",
        "id": 511
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше"
      },
      {
        "id": 513,
        "text": "Начать заново"
      },
      {
        "id": 489,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[ \n– Неожиданно... – удивился магистр Льерсо. – Загадка пропускает тебя после ошибки? Что-то здесь не так...]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ \n– Ну уж нет, – буркнула Десвиар. – Что за подачки? Мы разгадаем её полностью, верно?]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[ \n– Данных недостаточно, – продолжил дроид, – но достигнутый результат не кажется оптимальным.]=])\nelse end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 512,
    "text": "   Джедай после секундного замешательство коснулся варианта \"Просить четверть сокровищ\". На экране тут же появился новый текст.\n   \"Ты просишь ровно то, о чём договорились ранее. Но воин лишь усмехается в ответ и говорит, что изменил условия сделки, и ты не получишь ничего. Мерзавец, кажется, истощён сражением, осмелишься ли ты напасть на него, чтобы забрать причитающееся по праву, или смиришься с обманом?\"",
    "answers": [
      {
        "id": 514,
        "text": "«Напасть»"
      },
      {
        "id": 515,
        "text": "«Смириться»"
      },
      {
        "id": 512,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[ \n   Магистр Льерсо молча всматривался в экран.]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ \n   Десвиар прищурилась, будто пытаясь разглядеть что-то незаметное, но вслух ничего не сказала.]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[ \n   TL-3 едва уловимо гудел. Казалось, он не посчитал нужным комментировать очередное изменение.]=])\nend\n\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 513,
    "text": "   Орнас коснулся фразы \"ещё раз\" и на экране вновь появился первоначальный текст.\n   \"Приветствую, искатель! Чтобы пройти дальше, ты должен доказать, что достоин познать мудрости, здесь сокрытые. Вот моя загадка. Представь, что в своих странствиях ты стал свидетелем схватки могучего воина и страшного чудовища. Хотя боец многократно сильнее тебя самого, но и монстр под стать ему, и никак им друг друга не одолеть. Завидев тебя, воин просит о помощи в бою, обещая четверть сокровищ, кои зверь охраняет. Как поступишь?\"\n   Юноша опять потянулся свободной рукой к мерцающим на экране вариантам ответа, но размышлял чуть дольше, чем до этого.",
    "answers": [
      {
        "comment": true,
        "id": 471,
        "text": "Повтор загадки на двери второго этажа",
        "need": 1000,
        "merge": false
      },
      {
        "id": 489,
        "text": "«Согласиться»"
      },
      {
        "id": 490,
        "text": "«Отказаться»"
      },
      {
        "id": 511,
        "text": "«Убежать»"
      }
    ]
  },
  {
    "id": 514,
    "text": "   Юноша отрешённо коснулся варианта \"Напасть\" и начал читать на экране обновившийся текст.\n   \"Ты в гневе нападаешь на бесчестного воина. К несчастью, ты недооценил его мощь, и он сражает тебя насмерть одним точным ударом. ",
    "answers": [
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = 1\npenalties.bonus.closeFight = 1\n\nlocal s = TabLen(penalties.bonus)\npenalties.success = s == 4 and 1 or 0\n\n\n-- прописать условие бонусных наручей\narmlets = armlets or 0\nlocal a = (armlets == 1 and (s == 4 and \"Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке.\" or \"Ты безрассуден, пусть слабость рук твоих обуздать поможет дерзкий нрав...<s>\n   Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке.\") or\n\n(s == 4 and \"..<s><s>\"<s>\n   Внезапно Орнас ощутил болезненный укол в зажатую руку, но сразу же почувствовал, как из мышц уходит напряжение и накатывает волна лёгкости.\" or \"Ты безрассуден, пусть слабость рук твоих обуздать поможет дерзкий нрав...<s><s>\"<s>\n   Внезапно Орнас ощутил болезненный укол в зажатую руку, за которым последовало лёгкое онемение и слабость от кисти до плеча.\"))\n.. ( s == 4 and \"<s>\n   <s><s>\"... Ты бы погиб в очередной раз, но в тебе есть ещё кое-что. Кое-что поистине важное. Ты упорен и готов идти до конца. Это я и хотел узнать. Теперь ты можешь пройти дальше.\" or \"<s>\n   <s><s>\"... На сей раз ты погиб, а посему должен попытаться решить загадку ещё раз<s><s>\".\")\n\nreturn a\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 511,
        "calculate": true,
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.closeFight = 1\nend",
        "text": "штраф к ближнему бою"
      },
      {
        "id": 513,
        "text": "Начать заново",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\n\nlocal s = TabLen(penalties.bonus)\n\nreturn s ~=4\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\n\nlocal s = TabLen(penalties.bonus)\n\nreturn s ==4\nend",
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.closeFight = 0\npenalties.speed = 0\npenalties.stamina =0\npenalties.reaction = 0\nend"
      }
    ]
  },
  {
    "id": 515,
    "text": "   Джедай озадаченно ткнул пальцем в строчку \"Смириться\".\n",
    "answers": [
      {
        "lua_text": "function lua_text()\n\nlocal text = \"\"\nif UpLine == 2 then\ntext = \"– Да что же ты делаешь... – бурно отреагировала Десс и сильно хлопнула юношу по спине.<s>\n\"\nelseif UpLine == 3 then\ntext = \"– Это вполне рассудительно, – подал голос старый наставник, – но хотел ли составитель загадки проверить твою рассудительность?<s>\n\"\nelseif UpLine == 4 or UpLine == 6 then\ntext = [=[– Твои решения расходятся с положениями построенной мной модели, – оживился TL-3. – Пересчитываю вероятность неблагоприятных последствий...\n]=]\nelseif UpLine == 5 then\ntext = [=[– Ну да, – хмыкнул магистр Льерсо, и Десс проснула от смеха.\n]=]\nelseif UpLine == 7 then\ntext = [=[  TL-3 и Десвиар одновременно начали говорить и одновременно же смолкли, так что юноша не смог ничего расслышать.\n– Да нет, ничего, – пробормотала Десс в ответ на удивленный взгляд повернувшегося к спутниками Орнаса.\n]=]\n\nelseif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[Магистр Льерсо нахмурился и почесал подбородок, но ничего не сказал.\n]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ – Да что же ты делаешь... – бурно отреагировала Десс и сильно хлопнула юношу по спине.\n]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[– Твои решения расходятся с положениями построенной мной модели, – оживился TL-3. – Пересчитываю вероятность неблагоприятных последствий...\n]=])\n\n\nelse end\n\nreturn text ..\n[=[   Экран отреагировал новым фрагментом текста.\n   \"Ты трусливо принимаешь свою участь и спешишь убраться восвояси. Коли так, вечно бежать от боя – твой удел...\"\n   ]=]\n   \nend",
        "super_calculate": false,
        "id": 515,
        "calculate": false,
        "text": "Реакция Десс ",
        "merge": true
      },
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n-- прописать условие бонусных наручей\narmlets = armlets or 0\nlocal a = (armlets == 1 and \"Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке.\" or \"Внезапно Орнас ощутил болезненный укол в зажатую руку, за которым последовало лёгкое онемение и слабость от кисти до плеча.\") .. \"<s>\n   <s><s>\"... Но ты остался жив, а посему можешь пройти дальше. Или попробуешь решить загадку ещё раз?<s><s>\"\"\nreturn a\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 511,
        "text": "штраф к ближнему бою",
        "calculate": true,
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.closeFight = 1\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше"
      },
      {
        "id": 513,
        "text": "Начать заново"
      },
      {
        "id": 489,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nif UpLine == 8 then\ntext =\n(UpLineHelpDoor == 1 and\n[=[ \n– Что же здесь не так? – будто сам с собой говорил магистр Льерсо. – Не может же он считать это правильным?]=]) or\n\n(UpLineHelpDoor == 2 and\n[=[ \n– Гнусная мерзкая... – понемногу сердилась Десвиар. – Издевается над нами? Пытается обмануть?]=]) or\n\n(UpLineHelpDoor == 3 and\n[=[ \n– Запускаю очередной пересчёт, – отозвался дроид. – Требуется больше данных...]=])\nelse end\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 516,
    "text": "   Орнас осторожно коснулся надписи \"Ждать\" и пристально вглядывался в экран, на котором необычайно медленно появился новый фрагмент загадки.\n   \"Расположившись на некотором расстоянии, ты расслабленно наблюдаешь за схваткой. Уже через несколько минут воин сражает чудовище. Утерев взмыленное лицо, он подходит к тебе, сердито скалится и наносит смертельный удар",
    "answers": [
      {
        "id": 491,
        "text": "Добавление эффектов статуса в зависимости от итогов решения",
        "calculate": true,
        "super_calculate": false
      },
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.speed = 1\nlocal s = TabLen(penalties.bonus)\npenalties.speed = 1\n\n-- прописать условие бонусных наручей\narmlets = armlets or 0\n\nlocal b = \"\"\nlocal c = \"\"\nlocal d = \"\"\nlocal a = \"\"\n\nif s == 4 then\n\na = \"\"\n  c = armlets == 1 and \"\" or \", но сразу же почувствовал, как из мышц уходит напряжение и накатывает волна лёгкости.\"\nd   = \"<s>\n   <s><s>\"... Ты бы погиб в очередной раз, но это уже не имеет значения. В тебе есть кое-что поистине важное: ты упорен и готов идти до конца. Это я и хотел узнать. Теперь ты можешь пройти дальше.\"\nelse\n \na = \"<s>\n   <s><s>\"... Ты недальновиден. Может, ты будешь осмотрительнее, если не сможешь убежать от последствий своих решений?.. На сей раз ты погиб, а посему должен попытаться решить загадку ещё раз<s><s>\".\"\n  c = armlets == 1 and \"\" or \", за которым последовало лёгкое онемение и судороги на мышцах ног.\"\nd = \"\"\nend\n\nb = armlets == 1 and \"...<s><s>\"<s>\n   Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке\" or \"...<s><s>\"<s>\n   Внезапно Орнас ощутил болезненный укол в зажатую руку\"\n\nreturn b .. c .. a .. d\nend",
        "merge": true
      },
      {
        "id": 513,
        "text": "Начать заново",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.speed = penalties.speed or 0\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\n\npenalties.bonus = penalties.bonus or {}\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.success = s == 4 and 1 or 0\n\n\nreturn s ~=4\nend",
        "lua_do": "function lua_do()\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.stamina = 1\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.speed = penalties.speed or 0\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\n\npenalties.bonus = penalties.bonus or {}\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.success = s == 4 and 1 or 0\n\nreturn s ==4\nend",
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.closeFight = 0\npenalties.speed = 0\npenalties.stamina =0\npenalties.reaction = 0\nend"
      }
    ]
  },
  {
    "id": 517,
    "text": "   Джедай подошёл ближе к выделяющемуся участку и присел возле него на корточки. Он осторожно потянул панель со вмятиной, и та без сопротивления отошла, открывая взору ",
    "answers": [
      {
        "id": 493,
        "text": "Динамическое описание локации,  реакции компаньонов,\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and [=[юноши решётку вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n  Шахта вентиляции оказалась довольно широкой и Орнас отметил, что по ней можно будет передвигаться, если потребуется. Он с усилием вытащил решётку и приставил её к стене рядом, оставив проём полностью открытым.]=]) or\n(UpLine == 2 and\n[=[спутников решётку вентиляции.\n– Ты думаешь о том же, о чём и я? – заговорщически прошептала Десвиар.\n– Надеюсь, что нет, – задумчиво протянул юноша. – Тебе не кажется, что это слишком очевидный ход, чтобы не быть ловушкой?\n– Ну... Его даже попытались кое-как спрятать.\n– Вот именно, что кое-как...\n   Тем не менее джедай всё-таки вытащил решётку, приложив определённые усилия, и приставил её к стене рядом так, чтобы проём оставался полностью открытым.]=])\nor\n(UpLine == 3 and \n[=[спутников решётку вентиляции.\n– Слишком очевидно, – заметил Орнас. – Похоже на очередную ловушку.\n– Верно, – согласился мастер Льерсо. – Запомним это и будем оставаться начеку.\n   Юноша вытащил решётку, приложив определённые усилия, и приставил её к стене рядом так, чтобы проём оставался полностью открытым.]=]\n) or\n(UpLine == 4 and [=[юноши решётку вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Слишком подозрительно, – сформулировал опасения джедая TL-3. – Высокий риск неблагоприятных последствий.\n– Высокий, высокий, – легко согласился Орнас.\n   Он с усилием вытащил решётку и приставил её к стене рядом, оставив проём полностью открытым.]=]) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 517,
        "text": " ",
        "merge": true
      },
      {
        "id": 592,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 518,
    "text": "   Орнас решил испытать вариант \"Просить четверть сокровищ\" и неуверенно дотронулся до этих слов на экране.\n   \"Ты просишь четверть сокровищ, как с самого начала и предлагал сам воин. Но он разозлён твоим первоначальным отказом и тем, что ты весь бой прохлаждался в безопасности, пока он рисковал жизнью. Вместо ответа он без предубеждения атакует тебя",
    "answers": [
      {
        "id": 511,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.reaction = 1\nlocal s = TabLen(penalties.bonus)\npenalties.reaction = 1\n\n-- прописать условие бонусных наручей\narmlets = armlets or 0\nlocal a = \"\"\nlocal b = \"\"\nlocal c = \"\"\nlocal d = \"\"\nlocal a2 = \"\"\n\nif s == 4 then\n  a = \"\"\na2 = \"\"\n  c = armlets == 1 and \"\" or \", но сразу же почувствовал, как из мышц уходит напряжение и накатывает волна лёгкости.\"\nd   = \"<s>\n   <s><s>\"... Ты бы погиб в очередной раз, но это уже не имеет значения. В тебе есть кое-что поистине важное: ты упорен и готов идти до конца. Это я и хотел узнать. Теперь ты можешь пройти дальше.<s><s>\"\"\nelse\n  a = \"\"\na2 = \"<s>\n   <s><s>\"... Твоё чутьё не идеально, и впредь не стоит на него уповать. На сей раз ты погиб, а посему должен попытаться решить загадку ещё раз<s><s>\".\"\n  c = armlets == 1 and \"\" or \", за которым последовало лёгкое онемение, и сознание юноши затуманиллсь.\"\nd = \"\"\nend\n\nb = armlets == 1 and \"...<s><s>\"<s>\n   Внезапно по наручу на зажатой руке звякнул металл. Что бы это ни было, кортозис надёжно защитил юношу, и тот ещё раз порадовался ценной находке\" or \"...<s><s>\"<s>\n   Внезапно Орнас ощутил болезненный укол в зажатую руку\"\n\nreturn a  .. b .. c .. a2 .. d\nend",
        "merge": true
      },
      {
        "id": 513,
        "text": "Начать заново",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.speed = penalties.speed or 0\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\n\npenalties.bonus = penalties.bonus or {}\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.success = s == 4 and 1 or 0\n\n\nreturn s ~=4\nend",
        "lua_do": "function lua_do()\npenalties.bonus = penalties.bonus or {}\npenalties.bonus.stamina = 1\nend"
      },
      {
        "id": 493,
        "text": "Закончить и пройти дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.speed = penalties.speed or 0\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\n\npenalties.bonus = penalties.bonus or {}\nlocal s = TabLen(penalties.bonus)\na_TestPrint = s\npenalties.success = s == 4 and 1 or 0\n\nreturn s ==4\nend",
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.closeFight = 0\npenalties.speed = 0\npenalties.stamina =0\npenalties.reaction = 0\nend"
      }
    ]
  },
  {
    "id": 519,
    "text": "   Желание обезопасить возможное перемещение через вентиляцию пересилило в юноше всё возможные риски. Джедай сел прямо на пол и закрыл глаза.\n   ",
    "answers": [
      {
        "id": 519,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nlocal text = penalties.reaction == 0 and \"Прикинув расположение повреждённой трубы, он осторожно потянулся к ней через Силу. Медленно прочувствовал всю поверхность металла, над которой предстоит поработать. Затем аккуратно, миллиметр за миллиметром, начал закручивать трубку на несколько сантиметров выше места разрыва.<s>\n   Полностью сосредоточившись на процессе, Орнас не мог сказать, сколько времени он в итоге провозился. Но результат несомненно стоил затраченных усилий – вытянутая трубка теперь вновь соединялась со своим продолжением, лишь лёгкая скрутка в месте бывшего разрыва напоминала о проведённой операции.\" or \"Прикинув расположение повреждённой трубы, он осторожно потянулся к ней через Силу. Орнас знал, что для такой филигранной работы требуется максимальная собранность, но никак не мог сосредоточиться – так невовремя напомнили о себе последствия его неудач в храме.<s>\n   Напрасно потеряв несколько минут в безрезультатных попытках собраться, джедай был вынужден отказаться от своей затеи.\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 519,
        "text": "Реакция компаньонов",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0 \n\nlocal text = \"\"\n\nif penalties.reaction == 0 then\n text =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \n[=[ \n– Закончил медитировать? – тут же спросила деликатно молчавшая всё это время Десс.\n– Да, – с довольной улыбкой ответил Орнас. – Теперь путь через вентиляцию безапасен.\n   К счастью, у Десвивр хватило такта не уточнять, насколько он в этом уверен. Она лишь махнула рукой, приглашая юношу первым оценить правдивость своих слов.]=]\n) or\n(UpLine == 3 and \n[=[ \n– Отличная работа, – похвалил юношу наставник, похлопывая его по плечу. – Тонкая, ювелирная. Я бы сам действовал грубее.]=]\n) or\n(UpLine == 4 and [=[ \n– Я не смог определить, чем ты занимался, – подал голос TL-3, – но вижу, что ты уже закончил.\n– Ага, – улыбаясь кивнул Орнас, – разобрался с нашей маленькой проблемой. О газе можно не беспокоиться.\n– Я и так не беспокоился, – спокойно ответил астромех, – это было проблемой только для твоего белкового тела.]=]) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\n\nelse -- реакция на неудачу\n text =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \n[=[ \n– Закончил медитировать? – тут же спросила деликатно молчавшая всё это время Десс.\n– Да, – мрачно отозвался юноша.\n   К счастью, у Десвиар хватило такта не выяснять, чем он занимался и насколько успешно.]=]\n) or\n(UpLine == 3 and \n[=[ \n– Хорошо, что ты хотя бы попробовал, – попытался приободрить юношу наставник. – Я вижу, что ты не в лучшей форме, но упорство делает тебе честь.]=]\n) or\n(UpLine == 4 and [=[ \n– Я не смог определить, чем ты занимался, – подал голос TL-3, – но вижу, что ты уже закончил.\n– Ага, – раздражённо кивнул Орнас. – Но ничего не получилось, так что не важно...]=]\n) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nend\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\npoisonGasIsOn = penalties.reaction == 0 and 0 or 1\n\nmaster = master or {}\nmaster.confidence = master.confidence or 5\nmaster.confidence = penalties.reaction == 0 and  (master.confidence <plus> 2) or master.confidence <plus> 1\n\nend",
        "text": "Дальше",
        "id": 498
      }
    ]
  },
  {
    "id": 520,
    "text": "empty",
    "answers": [
      {
        "id": 520,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"   Интуиция юноши закричала ещё до того, как он опустил ногу. Поэтому он метнулся в сторону, едва коснувшись пыльной плитки, и в ту же секунду с ужасным грохотом пол начал вздыматься.<s>\n   Вернее, поднялась вверх лишь плита, на которую не посчастливилось наступить джедаю. Навстречу ей опустилась такая же часть потолка. Два каменных блока сомкнулись так быстро, что запечатали в образовавшейся колонне часть плаща, взметнувшегося от резкого манёвра юноши.<s>\n   К облегчению джедая, вторая плита, на которую он прыгнул, оказалось вполне безопасной, но на всякий случай Орнас отступил в дверной проём, с грустью оставляя плащ в каменных тисках. Отсюда было видно, что рядом с только что возникшей уже находилась другая шестиугольная колонна, которая, видимо, появилась намного раньше. Казалось, что весь потолок стал намного ниже и теперь юноша почти задевал его взъерошенной головой.\") or\n(UpLine == 2 and \n[=[   Юноша замер на пороге, почувствовав смутную опасность. Интуиция подсказывала ему: нельзя просто так заходить внутрь. Он так и замер с поднятой ногой, неловко балансируя на второй. И почти сразу в него врезалась Десвиар.\n  Орнас падал бесконечно долго и уже не мог разобраться, где верх и где низ,  рушится ли потолок или проваливается пол. Всё слилось в непрерывном мельтешении, и в оглушительном грохоте потонуло непристойное юному возрасту джедая ругательство. Сквозь шум откуда-то доносился звонкий смех Десс, и в какой-то момент юноша почувствовал, как её прикосновения настойчиво увлекают его куда-то прочь.]=]) or\n(UpLine == 3 and \n[=[– Замри! – неожиданно вскрикнул наставник, едва только Орнас занёс ногу над порогом.\n   Юноша и сам уже почувствовал смутную тревогу. Впрочем, уверенности, что он сам успел бы отреагировать вовремя, у него не было. Джедай остановился и отступил назад, пропуская учителя.\n– Хитро! – расплылся в довольной улыбке тот всего через несколько секунд. – Но нужно убедиться наверняка. Смотри, внимательно, мой друг.\n   С этими словами он осторожно наступил одной ногой внутрь, и тут же стремительно убрал её. В то же мгновение часть пола вздыбилась и устремилась вверх, навстречу ей опускалась точно такая же часть потолка. Каменные блоки врезались с оглушительным грохотом и подняли в воздух облако пыли и раскрошенной породы. Но движение на этом не прекращалось, и Орнас с ужасом понял, что падает весь потолок.\n   К облегчению спутников, опустившись на полтора метра, он вновь застыл примерно на высоте человеческого роста. Теперь на месте плиты возникла шестиугольная колонна, рядом с ней уже была ещё одна такая же.]=]\n) or\n(UpLine == 4 and [=[– Tы собираешься наступать прямо сюда? – спросил TL-3, едва юноша поднял ногу, чтобы пройти внутрь. – На нажимной датчик?\n   Орнас опешил. Он так и замер на месте на одной ноге и теперь старательно вглядывался в темноту помещения, стараясь заметить что-то необычное в каменной плите, на которую он чуть было не наступил.\n– Хотя с другой стороны, мои сканеры показывают, что тут всё давно вышло из строя, а датчик сам по себе безвреден, – продолжил астромех и закатился внутрь.\n   В то же мгновение часть пола вздыбилась и устремилась вверх, навстречу ей опускалась точно такая же часть потолка. Джедай едва успел втянуть незадачливого спутника назад, когда каменные блоки врезались с оглушительным грохотом и подняли в воздух облако пыли и раскрошенной породы. Но движение на этом не прекращалось, и Орнас с ужасом понял, что падает весь потолок.\n   К счастью, опустившись на полтора метра, он вновь застыл и теперь высота зала насилу достигала человеческого роста. На месте плиты возникла шестиугольная колонна, рядом с ней уже была ещё одна такая же.\n   Дроид сдержанно поблагодарил юношу и наотрез отказался даже приближаться ко входу в злосчастный зал, не говоря уже о том, чтобы помочь Орнасу с ловушками.]=]) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 521,
        "text": "Осмотреть пол",
        "lua_if": "function lua_if()\nreturn UpLine ~= 2\nend",
        "lua_do": "function lua_do()\nTL3usefull = (TL3usefull or 0) - 1\nend"
      },
      {
        "id": 586,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 2\nend"
      }
    ]
  },
  {
    "id": 521,
    "text": "   Весь пол в маленьком зале был разделён на одинаковые шестигранники. Но присмотревшись, юноша заметил, что плитка, соприкасающаяся с обеими колоннами, оказалась выше других. Должно быть, старый гравитационный механизм, активирующий ловушки, действовал и на соседние участки, из-за чего те и приподнялись.\n",
    "answers": [
      {
        "id": 521,
        "text": "   ",
        "lua_text": "function lua_text()\nlocal text = UpLine == 6 and [=[   По крайней мере, с помощью этого эффекта можно попробовать обойти оставшиеся ловушки. Перепрыгнуть их при таком низком потолке всё равно не выйдет, так что стоит тщательно выбирать маршрут.\n]=]\nor [=[   По крайней мере, с помощью этого эффекта можно попробовать обойти ловушки, если такие ещё остались в зале. Перепрыгнуть их при таком низком потолке всё равно не выйдет, так что стоит тщательно выбирать маршрут.\n]=]\nreturn text\nend",
        "merge": true
      },
      {
        "id": 478,
        "text": "инициализация функций сапёра",
        "run": [
          478
        ]
      },
      {
        "id": 478,
        "text": "Дальше"
      },
      {
        "id": 521,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal textInt = \"\" -- вариативный текст введения\ntextInt =\n(UpLine == 1 and \"   Вернувшись на безопасную клетку Орнас с сожалением заметил, что она шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.\") or\n(UpLine == 2 and \n[=[– Я тут подожду, чтобы не мешать – после короткой паузы сказала Десс. –Да и подстрахую в случае чего.\n   Орнас улыбнулся, но возражать не стал. Он осторожно наступил на ближайший шестиугольник, и тот зашатался под весом юноши. Хотя больше ничего не произошло, это существенно осложняло задачу: в таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.]=]\n) or\n(UpLine == 3 and [=[– Разберёшься? – коротко спросил учитель.\n   Орнас кивнул и осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.]=]\n) or\n(UpLine == 4 and [=[– Удачи, – буркнул TL-3 откуда-то сзади.\n   Орнас кивнул и осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.]=]) or\n\n(UpLine == 5 and \n [=[– Разберёшься? – коротко спросил учитель.\n   Орнас кивнул и осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.\n– Удачи, – неожиданно тепло подбодрила Десс.]=]) or\n\n(UpLine == 6 and \n [=[– Разберёшься? – коротко спросил учитель.\n   Орнас кивнул и осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.\n– Удачи, – буркнул TL-3 откуда-то сзади.]=]) or\n\n(UpLine == 7 and [=[– Удачи, – одновременно сказали Десвиар и TL-3 откуда-то сзади.\n   Орнас кивнул и осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.]=]) \n\n\nreturn textInt\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 522,
    "text": "empty \nуспех в сапёре\nконфликт Десс и TL-3\nподдержать Десс",
    "answers": [
      {
        "id": 532,
        "text": "– Давайте оставим прошлое в прошлом и сосредоточимся на настоящем, – громко сказал Орнас, втискиваясь между спорщиками. – Закроем этот вопрос здесь и сейчас. TL-3, пообещай, что не станешь вновь говорить об этом.\n   Орнас встал рядом с Десвиар и развернулся лицом к дроиду. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ты правда ей доверяешь? – огорчился TL-3. – Как же ты будешь... Хорошо, хорошо, раз моё мнение никого не интересует, этот риск теперь на вашей ответственности.\n   Орнас растерянно кивнул.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 523,
    "text": "   Слева от конторки простиралось блестящее стирильностью пространство, заставленное в основном непонятным оборудованием. Там располагались и несколько десятков бакта-камер, внутри каждой из которых неподвижно замерло сразу по два, а то и по три ящероподобных создания. В нескольких прозрачных боксах из тёмно-фиолетового стекла извивались отделённые друг от друга высокими перегородками не то маленькие змеи, не то крупные черви. Над одним из столов возле огромного странного прибора медленно прокручивалась голограмма, которую джедай издалека принял за изображение головы ранкора. Проекция моментально погасла, как только юноша сделал ещё один шаг в её направлении.\n   Не углубляясь с осмотром, Орнас вернулся назад в центр.",
    "answers": [
      {
        "id": 524,
        "text": "Осмотреть правую часть комнаты",
        "need": -524
      },
      {
        "id": 525,
        "text": "Пройти в дальний конец комнаты",
        "need": 524
      },
      {
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend",
        "id": 523,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 1\ntext = TL3.dialogParts < 5 and droidText() or \"\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 524,
    "text": "   Пространство справа от центра было равномерно заполнено архивными полками. Обычные голо-диски с данными, древние манускрипты в кожанных чехлах и даже несколько рядов глиняных табличек, испещрённых затейливыми символами, покоились здесь и сулили многие часы кропотливых исследований.\n    Но что поистине завораживало Орнаса, так это отдел, в котором хранились голокроны — изящное сплетение высоких технологий и филигранного владения Силой, хранящие мудрость и даже часть личности создавших их мастеров. Эти бесценные артефакты стояли здесь открыто и даже немного небрежно – не чета секретному архиву Храма джедаев.\n   Ещё будет время ознакомиться со всем этим богатством вместе с учителем на звездолёте во время обратного полёта на Корусант, поэтому юноша удержался от искушения взять что-нибудь прямо сейчас.",
    "answers": [
      {
        "id": 523,
        "text": "Осмотреть левую часть комнаты",
        "need": [
          -523
        ]
      },
      {
        "id": 525,
        "text": "Пройти в дальний конец комнаты",
        "need": 523
      },
      {
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend",
        "id": 523,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 1\ntext = TL3.dialogParts < 5 and droidText() or \"\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 525,
    "text": "   Пространство в дальней части зала было практически пустым: лишь винтовая лестница без перил и с прозрачными ступенями уходила вверх. Почти прямо перед ней нарушали педантичный порядок и стерильность помещения почерневшие обломки огромного механизма.\n   Орнас подошёл ближе и прищурился, изучая находку. До этого ему не приходилось видеть вживую штурмовых дроидов класса \"Палач\", но даже искорёженные останки заставляли тревожно потянуться пальцами к рукояти светового меча. Из разорванной пробоины в чёрном корпусе смертоносной машины торчали провода, нелепо яркие здесь, как полевые цветы, вплетённые в гриву опасного зверя.\n   Неожиданный звук заставил юношу резко обернуться, в только того и ждавшей ладони загорелся клинок меча.",
    "answers": [
      {
        "id": 526,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndroidTextFunctionOn = nil\nend"
      }
    ]
  },
  {
    "id": 526,
    "text": "– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс механическим голосом серебристый дроид-секретарь, внезапно возникший возле джедая.\n   Будто не заметив оружие в руке юноши, дроид попытался приблизиться к нему с неуклюже раскинутыми для объятий руками. Орнас отступил на шаг, не убирая меча.\n– Удивление: Хозяин, вы не узнаёте меня? – продолжал секретарь, наступая. – Я НК-63, ваш протокольный дроид и верный слуга.",
    "answers": [
      {
        "id": 526,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"<s>\n   Орнас замер от удивления и даже опустил руку с мечом. Он не помнил, чтобы у него когда-то был собственный дроид. Джедаям вообще запрещено владеть хоть чем-то.\") or\n(UpLine == 2 and \"<s>\n<s>\n Ошибка <s><s>\"UL2p526<s><s>\". Пожалуйста, сообщите о ней автору\") or\n(UpLine == 3 and \"<s>\n<s>\n Ошибка <s><s>\"UL3p526<s><s>\". Пожалуйста, сообщите о ней автору\") or\n(UpLine == 4 and \"<s>\n– Врёт, – коротко отреагировал TL-3. – Серия НК – замаскированные под протокольных дроидов убийцы. Причём высокоэффективные. Уверен, на его счету найдётся несколько даже убитых джедаев.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"<s>\n– Врёт, – коротко отреагировал TL-3. – Серия НК – замаскированные под протокольных дроидов убийцы. Причём высокоэффективные. Уверен, на его счету найдётся несколько даже убитых джедаев.\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 526,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocal page =\n(UpLine == 1 and 527) or\n(UpLine == 2 and 528) or\n(UpLine == 3 and 529) or\n(UpLine == 4 and 530) or\n(UpLine == 5 and 531) or\n(UpLine == 6 and 532) or\n(UpLine == 7 and 530) or\n(UpLine == 8 and 534) or\n527\nshowPage{id = page}\nend",
        "no_transition": true
      }
    ]
  },
  {
    "id": 527,
    "text": "– Я не понимаю... – только и смог выдавить Орнас. – Что происходит?\n   Юноша уже не сопротивлялся нахальным попыткам обнять себя и деактивировал клинок. Дроид моментально воспользовался этим и сгрёб в охапку джедая, который, тем не менее, ловко выскользнул из жёстких объятий и вновь отступил на несколько шагов.\n– Утверждение: Конечно, вы наверное забыли, – продолжал тараторить НК-63, неестественно активно жестикулируя, – я и сам иногда удивляюсь памяти органических существ. Когда свалились эти мешки с мясом на своём корыте прямо в комнату с моей любимой зеркальной ловушкой, я был просто вне себя. Сломали эксклюзивный преобразователь, переделали дезинтегратор не пойми во что... А чего только стоит эта полоумная?! Сломала табличку с предупреждением в пресс-камере, разворотила вентилляцию... Я бы, конечно, навёл порядок, но вы сами приказали мне оставаться здесь и обрабатывать всех, кто попробует пробраться дальше...",
    "answers": [
      {
        "id": 535,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 528,
    "text": "– Я не понимаю... – только и смог выдавить Орнас. – Что происходит?\n   Юноша вновь повернулся к спутнице, лицо которой теперь было скорее выжидающим, чем растерянным. Дроид моментально воспользовался этим и сгрёб в охапку джедая, который, тем не менее, ловко выскользнул из жёстких объятий и вновь отступил на несколько шагов.\n   Яркий зелёный луч прочертил пространство широкой дугой, и на пол с глухим стуком упали две отсечённые руки неожиданно обретённого верного слуги Орнаса. Следующим взмахом светового меча Десвиар снесла НК-63 голову, затем несколько раз полоснула по корпусу. Наконец, она в элегантном жесте подняла свободную руку, и мощный импульс Силы вырвал из оплавленных пробоин искрящиеся внутренности машины.\n   Поверженный дроид рухнул на пол прямо под ноги так и застывшего в изумлении юноши.",
    "answers": [
      {
        "id": 599,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 529,
    "text": "   Как только Орнас убедился, что противник полностью уничтожен, он бросился к раздавленному корпусу TL-3. С отрешённостью перебирая деформированные осколки, юноша наткнулся на тёмно-зелёный фрагмент платы с чипом в форме креста, взял его и протёр от копоти. Джедай сковырнул чип с подложки и покрутил в пальцах, разглядывая на просвет.\n   Что заставило несговорчивого и своенравного дроида ринутся в самоубийственную атаку? Явно не потаённая симпатия к Орнасу или непреодолимый приступ альтруизма.\n   Юноша вытащил ставший бесполезным наушник переводчика из уха и распрямил фиксирующую его раньше проволоку. Сам не зная зачем, он потратил уйму времени, пытаясь нанизать на неё чип с тремя обгоревшими контактами. Когда ничего не вышло, джедай просто обмотал миниатюрную деталь проводом, словно пряча в коконе, и прикрепил свободным концом к рукояти светового меча.",
    "answers": [
      {
        "id": 628,
        "text": "Дальше",
        "lua_do": "function lua_do()\nUpLine = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"amulet\", -1, 1)\nend",
        "text": "Антидостижение \"амулет\"",
        "id": 529,
        "calculate": true
      }
    ]
  },
  {
    "id": 530,
    "text": "– Восклицание: Ты испортил всю интригу! – раздался скрежет старого вокабуляра протокольного дроида.– Глупый маленький пенёк, вздумал помогать этим мешкам с мясом?\n   В механических руках буквально из ниоткуда появились два бластера и в ту же секунду обрушили шквальный огонь в направлении юноши. TL-3 поспешил к ближайшему укрытию, благо НК-63 не посчитал его приоритетной целью.\n– Оставайся там, – крикнул джедай, защищаясь.\n   Ловкости и мастерству дроида-убийцы можно было только позавидовать: он мгновенно разорвал дистанцию и вёл прицельную стрельбу, оставаясь на безопасном расстоянии.",
    "answers": [
      {
        "id": 536,
        "text": "Новый ответ. введите текст",
        "run": [
          536
        ]
      }
    ]
  },
  {
    "id": 531,
    "text": "empty \nуспех в сапёре\nконфликт Десс и TL-3\nподдержать TL-3",
    "answers": [
      {
        "id": 532,
        "text": "– Нет смысла рассуждать о пользе на словах, – громко сказал Орнас, втискиваясь между спорщиками. – TL-3 умеет много такого, что нам не по силам. Уверен, очень скоро нам пригодятся его сканеры, навыки ремонта или что-то такое.\n   Он развернулся к Десвиар, заслоняя от неё дроида, и почувствовал, как она напряглась. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ну... – растерялась Десс.\n– Просто не стоит больше об этом, – Орнас попытался примирительно похлопать девушку по плечу, но она лишь фыркнула и отошла в сторону.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "К итогам"
      }
    ]
  },
  {
    "id": 532,
    "text": "empty\nуспех в сапёре\nконфликт Десс и TL-3\nзабить",
    "answers": [
      {
        "id": 532,
        "text": "– Путь свободен, нужно идти! – громко объявил Орнас, привлекая внимание спорящих. – Десс, TL-3, мне очень нужно, чтобы вы были собраны при проходе через зал.\n   Он махнул рукой в сторону. Десвиар закатила глаза и фыркнула. Дроид, поколебавшись, приблизился к дверям. Лицо Магистра Льерсо не выражало ничего, и Орнас не мог понять, почему наставник даже не попытался отвлечь внимание спорщиков сам.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 533,
    "text": "empty \nуспех в сапёре\nконфликт учителя и TL-3\nподдержать учителя",
    "answers": [
      {
        "id": 532,
        "text": "– Наверное, проще быть частью команды, чем нести ответственность самому, – с нажимом сказал Орнас дроиду. – Но нам, джедаям, сложно понять, как можно переложить собственную ношу на кого-то ещё.\n   Учитель удовлетворённо хмыкнул, а Десвиар громко рассмеялась:\n– И говорит нам об этом мальчишка, взявший на собственное испытание двух взрослых джедаев.\n   TL-3 издал какие-то непереводимые звуки и замер перед дверью. Орнас насупился, но промолчал и первым направился в зал с ловушками.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 534,
    "text": "empty \nуспех в сапёре\nконфликт учителя и TL-3\nподдержать TL-3",
    "answers": [
      {
        "id": 532,
        "text": "– Хотел бы я знать, что такое слаженная работа в большой команде, – произнёс Орнас неожиданно для самого себя. – Интересно, какого это – быть частью чего-то большего. И в храме, и тем более раньше я был изгоем. Не чувствовал поддержки, не видел в людях того света, о котором читал в Кодексе...\n– Мы уже говорили об этом в тот день, когда я согласился обучать тебя, – холодно проговорил учитель, разворачиваясь к двери. – Меньше эмоций, падаван.\n   Наступившую тишину нарушило позвякивание – это TL-3 сделал круг вокруг Орнаса, подмигнул ему индикатором и замер. Десс скорчила недовольною гримасу и первой выскочила в зал с ловушками.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 535,
    "text": "   Мощный удар отбросил Орнаса к стене и едва не переломал рёбра. Приподнявшись на руках, юноша увидел приближающегося дроида, перекатился в сторону и рывком поднялся на ноги.\n– Сомнение: точно, это были не вы, хозяин, – проскрежетал НК-63, меняя направление. – Прошу прощения, но вы подлежите нейтрализации.\n   Уже не вслушиваясь в болтовню не такого уж и протокольного дроида, Орнас схватился рукой за то место, где обычно висела рукоять светового меча. Её там не было.\n   Выругавшись на самого себя за невнимательность, юноша начал спешно искать пропавшее оружие, спасаясь от преследующего его дроида за грудой обломков.",
    "answers": [
      {
        "id": 536,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 536,
    "text": "   \"Точно, дроид!\", – догадался Орнас и сразу же разглядел пропажу. Примагниченный к корпусу НК-63 световой меч блеснул в свете ярких ламп и устремился в вытянутую вперёд ладонь джедая. Вспыхнул голубой луч, и Орнас встал в оборонительную стойку.\n– Утверждение: Это совсем меняет дело, – раздался скрежет старого вокабуляра. – Разумно будет сменить тактику.\n   В механических руках буквально из ниоткуда появились два бластера и в ту же секунду обрушили шквальный огонь в направлении юноши. Ловкости и мастерству дроида можно было только позавидовать: он мгновенно разорвал дистанцию и вёл прицельную стрельбу, оставаясь на безопасном расстоянии.",
    "answers": [
      {
        "lua_text": "function lua_text()\n\nstyle = style or 1\n\nfightStage = 1\n\nlocal text1 = (style == 3 and \"<s>\n   Подчиняясь инстинктам, Орнас несколькими рывками добрался до обломков и скрылся за ними, наблюдая, как осторожно меняет свою позицию дроид.\" or \"\")\n\nlocal text = \"<s>\n   Юноша прикинул, что могло помешать ему в сражении. \"\nlocal a = 0\n\nif penalties.closeFight == 1 then\n  text = text .. \"Руки ослабели – можно забыть о мощных силовых приёмах. \"\n  a = 1\nelse end\n\nif penalties.accuracy == 1 then\n  text = text .. \"Из-за дрожи в руках точность движений может подвести в самый неподходящий момент. \"\n  a = 1\nelse end\n\n\nif penalties.legStrenght == 1 then\n  text = text .. ( a == 1 and \"На удары ногами тоже можно не рассчитывать. \" or \"Ноги ослабели – можно забыть об ударах ногами. \" )\n  a = 1\nelse end\n\nif penalties.stamina == 1 then\n  text = text .. \"Лучше не затягивать бой, при такой усталости это может привести к ошибкам. \"\n  a = 1\nelse end\n\nif penalties.reaction == 1 then\n  text = text .. \"Джедайская острота восприятия притупилась, и надеяться на неё было бы теперь слишком рискованно. \"\n  a = 1\nelse end\n\nif penalties.speed == 1 then\n  text = text .. ( a == 1 and \"Ещё придётся отказаться от привычного быстрого стиля. \" or \"От привычной ставки на скорость и быстрые атаки придётся отказаться. \")\n  a = 1\nelse end\n\nif grenade == 1 then\n   text = text ..  ( a == 1 and \"То, что с пояса исчезла граната, Орнаса даже не удивило. \" or \"Хлопок по поясу подтвердил опасения Орнаса – гранаты там уже не было. \")\nelse end\n\nif grenade == 2 then\n   text = text ..  ( a == 1 and \"То, что с пояса исчезли гранаты, Орнаса даже не удивило. \" or \"Хлопок по поясу подтвердил опасения Орнаса – гранат там уже не было. \")\nelse end\n\nreturn text1 .. (a == 1 and text .. \"Значит, нужно быстро учиться действовать в сложившихся обстоятельствах. \" or \"<s>\n   Юноша попытался прикинуть, что могло бы помешать ему в сражении, но ощущал себя в идеальной форме и мог действовать исходя из ситуации, не задумываясь об ограничениях. \") .. \"Орнас понимал, что для победы сейчас потребуется действовать с максимальной эффективностью. Не стоит забывать и про возможности Силы, хотя \"\nend",
        "super_calculate": false,
        "id": 536,
        "text": "Текст с состоянием перед боем",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n--authorHelp = 1\n--alphaTest = alphaTest or 0\n--return alphaTest ~= 1\nreturn true \nend",
        "super_calculate": false,
        "id": 536,
        "text": "Ран с общими приёмами на весь бой (537) и ран со сменой штрафов",
        "calculate": true
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\ntext = nil\n\n--для первого стиля нет штрафов от повторного использования одних и тех же приемов\n-- \n--для третьего стиля нет фазы дальнего боя, сразу в укрытие\nreturn true\nend",
        "super_calculate": false,
        "id": 536,
        "calculate": true,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 539,
        "text": "Отражать выстрелы, стоя на месте",
        "lua_if": "function lua_if()\nreturn style ~= 3\nend",
        "lua_do": "function lua_do()\n-- штраф при -точность движений и - концентрация (рана на руке, укусы, газ)\nend"
      },
      {
        "id": 540,
        "text": "Сделать рывок к ближайшему укрытию",
        "lua_if": "function lua_if()\nreturn style ~= 3\nend",
        "lua_do": "function lua_do()\n-- штраф при - скорость и - концентрации (рана на ноге, укусы, газ)\nend"
      },
      {
        "id": 541,
        "text": "Сократить дистанцию и атаковать",
        "lua_if": "function lua_if()\nreturn style ~= 3\nend",
        "lua_do": "function lua_do()\n-- штраф при -скорость и - к точности движений (рана на ноге, рана на руке)\nend"
      },
      {
        "id": 542,
        "text": "Метнуть световой меч, используя Силу",
        "lua_if": "function lua_if()\nreturn style ~= 3\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nhkFight.forcePoints = hkFight.forcePoints - 1\nend"
      },
      {
        "id": 543,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- переход сразу к ближнему бою для 3 стиля\nreturn style == 3\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ]
      },
      {
        "lua_if": "function lua_if()\n\npenalties.closeFight = penalties.closeFight or 0\n\npenalties.legStrenght = penalties.legStrenght or 0\n\npenalties.stamina = penalties.stamina or 0\n \npenalties.reaction = penalties.reaction or 0\n\npenalties.speed = penalties.speed or 0\n\npenalties.accuracy = penalties.accuracy or 0\n\nreturn penalties.closeFight == 1 and\npenalties.legStrenght == 1 and penalties.stamina == 1 and \npenalties.reaction == 1 and\npenalties.speed == 1 and\npenalties.accuracy == 1\nend",
        "super_calculate": false,
        "id": 560,
        "calculate": true,
        "lua_do": "function lua_do()\nnewAchieve(\"badFeeling\",-1,1)\nend",
        "text": "Выдать достижение"
      },
      {
        "lua_if": "function lua_if()\nreturn \nend",
        "lua_do": "function lua_do()\ng.achievements.badFeeling = 0\nend",
        "text": "Новый ответ. введите текст",
        "id": 536,
        "comment": false
      }
    ]
  },
  {
    "id": 537,
    "text": "Страница для вызова ответов на время боя с НК: общие приёмы, способности Силы.\nСюда же воткнуть мерж с описанием, сколько ещё концентрации на приёмы силы\n",
    "answers": [
      {
        "id": 537,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n\npenalties.reaction = penalties.reaction or 0\nhkFight = hkFight or {}\nhkFight.forcePoints = (hkFight.forcePoints or (style == 2 and 3 or 2) - penalties.reaction)\nhkFight.forcePoints = hkFight.forcePoints < 0 and 0 or hkFight.forcePoints\n\n\nlocal p = g.current_id\nlocal text = \"\"\nif p == 536 or p == 530 then\n text = (hkFight.forcePoints == 3 and \"концентрации джедая сейчас хватило бы всего на несколько приёмов.\") or (hkFight.forcePoints == 2 and \"концентрации джедая сейчас хватило бы всего на пару приёмов.\") or (hkFight.forcePoints == 1 and \"концентрации джедая сейчас хватило бы всего на один приём.\") or (hkFight.forcePoints == 0 and \"концентрации джедая сейчас не хватило бы даже на простейший приём.\")\ntext = (style == 3 and text .. \"<s>\n   Дождавшись удобного момента, джедай стремительно ринулся из укрытия на противника. Световой меч рассёк воздух и с яркой вспышкой ударил в клинок успевшего подготовиться к ближнему бою НК-63.\" or text)\nelse\n text = (hkFight.forcePoints == 3 and \"Концентрации джедая сейчас хватило бы всего на несколько приёмов Силы.\") or (hkFight.forcePoints == 2 and \"Концентрации джедая сейчас хватило бы всего на пару приёмов Силы.\") or (hkFight.forcePoints == 1 and \"Концентрации джедая сейчас хватило бы всего на один приём Силы.\") or (hkFight.forcePoints == 0 and \"Концентрации джедая сейчас не хватило бы даже на простейший приём Силы.\")\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 545,
        "text": "Атаковать дроида молниями Силы",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 2\nforce_ab = force_ab or 0\n\nreturn hkFight.forcePoints > 0 and g.current_id ~= 536 and force_ab == 3\nend",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 2\nachAbsolute = (achAbsolute or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 538,
    "text": "   Они проследовали в центр помещения. Туда, к конторке в центре зала, кажется, направлялся TL-3, однако видно его нигде не было.\n– Восклицание: Скорее, вашему другу плохо! – заскрежетал над самым ухом Орнаса невесть откуда взявшийся протокольный дроид. – Я НК-63, я помогу вам, хозяин.\n   Он несколько раз дёрнул юношу за рукав, показывая рукой куда-то за стеллажи, затем неожиданно ловко двинулся туда сам.\n   Боковым зрением Орнас успел заметить лишь яркую голубую вспышку, и в ту же секунду световой меч учителя, вращаясь, настиг скрывающегося за поворотом дроида. Тот каким-то невообразимым образом успел развернуться, принять боевую стойку и заблокировать бросок неожиданно появившимся в руках виброклинком.\n   Магистр Льерсо без лишних церемоний с помощью Силы обрушил на беглеца весь ряд шкафов и, пока тот выбирался из-под завала, легко отсёк вернувшимся в ладонь клинком все механические конечности.\n– Нужно поговорить, – спокойно обратился джедай к дроиду, пока Орнас судорожно ощупывал пояс в поисках собственного меча.",
    "answers": [
      {
        "id": 674,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 539,
    "text": "   ",
    "answers": [
      {
        "id": 539,
        "text": "Отражать выстрелы, стоя на месте\n—- штраф при -точность движений и — концентрация (рана на руке, укусы, газ)",
        "lua_if": "function lua_if()\n\nend",
        "comment": true
      },
      {
        "id": 539,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif penalties.accuracy == 1 and  penalties.reaction == 1 then\n  text = --неудача из-за штрафа к точности движений и сосредоточенности.\"\n   \"Орнас остановился на полусогнутых ногах, вращая мечом перед собой. Джедай с огромным трудом фокусировался на каждом выстреле, а движения непослушных рук выходили прерывистыми и неуклюжими.<s>\n   Оценив слабость противника, дроид усилил натиск. Бластерные заряды летели с почти невозможными траекториями и наконец один из них ужалил Орнаса прямо в запястье сжимающей оружие руки.\"\n\nelseif penalties.accuracy == 1 then\n  text = --Неудача из-за штрафа к точности движений.\n\"Орнас остановился на полусогнутых ногах, сосредоточено вращая мечом перед собой. Непослушные руки едва поспевали за цепким вниманием юноши, из-за чего движения выходили прерывистыми и неуклюжими.<s>\n   Оценив слабость противника, дроид усилил натиск. Бластерные заряды летели с почти невозможными траекториями и наконец один из них ужалил Орнаса прямо в запястье сжимающей оружие руки.\"\n\nelseif penalties.reaction == 1 then\n  text = --Неудача из-за штрафа к сосредоточенности\n   \"Орнас остановился на полусогнутых ногах, плавно вращая мечом перед собой. Джедай с огромным трудом фокусировался на каждом выстреле, всё более беспорядочно взмахивая клинком во все стороны.<s>\n   Оценив слабость противника, дроид усилил натиск. Бластерные заряды летели с почти невозможными траекториями и наконец один из них ужалил Орнаса прямо в запястье сжимающей оружие руки.\"\n\nelse\n  text = -- Успех.\"\n  \"Орнас остановился на полусогнутых ногах, сосредоточено вращая мечом перед собой. Бластерные выстрелы как будто сами притягивались плавными движениями клинка и отражались во все стороны, не причиняя вреда джедаю.<s>\n   Довольно скоро НК-63 оценил неэффективность тактики. Он сменил бластеры на виброклинок и молниеносно бросился на юношу в ближнем бою.\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.accuracy == 1 or penalties.reaction == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 543,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.accuracy == 0 and penalties.reaction == 0\nend",
        "lua_do": "function lua_do()\n--успех, переход к фазе атаки в ближнем бою\nend"
      }
    ]
  },
  {
    "id": 540,
    "text": "   ",
    "answers": [
      {
        "id": 540,
        "text": "К ближайшему укрытию\n—- штраф при — скорость и — концентрации (рана на ноге, укусы, газ)",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 540,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif penalties.speed == 1 and  penalties.reaction == 1 then\n  text = --Неудача из-за штрафа к скорости и сосредоточенности.\"\n\"Орнас направился к обломкам, с трудом фокусируясь на непрекращающемся шквале бластерного огня.<s>\n   Юноша не успевал ни вовремя замечать, ни уверачиваться от бесконечных энергетических импульсов. Всего в нескольких шагах от укрытия один выстрел всё-таки достиг нерасторопную цель и ужалил сжимающую меч руку джедая.\"\n\nelseif penalties.speed == 1 then\n  text = --Неудача из-за штрафа скорости.\"\n\"Не упуская из виду противника, Орнас метнулся к обломкам, заторможенно уворачиваясь от непрекращающегося огня.<s>\n   Ослабленные ноги не поспевали за цепким вниманием юноши. Когда до укрытия оставалось совсем чуть-чуть, один выстрел достиг нерасторопную цель и ужалил сжимающую меч руку джедая.\"\n\nelseif penalties.reaction == 1 then\n  text = --Неудача из-за штрафа к сосредоточенности.\"\n\"Орнас метнулся к обломкам, с трудом фокусируясь на непрекращающемся шквале бластерного огня.<s>\n   До укрытия оставалось совсем чуть-чуть, когда внимание юноши в очередной раз упустило один из выстрелов. Заряд достиг цель и ужалил сжимающую меч руку джедая.\"\n\nelse\n  text = --Успех.\"\n\"Не упуская из виду противника, Орнас метнулся к обломкам, на бегу уворачиваясь от непрекращающегося огня.<s>\n   Укрытие надёжно защищало джедая от бластерных зарядов, поэтому НК-63 вскоре сменил бластеры на виброклинок и молниеносно бросился на юношу в ближнем бою.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.speed == 1 or penalties.reaction == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 543,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.speed == 0 and penalties.reaction == 0\nend",
        "lua_do": "function lua_do()\n--успех, переход к фазе атаки в ближнем бою\nend"
      }
    ]
  },
  {
    "id": 541,
    "text": "   ",
    "answers": [
      {
        "id": 541,
        "text": "Сократить дистанцию и атаковать\n—- штраф при -скорость и — к точности движений (рана на ноге, рана на руке)",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 541,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.speed = penalties.speed or 0\nlocal text = \"\"\nif penalties.accuracy == 1 and  penalties.speed == 1 then\n  text = --Неудача из-за штрафа к точности движений и скорости.\"\n\"Орнас через боль в непослушных ногах направился к противнику, прямо на бегу отражая выстрелы. Дрожащие руки делали движения меча резкими и неуклюжими.<s>\n   Оценив слабость противника, дроид усилил натиск. Бластерные заряды летели с почти невозможными траекториями и наконец один из них ужалил Орнаса прямо в запястье сжимающей оружие руки.\"\n\nelseif penalties.accuracy == 1 then\n  text = --Неудача из-за штрафа к точности движений.\"\n\"Орнас молниеносно бросился на противника, на бегу отражая выстрелы. Непослушные руки делали движения меча резкими и неуклюжими.<s>\n   Оценив слабость противника, дроид усилил натиск. Бластерные заряды летели с почти невозможными траекториями и наконец один из них ужалил Орнаса прямо в запястье сжимающей оружие руки.\"\nelseif penalties.speed == 1 then\n  text = --Неудача из-за штрафа к скорости.\"\n\"Орнас через боль в непослушных ногах направился к противнику, прямо на бегу отражая выстрелы точными движениями.<s>\n   Дроид без труда вновь разорвал дистанцию и лишь усилил огонь. Бластерные заряды летели с почти невозможными траекториями и наконец один из них ужалил Орнаса прямо в запястье сжимающей оружие руки.\"\n\nelse\n  text = --Успех.\"\n\"Орнас молниеносно бросился на противника, прямо на бегу отражая выстрелы быстрыми и точными движениями.<s>\n   Всего через несколько мгновений его световой меч с яркой вспышкой ударил в клинок успевшего подготовиться к ближнему бою НК-63.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.speed = penalties.speed or 0\nreturn penalties.accuracy == 1 or penalties.speed == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 543,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.speed = penalties.speed or 0\nreturn penalties.accuracy == 0 and penalties.speed == 0\nend",
        "lua_do": "function lua_do()\n--успех, переход к фазе атаки в ближнем бою\nend"
      }
    ]
  },
  {
    "id": 542,
    "text": "   Увернувшись от первых выстрелов, Орнас запустил вращающийся меч по широкой дуге, направляя его с помощью Силы прямо в противника. Мгновенно оценив ситуацию, дроид прекратил огонь и поспешил укрыться в обломках.\n   Оставшийся на какое-то время безоружным юноша не стал терять время и несколькими нечеловечески длинными прыжками настиг врага. В то же мгновение световой меч вновь оказался в руках джедая и с яркой вспышкой ударил в клинок успевшего подготовиться к ближнему бою НК-63.",
    "answers": [
      {
        "id": 543,
        "text": "Дальше",
        "lua_do": "function lua_do()\n--успех, переход к фазе атаки в ближнем бою\nend"
      }
    ]
  },
  {
    "id": 543,
    "text": "   Привыкший чувствовать своё безоговорочное превосходство в ближнем бою, Орнас был неприятно удивлён. Мало того, что клинок НК-63 выдерживал луч светового меча, так ещё и сам дроид оказался весьма искусным фехтовальщиком.\n   После первого размена ударами Орнас оказался в позиции, выгодной для атаки.\n   ",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nfightStage = 2\nend",
        "text": "Успех в фазе дальнего боя, переход в фазу атаки\n\nДальний бой\n   ↓\nАтака\n   ↓\nСкрещенные мечи\n   ↓\nЗащита\n   ↓\nВыход из угла\n   ↓\nАтака (при повторном использовании приёма - фейл, исключение приёмы Силы)\n   ↓\nРешающий удар",
        "id": 543,
        "calculate": true
      },
      {
        "id": 546,
        "text": "Выверенная точная атака",
        "lua_if": "function lua_if()\n-- штраф при - к точности движений (рана на руке)\nreturn true\nend"
      },
      {
        "id": 547,
        "text": "Серия быстрых атак",
        "lua_if": "function lua_if()\n--штраф при - к скорости (рана на ноге)\nreturn true\nend"
      },
      {
        "id": 548,
        "text": "Осторожная атака",
        "lua_if": "function lua_if()\n-- штраф при - к выносливости или - к сосредоточенности (укусы змей)\n--нет штрафа от характеристик для третьего стиля\nreturn true\nend"
      },
      {
        "id": 549,
        "text": "Атака с использованием Силы",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nreturn hkFight.forcePoints > 0\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints - 1 or 1\nend"
      }
    ]
  },
  {
    "id": 544,
    "text": "   ",
    "answers": [
      {
        "id": 544,
        "text": "неудача в бою с НК, переход к сцене поражения\nЕсли есть бонус ярости — описание срабатывания и переход к победной странице\nЕсли есть бонус наручей (bracer == 1) — описание срабатывания, переход к следующей фазе\nЕсли линия с TL-3 (UpLine == 4) то либо сцена самопожертвования, либо сцена боевого протокола с выживанием",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\nbracer = bracer or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\n\n\nlocal a = 1\n  if bracer ~= 1 and force_ab ~= 2 and UpLine ~= 4 then\n-- стандартное поражение\n    a = (UpLine == 1 and 1) or\n    (UpLine == 2 and 2) or\n    (UpLine == 7 and 4) or\n    (UpLine == 8 and 3) or a\n     neutralized = 1\n   elseif UpLine == 4 then\n     a = droid_has_ad_chip == 1 and 4 -- условие бонуса дроида, чтобы он выжил\n or 1\n\n elseif force_ab == 2 then --боевая ярость\n    a = (UpLine == 1 and 1) or\n    (UpLine == 2 and 2) or\n    (UpLine == 7 and 4) or\n    (UpLine == 8 and 8) or a\n   \n  elseif bracerUsed == 1 then\n--повторный фейл с наручами\n  neutralized = 1\n\nend\nupLineFinal = a\n\nif UpLine == 8 then\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 544,
        "calculate": true
      },
      {
        "id": 544,
        "text": "Вскрикнув от боли, Орнас выронил рукоять меча и схватился за поражённую руку.\n– Сожаление: Сопротивление было бессмысленным, хозяин, – услышал юноша механический голос прямо возле себя. – Поздравляю, теперь вы нейтрализованы.\n   Джедай ощутил кожей лёгкое покалывание оглушающего заряда и мешком рухнул на пол. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку безвольное тело юноши и зашагал вверх по винтовой лестнице.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn bracer ~= 1 and force_ab ~= 2 and UpLine == 1\n-- стандартный текст поражения (соло)\n\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Вскрикнув от боли, Орнас выронил рукоять меча и схватился за поражённую руку.\n– Сожаление: Сопротивление было бессмысленным, хозяин, – услышал юноша механический голос прямо возле себя. – Поздравляю, теперь вы нейтрализованы.\n   Джедай ощутил кожей лёгкое покалывание оглушающего заряда и мешком рухнул на пол. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку безвольные тела обоих спутников и направился к винтовой лестнице.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn bracer ~= 1 and force_ab ~= 2 and (UpLine == 2 or UpLine == 8)\n-- стандартный текст поражения (с Десс) или с учителем (Десс свинтила, TL-3 заперт)\n\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Вскрикнув от боли, Орнас выронил рукоять меча и схватился за поражённую руку.\n– Сожаление: Сопротивление было бессмысленным, хозяин, – услышал юноша механический голос прямо возле себя. – Поздравляю, теперь вы нейтрализованы.\n   Но в этот миг откуда-то выскочил TL-3, издавая безумный писк. На полном ходу он влетел в дроида-убийцу и залил его ногу потоком плазмы сварочного аппарата. НК-63 подкосился, но устоял и в следующую секунду попытался просто раздавить смелого астромеханика. Но тот уже откатился в сторону, выпустив в противника струю машинного масла. Поскользнувштсь на луже, дроид-убийца потерял равновесие и упал.\n   Сверкнул синий луч, и Орнас, перехвативший рукоять меча здоровой рукой, поразил противника несколькими быстрыми ударами.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn (UpLine == 4 or UpLine == 7) and droid_has_ad_chip == 1 \n-- текст победы с бонусом TL-3\n\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Вскрикнув от боли, Орнас выронил рукоять меча и схватился за поражённую руку.\n– Сожаление: Сопротивление было бессмысленным, хозяин, – услышал юноша механический голос прямо возле себя. – Поздравляю, теперь вы нейтрализованы.\n   Но в этот миг откуда-то выскочил TL-3, издавая безумный писк. На полном ходу он влетел в дроида-убийцу и залил его ногу потоком плазмы сварочного аппарата. НК-63 подкосился, но устоял и в следующую секунду просто наступил на смелого астромеханика, раздавив его всем своим весом.\n   На фоне дыма и искр под скрежет металла сверкнул синий луч светового меча – Орнас сумел воспользоваться моментом, перехватил рукоять здоровой рукой и поразил противника несколькими быстрыми ударами.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn (UpLine == 4 or UpLine == 7) and droid_has_ad_chip ~= 1 \n-- текст победы с жертвой TL-3\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "Джедай взвыл от боли, но лишь сильнее сжал рукоять меча. Кровь из раны потекла сильнее, почти обжигая начинающую неметь ладонь. Юноша не мог, да и не хотел сдерживать вскипающую внутри него ярость.\n   Будто отдав управление кому-то более умелому, Орнас лишь отстранённо наблюдал за безжалостной точностью движений собственного тела, казавшемуся до этого ужасно ограниченным. Не чувствуя боли или усталости, джедай в дерзком натиске набросился на опешевшего и уже опустившего клинок дроида. Всего за несколько мгновений Орнас обратил корпус противника в груду искрящихся обломков.\n   Когда гнев спал, юноша обнаружил себя сидящим прямо на полу. Обе его руки были перепачканы засохшей кровью, но вместо глубокой раны на кисти он обнаружил лишь еле заметный тонкий шрам. Орнас чувствовал, что если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху за спиральной лестницей. И что плата за эти ответы может быть непомерно высокой. Он вздохнул и сделал первый шаг.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn UpLine == 1 and force_ab == 2 and (bracer ~= 1 or bracerUsed ~= 0)\n-- победа на ярости соло. Сделать переходы на нужные ветки после победы\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "Джедай взвыл от боли, но лишь сильнее сжал рукоять меча. Кровь из раны потекла сильнее, почти обжигая начинающую неметь ладонь. Юноша не мог, да и не хотел сдерживать вскипающую внутри него ярость.\n   Будто отдав управление кому-то более умелому, Орнас лишь отстранённо наблюдал за безжалостной точностью движений собственного тела, казавшемуся до этого ужасно ограниченным. Не чувствуя боли или усталости, джедай в дерзком натиске набросился на опешевшего и уже опустившего клинок дроида. Всего за несколько мгновений Орнас обратил корпус противника в груду искрящихся обломков.\n   Когда гнев спал, юноша обнаружил себя сидящим прямо на полу. Обе его руки были перепачканы засохшей кровью, но вместо глубокой раны на кисти он обнаружил лишь еле заметный тонкий шрам.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn UpLine ~= 1 and UpLine ~= 4 and UpLine ~= 7 and force_ab == 2 and (bracer ~= 1 or bracerUsed ~= 0)\n-- победа на ярости со спутниками. Сделать переходы на нужные ветки после победы\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "К счастью, спрятанные под рукавами наручи отразили бластерный импульс.\n– Удивление: Переоценка проведена, хозяин, – произнёс НК-63. – В следующий раз кортозис Вас не спасёт.\n   Пока дроид всматривался в блестящий под прожённой тканью металл, Орнас успел беспрепятственно сократить дистанцию. Но к этому моменту НК-63 успел незаметно для юноши убрать бластеры, а в его руке уже появился вибромеч.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed ~= 1 and fightStage == 1\n\n--наручи спасают, стадия 1\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "К счастью, спрятанные под рукавами наручи отразили удар и спасли руку от серьёзных повреждений. Болезненный ушиб – несущественная плата за допущенную ошибку.\n– Удивление: Переоценка проведена, хозяин, – произнёс НК-63. – В следующий раз кортозис Вас не спасёт.\n   Пока дроид всматривался в блестящий под порванной тканью металл, Орнас успел вновь атаковать. На этот раз он почти достиг цели, но НК-63 в последний миг сумел заблокировать удар неизвестно откуда взявшимся вторым мечом.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed ~= 1 and fightStage == 2\n\n--наручи спасают, стадия 2\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "К счастью, спрятанные под рукавами наручи отразили удар и спасли руку от серьёзных повреждений. Болезненный ушиб – несущественная плата за допущенную ошибку.\n– Удивление: Переоценка проведена, хозяин, – произнёс НК-63. – В следующий раз кортозис Вас не спасёт.\n   Пока дроид всматривался в блестящий под порванной тканью металл, Орнас успел без всякого сопротивления нанести удар и сумел отсечь одну из рук противника, лишив того второго меча.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed ~= 1 and fightStage == 3\n\n--наручи спасают, стадия 3\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "К счастью, спрятанные под рукавами наручи отразили удар и спасли руку от серьёзных повреждений. Болезненный ушиб – несущественная плата за допущенную ошибку.\n– Удивление: Переоценка проведена, хозяин, – произнёс НК-63. – В следующий раз кортозис Вас не спасёт.\n   Пока дроид всматривался в блестящий под порванной тканью металл, Орнас успел прийти в себя и приготовился к ещё одной попытке закончить бой.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed ~= 1 and fightStage == 6\n\n--наручи спасают, стадия 6\n\nend",
        "merge": true
      },
      {
        "id": 866,
        "text": "К счастью, спрятанные под рукавами наручи отразили удар и спасли руку от серьёзных повреждений. Болезненный ушиб – несущественная плата за допущенную ошибку.\n– Удивление: Переоценка проведена, хозяин, – произнёс НК-63. – В следующий раз кортозис Вас не спасёт.\n   Пока дроид всматривался в блестящий под порванной тканью металл, Орнас успел занять выгодную позицию и приготовился провести ещё одну атаку.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed ~= 1 and fightStage ~= 1 and fightStage ~= 2 and fightStage ~= 3 and fightStage ~= 6\n\n--наручи спасают, все остальные стадии, кроме 1,2,3 и 6\n\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "На этот раз удар пришёлся по незащищённому наручами участку руки, и Орнас, вскрикнув от боли, выронил рукоять меча.\n– Сожаление: Сопротивление было бессмысленным, хозяин, – услышал юноша механический голос прямо возле себя. – Поздравляю, теперь вы нейтрализованы.\n   Джедай ощутил кожей лёгкое покалывание оглушающего заряда и мешком рухнул на пол. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку безвольное тело юноши и зашагал вверх по винтовой лестнице.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and UpLine ~= 2 and UpLine ~= 8 and bracer == 1 and bracerUsed == 1\n\n--наручи не спасают при втором фейле, соло\n\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "На этот раз удар пришёлся по незащищённому наручами участку руки, и Орнас, вскрикнув от боли, выронил рукоять меча.\n– Сожаление: Сопротивление было бессмысленным, хозяин, – услышал юноша механический голос прямо возле себя. – Поздравляю, теперь вы нейтрализованы.\n   Джедай ощутил кожей лёгкое покалывание оглушающего заряда и мешком рухнул на пол. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку оба безвольных тела и зашагал вверх по винтовой лестнице.",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 1 and bracer == 1 and bracerUsed == 1\n\n--наручи не спасают при втором фейле, не соло\n\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and (bracer ~= 1 or bracerUsed == 1)\n\n--сливает (наручи не спасают при втором фейле)\n\nend",
        "lua_do": "function lua_do()\nif UpLine == 8 then\n  TL3lost = 1\nend\nend",
        "text": "Дальше",
        "id": 575,
        "merge": false
      },
      {
        "lua_do": "function lua_do()\nnewAchieve(\"secondChance\",1,1)\nend",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed ~= 1\n\n--наручи спасают\n\nend",
        "super_calculate": false,
        "id": 544,
        "text": "Выдать достижение",
        "calculate": true,
        "merge": false
      },
      {
        "lua_do": "function lua_do()\nnewAchieve(\"loosedChance\",-1,1)\nend",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 1 and bracerUsed == 1\n\n--наручи не спасают повторно\n\nend",
        "super_calculate": false,
        "id": 544,
        "text": "Выдать достижение",
        "calculate": true,
        "merge": false
      },
      {
        "lua_do": "function lua_do()\nnewAchieve(\"tooTough2\",-1,1)\nend",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab ~= 2 and UpLine ~= 4 and UpLine ~= 7 and bracer == 0\n\n--поражение без наручей, ярости и TL-3\n\nend",
        "super_calculate": false,
        "id": 544,
        "text": "Выдать достижение",
        "calculate": true,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn bracer == 1 and bracerUsed ~= 1 and fightStage == 1\n\n--наручи спасают на стадии 1\n\nend",
        "id": 543,
        "text": "Дальше",
        "lua_do": "function lua_do()\nbracerUsed = 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn bracer == 1 and bracerUsed ~= 1 and fightStage == 2\n\n--наручи спасают на стадии 2\n\nend",
        "id": 550,
        "text": "Дальше",
        "lua_do": "function lua_do()\nbracerUsed = 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn bracer == 1 and bracerUsed ~= 1 and (fightStage == 3 or fightStage == 4 or fightStage == 5)\n\n--наручи спасают на стадии 3,4,5\n\nend",
        "id": 565,
        "text": "Дальше",
        "lua_do": "function lua_do()\nbracerUsed = 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nif bracer == 1 and bracerUsed ~= 1 and fightStage == 6 then \n  bracerUsed = 1\nend\n\nreturn bracer == 1 and bracerUsed ~= 1 and fightStage == 6\n\n--наручи спасают на стадии 6\n\nend",
        "lua_do": "function lua_do()\nbracerUsed = 1\nend",
        "id": 584,
        "text": "Дальше",
        "run": [
          584
        ],
        "merge": false
      },
      {
        "lua_do": "function lua_do()\nnewAchieve(\"littleDetail\",1,1)\nend",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn (bracer ~= 1 or bracerUsed == 1) and (UpLine == 4 or UpLine == 7) and droid_has_ad_chip == 1\n\n--дроид спасает с бонусом\n\nend",
        "super_calculate": false,
        "id": 544,
        "text": "Дальше",
        "calculate": true,
        "merge": false
      },
      {
        "id": 627,
        "text": "Дальше",
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn (bracer ~= 1 or bracerUsed == 1) and (UpLine == 4 or UpLine == 7) and droid_has_ad_chip == 1\n\n--дроид спасает с бонусом\n\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn (bracer ~= 1 or bracerUsed == 1) and (UpLine == 4 or UpLine == 7) and droid_has_ad_chip == 0\n\n--дроид спасает с жертвой\n\nend",
        "lua_do": "function lua_do()\nTL3lost = 1\nend",
        "text": "Дальше",
        "id": 529,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab == 2 and UpLine ~= 4 and UpLine ~= 7  and (bracer ~= 1 or bracerUsed == 1)\n\n--побеждает на ярости, возврат в соло\n\nend",
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nafterRage = 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab == 2 and UpLine == 2  and (bracer ~= 1 or bracerUsed == 1)\n\n--побеждает на ярости, возврат к Десс\n\nend",
        "id": 609,
        "text": "Дальше",
        "lua_do": "function lua_do()\nafterRage = 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\nreturn force_ab == 2 and UpLine == 8 and (bracer ~= 1 or bracerUsed == 1)\n\n--побеждает на ярости, возврат ко всем\n\nend",
        "lua_do": "function lua_do()\nafterRage = 1\nend",
        "text": "Дальше",
        "id": 856,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n--дубль предыдущего?\n\nbracer = bracer or 0\nbracerUsed = bracerUsed or 0\nforce_ab = force_ab or 0\nfightStage = fightStage or 1\ndroid_has_ad_chip = droid_has_ad_chip or 0\n\n--return force_ab == 2 and UpLine == 8 and (bracer ~= 1 or bracerUsed == 1)\n\n--побеждает на ярости, возврат ко всем\n\nend",
        "id": 856,
        "text": "Дальше",
        "lua_do": "function lua_do()\nafterRage = 1\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 545,
    "text": "   Орнас резко вскинул руку и с его пальцев сорвался в направлении дроида всполох голубых молний Силы. Мощные импульсы согревали и слегка щекотали ладонь. Лицо юноши перекосилось в жутковатой гримасе – ни с чем не сравнимое чувство безграничной мощи приводило в эйфорию.\n   Оплавленный мощными разрядами НК-63 рухнул на пол перед джедаем. Кажется, дроид пытался что-то сказать напоследок, но Орнас был слишком поглощён и не обратил внимания. Он продолжал истязать молниями искорёженный корпус поверженного противника до тех пор, пока сам не свалился рядом от истощения.\n",
    "answers": [
      {
        "id": 545,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\n  if UpLine == 1 then\n    text = \"   Понемногу прийдя в себя, джедай с ужасом оглядел остатки дроида и поспешил покинуть помещение, быстрым шагом направившись к винтовой лестнице. Орнас чувствовал, что если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху. И что плата за эти ответы может быть непомерно высока. Он вздохнул и сделал первый шаг.\"\n  elseif UpLine == 2 then\n    text = \"   Понемногу прийдя в себя, джедай с ужасом оглядел остатки дроида и порадовался, что по крайней мере никто не видел его во время этой безумной расправы. Ведь никто не видел? Он напряжённо заозирался, но Десвиар, видимо, ещё не пришла в чувства.\"\n  elseif UpLine == 4 then\n    text = \"– Этот приём оказался весьма эффективным, – отозвался выкатившийся из укрытия TL-3. – Хотя кажется, ты несколько увлёкся.<s>\n   Орнас растерянно взглянул на свои руки, затем на остатки противника.\"\nelseif UpLine == 4 then\n    text = \"   Понемногу прийдя в себя, джедай с ужасом оглядел остатки дроида и порадовался, что по крайней мере никто не видел его во время этой безумной расправы. Ведь никто не видел? Он напряжённо заозирался, но учитель, видимо, ещё не пришёл в чувства.\"\n  else\n  end\n\nreturn text\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\nupLineFinal = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nafterLightning = 1\nend",
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 1\nend",
        "id": 575
      },
      {
        "lua_do": "function lua_do()\n-- сделать направление на нужную страницу!!!\nafterLightning = 1\nend",
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 2\nend",
        "id": 609
      },
      {
        "id": 631,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend",
        "lua_do": "function lua_do()\n-- сделать направление на нужную страницу!!!\n\nafterLightning = 1\nend"
      },
      {
        "lua_do": "function lua_do()\n-- сделать направление на нужную страницу!!!\nafterLightning = 1\n\nend",
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8\nend",
        "id": 856
      },
      {
        "super_calculate": false,
        "id": 545,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nachAbsolute = achAbsolute or 0\n\nif achAbsolute == 6 then\n   newAchieve(absolutePower, 1, 1)\nend\n\nend"
      }
    ]
  },
  {
    "id": 546,
    "text": "   ",
    "answers": [
      {
        "comment": true,
        "id": 546,
        "text": "Выверенная точная атака\nштраф при — к точности движений (рана на руке",
        "lua_if": "function lua_if()\n\nend",
        "merge": false
      },
      {
        "id": 546,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\nlocal text = \"\"\nif penalties.accuracy == 1 then\n  text = --Неудача из-за штрафа к точности движений.\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался затягивать сражение и решил воспользоваться столь явной уязвимостью.<s>\n   Несколько ложных выпадов, затем перевод меча за спиной. Непослушные руки не смогли исполнить приём так, как это задумывал джедай: рука Орнаса прошла слишком близко к лезвию виброклинка противника. В следующее же мгновение тот неуловимым движением поразил кисть юноши.\"\n\nelse\n  text = \"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался затягивать сражение и решил воспользоваться столь явной уязвимостью.<s>\n   Несколько ложных выпадов, затем мгновенный перевод меча. Укол вышел и впрямь идеальным: рука юноши скользнула под самым лезвием виброклинка противника и наверняка поразила бы его самого... Если бы он не заблокировал удар ещё одним неизвестно откуда появившимся мечом.\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 550,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех, переход к фазе скрещенных мечей\nreturn text\nend",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\nreturn penalties.accuracy == 0 \nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\nreturn penalties.accuracy == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 547,
    "text": "   ",
    "answers": [
      {
        "id": 547,
        "text": "Серия быстрых атак\nштраф при — к скорости (рана на ноге)\n",
        "lua_if": "function lua_if()\n\nend",
        "comment": true
      },
      {
        "id": 547,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\n\nlocal text = \"\"\nif penalties.speed == 1 then\n  text = --Неудача из-за штрафа к скорости.\"\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался затягивать сражение и решил воспользоваться столь явной уязвимостью.<s>\n   Джедай провёл несколько ложных выпадов, затем серию атак с разных сторон. Без труда успевая за каждым манёвром юноши, противник тем не менее перевёл клинок в крайнее положение. На непослушных ногах Орнас не успел занять нужную для удара позицию и попытался всё-таки достать врага рискованным движением. В следующее же мгновение клинок дроида легко поразил кисть самонадеянного джедая.\"\n\nelse\n  text = --Успех.\"\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался затягивать сражение и решил воспользоваться столь явной уязвимостью.<s>\n   Джедай провёл несколько ложных выпадов, затем серию стремительных атак с разных сторон. С трудом успевая защищаться, противник наконец перевёл клинок в крайнее положение. Резкий взмах светового меча наверняка поразила бы НК-63... Если бы он не заблокировал удар ещё одним неизвестно откуда появившимся мечом.\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 550,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех, переход к фазе скрещенных мечей\nreturn text\nend",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 0\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 548,
    "text": "   ",
    "answers": [
      {
        "id": 547,
        "text": "Осторожная атака\n—- штраф при — к выносливости или — к сосредоточенности (укусы змей)\n—-нет штрафа от характеристик для третьего стиля\n",
        "lua_if": "function lua_if()\n\nend",
        "comment": true
      },
      {
        "id": 548,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif style == 3 then\ntext =\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался спешить и стараться закончить сражение как можно раньше, а тем более поддаваться на столь явную провокацию.<s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, интуитивно впитывая каждое его движение. Осторожные выпады юноши лишь прощупывали оборону НК-63, не истощая сил привычного к такой тактике джедая. Наконец, дождавшись подходящего момента, Орнас провёл идеальную атаку, которая наверняка поразила бы НК-63... Если бы он не заблокировал удар ещё одним неизвестно откуда появившимся мечом.\"\n\nelseif penalties.stamina == 1 and  penalties.reaction == 1 then\n  text = --Неудача из-за штрафа к выносливости и сосредоточенности.\"\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался спешить и стараться закончить сражение как можно раньше, а тем более поддаваться на столь явную провокацию.<s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и безуспешно пытался сосредоточить своё рассеянное внимание на его движениях. Осторожные выпады юноши лишь прощупывали оборону НК-63, выжимая последние силы из без того изнурённого тела джедая. Окончательно ослабев от затянувшегося поединка и не в силах больше фокусироваться, Орнас неожиданно пропустил очередную атаку, и по его кисти полоснул холодный клинок.\"\n\nelseif penalties.stamina == 1 then\n  text = --\"Неудача из-за штрафа к выносливости.\"\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался спешить и стараться закончить сражение как можно раньше, а тем более поддаваться на столь явную провокацию.<s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и внимательно изучал каждое его движение. Осторожные выпады юноши лишь прощупывали оборону НК-63, выжимая последние силы из без того изнурённого тела джедая. Окончательно ослабев от затянувшегося поединка, Орнас после неудачного манёвра пропустил очередную атаку, и по его кисти полоснул холодный клинок.\"\n\n\nelseif penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к сосредоточенности.\"\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался спешить и стараться закончить сражение как можно раньше, а тем более поддаваться на столь явную провокацию.<s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и безуспешно пытался сосредоточить своё рассеянное внимание на его движениях. Осторожные выпады юноши понемногу изнуряли подготовленное тело джедая. Не в силах сфокусироваться, Орнас неожиданно пропустил очередную атаку, и по его кисти полоснул холодный клинок.\"\n\n\nelse\n\n  text = --Успех.\"\n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался спешить и стараться закончить сражение как можно раньше, а тем более поддаваться на столь явную провокацию.<s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и внимательно изучал каждое его движение. Осторожные выпады юноши лишь прощупывали оборону НК-63, понемногу изнуряя подготовленное тело джедая. Наконец, дождавшись подходящего момента, Орнас провёл идеальную атаку, которая наверняка поразила бы НК-63... Если бы он не заблокировал удар ещё одним неизвестно откуда появившимся мечом.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\n--успех, переход к фазе скрещенных мечей\nreturn text\nend",
        "id": 550,
        "text": "Дальше",
        "lua_if": "function lua_if()\nstyle = style or 1\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn not (penalties.stamina == 0 and penalties.reaction == 0) and style == 3\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ]
      },
      {
        "id": 550,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех, переход к фазе скрещенных мечей\nreturn text\nend",
        "lua_if": "function lua_if()\nstyle = style or 1\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn (penalties.stamina == 0 and penalties.reaction == 0) and style ~= 3\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn (penalties.stamina == 1 or penalties.reaction == 1) and style ~= 3\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 549,
    "text": "   ",
    "answers": [
      {
        "id": 549,
        "text": "Мощная атака с основанием Силы\nСделать два разных текста (?-565)\nlua-text в кнопках!\n",
        "lua_if": "function lua_if()\n\nend",
        "comment": true
      },
      {
        "id": 549,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text =\nnot isHistoryContain(565) and \n\"Дроид как будто специально действовал немного неуклюже, слишком далеко отставляя клинок на каждом замахе. Орнас не собирался затягивать сражение и решил воспользоваться столь явной уязвимостью.<s>\n   Джедай с помощью Силы остановил оружие противника в крайнем положении, буквально на несколько секунд оставив того беззащитным. Этого было достаточно для короткого взмаха светового меча, который наверняка поразил бы НК-63... Если бы он не заблокировал удар ещё одним неизвестно откуда появившимся клинком.\"\n\nor\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не собирался давать противнику время на подготовку нового плана. <s>\n   Джедай чередовал атаки мечом с точными телекинетическими импульсами Силы. Едва сдерживая столь мощный натиск, НК-63 попятился, потерял равновесие и упал в нескольких шагах от Орнаса.\"\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 550,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех в фазе атаки 1, переход к фазе скрещенных мечей\n\nend",
        "lua_if": "function lua_if()\nreturn not isHistoryContain(565)\nend"
      },
      {
        "id": 569,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех в фазе атаки 2, переход к фазе финишера\n\nend",
        "lua_if": "function lua_if()\nreturn isHistoryContain(565)\nend"
      }
    ]
  },
  {
    "id": 550,
    "text": "   НК-63 легко отразил атаку джедая и начал действовать в более агрессивной манере: два меча позволяли наносить удары почти безостановочно. Вынужденно отступающему под этим натиском Орнасу оставалось лишь обороняться.\n   Дроид, казалось, вошёл в азарт и всё меньше заботился о технике боя. Он вкладывал нечеловеческую мощь в каждый выпад, тесня юношу в угол.\n   Отразив неуверенную контратаку джедая сразу обоими скрещенными клинками, НК-63 навалился вперёд, и все три меча застыли между противниками в хрупком равновесии.\n   ",
    "answers": [
      {
        "comment": true,
        "super_calculate": false,
        "id": 550,
        "calculate": true,
        "lua_do": "function lua_do()\nfightStage = 3\nend",
        "text": "Успех в фазе атаки 1, переход к фазе скрещенных мечей"
      },
      {
        "id": 551,
        "text": "Выждать оптимальный момент для разрыва",
        "lua_if": "function lua_if()\n-- штраф при - к концентрации или - к выносливости (укусы змей)\nreturn true\nend"
      },
      {
        "id": 552,
        "text": "Продавить мощью",
        "lua_if": "function lua_if()\n-- штраф при - сила при хвате двумя руками (мощь в ближнем бою) (рана на руке)\nreturn true\nend"
      },
      {
        "id": 553,
        "text": "Ударить ногой",
        "lua_if": "function lua_if()\n-- штраф при - к силе ног (рана нас ноге) и при использовании удара ногой ранее (?-556). Нужно ли разделить штраф от двери на скорость и силу ног?\nreturn true\nend"
      },
      {
        "id": 554,
        "text": "Использовать Силу для разрыва",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nreturn hkFight.forcePoints > 0\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints - 1 or 1\nend"
      }
    ]
  },
  {
    "id": 551,
    "text": "   ",
    "answers": [
      {
        "id": 551,
        "text": "Выждать оптимальный момент для разрыва скрещенных мечей\n—-штраф при — к концентрации или — к выносливости (укусы змей)",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 551,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif penalties.stamina == 1 and  penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к выносливости и сосредоточенности.\"\n\"Орнас с трудом сдерживал натиск противника, выжидая подходящий момент, чтобы разорвать сцепленные клинки и сохранить обе руки в целости. Выносливости юноши хватило ненадолго, и хищные лезвия медленно приближались к его лицу.<s>\n   Не в силах сосредоточиться на действиях противника, юноша упустил момент, когда дроид перенёс почти все силы в одну из рук. Вторая тем временем высвободила оружие из сцепления и быстро опустилась, полоснув сталью по кисти Орнаса.\"\n\nelseif penalties.stamina == 1 then\n  text = --\"Неудача из-за штрафа к выносливости.\"\n\"Орнас с трудом сдерживал натиск противника, выжидая подходящий момент, чтобы разорвать сцепленные клинки и сохранить обе руки в целости. Выносливости юноши хватило ненадолго, и хищные лезвия медленно приближались к его лицу.<s>\n   Почувствовав слабость джедая, дроид перенёс почти все силы в одну из рук, пока вторая, высвободив оружие из сцепления, быстро опустилась, полоснув сталью по кисти юноши.\"\n\nelseif penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к сосредоточенности.\"\n\"Орнас с трудом сдерживал натиск противника, выжидая подходящий момент, чтобы разорвать сцепленные клинки и сохранить обе руки в целости. Выносливости джедая на это едва хватало.<s>\n   Не в силах сосредоточиться на действиях противника, юноша упустил момент, когда дроид перенёс почти все силы в одну из рук. Вторая тем временем высвободила оружие из сцепления и быстро опустилась, полоснув сталью по кисти Орнаса.\"\n\n\nelse\n  text = --Успех.\"\n\"Орнас с трудом сдерживал натиск противника, выжидая подходящий момент, чтобы разорвать сцепленные клинки и сохранить обе руки в целости. Его выносливости на это едва хватало.<s>\n   Но дроид всё-таки допустил ошибку: видимо намереваясь быстрее дожать юношу, он перевёл почти все силы в одну из рук. В ту же секунду джедай позволил лучу светового меча соскользнуть ниже и в акробатическом прыжке ушёл из под обрушившегося удара вбок, широким взмахом отсекая противнику конечность в том месте, где у гуманоидов находится кисть.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 560,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 0 and penalties.reaction == 0\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 1 or penalties.reaction == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 552,
    "text": "   ",
    "answers": [
      {
        "id": 552,
        "text": "Продавить мощью и разорвать скрещенные мечи\n штраф при — сила при хвате двумя руками (мощь в ближнем бою) (рана на руке)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 552,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nlocal text = \"\"\nif penalties.closeFight == 1 then\n  text = --\"Неудача из-за штрафа к ближнему бою.\"\n\"Орнас собрал последние силы, сдерживая натиск противника. Невообразимым усилием обеих рук он сместил шаткое равновесие и раскалённые клинки постепенно приблизились к корпусу дроида.<s>\n   Но ослабевшие руки не смогли дожать противника и дрогнули. Вновь завладев преимуществом, НК-63 тут же сломил блок джедая и один из виброклинков полоснул холодной сталью по кисти юноши.\"\nelse\n  text = --Успех.\"\n\"Орнас собрался с силами, сдерживая натиск противника. Невообразимым усилием обеих рук он сместил шаткое равновесие и раскалённые клинки постепенно приблизились к корпусу дроида.<s>\n   Не веря до конца в происходящее, НК-63 был вынужден всё-таки разомкнуть скрещенное оружие. В ту же секунду луч светового меча проскользил по одному из клинков до самой рукояти и отсек противнику конечность в том месте, где у гуманоидов находится кисть.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 560,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.closeFight == 0\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.closeFight == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 553,
    "text": "   ",
    "answers": [
      {
        "id": 553,
        "text": "Ударить ногой и разорвать скрещенные мечи\n—- штраф при — к силе ног (рана нас ноге) и при использовании удара ногой ранее (?-553).",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 553,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nlocal text = \"\"\nif penalties.legStrenght == 1 then\n  text = --Неудача из-за штрафа к силе ног.\"\n\n\"Орнас собрал последние силы, сдерживая натиск противника. Извернувшись, он кое-как нанёс удар ослабевшей ногой по корпусу дроида.<s>\n   Казалось, что НК-63 весил целую тонну, и пинок юноши даже не пошатнул его. Дроид сполна воспользовался представившейся возможностью: сломив блок джедая, он полоснул холодной сталью одного из виброклинков по кисти Орнаса.\"\nelse\n  text = --Успех.\"\n\"Орнас собрался с силами, сдерживая натиск противника. Извернувшись, он нанёс резкий удар ногой по корпусу дроида.<s>\n   Казалось, что НК-63 весил целую тонну, и пинок юноши лишь едва пошатнул его. Однако это на одно мгновение ослабило натиск дроида, что позволило джедаю разомкнуть контакт и нырнуть в сторону от обрушевшегося следом удара. Быстрым взмахом светового меча в прыжке Орнас отсек противнику одну конечность в том месте, где у гуманоидов находится кисть.\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 560,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nreturn penalties.legStrenght == 0\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nreturn penalties.legStrenght == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 554,
    "text": "   Орнас с трудом сдерживал натиск противника. С помощью Силы он оттолкнул клинки дроида и в ту же секунду нанёс быстрый удар освободившимся световым мечом. Голубой луч скользнул вниз и отсёк противнику одну из конечностей в том месте, где у гуманоидов находится кисть.",
    "answers": [
      {
        "id": 560,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех, переход к фазе защиты\nreturn true\nend"
      }
    ]
  },
  {
    "id": 555,
    "text": "   НК-63 окончательно зажал юношу в углу, не оставляя тому возможности для манёвра. Орнас понимал, что бой закончится очень скоро, если не удастся выбраться из этой невыгодной позиции на свободное пространство.\n   ",
    "answers": [
      {
        "comment": true,
        "super_calculate": false,
        "id": 555,
        "calculate": true,
        "lua_do": "function lua_do()\nfightStage = 5\nend",
        "text": "Успех защиты, переход к фазе выхода из угла"
      },
      {
        "id": 556,
        "text": "Выбраться из угла после удара ногой",
        "lua_if": "function lua_if()\n-- штраф при -к удару ногой (рана на ноге) и при использовании удара ногой ранее (?553)\nreturn true\nend"
      },
      {
        "id": 557,
        "text": "Дождаться подходящего момента для выхода из угла",
        "lua_if": "function lua_if()\n-- штраф при - концентрации или - к выносливости (укусы)\nreturn true\nend"
      },
      {
        "id": 558,
        "text": "Выбраться из угла в мощном натиске",
        "lua_if": "function lua_if()\n-- штраф при - к ближнему бою (рана на руке)\nreturn true\nend"
      },
      {
        "id": 559,
        "text": "Использовать Силу для выхода из угла",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nreturn hkFight.forcePoints > 0\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints - 1 or 1\nend"
      }
    ]
  },
  {
    "id": 556,
    "text": "   ",
    "answers": [
      {
        "id": 556,
        "text": "Выбраться из угла после удара ногой\nштраф при -к удару ногой (рана на ноге) и при использовании удара ногой ранее (?553)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 556,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nlocal text = \"\"\nif isHistoryContain(553) and style ~= 1 then\ntext = --Неудача из-за повторного использования одного и того же приёма\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. НК-63 бил наотмашь, уже не заботясь о точности. <s>\n   Дождавшись подходящего момента, джедай изо всех сил ударил дроида ногой. Тот, словно ожидая от юноши именно этого, сместился немного в сторону и вперёд, намереваясь наказать противника за повторение дерзкого манёвра. Холодная сталь виброклинка полоснула Орнаса по кисти руки, сжимающей рукоять светового меча.\"\n\nelseif penalties.legStrenght == 1 then\n  text = --\"Неудача из-за штрафа к силе ног.\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. НК-63 бил наотмашь, уже не заботясь о точности. <s>\n   Дождавшись подходящего момента, джедай кое-как нанёс удар ослабевшей ногой по корпусу дроида. Казалось, что НК-63 весил целую тонну, и пинок юноши даже не пошатнул его. Дроид воспользовался представившейся возможностью и окончательно загнал джедая в самый угол, где не оставалось пространства для любых манёвров. Холодная сталь виброклинка полоснула Орнаса по кисти руки, сжимающей рукоять светового меча.\"\n\nelseif isHistoryContain(553) and style == 1 then\ntext = --\"Успех, альтернативный текст с реакцией нк на прошлый опыт\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. НК-63 бил наотмашь, уже не заботясь о точности. <s>\n   Дождавшись подходящего момента, джедай изо всех сил ударил дроида ногой. Тот, словно ожидая от юноши именно этого, сместился немного в сторону, намереваясь наказать противника за повторение дерзкого манёвра ударом по оставленным без защиты рукам. Ловко уйдя от атаки, Орнас уже был готов сразить НК-63 коротким взмахом светового меча, но тот успел отступить. Это позволило Орнасу выбраться из угла и вновь перейти в наступление.\"\n\nelse\n  text = --Успех.\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. НК-63 бил наотмашь, уже не заботясь о точности. <s>\n   Дождавшись подходящего момента, юноша изо всех сил ударил дроида ногой, отчего тот лишь едва пошатнулся. Но выигранного мгновения хватило на то, чтобы проскочить под самым лезвием виброклинка и оказаться почти вплотную к противнику. Джедай уже был готов сразить его коротким взмахом светового меча, но НК-63 успел отступить. Это позволило Орнасу выбраться из угла и вновь перейти в наступление.\"\n\n\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nreturn penalties.legStrenght == 1 or (isHistoryContain(553) and style ~= 1)\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 565,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nreturn penalties.legStrenght == 0 and not (isHistoryContain(553) ) and style ~= 1\nend"
      },
      {
        "id": 565,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.legStrenght = penalties.legStrenght or 0\nreturn penalties.legStrenght == 0 and not (isHistoryContain(553) ) and style == 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ]
      }
    ]
  },
  {
    "id": 557,
    "text": "   ",
    "answers": [
      {
        "id": 557,
        "text": "Дождаться подходящего момента для выхода из угла\nштраф при — концентрации или — к выносливости (укусы)",
        "lua_if": "function lua_if()\n\nend",
        "comment": true
      },
      {
        "id": 557,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif penalties.stamina == 1 and  penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к выносливости и сосредоточенности.\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. Безуспешно пытаясь сосредоточиться на движениях противника, джедай старательно отражал каждый удар, дожидаясь подходящего момента.<s>\n   НК-63 бил наотмашь изо всех сил, уже не заботясь о точности, всё больше изнуряя и без того истощённого Орнаса. Очередная атака, которую не сумел вовремя заметить юноша, заставила его открыться, и на следующем взмахе холодная сталь виброклинка полоснула Орнаса по кисти руки, сжимающей световой меч.\"\n\nelseif penalties.stamina == 1 then\n  text = --\"Неудача из-за штрафа к выносливости.\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. Сосредоточившись на движениях противника, джедай старательно отражал каждый удар, дожидаясь подходящего момента.<s>\n   НК-63 бил наотмашь изо всех сил, уже не заботясь о точности, всё больше изнуряя и без того истощённого Орнаса. Наконец, очередная атака дроида заставила джедая открыться, и на следующем взмахе холодная сталь виброклинка полоснула юношу по кисти руки, сжимающей световой меч.\"\n\nelseif penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к сосредоточенности.\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. Безуспешно пытаясь сосредоточиться на движениях противника, джедай старательно отражал каждый удар, дожидаясь подходящего момента.<s>\n   НК-63 бил наотмашь изо всех сил, уже не заботясь о точности. Однако очередная атака, которую не сумел вовремя заметить юноша, заставила его открыться, и на следующем взмахе холодная сталь виброклинка полоснула Орнаса по кисти руки, сжимающей световой меч.\"\n\nelse\n  text = --Успех.\"\n\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. Полностью сосредоточившись на движениях противника, джедай старательно отражал каждый удар, дожидаясь подходящего момента.<s>\n   НК-63 бил наотмашь изо всех сил, уже не заботясь о точности. Наконец, дождавшись очередного замаха дроида, юноша ринулся вперёд, едва проскочив под самым лезвием клинка. Орнас оказался почти вплотную к противнику и был готов сразить его коротким взмахом светового меча, но НК-63 успел отступить. Это позволило джедаю выбраться из угла и вновь перейти в наступление.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 1 or penalties.reaction == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 565,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 0 and penalties.reaction == 0\nend"
      }
    ]
  },
  {
    "id": 558,
    "text": "   ",
    "answers": [
      {
        "id": 558,
        "text": "Мощный натиск для выхода из угла\nштраф при — к ближнему бою (рана на руке)",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 558,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\n\nlocal text = \"\"\nif penalties.closeFight == 1 then\n  text = --Неудача из-за штрафа к ближнему бою.\"\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. Полностью сосредоточившись на движениях двух клинков, джедай ринулся на врага в отчаянном прорыва.<s>\n   НК-63 бил наотмашь изо всех сил, не заботясь о точности. Юноша с трудом отражал мощные удары ослабевшими руками, не в силах подобраться хоть немного ближе к дроиду. Наконец, одна из атак всё-таки пробила блок юноши, и на следующем взмахе холодная сталь виброклинка полоснула по кисти руки, сжимающей световой меч.\"\n\n\nelse\n  text = --\"Успех.\"\n\"Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет. Полностью сосредоточившись на движениях двух клинков, джедай ринулся на врага в отчаянном прорыве.<s>\n   НК-63 бил наотмашь изо всех сил, не заботясь о точности. Орнас уверенно отражал каждый удар, всё ближе и ближе подбираясь к самому дроиду. Наконец, после серии быстрых атак юноша оказался почти вплотную к противнику и был готов сразить его коротким взмахом светового меча, но НК-63 успел отступить. Это позволило джедаю выбраться из угла и вновь перейти в наступление.\"\n\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.closeFight == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 565,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.closeFight == 0\nend"
      }
    ]
  },
  {
    "id": 559,
    "text": "   Орнас понимал, что просто проскользнуть мимо дроида, расчётливо подстроившего такую ситуацию, не выйдет.\n   Полностью сосредоточившись на потоках Силы, джедай нанёс несколько мощных телекинетических ударов, едва не выбивших клинок из стальной хватки дроида. Но юноше хватило и тех нескольких мгновений ошеломления противника, чтобы подобраться вплотную к нему. Орнас\nбыл готов сразить НК-63 коротким взмахом светового меча, но тот успел отступить. Это позволило джедаю выбраться из угла и вновь перейти в наступление.",
    "answers": [
      {
        "id": 565,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех, переход к фазе атаки\nreturn true\nend"
      }
    ]
  },
  {
    "id": 560,
    "text": "   Дроид проревел что-то нечленораздельное и с удвоенным напором бросился на юношу. Его удары единственным ",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = UpLine == 1 and\n[=[оставшимся мечом разили со всех сторон с неестественными углами атаки, отчего Орнас был вынужден отступать всё дальше и дальше.\n   ]=]\nor \n[=[мечом разили со всех сторон с неестественными углами атаки, отчего Орнас был вынужден отступать всё дальше и дальше.\n   ]=]\nreturn text\nend",
        "comment": true,
        "super_calculate": false,
        "id": 560,
        "calculate": false,
        "text": "Успех, скрещенных мечей, переход к фазе защиты",
        "merge": true
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 560,
        "calculate": true,
        "text": "Успех, скрещенных мечей, переход к фазе защиты",
        "lua_do": "function lua_do()\nfightStage = 4\nend"
      },
      {
        "id": 561,
        "text": "Отражать удары",
        "lua_if": "function lua_if()\n-- штраф при - к концентрации и - к выносливости (укусы змеи)\nreturn true\nend"
      },
      {
        "id": 562,
        "text": "Уклоняться от ударов",
        "lua_if": "function lua_if()\n-- штраф при - к скорости (рана на ноге)\nreturn true\nend"
      },
      {
        "id": 563,
        "text": "Лучшая защита – нападение",
        "lua_if": "function lua_if()\n-- штраф при -к ближнему бою (рана на руке)\nreturn true\nend"
      },
      {
        "id": 564,
        "text": "Использовать Силу для защиты",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nreturn hkFight.forcePoints > 0\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints - 1 or 1\nend"
      },
      {
        "lua_if": "function lua_if()\n\npenalties.closeFight = penalties.closeFight or 0\n\npenalties.legStrenght = penalties.legStrenght or 0\n\npenalties.stamina = penalties.stamina or 0\n \npenalties.reaction = penalties.reaction or 0\n\npenalties.speed = penalties.speed or 0\n\npenalties.accuracy = penalties.accuracy or 0\n\nreturn penalties.closeFight == 1 and\npenalties.legStrenght == 1 and penalties.stamina == 1 and \npenalties.reaction == 1 and\npenalties.speed == 1 and\npenalties.accuracy == 1\nend",
        "super_calculate": false,
        "id": 560,
        "calculate": true,
        "lua_do": "function lua_do()\nnewAchieve(\"badFeeling\",-1,1)\nend",
        "text": "Выдать достижение"
      }
    ]
  },
  {
    "id": 561,
    "text": "   ",
    "answers": [
      {
        "id": 561,
        "text": "Сосредоточенная защита\n—- штраф при — к концентрации и — к выносливости (укусы змеи)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 561,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif penalties.stamina == 1 and  penalties.reaction == 1 then\n  text = --Неудача из-за штрафа к выносливости и сосредоточенности\n\"Орнас сосредоточился на защите и делал то, чему обучают юнлингов на тренировках с мечом в первую очередь – отражал удары.<s>\n   Высокий блок для нисходящего удара. Перевод меча в сторону и вновь вперёд. Джедай с трудом концентрировал рассеяное внимание на изнуряющих атаках дроида, выматывающих и без того истощённое тело юноши. Наконец, один неожиданный удар НК-63 всё-таки пробил ослабевшую оборону Орнаса. Холодная сталь виброклинка полоснула юношу по кисти руки, держащей световой меч.\"\n\n\nelseif penalties.stamina == 1 then\n  text = --\"Неудача из-за штрафа к выносливости.\"\n\"Орнас сосредоточился на защите и делал то, чему обучают юнлингов на тренировках с мечом в первую очередь – отражал удары.<s>\n   Высокий блок для нисходящего удара. Перевод меча вслед за клинком противника в сторону и вниз. Шаг назад и перехват рукояти двумя руками. Снова блок. Прямолинейные атаки изнуряли и без того истощённое тело юноши. Наконец, один неожиданно мощный удар дроида всё-таки пробил ослабевшую оборону джедая и холодная сталь виброклинка полоснула по кисти руки, держащей световой меч.\"\n\n\nelseif penalties.reaction == 1 then\n  text = --Неудача из-за штрафа к сосредоточенности.\"\n\"Орнас сосредоточился на защите и делал то, чему обучают юнлингов на тренировках с мечом в первую очередь – отражал удары.<s>\n   Высокий блок для нисходящего удара. Перевод меча в сторону и вновь вперёд. Джедай с трудом концентрировал рассеяное внимание на изнуряющих атаках дроида и, наконец, всё-таки пропустил одну из них. Холодная сталь виброклинка полоснула юношу по кисти руки, держащей световой меч.\"\n\nelse\n  text = --\"Успех.\"\n\"Орнас сосредоточился на защите и делал то, чему обучают юнлингов на тренировках с мечом в первую очередь – отражал удары.<s>\n   Высокий блок для нисходящего удара. Перевод меча вслед за клинком противника в сторону и вниз. Шаг назад и перехват рукояти двумя руками. Снова блок. Прямолинейные изнуряющие атаки заставляли Орнаса отступать, но выносливость и сосредоточенность берегли его от ошибок.\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 1 or penalties.reaction == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 555,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 0 and penalties.reaction == 0\nend"
      }
    ]
  },
  {
    "id": 562,
    "text": "   ",
    "answers": [
      {
        "id": 562,
        "text": "Избегать прямых атак\nштраф при — к скорости (рана на ноге)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 562,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\n\nlocal text = \"\"\nif penalties.speed == 1 then\n  text = --\"Неудача из-за штрафа к скорости.\"\n\"Орнас сосредоточился на защите. Вместо того, чтобы отражать мощные атаки противника, джедай старался от них просто уклоняться.<s>\n   Уход в сторону от низкого удара, слишком медленный, чтобы совершить молниеносную контратаку. Ловкие увороты корпусом в считанных сантиметрах от мощных свистящих взмахов. Во время одного из недостаточно быстрых манёров дроид всё-таки настиг юношу, и холодная сталь виброклинка полоснула по кисти руки, сжимающей меч.\" \n\nelse\n  text = --Успех.\"\n\"Орнас сосредоточился на защите. Вместо того, чтобы отражать мощные атаки противника, джедай старался от них просто уклоняться.<s>\n   Прыжок в сторону от низкого удара. Переворот в воздухе и неуверенный встречный выпад. Орнас волчком метался вокруг дроида, уворачиваясь от широких взмахов и отвечая неуверенными контратаками. Но НК-63 оказался хитрее и расчётливее, и после очередной его атаки юноша обнаружил, что в танце стремительных перемещений сам загнал себя в угол.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 555,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 0\nend"
      }
    ]
  },
  {
    "id": 563,
    "text": "   ",
    "answers": [
      {
        "id": 563,
        "text": "Лучшая защита – нападение\nштраф при -к ближнему бою (рана на руке)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 563,
        "text": "Дальше",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\n\nlocal text = \"\"\nif penalties.closeFight == 1 then\n  text = --Неудача из-за штрафа к ближнему бою.\"\n\"Орнас не стал замыкаться в защите и старался активно контратаковать, не позволяя противнику целиком завладеть инициативной.<s>\n   С трудом блокируя каждый выпад, юноша тут же сокращал дистанцию и вынуждал дроида сражаться в максимально тесном контакте, где элегантное оружие джедая могло бы быть особенно эффективным. К несчастью, меч в ослабевших руках Орнаса едва ли представлял угрозу для неутомимого НК-63, который, воспользовавшись очередным сближением, смог продавать оборону юноши. Холодная сталь виброклинка полоснула по кисти руки, сжимающей меч.\"\n\n\nelse\n  text = --\"Успех.\"\n\"Орнас не стал замыкаться в защите и старался активно контратаковать, не позволяя противнику целиком завладеть инициативной.<s>\n   Блокируя каждый выпад, юноша тут же сокращал дистанцию и вынуждал дроида сражаться в максимально тесном контакте, где элегантное оружие джедая было особенно эффективным. Тем не менее, НК-63 оказался дальновиднее, и после очередного размена ударами юноша обнаружил, что оказался в самом углу зала.\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.closeFight == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 555,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.closeFight == 0\nend"
      }
    ]
  },
  {
    "id": 564,
    "text": "   Орнас использовал Силу для предвидения действий дроида и смягчал с её помощью особенно мощные атаки. Но НК-63 оказался более дальновидным, и в хаотичном на первый взгляд танце сражения юноша, сам того не замечая, оказался в самом углу зала. ",
    "answers": [
      {
        "id": 555,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех, переход к фазе выхода из угла\nreturn true\nend"
      }
    ]
  },
  {
    "id": 565,
    "text": "   Казалось, что неожиданный успех юноши сломил дроида. Он отступал не то из безысходности, не то для того, чтобы начать реализацию ещё одной хитрой тактики. С новым всплеском сил Орнас преследовал врага и готовился атаковать. ",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nfightStage = 6\nend",
        "text": "Дальний бой\n   ↓\nАтака\n   ↓\nСкрещенные мечи\n   ↓\nЗащита\n   ↓\nВыход из угла\n   ↓\nАтака (при повторном использовании приёма - фейл, исключение приёмы Силы)\n   ↓\nРешающий удар",
        "id": 543,
        "calculate": true
      },
      {
        "id": 566,
        "text": "Выверенная точная атака",
        "lua_if": "function lua_if()\n-- штраф при - к точности движений (рана на руке) и при повторном выборе (?-546)\nreturn true\nend"
      },
      {
        "id": 567,
        "text": "Серия быстрых атак",
        "lua_if": "function lua_if()\n--штраф при - к скорости (рана на ноге) и при повторном выборе (?-547)\nreturn true\nend"
      },
      {
        "id": 568,
        "text": "Осторожная атака",
        "lua_if": "function lua_if()\n-- штраф при - к выносливости или - к сосредоточенности (укусы змей) и при повторном выборе (?-548)\n-- Нет штрафа от характеристик для 3 стиля\nreturn true\nend"
      },
      {
        "id": 549,
        "text": "Мощная атака с использованием Силы",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nreturn hkFight.forcePoints > 0\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints - 1 or 1\nend"
      }
    ]
  },
  {
    "id": 566,
    "text": "   ",
    "answers": [
      {
        "id": 566,
        "text": "Выверенная точная атака (2 фаза)\nштраф при — к точности движений (рана на руке) и при повторном выборе (?-546)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 566,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\n\nlocal text = \"\"\nif isHistoryContain(546) and style ~= 1 then\n  text = --\"Неудача из-за повтора одного и того же действия\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай провёл несколько осторожных выпадов, затем мгновенно перехватил меч одной рукой и выбросил её вперёд. К несчастью, НК-63 хорошо усвоил урок и моментально отреагировал на уже знакомый приём: его виброклинок одним неуловимым движением легко поразил кисть вытянутой в ударе руки юноши.\"\n\nelseif penalties.accuracy == 1 then\n  text = --\"Неудача из-за штрафа к точности.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову.<s>\n   Джедай провёл несколько осторожных выпадов, затем перехватил меч одной рукой и выбросил её вперёд. Неожиданная дрожь от локтя до кончиков пальцев не позволила исполнить приём так, как это задумывал юноша: рука Орнаса прошла слишком близко к лезвию виброклинка противника. В следующее же мгновение тот неуловимым движением поразил кисть юноши.\"\n\nelseif isHistoryContain(546) and style == 1 then\n  text = --\"Успех, альтернативное описание с учётом реакции нк на прошлый опыт того же действия\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай провёл несколько осторожных выпадов, затем мгновенно перехватил меч одной рукой и выбросил её вперёд. НК-63 хорошо усвоил урок и моментально отреагировал на уже знакомый приём: его виброклинок едва не достиг вытянутой в ударе руки юноши. Отработанным движением Орнас отразил внезапную атаку и вновь замахнулся сам. Дроид отскочил назад и, потеряв равновесие, упал в нескольких шагах от джедая.\"\n\nelse\n  text = --\"Успех.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай провёл несколько осторожных выпадов, затем мгновенно перехватил меч одной рукой и выбросил её вперёд. Укол вышел и впрямь идеальным: рука юноши скользнула под самым лезвием виброклинка противника и почти поразила его самого. Но НК-63 успел отскочить назад и, потеряв равновесие, упал в нескольких шагах от Орнаса.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 569,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех в фазе атаки 2, переход к фазе финишера\n\nend",
        "lua_if": "function lua_if()\n\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\nreturn penalties.accuracy == 0 and not (isHistoryContain(546)) and style ~= 1\nend"
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "id": 569,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех в фазе атаки 2, переход к фазе финишера\n\nend",
        "lua_if": "function lua_if()\n\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\nreturn penalties.accuracy == 0 and not\n (isHistoryContain(546)) and style == 1\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\nreturn penalties.accuracy == 1 or (isHistoryContain(546) and style ~= 1)\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 567,
    "text": "   ",
    "answers": [
      {
        "id": 567,
        "text": "Серия быстрых атак\nштраф при — к скорости (рана на ноге) и при повторном выборе (?-547)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 567,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\n\nlocal text = \"\"\nif isHistoryContain(547) and style ~= 1 then\n  text = --\"Неудача из-за повтора одного и того же действия\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай провёл несколько ложных выпадов, затем серию стремительных атак с разных сторон. С трудом успевая защищаться, противник наконец раскрылся. Резкий взмах светового меча неожиданно для Орнаса прошёл мимо цели. Дроид хорошо усвоил урок: узнав уже знакомый приём, он отреагировал моментально и успел уклониться от удара. В следующее же мгновение клинок дроида легко поразил кисть сжимающей световой меч руки джедая.\"\n\nelseif penalties.speed == 1  then\n  text = --\"Неудача из-за штрафа к скорости.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову.<s>\n   Джедай провёл несколько ложных выпадов, затем серию атак с разных сторон. Без труда успевая за каждым манёвром юноши, противник тем не менее продолжал отступать. Уставшие ноги Орнаса не позволили ему вовремя занять удобную для решающего удара позицию, но он попытался всё-таки достать врага одним рискованным движением. В следующее же мгновение клинок дроида легко поразил кисть самонадеянного джедая.\"\n\nelseif isHistoryContain(547) and style == 1 then\n  text = --\"Успех, альтернативное описание с учётом реакции нк на прошлый опыт того же действия\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай провёл несколько ложных выпадов, затем серию стремительных атак с разных сторон. С трудом успевая защищаться, противник наконец раскрылся. Но вместо короткого взмаха световым мечом, который джедай уже использовал ранее, он сделал ещё один рывок и оказался за спиной дроида. НК-63 быстро развернул голову и руки в сторону Орнаса и успел заблокировать последовавшую атаку, но после этого потерял равновесие и упал в нескольких шагах от юноши.\"\n\nelse\n  text = --\"Успех.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай провёл несколько ложных выпадов, затем серию стремительных атак с разных сторон. С трудом успевая защищаться, противник наконец раскрылся. Резкий взмах светового меча наверняка поразила бы НК-63, но он успел отскочить назад и, потеряв равновесие, упал в нескольких шагах от Орнаса.\"\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "id": 569,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех в фазе атаки 2, переход к фазе финишера\n--return \"text\"\nend",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 0 and not (isHistoryContain(547)) and style == 1\nend"
      },
      {
        "id": 569,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--успех в фазе атаки 2, переход к фазе финишера\n--return \"text\"\nend",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 0 and not (isHistoryContain(547)) and style ~= 1\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.speed = penalties.speed or 0\nreturn penalties.speed == 1 or (isHistoryContain(547) and style ~= 1)\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      }
    ]
  },
  {
    "id": 568,
    "text": "   ",
    "answers": [
      {
        "id": 568,
        "text": "Осторожная атака\nУникальное описание для 3 стиля (без\nштраф при — к выносливости или — к сосредоточенности (укусы змей) и при повторном выборе (?-548)\n—- Нет штрафа от характеристик для 3 стиля минуса к характеристикам)\n\nЗа каждым (убрать \"движением\"),\n\nне 3, не 1 и (любой из штрафов или повтор) – провал\n3, без повтора – уникальный успех\n3 с повтором – провал\n1 без штрафов без повтора – обычный успех\n1 без штрафов с повтором – уникальный успех\n1 со штрафами – провал\nне 3, не 1 без штрафов, без повтора – обычный успех\n жесты",
        "lua_if": "function lua_if()\n\nend",
        "comment": true
      },
      {
        "id": 568,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif style == 3 and not isHistoryContain(548) then\n--Успех, 3 стиль безотносительно штрафов\ntext = \"Теперь движения дроида не казалось Орнасу неуклюжим. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, интуитивно реагируя на каждое его действие. Осторожные выпады юноши лишь прощупывали оборону отступающего НК-63, не истощая сил привычного к такой тактике джедая. Наконец, дождавшись подходящего момента, Орнас провёл идеальную атаку. Она почти поразила НК-63, но он чудом успел отскочить назад, потерял равновесие и упал на пол в нескольких шагах от юноши.\"\n\n\n\n\nelseif penalties.stamina == 1 and  penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к выносливости и сосредоточенности.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и безуспешно пытался сосредоточить своё рассеянное внимание на его движениях. Осторожные выпады юноши лишь прощупывали оборону НК-63, выжимая последние силы из без того изнурённого тела джедая. Окончательно ослабев от затянувшегося поединка и не в силах больше фокусироваться, Орнас неожиданно пропустил очередную атаку, и по его кисти резко полоснул холодный клинок\"\n\n\n\nelseif penalties.stamina == 1 then\n  text = --\"Неудача из-за штрафа к выносливости.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и внимательно изучал каждое его движение. Осторожные выпады юноши лишь прощупывали оборону НК-63, выжимая последние силы из без того изнурённого тела джедая. Окончательно ослабев от затянувшегося поединка, Орнас после неудачного манёвра пропустил очередную атаку, и по его кисти резко полоснул холодный клинок.\"\n\n\n\nelseif penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к сосредоточенности.\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и безуспешно пытался сосредоточить своё рассеянное внимание на его движениях. Осторожные выпады юноши понемногу изнуряли подготовленное тело джедая. Не в силах сфокусироваться, Орнас неожиданно пропустил очередную атаку, и по его кисти резко полоснул холодный клинок.\"\n\n\nelseif isHistoryContain(548) and style == 1 then\n  text = --\"Успех, альтернативное описание с учётом реакции нк на прошлый опыт того же действия\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и внимательно следил за каждым его действием. Осторожные выпады юноши лишь прощупывали оборону НК-63, понемногу изнуряя подготовленное тело джедая. Наконец, Орнас дождался подходящего момента и был готов провести идеальную атаку. Однако дроид хорошо усвоил урок и успел среагировать на уже знакомый приём: его клинок с трудом сдержал филигранный удар джедая. НК-63 попытался отступить, но потерял равновесие и упал на пол в нескольких шагах от юноши.\"\n\nelseif isHistoryContain(548) and style ~= 1 then\n  text = --\"Неудача из-за повтора одного и того же действия\"\n\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и внимательно следил за каждым его действием. Осторожные выпады юноши лишь прощупывали оборону НК-63, понемногу изнуряя подготовленное тело джедая. Наконец, Орнас дождался подходящего момента и был готов провести идеальную атаку. Однако дроид хорошо усвоил урок и успел среагировать на уже знакомый приём: его клинок легко отразил удар джедая и уже в следующую секунду в молниеносной контратаке поразил кисть юноши.\"\n\n\nelse\n  text = --\"Успех.\"\n\"Теперь движения дроида не казались Орнасу неуклюжими. За каждым жестом он видел уловку и потому не спешил бросаться вперёд сломя голову. <s>\n   Джедай без особого напора маневрировал, размениваясь случайными ударами с противником, и внимательно следил за каждым его действием. Осторожные выпады юноши лишь прощупывали оборону НК-63, понемногу изнуряя подготовленное тело джедая. Наконец, дождавшись подходящего момента, Орнас провёл идеальную атаку. Она почти поразила НК-63, но тот чудом успел отскочить назад, потерял равновесие и упал на пол в нескольких шагах от юноши.\"\nend\n\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 569,
        "text": "Дальше",
        "lua_text": "function lua_text()\n-- обычный успех в фазе атаки 2, переход к фазе финишера\n--return \"text\"\nend",
        "lua_if": "function lua_if()\n--обычный успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 0 and penalties.reaction == 0 and not (isHistoryContain(548)) and style ~= 3\nend"
      },
      {
        "lua_if": "function lua_if()\n-- успех 1 стиля при повторе\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.stamina == 0 and penalties.reaction == 0 and isHistoryContain(548) and style == 1\nend",
        "id": 569,
        "text": "Дальше",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "lua_text": "function lua_text()\n-- обычный успех в фазе атаки 2, переход к фазе финишера\n--return \"text\"\nend"
      },
      {
        "lua_if": "function lua_if()\n-- успех 3 стиля без повтора\n\nreturn not isHistoryContain(548) and style == 3\nend",
        "id": 569,
        "text": "Дальше",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "lua_text": "function lua_text()\n-- обычный успех в фазе атаки 2, переход к фазе финишера\n--return \"text\"\nend"
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\nreturn (style ~= 3 and (penalties.stamina == 1 or penalties.reaction == 1) ) or (isHistoryContain(548) and style ~= 1)\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "lua_if": "function lua_if()\n--return g.isAuthor == 1 and isHistoryContain(548)\nend",
        "lua_do": "function lua_do()\n--history \n--[[=[\nfunction tEdit(t, n, z)\n for k in pairs(t) do\n   if t[k] == n then\n     t[k] = z\n   end\n end\nend\n\nif isHistoryContain(548) then\ntEdit(history, 548, 1548)\nelse\ntEdit(history, 1548, 548)\nend\n\n]=]]\nend",
        "id": 568,
        "text": "Редактирование истории - failed",
        "lua_text": "function lua_text()\nreturn \"isHistoryContain(548) = \" .. tostring(isHistoryContain(548))  .. \"<s>\n<s>\nInvert it!\"\nend",
        "comment": false
      },
      {
        "comment": false,
        "id": 568,
        "text": "Удалить из истории с548",
        "forget": [
          548
        ],
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1 and isHistoryContain(548)\nend"
      },
      {
        "comment": false,
        "id": 568,
        "text": "Добавить в историю с548",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1 and not isHistoryContain(548)\nend",
        "addToHistory": [
          548
        ]
      }
    ]
  },
  {
    "id": 569,
    "text": "   Дроид успел рывком подняться на ноги до того, как джедай сократил дистанцию с занесенным для решающего удара мечом. Но от былой прыти НК-63 не осталось и следа, и казалось, что он едва держится, чтобы снова не упасть.\n   Будто в подтверждение подозрений Орнаса, дроид остановился на месте, заслоняясь клинком от возможной атаки юноши, и заговорил.\n– Утверждение: переоценка ситуации произведена, сопротивление нецелесообразно. Предлагаю закончить поединок и приступить к переговорам.\n   Очередная уловка? Стоит ли доверять словам противника теперь, когда есть возможность продолжить и безоговорочно выиграть бой?",
    "answers": [
      {
        "id": 576,
        "text": "Согласиться",
        "lua_if": "function lua_if()\n\nstyle = style or 1\nreturn style\nend"
      },
      {
        "id": 584,
        "text": "Продолжить бой"
      }
    ]
  },
  {
    "id": 570,
    "text": "   ",
    "answers": [
      {
        "id": 570,
        "text": "Обезоружить\n— штраф при — к концентрации или — к точности движений (укусы змеи, рана на руке)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 570,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nlocal text = \"\"\nif penalties.accuracy == 1 and  penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к точности и сосредоточенности.\"\n\n[=[Орнас попытался сосредоточить своё внимание на движениях клинка дроида, но помутнённое сознание не позволяло поймать подходящий момент для точной атаки.\n   Через несколько минут тщетных усилий юноша попробовал быстрым взмахом отсечь слишком высоко вскинутую руку НК-63, но движению не хватило точности.\n   Слишком самоуверенный манёвр оставил джедая в невыгодной позиции, чем и воспользовался его противник. Сталь виброклинка сверкнула в ярком свете ламп и тут же полоснула юношу по кисти руки, сжимающей световой меч.]=]\n\n\n\nelseif penalties.accuracy == 1 then\n  text = --\"Неудача из-за штрафа к точности.\"\n\n[=[Орнас сосредоточил своё внимание на движениях клинка дроида, намереваясь лишить противника возможности сражаться одним выверенным ударом.\n   Всего через минуту ложный выпад юноши заставил НК-63 открыться, и когда тот спешно выставил блок, Орнас попытался быстрым взмахом рассечь рукоять виброклинка, но движению не хватило точности.\n   Слишком самоуверенный манёвр оставил джедая в невыгодной позиции, чем и воспользовался его противник. Сталь виброклинка сверкнула в ярком свете ламп и тут же полоснула юношу по кисти руки, сжимающей световой меч.]=]\n\nelseif penalties.reaction == 1 then\n  text = --\"Неудача из-за штрафа к сосредоточенности.\"\n\n[=[Орнас попытался сосредоточить своё внимание на движениях клинка дроида, но помутнённое сознание не позволяло поймать подходящий момент для точной атаки.\n   Через несколько минут тщетных усилий юноша попробовал быстрым взмахом отсечь слишком высоко вскинутую руку противника, но попался на обманный манёвр. Сталь виброклинка тотчас же сверкнула в ярком свете ламп и полоснула юношу по кисти руки, сжимающей световой меч.]=]\n\nelse \n\n  text = -- успех\n[=[Орнас сосредоточил своё внимание на движениях клинка дроида, намереваясь лишить противника возможности сражаться одним выверенным ударом.\n   Всего через минуту ложный выпад юноши заставил НК-63 открыться, и когда тот спешно выставил блок, Орнас точным движением рассёк рукоять виброклинка, заодно отхватив несколько металлических пальцев.\n– Утверждение... – только и успел произнести дроид, прежде чем джедай несколькими ударами превратил его корпус в груду обломков.]=]\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.accuracy == 1 or penalties.reaction == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 574,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- удача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn UpLine == 1 and penalties.accuracy == 0 and penalties.reaction == 0\nend"
      },
      {
        "id": 609,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- удача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn UpLine == 2 and penalties.accuracy == 0 and penalties.reaction == 0\nend"
      },
      {
        "id": 631,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- удача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn (UpLine == 4 or UpLine == 7) and penalties.accuracy == 0 and penalties.reaction == 0\nend"
      },
      {
        "id": 856,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- удача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn UpLine == 8 and penalties.accuracy == 0 and penalties.reaction == 0\nend"
      },
      {
        "lua_if": "function lua_if()\n-- удача\npenalties = penalties or {}\npenalties.accuracy = penalties.accuracy or 0\npenalties.reaction = penalties.reaction or 0\nreturn penalties.accuracy == 0 and penalties.reaction == 0\nend",
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"warrior4\",1,1)\nend",
        "text": "Выдать достижение",
        "calculate": true,
        "id": 570
      }
    ]
  },
  {
    "id": 571,
    "text": "   ",
    "answers": [
      {
        "id": 571,
        "text": "Мощный натиск после удара ногой\nштраф при — к ближнему бою или — к удару ногой или при повторном использовании удара ногой 553,556 (рана на руке, рана на ноге)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 570,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.legStrenght = penalties.legStrenght or 0\nlocal text = \"\"\nif (isHistoryContain(553) or isHistoryContain(556)) and style ~= 1 then\ntext = --\"Неудача из-за повторного использования одного и того же приёма\"\n\n[=[Орнас решил как можно скорее закончить и без того затянувшийся бой.\n   Не теряя ни мгновения, джедай сблизился с противником и с силой ударил ногой по его корпусу. Но дроид хорошо усвоил урок: узнав уже использованный юношей ранее приём, он успел отклониться немного в сторону, и удар прошёл по касательной, не причинив НК-63 вреда. Зато дроид чуть было не схватил юношу за ногу, и тот лишь чудом успел вернуть конечность назад. Но уже в следующий миг виброклинок полоснул потерявшего равновесия Орнаса по кисти сжимающей световой меч руки.]=]\n\nelseif penalties.legStrenght == 1 then\n  text = --\"Неудача из-за штрафа к силе ног.\"\n\n[=[Орнас решил как можно скорее закончить и без того затянувшийся бой.\n   Не теряя ни мгновения, юноша сблизился с противником и ударил ногой по его корпусу. Из-за слабости в ногах удар вышел не сильным и не причинив НК-63 вреда. Зато дроид чуть было не схватил джедая за ногу, и тот лишь чудом успел вернуть конечность назад. Но противник успел воспользоваться этой оплошностью, и уже в следующий миг его виброклинок полоснул потерявшего равновесие Орнаса по кисти сжимающей световой меч руки.]=]\n\n\nelseif penalties.closeFight == 1 then\n  text = --\"Неудача из-за штрафа к ближнему бою.\"\n\n[=[Орнас решил как можно скорее закончить и без того затянувшийся бой.\n   Не теряя ни мгновения, юноша сблизился с противником и с силой ударил ногой по его корпусу. Дроид отшатнулся и спешно выставил блок, а Орнас тем временем перехватил рукоять своего меча двумя руками и нанёс удар. Однако, ослабленные руки не позволили джедаю преодолеть оборону НК-63: на несколько секунд клинки скрестились, но затем вибромеч продавил луч светового меча и полоснул Орнаса по кисти сжимающей оружие руки.]=]\n\n\nelseif (isHistoryContain(553) or isHistoryContain(556)) and style == 1 then\ntext = --\"Успех: альтернативное описание с учётом реакции нк на такой же приём\"\n\n[=[Орнас решил как можно скорее закончить и без того затянувшийся бой.\n   Не теряя ни мгновения, джедай сблизился с противником и пнул ногой по его корпусу. Дроид хорошо усвоил урок: узнав уже использованный юношей ранее приём, он успел отклониться немного в сторону. Но Орнас тут же обрушил на НК-63 отточенный до автоматизма мощный удар мечом из-за головы и отрубил тому вторую руку.\n– Утверждение... – только и успел произнести дроид, прежде чем джедай несколькими ударами превратил его корпус в груду обломков.]=]\n\n\n\nelse\n  text = --\"Успех.\"\n\n[=[Орнас решил как можно скорее закончить и без того затянувшийся бой.\n   Не теряя ни мгновения, юноша сблизился с противником и с силой ударил ногой по его корпусу. Дроид отшатнулся и спешно выставил блок, а Орнас тем временем перехватил рукоять своего меча двумя руками и обрушил на противника мощный удар. На несколько секунд клинки скрестились, но затем луч светового меча сломил оборону дроида, проскользил вниз по лезвию и отсёк механическую руку НК-63.\n– Утверждение... – только и успел произнести дроид, прежде чем джедай несколькими ударами превратил его корпус в груду обломков.]=]\n\nend\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.legStrengh = penalties.legStrengh or 0\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.legStrengh == 1 or penalties.closeFight == 1 or ((isHistoryContain(553) or isHistoryContain(556)) and style ~= 1)\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 571,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.legStrengh = penalties.legStrengh or 0\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.legStrengh == 0 and penalties.closeFight == 0 and not (isHistoryContain(553) ) and not (isHistoryContain(556) )\nend",
        "go_to": [
          "translationAfterFightHK"
        ]
      },
      {
        "lua_do": "function lua_do()\nnewAchieve(\"warrior4\",1,1)\nend",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.legStrengh = penalties.legStrengh or 0\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.legStrengh == 0 and penalties.closeFight == 0 and not (isHistoryContain(553) ) and not (isHistoryContain(556) )\nend",
        "super_calculate": false,
        "id": 571,
        "text": "Выдать достижение",
        "calculate": true,
        "go_to": [
          "translationAfterFightHK"
        ]
      },
      {
        "id": 571,
        "lua_if": "function lua_if()\n-- успех спец. 1 стиля\npenalties = penalties or {}\npenalties.legStrengh = penalties.legStrengh or 0\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.legStrengh == 0 and penalties.closeFight == 0 and style == 1 and (isHistoryContain(553) or isHistoryContain(556) ) \nend",
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"warrior4\",1,1)\nend",
        "calculate": true,
        "text": "Выдать достижение",
        "go_to": [
          "translationAfterFightHK"
        ]
      },
      {
        "lua_if": "function lua_if()\n-- успех спец. 1 стиля\npenalties = penalties or {}\npenalties.legStrengh = penalties.legStrengh or 0\npenalties.closeFight = penalties.closeFight or 0\nreturn penalties.legStrengh == 0 and penalties.closeFight == 0 and style == 1 and (isHistoryContain(553) or isHistoryContain(556) ) \nend",
        "id": 571,
        "text": "Дальше",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "go_to": [
          "translationAfterFightHK"
        ]
      },
      {
        "super_calculate": false,
        "id": 571,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\ntranslationAfterFightHK =\n(UpLine == 1 and 574) or (UpLine ==2 and 609) or (UpLine ==  4 or UpLine == 7 and 631) or (UpLine ==  8 and 856) or 574\nend"
      }
    ]
  },
  {
    "id": 572,
    "text": "   ",
    "answers": [
      {
        "id": 572,
        "text": "Выждать момент для быстрой атаки\nштраф при — к выносливости или — к скорости (укусы змеи, рана на ноге)\n",
        "comment": true,
        "lua_if": "function lua_if()\n\nend"
      },
      {
        "id": 570,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nlocal text = \"\"\nif penalties.stamina == 1 and  penalties.speed == 1 then\n  text = --\"Неудача из-за штрафа к выносливости и скорости.\"\n\n[=[Орнас решил не бросаться сломя голову в необдуманную атаку, а действовать наверняка. Он непривычно медленно маневрировал на несгибающихся ногах, терпеливо защищался и с трудом контратаковал снова и снова, выжидая подходящий момент.\n   Но чем дальше затягивалось такое ожидание, тем меньше сил оставалась у истощённого событиями в храме юноши. Уже через несколько минут он едва двигался из-за сковавшей всё тело неестественной усталости и чуть не упал, когда дроид в резком выпаде нанёс мощный удар. Следующий же взмах виброклинка полоснул юношу по кисти руки, сжимающей световой меч.]=]\n\nelseif penalties.stamina == 1 then\n  text = --\"Неудача из-за штрафа к выносливости.\"\n\n[=[Орнас решил не бросаться сломя голову в необдуманную атаку, а действовать наверняка. Он активно маневрировал, терпеливо защищался и старательно контратаковал снова и снова, выжидая подходящий момент.\n   Но чем дальше затягивалось такое ожидание, тем меньше сил оставалась у истощённого событиями в храме юноши. Уже через несколько минут он едва двигался из-за сковавшей всё тело неестественной усталости и чуть не упал, когда дроид в резком выпаде нанёс мощный удар. Следующий же взмах виброклинка полоснул юношу по кисти руки, сжимающей световой меч.]=]\n\n\nelseif penalties.speed == 1 then\n  text = --\"Неудача из-за штрафа к скорости.\"\n\n[=[Орнас решил не бросаться сломя голову в необдуманную атаку, а действовать наверняка. Он непривычно медленно маневрировал на несгибающихся ногах, терпеливо защищался и с трудом контратаковал снова и снова, выжидая подходящий момент.\n   И вот, когда уже даже его закалённое тренировками тело начала опутывать усталость, дроид допустил ошибку и оказался в невыгодной позиции. Но ослабленные ноги подвели джедая, и пока он приближался к НК-63, тот успел отреагировать: быстрый удар его виброклинка полоснул юношу по кисти руки, сжимающей световой меч.]=]\n\nelse\n  text = --\"Успех.\"\n\n[=[Орнас решил не бросаться сломя голову в необдуманную атаку, а действовать наверняка. Он активно маневрировал, терпеливо защищался и старательно контратаковал снова и снова, выжидая подходящий момент.\n   И вот, когда уже даже его закалённое тренировками тело начала опутывать усталость, дроид допустил ошибку и оказался в невыгодной позиции. Быстрые ноги не подвели джедая: он моментально сократил дистанцию и серией коротких ударов лишил НК-63 оставшихся трёх конечностей.\n– Утверждение... – только и успел произнести дроид, прежде чем Орнас окончательно превратил его корпус в груду обломков.]=]\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 544,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- неудача\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nreturn penalties.stamina == 1 or penalties.speed == 1\nend",
        "lua_do": "function lua_do()\n-- неудача, переход к сцене поражения\nend"
      },
      {
        "id": 574,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nreturn UpLine ==  1 and penalties.stamina == 0 and penalties.speed == 0\nend"
      },
      {
        "id": 609,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nreturn UpLine == 2 and penalties.stamina == 0 and penalties.speed == 0\nend"
      },
      {
        "id": 631,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nreturn (UpLine == 4  or UpLine == 7) and penalties.stamina == 0 and penalties.speed == 0\nend"
      },
      {
        "id": 856,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nreturn UpLine == 8 and penalties.stamina == 0 and penalties.speed == 0\nend"
      },
      {
        "lua_if": "function lua_if()\n-- успех\npenalties = penalties or {}\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\nreturn penalties.stamina == 0 and penalties.speed == 0\nend",
        "super_calculate": false,
        "id": 572,
        "calculate": true,
        "text": "Выдать достижение",
        "lua_do": "function lua_do()\nnewAchieve(\"warrior4\",1,1)\nend"
      }
    ]
  },
  {
    "id": 573,
    "text": "   После падения дроида Орнас больше не опасался, что тот сможет удежаться на полу за счёт цепких ног.\n   Он неторопливо вытянул перед собой руку без меча и сжал раскрытую ладонь в кулак. Невидимая хватка Силы тут же подняла НК-63 в воздух, и он неподвижно завис над полом. Юноша приблизился к противнику и двумя широкими взмахами меча рассёк корпус дроида крест-накрест.\n– Утверждение...– произнёс механический голос и оборвался.\n   Огоньки глаз дроида погасли, и уже безмолвные обломки с грохотом посыпались вниз. Орнас бегло осмотрел повреждения и счёл их критическими. Победа...",
    "answers": [
      {
        "id": 574,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- успех, завершение боя, переход к сцене отдыха\nreturn UpLine == 1\nend"
      },
      {
        "id": 609,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 2\nend"
      },
      {
        "id": 631,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 4 or UpLine == 7\nend"
      },
      {
        "id": 856,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8\nend"
      },
      {
        "super_calculate": false,
        "id": 573,
        "calculate": true,
        "text": "Выдать достижение",
        "lua_do": "function lua_do()\nnewAchieve(\"warrior4\",1,1)\nend"
      }
    ]
  },
  {
    "id": 574,
    "text": "   Орнас деактивировал клинок и убрал рукоять на пояс. Он всматривался в останки дроида и пытался понять, почему тот напал именно таким образом. В голове джедая роилось множество версий, одна другой неправдоподобнее, но теперь Орнасу стало очевидно, что НК-63 не собирался его убивать.\n   Юноша сел прямо на пол, восстанавливая силы и собираясь с мыслями. Если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху за спиральной лестницей. И Орнас чувствовал, что плата за эти ответы может быть непомерно высокой. Он подошёл к ступеням и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nend"
      }
    ]
  },
  {
    "id": 575,
    "text": "   Уважаемый читатель!<s>ufeff\n\n   На этом моменте заканчивается доступная для прохождения в тестовой версии часть квеста. Искренне надеюсь, что Вам понравилось, и буду благодарен за отзывы и сообщения об ошибках. \n\n   Вы можете оставить сохранение на предыдущей странице, чтобы продолжить чтение, когда квест будет завершён.",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn false \nend",
        "lua_do": "function lua_do()\nneutralized = neutralized or 0\nupLineFinal = upLineFinal or 1\nreturn false\n--return neutralized == 0\nend",
        "text": "Дальше",
        "comment": false,
        "id": 888
      },
      {
        "id": 892,
        "text": "Дальше",
        "comment": false,
        "lua_if": "function lua_if()\nneutralized = neutralized or 0\nupLineFinal = upLineFinal or 1\n--return neutralized == 1\nreturn false \nend"
      },
      {
        "id": 1,
        "text": "На первую страницу"
      },
      {
        "id": 583,
        "text": "Промежуточные итоги"
      },
      {
        "id": 6,
        "middle_answer": true,
        "text": "Достижения",
        "lua_do": "function lua_do()\ng.side_menu = 198\ng.technical = g.technical or {}\ng.technical.back = 1\nend",
        "var_set": [
          "global autorun after",
          197
        ]
      }
    ]
  },
  {
    "id": 576,
    "text": "   Орнас остановился и кивнул, не убирая меча. Дроид демонстративно поднял к голове повреждённую руку, бросил на пол виброклинок и отодвинул его в сторону ногой.\n– Восклицание: Вы сделали правильный выбор, мастер! Я готов обменять свою целостность на очень полезную информацию, – как ни в чём не бывало затараторил НК-63. – Хотите, я расскажу всё про эту несчастную девочку? Или про этого молчаливого господина с его дроидом? Вы будете удивлены, но тут есть даже кое-что про Вас... Вернее, про Вашу покойную мать...\n– Откуда ты знаешь что-то про меня? – опешил Орнас.\n– Утверждение: Я знаю о многом, хозяин. И Ваше появление здесь не случайно. Не верите мне – поверьте своим глазам. Это всё есть здесь, в моей базе.\n   Дроид медленно заковылял к своей конторке в центре зала, даже не оборачиваясь на растерянно последовавшего за ним на безопасном расстоянии юношу.",
    "answers": [
      {
        "id": 585,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 1\nend"
      },
      {
        "id": 608,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 2\nend"
      },
      {
        "id": 630,
        "text": "Дальше",
        "lua_if": "function lua_if()\n\nreturn UpLine == 4\nend"
      },
      {
        "id": 855,
        "text": "Дальше",
        "lua_if": "function lua_if()\n\nreturn UpLine == 8 -- условие: пошёл не с дроидом?\nend"
      }
    ]
  },
  {
    "id": 577,
    "text": "   Решив разобраться с утечкой неизвестного газа таким радикальным образом, Орнас отцепил с пояса и был готов активировать...",
    "answers": [
      {
        "id": 578,
        "text": "... ионную гранату",
        "lua_if": "function lua_if()\nreturn (grenade1 or 0) ~= 0\nend",
        "lua_do": "function lua_do()\ngrenade1 = grenade1 or 1 - 1\ntryGrenade577 = \"ion\"\nend"
      },
      {
        "id": 578,
        "text": "... плазменную гранату",
        "lua_if": "function lua_if()\nreturn (grenade4 or 0) ~= 0\nend",
        "lua_do": "function lua_do()\ngrenade4 = grenade4 or 1 - 1\ntryGrenade577 = \"plasma\"\nend"
      },
      {
        "id": 578,
        "text": "... криогенную гранату",
        "lua_if": "function lua_if()\nreturn (grenade3 or 0) ~= 0\nend",
        "lua_do": "function lua_do()\ngrenade3 = grenade3 or 1 - 1\ntryGrenade577 = \"cryo\"\nend"
      },
      {
        "id": 592,
        "text": "Не бросать гранату"
      }
    ]
  },
  {
    "id": 578,
    "text": "   Орнас бросил снаряд так далеко, как только смог, и на всякий случай отошёл на несколько шагов назад. ",
    "answers": [
      {
        "id": 578,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"Только теперь обратившая внимание на действия юноши Десс выпучила глаза и поспешила за ним.<s>\n   \") or\n(UpLine == 3 and \"<s>\n– В этом мог бы быть смысл, – протянул учитель, поглаживая бородку. – Но только если система настроена реагировать должным образом  на экстренное отключение...<s>\n   \") or\n(UpLine == 4 and (tryGrenade577 == \"ion\" and \"<s>\n– Провожу анализ рисков, – пискнул TL-3, спешно прячась за юношу. – Результат: критический...<s>\n   \" or \"<s>\n– Провожу анализ рисков, – пискнул TL-3, спешно прячась за юношу. – Результат: неоправданно высокий уровень.<s>\n   \")) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 578,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\ntryGrenade577= tryGrenade577 or \"ion\"\nlocal text =\n  (tryGrenade577 == \"ion\" and \"Голубоватая вспышка взрыва ионной гранаты на мгновение озарила тёмную шахту. Невидимые волны электромагнитного излучения устремились во все стороны и, как надеялся юноша, должны были вывести из строя систему газоснабжения. Орнас сунул голову внутрь, но не смог понять, изменилось что-нибудь или нет. Во всяком случае, ничего непредвиденного, кажется, не произошло.\") or\n  (tryGrenade577 == \"plasma\" and \"Яркая вспышка заставила юношу зажмуриться, и в следующую секунду его накрыла волна жара. Горячий воздух обжигал горло и щипал глаза. Орнас закашлялся и запоздало заслонил лицо трясущимися руками. Теперь идея с гранатой не казалась оригинальным решением, она стала ещё одной проблемой.<s>\n   Прошло не меньше получаса, прежде чем Орнас прекратил безуспешные попытки с помощью медитации избавиться от неествественно возникшей путаницы в мыслях и осмелился заглянуть во всё ещё горячий почерневший проём.\") or\n  (tryGrenade577 == \"cryo\" and \"За глухим хлопом взрыва криогенной гранаты хлынула волна холода. Как и надеялся джедай, при такой низкой температуре неизвестный газ сжижился и теперь тонкой струйкой стекал по полу.<s>\n   Сдерживая тревогу, Орнас решительно направился внутрь, пока спасительный холод не развеялся.\") or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 578,
        "text": "Реакция спутников ",
        "lua_text": "function lua_text()\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"<s>\n– Ну и методы у тебя... – растерянно протянула вернувшаяся девушка, которая каким-то образом умудрилась убежать от взрыва по коридору почти до самого поворота.\") or\n(UpLine == 3 and \"<s>\n   Магистр Льерсо на несколько секунд зажмурился, а потом лишь покачал головой.\") or\n(UpLine == 4 and (tryGrenade577 == \"ion\" and \"<s>\n   А вот TL-3, кажется, не повезло. Он неподвижно замер, все его индикаторы погасли, а из корпуса больше не доносилось даже слабого шума. Видимо материал шахты сфокусировал излучение гранаты и оно поразило дроида за таким ненадёжным укрытием, как человек.\" or \"<s>\n– Анализ обстановки, – подал голос TL-3. – Концентрация токсина в воздухе – ниже порога определения. Риск термических повреждений – максимальный.\")) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 611,
        "text": "Дальше",
        "lua_if": "function lua_if()\ntryGrenade577 = tryGrenade577 or \"ion\"\nreturn tryGrenade577 == \"ion\"\nend",
        "lua_do": "function lua_do()\nmaster = master or {}\nmaster.confidence = master.confidence or 5\nmaster.confidence = master.confidence <plus> 1\nif UpLine == 4 then\nUpLine = 1\n-- achievement \nend"
      },
      {
        "id": 579,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn tryGrenade577 and tryGrenade577 == \"cryo\"\nend"
      },
      {
        "id": 580,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn tryGrenade577 and tryGrenade577 == \"plasma\"\nend"
      }
    ]
  },
  {
    "id": 579,
    "text": "   Орнас направил всю свою концентрацию на то, чтобы оградиться Силой от обжигающего холода обледеневшего металла, по которому ему предстояло ползти. Не обращая внимания на боль в руках и ногах, джедай уверенно двигался вперёд. К счастью, на его пути не встретилось ни одной развилки и уже за первым поворотом температура окружающей среды стала более комфортной.\n   Без происшествий покрыв оставшуюся дистанцию, Орнас упёрся в ещё одну решётку, за которой виднелся яркий свет. Юноша легко преодолел препятствие и на негнущихся ногах выбрался наружу.",
    "answers": [
      {
        "id": 500,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\npenalties = penalties or {}\npenalties.accuracy = 1\npenalties.legStrenght = 1\ndess.penalty = 1\nend"
      },
      {
        "id": 578,
        "text": "Реакция спутников ",
        "lua_text": "function lua_text()\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and\n\n\"<s>\n   Десс, буркнувшая что-то обидное о неспособности Орнаса думать наперёд и наотрез отказавшаяся лезть в обжигающий холод, выбралась вслед за ним. Выглядела она при этом такой же измотанной.\"\n\n) or\n(UpLine == 3 and \"<s>\n<s>\n Ошибка <s><s>\"UL3p579<s><s>\". Пожалуйста, сообщите о ней автору\") or\n(UpLine == 4 and \"<s>\n– Если тебя это утешит, я не испытал никакого дискомфорта после твоего необдуманного действия, – бодро отозвался TL-3, выбираясь вслед за Орнасом.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 580,
    "text": "   Во всяком случае, газ больше не утекал из повреждённой трубы, хотя теперь разорваны и оплавлены были абсолютно все из них. Может быть, взрыв повредил управляющие системы, а может – просто нечему было больше утекать. Теперь главной проблемой стал обжигающий материал шахты, по которому Орнасу предстояло ползти неопределенно долго.\n   Собрав остатки концентрации, чтобы оградить себя Силой от ожогов, джедай направился внутрь.",
    "answers": [
      {
        "id": 580,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \" К моменту, когда он выбрался куда-то с противоположной стороны длинного неразветвлённого хода, юноша был полностью изнурён, его руки тряслись, а сознание всё так же уплывало.\") or\n(UpLine == 2 and \"<s>\n   Десс буркнула что-то обидное о неспособности Орнаса думать наперёд и наотрез отказалась лезть в это пекло. Однако, когда полностью изнурённый джедай с трясущимися руками и уплывющим сознанием вылез с противоположной стороны длинного неразветвлённого хода, девушка выбралась вслед за ним. Выглядела она при этом такой же измотанной.\") or\n(UpLine == 3 and \"<s>\n<s>\n Ошибка <s><s>\"UL3p580<s><s>\". Пожалуйста, сообщите о ней автору\") or\n(UpLine == 4 and \" К моменту, когда он выбрался куда-то с противоположной стороны длинного неразветвлённого хода, юноша был полностью изнурён, его руки тряслись, а сознание всё так же уплывало.<s>\n– Если тебя это утешит, я не испытал никакого дискомфорта после твоего необдуманного действия, – бодро отозвался TL-3, выбираясь вслед за Орнасом.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 500,
        "text": "Дальше",
        "lua_do": "function lua_do()\npenalties = penalties or {}\npenalties.accuracy = 1\npenalties.reaction = 1\npenalties.stamina = 1\ndess = dess or {}\ndess.penalty = 1\nend"
      }
    ]
  },
  {
    "id": 581,
    "text": "Help buttons for penalties change",
    "answers": [
      {
        "comment": true,
        "id": 581,
        "text": "Оценка состояния Орнаса с учётом штрафов от загадки",
        "lua_text": "function lua_text()\n-- переписать \nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\nstyle = style or 1\n\nlocal stylesTab = {\"меч\", \"Сила\", \"внимательность\", \"техника\", \"милосердие\"}\n\n\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\npenalties.accuracy = penalties.accuracy or 0\npenalties.legStrenght = penalties.legStrenght or 0\n\n--15\n--[=[if bracer == 1 then\npenalties.closeFight = 0\npenalties.stamina = 0\npenalties.speed = 0\npenalties.reaction = 0\nend]=]\n\n\n-- перевод старых штрафов в общую систему\nif location1.bitenArms ~= 0 or \nlocation1.bitenLegs ~= 0 then\n  penalties.reaction = 1\n  penalties.stamina = 1\n  location1.bitenArms = 0\n  location1.bitenLegs = 0\nelseif ornasStat.bloodedLeg ~= 0 then\n  penalties.speed = 1\n  penalties.legStrenght = 1\nornasStat.bloodedLeg = 0\n\nelseif ornasStat.firedArm ~= 0 then\n  penalties.closeFight = 1\n  penalties.accuracy = 1\n  ornasStat.firedArm = 0\nend\n\nlocal text =  \"<s>\n   Орнас прислушался к ощущениям собственного тела после всего, произошедшего в храме. \"\nlocal sapText = \"Стиль: \" .. stylesTab[style] ..\n \"<s>\nближний бой: \" .. penalties.closeFight ..\n\"<s>\nточность: \" .. penalties.accuracy ..\n\"<s>\nскорость: \" .. penalties.speed ..\n\"<s>\nсила ног: \" .. penalties.legStrenght ..\n\"<s>\nвыносливость: \" .. penalties.stamina ..\n\"<s>\nсосредоточенность: \" .. penalties.reaction .. \"<s>\n\"\na_aText = sapText\n\n\nif penalties.closeFight == 1 and penalties.accuracy == 1 then\n  text = text .. \"Руки джедая пронимала мелкая дрожь, а мышцы заметно ослабели. \"\n  \n\nelseif penalties.closeFight == 1 then\n  text = text .. \"Мышцы на руках джедая заметно ослабели. \"\nelseif penalties.accuracy == 1 then\ntext = text .. \"Руки джедая пронимала мелкая дрожь. \"\nend\n\nif penalties.speed == 0 and penalties.legStrenght == 0 then\nelseif penalties.speed == 1 and penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь не только ощутимо замедлился, но вообще с трудом поднимает их. \"\nelseif penalties.speed == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь ощутимо замедлился. \"\nelseif penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша с трудом поднимает их, хотя это и не сказывалось на скорости. \"\nend\n\nif penalties.reaction == 0 and penalties.stamina == 0 then\nelseif penalties.reaction == 1 and penalties.stamina == 1 then\n  text = text .. \"Затуманенное сознание с трудом воспринимало неестественную усталость тела. \"\nelseif penalties.reaction == 1 then\n  text = text .. \"Затуманенное сознание не позволяло подолгу удерживать внимание на чём-то одном. \"\nelseif penalties.stamina == 1 then\n  text = text .. \"Всё тело сковывала неестественная усталость. \"\nend\n\nif penalties.closeFight == 0 and\npenalties.legStrenght == 0 and penalties.stamina == 0 and \npenalties.reaction == 0 and\npenalties.speed == 0 and\npenalties.accuracy == 0 then\n  text = text .. \"Казалось, что за всё это время юноша даже не устал и находился в оптимальной форме.\"\nelse\n  text = text .. \"Орнас задумался, как могли сложиться события, чтобы он оказался здесь в оптимальной форме, но быстро устал, запутавшись в бесконечных <s><s>\"если<s><s>\".\"\nend\n\nreturn sapText --.. text\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "no_transition": true,
        "id": 581,
        "text": "• Штраф: ближний бой",
        "lua_do": "function lua_do()\npenalties.closeFight = penalties.closeFight == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "no_transition": true,
        "lua_do": "function lua_do()\npenalties.accuracy = penalties.accuracy == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "text": "• Штраф: точность",
        "id": 581,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "no_transition": true,
        "id": 581,
        "text": "• Штраф: скорость",
        "lua_do": "function lua_do()\npenalties.speed = penalties.speed == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "no_transition": true,
        "lua_do": "function lua_do()\npenalties.legStrenght = penalties.legStrenght == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "text": "• Штраф: сила ног",
        "id": 581,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "merge": false,
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.bitenArms = 0\nlocation1.bitenLegs = 0\npenalties.stamina = penalties.stamina == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "text": "• Штраф: выносливость",
        "id": 581,
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "no_transition": true,
        "lua_do": "function lua_do()\nlocation1 = location1 or {}\nlocation1.bitenArms = 0\nlocation1.bitenLegs = 0\npenalties.reaction = penalties.reaction == 1 and 0 or 1\nshowPage{id = g.current_id}\nend",
        "text": "• Штраф: реакция",
        "id": 581,
        "merge": false
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\nstyle = (style == 1 and 2) or (style == 2 and 3) or 1\nshowPage{id = g.current_id}\nend",
        "id": 581,
        "text": "Смена стиля",
        "lua_text": "function lua_text()\nstyle = style or 1\nreturn \"Смена стиля. Текущий стиль: \" .. style\nend",
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn true\nend",
        "lua_do": "function lua_do()\nshowPage{id = g.previous_id}\nend",
        "text": "Назад",
        "id": 581,
        "no_transition": true
      }
    ]
  },
  {
    "id": 582,
    "text": "   Эта страница предназначена для автора и участников закрытого тестирования. Если у Вас есть пароль, введите его в специальное поле ниже.",
    "answers": [
      {
        "super_calculate": false,
        "id": 582,
        "text": "[Пароль]",
        "calculate": false,
        "input_var": "password"
      },
      {
        "super_calculate": false,
        "id": 582,
        "text": "Подтвердить ввод",
        "calculate": false,
        "lua_do": "function lua_do()\ng.password = password\nif g.password == \"šåşĥą Ŷû\" or g.password ==  \"čłøśēdTèšt\" then\nalphaTest = 1\ng.alphaTest = 1\ng.partsAvailable = 2\nmessage(\"Авторизация прошла успешно!\")\nelse\ng.alphaTest = 0\nalphaTest = 0\nmessage(\"Авторизация не пройдена!\")\nend\nend"
      },
      {
        "id": 1,
        "text": "На первую страницу",
        "lua_do": "function lua_do()\nif g.password == \"šåşĥą Ŷû\" or g.password ==  \"čłøśēdTèšt\" then\ng.partsAvailable = 2\nend\nend"
      },
      {
        "lua_if": "function lua_if()\ng.partsAvailable  = g.partsAvailable or 1\nreturn g.partsAvailable  == 2\nend",
        "id": 876,
        "lua_do": "function lua_do()\ng.side_menu = 198\ng.side_menu = g.isAuthor == 1 and 104 or 198\ng.right_icon = \"https://shaba-games.ru/elChem/Ispytaniye/Images/right_menu.png\"\nalphaTest = g.alphaTest == 1 and 1 or 0\nend",
        "text": "Начать",
        "middle_answer": true,
        "var_set": [
          "global autorun after",
          197
        ]
      }
    ]
  },
  {
    "id": 583,
    "text": "   Здесь отображены наиболее значимые промежуточные результаты, полученные при исследовании второго этажа храма.<s>ufeff\n\n",
    "answers": [
      {
        "lua_if": "function lua_if()\nneutralized = neutralized or 0\nreturn neutralized == 0\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас преодолел все трудности и добрался до перехода на третий этаж храма •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nneutralized = neutralized or 0\nreturn neutralized == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас был оглушён протокольным дроидом и доставлен на третий этаж пленником •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 1\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас оказался на третьем этаже без спутников •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 2\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас оказался на третьем этаже вместе с Десвиар •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 3\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас оказался на третьем этаже вместе с учителем •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 4\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас оказался на третьем этаже вместе с TL-3 •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 5\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас оказался на третьем этаже вместе с учителем и Десвиар •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 6\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас оказался на третьем этаже вместе с учителем и TL-3 •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 7\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас оказался на третьем этаже вместе с Десвиар и TL-3 •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 8\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас оказался на третьем этаже вместе с учителем, Десвиар и TL-3 •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n UpLineConflictsDess_TL = UpLineConflictsDess_TL or -1\nreturn UpLineConflictsDess_TL == 2\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнасу удалось разрешить конфликт Десвиар и TL-3 •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nUpLineConflictsDess_TL = UpLineConflictsDess_TL or -1\nreturn UpLineConflictsDess_TL ~= 2 and\nUpLineConflictsDess_TL ~= -1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнасу не удалось разрешить конфликт Десвиар и TL-3 •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\n\nUpLineConflictsLlerso_TL = UpLineConflictsLlerso_TL or -1\n \nreturn UpLineConflictsLlerso_TL == 2\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнасу удалось разрешить конфликт учителя и TL-3 •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nUpLineConflictsLlerso_TL = UpLineConflictsLlerso_TL or -1\n \nreturn UpLineConflictsLlerso_TL ~= 2 and UpLineConflictsLlerso_TL ~= -1\n\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнасу не удалось разрешить конфликт учителя и TL-3 •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nUpLineConflictsLlerso_Dess = UpLineConflictsLlerso_Dess or -1\nreturn UpLineConflictsLlerso_Dess == 2\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнасу удалось помочь учителю остаться собранным •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nUpLineConflictsLlerso_Dess = UpLineConflictsLlerso_Dess or -1\nreturn UpLineConflictsLlerso_Dess ~= 2 and UpLineConflictsLlerso_Dess ~=  -1\n\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнасу не удалось помочь учителю остаться собранным •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nDessLost = DessLost or 0\nTL3lost = TL3lost or 0\n\nreturn DessLost ~= 1 and TL3lost == 1\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас потерял TL-3 •",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nDessLost = DessLost or 0\nTL3lost = TL3lost or 0\n\nreturn DessLost == 1 and TL3lost ~= 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас потерял Десвиар •",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nDessLost = DessLost or 0\nTL3lost = TL3lost or 0\n\nreturn DessLost == 1 and TL3lost == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас потерял Десвиар и TL-3 •",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\ndestroyedScrolls = destroyedScrolls or 0\nreturn destroyedScrolls == 3\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Учитель уничтожил древние скрижали с опасными знаниями •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\ndestroyedScrolls = destroyedScrolls or 0\nreturn destroyedScrolls == 2\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Учитель не уничтожил древние скрижали с опасными знаниями •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nmasterInconfident = masterInconfident or 0\nreturn masterInconfident == 4\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Учитель рассказал Орнасу правду о своём «списке» •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nmasterInconfident = masterInconfident or 0\nreturn masterInconfident == 2\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Учитель выразил Орнасу своё недоверие •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nmasterGrudge = masterGrudge or 0\nreturn masterGrudge == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Учитель оказался уязвлён своим поражением от рук протокольного дроида •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nmasterKnowSyntey = masterKnowSyntey or 0\nreturn masterKnowSyntey == 1\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Учитель получил часть интересующих его сведений об агенте ситхов •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\ndess.trait = dess.trait or 0\nreturn dess.trait == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Десвиар предала Орнаса •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nforcedDess =forcedDess or 0\nreturn forcedDess == 1\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Десвиар освободилась от контроля Орнаса и сбежала •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.finalSide = dess.finalSide or \"dark\"\nreturn dess.finalSide == \"light\"\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Орнас почувствовал тягу Десвиар к свету •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.finalSide = dess.finalSide or \"dark\"\nreturn dess.finalSide == \"romantic\"\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас почувствовал странную недосказанность между ним и Десвиар •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nknowWoolen = knowWoolen or 0\nreturn knowWoolen == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• Десвиар получила интересующие её сведения о судьбе своей наставницы •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nknowWoolen = knowWoolen or 0\nreturn knowWoolen == 2\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Десвиар узнала правду о происхождении Орнаса •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nTLsacrificed = TLsacrificed or 0\nreturn TLsacrificed == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• TL-3 пожертвовал собой ради Орнаса •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nknowPhenix = knowPhenix or 0\nreturn knowPhenix == 1\nend",
        "super_calculate": false,
        "id": 583,
        "text": "• TL-3 получил сведения о судьбе своего бывшего хозяина •\n\n",
        "calculate": false,
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nterminalData = terminalData or  0\nreturn terminalData == 0\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас не смог получить никаких сведения из терминала протокольного дроида •\n\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nknowWoolen = knowWoolen or 0\nreturn knowWoolen == 2\nend",
        "super_calculate": false,
        "id": 583,
        "calculate": false,
        "text": "• Орнас узнал, что его мать – бывшая наставница Десвиар •\n\n",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 575,
        "calculate": false,
        "text": "Назад",
        "merge": false
      }
    ]
  },
  {
    "id": 584,
    "text": "   Орнас не стал тратить время на ответ и вместо этого просто продолжил атаку. Хотя мгновение назад джедаю казалось, что его победа неизбежна, дроид защищался максимально собранно и даже отвечал контратаками.\n   Нужно сломить наконец его сопротивление и поставить точку в затянувшемся сражении. Орнас надеялся, что никто и никогда не узнает, с каким трудом ему дался этот бой с каким-то дроидом.\n   ",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nfightStage = 6\nend",
        "text": "fightStage = 6",
        "calculate": true,
        "id": 584
      },
      {
        "id": 570,
        "text": "Обезоружить точным ударом",
        "lua_if": "function lua_if()\n-- штраф при - к концентрации или - к точности движений (укусы змеи, рана на руке)\nreturn true\nend"
      },
      {
        "id": 571,
        "text": "Атаковать после удара ногой",
        "lua_if": "function lua_if()\n-- штраф при - к ближнему бою или - к удару ногой или при повторном использовании удара ногой (рана на руке, рана на ноге)\nreturn true\nend"
      },
      {
        "id": 572,
        "text": "Выждать момент для быстрой атаки",
        "lua_if": "function lua_if()\n-- штраф при - к выносливости или - к скорости (укусы змеи, рана на ноге)\nreturn true\nend"
      },
      {
        "id": 573,
        "text": "Приём с использованием Силы",
        "lua_if": "function lua_if()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints or 1\nreturn hkFight.forcePoints > 0\nend",
        "lua_do": "function lua_do()\nhkFight = hkFight or {}\nhkFight.forcePoints = hkFight.forcePoints - 1 or 1\nend"
      }
    ]
  },
  {
    "id": 585,
    "text": "   Оказавшись за приборами, дроид подключился к одному из разъемов и голопроектор высветил над приборной панелью чертежи, на которых юноша узнал первый этаж храма.\n   Пока Орнас всматривался в карту и мысленно сопоставлял её со своими воспоминаниями, НК-63 увеличил изображение длинного коридора, что-то переключил, и в воздухе медленно закружилась голограмма молодой девушки.\n   Не успел джедай сделать и шага вперёд, чтобы получше рассмотреть изображение, как его поразил оглушающий заряд.\n– Утверждение: Поздравляю, теперь вы нейтрализованы, – заявил дроид, пряча бластер куда-то вглубь корпуса.\n   Джедай ощутил кожей лёгкое покалывание заряда и мешком рухнул на пол. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку безвольное тело юноши и направился к винтовой лестнице.",
    "answers": [
      {
        "comment": false,
        "lua_do": "function lua_do()\nlocal a =\n575\nneutralized = 1\nupLineFinal = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\n--showPage{id = a}\nend",
        "text": "Дальше",
        "id": 575,
        "no_transition": false
      }
    ]
  },
  {
    "id": 586,
    "text": "   Уже через несколько мгновений окружающий мир вернулся к равновесию и относительному подобию порядка.\n– Ты всё-таки живой?.. – скорее удивлённо констатировала факт, чем по-настоящему спросила Десвиар.\n   Орнас развалился прямо на полу коридора, отбитым плечом чувствуя учащённое дыхание Десс, которая лежала здесь же почти вплотную к джедаю. Повязка на её голове съехала, и несколько выбившихся прядей щекотали ухо юноши, хотя он изо всех сил старался не замечать это неудобство. Да, он определённо был живым.\n– А я не должен?..\n– Да нет. В смысле... – замялась девушка и тут же рассмеялась, отчего её волосы заскользили по голове и шее Орнаса. – Я не это имела в виду. Просто до этого ты ходил такой серьёзный и скучный. А тут и испугался, и выругался по-настоящему. Совсем как обычный человек. Настоящий, живой...",
    "answers": [
      {
        "id": 587,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 587,
    "text": "– То есть ты не пыталась меня убить?\n– Убить? Тебя?! – картинно возмутилась Десс. – Да я тебя спасла!\n   Она ловко крутанулась через плечо и оказалась на груди Орнаса. Разлетевшиеся из-под съехавшей повязки волосы рассыпались теперь по лицу юноши и он, не выдержав, начал рьяно чесать глаза под звонкий смех своей спутницы. Кажется, напоминать о причине, из-за которой его пришлось спасать, было бессмысленно.\n   Когда джедай справился наконец с щекоткой и убрал руки, девушка уже встала и осторожно заглядывала внутрь помещения, столь негостеприимно встретившего их. Смущённо отведя взгляд от её не полностью прикрытых самодельной юбкой ног, Орнас тоже поднялся.\n   Подойдя к Десс, он всмотрелся в сумрак небольшого зала. Прямо перед дверью теперь упиралась в низкий потолок массивная шестиугольная колонна.\n– Гляди, – задумчиво протянула Десвиар. – Да не на меня, на пол!",
    "answers": [
      {
        "id": 521,
        "text": "Осмотреть пол",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.preromantic = 1\nend"
      }
    ]
  },
  {
    "id": 588,
    "text": "   Гнев вскипел в Орнасе, и казалось, что искры заблестели в глазах юноши. Он просто не мог допустить такую несправедливость. И его тело начало действовать ещё до того, как он сам до конца осознал, что сейчас произойдёт.\n   Его рука легла на плечо испуганно отступившей на несколько шагов назад Десс.\n– Нет, это ты будешь слушаться меня! – с нажимом выговорил джедай. – Это ты будешь держаться у меня за спиной. Это ты, ты!..\n   Орнас пришёл в себя, когда его до боли сжимающие ключицу девушки пальцы свело в судороге. Сама Десвиар безучастно смотрела в его глаза, не показывая ни страха, ни удивления.\n– Я буду слушаться тебя, – покорно произнесла она. – Я буду держаться у тебя за спиной.\n– Только веди себя более естественно, как будто ничего не случилось...\n– А что, уже что-то случилось? А разговоров-то было...– ухмыльнулась Десс. – Ладно, командир, что дальше?",
    "answers": [
      {
        "id": 132,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = (dess.trust or 0) - 5\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 3\ndess.delayedPenalty = 1\nend"
      }
    ]
  },
  {
    "id": 589,
    "text": "– Ты... Откроешь... Эту... Дверь... – растягивая каждое слово с нажимом отчеканил юноша.\n   Он чувствовал, как сопротивляется его воле сознание Десвиар, видел, как в ней поднимается ярость, как в глазах отражается непреклонная решимость и ужас. И это лишь подогревало азарт Орнаса. Его кровь вскипела, кулаки сжались от напряжения, а взгляд буквально испепелял жертву. И она сломалась.\n– Я открою эту дверь, – растерянно повторила девушка и потянулась к рычагу.\n   Страх во взгляде его спутницы на миг сменился отчаянием, затем и оно отступило. Осталась лишь безропотная слепая покорность.",
    "answers": [
      {
        "id": 590,
        "text": "Дальше",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0 <plus> 3\nend"
      }
    ]
  },
  {
    "id": 590,
    "text": "   Орнас даже не заметил, как Десвиар быстро коснулась чего-то на экране, после чего дверь открылась. Десс молча ждала, пока юноша обратит на неё внимание, и шагнула внутрь только после того, как он жестом показал ей это сделать.\n   Орнас вошёл следом, на секунду зажмурившись от яркого света, заполнявшего стерильно белый коридор. Створки двери моментально сомкнулись за его спиной.\n   В это же мгновение горло юноши сжала невидимая хватка. Он захрипел и упал на колени, не в силах сделать вдох или сказать что-нибудь.\n– Ты чудовище, – зашипела Десс прямо ему на ухо, – и ты получишь по заслугам...\n   Затем мощный толчок отбросил юношу назад, он удалился головой обо что-то твёрдое и потерял сознание.",
    "answers": [
      {
        "super_calculate": false,
        "id": 590,
        "text": "Предательство Десс ",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trait = 1\nnewAchieve(\"smnElseWill\",-1,1)\nend",
        "calculate": true
      },
      {
        "id": 591,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 2\nend",
        "lua_do": "function lua_do()\nUpLine = 1\nforcedDess = 1\nend"
      },
      {
        "id": 871,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7\nend",
        "lua_do": "function lua_do()\nUpLine = 1\nTL3lost = 1\nforcedDess = 1\nend"
      }
    ]
  },
  {
    "id": 591,
    "text": "   Когда джедай пришёл в себя Десс уже не было рядом. Он с удивлением отметил, что та не попыталась убить его, пока была такая возможность, и решил во что бы то ни стало не предоставлять ещё одну.\n   Голова гудела. ",
    "answers": [
      {
        "id": 493,
        "text": "Оценка состояния Орнаса с учётом штрафов от загадки",
        "lua_text": "function lua_text()\n-- переписать \nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\n\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\n--15\nif bracer == 1 then\npenalties.closeFight = 0\npenalties.stamina = 0\npenalties.speed = 0\npenalties.reaction = 0\nend\n\n\n-- перевод старых штрафов в общую систему\nif location1.bitenArms ~= 0 or \nlocation1.bitenLegs ~= 0 then\n  penalties.reaction = 1\n  penalties.stamina = 1\nelseif ornasStat.bloodedLeg ~= 0 then\n  penalties.speed = 1\n  penalties.legStrenght = 1\nelseif ornasStat.firedArm ~= 0 then\n  penalties.closeFight = 1\n  penalties.accuracy = 1\nend\n\nlocal text =  \"<s>\n   Орнас прислушался к ощущениям собственного тела после всего, произошедшего в храме. \"\n\nif penalties.closeFight == 0 and penalties.accuracy == 0 then\nelseif penalties.closeFight == 1 and penalties.accuracy == 1 then\n  text = text .. \"Руки джедая пронимала мелкая дрожь, а мышцы заметно ослабели. \"\nelseif penalties.closeFight == 1 then\n  text = text .. \"Мышцы на руках джедая заметно ослабели. \"\nelseif penalties.accuracy == 1 then\ntext = text .. \"Руки джедая пронимала мелкая дрожь. \"\nend\n\nif penalties.speed == 0 and penalties.legStrenght == 0 then\nelseif penalties.speed == 1 and penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь не только ощутимо замедлился, но вообще с трудом поднимает их. \"\nelseif penalties.speed == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь ощутимо замедлился. \"\nelseif penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша с трудом поднимает их, хотя это и не сказывалось на скорости. \"\nend\n\nif penalties.reaction == 0 and penalties.stamina == 0 then\nelseif penalties.reaction == 1 and penalties.stamina == 1 then\n  text = text .. \"Затуманенное сознание с трудом воспринимало неестественную усталость тела. \"\nelseif penalties.reaction == 1 then\n  text = text .. \"Затуманенное сознание не позволяло подолгу удерживать внимание на чём-то одном. \"\nelseif penalties.stamina == 1 then\n  text = text .. \"Всё тело сковывала неестественная усталость. \"\nend\n\n\n--на всякий случай\npenalties.closeFight = penalties.closeFight or 0\npenalties.legStrenght = penalties.legStrenght or 0 penalties.stamina =penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\npenalties.speed = penalties.speed or 0\npenalties.accuracy = penalties.accuracy or 0\n\n\n\nif penalties.closeFight == 0 and\npenalties.legStrenght == 0 and penalties.stamina == 0 and \npenalties.reaction == 0 and\npenalties.speed == 0 and\npenalties.accuracy == 0 then\n  text = text .. \"Казалось, что за всё это время юноша даже не устал и находился в оптимальной форме.\"\nelse\n  text = text .. \"Орнас задумался, как могли сложиться события, чтобы он оказался здесь в оптимальной форме, но быстро устал, запутавшись в бесконечных <s><s>\"если<s><s>\".\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 480,
        "text": "Осмотреться",
        "lua_do": "function lua_do()\nUpLine = 1\nend"
      }
    ]
  },
  {
    "id": 592,
    "text": "   ",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 0\np = isHistoryContain\ntext =\n(UpLine == 1 and \"Орнас задумчиво стоял, прислонившись к запертой двери, ведущей к выходу на первый этаж. Ярко освещенный коридор уходил влево и скрывался из вида за поворотом.\") or\n(UpLine == 2 and \"Орнас задумчиво стоял возле Десвиар, которая прислонилась к запертой двери и придирчиво разглядывала свои пальцы на руках. Ярко освещенный коридор уходил влево и скрывался из вида за поворотом.\") or\n(UpLine == 3 and (isHistoryContain(622) and poisonGasIsOn == 1 and \"Ярко освещенный коридор уходил влево и скрывался из вида за поворотом. Учитель замер у запертой двери и внимательно следил за каждым движением своего подопечного.<s>\n– Ну что, стоит мне заняться утечкой газа? – спросил он юношу, когда их взгляды встретились.<s>\n   Орнас поджал губы, не будучи до конца уверенным в таком предложении.\" or \"Учитель замер у запертой двери и внимательно следил за каждым движением Орнаса. Ярко освещенный коридор уходил влево и скрывался из вида за поворотом.\")) or\n(UpLine == 4 and (\"Ярко освещенный коридор уходил влево и скрывался из вида за поворотом. \" .. ( TL3.dialogParts < 6 and droidText() or \"Орнас пытался собраться с мыслями, но в нескольких шагах непрерывно ерзал и крутился TL-3. Казалось, дроид пытался компенсировать вынужденное длительное бездействие.\" ).. (p(625) and \"\" or \"<s>\n   Дроид немного помолчал.<s>\n– Я мог бы пока осмотреть вентиляцию... – заметил он осторожно через какое-то время.\"))) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "id": 493,
        "text": "Динамическое описание локации,  реакции компаньонов,\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_if": "function lua_if()\nreturn g.current_id == 592\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\npoisonGasIsOn = poisonGasIsOn or 1\nreturn g.current_id == 592 and poisonGasIsOn == 1\nend",
        "id": 493,
        "text": "Предложение разобраться с утечкой",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal p = isHistoryContain\ntext =\n\n(UpLine == 4 and p(625) and \"<s>\n– Я мог бы пока устранить утечку газа, – как будто невзначай бросил он, в очередной раз оказавшись рядом.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\npanelDetected480 = panelDetected480 or 0\ntext = panelDetected480 == 0 and \"Справа от двери коридор заканчивался тупиком, но даже поверхностный взгляд позволил юноше найти кое-что необычное – небольшую вмятину на панели и более тёмные швы на её стыках. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.\" or \"Справа от двери коридор заканчивался тупиком. Возле приставленных к стене решётки и помятой панели обшивки зияла тёмная шахта вентиляции.\"\nreturn \"<s>\n   \" .. text\nend",
        "id": 592,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn g.current_id == 592\nend",
        "merge": true
      },
      {
        "id": 517,
        "text": "Исследовать подозрительную панель",
        "lua_if": "function lua_if()\nreturn panelDetected480 and panelDetected480 == 0\nend",
        "lua_do": "function lua_do()\npanelDetected480 = 1\nend"
      },
      {
        "id": 496,
        "text": "Пройти по коридору"
      },
      {
        "id": 497,
        "text": "Залезть в вентиляцию",
        "lua_if": "function lua_if()\npanelDetected480 = panelDetected480 or 0\nlocal p = isHistoryContain\nlocal a = 0\n\na = panelDetected480 == 1 and a or a <plus> 1\nif UpLine == 4 then\na = (UpLine == 4 and (p(625) or p(624)) and a) or a <plus> 1\nend\nreturn a == 0\nend"
      },
      {
        "id": 625,
        "text": "Залезть в вентиляцию",
        "lua_if": "function lua_if()\n-- первая попытка залезть вместе с дроидом\npanelDetected480 = panelDetected480 or 0\nlocal p = isHistoryContain\nlocal a = 0\n\nreturn panelDetected480 == 1 and UpLine == 4 and not (p(625) or p(624))\nend"
      },
      {
        "id": 577,
        "text": "Бросить в систему вентиляции гранату",
        "lua_if": "function lua_if()\ngrenade = grenade or 0\nreturn panelDetected480 and panelDetected480 == 1 and grenade ~= 0 and poisonGasIsOn == 1 \nend",
        "need": [
          497
        ]
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 2 and poisonGasIsOn == 1\nend",
        "id": 519,
        "text": "Устранить утечку газа с помощью Силы",
        "need": [
          497,
          -519
        ],
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "id": 624,
        "text": "Согласиться с предложением TL-3",
        "lua_if": "function lua_if()\nlocal p = isHistoryContain\npanelDetected480 = panelDetected480 or 0\nreturn UpLine == 4 and not p(625) and panelDetected480 == 1 and g.current_id == 592\nend"
      },
      {
        "id": 501,
        "text": "Принять предложение TL-3",
        "lua_if": "function lua_if()\nlocal p = isHistoryContain\nreturn ((UpLine == 4 and (p(624) or p(626))) or\nUpLine == 6 or\nUpLine == 7 or\nUpLine == 8) and poisonGasIsOn == 1\nend"
      },
      {
        "id": 502,
        "text": "Принять предложение учителя",
        "lua_if": "function lua_if()\nlocal p = isHistoryContain\nreturn  (UpLine == 3 or\nUpLine == 5 or UpLine == 6 or\nUpLine == 8) and poisonGasIsOn == 1 \nend",
        "need": [
          622
        ]
      },
      {
        "id": 601,
        "text": "Рассказать Десс о газе",
        "lua_if": "function lua_if()\nreturn UpLine == 2 and poisonGasIsOn == 1 \nend",
        "need": [
          497,
          -601
        ]
      },
      {
        "id": 602,
        "text": "Попросить Десс разобраться с газом",
        "need": [
          601,
          -602
        ],
        "lua_if": "function lua_if()\nreturn poisonGasIsOn == 1 \nend"
      },
      {
        "id": 622,
        "text": "Рассказать учителю о газе",
        "lua_if": "function lua_if()\nreturn UpLine == 3 and poisonGasIsOn == 1 \nend",
        "need": [
          497,
          -622
        ]
      }
    ]
  },
  {
    "id": 593,
    "text": "   Десвиар без промедления направилась в левую часть помещения, туда, где блестящее стирильностью пространство было заставленно разным непонятным оборудованием. Там располагались и несколько десятков бакта-камер, внутри каждой из которых неподвижно замерло сразу по два, а то и по три ящероподобных создания. В нескольких прозрачных боксах из тёмно-фиолетового стекла извивались отделённые друг от друга высокими перегородками не то маленькие змеи, не то крупные черви. Над одним из столов возле огромного странного прибора медленно прокручивалась голограмма, которую джедай издалека принял за изображение головы ранкора. Проекция моментально погасла, когда девушка подошла слишком близко.\n   Десс искала что-то, подолгу задерживаясь у каждой камеры с бактой, небрежно касаясь панелей и экранов, вглядываясь в очертания за мутным стеклом. Искала и не могла найти.",
    "answers": [
      {
        "id": 594,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 594,
    "text": "   Когда Орнас нагнал спутницу, она уже обошла каждый уголок в этой части комнаты и осмотрела всё, что посчитала достойным своего внимания.\n   Она была сосредоточена, испугана, рассержена, растеряна, упорна и яростна. Она не обращала внимания на юношу и не подстраивалась под него, пытаясь создать какой-то один нужный образ. Как лучи заходящего солнца со временем окрашивают небо в иные цвета, её глаза каждое мгновение озаряли лицо разными и порой несовместимыми оттенками эмоций, неестественными и зыбкими. Наверное, это и была настоящая Десвиар: рыцарь-джедай, пленница древнего храма, преданная и освобождённая, ищущая и не нашедшая.\n   Наконец она закрыла глаза и в воцарившейся тишине тихо заговорила, на этот раз обращаясь к Орнасу.\n– Я чувствовала её присутствие так ясно, так чётко видела её силуэт в одной из капсул, когда закрывала глаза и доверялась Силе...",
    "answers": [
      {
        "id": 595,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 595,
    "text": "– Твоя бывшая наставница? – уточнил юноша, и Десс утвердительно кивнула. – Тёмная сторона Силы здесь очень сильна, она могла исказить твоё восприятие.\n– Пожалуй, могла...\n   Орнас видел, что девушка колеблется и решил спросить прямо.",
    "answers": [
      {
        "id": 596,
        "text": "– Ты не собираешься возвращаться к джедаям, верно?",
        "lua_if": "function lua_if()\n--[=[Набор вопросов в зависимости от тьмы/света Орнаса, ответ в зависимости от доверия Десс\n\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\nreturn ornasStat.darkside > -3 and ornasStat.darkside < 3\n]=]\n\nreturn true\nend",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = (dess.trust or 0) <plus> 1\nend"
      },
      {
        "id": 597,
        "text": "Это ты напала на свою наставницу тогда?",
        "lua_text": "function lua_text()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\nreturn ornasStat.darkside > 0 and \"– Это ты напала на свою наставницу тогда?\" or \"– Твоя наставница не нападала на тебя первой, верно?\"\nend"
      }
    ]
  },
  {
    "id": 596,
    "text": "– Нет, не собираюсь, – ответила Десвиар и почти незаметно улыбнулась.\n   Вопрос Орнаса явно отвлёк её от более неприятных мыслей, и её лёгкая улыбка излучала благодарность.\n– Займусь чем-нибудь интересным, – увлечённо продолжала девушка. – Может быть попробую то, что под запретом у джедаев...\n   ",
    "answers": [
      {
        "id": 596,
        "text": "Вариативное описание",
        "lua_text": "function lua_text()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\ndess = dess or {}\ndess.trust  = dess.trust or 0\ndess.preromantic = dess.preromantic or 0\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\n\nlocal text = dess.trust > 9 and dess.preromantic == 1 and \n[=[Её прямой взгляд заставил юношу смутиться, но она выжидающе смотрела ему в глаза и, кажется, в кои-то веки говорила серьёзно.\n– Ведь джедаям почти ничего нельзя, – вновь заговорила Десс, – из того, чем живут обычные люди...]=]\nor \n[=[Её взгляд заставил юношу смутиться, но уже через мгновение она расхохоталась.\n– Да нет, не то, о чём ты подумал, – весело продолжила Десс. – Просто джедаям почти ничего нельзя, на самом-то деле.]=]\n\ntext = text .. ((ornasStat.darkside > -3 and ornasStat.darkside < 3 and (dess.trust > 9 and dess.preromantic == 1) and\n-- старт предромантики\n[=[ А ты бы не хотел так? Иметь что-то только своё, не заботится обо всей вселенной сразу?..\n– Не контролировать постоянно свои эмоции,  – почти непроизвольно продолжил Орнас, – любить кого-то?..\n   Они замолчали, глядя друг на друга. Казалось, последний, так и не высказанный вопрос окатил обоих ледяной водой. Они почти одновременно отвернулись, словно боясь выдать другому ответ на него.]=])  or (ornasStat.darkside > -3 and ornasStat.darkside < 3 and (dess.trust <10 or dess.preromantic == 0) and\n-- старт ветки \"серого\" Орнаса\"\n[=[ \n– Джедаи отказываются от чего-то, но получают взамен много больше, – подумав, ответил Орнас. – В конце концов, всегда можно уйти из Ордена и использовать полученные знания так, как считаешь нужным.\n– Вот именно, – вновь улыбнулась Десс.]=])\n\n\nor (ornasStat.darkside > 2 and\n[=[ \n– Наверное, без этих лишений сложно воспитать джедаев, – подумав, ответил Орнас. – Таких, какими их хочет видеть Верховный Совет...\n– Ты тоже чувствуешь, что это неправильно? – моментально оживилась Десвиар. – Получается, нас специально сделали такими?\n   Юноша не испугался ни вспыхнувшей ярости в глазах своей спутницы, ни её сжавшихся в кулаки ладоней. Всё это было слишком знакомо ему. И сейчас он загорался тем же пламенем.\n– Или просто не смогли сломать в нас то, что им так мешает...\n]=]) or\n[=[ \n– Джедаи самоотвержены, – подумав, ответил Орнас. – Мы отказываемся от нормальной жизни, чтобы она была у других.\n– Да, – вздохнула Десвиар, – и я вижу, что это не пустые слова для тебя...\n]=])\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 598,
        "text": "Дальше",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\ndess = dess or {}\ndess.trust  = dess.trust or 0\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\n\nif dess.trust > 9 and ornasStat.darkside < 2 then\n  dess.finalSide = \"light\"\nornasStat.darkside = ornasStat.darkside - 1\nelseif ornasStat.darkside > 2 then\n  ornasStat.darkside = ornasStat.darkside <plus> 2\nelseif dess.trust > 9 and dess.preromanic == 1 and (ornasStat.darkside > -3 and ornasStat.darkside < 3) then\n  dess.finalSide = \"romantic\"\nelse\nend\ndess.finalSide = dess.finalSide or \"dark\"\nend"
      }
    ]
  },
  {
    "id": 597,
    "text": "   Десс поджала губы – она явно ждала этот вопрос и он был ей неприятен.\n",
    "answers": [
      {
        "id": 597,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\ndess = dess or {}\ndess.trust  = dess.trust or 0\nlocal text = \"\"\n\n  if dess.trust < 9 then\n    text = [=[– Я уже рассказала, что тогда произошло, – холодно проговорила она. – Если не доверяешь моим словам, то какой смысл спрашивать меня о том же самом снова?\n   Орнас чувствовал, что разговор на эту тему задевает девушку за живое, но при сложившимся между ними доверии надеяться на искренний ответ и впрямь было бы слишком наивно. Впрочем, возможно это и к лучшему.]=]\ndess.trust = dess.trust - 3\n  elseif ornasStat.darkside <0 then\n      text = [=[– Верно, – наконец ответила она. – Но всё совсем не так просто, как ты думаешь...\n– И ты хотела найти её, чтобы отомстить?\n– Нет, что ты, – занервничала Десс. – Хотя если по правде... Да, как только вспомнила обо всём.\n– А сейчас – нет?\n– Знаешь, я же не всегда была такой, как сейчас. Это место изменило меня... Нас всех. А теперь я присмотрелась к тебе и вспомнила, какой была раньше и какой хотела стать.\n– Ты очень многого обо мне не знаешь... – задумчиво ответил юноша. – Пусть прошлое останется в прошлом. Ты действуешь здесь и сейчас, никогда не поздно выбрать правильную сторону.\n]=]\n  else\n    text = [=[– Верно, – наконец ответила она. – Но всё совсем не так просто, как ты думаешь...\n– Ты решила напасть на человека, который воспитывал и обучал тебя?\n– Не строй из себя святого, – огрызнулась девушка. – Я вижу тебя насквозь: ты сам поступил бы так же.\n– Я не об этом, – отмахнулся Орнас. – Разве у тебя были хоть какие-то шансы?\n– Не стоит недооценивать мои способности...\n   Что-то яростное вспыхнуло во взгляде Десвиар, но тут же погасло. Она неловко поправила прядь волос и кротко улыбнулась.\n– Не будем об этом. Это всё в прошлом. В очень далёком прошлом...]=]\n  end\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 598,
        "text": "Дальше ",
        "lua_do": "function lua_do()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\ndess = dess or {}\ndess.trust  = dess.trust or 0\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\n\nif dess.trust > 9 and ornasStat.darkside < 0 then\n  dess.finalSide = \"light\"\nornasStat.darkside = ornasStat.darkside - 1\nelse\nend\ndess.finalSide = dess.finalSide or \"dark\"\nend"
      }
    ]
  },
  {
    "id": 598,
    "text": "   После непродолжительной паузы ",
    "answers": [
      {
        "id": 598,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n\ndess = dess or {}\ndess.finalSide = dess.finalSide or \"dark\"\n\nlocal text =(\n\ndess.finalSide == \"romantic\" and \"Десвиар, так и не проронив больше ни слова, направилась вглубь помещения. Джедай поспешил за ней, и к небольшой конторке в самом центре они подошли вместе. Неловкое молчание спутников самым бесцеремонным образом нарушил протокольный дроид, вышедший им навстречу.\"\n\n) or (\n\ndess.finalSide == \"light\" and [=[Десвиар, тепло улыбнувшись юноше, развернулась и направилась вглубь помещения.\n– Идём, – позвала она Орнаса. – Нужно заканчивать с этим всем.\n   Джедай поспешил за ней, и к небольшой конторке в самом центре они подошли вместе. Протокольный дроид вышел им навстречу.]=]\n\n) or\n\n[=[Десвиар взглянула юноше в глаза, а затем развернулась и направилась вглубь помещения.\n– Идёшь? – позвала она Орнаса.\n   Джедай поспешил за ней, и к небольшой конторке в самом центре они подошли вместе. Протокольный дроид вышел им навстречу.]=]\n\nreturn text ..\n[=[ \n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс он механическим голосом.\n   Дроид попытался приблизиться к Орнасу с неуклюже раскинутыми для объятий руками, и тот отступил на шаг, бросив вопросительный взгляд на Десс. Девушка выглядела не менее ошарашенной.\n– Удивление: Хозяин, вы не узнаёте меня? – продолжал секретарь, наступая. – Я НК-63, ваш протокольный дроид и верный слуга.\n]=]\nend",
        "merge": true
      },
      {
        "id": 528,
        "text": "Дальше",
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.penalty = dess.penalty or 0\n\nreturn dess.penalty ~= 1\nend"
      },
      {
        "id": 606,
        "text": "Дальше",
        "lua_if": "function lua_if()\ndess = dess or {}\ndess.penalty = dess.penalty or 0\n\nreturn dess.penalty == 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.finalSide = dess.finalSide or \"dark\"\n\nif dess.finalSide == \"romantic\" then\n   newAchieve(\"smthMore\",1,1)\nend\n\nend",
        "text": "Выдать достижение",
        "id": 598,
        "calculate": true
      }
    ]
  },
  {
    "id": 599,
    "text": "– Но зачем?.. – только и смог спросить Орнас, когда к нему вернулся дар речи.\n– Я подумала, вдруг это тебе ещё пригодится? – усмехнулась Десс и подтолкнула в его сторону ногой одну из отрубленных конечностей дроида.\n   В металлической ладони был зажат световой меч. Юноша спешно потянулся к поясу, но, разумеется, ничего там не обнаружил. Он подобрал своё оружие и уже по-другому взглянул на спутницу, так и застывшую с самодовольной ухмылкой. Она не только смогла мгновенно раскрыть ловкого воришку, но и расправилась с ним грациозно и эффективно, не выполнив ни одного лишнего движения.\n– Спасибо, – выдавил из себя джедай наконец, когда рукоять меча заняла привычное место на поясе.\n– Теперь мы в расчёте, – беззлобно рассмеялась девушка и пояснила, увидев растерянный взгляд  Орнаса. – Ты вернул мне мой клинок, а я тебе – твой.",
    "answers": [
      {
        "id": 600,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 2\nend"
      },
      {
        "id": 717,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7\nend"
      }
    ]
  },
  {
    "id": 600,
    "text": "   Спутники тщательно исследовали конторку дроида с множеством экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. Ехидные комментарии Десвиар хоть не могли полностью скрыть общее разочарование результатами осмотра, но достаточно развеселили приунывшего после своей оплошности Орнаса, и он даже адресовал собеседнице несколько ответных колкостей.\n   Покинув бесполезное рабочее пространство, они, не переговариваясь, направились к одинокой винтовой лестнице в дальней от входа части помещения. Миновали остатки какого-то другого охранного дроида и в нерешительности замерли у первой ступени.\n– Ну что, – протянула девушка, – последний рывок?\n   Джедай кивнул. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока. Орнас украдкой взглянул на Десс и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 2\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nend"
      }
    ]
  },
  {
    "id": 601,
    "text": "– Там внутри какой-то газ, – выпалил Орнас. – Одна из трубок повреждена.\n   Десс приподняла брови:\n– Думаешь, это опасно?\n– Это может быть всё что угодно, – пожал плечами юноша. – Хотя никакого запаха я не почувствовал.\n– Сможешь отключить газ?\n– Разве что где-нибудь с другой стороны...",
    "answers": [
      {
        "id": 592,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 602,
    "text": "   Орнасу было неловко просить Десвиар: он сам объяснял, как ему важно всё сделать самому. Но сейчас это казалось разумной просьбой.\n– Может быть ты пролезешь туда первой и сможешь отключить эту штуку?\n– Не стоит... – неожиданно мягко и тихо ответила Десвиар.",
    "answers": [
      {
        "id": 603,
        "text": "Подчинить волю Десс, чтобы заставить её пойти первой",
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\nreturn force_ab == 1\nend",
        "lua_do": "function lua_do()\nforcedDess = 1\nend"
      },
      {
        "id": 592,
        "text": "Закончить разговор",
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trust = dess.trust or 0\n\ndess.trust = dess.trust -1\nend"
      }
    ]
  },
  {
    "id": 603,
    "text": "   Отказ девушки разозлил Орнаса. Его глаза вспыхнули, а голос стал тихим и безапелляционным.\n– Ты... Залезешь туда... Передо мной, – гневно отчеканил джедай. – И устранишь утечку... Любым способом.\n– Я залезу туда перед тобой, – послушно повторила Десвиар, – и устраню утечку любым способом.\n   Она  посмотрела в глаза Орнаса. В её взгляде догорали искры ужаса и оставалась холодная безразличная бледность.\n– И дай мне знать, когда будет безопасно идти, – бросил ей в след юноша, когда Десс уже наклонилась, чтобы пробраться в шахту.",
    "answers": [
      {
        "id": 604,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 604,
    "text": "   Через несколько минут беспокойного ожидания, когда юноша уже совсем остыл и начал ужасаться своему поступку, из шахты донесся глухой голос Десс.\n– Теперь путь безопасен, можно идти.\n   Джедай забрался внутрь и начал ползти вперёд. Трубка, из которой до этого шёл газ, оставалась разорвана, но признаков утечки не было видно. Кажется, девушка и впрямь смогла отключить систему откуда-то снаружи.\n   Без происшествий преодолев весь путь по вентиляции, Орнас добрался до зияющего ярким светом выхода. Он выполз и начал отряхивать от пыли одежду, когда стоящая рядом Десс вытянула руку. Мощный импульс Силы отбросил юношу в стену.\n– Ты чудовище! – зло зашипела девушка, подходя к распластавшемуся на полу джедаю. – И ты получишь по заслугам...\n   Сильный удар в голову – и юноша потерял сознание.",
    "answers": [
      {
        "id": 605,
        "text": "Дальше",
        "lua_do": "function lua_do()\nUpLine = 1\ndess = dess or {}\ndess.trait = 1\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\nornasStat.darkside = ornasStat.darkside <plus> 4\n\n\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"smnElseWill\",-1,1)\nend",
        "text": "Выдать достижение",
        "id": 604,
        "calculate": true
      }
    ]
  },
  {
    "id": 605,
    "text": "   Когда джедай пришёл в себя, Десс уже бесследно исчезла. Он с удивлением отметил, что та не попыталась убить его, пока была такая возможность, и решил во что бы то ни стало не предоставлять ещё одну.\n   Голова гудела. ",
    "answers": [
      {
        "id": 500,
        "text": "Осмотреться"
      }
    ]
  },
  {
    "id": 606,
    "text": "– Я не понимаю... – только и смог выдавить Орнас. – Что происходит?\n   Юноша вновь повернулся к спутнице, лицо которой теперь было скорее выжидающим, чем растерянным. Дроид моментально воспользовался этим и сгрёб в охапку джедая, который, тем не менее, ловко выскользнул из жёстких объятий и вновь отступил на несколько шагов.\n   Яркий зелёный луч прочертил пространство широкой дугой, и на пол с глухим стуком упала отсечённая рука неожиданно обретённого верного слуги Орнаса. Следующим взмахом светового меча Десвиар попыталась поразить голову НК-63, но он удивительно ловко увернулся. Затем в его уцелевшей руке словно из ниоткуда возник бластер, несколько оглушающих зарядов поразили девушку, и она рухнула на пол. Кажется, произошедшее в храме не лучшим образом отразилось на её состоянии.\n   За эти несколько мгновений Орнас попытался выхватить свой меч и с удивлением обнаружил его пропажу. Ещё несколько бесконечно долгих секунд он безуспешно пытался найти его.",
    "answers": [
      {
        "id": 607,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 607,
    "text": "   Джедай отпрыгнул в сторону как раз вовремя – следующая серия выстрелов дроида расчертила то место, где он только что находился. В прыжке он использовал Силу, чтобы призвать в свою ладонь клинок Десвиар, и активировал его, готовясь наконец принять бой.\n   НК-63 быстро оценил ситуацию, и бластер в его руке исчез, уступив место виброклинку. Проследив за направлением взгляда Орнаса, дроид схватил ногой бесчувственную девушку и с силой швырнул её в юношу, сразу же ринувшись в атаку. Джедаю потребовалось всё его мастерство, чтобы мягко подхватить Силой тело Десвиар, бережно направить его внутрь конторки, где, как он надеялся, будет безопасно, и одновременно с тем уклониться от натиска противника.",
    "answers": [
      {
        "id": 560,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 608,
    "text": "   Оказавшись за приборами, дроид, не обращая внимание на бесчувственное тело Десвиар, подключился к одному из разъемов и голопроектор высветил над приборной панелью чертежи, на которых юноша узнал первый этаж храма.\n   Пока Орнас всматривался в карту и мысленно сопоставлял её со своими воспоминаниями, НК-63 увеличил изображение длинного коридора, что-то переключил, и в воздухе медленно закружилась голограмма молодой девушки. Десс.\n   Не успел джедай сделать и шага вперёд, чтобы получше рассмотреть изображение, как его поразил оглушающий заряд.\n– Утверждение: Поздравляю, теперь вы нейтрализованы, – заявил дроид, пряча бластер куда-то вглубь корпуса.\n   Джедай ощутил кожей лёгкое покалывание заряда и мешком рухнул на пол прямо возле Десс. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку безвольные тела обоих спутников и направился к винтовой лестнице.",
    "answers": [
      {
        "comment": false,
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocal a =\n583\nupLineFinal = 2\nneutralized = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\n--showPage{id = a}\nend",
        "no_transition": false
      }
    ]
  },
  {
    "id": 609,
    "text": "empty",
    "answers": [
      {
        "id": 609,
        "text": "   Орнас деактивировал клинок и убрал рукоять на пояс. Он сразу же направился в центр помещения, туда, где среди экранов и панелей управления осталась лежать Десс. Она всё ещё оставалась парализована оглушающим зарядом, но других травм при быстром осмотре юноша не обнаружил.\n   Он вложил рукоять меча в её ладонь и отправился искать собственный клинок. Джедай прочесал весь зал и осмотрел каждый сантиметр пола. И почти не удивился, найдя своё оружие в той самой отрубленной Десвиар конечности дроида. Во всяком случае теперь было ясно, зачем она вообще напала.\n– Он не собирался нас убивать, – донёсся до Орнаса её сдавленный голос.\n   Десс пришла в себя и теперь сидела на полу, растирая затёкшие мышцы.\n– Похоже на то, – отозвался джедай. – Вот только почему?",
        "lua_if": "function lua_if()\nafterRage = afterRage or 0\nreturn afterRage == 0\nend",
        "merge": true
      },
      {
        "id": 609,
        "text": "   Орнас вернулся в центр помещения, туда, где среди экранов и панелей управления осталась лежать Десс. Она всё ещё оставалась парализована оглушающим зарядом, но других травм при быстром осмотре юноша не обнаружил.\n   Он вложил рукоять меча в её ладонь и отправился искать собственный клинок. Джедай прочесал весь зал и осмотрел каждый сантиметр пола. И почти не удивился, найдя своё оружие в той самой отрубленной Десвиар конечности дроида. Во всяком случае теперь было ясно, зачем она вообще напала.\n– Он не собирался нас убивать, – донёсся до Орнаса её сдавленный голос.\n   Десс пришла в себя и теперь сидела на полу, растирая затёкшие мышцы.\n– Похоже на то, – отозвался джедай. – Вот только почему?",
        "lua_if": "function lua_if()\nafterRage = afterRage or 0\nreturn afterRage == 1\nend",
        "merge": true
      },
      {
        "id": 610,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 610,
    "text": "   Спутники тщательно исследовали конторку дроида с множеством экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. Ехидные комментарии Орнаса хоть и не могли полностью скрыть общее разочарование результатами осмотра, но достаточно развеселили приунывшую после короткого сражения Десвиар, и она даже адресовала юноше несколько ответных колкостей.\n   Покинув бесполезное рабочее пространство, они, не переговариваясь, направились к одинокой винтовой лестнице в дальней от входа части помещения. Миновали остатки какого-то другого охранного дроида и в нерешительности замерли у первой ступени.\n– Ну что, – протянула девушка, – последний рывок?\n   Джедай кивнул. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока. Орнас украдкой взглянул на Десс и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 2\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nsaveDessFromHK = 1\nend"
      }
    ]
  },
  {
    "id": 611,
    "text": "   ",
    "answers": [
      {
        "id": 611,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = p == 578 and \"Орнас ещё раз заглянул в шахту вентиляции и в задумчивости вновь отошёл к двери. \" or \"Орнас выбрался из системы вентиляции и отряхнул колени. В раздумьях он подошёл к запертой двери, ведущей к площадке перед лестницей. \"\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 611,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nTL3 = TL3 or {}\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 0\n\n\nlocal text = (UpLine == 1 and \"\") or\n(UpLine == 2 and \"Десвиар с любопытством взглянула на джедая, затем брезгливо коснулась пальцем отодвинутой в сторону решётки. Если у неё и были какие-то мысли об этом направлении, то делиться ими она не торопилась.\") or\n(UpLine == 3 and (isHistoryContain(622) and poisonGasIsOn == 1 and \"Магистр Льерсо поправил сдвинутую Орнасом решётку и выжидающе посмотрел на подопечного.<s>\n– Ну что, стоит мне заняться утечкой газа? – спросил он юношу, когда их взгляды встретились.<s>\n   Орнас поджал губы, не будучи до конца уверенным в таком предложении.\" or \"Магистр Льерсо поправил сдвинутую Орнасом решётку и выжидающе посмотрел на подопечного.\") ) or\n(UpLine == 4 and (TL3.dialogParts < 5 and droidText() or \"TL-3 подкатился к отодвинутой решётке и направил внутрь шахты какой-то крохотный датчик.\") ) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\npoisonGasIsOn = poisonGasIsOn or 1\nreturn poisonGasIsOn == 1\nend",
        "id": 493,
        "text": "Предложение разобраться с утечкой",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal p = isHistoryContain\ntext =\n\n(UpLine == 4 and (p(625) or p(624)) and \"<s>\n   Астромех на какое-то время замер, только мигал какой-то индикатор на его голове.<s>\n– Может я пока займусь утечкой? – предложил он после того, как закончил сканирование.\") or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"master and TL-3 text\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 592,
        "text": "Новый ответ. введите текст",
        "run": [
          592
        ]
      }
    ]
  },
  {
    "id": 612,
    "text": "   Пространство справа от центра было равномерно заполнено архивными полками. Обычные голо-диски с данными, древние манускрипты в кожанных чехлах и даже несколько рядов глиняных табличек, испещрённых затейливыми символами, покоились здесь и сулили многие часы кропотливых исследований.\n– Не могу поверить... – еле слышно прошептал магистр Льерсо. – Просто невероятно.\n   К удивлению Орнаса, направился старый джедай именно к табличкам. Должно быть, чувствовал в них что-то особенное. Что-то даже более важное, чем голокроны — изящное сплетение высоких технологий и филигранного владения Силой, хранящие мудрость и даже часть личности создавших их мастеров. Эти бесценные артефакты стояли здесь открыто и даже немного небрежно – не чета секретному архиву Храма джедаев.\n– Что это? – наконец осмелился подать голос юноша.\n   Учитель пристально посмотрел прямо в глаза Орнасу, словно оценивая, насколько тот заслужил знать ту или иную информацию.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n-- !!! добавить нужный коэффициент для конвертации: проход через вентиляцию - только идеальный, проход через сапёра - с запасом \n-- 8 максимум при чистом продходе без учёта штрафа загадки, можно оставить 6 проходным\nline6 = line6 or {}\nline6.teacher = line6.teacher or 0\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 7\n\nmaster = master or {}\nmaster.confidence = (UpLine == 6 and line6.teacher) or (UpLine == 8 and UpLine8LlersoRelation) or master.confidence\nend",
        "calculate": true,
        "text": "Пересчет доверия для линии 6",
        "id": 612
      },
      {
        "id": 613,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- доверие \nmaster = master or {}\nmaster.confidence = master.confidence or 0\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\nreturn master.confidence > 6 and ornasStat.darkside < 1\nend",
        "lua_do": "function lua_do()\nmasterInconfident = 4\nend"
      },
      {
        "id": 614,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- недоверие \nmaster = master or {}\nmaster.confidence = master.confidence or 0\n\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\nreturn master.confidence < 7 or ornasStat.darkside > 0\nend",
        "lua_do": "function lua_do()\nmasterInconfident = 2\nend"
      }
    ]
  },
  {
    "id": 613,
    "text": "– Орнас, мой мальчик... – наконец заговорил после затянувшейся паузы джедай. – Ты наверняка слышал много баек о том, что у твоего наставника есть какой-то мифический \"список\"?\n   Юноша кивнул. Тогда учитель показал металлический диск на своей ладони и вновь, как на звездолёте, активировал голографическую карту с множеством надписей и пометок.\n– Вот этот \"список\". Карта раньше принадлежала одному примечательному агенту ситхов, не стану описывать, как она попала в мои руки. В ней очень кстати отмечены все звёздные системы, в которых он побывал.\n– А что в нём было особенного? – перебил рассказ наставника Орнас.\n– Это – самое важное. Он использовал приёмы, которые раньше считались забытыми или вообще выдуманными. Извращённые тёмной стороной Силы животные, тончайшие манипуляции с разумом, высасывание самой Силы...",
    "answers": [
      {
        "id": 617,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 614,
    "text": "– Орнас, мой мальчик... – наконец заговорил после затянувшейся паузы джедай. – Я долго думал и утвердился в мысли, что ты намного умнее, чем хочешь выглядеть. Ведь ты не случайно сделал столько ошибок там, внизу? Мог ли ты рассчитывать, что из-за этого я отправлюсь наверх с тобой?\n   Юноша ничего не ответил и только опустил взгляд в пол, как происходило всякий раз, когда наставник считал нужным  провести воспитательную беседу.\n– И сейчас я вижу, насколько изящны и остроумны твои \"ошибки\", – продолжал учитель, не дожидаясь реакции подопечного. – Даже если ты сам не планировал ничего такого, у Силы есть чувство юмора. И мне достало мудрости, чтобы разглядеть её послание.",
    "answers": [
      {
        "id": 615,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 615,
    "text": "– Ты последовательно пренебрёг всеми ценностями джедаев, которые я старался тебе привить и которые проговорил в своём напутствии перед началом миссии.\n",
    "answers": [
      {
        "id": 615,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nstyle = style or 1\nlocal text = \"\"\n\nif style == 1 then\ntext = \"И даже там, где успех зависел от мастерства владения клинком, в чём ты мог бы посостязаться даже с некоторыми магистрами Ордена, ты допустил удивительную оплошность. \"\nelseif style == 2 then\ntext = \"И даже там, где успех зависел от мастерства владения Силой, в чём ты мог бы посостязаться даже с некоторыми магистрами Ордена, ты допустил удивительную оплошность. \"\nelseif style == 3 then\ntext = \"И даже там, где успех зависел от внимательности, что всегда было твоей сильной стороной, ты допустил удивительную оплошность. \"\nelseif style == 4 then\ntext = \"И даже там, где успех зависел от вдумчивого анализа, что всегда было твоей сильной стороной, ты допустил удивительную оплошность. \"\nelseif style == 5 then\ntext = \"И даже там, где успех зависел от стремления к мирному взаимодействию, что всегда было твоей сильной стороной, ты допустил немыслимую для тебя кровожадность. \"\nelse\ntext = \"\"\nend\n\nreturn text .. [=[Я знаю, что для тебя значит возможность закончить обучение. Мы оба приложили к этому немало сил. Я пока не понимаю, какую игру ты ведёшь, но готов не учитывать твои поступки внизу при определении результатов испытания. В конце концов, самое важное ещё впереди.\n   Учитель вдруг замер, обхватил голову обеими руками, закрыл глаза и сделал несколько глубоких вдохов и выдохов. Орнас изумлённо таращился на наставника, явно сказавшего совсем не то, о чём спрашивал его юноша. Неужели даже такие стойкие джедаи могут так легко потерять самообладание в этом месте?\n– Это – древние артефакты ситхов, – кивнув на таблички, уже спокойно проговорил магистр Льерсо. – Я давно их искал и, слава Силе, наконец нашёл.]=]\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem7\", -1,1)\nend",
        "text": "Дальше",
        "id": 615,
        "calculate": true
      },
      {
        "id": 616,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 616,
    "text": "   Магистр Льерсо активировал световой меч, и несколькими точными движениями обратил древние скрижали в пыль.\n– Даже не взглянули, что в них, – растеряно протянул юноша.\n– Эти знания опасны.\n– Даже для Вас?\n– Особенно для меня...\n   Учитель вымученно улыбнулся Орнасу и убрал оружие.\n– Мы сможем осмотреть остальное позже на корабле – продолжил он, – сколь бы ни были заманчивы другие перспективы. А сейчас пора двигаться вперёд.",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\ndestroyedScrolls = 3\n\n--!!! только для перехода с учителем !!!\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8DessRelation = UpLine8DessRelation or 0\n\nif UpLine8Conflicts.Llerso_Dess < 2 and UpLine8Conflicts.Dess_TL == 2 and UpLine8DessRelation < 1 then\n   UpLine8ending = 1-- Десс не помогает в бою с НК и просто исчезает\n\nelseif UpLine8Conflicts.Llerso_Dess < 2 and UpLine8Conflicts.Dess_TL < 2 and UpLine8DessRelation < 1 then\n   UpLine8ending = 2-- Десс предаёт Орнаса в момент нападения НК\n\nelseif UpLine8Conflicts.Llerso_Dess < 2 then\n   UpLine8ending = 3-- Льерсо сливается в бою, Десс пришивает НК\nelse\n   UpLine8ending = 4-- учитель сшибает НК\nend\n\nend",
        "calculate": true,
        "text": "Для линии 8 рассчитать состояние всех и вывести на нужную страницу\n\nнеразрешённые конфликты:\n—залипание: учитель сливается об НК\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess < 2\n\n\n—дроид/учитель: TL-3 исчезает за конторкой НК\nUpLine8Conflicts.Llerso_TL < 2\n\nдроид/десс: дроид \"ломается\", как только учитель отошёл от них с Десс\nUpLine8Conflicts.Dess_TL < 2\n\n\nотношения:\n\nособые сочетания:\n—учитель слился, TL-3 слился, нет доверия Десс – предаёт в момент атаки НК\nUpLine8Conflicts.Llerso_Dess < 2 and UpLine8Conflicts.Dess_TL < 2 and UpLine8DessRelation < 1\n\n— учитель слился, TL-3 не слился, нет доверия Десс – Десс не помогает в бою и куда-то исчезает\nUpLine8Conflicts.Llerso_Dess < 2 and UpLine8Conflicts.Dess_TL == 2 and UpLine8DessRelation < 1",
        "id": 616
      },
      {
        "id": 618,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine ~= 6 and UpLine ~= 8\nend"
      },
      {
        "id": 538,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend"
      },
      {
        "id": 837,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8ending == 1\nend"
      },
      {
        "id": 837,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8ending == 2\nend"
      },
      {
        "id": 837,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8ending == 3\nend"
      },
      {
        "id": 837,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8 and UpLine8ending == 4\nend"
      }
    ]
  },
  {
    "id": 617,
    "text": "– Около двадцати лет назад, когда я был ненамного старше, чем ты сейчас, – продолжил после небольшой паузы учитель, – группа молодых джедаев поставила себе цель: найти источник, из которого ситх мог узнать эти опасные тайны. И уничтожить. Совет не поддержал идею организовать масштабные экспедиции и велел хранить всё в тайне, хотя и запрещать сами поиски не стал. С тех пор мы, посвящённые, исследовали тысячи звёздных систем во всех уголках галактики, в поисках источника этого зла...\n– Вы были одним из этих джедаев?\n– Был... – помрачнел магистр Льерсо. – И остался единственным в Ордене. Кто-то погиб, кто-то просто исчез, кто-то сменил сторону... «Древнее Слово Власти», «О Пользе и Форме», «Шёпот Бессмертия». Вокруг этих древних скрижалей уже сложилось столько легенд. Но ещё больше судеб, что сломала жажда ими обладать... Не стоит недооценивать того, кто собрал у себя такую завидную библиотеку. Даже если его уже нет в живых...\n   Наставник выключил карту, и металлический диск вновь исчез где-то в бесконечных складках его робы.",
    "answers": [
      {
        "id": 616,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 618,
    "text": "   Когда Орнас с учителем приблизились к центру, протокольный дроид уже шёл им навстречу.\n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс он механическим голосом.\n   Дроид попытался приблизиться к магистру Льерсо с неуклюже раскинутыми для объятий руками, и тот отступил на шаг, подмигнув ошарашенному юноше.\n– Удивление: Хозяин, вы не узнаёте меня? – продолжал секретарь, наступая. – Я НК-63, ваш протокольный дроид и верный слуга. Должен предупредить, что этот человек рядом с Вами не тот, за кого себя выдаёт.\n   Джедаи переглянулись. И если Орнас разве что рот не открыл от удивления, то его наставник выглядел по-детски восхищённым. Воспользовавшись заминкой, дроид всё-таки настиг мастера Льерсо и даже на секунду сомкнул свои жёсткие объятия.\n– Утверждение: В моей базе данных есть неоспоримые доказательства двуличности этого коварного субъекта, – скрежетал дроид, бесстыдно указывая на Орнаса одной рукой и пятясь назад.",
    "answers": [
      {
        "id": 619,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 619,
    "text": "– Весьма любопытно, дорогой НК, – серьёзно проговорил учитель Орнаса. – Отрадно знать, что верный слуга так тщательно подготовился к моему возвращению.\n– Утверждение... – начал говорить НК-63, но закончить не успел.\n   Внезапно из его руки пробился яркий зелёный луч, и уже в следующую секунду световой меч прочертил в воздухе широкую дугу. Две отсечённые металлические конечности с гулким звуком упали на пол.\n   Магистр Льерсо сделал ещё одно неуловимое движение кончиком пальца, и клинок, зависший в воздухе в нескольких шагах от хозяина, быстрым взмахом поразил ноги дроида. НК-63 рухнул на пол.\n   Учитель подошёл ближе, поймал меч и убрал его на пояс.",
    "answers": [
      {
        "id": 620,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 620,
    "text": "– Попался, воришка, – равнодушно отметил наставник Орнаса, переворачивая ногой дроида. – Неужели я заслужил такое отнош...\n   Он не успел закончить фразу. Откуда-то из корпуса НК-63 появился незаметный манипулятор и поразил джедая электрическим зарядом, так что того перекосило. Юноша отреагировал мгновенно и несколькими точными ударами мечом снёс противнику голову и раскроил на части то немногое, что от него к этому моменту оставалось.\n– Жаль, что мы теперь не сможем  опросить его, – печально произнёс учитель. – Хотя уверен, это был бы крайне неинформативный разговор.",
    "answers": [
      {
        "id": 621,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 621,
    "text": "   Спутники тщательно исследовали конторку дроида с множеством экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. \n– С такой системой безопасности человеку не разобраться, – печально заключил учитель. – Придётся вызвать с корабля дроида с протоколом дешифрации, когда закончим со всем остальным.\n   Покинув бесполезное рабочее пространство, Орнас с наставником, не переговариваясь, направились к одинокой винтовой лестнице в дальней от входа части помещения. Они миновали остатки какого-то другого охранного дроида и в нерешительности замерли у первой ступени.\n– Впереди самое сложное, соберись, – сухо напутствовал магистр Льерсо.\n   Юноша кивнул. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока. Орнас вздохнул и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 3\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nend"
      }
    ]
  },
  {
    "id": 622,
    "text": "– Одна из труб внутри повреждена, – доложил наставнику Орнас. – Заметна утечка какого-то газа. Возможно, он уже давно циркулирует по системе вентиляции.\n   Магистр Льерсо сдержанно кивнул.\n– Думаете, это опасно?\n– Да, – уверенно ответил наставник. – Хотя если утечка давняя, какое-то количество газа должно быть в воздухе во всём храме. Возможно он вреден только в высокой концентрации.\n– Жаль, респираторы остались на звездолёте...\n– Я могу попробовать разобраться с этим, – предложил учитель. – Если у тебя самого нет на примете других вариантов.",
    "answers": [
      {
        "id": 592,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 623,
    "text": "   Не то по привычке во всём разбираться до конца, не то по зову интуиции, Орнас задержал дыхание и подполз ближе к тому месту, где утекал неизвестный газ. Среди переплетений одинаковых на вид трубок юноша отыскал одну с ярко-оранжевой расцветкой – общепринятый в мирах Галактической Республики знак обозначения горючих веществ.\n   Идея, тут же пришедшая в голову джедая, казалось безумной, но при должной аккуратности имела неплохие шансы сработать.\n   Луч светового меча озарил тьму вокруг. Орнас направил оружие к трубе и едва коснулся нужного места на ней самым кончиком лезвия. Алая точка расплавленного металла быстро вздулась пузырём и лопнула, рассыпав сноп раскалённых брызг, и тут же из пробоины вырвалось пламя.\n   Расчёт юноши оправдался: огонь охватывал место пробоины, и неизвестный газ сгорал в нём, окрашивая языки пламени зелёным. Орнас отогнул лист обшивки и прикрыл им обе трубы.",
    "answers": [
      {
        "id": 611,
        "text": "Дальше",
        "lua_do": "function lua_do()\npoisonGasIsOn = 0\nmaster = master or {}\nmaster.confidence = master.confidence or 5\nmaster.confidence = master.confidence <plus> 1\nend"
      }
    ]
  },
  {
    "id": 624,
    "text": "– Да, ты прав, ",
    "answers": [
      {
        "id": 624,
        "text": "Перенести текст из тела, сделать вариацию от предыдущей страницы ",
        "lua_text": "function lua_text()\nlocal p = g.previous_od\nlocal text = \"\"\ntext = p == 497 and [=[– растерянно кивнул Орнас, выбираясь из шахты и отряхивая одежду от пыли. – Я просто не был уверен, что могу просить тебя об этом.\n– Чепуха, мы терпеть работаем в команде. Глупо не использовать такие возможности. Я быстро.\n   Не пускаясь в долгие объяснения дроид скрылся в шахте, оставив юношу скучать в опустевшем коридоре. Пока он решал, стоит ли заняться исследованием другой части в одиночку, TL-3 вернулся и коротко обрисовал обстановку.\n– ]=] or \n[=[– растерянно кивнул Орнас, загадывая в шахту. – Я просто не был уверен, что могу просить тебя об этом.\n– Чепуха, мы терпеть работаем в команде. Глупо не использовать такие возможности. Я быстро.\n   Не пускаясь в долгие объяснения дроид скрылся в шахте, оставив юношу скучать в опустевшем коридоре. Пока он решал, стоит ли заняться исследованием другой части в одиночку, TL-3 вернулся и коротко обрисовал обстановку.\n– ]=]\nreturn text\nend",
        "merge": true
      },
      {
        "id": 624,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text= \"\"\npoisonGasIsOn = poisonGasIsOn or 1\ntext = poisonGasIsOn == 1 and [=[Путь ведёт в нужном направлении. Обнаружена критическая концентрация неизвестного нейролептика в воздухе. Не летален, вдыхание приведёт к торможению реакции и ухудшению координации. Устранить источник утечки?]=] or\n[=[Путь ведёт в нужном направлении. Обнаружена следовые количества неизвестного нейролептика в воздухе.  Вдыхание безопасно, негативных последствий не окажет.]=]\nreturn text\nend",
        "merge": true
      },
      {
        "id": 592,
        "text": "Варианты действий",
        "comment": false,
        "run": [
          592
        ]
      },
      {
        "super_calculate": false,
        "id": 624,
        "calculate": true,
        "lua_do": "function lua_do()\nTL3usefull = (TL3usefull or 0) <plus> 1\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 625,
    "text": "   Орнас уже почти пробрался внутрь широкого проёма, но услышал дроида и остановился.\n– Ты мог не знать, но астромеханики идеально подходят для выполнения задач, связанных с обслуживанием инженерных систем и коммуникаций, – раздался из наушника перевод фразы TL-3. – С твоей стороны было бы логично доверить обследование этого участка мне.",
    "answers": [
      {
        "id": 624,
        "text": "Согласиться",
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend"
      },
      {
        "id": 626,
        "text": "Отказаться"
      }
    ]
  },
  {
    "id": 626,
    "text": "– Я должен сделать это сам, – твёрдо ответил юноша. – Я сообщу, если понадобится помощь.\n   Он быстрее, чем планировал, забрался внутрь, будто боясь, что дроид попробует его опередить, и пополз вперёд. Еле уловимое движение воздуха заставило джедая остановиться. Тщательно изучив пространство перед собой, он заметил небольшое белое облачко.\n   Среди множества мелких металлических трубочек, тянущихся вдоль всей стенки, одна была разорвана и из неё тонкой струйкой вырывался наружу какой-то газ. Белёсый туман, образующийся у самого места разрыва, затем рассеивался, и невидимый газ должно быть уже заполнил всю систему вентиляции.\n   Орнас поспешно вернулся и рассказал обо всём TL-3.\n– Жаль, что ты не смог определить газ и его опасность, – ехидно прокомментировал астромеханик. – Хочешь, я разберусь с газом? Это как раз по моей части.",
    "answers": [
      {
        "id": 592,
        "text": "Новый ответ. введите текст",
        "run": [
          592
        ]
      }
    ]
  },
  {
    "id": 627,
    "text": "– Что это вообще было? – обрушился на TL-3 Орнас, когда они убедились в полной неисправности противника. – Я же просил тебя остаться в укрытии! А если бы ты не успел увернуться?\n– Не говори ерунды, – безэмоционально ответил астромех. – Я бы не высунулся, если бы был хоть малейший шанс попасть под раздачу. На самом деле, ты сам приложил к этому руку, когда по какой-то случайности смог установить в мой блок чип боевого анализатора из шлема.\n   Орнас скептично посмотрел на дроида. Такой и вправду вряд ли помчится геройствовать сломя голову, не имея козыря в рукаве.",
    "answers": [
      {
        "id": 631,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 628,
    "text": "   Затем Орнас подошёл к раскиданым по полу останкам НК-63. Он всматривался в оплавленные обломки и пытался понять, почему тот не напал сразу, и как бы сложились обстоятельства, если бы джедай оказался здесь без TL-3.\n   Юноша сел прямо на пол и притронулся к крохотному мотку проволоки на рукояти меча, восстанавливая силы и собираясь с мыслями. Если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху за спиральной лестницей. И Орнас чувствовал, что плата за эти ответы может быть непомерно высокой.\n   Он медленно поднялся, обошёл останки старого штурмового дроида и неуверенно шагнул на первую прозрачную ступень.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 1\nTLsacrificed = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nend"
      }
    ]
  },
  {
    "id": 629,
    "text": "– Пойдём, осталось самое важное, – позвал TL-3, едва юноша устроился на полу, чтобы восстановить силы после сражения.\n   Джедай с неохотой поднялся и догнал спутника уже у самой конторки в центре зала.\n– Ради этого тебе и стоило расстараться, уговаривая меня помочь тебе, – тараторил дроид, объезжая многочисленные пульты и панели. – Над надёжной защитой тут поработали на совесть, ни один стандартный дешифратор не осилит.\n– А ты осилишь?\n– Скорее всего, – не очень уверенно ответил астромех, подключаясь тонким манипулятором к нужному разъёму. –А теперь не мешай.\n   Орнас с любопытством наблюдал, как плывут и меняются надписи на ближайшем экране. Дроид явно знал, что детает.",
    "answers": [
      {
        "id": 644,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 630,
    "text": "   Оказавшись за приборами, дроид подключился к одному из разъемов, и голопроектор высветил над приборной панелью чертежи, на которых юноша узнал первый этаж храма.\n   TL-3 высунулся из своего укрытия и издал серию писков и трелей, но наушник Орнаса не отреагировал на них.\n– Утверждение: Тут выставлена активная защита от посторонних электромагнитных импульсов, – охотно прокомментировал протокольный дроид, заметив, видимо, растерянное лицо юноши. – Вот здесь, могу отключить.\n   Он указал на ничем не отличающееся от других место на панели и потянулся уцелевшей конечностью к переключателю. TL-3 вновь подал голос и на этот раз едва не подпрыгивал на месте. Пока Орнас всматривался в своего спутника, НК-63 что-то переключил, и наушник юноши разразился невыносимым высокочастотным писком. \n   Не успел джедай сорвать с уха сошедшее с ума устройство, как его поразил оглушающий заряд.\n– Утверждение: Поздравляю, теперь вы нейтрализованы, – заявил дроид, пряча бластер куда-то вглубь корпуса.\n   Джедай ощутил кожей лёгкое покалывание заряда и мешком рухнул на пол. Удовлетворённо хмыкнув, дроид нажал ещё что-то, и часть помещения, в которой остался астромеханик, отделилась мерцающим непроницаемым барьером лучегасителей.\n– Подождешь здесь, дружок, – беззлобно обратился дроид к TL-3, а затем подобрал  световой меч Орнаса, сгрёб в охапку его безвольное тело и направился к винтовой лестнице.",
    "answers": [
      {
        "comment": false,
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nlocal a =\n583\nupLineFinal = 1\nneutralized = 1\nTL3lost = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\n--showPage{id = a}\nend",
        "no_transition": false
      }
    ]
  },
  {
    "id": 631,
    "text": "– Пойдём, осталось самое важное, – позвал вынырнувший откуда-то TL-3, едва юноша рухнул на пол, чтобы восстановить силы после сражения.\n   Джедай с неохотой поднялся и догнал спутника уже у самой конторки в центре зала.\n– Ради этого тебе и стоило расстараться, уговаривая меня помочь, – тараторил дроид, объезжая многочисленные пульты и панели. – Над надёжной защитой тут поработали на совесть, ни один стандартный дешифратор не осилит.\n– А ты осилишь?\n– Скорее всего, – не очень уверенно ответил астромех после секундной заминки.\n– Сможешь подключиться к этой штуке? – с сомнением переспросил Орнас, разглядывая незнакомые приборы.\n– Подключиться – дело нехитрое. А вот получить доступ...\n   TL-3 умолк и засуетился внутри, подключаясь специальным манипулятором к разным разъёмам во всех терминалах по очереди.\n– Да, вот здесь, – заявил он наконец, остановившись перед маленьким невзрачным блоком с небольшим экраном. – Иди сюда, без тебя ничего не выйдет.",
    "answers": [
      {
        "id": 644,
        "text": "Дальше",
        "lua_do": "function lua_do()\ncomputing = nil\n--g.blockSaves = 1\nreloadOn = true\nend"
      },
      {
        "comment": true,
        "middle_answer": true,
        "text": "Со следующей страницы сохранения будут заблокированы! Вы можете оставить сохранение здесь.",
        "lua_if": "function lua_if()\n\nend",
        "id": 681
      }
    ]
  },
  {
    "id": 632,
    "text": "   Неожиданно всё освещение в зале погасло. Только один экран продолжал упрямо гореть в наступившем мраке, едва подсвечивая замершую перед ним маленько угловатую фигурку дроида.\n– Готово, – пискнул TL-3. – Самая хитроумная штука, с которой я сталкивался: если паттерн действий оператора отличается от привычной модели, система его блокирует. ",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nif UpLine == 7 then\n   TL3usefull = UpLine7.droidRel\nend\nterminalData = 1\nend",
        "calculate": true,
        "text": "   ",
        "id": 632
      },
      {
        "id": 638,
        "text": "... о храме и его ловушках",
        "lua_if": "function lua_if()\nreturn TL3usefull > 2\nend"
      },
      {
        "id": 637,
        "text": "... о дроиде НК-63",
        "lua_if": "function lua_if()\nreturn TL3usefull > 2\nend"
      },
      {
        "id": 635,
        "text": "... о Фениксе и команде Чёрного Пламени",
        "lua_text": "function lua_text()\nlocal a = TL3usefull > 2 and 1 or 0\nreturn a == 1 and \"... о Фениксе и команде Чёрного Пламени\" or \"Дальше\"\nend"
      },
      {
        "id": 636,
        "text": "... о девушке из капсулы с бактой на первом этаже",
        "lua_if": "function lua_if()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.KnowDess = TL3.conditions.KnowDess or 0\nreturn TL3.conditions.KnowDess == 2 and TL3usefull > 2\n-- условие, что хотя бы видел её\nend"
      },
      {
        "id": 633,
        "text": "... обо мне самом",
        "lua_if": "function lua_if()\nreturn TL3usefull > 2\nend"
      },
      {
        "id": 634,
        "text": "... о моём учителе, магистре Ордена джедаев Асторе Льерсо",
        "lua_if": "function lua_if()\nreturn TL3usefull > 2\nend"
      },
      {
        "id": 632,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal a = TL3usefull > 2 and 1 or 0\nlocal text = a == 1 and [=[Не думаю, что прежний пользователь использовал терминал как справочный архив, так что скорее всего у нас будет ответ только на один запрос.\n– Всего на один? – разочарованно протянул юноша. – Но что вообще там есть?\n– Пока не спросим – не узнаем. – ответил дроид и помолчал немного.  – Я бы очень хотел узнать всё о судьбе Феникса, но, полагаю, в данной ситуации решать тебе...\n   Джедай поверить не мог: TL-3 решил доверить это право ему, вместо того, чтобы воспользоваться моментом для личной выгоды. Осталось только понять, что хотел узнать сам Орнас.\n– Хорошо, – наконец решился он. – Мне нужна вся доступная информация...]=]\n\nor \n\n[=[Оказывается, прежний пользователь не использовал терминал как справочный архив, так что у нас будет ответ только на один запрос...\n– Всего на один? – разочарованно протянул юноша.\n– ... И я его уже сделал.\n   Джедай поверить не мог, что TL-3 решил воспользоваться моментом для получения личной выгоды, даже не посоветовавшись с юношей. Оставалось только прочитать на тёмном экране то, что хотел узнать дроид.]=]\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 633,
    "text": "– А ты самоуверенный, – усмехнулся TL-3, но уже через несколько секунд вывел на экран возле юноши нужные данные.\n   Какого бы высокого мнения о себе не был Орнас, но получить настолько объёмное досье точно не ожидал. Но если инициалы родителей \"У. П.\" и \"Ф. Д.\" ему ни о чём на говорили, то описание собственной жизни до вступления в Орден джедаев навеяло болезненные воспоминания.\n   Эпизод его принятия в ученики к мастеру Льерсо и смерти его матери был помечен как \"удачная коррекция\", все конфликты со сверстниками и их разбирательства в Совете – как \"благоприятствующее развитие\" и только тот самый случай на тренировке сопровождался лишь несколькими знаками вопроса.\n   Орнас ещё раз перечитал документ и странную пометку возле своего имени в самом начале \"Уровень соответствия: высокий\", но не смог придумать простого объяснения всему, что видел.\n– А ты, кажется, важная персона, – заметил TL-3, когда увидел, что джедай закончил чтение. – Пора двигаться дальше, ещё успеешь обдумать всё это.",
    "answers": [
      {
        "id": 639,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 634,
    "text": "– А с чего ты вообще взял, что здесь может быть что-нибудь о нём? – хмыкнул TL-3, но уже через секунду вывел информацию на экран возле юноши.\n   Сказать, что информации было удивительно много, было бы явным преуменьшением. Орнас сомневался, что в архивах Ордена можно было найти столь подробное досье даже на самых известных деятелей прошлого. В заголовке наряду с именем и возрастом также располагалась странная отметка \"Уровень соответствия: идеальный\".\n   Некоторые части текста были выделены. Видимо, кто-то посчитал важным, что мать юного Астора Льерсо умерла в тот же день, когда его забрали из семьи для обучения в Ордене. И что его первый падаван пал на тёмную сторону и был убит уже ставшим к тому моменту магистром Льерсо.\n   Возле описания каких-то событий стояли пометки, из которых можно было заключить, что, например, попадание в руки молодого Астора того самого \"списка\" прошло в соответствии с планом, а бесследное исчезновение его подруги при отлучке из Храма без дозволения Совета стало непредвиденным осложнением.\n   С особым волнением юноша изучал все упоминания самого себя. Так, согласие магистра Льерсо взять маленького Орнаса в ученики оказалось \"удачной коррекцией\", а все разбирательства его конфликтов со сверстниками в Высшем Совете – \"благоприятствующим развитием\". Только рядом с описанием инцидента на тренировке стояло лишь несколько вопросительных знаков.\n– Пора идти, – прервал размышления джедая TL-3. – Ещё будет время всё это обдумать.",
    "answers": [
      {
        "id": 639,
        "text": "Дальше",
        "lua_do": "function lua_do()\nplansRevealed = \"master\"\nend"
      }
    ]
  },
  {
    "id": 635,
    "text": "empty",
    "answers": [
      {
        "id": 639,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend"
      },
      {
        "id": 679,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend"
      },
      {
        "id": 719,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7 and UpLine7.dessRun ~= 1\nend"
      },
      {
        "id": 727,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7 and UpLine7.dessRun == 1\nend"
      },
      {
        "id": 849,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8\nend"
      },
      {
        "id": 635,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nTL3usefull =  UpLine == 7 and 0 or TL3usefull\nlocal a = (TL3usefull or 0) > 2 and\n[=[– Спасибо, – коротко отозвался астромех, выводя информацию на экран возле юноши.\n]=] or \"\"\n\nlocal text = a .. [=[   В подробном досье Феникса Джендри без всяких пометок читалась единственная мысль: капитан грузового судна Чёрное Пламя был опытным и полезным исполнителем. В длинном перечне заданий и результатов их выполнения не было ни единой неудачи. Наёмнику доставались самые важные и срочные дела, он не задавал вопросов и мог позволить держать в команде только лучших из лучших.\n   Падение Чёрного пламени в тексте было помечено как \"вынужденная коррекция\", нападение на команду девушки-джедая, ради спасения которой они и прибыли, – как \"непредвиденное осложнение\". Приказ бросить команду Феникс пытался оспорить, но перспектива погибнуть вместе с остальными сделала его более сговорчивым. Укрывшись на втором этаже здания, он в комфорте выжидал, пока силы оставят перебившую почти всех его людей девушку, и в итоге всё-таки смог нейтрализовать её и поместить в капсулу для гибернации.\n   Последним заданием мандалорца стало отбытие на Корусант, где ему предстояло с малых лет обучать ещё не родившегося ребёнка всему, что знает сам. На одноместной спасательной капсуле №3 Феникс покинул луну и больше никогда не выходил на связь.\n– Теперь ты знаешь всё, – произнёс Орнас замершему рядом TL-3. – Он просто выполнял приказ, чтобы выжить.]=]\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nknowPhenix = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 635,
        "calculate": true
      }
    ]
  },
  {
    "id": 636,
    "text": "– Стоит ли на такое тратить единственную попытку? – запричитал TL-3, но уже через секунду вывел информацию на экран возле юноши.\n   Орнас подивился, как много данных можно собрать о человеке. Рядом с именем \"Десвиар\" располагалась странная отметка \"Уровень соответствия: недостаточный\". Десвиар попала в Орден джедаев в раннем детстве и проявила себя способной, но незаинтересованной в обучении. Не смотря на значительное число нарушений дисциплины и откровенных авантюр, она довольно рано получила звание рыцаря-джедая. Орнас даже не удивился упоминанию близкой дружбы девушки с его наставником, но пометка к этому фрагменту давала понять, что их связь это – \"благоприятствующее развитие\".\n   Десвиар часто отправлялась на вылазки в системы, отмеченные в переданном юному Астору Льерсо \"списке\" даже вопреки прямому запрету Высшего Совета. В последнем путешествии её сопровождала бывшая наставница, рыцарь-джедай Уулен Паф. У спутниц возник конфликт, перешедший в сражение, в результате которого Десвиар оказалась в ловушке лучегасителей, а Уулен отправилась дальше на верхние уровни храме.\n   Для спасения Десвиар была вызвана команда, в задачи которой входила установка камеры для гибернации и сопровождение туда девушки. Однако она напала на прибывших и скрылась. Позднее обессиленную от истощения Десвиар всё-таки нашли и поместили в собранную капсулу.\n   Нестабильное психическое состояние Десвиар было отмечено как фактор риска, а её исчезновение из Ордена – как непредвиденное осложнение.\n– Я и сам тебе рассказал бы достаточно, – заметил TL-3, когда увидел, что Орнас закончил чтение. – Пойдём, больше мы здесь ничего не узнаем.",
    "answers": [
      {
        "id": 639,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 637,
    "text": "– Вывожу информацию на твой экран, – безучастно отозвался TL-3.\n   Орнас с интересом разглядывал чертежи и технические характеристики необычного дроида. Из записей он узнал, что НК-63 – уникальный экземпляр, вдохновлённый легендарным НК-47 Дарта Ревана. Первый образец был собран неизвестным мастером из уцелевших деталей НК-50, когда-то массово производившихся на Телосе IV, и получил номер НК-55. После его уничтожения в сражении была сконструирована улучшенная версия под номером 56. Каждая последующая модель становилась всё эффективнее и существовала дольше предыдущих, сам НК-63 функционировал без обновлений уже почти тысячу лет.\n   Джедай присвистнул. Среди сотен протоколов и отчётов фигурировало лишь несколько смертей, в остальных случаях противники дроида были захвачены в плен. Видимо, в этот раз спутникам тоже не грозила смертельная опасность. \n   Но ещё больше Орнасп поразило, что в систему уже были загружены данные проекта \"НК-64\" с изменениями в технической и поведенческой частях. Похоже, данные собирались и обрабатывались не только на этом терминале, и кто-то уже озаботился анализом недавнего боя.\n– Надеюсь, мы успеем закончить дела наверху до того, как это соберут, – буркнул TL-3, когда заметил, что джедай закончил чтение.",
    "answers": [
      {
        "id": 639,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 638,
    "text": "– Вывожу информацию на твой экран, – безучастно отозвался TL-3.\n   Только теперь, когда перед взором юноши заплясали чертежи и строки со всевозможными характеристиками, Орнас понял, что едва ли найдёт хоть сколько-то важную информацию. Здесь не было ничего, что нельзя было бы обнаружить при более тщательном исследовании храма: порядок включения энергоблоков для активации режима совместного действия, параметры генератора силового поля, способного сдерживать терентатека, особенности метаболизма змее- и ящероподобных существ, устройство механизма в центральном зале первого этажа и подробная инструкция к нему, записи о всех перемещениях ключевых предметов и многое, многое другое. Но ни слова о создателе храма или о том, что располагается на третьем этаже, найти в полученном массиве данных не удалось.\n– Нужен отдельный допуск и ещё несколько запросов для доступа к корневой информации, – словно угадав мысли юноши объяснил TL-3. – Мы не сможем сейчас пробиться туда.\n– Ясно, – кивнул джедай.",
    "answers": [
      {
        "id": 639,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 639,
    "text": "– Надеюсь, нам не пригодится эта информация, – заговорил астромеханик, когда они вдвоём с джедаем направлялись к винтовой лестнице в дальней части помещения. – А то от всего этого даже мне стало не по себе...\n   Юноша не ответил. В его мыслях беспорядочно метались новые факты, расшатывая привычные представления в устоявшейся картине мира. Но если где-то и были разгадки всех тайн этого опасного места, то только там, наверху. И что бы не стояло на вершине этой загадочной пирамиды, оно оказалось намного больше, чем сам Орнас. В конце концов, он был всего лишь подростком, отчаянно пытавшимся доказать всем, что достоин называться взрослым.\n   Орнас чувствовал, что если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху за спиральной лестницей. И что плата за эти ответы может быть непомерно высокой. Он помог TL-3 забраться на слишком высокую первую ступень и шагнул следом.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 4\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nend"
      }
    ]
  },
  {
    "id": 640,
    "text": "empty",
    "answers": [
      {
        "id": 642,
        "text": "Загрузка функций",
        "run": [
          642
        ],
        "lua_if": "function lua_if()\n--return type(compTask) ~= \"function\" or type(compMissionText) ~= \"function\" or not computing \nforceFuncRenewFlag = forceFuncRenewFlag or 0\nreturn forceFuncRenewFlag == 1\nend"
      },
      {
        "id": 640,
        "text": "Текст заданий",
        "lua_text": "function lua_text()\n\nlocal text = \"\"\nreturn compMissionText() or text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 640,
        "text": "Запуск автофункций",
        "calculate": true,
        "lua_do": "function lua_do()\nCompEnotherHelpVar = 0\n  endTurn()\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\ncompCondition(\"t4\")\ncompCondition(\"a1\")\n\ncomputingA1stage = nil\ncomputingA1charge = nil\ncomputing.a1timer = nil\n\ncomputingB_stage = nil\ncomputing.b_charge = nil\ncomputingB_timer = nil\ncomputingB1_timer = nil\n\ncomputing.c_stage = nil\ncomputing.c_charge = nil\ncomputing.c_timer = nil\ncomputing.c1_timer = nil\n\ndialog({header = \"\", text = \"Выбор миссии\", answers = \n  {\n     {text = \"a1\",\n      pressListener = function()\n        computing.currentMission = \"a1\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"a2\",\n      pressListener = function()\n        computing.currentMission = \"a2\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"a3\",\n      pressListener = function()\n        computing.currentMission = \"a3\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"b1\",\n      pressListener = function()\n        computing.currentMission = \"b1\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"b2\",\n      pressListener = function()\n        computing.currentMission = \"b2\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"b3\",\n      pressListener = function()\n        computing.currentMission = \"b3\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"c1\",\n      pressListener = function()\n        computing.currentMission = \"c1\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"c2\",\n      pressListener = function()\n        computing.currentMission = \"c2\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     },\n      {text = \"c3\",\n      pressListener = function()\n        computing.currentMission = \"c3\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     }\n  }\n})\nend",
        "id": 640,
        "text": "Выбор задания",
        "comment": false,
        "no_transition": true
      },
      {
        "comment": false,
        "id": 640,
        "instant": true,
        "left_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(1)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(1)\nend",
        "text": "Кнопка позиция 1",
        "lua_if": "function lua_if()\nreturn compLuaIf1(1,1)\nend",
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn compLuaIf1(1,0)\nend",
        "comment": true,
        "instant": true,
        "id": 640,
        "text": "Кнопка позиция 1 инэктив",
        "lua_text": "function lua_text()\nreturn compLuaText(1)\nend",
        "left_answer": true
      },
      {
        "comment": false,
        "id": 640,
        "text": "Кнопка позиция 2",
        "no_transition": true,
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(2)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(2)\nend",
        "instant": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(2,1)\nend"
      },
      {
        "lua_do": "function lua_do()\ncomputing = computing or {}\ncomputing.source = 2\nend",
        "right_answer": true,
        "comment": true,
        "text": "Большая ерунда",
        "id": 640,
        "instant": true,
        "lua_text": "function lua_text()\nreturn compLuaText(2)\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf1(2,0)\nend"
      },
      {
        "comment": false,
        "id": 640,
        "instant": true,
        "left_answer": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(3,1)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(3)\nend",
        "text": "Средняя ерунда",
        "lua_text": "function lua_text()\nreturn compLuaText(3)\nend",
        "no_transition": true
      },
      {
        "comment": true,
        "lua_do": "function lua_do()\ncomputing = computing or {}\ncomputing.source = 3\nend",
        "lua_text": "function lua_text()\nreturn compLuaText(3)\nend",
        "instant": true,
        "id": 640,
        "text": "Средняя ерунда",
        "lua_if": "function lua_if()\nreturn compLuaIf1(3,0)\nend",
        "left_answer": true
      },
      {
        "comment": false,
        "id": 640,
        "text": "Основной выход ",
        "left_answer": false,
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(4)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(4)\nend",
        "middle_answer": false,
        "instant": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(4,1)\nend",
        "no_transition": true
      },
      {
        "comment": true,
        "id": 640,
        "text": "Основной выход ",
        "left_answer": false,
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(4)\nend",
        "instant": true,
        "middle_answer": false,
        "lua_do": "function lua_do()\ncomputing = computing or {}\ncomputing.source = 4\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf1(4,0)\nend"
      },
      {
        "lua_do": "function lua_do()\ncomputing.gradient = computing.gradient  or 0\ncomputing.gradient = computing.gradient == 0 and 1 or 0\ncomputing.gradPressed = 1\nend",
        "right_answer": false,
        "comment": false,
        "middle_answer": true,
        "id": 640,
        "text": "Градиент ",
        "lua_text": "function lua_text()\nreturn compGradientText()\nend",
        "lua_if": "function lua_if()\ncomputing.gradientOff = computing.gradientOff or 1\nreturn computing.gradientOff ~= 1\nend"
      },
      {
        "left_answer": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(5,1)\nend",
        "lua_text": "function lua_text()\nreturn compLuaText(5)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(5)\nend",
        "id": 640,
        "text": "Предохранитель",
        "comment": false,
        "no_transition": true
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(5,0)\nend",
        "id": 640,
        "text": "Предохранитель",
        "lua_text": "function lua_text()\nreturn compLuaText(5)\nend",
        "left_answer": true
      },
      {
        "comment": false,
        "right_answer": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(6,1)\nend",
        "lua_text": "function lua_text()\nreturn compLuaText(6)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(6)\nend",
        "text": "Важная штука",
        "id": 640,
        "no_transition": true
      },
      {
        "right_answer": true,
        "comment": true,
        "id": 640,
        "text": "Важная штука",
        "lua_text": "function lua_text()\nreturn compLuaText(6)\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf1(6,0)\nend"
      },
      {
        "left_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(7)\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf1(7,1)\nend",
        "lua_do": "function lua_do()\ncompLuaDo1(7)\nend",
        "id": 640,
        "text": "Ерунда поменьше",
        "comment": false,
        "no_transition": true
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\nreturn compLuaIf1(7,0)\nend",
        "id": 640,
        "text": "Ерунда поменьше",
        "lua_text": "function lua_text()\nreturn compLuaText(7)\nend",
        "left_answer": true
      },
      {
        "lua_if": "function lua_if()\nreturn compLuaIf1(8,1)\nend",
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(8)\nend",
        "comment": false,
        "id": 640,
        "text": "Второй выход",
        "lua_do": "function lua_do()\ncompLuaDo1(8)\nend",
        "no_transition": true
      },
      {
        "right_answer": true,
        "comment": true,
        "id": 640,
        "text": "Второй выход",
        "lua_text": "function lua_text()\nreturn compLuaText(8)\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf1(8,0)\nend"
      },
      {
        "id": 2,
        "text": "Правила:\n\n1) генератор: производит 1 энергию за ход (действие) и копит в себе, емкость 6. При выборе передаёт весь заряд на выбранную соседнюю ячейку\n\n2) вывод основной: сжигает 2 заряда за ход, при выборе вытягивает по 1 энергии из всех соседних ячеек. Ёмкость 6\n\n3) вывод второй: сжигает 1 заряд каждый ход, при выборе вытягивает весь заряд из случайной соседней ячейки. Ёмкость 4\n\n4) Важная штука: всегда должна быть с хотя бы одним зарядом. емкость 4. При выборе вытягивает 3 заряда из соседних клеток случайным образом\n\n5,6, 7) Ячейки: большая – ёмкость 5, средняя – ёмкость 4, малая – ёмкость 3. При выборе передаёт весь заряд на выбранную соседнюю ячейку\n\n8) градиент – перекачивает за ход по 1 заряду из ячеек в направлении градиента (из ячеек над в ячейки под или наоборот). При выборе меняет направление градиента\n\n9) предохранитель – если соседняя ячейка получает заряд при полном заполнении, принимает этот заряд на себя. При выборе передаёт весь заряд на выбранную соседнюю ячейку\n\nЗадания:\nа) Поддерживать не меньше половины максимальной мощности на основном/дополнительном выходе в течение х ходов\nб) держать генератор с менее половины максимальной емкости в течение х ходов\nв) дать максимальное напряжение на важную штуку за х ходов \nг) уничтожить перегрузкой предохранитель за х ходов \nд) увеличение мощности генератора, выжить х ходов\nе) остановка генератора, сохранить важную штуку\nж) утечка из важной штуки, начинает сжигать по 1 заряду. выжить х ходов \n\n\nВарианты сервировки\n- важная штука должна быть подальше от генератора\n- важная штука должна быть рядом с объектами, отнимающими заряды (градиент, выходы)\n- предохранитель не должен быть рядом с генератором, должен быть рядом с важной штукой\n",
        "lua_if": "function lua_if()\nreturn false\nend",
        "comment": true
      },
      {
        "id": 640,
        "text": "План реализации:\n• черная карта\n-вынести саму карту на отдельную страницу и вызывать её раном\n\n• функция для передачи зарядов\n- сделать доп. страницу с копией карты, вызывать её раном\n- нажатие на запускающую функцию ячейку присваивает переменной номер ячейки-источника, этим условием меняется видимость для ранов с картами\n- хорошо бы добавить визуал: цветную рамку для источника (как?)\n- на странице целей для каждой ячейки сделать копию с инэктивом и рамкой, с условием видимости значение переменной-источника \n• функции для уникальных ячеек\n\nКопии ячеек с инэктивом для первой карты. Условия отображения уничтожение или нулевой заряд (для тех ячеек, которым требуется заряд для активного действия, кроме выходов, важной штуки\n\nГрадиент не считается ячейкой, добавить соседей снизу и сверху безотносительно и него\n\nЗашить вызов автофункций в отдельную функцию. Вызывать её для ячеек, которые не используют переход на 641\n\nПоменять местами 7 и 8",
        "comment": true,
        "lua_if": "function lua_if()\nreturn  false\nend"
      },
      {
        "lua_text": "function lua_text()\n-- g.fontSize >54\nend",
        "id": 640,
        "text": "Добавить переключатель отображения зарядов \"графический/числовой\" в объяснении TL-3 к головоломке",
        "lua_if": "function lua_if()\nreturn false\nend",
        "comment": true
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\ncomputing = nil\ncomputingIni()\nelementsToCells ()\nend",
        "id": 640,
        "text": "restart",
        "comment": false,
        "lua_text": "function lua_text()\nreturn [=[restart\nЗанято памяти: ]=] .. collectgarbage(\"count\") / 1024\nend"
      },
      {
        "id": 640,
        "text": "   ",
        "comment": true
      },
      {
        "id": 640,
        "text": "Смена типа отображения уровня заряда ",
        "lua_do": "function lua_do()\ncomputing.demonstrateType = computing.demonstrateType == 0 and 1 or 0\ncomputing.turnCanceled = 1\n--forceFuncRenewFlag = 1\n\nfunction cellsCheck()\n  local cm = computing.currentMission\n  preservation()\n\n  for i = 1,8 do\n    if computing.cells[i].charge > computing.cells[i].capacity then\n        if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" then\n          computing.cells[i].charge = 2\n          destroyDialog(i)\n       elseif cm == \"end\" then\n       else\n         computing.cells[i].destroyed = 1\n         computing.cells[i].capacity = -1\n         computing.cells[i].charge = 0\n         --костыль =(\n           for k,v in pairs (computing.elements) do\n              if v.position == i then\n                 v.destroyed = 1\n              end\n           end\n         cellsToElements()\n         destroyDialog(i)\n       end \n    end\n  end\nend\n\n--функции задания с2\nfunction compProgressC2()\nlocal a = computing.elements.important.position\n\n  local d = computing.cells[a].charge\n  computing.c_timer = computing.c_timer or 4\n  \n  computing.c_timer = computing.c_timer - 1\n  \n\n  if computing.c_timer == 0 then\n     if d == 0 then\n      computing.missions.c2.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c2\")\n    end\n  else\n     if d == 0 then\n      computing.missions.c2.complete = 1\n      compEnd()\n    else end\n  end\n\nend\n\nfunction imortantDischarged()\nlocal a = computing.elements.important.position\nlocal cm = computing.currentMission\n\nif computing.cells[a].charge == 0 then\n  if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" or cm == \"t5\" then\n    computing.elements.important.charge = 4\n         elementsToCells()\n    local p = 640\n    dialog ({\n      header = \"Провал\",\n      text = \"<s><s>\"Важная штука<s><s>\" оказалась полностью разряжена!<s>\n<s>\nПерезапуск режима симуляции.\",\n      answers = {\n        {text = \"Продолжить попытку\",\n         pressListener = function ()\n         showPage {id = p}\n         hideDialog() end}\n       }\n     })\n  elseif cm == \"c2\" then\n     computing.missions.c2.complete = 1\n      compEnd()\n  else\n  local p = 643\n      dialog ({\n      header = \"Провал\",\n      text = \"<s><s>\"Важная штука<s><s>\" оказалась полностью разряжена!\",\n      answers = {\n        {text = \"Закончить попытку\",\n         pressListener = function ()\n         showPage {id = p}\n         CompEnotherHelpVar = 2 -- !!!! \n         hideDialog() end}\n       }\n     })\n   end\nelse end\nCompEnotherHelpVar = CompEnotherHelpVar == 2 and 2 or 1\nend\n\n\nend",
        "instant": true
      },
      {
        "comment": false,
        "id": 640,
        "text": "Включение градиента",
        "lua_do": "function lua_do()\ncompCondition(\"t4\")\nend",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend"
      }
    ]
  },
  {
    "id": 641,
    "text": "empty",
    "answers": [
      {
        "no_transition": true,
        "lua_do": "function lua_do()\ncancelChargeTransfer()\nend",
        "comment": false,
        "middle_answer": true,
        "id": 641,
        "text": "Перенрсимый заряд:\n",
        "lua_text": "function lua_text()\nreturn cancelText()\nend",
        "left_answer": false
      },
      {
        "left_answer": true,
        "comment": false,
        "lua_if": "function lua_if()\nreturn compLuaIf2(1,1)\nend",
        "id": 641,
        "lua_do": "function lua_do()\ncompLuaDo2(1)\nend",
        "text": "Генератор",
        "lua_text": "function lua_text()\nreturn compLuaText(1)\nend",
        "no_transition": true
      },
      {
        "lua_if": "function lua_if()\nreturn compLuaIf2(1,0)\nend",
        "lua_text": "function lua_text()\nreturn compLuaText(1)\nend",
        "id": 641,
        "text": "Генератор",
        "comment": true,
        "left_answer": true
      },
      {
        "comment": false,
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(2)\nend",
        "lua_do": "function lua_do()\ncompLuaDo2(2)\nend",
        "id": 641,
        "text": "Большая ерунда",
        "lua_if": "function lua_if()\nreturn compLuaIf2(2,1)\nend",
        "no_transition": true
      },
      {
        "right_answer": true,
        "comment": true,
        "id": 641,
        "text": "Большая ерунда",
        "lua_if": "function lua_if()\nreturn compLuaIf2(2,0)\nend",
        "lua_text": "function lua_text()\nreturn compLuaText(2)\nend"
      },
      {
        "left_answer": true,
        "comment": false,
        "lua_if": "function lua_if()\nreturn compLuaIf2(3,1)\nend",
        "id": 641,
        "lua_do": "function lua_do()\ncompLuaDo2(3)\nend",
        "text": "Средняя ерунда",
        "lua_text": "function lua_text()\nreturn compLuaText(3)\nend",
        "no_transition": true
      },
      {
        "comment": true,
        "lua_text": "function lua_text()\nreturn compLuaText(3)\nend",
        "id": 641,
        "text": "Средняя ерунда",
        "lua_if": "function lua_if()\nreturn compLuaIf2(3,0)\nend",
        "left_answer": true
      },
      {
        "comment": false,
        "middle_answer": false,
        "text": "ячейка 4",
        "left_answer": false,
        "right_answer": true,
        "lua_if": "function lua_if()\nreturn compLuaIf2(4,1)\nend",
        "id": 641,
        "lua_do": "function lua_do()\ncompLuaDo2(4)\nend",
        "lua_text": "function lua_text()\nreturn compLuaText(4)\nend",
        "no_transition": true
      },
      {
        "lua_text": "function lua_text()\nreturn compLuaText(4)\nend",
        "right_answer": true,
        "comment": true,
        "middle_answer": false,
        "id": 641,
        "text": "ячейка 4",
        "lua_if": "function lua_if()\nreturn compLuaIf2(4, 0)\nend",
        "left_answer": false
      },
      {
        "right_answer": false,
        "lua_if": "function lua_if()\nreturn computing.gradientOff ~= 1\nend",
        "middle_answer": true,
        "id": 641,
        "text": "Градиент ",
        "lua_text": "function lua_text()\nreturn compGradientText()\nend",
        "comment": true
      },
      {
        "left_answer": true,
        "comment": false,
        "lua_if": "function lua_if()\nreturn compLuaIf2(5,1)\nend",
        "lua_do": "function lua_do()\ncompLuaDo2(5)\nend",
        "id": 641,
        "text": "Предохранитель",
        "lua_text": "function lua_text()\nreturn compLuaText(5)\nend",
        "no_transition": true
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\nreturn compLuaIf2(5, 0)\nend",
        "id": 641,
        "text": "Предохранитель",
        "lua_text": "function lua_text()\nreturn compLuaText(5)\nend",
        "left_answer": true
      },
      {
        "lua_if": "function lua_if()\nreturn compLuaIf2(6,1)\nend",
        "right_answer": true,
        "comment": false,
        "lua_text": "function lua_text()\nreturn compLuaText(6)\nend",
        "lua_do": "function lua_do()\ncompLuaDo2(6)\nend",
        "text": "Важная штука",
        "id": 641,
        "no_transition": true
      },
      {
        "right_answer": true,
        "comment": true,
        "id": 641,
        "text": "Важная штука",
        "lua_text": "function lua_text()\nreturn compLuaText(6)\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf2(6, 0)\nend"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\ncompLuaDo2(7)\nend",
        "text": "Мелкая ерунда",
        "left_answer": true,
        "right_answer": false,
        "lua_text": "function lua_text()\nreturn compLuaText(7)\nend",
        "id": 641,
        "lua_if": "function lua_if()\nreturn compLuaIf2(7,1)\nend",
        "no_transition": true
      },
      {
        "right_answer": false,
        "comment": true,
        "lua_if": "function lua_if()\nreturn compLuaIf2(7,0)\nend",
        "id": 641,
        "text": "Мелкая ерунда",
        "lua_text": "function lua_text()\nreturn compLuaText(7)\nend",
        "left_answer": true
      },
      {
        "comment": false,
        "id": 641,
        "text": "Второй выход",
        "left_answer": false,
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn compLuaText(8)\nend",
        "lua_do": "function lua_do()\ncompLuaDo2(8)\nend",
        "lua_if": "function lua_if()\nreturn compLuaIf2(8, 1)\nend",
        "no_transition": true
      },
      {
        "right_answer": true,
        "comment": true,
        "lua_if": "function lua_if()\nreturn compLuaIf2(8,0)\nend",
        "id": 641,
        "text": "Второй выход",
        "lua_text": "function lua_text()\nreturn compLuaText(8)\nend",
        "left_answer": false
      }
    ]
  },
  {
    "id": 642,
    "text": "Головоломка, страница с функциями",
    "answers": [
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nfunction compMapGen()\ncomputing = computing or {}\ncomputing.cells = computing.cells or  {}\n\ncomputing.elements = computing.elements or {}\n\ncomputing.elements.generator = {position = 1; capacity = 6; charge = 0; text = \"Генератор<s>\n\"; rodPad = \"генератора\"; vinPad = \"генератор\"; zeroChargeSelection = 0}\n\ncomputing.elements.bigOne = {position = 2; capacity = 5; charge = 0; text = \"Штука побольше<s>\n\"; rodPad = \"штуки побольше\"; vinPad = \"штуку побольше\"; zeroChargeSelection = 0}\n\ncomputing.elements.thatThing = {position = 3; capacity = 4; charge = 0; text = \"Штука<s>\n\"; rodPad = \"штуки\"; vinPad = \"штуку\";  zeroChargeSelection = 0}\n\ncomputing.elements.mainExit = {position = 4; capacity = 6; charge = 0; text = \"Выход<s>\n\"; rodPad = \"выхода\"; vinPad = \"выход\";  zeroChargeSelection = 1}\n\ncomputing.elements.preservator = {position = 5; capacity = 4; charge = 0; text = \"Предохранитель<s>\n\"; rodPad = \"предохранителя\"; vinPad = \"предохранитель\";  zeroChargeSelection = 0}\n\ncomputing.elements.important = {position = 6; capacity = 4; charge = 3; text = \"Важная штука<s>\n\"; rodPad = \"важной штуки\"; vinPad = \"важную штуку\";  zeroChargeSelection = 1}\n\ncomputing.elements.smallOne = {position = 7; capacity = 3; charge = 0; text = \"Штука поменьше<s>\n\"; rodPad = \"штуки поменьше\"; vinPad = \"штуку поменьше\";  zeroChargeSelection = 0}\n\ncomputing.elements.oneMoreExit = {position = 8; capacity = 4; charge = 0; text = \"Ещё один выход<s>\n\"; rodPad = \"ещё одного выхода\"; vinPad = \"ещё один выход\";  zeroChargeSelection = 1}\n\n  for k, v in pairs (computing.elements) do\n     v.destroyed = 0\n  end\n\nend\n\n--\n\n--Инициализация данных \nfunction computingIni ()\n  computing = computing or {}\n  computing.gradient = computing.gradient or 0\n  computing.gradPressed = computing.gradPressed or 0\n  computing.timerReverse = 0\n  computing.trainEnd = 0\n  computing.gradientOff = 1\n\n  if not computing.elements then\n     -- назначение ячеек\n      compMapGen()\n  end\nend\n\n--\n\n--Копирование значений из elements в cells\nfunction elementsToCells()\nfor i = 1, 8 do\n   for k, v in pairs (computing.elements)\n   do\n      if i == v.position then\n         computing.cells[i] = v\n      else\n      end\n   end\nend\nend\n\n--\n\n--Копирование значений из cells в elements\nfunction cellsToElements ()\nfor i = 1, 8 do\n   for k, v in pairs (computing.elements)\n   do\n      if i == v.position then\n         v = computing.cells[i]\n      else\n      end\n   end\nend\nend\n\n--\n\n--Функция удаления из таблицы заданного числа - вспомогательная\nfunction deleteNumber(tab, a)\n   for k,v in pairs(tab) do\n      if v == a then\n         table.remove(tab, k)\n      else end\n   end\nend\n\n--\n\n--Функция поиска соседних ячеек и вывода в таблицу\nfunction getNeighTab(a)\nlocal t = {}\n\n  if a == 1 then\n   t = {2,3}\n  elseif a == 2 then\n   t = {1,4}\n  elseif a == 3 then\n   t = {1,4, 5}\n  elseif a == 4 then\n   t = {2,3,6}\n  elseif a == 5 then\n   t = {3,6,7}\n  elseif a == 6 then\n   t = {4,5,8}\n  elseif a == 7 then \n   t = {5,8}\n  elseif a == 8 then\n   t = {6,7}\n  end\n\nfor i = 1,8 do\n   if computing.cells[i].destroyed == 1 then\n      deleteNumber(t, i)\n   else end\nend\n\nreturn t\nend\n\n--\n\n--Функция поиска соседних ячеек\nfunction compNeighbor(a)\nlocal b = a or computing.source or 1\nlocal t = getNeighTab(b)\n\n--удаление предыдущих результатов\nfor i = 1,8 do\n   computing.cells[i].neighbourToSource = 0\nend\n\n  for k, v in pairs(t) do\n     computing.cells[v].neighbourToSource = 1\n  end\nend\n\n--\n\n--Функция списание с источника заряда - по нажатию\nfunction chargeReplace(a)\n    computing.replacedCharge = computing.cells[a].charge\n   computing.cells[a].charge = 0\nend\n\n--\n\n--Функция передачи заряда - по нажатию\nfunction chargeTransfer(a)\n  local t = a or computing.target or 2\n  computing.cells[t].charge = computing.cells[t].charge <plus> computing.replacedCharge\n  computing.replacedCharge = nil\n  computing.source = nil\n  computing.target = nil\nend\n\n--\n\n--Функции проверки на перегоревшие ячейки - авто\nfunction destroyDialog(a)\n  local t = computing.cells[a].text\n  local cm = computing.currentMission\n  \n  local p = 643\n   if computing.cells[a].destroyAlert ~= 1 then\n    if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" then\n    p = 640\n    computing.cells[a].charge = 1\n    computing.cells[a].destroyed= 0\n    cellsToElements()\n    dialog ({header = \"Перегрузка\", text = \"Превышение допустимой мощности для ячейки \" .. t .. \"Ячейка сгорела (режим симуляции)\", answers = {\n    {text = \"Перезапустить симуляцию\", pressListener = function ()\n    hideDialog() end }\n    }\n    })\n\n\n    elseif computing.currentMission == \"t5\" then\n      computing.trainEnd = 1\n      compMapGen()\n   else\n     dialog ({header = \"Перегрузка\", text = \"Превышение допустимой мощности для ячейки \" .. t .. \"Ячейка сгорела\", answers = {\n    {text = \"Всё равно продолжить\", pressListener = function ()\n    computing.cells[a].destroyAlert = 1\n    cellsToElements ()\n    hideDialog() end },\n    {text = \"Закончить попытку\", pressListener = function ()\n    cellsToElements ()\n    CompEnotherHelpVar = 2  -- !!!!!!\n    showPage {id = p}\n    hideDialog() end}\n    }\n    })\n    end\n  else end\nCompEnotherHelpVar = CompEnotherHelpVar == 2 and 2 or 0\nend\n\n\nfunction cellsCheck()\n  local cm = computing.currentMission\n  preservation()\n\n  for i = 1,8 do\n    if computing.cells[i].charge > computing.cells[i].capacity then\n        if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" then\n          computing.cells[i].charge = 2\n          destroyDialog(i)\n       elseif cm == \"end\" then\n       else\n         computing.cells[i].destroyed = 1\n         computing.cells[i].capacity = -1\n         computing.cells[i].charge = 0\n         --костыль =(\n           for k,v in pairs (computing.elements) do\n              if v.position == i then\n                 v.destroyed = 1\n              end\n           end\n         cellsToElements()\n         destroyDialog(i)\n       end \n    end\n  end\nend\n\n--\n\n--Функция генерации заряда для генератора - авто\nfunction generate()\nlocal pos = computing.elements.generator.position\nif computing.elements.generator.destroyed ~= 1 then\n   computing.GeneratorMult = computing.GeneratorMult or 1\n   local a = computing.GeneratorMult\n   computing.cells[pos].charge = computing.cells[pos].charge <plus> a\n   computing.messageText = (computing.messageText or \"\") .. \"Генератор произвёл \" .. (a == 1 and \"1 заряд мощности<s>\n\" or \"2 заряда мощности<s>\n\")\nelse end\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 642,
        "calculate": false
      },
      {
        "super_calculate": true,
        "id": 642,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "lua_do": "function lua_do()\n--Функция сжигания заряда на выходах - авто\nfunction burnEnergy()\n  local a = computing.elements.mainExit.position -- номер большого выхода\n  local b = computing.elements.oneMoreExit.position -- номер второго выхода \n  if computing.cells[a].charge > 1 then\n     computing.cells[a].charge = computing.cells[a].charge - 2\n     computing.exitBurns = 2\n     \n     computing.messageText = (computing.messageText or \"\") .. \"Через выход передано вовне 2 заряда<s>\n\"\n   elseif computing.cells[a].charge == 1 then\n     computing.exitBurns = 1\n     \n     computing.cells[a].charge = 0\n     computing.messageText = (computing.messageText or \"\") .. \"Через выход передан вовне 1 заряд<s>\n\"\n  else\n     computing.exitBurns = 0\n  end\n\n  if computing.cells[b].charge > 0 then\n     computing.cells[b].charge = computing.cells[b].charge - 1\n    computing.oneMoreExitBurns = 1\n     computing.messageText = (computing.messageText or \"\") .. \"Через ещё один выход передан вовне 1 заряд<s>\n\"\n  else\n    computing.oneMoreExitBurns = 0\n  end\nend\n\n--\n\n--Функция перекачки градиентом - авто\nfunction gradientFlow()\nif computing.gradientOff ~= 1 then\n  local a3 = computing.cells[3].charge\n  local a4 = computing.cells[4].charge\n  local a5 = computing.cells[5].charge\n  local a6 = computing.cells[6].charge\n  local b3 = computing.cells[3].destroyed \n  local b4 = computing.cells[4].destroyed\n  local b5 = computing.cells[5].destroyed\n  local b6 = computing.cells[6].destroyed\n\n  local v3 = computing.cells[3].vinPad \n  local v4 = computing.cells[4].vinPad \n  local v5= computing.cells[5].vinPad \n  local v6 = computing.cells[6].vinPad \n  local r3 = computing.cells[3].rodPad \n  local r4 = computing.cells[4].rodPad \n  local r5 = computing.cells[5].rodPad \n  local r6 = computing.cells[6].rodPad \n\ncomputing.gradientMult = computing.gradientMult or 1\nlocal m = computing.gradientMult\n   if computing.gradient == 0 -- \"вниз\"\n   then\n      if a3 > 0 and b5 ~= 1 then\n         a3 = a3 - m\n         a5 = a5 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r3 .. \" на \" .. v5 .. \"<s>\n\"\n      else end\n      if a4 > 0 and b6 ~= 1 then\n         a4 = a4 - m\n         a6 = a6 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r4 .. \" на \" .. v6\n      else end\n   else\n      if a5 > 0 and b3 ~= 1 then\n         a5 = a5 - m\n         a3 = a3 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r5 .. \" на \" .. v3 .. \"<s>\n\"\n      else end\n      if a6 > 0 and b4 ~= 1 then\n         a6 = a6 - m\n         a4 = a4 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r6 .. \" на \" .. v4\n      else end\n   end\ncomputing.cells[3].charge = a3\ncomputing.cells[4].charge = a4\ncomputing.cells[5].charge = a5\ncomputing.cells[6].charge = a6\n\nelse end\n\nend\n\n--\n\n--Функция перекачки предохранителем - авто\nfunction preservDialog(a)\n\ncomputing.preservDialogDisable = computing.preservDialogDisable or 0\nlocal t = computing.cells[a].text\n\n   if computing.preservDialogDisable == 0 then\n  dialog ({header = \"Перегрузка\", text = \"Превышение допустимой мощности для ячейки \" .. t .. \"Сработал предохранитель\", answers = {\n{text = \"Дальше\", pressListener = function ()\ncomputing.turnCanceled = 1\nshowPage{id = g.current_id, transition = \"instant\"}\nhideDialog() end },\n{text = \"Больше не показывать\", pressListener = function ()\ncomputing.preservDialogDisable = 1\ncomputing.turnCanceled = 1\nshowPage{id = g.current_id, transition = \"instant\"}\nhideDialog() end}\n}\n})\nelse end\nend\n\nfunction preservation()\nlocal pos = computing.elements.preservator.position \nif computing.cells[pos].destroyed ~= 1 then\nlocal a = 0\nlocal t = getNeighTab(computing.elements.preservator.position)\n  for k,v in pairs (t) do\n     if computing.cells[v].charge > computing.cells[v].capacity then\n        a = computing.cells[v].charge - computing.cells[v].capacity\n         computing.cells[v].charge = computing.cells[v].charge - a\n         computing.cells[5].charge = computing.cells[5].charge <plus> a\n         computing.preservActivated = computing.currentMission == \"t3\" and 1 or 0\n     preservDialog(v)\n     else\n     end\n  end\nelse end  \nend\n\n--\n\n--Функция выкачивания зарядов выходом (по 2/1 со всех соседей) - по нажатию\nfunction exitActivate(a)\nlocal b = {}\nlocal p = 0\n   if a == 1 then\n     p = computing.elements.oneMoreExit.position\n   else\n      p = computing.elements.mainExit.position\n   end\n\n   b = getNeighTab(p)\n\n   for k,v in pairs(b) do\n      if computing.cells[v].charge >= a then\n         computing.cells[p].charge = computing.cells[p].charge <plus> a\n         computing.cells[v].charge = computing.cells[v].charge - a\n      else\n         computing.cells[v].charge = 0\n         computing.cells[p].charge = computing.cells[p].charge <plus> computing.cells[v].charge\n      end\n   end\n\nend\n\n--\n\n--Функция поиска и выкачивания x зарядов из соседних ячеек - вспомогательная\nfunction randomPump(a, x)\n\n  local sumCharge = 0\n  local t = getNeighTab(a)\n  for k,v in pairs(t) do\n     sumCharge = sumCharge <plus> computing.cells[v].charge\n  end\n\n  local pumpNum = x < sumCharge and x or sumCharge\n  computing.cells[a].charge = computing.cells[a].charge <plus> pumpNum\n\n  while pumpNum > 0 do\n    for k,v in pairs(t) do\n       if computing.cells[v].charge > 0 then\n         local rand= math.random(0,1)\n         computing.cells[v].charge = computing.cells[v].charge - rand\n          pumpNum = pumpNum - rand\n       else end\n    end\n  end\n  \n end\n\n--\n\n--функция выкачивания зарядов важной штукой (3 заряда с любых соседей) - по нажатию\nfunction importantActivate()\n  local a = computing.elements.important.position\n  randomPump(a, 3)\nend\n\n--\n\n--функция таймера и обратного отсчёта\nfunction compTimer()\n  if computing.timerReverse > 0 then\n    computing.timerReverse = computing.timerReverse - 1\n  end\nend\n\nend"
      },
      {
        "super_calculate": true,
        "id": 642,
        "calculate": false,
        "lua_do": "function lua_do()\n--Функция для вызова диалога о том, что важная штука оказалось обесточена. Варианты: \"ок\"\nfunction imortantDischarged()\nlocal a = computing.elements.important.position\nlocal cm = computing.currentMission\n\nif computing.cells[a].charge == 0 then\n  if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" or cm == \"t5\" then\n    computing.elements.important.charge = 4\n         elementsToCells()\n    local p = 640\n    dialog ({\n      header = \"Провал\",\n      text = \"<s><s>\"Важная штука<s><s>\" оказалась полностью разряжена!<s>\n<s>\nПерезапуск режима симуляции.\",\n      answers = {\n        {text = \"Продолжить попытку\",\n         pressListener = function ()\n         showPage {id = p}\n         hideDialog() end}\n       }\n     })\n  elseif cm == \"c2\" then\n     computing.missions.c2.complete = 1\n      compEnd()\n  else\n  local p = 643\n      dialog ({\n      header = \"Провал\",\n      text = \"<s><s>\"Важная штука<s><s>\" оказалась полностью разряжена!\",\n      answers = {\n        {text = \"Закончить попытку\",\n         pressListener = function ()\n         showPage {id = p}\n         CompEnotherHelpVar = 2 -- !!!! \n         hideDialog() end}\n       }\n     })\n   end\nelse end\nCompEnotherHelpVar = CompEnotherHelpVar == 2 and 2 or 1\nend\n\n--\n\n--Функция вывода мессаджа\nfunction compMes()\n  message(computing.messageText, \"true\")\n  computing.messageText = \"\"\nend\n\n--\n\n--Функции для заданий\ncomputingIni()\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 648,
        "text": "Функции для заданий",
        "run": [
          648
        ]
      },
      {
        "super_calculate": true,
        "id": 642,
        "text": " Сбор всех автофункций в одну",
        "calculate": false,
        "lua_do": "function lua_do()\nfunction endTurn()\n  if computing.turnCanceled ~= 1 then\n  generate()\n  burnEnergy()\n  gradientFlow()\n  preservation()\n  cellsCheck()\n  cellsToElements ()\n  imortantDischarged()\n  compMes()\n  compTimer()\n  compTask()\n  computing.endTurnCount = (computing.endTurnCount or 0) <plus> 1\n    \n  else\n  computing.turnCanceled = 0\n  end\nend\n\n--\n\n--Функция отображения заряда на ячейках - вспомогательная\nfunction demonstrate(n, x, z)\ncomputing.demonstrateType = computing.demonstrateType or 0\nif computing.demonstrateType == 0 then\nlocal a = x or computing.cells[n].charge\nlocal b = z or computing.cells[n].capacity\nlocal c = x and 0 or computing.cells[n].destroyed\n\n\nlocal text1= \"\"\nlocal text2 = \"\"\n\n\n  if c == 1 then\n   return \"[Вышел из строя]\"\n  elseif a == 0 then\n    text1 = [=[[]=]\n  elseif a == 1 then\n    text1 = [=[[lll]=]\n  elseif a == 2 then\n    text1 = [=[[lll lll]=]\n  elseif a == 3 then\n    text1 = [=[[lll lll lll]=]\n  elseif a == 4 then\n    text1 = [=[[lll lll lll lll]=]\n  elseif a == 5 then\n    text1 = [=[[lll lll lll lll lll]=]\n  elseif a == 6 then\n    text1 = [=[[lll lll lll lll lll lll]=]\n  end\n\n  for i = 0, b - a do\n    if b - a > i then \n      text2 = text2 .. \"    \"\n    end\n  end\n\nreturn text1 .. text2 .. [=[]]=]\n\nelse\nlocal a = x or computing.cells[n].charge\nlocal b = z or computing.cells[n].capacity\nlocal c = x and 0 or computing.cells[n].destroyed\n\nif c == 1 then\n  return \"[Вышел из строя]\"\nelse\n  return a .. \"/\" .. b\nend\nend\nend\n\n--\n\n--Функция: луа_ду для первой карты\nfunction compLuaDo1(a)\nlocal p = 640\n  if computing.cells[a].text == \"Важная штука<s>\n\" then\n     importantActivate()\n  elseif computing.cells[a].text == \"Выход<s>\n\" then\n     exitActivate(2)\n  elseif computing.cells[a].text == \"Ещё один выход<s>\n\" then\n    exitActivate(1)\n else\n    compNeighbor(a)\n    chargeReplace(a)\n    computing.source = a\n    p = 641\n end\ncomputing.cellPressed = a\nshowPage{id = p, transition = \"instant\"}\nend\n\n--\n\n--Функция: луа_ду для второй карты\nfunction compLuaDo2(n)\nlocal p = 640\n  chargeTransfer(n)\n  showPage{id = p, transition = \"instant\"}\nend\n\n--\n\n--Функция: луа_иф для первой карты (актив/неактив)\nfunction compLuaIf1(n, act)\n\nlocal a = computing.cells[n].destroyed == 0\nlocal b = computing.cells[n].charge ~= 0\nlocal c = computing.cells[n].zeroChargeSelection == 0\n\n  if act == 1 and c then\n    return a and b\n  elseif act == 1 and not c then\n    return a\n  elseif act == 0 and c then\n    return not a or not b\n  else\n    return not a\n  end\nend\n\n--\n\n--Функция: луа_иф для второй карты (актив/неактив)\nfunction compLuaIf2(a, act)\ncompNeighbor(computing.source)\nreturn (computing.cells[a].neighbourToSource == 1 and act == 1) or (computing.cells[a].neighbourToSource ~= 1 and act == 0)\nend \n\n--\n\n--Функция: луа_текст (универсально для карт и актив.)\nfunction compLuaText(n) -- по номеру, через cells\n  local c = computing.cells[n]\n  local a = c.charge\n  local b = c.capacity\n  local t = c.text\n  return t .. demonstrate(n)\nend\n\n--\n\n--Функция луа ду для кнопки отмены\nfunction cancelChargeTransfer()\nlocal a = computing.source\ncomputing.cells[a].charge = computing.replacedCharge\ncomputing.replacedCharge = 0\ncomputing.turnCanceled = 1\nshowPage{id = 640, transition = \"instant\"}\nend\n\n--\n\n--Функция луа text для кнопки отмены\nfunction cancelText()\ncomputing.replacedCharge = computing.replacedCharge or 1\nreturn \"Отменить перенос заряда<s>\n\" .. demonstrate(10,  computing.replacedCharge, 6) \nend\n\n--\n\n--Функция луа text для градиента \nfunction compGradientText()\ncomputing.gradient = computing.gradient  or 0\nreturn (computing.gradient == 0 and \"↓↓ Перекачка: вниз ↓↓\" or \"↑↑ Перекачка: вверх ↑↑\")\nend\n\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nforceFuncRenewFlag = 0\nend",
        "calculate": true,
        "text": "сброс флага обновления функций",
        "id": 642
      }
    ]
  },
  {
    "id": 643,
    "text": "   Дроид снова выругался, и на этот раз переводчик донёс до ушей джедая отдельные слова на общегалактическом.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nreloadOn = nil\ng.blockSaves = 0\nend"
      },
      {
        "id": 643,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n-- добавить вариативное описание для других линий линия 6\nlocal text = \"\"\ntext = (UpLine == 6 and \n[=[– Ладно, не бери в голову, – неожиданно заявил TL-3 после короткой паузы. – Может быть, мы ещё найдём, что ищем. Поехали дальше.\n   Магистр Льерсо нахмурился, но так ничего и не сказал.\n   Спутники молча направились к винтовой лестнице в дальней части помещения. Орнас чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Юноша сочувственно посмотрел на мнущегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и шагнул следом, чувствуя на спине тяжёлый взгляд наставника.]=]\n)\n\nor (UpLine == 4 and [=[– Ладно, не бери в голову, – неожиданно заявил TL-3 после короткой паузы. – Может быть, мы ещё найдём, что ищем. Поехали дальше.\n   Джедай кивнул и они молча направились к винтовой лестнице в дальней части помещения. Орнас чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Юноша сочувственно посмотрел на мнущегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и шагнул следом.]=])\n\nor (UpLine == 7 and UpLine7.dessRun ~= 1 and [=[– Ладно, не бери в голову, – неожиданно заявил TL-3 после короткой паузы. – Может быть, мы ещё найдём, что ищем. Поехали дальше.\n   Джедай кивнул и они молча направились к винтовой лестнице в дальней части помещения. Десс догнала их у самых ступеней. Она, кажется, всё поняла и не стала нарушать гнетущее молчание.\n   Орнас чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Юноша сочувственно посмотрел на мнущегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и шагнул следом, чувствуя сзади шаги Десвиар.]=])\n\nor (UpLine == 7 and UpLine7.dessRun == 1 and [=[– Ладно, не бери в голову, – неожиданно заявил TL-3 после короткой паузы. – Может быть, мы ещё найдём, что ищем. Поехали дальше.\n   Джедай кивнул и они молча направились к винтовой лестнице в дальней части помещения. Где-то на заднем плане периодически всплывало беспокойство из-за исчезнувшей Десс: куда и зачем она сбежала? Стоило ли опасаться новой встречи с ней?\n   Орнас чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Юноша сочувственно посмотрел на мнущегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и шагнул следом.]=])\n\nor (UpLine == 8 -- возможно, нужно условие, что все целы\nand [=[– Ладно, не бери в голову, – неожиданно заявил TL-3 после короткой паузы. – Может быть, мы ещё найдём, что ищем. Поехали дальше.\n   Джедай кивнул и они молча направились к винтовой лестнице в дальней части помещения. Магистр Льерсо и Десс догнали их у самых ступеней. Они, кажется, догадались о результатах взлома и не стали нарушать гнетущее молчание.\n   Орнас чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Юноша сочувственно посмотрел на мнущегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и пошёл следом, чувствуя позади шаги учителя и Десвиар.]=])\n\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\nlocal a = 0\nif UpLine == 6 then \na = 6\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = 2 UpLineConflictsDess_TL = -1\n\nelseif UpLine == 4 then\na = 4\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\n\nelseif UpLine == 7 and UpLine7.dessRun ~= 1 then\na = 7\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = 2\n\n\nelseif UpLine == 7 and UpLine7.dessRun == 1 then\na = 4\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = 1\n\nelseif UpLine == 8 -- возможно, нужно условие, что все целы\nthen\n\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\na = 8\nend\n\nupLineFinal =  a\nend",
        "text": "Новый ответ. введите текст",
        "id": 643,
        "calculate": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ncompMapGen = nil\ncomputingIni = nil\nelementsToCells = nil\ncellsToElements = nil\ndeleteNumber = nil\ngetNeighTab = nil\ncompNeighbor = nil\nchargeReplace = nil\nchargeTransfer = nil\ndestroyDialog = nil\ncellsCheck = nil\ngenerate = nil\nburnEnergy = nil\ngradientFlow = nil\npreservDialog = nil\npreservation = nil\nexitActpreservation  = nil\nrandomPump = nil\nimportantActivate = nil\ncompTimer = nil\nimortantDischarged = nil\ncompMes = nil\ncompCondition = nil\ncompTaskChange = nil\ncompProgressT1 = nil\ncompProgressT1Text = nil\ncompProgressT2 = nil\ncompProgressT2Text = nil\ncompProgressT3 = nil\ncompProgressT3Text = nil\ncompProgressT4 = nil\ncompProgressT4Text = nil\ncompProgressT5 = nil\ncompProgressT5Text = nil\ncompProgressA1 = nil\ncompProgressA1Text = nil\ncompProgressA2 = nil\ncompProgressA2Text = nil\ncompProgressA3 = nil\ncompProgressA3Text = nil\ncompTaskFail = nil\ncompProgressB1 = nil\ncompProgressB1Text = nil\ncompProgressB2 = nil\ncompProgressB2Text = nil\ncompProgressB3 = nil\ncompProgressB3Text = nil\ncompProgressC1 = nil\ncompProgressC1Text = nil\ncompProgressC2 = nil\ncompProgressC2Text = nil\ncompProgressC3 = nil\ncompProgressC3Text = nil\nendTurn  = nil\ndemonstrate  = nil\ncompLuaDo1 = nil\ncompLuaDo2 = nil\ncompLuaIf1 = nil\ncompLuaIf2 = nil\ncompLuaText = nil\ncancelChargeTransfer = nil\ncancelText = nil\ncompGradiendTurn  = nil\nend",
        "text": "Убить функции для компутинга",
        "id": 643,
        "calculate": true
      }
    ]
  },
  {
    "id": 644,
    "text": "– Тебе придётся немного побыть компьютером, – сообщил дроид, когда юноша подошёл к указанному терминалу. – Не надо пучить глаза, на тебе будет совсем простенький узел и элементарнейшие процессы.\n– Нет, давай всё по порядку, – замотал головой Орнас. – Что ты собрался делать и зачем тебе в этом я?\n– Взломать эту систему в классическом понимании мы не сможем, – начал TL-3. – Но можем попробовать вот что: я вырублю часть оборудования и подключусь вместо него, тогда протокол безопасности определит мои узлы как внутренние. Но если я просто буду выполнять новые функции, то не смогу получить доступ к данным, которые нас интересуют. Поэтому эти функции будешь выполнять ты, пока я проковыряю для нас окошко в их защите. Теперь дошло?\n– Дошло, – угрюмо повторил джедай. – Думаешь, я справлюсь?\n   Астромех крякнул что-то непереводимое, затем продолжил:\n– Сейчас выведу твой блок информации на этот экран, будешь работать отсюда. Понимаешь, что изображено на схеме ниже?",
    "answers": [
      {
        "id": 642,
        "text": "Вызов функций",
        "run": [
          642
        ]
      },
      {
        "super_calculate": false,
        "id": 644,
        "text": "Вызов функций",
        "calculate": true,
        "lua_do": "function lua_do()\ncomputingIni()\n  elementsToCells ()\nend"
      },
      {
        "lua_text": "function lua_text()\ncomputing.demonstrateType = 0\nreturn demonstrate(0,6,6)\nend",
        "id": 644,
        "text": "Новый ответ. введите текст",
        "comment": true,
        "left_answer": true
      },
      {
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn demonstrate(0,0,6)\nend",
        "id": 644,
        "text": "Новый ответ. введите текст",
        "comment": true,
        "left_answer": false
      },
      {
        "right_answer": true,
        "comment": false,
        "id": 645,
        "text": "Нет",
        "lua_do": "function lua_do()\ncomputing.demonstrateType = 1\nend",
        "left_answer": false
      },
      {
        "right_answer": false,
        "lua_do": "function lua_do()\ncomputing.demonstrateType = 0 \nend",
        "text": "Да",
        "id": 646,
        "left_answer": true
      },
      {
        "id": 642,
        "text": "Новый ответ. введите текст",
        "run": [
          642
        ]
      }
    ]
  },
  {
    "id": 645,
    "text": "– Нет, – покачал головой Орнас.\n– Погоди, сейчас настрою тебе цифровое отображение.\n   Он что-то переключил и на экране перед юношей появилось другое изображение.\n– Я оставлю тебе возможность изменять вид в любой момент с твоего терминала.\n– Ладно, – растерянно согласился Орнас.",
    "answers": [
      {
        "comment": true,
        "id": 644,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn demonstrate(0,6,6)\nend",
        "left_answer": true
      },
      {
        "right_answer": true,
        "lua_text": "function lua_text()\nreturn demonstrate(0,0,6)\nend",
        "id": 644,
        "text": "Новый ответ. введите текст",
        "comment": true,
        "left_answer": false
      },
      {
        "id": 642,
        "text": "Вызов функций",
        "run": [
          642
        ],
        "lua_if": "function lua_if()\nreturn type(demonstrate) ~= \"function\"\nend"
      },
      {
        "id": 646,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 646,
    "text": "– Так вот, ты возьмёшь на себя узел генерации и распределения мощности. Нужно будет просто гонять заряды из точки «А» в точку «Б», с этим даже ребёнок справится.\n– Так звучит довольно просто, – чуть более уверенно кивнул юноша. – Мне нужно что-нибудь ещё знать?\n– Ну-у-у... – замялся дроид. – Тут есть генератор, несколько портов вывода мощности, а ещё градиентное электромагнитное поле... Э, нет, не раскисай. ",
    "answers": [
      {
        "id": 646,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = (style == 4 and \"Ты же у нас умник и с техникой на короткой ноге, это – сущий пустяк для такого мастера. \" or \"Ты же справился с ремонтом меня, а это – куда проще. И ответственности меньше. \") .. [=[ \n   Орнаса не слишком обнадёжили подобные утешения, но высказывать сомнения он не стал. Дроид продолжил:\n– В общем так: генератор он и есть генератор, он вырабатывает единицу мощности каждый такт. Выход же, наоборот, выводит два условных заряда каждую единицу времени. Есть ещё один выход, через него перетекает по одному заряду. И ещё здесь три штуки разной ёмкости, на них не обращай внимания. А вот эта штука – важная. На ней всегда должен быть хотя бы один заряд мощности, иначе – кирдык. Ну и предохранитель вот, на случай, если в любой соседней ячейке окажется больший заряд, чем она может вместить, чтоб не сгорела.]=]\nreturn text \nend",
        "merge": true
      },
      {
        "id": 647,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 647,
    "text": "   Затея нравилась Орнасу всё меньше с каждой новой порцией информации.\n– Теперь всё?\n– Почти. Есть ещё градиент... – TL-3 снова замялся. – В общем, есть штука, которая сама перекачивает мощность в прилегающих ячейках.Тут, наверное, лучше просто увидеть... Но в целом всё просто: одним нажатием выбираешь откуда берёшь заряд, вторым – соседнюю ячейку, куда его переносишь. Ну кроме портов вывода и той важной штуки, они при нажатии будут вытягивать мощность из соседей. Стой, давай хотя бы попробуем...\n   Орнас сам не заметил, как сделал несколько шагов в сторону от ставшей излишне сложной панели. Он взял себя в руки, вздохнул и подошёл прямо к ней, вглядываясь в элементы управления.",
    "answers": [
      {
        "id": 640,
        "text": "Дальше",
        "lua_do": "function lua_do()\ncomputingIni()\n  elementsToCells ()\nend"
      },
      {
        "id": 642,
        "text": "Новый ответ. введите текст",
        "run": [
          642
        ],
        "lua_if": "function lua_if()\nreturn type (computingIni) ~= \"function\"\nend"
      }
    ]
  },
  {
    "id": 648,
    "text": "т1) перенести заряд на любую ячейку\nт2) использовать выкачивание заряда выходом, вторым выходом и важной штукой \nт3) добиться срабатывания предохранителя\nт4) поменять направление градиента и подождать 1 ход\n\nа1) выводить через основной выход непрерывно 10 зарядов мощности\nа2) выводить через второй выход непрерывно 10 зарядов мощности\nа3) держать генератор с менее половины максимальной емкости в течение 6 ходов\n\nб1) увеличение мощности генератора, не выводить энергию через основной выход 7 ходов\nб2) остановка генератора, выдать 4 мощности на второй выход за 7 ходов \nб3) увеличение мощности градиента, держать предохранитель не менее чем наполовину заполненным в течение 8 ходов \nб5) утечка из важной штуки, начинает сжигать по 1 заряду. выжить 8 ходов \n\n[=[б3) генератор и штука меняются местами, держать генератор более чем наполовину заполненным 8 ходов]=]\n\nс1) уничтожить перегрузкой предохранитель за 5 ходов\nс2) обесточить важную штуку за 3 хода\n\nв2) уничтожить перегрузкой генератор за 4 хода \nв3) уничтожить перегрузкой выход\nв4) \n\n",
    "answers": [
      {
        "super_calculate": true,
        "id": 648,
        "calculate": false,
        "lua_do": "function lua_do()\n\n--установка стартовых условий\nfunction compCondition(a)\n  if a == \"t1\" then     \n  elseif a == \"t2\" then\nlocal b = computing.elements.thatThing.position\nlocal c = computing.elements.bigOne.position\nlocal d = computing.elements.smallOne.position\n    computing.cells[b].charge = computing.cells[b].capacity\n   computing.cells[c].charge = computing.cells[c].capacity\ncomputing.cells[d].charge = computing.cells[d].capacity\n  \n  elseif a == \"t4\" then\n    computing.gradientOff = 0\n    computing.gradPressed = 0\n      for i = 1, 8 do\n       computing.cells[i].charge = 0\n      end\n   computing.cells[5].charge = 4\n   computing.elements.important.charge = 4\n  elseif a == \"t5\" then\n    for i = 1, 8 do\n       computing.cells[i].charge = 0\n      end computing.elements.important.charge = 3\ncomputing.elements.generator.charge = 2\n   elseif a == \"a1\" or  a == \"a2\" or a == \"a3\" then\n   compMapGen()\n   elementsToCells()\n  computing.elements.generator.charge = 2\n  elseif a == \"b2\" then\n    local g = computing.elements.generator.charge\n    local i = computing.elements.important.charge\n    if g <plus> i < 6 then\n      computing.elements.generator.charge = 3\n     computing.elements.important.charge = 3\n      elementsToCells()\n    end\n  else end\nend\n\n--\n\n--смена заданий\nfunction compTaskChange(s)\nif computingFail == 1 then\nelseif CompEnotherHelpVar == 1 then\n  if not s then\n    local a = 0\n    local b = 0\n    local c = 0\n\n  if computing.currentMission == \"t1\" then\n     computing.currentMission = \"t2\"\n     compCondition(\"t2\")\n  elseif computing.currentMission == \"t2\" then\n     computing.currentMission = \"t3\"\n  elseif computing.currentMission == \"t3\" then\n     computing.currentMission = \"t4\"\n     compCondition(\"t4\")\n  elseif computing.currentMission == \"t4\" then\n  computing.currentMission = \"t5\"\n  compCondition(\"t5\")\n  elseif computing.currentMission == \"t5\" then\n     computing.currentMission = \"a\" .. math.random(1,3)\n     compCondition(computing.currentMission)\n  end\nelse\n  local t = (s == 1 and \"a\") or (s == 2 and \"b\") or (s == 3 and \"c\")\n  local l = 3 --(s == 1 or s == 2 and 3) or 4\n  if s == 4 then\n    computing.currentMission = \"taskEnd\"\n  else\n     computing.currentMission = t .. math.random(1,l)\n  end\nend\n\nif computing.currentMission == \"b2\" then\n  compCondition(\"b2\")\nend\n\ncompMissionDialog()\nend\nend\n\n--\n\n-- функция для прогресса т1\nfunction compProgressT1()\n  if computing.cells[2].charge > 0 or computing.cells[3].charge > 0 then\n    computing.missions.t1.complete = 1\n   compTaskChange()\n  else\n  end\nend\n\nfunction compProgressT1text()\n  if computing.cells[2].charge > 0 or computing.cells[3].charge > 0 then\n   return \". Прогресс: 1/1\"\n  else\n  return \". Прогресс: 0/1\"\n  end\nend\n\ncomputing.missions = computing.missions or {}\n\ncomputing.missions.t1 =\n{title = \"перенести заряд на любую ячейку\", longText = \"– Хорошо, давай пока потренируемся в режиме симуляции, – затараторил TL-3. – Это ни на что не влияет, а ты быстро научишься. Попробуй для разминки просто перенести этот заряд с генератора на другую ячейку: сначала выбери сам генератор, затем – любую из соседних штук.\", startingDialogShowed = computing.missions.t1 and computing.missions.t1.startingDialogShowed or 0; complete = computing.missions.t1 and computing.missions.t1.complete or 0, progress = compProgressT1, progressText = compProgressT1text\n}\n\n--функция прогресса т2\n\n--перед запуском установить побольше зарядов на все ячейки\n\nfunction compProgressT2()\n\ncomputing.progressT2tab = computing.progressT2tab or {}\n\nlocal a = computing.cellPressed\nlocal e1loc = computing.elements.mainExit.position\nlocal e2loc = computing.elements.oneMoreExit.position\nlocal imploc = computing.elements.important.position\n\ncomputing.progressT2tab.e1 = a == e1loc and 1 or computing.progressT2tab.e1 or 0\n\ncomputing.progressT2tab.e2 = a == e2loc and 1 or computing.progressT2tab.e2 or 0\n\ncomputing.progressT2tab.imp = a == imploc and 1 or computing.progressT2tab.imp or 0\n\nlocal prog = computing.progressT2tab.imp <plus> computing.progressT2tab.e1 <plus> computing.progressT2tab.e2\n\nif\n  prog == 3 then\n   computing.missions.t2.complete = 1\n   compTaskChange()\n else\nend \n\nend\n\n\nfunction compProgressT2Text()\ncompProgressT2()\nlocal prog = computing.progressT2tab.imp <plus> computing.progressT2tab.e1 <plus> computing.progressT2tab.e2\nreturn \". Прогресс: \" .. prog .. \"/3\"\nend\n\ncomputing.missions.t2 =\n{title = \"использовать <s><s>\"важную штуку<s><s>\", <s><s>\"выход<s><s>\" и <s><s>\"ещё один выход<s><s>\"\", longText = \"– Отлично! – излишне бодро отреагировал TL-3. – Перенести заряд можно со всех элементов, кроме важной штуки и выходов. Нажатие на них выкачает мощность из соседних ячеек. Важная штука отберёт три заряда случайным образом, выход – по две единицы с каждого соседа, ещё один выход – по единице. Проверь, как это происходит. И не забывай, что каждый такт через выходы мощность покидает этот участок.\", complete = computing.missions.t2 and computing.missions.t2.complete or 0, startingDialogShowed = computing.missions.t2 and computing.missions.t2.startingDialogShowed or 0;  progress = compProgressT2, progressText = compProgressT2Text }\n\n--\n\n--Функция для прогресса т3\nfunction compProgressT3()\n    if computing.preservActivated == 1 then\n   computing.missions.t3.complete = 1\n   compTaskChange()\n   else end\nend\n\nfunction compProgressT3Text()\n  if computing.preservActivated == 1 then\n   return \". Прогресс: 1/1\"\n  else\n  return \". Прогресс: 0/1\"\n  end\nend\n\ncomputing.missions.t3 = {title = \"добиться срабатывания предохранителя\"; longText = \"– Примерно так это и будет работать, – продолжил TL-3. – Обрати внимание на предохранитель. Он будет защищать от перегрузки соседние элементы, пока не сгорит сам. Иногда это будет очень кстати. Попробуй сделать так, чтобы предохранитель сработал сейчас.\"; complete = computing.missions.t3 and computing.missions.t3.complete or 0; startingDialogShowed = computing.missions.t3 and computing.missions.t3.startingDialogShowed or 0;  progress = compProgressT3, progressText = compProgressT3Text }\n\n--\n\n--функция задания т4\nfunction compProgressT4()\ncomputing.t4stage = computing.t4stage or 1\n  if computing.gradPressed == 1 and computing.t4stage == 1 then\n    computing.t4stage = 2\n    computing.timerReverse  = 1\n  elseif computing.t4stage == 2 and computing.timerReverse == 0 then\n    computing.t4stage = 3\n  end\n\n  if computing.t4stage == 3 then\n     computing.missions.t4.complete = 1\n     compTaskChange()\n  else end\n\nend\n\n\nfunction compProgressT4Text()\n  compProgressT4()\n  if computing.t4stage == 1 then    \n    return \". Прогресс: 0/2\"\n  elseif computing.t4stage == 2 then\n    return \". Осталось подождать: \" .. computing.timerReverse .. \" такт. Прогресс 1/2\"\n  elseif computing.t4stage == 3 then\n     return \". Прогресс: 2/2\"\n  else end\nend\n\ncomputing.missions.t4 = {title = \"поменять направление перекачки и подождать 1 ход\"; longText = \"– И, наконец, то самое поле с градиентом напряжённости, – вновь заговорил TL-3. – Это такая штука, которая каждый такт сама перекачивает заряды: либо сверху вниз, либо снизу вверх. Я добавил соответствующий элемент на общую схему, но ячейкой он не является и не нарушает их соседство. Нажатие на него просто изменит направление перекачки. Попробуй это сделать и посмотри, что будет.\"; complete = computing.missions.t4 and computing.missions.t4.complete or 0;  startingDialogShowed = computing.missions.t4 and computing.missions.t4.startingDialogShowed or 0; progress = compProgressT4, progressText = compProgressT4Text}\n\n--\n\n-- функция задания т5\n\nfunction compProgressT5()\n  if computing.trainEnd == 1 then\n     computing.missions.t5.complete = 1\n     compTaskChange()\n  else end\nend\n\nfunction compProgressT5Text()\n  return \"\"\nend\n\ncomputing.missions.t5 = {title = \"уничтожить любой элемент перегрузкой для завершения обучения.\"; longText = \"– Вот и всё. Не так сложно, правда? – то ли серьёзно, то ли иронично спросил TL-3. – Можешь ещё немного потренироваться, если хочешь. Когда надоест, просто перегрузи любой элемент большим количеством зарядов, чем он может вместить, и мы начнём.\"; complete = computing.missions.t5 and computing.missions.t5.complete or 0;  startingDialogShowed = computing.missions.t5 and computing.missions.t5.startingDialogShowed or 0; progress = compProgressT5, progressText = compProgressT5Text}\n\n--\n\n-- функция задания а1\nfunction compProgressA1()\n\n  local b = computing.exitBurns\n  computingA1stage = computingA1stage or 0\n  computingA1charge = computingA1charge or 15\n\n  if computingA1stage == 0 then\n    if b > 0 then\n      computingA1stage = 1\n    end\n  elseif computingA1stage == 1 then\n    if b < 1 then\n      computingA1stage = 0\n      message (\"Непрерывность подачи мощности через выход нарушена!\")\n    end\n  end\n\n  if computingA1stage == 0 then\n     computingA1charge = 15\n  elseif computingA1stage == 1 then\n    computingA1charge = computingA1charge -  b\n  end\n\n\n\n   if computingA1charge  < 1 and computing.elements.important.charge >0\n   then\n     computing.missions.a1.complete = 1\n     compTaskChange(2)\n  end\n\nend\n\n\nfunction compProgressA1text()\ncomputingA1charge = computingA1charge or 15\n  if computingA1charge > 0 then\n     return \" Осталось вывести зарядов: \" .. computingA1charge \n  else\n    return \"\"\n  end\nend\n\ncomputing.missions.a1 = {title = \"непрерывно выводить через выход 15 зарядов мощности.\"; longText = \"– Надеюсь, ты достаточно освоился, – наконец заговорил после долгой паузы астромех. – Я начинаю.<s>\n   Сначала Орнас ничего не заметил, но через пару секунд почувствовал запах гари. Почти сразу же раздался небольшой хлопок, а аппарат, к которому подключился TL-3, задымился. Освещение зала моргнуло несколько раз, затем всё вновь вернулось в норму.<s>\n– Мне нужно пятнадцать зарядов на основной выход, – прервал наблюдения юноши дроид. – Непрерывно. Если хотя бы один такт не будет передачи, придётся начинать с начала.\"; complete = computing.missions.a1 and computing.missions.a1.complete or 0; startingDialogShowed = computing.missions.a1 and computing.missions.a1.startingDialogShowed or 0; progress = compProgressA1, progressText = compProgressA1text}\n\n--\n\n-- функции задания а2\nfunction compProgressA2()\n\n  local b = computing.oneMoreExitBurns\n  computingA1stage = computingA1stage or 0\n  computingA1charge = computingA1charge or 15\n\n  if computingA1stage == 0 then\n    if b > 0 then\n      computingA1stage = 1\n    end\n  elseif computingA1stage == 1 then\n    if b < 1 then\n      computingA1stage = 0\n      message (\"Непрерывность подачи мощности через выход нарушена!\")\n    end\n  end\n\n  if computingA1stage == 0 then\n     computingA1charge = 15\n  elseif computingA1stage == 1 then\n    computingA1charge = computingA1charge -  b\n  end\n\n  if computingA1charge == 0 and computing.elements.important.charge >0\n  then\n     computing.missions.a2.complete = 1\n     compTaskChange(2)\n  end\n\nend\n\n\nfunction compProgressA2text()\ncomputingA1charge = computingA1charge or 15\n  if computingA1charge > 0 then\n     return \" Осталось вывести зарядов: \" .. computingA1charge \n  else\n    return \"\"\n  end\nend\n\ncomputing.missions.a2 = {title = \"непрерывно выводить через ещё один выход 15 зарядов мощности.\"; longText = \"– Надеюсь, ты достаточно освоился, – наконец заговорил после долгой паузы астромех. – Я начинаю.<s>\n   Сначала Орнас ничего не заметил, но через пару секунд почувствовал запах гари. Почти сразу же раздался небольшой хлопок, а аппарат, к которому подключился TL-3, задымился. Освещение зала моргнуло несколько раз, затем всё вновь вернулось в норму.<s>\n– Мне нужно пятнадцать зарядов на ещё один выход, – прервал наблюдения юноши дроид. – Непрерывно. Если хотя бы один такт не будет передачи, придётся начинать с начала.\"; complete = computing.missions.a2 and computing.missions.a2.complete or 0; startingDialogShowed = computing.missions.a2 and computing.missions.a2.startingDialogShowed or 0; progress = compProgressA2, progressText = compProgressA2text}\n\n--\n\n-- задание а3\nfunction compProgressA3()\n\nlocal b = 0\n\nfor i = 1,8 do\n  if computing.cells[i].charge > computing.cells[i].capacity / 2 then\n     b = 10\n  end\nend\n\ncomputingA1stage  = computingA1stage  or 0\ncomputingA1charge = computingA1charge or 16\n\n  if computingA1stage == 0 then\n    if b < 3 then\n      computingA1stage = 1\n    end\n  elseif computingA1stage == 1 then\n    if b > 3 then\n      computingA1stage = 0\n      message (\"Мощность превышена!\")\n    end\n  end\n\n  if computingA1stage == 0 then\n     computingA1charge = 15\n  elseif computingA1stage == 1 then\n    computingA1charge = computingA1charge -  1\n  end\n\n  if computingA1charge == 0  and computing.elements.important.charge >0 then\n     computing.missions.a3.complete = 1\n     compTaskChange(2)\n  end\n\nend\n\nfunction compProgressA3Text()\ncomputingA1stage  = computingA1stage  or 0\ncomputingA1charge = computingA1charge or 16\n  if computingA1charge > 0 then\n     return \" Осталось тактов: \" .. computingA1charge \n  else\n    return \" Выполнено.\"\n  end\nend\n\ncomputing.missions.a3 = {title = \"поддерживать на всех ячейках не более половины заполненности в течение 15 ходов.\"; longText = \"– Надеюсь, ты достаточно освоился, – наконец заговорил после долгой паузы астромех. – Я начинаю.<s>\n   Сначала Орнас ничего не заметил, но через пару секунд почувствовал запах гари. Почти сразу же раздался небольшой хлопок, а аппарат, к которому подключился TL-3, задымился. Освещение зала моргнуло несколько раз, затем всё вновь вернулось в норму.<s>\n– Мне нужно,  чтобы каждая ячейка была заполнена не более, чем наполовину, в течение пятнадцати тактов, – прервал наблюдения юноши дроид. – Непрерывно. Если хотя бы один такт там окажется больше половины от максимальной вместимости, придётся начинать с начала.\"; complete = computing.missions.a3 and computing.missions.a3.complete or 0; startingDialogShowed = computing.missions.a3 and computing.missions.a3.startingDialogShowed or 0; progress = compProgressA3, progressText = compProgressA3Text}\n\n--\n\n--Функция для фейлов в заданиях б\nfunction compTaskFail(a)\nlocal t = computing.missions[a].failText\n  computingFail = 1\n  dialog ({header = \"Неудача!\", text = t, answers =\n       {{text = \"Закончить\",\n         pressListener = function()\n         hideDialog()\n         showPage{id = 643}\n         end}}\n      })\nend\n\n--\n\n-- функция для задания б1\nfunction compProgressB1()\n  local b = computing.exitBurns\n\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 7\n\n  if computingB_stage == 0 then\n    computingB_timer = computingB_timer - 1\n  elseif computingB_stage == 1 then\n     if b > 0 then\n       compTaskFail(\"b1\")\n     else\n     end\n     computingB1_timer = computingB1_timer - 1\n  else end\n\n  if computingB_timer == 0 then\n    computingB_stage = 1\n   computing.GeneratorMult = 2\n  else end\n\n  if computingB1_timer == 0 and computing.elements.important.charge >0 then\n     computing.missions.b1.complete = 1\n     computing.GeneratorMult = 1\n     compTaskChange(3)\n  end\n\nend\n\nfunction compProgressB1Text()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 7\n\n  if computingB_stage == 0 then\n    return \" Тактов до увеличения мощности генератора: \" .. computingB_timer\n  else\n    return \" Осталось тактов без передачи зарядов через выход: \" .. computingB1_timer\n  end\n\nreturn \"\"\nend\n\ncomputing.missions.b1 = {title = \"Не выводить мощность через выход в течение 7 ходов.\"; longText = \"– Отлично!  – оживился TL-3. – Тут всё несколько сложнее, чем я ожидал, но мы ещё можем справиться. Сейчас выработка на генераторе усилится, это продлится буквально семь-восемь тактов. В течение этого времени ни в коем случае не выводи ничего через выход.\"; complete = computing.missions.b1 and computing.missions.b1.complete or 0; startingDialogShowed = computing.missions.b1 and computing.missions.b1.startingDialogShowed or 0; progress = compProgressB1, progressText = compProgressB1Text, failText = \"– Куда ты его?.. – возмутился дроид, но было уже поздно. – Всё, запороли...\"}\n\n--\n\n-- функции задания б2\nfunction compProgressB2()\n  local eb = computing.oneMoreExitBurns\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 8\n  computing.b_charge = computing.b_charge or 7\n\n  if computingB_stage == 0 then\n    computingB_timer = computingB_timer - 1\n  elseif computingB_stage == 1 then\n     computingB1_timer = computingB1_timer - 1\n    if eb > 0 then\n      computing.b_charge = computing.b_charge - eb\n    end\n  else end\n\n  if computingB_timer == 0 then\n    computingB_stage = 1\n   computing.GeneratorMult = 0\n  else end\n  \n  if computing.b_charge == 0 and computing.elements.important.charge >0 then\n     computing.missions.b2.complete = 1\n     computing.GeneratorMult = 1\n     compTaskChange(3)\n  elseif computingB1_timer == 0 then\n   compTaskFail(\"b2\")\n  end\n\nend\n\nfunction compProgressB2Text()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 8\n  computing.b_charge = computing.b_charge or 5\n  if computingB_stage == 0 then\n    return \" Тактов до остановки генератора: \" .. computingB_timer\n  else\n    return \"Осталось вывести зарядов через ещё один выход: \" .. computing.b_charge .. \"<s>\nОсталось тактов: \" .. computingB1_timer\n  end\n\nreturn \"\"\nend\n\ncomputing.missions.b2 = {title = \"За 7 ходов вывести через ещё один выход 5 зарядов мощности.\"; longText = \"– Отлично!  – оживился TL-3. – Тут всё несколько сложнее, чем я ожидал, но мы ещё можем справиться. Сейчас выработка на генераторе остановится, это продлится буквально семь-восемь тактов. В течение этого времени нужно успеть вывести пять зарядов через ещё один выход.\"; complete = computing.missions.b2 and computing.missions.b2.complete or 0; startingDialogShowed = computing.missions.b2 and computing.missions.b2.startingDialogShowed or 0; progress = compProgressB2, progressText = compProgressB2Text, failText = \"– Ну где же?.. – возмутился дроид, но было уже поздно. – Всё, запороли...\"}\n\n--\n\n--функции для задания б3\n\nfunction compProgressB3()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 2\n  computingB1_timer = computingB1_timer or 11\ncomputing.b1_charge = computing.b1_charge or 5\n  local g = computing.oneMoreExitBurns\n\n  if computingB_stage == 0 then\n    if computingB_timer == 0 then\n      computingB_stage = 1\n computing.elements.important.position = 4 computing.elements.mainExit.position = 6\n      elementsToCells()\n    else    end\n  else  end\n\n  if computingB_stage == 0 then\n    computingB_timer = computingB_timer - 1\n  elseif computingB_stage == 1 then\n      computingB1_timer = computingB1_timer - 1\n      computing.b1_charge = computing.b1_charge - g\n  else  end\n\n  if computing.b1_charge == 0 and computing.elements.important.charge >0 then\n    computing.missions.b3.complete = 1\ncomputing.elements.important.position = 6 computing.elements.mainExit.position = 4\n    elementsToCells()\n    compTaskChange(3)\n  elseif computingB1_timer == 0 then\n      compTaskFail(\"b3\")\n  end\n\nend\n\nfunction compProgressB3Text()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 2\n  computingB1_timer = computingB1_timer or 11\n  computing.b1_charge = computing.b1_charge or 5\n\n  if computingB_stage == 0 then\n    return \"Тактов до изменения в схеме: \" .. computingB_timer <plus> 1\n  else\n    return \"Зарядов осталось: \" .. computing.b1_charge .. \". Тактов осталось: \" .. computingB1_timer\n  end\n\nend\n\ncomputing.missions.b3 = {title = \"вывести через ещё один выход 5 зарядов в течение 10 ходов. \"; longText = \"– Отлично!  – оживился TL-3. – Тут всё несколько сложнее, чем я ожидал, но мы ещё можем справиться. Сейчас я на время немного изменю схему: выход и важная штука поменяются местами. Это продлится буквально девять-десять тактов. В течение этого времени нужно успеть вывести через ещё один выход пять зарядов.\"; complete = computing.missions.b3 and computing.missions.b3.complete or 0; startingDialogShowed = computing.missions.b3 and computing.missions.b3.startingDialogShowed or 0; progress = compProgressB3, progressText = compProgressB3Text, failText = \"– Ну, где?.. – возмутился дроид, но было уже поздно. – Всё, запороли...\"}\n\n--\n\n-- функции для задания с1\nfunction compProgressC1()\n  local d = computing.elements.preservator.destroyed\n  computing.c_timer = computing.c_timer or 5\n  \n  computing.c_timer = computing.c_timer - 1\n\n  if computing.c_timer == 0 then\n     if d == 1 then\n      computing.missions.c1.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c1\")\n    end\n  else \n     if d == 1 and computing.elements.important.charge >0 then\n      computing.missions.c1.complete = 1\n      compEnd()\n    else\n    end\n  end\n\nend\n\nfunction compProgressC1Text()\n  computing.c_timer = computing.c_timer or 5\n  return \"Осталось тактов: \" .. computing.c_timer\nend\n\ncomputing.missions.c1 = {title = \"уничтожить перегрузкой предохранитель. \"; longText = \"Угу, – буркнул дроид, даже не прокомментировав успех юноши. – Почти закончили. Теперь у тебя есть около пяти тактов, чтобы уничтожить предохранитель. Ну, не тяни.\"; complete = computing.missions.c1 and computing.missions.c1.complete or 0; startingDialogShowed = computing.missions.c1 and computing.missions.c1.startingDialogShowed or 0; progress = compProgressC1, progressText = compProgressC1Text, failText = \"– Да ну что же это, – возмутился дроид, но было уже поздно. – Всё, ты всё запорол...\"}\n\n--\n\n--функции задания с2\nfunction compProgressC2()\n  cellsToElements ()\n  local a = computing.elements.important.position\n\n  local d = computing.cells[a].charge\n  computing.c_timer = computing.c_timer or 4\n  computing.c_timer = computing.c_timer or 4\n  \n  computing.c_timer = computing.c_timer - 1\n  \n\n  if computing.c_timer == 0 then\n     if d == 0 then\n      computing.missions.c2.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c2\")\n    end\n  else\n     if d == 0 then\n      computing.missions.c2.complete = 1\n      compEnd()\n    else end\n  end\n\nend\n\nfunction compProgressC2Text()\n  computing.c_timer = computing.c_timer or 4\n  return \"Осталось тактов: \" .. computing.c_timer\nend\n\ncomputing.missions.c2 = {title = \"обесточить важную штуку за 3 хода. \"; longText = \"Угу, – буркнул дроид, даже не прокомментировав успех юноши. – Почти закончили. Теперь у тебя есть ровно три такта, чтобы полностью обесточить важную штуку. Ну, давай.\"; complete = computing.missions.c2 and computing.missions.c2.complete or 0; startingDialogShowed = computing.missions.c2 and computing.missions.c2.startingDialogShowed or 0; progress = compProgressC2, progressText = compProgressC2Text, failText = \"– Да ну что же это, – возмутился дроид, но было уже поздно. – Всё, ты всё запорол...\"}\n\n--\n\n--функции задания с3\n\n\nfunction compProgressC3()\n  local d = computing.elements.generator.destroyed\n  computing.c_timer = computing.c_timer or 5\n  \n  computing.c_timer = computing.c_timer - 1\n\n  if computing.c_timer == 0 then\n     if d == 1 then\n      computing.missions.c3.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c3\")\n    end\n  else \n     if d == 1 and computing.elements.important.charge >0 then\n      computing.missions.c3.complete = 1\n      compEnd()\n    else\n    end\n  end\n\nend\n\nfunction compProgressC3Text()\n  computing.c_timer = computing.c_timer or 5\n  return \"Осталось тактов: \" .. computing.c_timer\nend\n\ncomputing.missions.c3 = {title = \"уничтожить перегрузкой генератор. \"; longText = \"Угу, – буркнул дроид, даже не прокомментировав успех юноши. – Почти закончили. Теперь у тебя есть около четырёх тактов, чтобы уничтожить генератор. Ну, не тяни.\"; complete = computing.missions.c3 and computing.missions.c3.complete or 0; startingDialogShowed = computing.missions.c3 and computing.missions.c3.startingDialogShowed or 0; progress = compProgressC3, progressText = compProgressC3Text, failText = \"– Да ну что же это, – возмутился дроид, но было уже поздно. – Всё, ты всё запорол...\"}\n--\n\n--конец головоломки\nfunction compEnd()\nlocal t = [=[– Фу-у-ух, – протянул TL-3 так долго, что Орнас успел испугаться, не сломался ли переводчик. – С аппаратной частью проскочили, ты молодец, парень!]=]\ndialog ({header = \"\", text = t, answers =\n       {{text = \"Дальше\",\n         pressListener = function()\ncomputing = {result = \"done\"}\n        showPage {id = 649}\n         hideDialog()\n         \n         end}}\n      })\nend\n\n-- функция отображения текста заданий\n\ncomputing.currentMission = computing.currentMission or \"t1\"\n\nfunction compMissionText()\nlocal a = computing.currentMission\nlocal text = \"\"\nif a ~= \"taskEnd\" then\n  text =  \"Задание: \" .. computing.missions[a].title .. computing.missions[a].progressText()\n  else\n  end\n  return text\nend\n\nfunction compMissionDialog()\n  local a = computing.currentMission\n  local t = computing.missions[a].longText\n  local p = g.current_id\nif a ~= \"taskEnd\" then\n  if p == 640 then\n    dialog ({header = \"\", text = t, answers =\n       {{text = \"Приступить\",\n         pressListener = function()\ncomputing.missions[a].startingDialogShowed = 1\n         --message (\"cm: \" .. a .. \" showed: \" .. computing.missions[a].startingDialogShowed)\n         hideDialog()\n         end}}\n      })\n  else end\nelse\ncompEnd()\nend\nCompEnotherHelpVar = 0\nend\n\n--Функция сборки всего в сценарий\nfunction compTask()\n  if not computing.currentMission or computing.currentMission == 0 then\n    computing.currentMission = \"t1\"\n  else end\n\n  local cm = computing.currentMission\n\n  if cm == \"taskEnd\" then\n     compEnd()\n  elseif computing.missions[cm].startingDialogShowed == 0 then\n    compCondition(cm)\n    compMissionDialog()\n  end\n\n  computing.missions[cm].progress()\nend\n \nend",
        "text": "Функции заданий "
      },
      {
        "comment": false,
        "id": 648,
        "text": "Выбор миссии",
        "lua_do": "function lua_do()\ndialog({header = \"\", text = \"Выбор миссии\", answers = \n  {\n     {text = \"t1\",\n      pressListener = function()\n        computing.currentMission = \"t1\"\n        showPage{id = g.current_id}\n        hideDialog()\n        end\n     }\n  }\n})\nend",
        "lua_if": "function lua_if()\nreturn g.current_id == 648\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 648\nend",
        "id": 648,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn compMissionText()\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 649,
    "text": "– Всё, теперь можешь отдохнуть, заслужил, – продолжил дроид. – Только не мешай, мне ещё нужно повозиться внутри.\n   Орнас с любопытством наблюдал, как плывут и меняются надписи на ближайшем экране. TL-3 явно знал, что детает, и юноша всё меньше верил, что он простой астромеханик.\n   Несколько раз экран тревожно мигал красным, и тогда дроид разражался непереводимой бранью. Потом он вообще выгнал джедая из конторки, и юноша покорно оставил TL-3. Прогуливаясь вокруг, Орнас украдкой посматривал на напряжённого спутника и всё меньше и меньше верил в успех их затеи.",
    "answers": [
      {
        "lua_do": "function lua_do()\nnewAchieve(\"computing\",1,1)\nreloadOn = nil\ng.blockSaves = 0\nend",
        "super_calculate": false,
        "id": 649,
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "merge": false
      },
      {
        "id": 632,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 4\nend",
        "lua_do": "function lua_do()\nlocal a = TL3.dialogParts > 3 and 1 or 0\nTL3usefull = TL3usefull <plus> a\nend"
      },
      {
        "id": 677,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 6\nend",
        "lua_do": "function lua_do()\n-- !!! пересчёт доверия дроида: через сапёра только при идеальном раскладе, через вентиляцию - с запасом\n\nline6.droid = line6.droid <plus> 2\nend"
      },
      {
        "id": 632,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7 and UpLine7.dessRun == 1\nend"
      },
      {
        "id": 724,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7 and UpLine7.dessRun ~= 1\nend"
      },
      {
        "id": 848,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 8\nend"
      },
      {
        "super_calculate": false,
        "id": 643,
        "calculate": true,
        "lua_do": "function lua_do()\ncompMapGen = nil\ncomputingIni = nil\nelementsToCells = nil\ncellsToElements = nil\ndeleteNumber = nil\ngetNeighTab = nil\ncompNeighbor = nil\nchargeReplace = nil\nchargeTransfer = nil\ndestroyDialog = nil\ncellsCheck = nil\ngenerate = nil\nburnEnergy = nil\ngradientFlow = nil\npreservDialog = nil\npreservation = nil\nexitActpreservation  = nil\nrandomPump = nil\nimportantActivate = nil\ncompTimer = nil\nimortantDischarged = nil\ncompMes = nil\ncompCondition = nil\ncompTaskChange = nil\ncompProgressT1 = nil\ncompProgressT1Text = nil\ncompProgressT2 = nil\ncompProgressT2Text = nil\ncompProgressT3 = nil\ncompProgressT3Text = nil\ncompProgressT4 = nil\ncompProgressT4Text = nil\ncompProgressT5 = nil\ncompProgressT5Text = nil\ncompProgressA1 = nil\ncompProgressA1Text = nil\ncompProgressA2 = nil\ncompProgressA2Text = nil\ncompProgressA3 = nil\ncompProgressA3Text = nil\ncompTaskFail = nil\ncompProgressB1 = nil\ncompProgressB1Text = nil\ncompProgressB2 = nil\ncompProgressB2Text = nil\ncompProgressB3 = nil\ncompProgressB3Text = nil\ncompProgressC1 = nil\ncompProgressC1Text = nil\ncompProgressC2 = nil\ncompProgressC2Text = nil\ncompProgressC3 = nil\ncompProgressC3Text = nil\nendTurn  = nil\ndemonstrate  = nil\ncompLuaDo1 = nil\ncompLuaDo2 = nil\ncompLuaIf1 = nil\ncompLuaIf2 = nil\ncompLuaText = nil\ncancelChargeTransfer = nil\ncancelText = nil\ncompGradiendTurn  = nil\nend",
        "text": "Убить функции для компутинга"
      }
    ]
  },
  {
    "id": 650,
    "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом.\n– Не будем сейчас тратить на это время, – посоветовал учитель.\n– Всё равно сканеры не выявили управляющих элементов с этой стороны, – подтвердил опасения джедая TL-3.\n   Справа от двери коридор заканчивался тупиком, но даже поверхностный взгляд позволил юноше найти кое-что необычное – небольшую вмятину на панели и более тёмные швы на её стыках. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.",
    "answers": [
      {
        "id": 651,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 651,
    "text": "– Кажется, вариантов здесь немного, – подытожил магистр Льерсо. – С чего начнём?\n– Мои сканеры показывают, что проход за фальшивой панелью короче, – заметил TL-3. – Наиболее эффективно воспользоваться им.\n   Юноша тем временем осторожно потянул панель со вмятиной, и та без сопротивления отошла, открывая взору спутников шахту вентиляции. Он с усилием вытащил решётку и приставил её к стене рядом, оставив проём полностью открытым. Кому и зачем потребовалось так неумело его прятать?\n– Слишком подозрительно, – сформулировал опасения джедая учитель.\n– Инженерные сети – моя специализация, – вновь подал голос дроид. – Я могу исследовать ход.\n– Орнасу важно осмотреть всё самому, – с нажимом на последнее слово возразил наставник. – Это его испытание.\n– Глупо не довериться в этом вопросе специалисту, – буркнул TL-3.",
    "answers": [
      {
        "id": 652,
        "text": "Согласиться с наставником",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = (line6.teacher or 0 )<plus> 2\nline6.droid = (line6.droid or 0) - 1\nend"
      },
      {
        "id": 653,
        "text": "Согласиться с TL-3",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = (line6.teacher or 0 ) - 1\nline6.droid = (line6.droid or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 652,
    "text": "– Прости, – повернулся к дроиду Орнас, – но для меня правда очень важно сделать всё самому.\n   Под одобрительным взглядом наставника джедай стойко выдержал брюзжание раздосадованного такой категоричностью TL-3, и когда всё утихло, вновь задумался, что делать дальше. Учитель наверняка оценит вдумчивое и планомерное исследование всего этажа, а не только самого быстрого пути. Хотя уже уставший от скитаний по храму Орнас полностью разделял стремление астромеха сделать всё поскорее.",
    "answers": [
      {
        "id": 666,
        "text": "Разведать вентиляцию самостоятельно",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "id": 667,
        "text": "Исследовать коридор ",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.roadBackAvail= 1\nline6.disableHelp = 1\nline6.teacher = line6.teacher <plus> 1\nend"
      }
    ]
  },
  {
    "id": 653,
    "text": "– Разве не должен джедай проявлять находчивость? – осмелился возразить Орнас. – Ведь TL-3 идеально подходит для этой задачи.\n– Найти неочевидное применение имеющимуся инструменту – это находчивость. Найти кого-то, кто выполнит задание вместо тебя – нет.\n   Юноша на мгновение задумался, стоит ли перечить наставнику в этом вопросе. Были ли у него свои невысказанные причины не доверять разведку TL-3, или это и впрямь лишь очередной воспитательный момент?\n   Сам дроид нервно ёрзал перед зияющей темнотой шахты и не осмеливался высказаться.",
    "answers": [
      {
        "id": 654,
        "text": "– Дроид и есть инструмент."
      },
      {
        "id": 655,
        "text": "Согласиться с наставником",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nend"
      },
      {
        "super_calculate": false,
        "id": 653,
        "calculate": true,
        "lua_do": "function lua_do()\n--штраф учителя\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 654,
    "text": "– Дроид и есть инструмент, – спокойно продолжил Орнас. – Я нашёл его здесь, как ключ от очередной запертой двери.\n   TL-3 перестал ерзать и теперь неподвижно глядел на юношу одним из датчиков, как будто хотел что-то высказать, но не мог подобрать подходящих слов.\n– Ладно, если ты правда считаешь это приемлемым... – неожиданно уступил магистр Льерсо. – В конца концов, меня самого здесь тоже быть не должно.\n   Воцарилось напряжённое молчание.\n– Тогда я отправлюсь исследовать вентиляцию, – наконец протрещал астромех и скрылся в тёмном проёме.\n– Не стоит недооценивать дроидов, Орнас, – вкрадчиво сказал учитель и похлопал подопечного по плечу...",
    "answers": [
      {
        "id": 656,
        "text": "Дальше",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = (line6.teacher or 0 ) - 1\nline6.droid = (line6.droid or 0) - 3\nend"
      }
    ]
  },
  {
    "id": 655,
    "text": "– Вы правы, учитель, – понуро согласился Орнас. – Я разберусь со всем сам, так или иначе.\n– Правильный настрой, – подбодрил юношу наставник.\n   TL-3 нетерпеливо заёрзал по полу, но ничего не сказал. Юноша вновь задумался, что делать дальше. Учитель наверняка оценит вдумчивое и планомерное исследование всего этажа, а не только самого быстрого пути. Хотя уже уставший от скитаний по храму Орнас полностью разделял стремление астромеха сделать всё поскорее.",
    "answers": [
      {
        "id": 666,
        "text": "Исследовать вентиляцию самостоятельно",
        "lua_do": "function lua_do()\nline6 = line6 or {}\n\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "id": 667,
        "text": "Исследовать коридор",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nline6.droid = line6.droid - 1\nline6.roadBackAvail= 1\nline6.disableHelp = 1\nend"
      }
    ]
  },
  {
    "id": 656,
    "text": "   TL-3 вернулся довольно скоро, джедаи даже не успели толком обсудить, что следует делать дальше.\n– Там утечка неизвестного газа, – отрапортовал он. – Для вас не смертелен, но последствия могут быть неприятными. Думаю, я легко смогу устранить опасность.\n   Магистр Льерсо смотрел на Орнаса и молчал, ждал его следующего решения.\n   Юноша понимал, что не сыщет благосклонности учителя, если будет взваливать все сложности на чужие плечи, но дроид, кажется, так и рвался доказать свою полезность делом.",
    "answers": [
      {
        "id": 657,
        "text": "Согласиться с TL-3",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 2\nend"
      },
      {
        "id": 661,
        "text": "Разобраться самостоятельно ",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nline6.droid = line6.droid - 1\nend"
      }
    ]
  },
  {
    "id": 657,
    "text": "– Отличная идея, – после секундной заминки согласился Орнас. – Если ты и так уже во всём разобрался, то устранить утечку тебе будет проще, чем нам.\n– Очень разумный подход, – благодарно пискнул дроид. – Рад, что ты тоже так считаешь.\n   Он круто развернутся и вновь исчез в вентиляции.\n   Орнас всматривался в непроницаемое лицо учителя, но если тот и испытывал недовольство, то не считал нужным показывать это подопечному.\n   TL-3 громыхал чем-то из шахты всего несколько минут, а потом с громким лязгом вывалился обратно в коридор и сообщил джедаям, что путь безопасен.",
    "answers": [
      {
        "id": 658,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 658,
    "text": "   В вентиляции двигались молча. Орнас шёл первым и часто останавливался, прислушиваясь и озираясь в темноте. Источник возможной утечки он так и не заметил.\n– Интересно, чего хотел добиться тот, кто заслонил проход в шахту панелью? – неожиданно раздался сзади голос магистра Льерсо.\n– Обезопасить коридор от газа? – предположил Орнас.\n– Если он сам эту утечку и не подстроил, – буркнул издалека TL-3, – Чтобы заблокировать и спрятать самый простой путь.\n   После нескольких поворотов ход наконец закончился: стенки лаза расчертили лучи проникающего через решётку света. Возле выхода громоздилась массивная панель управления с множеством вентилей и механических переключателей, от которой во все стороны расползались трубки и провода.\n   Орнас осторожно подцепил решётку пальцами, с небольшим усилием сдвинул её в сторону, освобождая проход, и вылез наружу. Пока он осматривался в поисках возможных опасностей, его спутники выбрались следом.",
    "answers": [
      {
        "id": 660,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 659,
    "text": "– Вы правда можете заняться этим, учитель? – удивился Орнас. – Больше не считаете, что я обязан справиться со всем один?\n– Это будет быстрее, – уклончиво ответил наставник. – Мы и так потеряли много времени впустую.\n– Забавно теперь слышать это от вас, – буркнул TL-3.\n   Кажется, на этот раз дроид огорчился всерьёз. Весь обратный путь по коридору к тупику с вентиляцией они преодолели молча.\n   Магистр Льерсо остановился у самой стены и прикрыл глаза буквально на несколько мгновений. Затем он вытянул вперёд руку и почти незаметно провернул ей, словно сжимая в пальцах невидимый предмет.\n– Были некоторые проблемы. Так часто бывает с быстрыми путями, – обращаясь скорее к дроиду, чем к Орнасу объяснил джедай. – Но теперь можно идти.",
    "answers": [
      {
        "id": 688,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 660,
    "text": "   Они оказались в просторном зале, больше похожем на современную лабораторию, чем на комнату в древнем оккультном сооружении. На белые стены и блестящий идеально чистый пол было больно смотреть в ярком освещении мощных ламп. Орнас отошёл на несколько шагов от стены и заозирался по сторонам.\n   Визуально помещение было разбито на несколько зон. Вся ближайшая часть комнаты была заставлена стеллажами, на которых громоздились всевозможные ящики, контейнеры и сосуды.\n   В центре зала за небольшой конторкой суетился протокольный дроид неизвестной Орнасу модели. Казалось, он не обратил никакого внимания на столь неожиданный визит и просто продолжал ковыряться за приборной панелью.\n– Нужно добраться до того терминала, – неожиданно твёрдо заявил TL-3. – Всё остальное – мусор, не будем терять время.\n   Но магистр Льерсо, некоторое время сосредоточенно озиравшийся по сторонам, уверенным шагом направился в правую часть помещения.",
    "answers": [
      {
        "id": 612,
        "text": "Пройти за учителем",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nline6.droid = line6.droid - 1\nend"
      },
      {
        "id": 675,
        "text": "Пройти за TL-3",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 660,
        "text": "учитель: 1\nдроид: -2 ",
        "comment": true,
        "lua_text": "function lua_text()\nlocal t = \"Учитель: \" .. line6.teacher .. \"<s>\nДроид: \" .. line6.droid\nreturn t\nend"
      }
    ]
  },
  {
    "id": 661,
    "text": "– Спасибо, – обратился Орнас к дроиду, – но, кажется, я и правда слишком злоупотребил твоей помощью. И теперь хоть что-то должен сделать сам.\n– Это непоследовательно... – сухо отозвался TL-3, но всё-таки отъехал в сторону, освобождая джедаям дорогу.\n   Орнасу показалось, что уголки губ наставника едва заметно приподнялись, но уже в следующее мгновение его лицо вновь сделалось непроницаемым.\n   Теперь оставалось понять, как исправить ситуацию с газом самостоятельно.",
    "answers": [
      {
        "id": 661,
        "text": "мерж текста",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\n\nlocal text= \"\"\nlocal a = style == 2 and penalties.reaction == 1 and 0 or 1 --условие штрафа концентрации\ntext = a == 0 and \" Орнас не был уверен, что ему хватит концентрации, чтобы устранить утечку с помощью Силы.\" or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nreturn style == 2 and penalties.reaction == 0\nend",
        "id": 662,
        "text": "Устранить утечку с помощью Силы",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 2\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nreturn style == 2 and penalties.reaction == 1\nend",
        "id": 663,
        "text": "Устранить утечку с помощью Силы ",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "id": 664,
        "text": "Использовать гранату ",
        "lua_if": "function lua_if()\ngrenade = grenade or 0\nreturn grenade > 0\nend",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "id": 665,
        "text": "Полезть внутрь ",
        "lua_if": "function lua_if()\nreturn style ~= 4\nend",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nline6.droid = line6.droid <plus> 2\nend",
        "text": "Полезть внутрь ",
        "lua_if": "function lua_if()\nreturn style == 4\nend",
        "id": 690
      }
    ]
  },
  {
    "id": 662,
    "text": "   Джедай сел прямо на пол возле решётки и закрыл глаза. Требовалась предельная концентрация.\n   Он осторожно потянулся сознанием к Силе, постигая через неё пространство вокруг. Ощутил разорванную трубу. Медленно прочувствовал всю поверхность металла, над которой предстояло поработать. Затем аккуратно, миллиметр за миллиметром, начал закручивать трубку на несколько сантиметров выше места разрыва.\n   Полностью сосредоточившись на процессе, Орнас не мог сказать, сколько времени он в итоге провозился. Но результат несомненно стоил затраченных усилий – вытянутая трубка теперь вновь соединялась со своим продолжением, лишь лёгкая скрутка в месте бывшего разрыва напоминала о проведённой операции.\n– Великолепно, – похвалил учитель, когда юноша наконец открыл глаза и встал, разминая затёкшие мышцы. – Хоть и несколько нерационально.\n   Ответив короткое \"Увидишь\" на многословные расспросы TL-3 о произошедшем, джедаи направились внутрь.",
    "answers": [
      {
        "id": 658,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 663,
    "text": "   Джедай сел прямо на пол возле решётки и закрыл глаза. Он осторожно потянулся сознанием к Силе, с трудом постигая через неё пространство вокруг. Смутно ощутил разорванную трубу. Попытался прочувствовать всю поверхность металла, над которой предстояло поработать.\n   Орнас знал, что для такой филигранной работы требуется максимальная собранность, но никак не мог сосредоточиться – так невовремя напомнили о себе последствия его неудач в храме.\n   Напрасно потеряв несколько минут в безрезультатных попытках собраться, юноша был вынужден отказаться от своей затеи.\n– Кажется, ты не в форме, – заметил учитель. – Очень некстати...\n   Он прикрыл глаза, вытянул вперёд руку и почти незаметно провернул ей, словно сжимая в пальцах невидимый предмет.\n– Я отыскал нужный переключатель с помощью Силы, – обращаясь скорее к дроиду, чем к Орнасу объяснил джедай. – теперь можно идти.",
    "answers": [
      {
        "id": 658,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 664,
    "text": "   Орнас подошёл к темной шахте и заглянул внутрь. Если всё правильно рассчитать и забросить гранату за угол, то возможно...\n   Его руку, уже потянувшуюся к поясу за снарядом, остановил быстрым точным движением учитель.\n– Надеюсь, ты это не всерьёз, – холодно проговорил он, и юноша тут же отругал себя за рискованную затею.\n– А что, оригинально было бы, – заступился за Орнаса TL-3, но магистр Льерсо уже отстранил подопечного от прохода.\n   Он прикрыл глаза, вытянул вперёд руку и едва уловимо повернул её, будто сжимая что-то невидимое в пальцах.\n– Я отыскал нужный переключатель с помощью Силы, – обращаясь скорее к дроиду, чем к Орнасу проговорил джедай. – Не так оригинально, зато абсолютно безопасно.",
    "answers": [
      {
        "id": 658,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 665,
    "text": "   Еле уловимое движение воздуха заставило джедая остановиться сразу за поворотом. Тщательно изучив пространство перед собой, он заметил небольшое белое облачко.\n   Среди множества мелких металлических трубок, тянущихся вдоль всей стенки, одна была разорвана и из неё тонкой струйкой вырывался наружу какой-то газ. Белёсый туман, образующийся у самого места разрыва, затем рассеивался, и невидимый газ должно быть уже заполнил всю систему вентиляции. Что с этим вообще можно сделать?\n   Юноша несколько раз закашлялся, испуганно пирикидывая, сколько токсина уже попало в лёгкие. Он попытался оценить своё состояние, но не смог сосредоточиться. Единственное, что теперь оставалось – просто двигаться вперёд и скорее выбраться наружу.\n   После второго поворота ход внезапно закончился. У самой решётки располагалась панель с множеством переключателей. Не в силах искать и разбираться, джедай просто выключил всё, что можно было выключить. Он обернулся назад и крикнул спутникам что можно идти, после чего выбил решётку толчком Силы, поспешно вылез и заозирался по сторонам.\n– Весьма опрометчивый поступок, – укоризненно произнёс появившийся рядом учитель.\n– Зато последовательно, – попытался подбодрить юношу TL-3.",
    "answers": [
      {
        "id": 660,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 666,
    "text": "   Под цепким взором датчиков TL-3, скорее завистливо заинтересованного, чем серьёзно обиженного, Орнас, пригнувшись, забрался в тёмный лаз.\n  За первым же поворотом его поджидал неприятный сюрприз – плотное белое облачко клубилось у самого пола возле труб. Быстрый поток воздуха размывал края тумана, унося бесцветные пары по всей вентиляции. Источник утечки нашёлся сразу – одна из трубочек была разорвана, и через острые края стекал вниз тяжелый холодный газ.\n   Запоздало задержав дыхание, Орнас тут же вылетел обратно в коридор и поведал спутникам об увиденном. Он уже пожалел, что совсем недавно отказался от любой помощи: навыки механика TL-3 как нельзя лучше подходили для устранения подобных повреждений.",
    "answers": [
      {
        "id": 667,
        "text": "Исследовать коридор",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.droid = line6.droid - 1\nend"
      },
      {
        "id": 680,
        "text": "Исправить утечку самостоятельно",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nline6.droid = line6.droid <plus> 1\nend"
      }
    ]
  },
  {
    "id": 667,
    "text": "– Этот путь слишком подозрителен, – наконец решил Орнас. – Нужно найти другой.\n– Возможно, кто-то смог бы с большей пользой разведать этот участок, – язвительно отозвался дроид. – Вместо того, чтобы шарахаться от любого потенциального препятствия.\n– Орнас прав: нужно исследовать всё, а не лезть наобум в первую же найденную дыру.\n   Джедаи двинулись по коридору, TL-3 спустя несколько секунд припустил следом.\n– При нормальной работе команды не приходится тратить столько времени и сил на нецелевые исследования, – продолжил он, догнав шедшего впереди юношу.\n   Орнас, тщательно рассматривавший каждый блик света и каждую тень на пути, не стал отвлекаться. Зато неожиданно ответил магистр Льерсо:\n– Любая деталь, которую ты не рассмотрел сам, положившись на кого-то другого, это риск. Чем больше узлов в цепи, тем вернее она ошибётся. Хвала Силе, джедаев обучают достаточно, чтобы они могли в одиночку справиться с почти любой сложностью, так или иначе.",
    "answers": [
      {
        "id": 683,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 668,
    "text": "   Орнас шёл дальше, решив не встревать в разгорающийся спор. В конце концов, сейчас от этого едва ли что-то зависит.\n   Он совсем отвлёкся от поиска опасностей на пути, вслушиваясь в язвительные тирады астромеха и резкие выпады учителя, поэтому не заметил, как все остановились у прохода перед бесшумно отворившейся дверью.",
    "answers": [
      {
        "id": 670,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 669,
    "text": "– Хотел бы я знать, что такое слаженная работа в большой команде, – произнёс Орнас, улучив паузу в чужом споре. – Меня даже на групповые тренировки юнлингов не брали после того как...\n– Да, на то были причины, – отрезал учитель. – И я рад, что ты смог обратить это себе на пользу. Поверь, некоторые вещи лучше не пробовать вовсе, чтобы не поддаваться искушению зависеть от них всегда.\n– Что за вздор? – вновь взорвался TL-3. – чему вы учите детей, мастер Льерсо?\n– Только Орнаса. Тому, что пойдёт на пользу лично ему. Хвала Силе, ему достаёт благоразумия довериться в этом моему опыту.",
    "answers": [
      {
        "id": 672,
        "text": "Согласиться с учителем",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nornasStat = ornasStat or {}\nornasStat.darkside = (ornasStat.darkside or 0) <plus> 1\nline6.teacher = line6.teacher <plus> 2\nline6.droid = line6.droid - 2\nend"
      },
      {
        "id": 673,
        "text": "Возразить учителю ",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 3\nline6.droid = line6.droid <plus> 1\nend"
      }
    ]
  },
  {
    "id": 670,
    "text": "– Какой умник разместил гравитационный генератор в такой каморке! – возмутился TL-3, как только проснулся в проём вслед за юношей. – Он же обрушит здесь всё после активации.\n– Действительно... – хмыкнул магистр Льерсо. – Давайте проверим.\n   Если бы Орнас не знал, он бы и не заметил неуловимого движения руки наставника. Активировал какой-то механизм Силой?\n   В то же мгновение часть пола вздыбилась и устремилась вверх, навстречу ей опускалась точно такая же часть потолка. Каменные блоки врезались с оглушительным грохотом, вокруг образовавшейся шестиугольной колонны поднялось в воздух облако пыли и раскрошенной породы. Но движение на этом не прекращалось, и Орнас с ужасом понял, что падает весь потолок.\n   К облегчению спутников, опустившись на полтора метра, он вновь застыл примерно на высоте человеческого роста. Теперь юноша заметил, что рядом с только что возникшей колонной уже была ещё одна такая же.",
    "answers": [
      {
        "id": 684,
        "text": "Дальше"
      },
      {
        "id": 670,
        "text": "    ",
        "comment": true
      }
    ]
  },
  {
    "id": 671,
    "text": "– Давайте вернёмся к вентиляции, – решил Орнас. – Возможно там всё окажется... Понятнее...\n   TL-3 первым покатился назад по коридору, на ходу рассуждая о преимуществах дроидов перед людьми в вопросах обслуживания инженерных систем. За ним бодро шагал юноша, учитель угрюмо следовал сзади.\n– Мы уже поняли, что тебе позарез нужно попасть в эту вентиляцию, – наконец не выдержал мастер Льерсо, когда они наконец добрались до цели. – На месте мальчика, я бы скорее доверил это дело мне. Он хотя бы знает меня дольше нескольких часов.\n   Орнас чувствовал, что грозящий разгореться спор стоит пресечь без промедлений. Лучше сразу обозначить свою позицию, чем ждать, пока спутники переругаются из-за такой мелочи.",
    "answers": [
      {
        "id": 686,
        "text": "Доверить TL-3",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 2\nend"
      },
      {
        "id": 659,
        "text": "Доверить учителю",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 3\nline6.droid = line6.droid - 2\nend"
      },
      {
        "id": 687,
        "text": "Разобраться самостоятельно",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nline6.droid = line6.droid <plus> 1\nend"
      }
    ]
  },
  {
    "id": 672,
    "text": "   Орнасу хватало благоразумия ещё и на то, чтобы не вступать в бессмысленные споры с наставником. \n– Я ценю ваши наставления, учитель, – поспешно согласился он. – Не раз убеждался, что благодаря им я во многом более подготовлен чем те, кто привык во всём полагаться на остальных.\n– И сейчас не полагаешься ни на кого сам? – съязвил TL-3.\n– А ты верил в свою команду? И где оказался?\n– Здесь, с вами...\n   TL-3 неразборчиво пробубнил что-то ещё, но продолжать острую тему не стал. Видимо, окончательно разуверился в благородстве и здравомыслии джедаев.\n   Магистр Льерсо тоже не выглядел довольным: фальшивая улыбка не могла скрыть напряжение и усталость. Похоже, тлеющие где-то в глубине сомнения не развеялись от формального согласия падавана. Неловко похлопав Орнаса по плечу, он ускорил шаг и первым достиг двери в конце коридора.",
    "answers": [
      {
        "id": 670,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 673,
    "text": "– Достаёт, – устало согласился Орнас. – А всё равно интересно: какого это – быть частью чего-то большего. И в храме, и тем более раньше я был изгоем. Не чувствовал поддержки, не видел в людях того света, о котором читал в Кодексе...\n– Мы уже говорили об этом в тот день, когда я согласился обучать тебя, – проскрипел зубами наставник. – Меньше эмоций, падаван.\n– А вы в юности тоже были социопатом, мастер-джедай? – встрял TL-3. – Или пытаетесь уберечь мальчика от того, в чём знаете толк?\n– Довольно, – отрезал Магистр Льерсо. – Мы пришли.\n   Они и в самом деле добрались до конца коридора. Учитель остановился первым, пропуская юношу к бесшумно отворившейся двери.",
    "answers": [
      {
        "id": 670,
        "text": "Дальше"
      },
      {
        "id": 673,
        "text": "Согласиться с TL-3\nбыть в команде топ\nВсю молодость ходит изгоем\nникакой поддержки\nдаже учитель по большей части игнорит\nучитель недоволен: подогрел чувство вины",
        "lua_if": "function lua_if()\nreturn false\nend",
        "comment": true
      }
    ]
  },
  {
    "id": 674,
    "text": "– Утверждение: это исключено, – проскрипел НК-63. – Активирую протокол самоуничтожения...\n   Магистр Льерсо, видимо ожидавший такого развития событий, успел несколькими быстрым движениями клинка превратить дроида в кучу металлолома, и взрыва не последовало.\n– Постарайся больше его не терять, – устало сказал учитель Орнасу и выцепил из груды обломков рукоять его светового меча.\n   Юноша виновато опустил глаза, принимая возвращённое оружие, и закрепил его на поясе.\n– Ужасный, возмутительный, вероломный... – затараторил откуда-то TL-3. – ... заманил, обездвижил, оглушил...\n   После того, как дроида нашли, извлекли из какой-то необычной ловушки, привели в порядок и в очередной раз выслушали его причитания, TL-3 наконец угомонился.",
    "answers": [
      {
        "id": 681,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 675,
    "text": "   С любопытством взглянув на удаляющегося в архивные залежи наставника, юноша поспешил догнать TL-3. К тому навстречу уже вышел из-за своей конторки протокольный дроид, но его слов юноша не слышал.\n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс механическим голосом серебристый дроид-секретарь, обращаясь теперь к самому Орнасу.\n– Берегись! – успел предупредить TL-3. – Серия НК – замаскированные под протокольных дроидов убийцы.\n– Огорчение: Ты испортил всю интригу! Глупый маленький пенёк, вздумал помогать этим мешкам с мясом?\n   В механических руках буквально из ниоткуда появились два бластера и в ту же секунду обрушили шквальный огонь в направлении юноши. TL-3 поспешил к ближайшему укрытию, благо НК-63 не посчитал его приоритетной целью.\n– Оставайся там, – крикнул джедай, защищаясь.\n   Ловкости и мастерству дроида-убийцы можно было только позавидовать: он мгновенно разорвал дистанцию и вёл прицельную стрельбу, оставаясь на безопасном расстоянии.",
    "answers": [
      {
        "id": 676,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 676,
    "text": "   Магистр Льерсо возник столь же внезапно, как и оружие в руках НК-63. Бой был неравным: джедай без труда сблизился с противником и в считанные секунды отсёк тому сначала одну, а затем и вторую руку.\n– Нужно поговорить, – почти учтиво обратился он к дроиду.\n– Утверждение: это исключено, – проскрипел НК-63. – Активирую протокол самоуничтожения...\n   Магистр Льерсо, видимо ожидавший такого развития событий, успел несколькими быстрым движениями клинка превратить дроида в кучу металлолома, и взрыва не последовало.\n– Ну и неприятный же тип, – затараторил TL-3, выезжая из-за какого-то ящика. – Чуть не зашиб...\n",
    "answers": [
      {
        "id": 681,
        "text": "Дальше"
      },
      {
        "id": 676,
        "text": "– Готов поспорить, ты его сам спровоцировал, – усмехнулся Орнас.",
        "need": -675,
        "merge": true
      }
    ]
  },
  {
    "id": 677,
    "text": "   Неожиданно всё освещение в зале погасло. Только один экран продолжал упрямо гореть в наступившем мраке, едва подсвечивая замершую перед ним маленько угловатую фигурку дроида. Впрочем, уже через несколько секунд освещение вновь включилось.\n– Готово, – пискнул TL-3. – Самая хитроумная штука, с которой я сталкивался: если паттерн действий оператора отличается от привычной модели, система его блокирует. ",
    "answers": [
      {
        "id": 632,
        "text": "   ",
        "lua_text": "function lua_text()\n\nlocal a = line6.droid > 7 and 1 or 0\nlocal text = a == 1 and [=[Не думаю, что прежний пользователь использовал терминал как справочный архив, так что скорее всего у нас будет ответ только на один запрос.\n– Всего на один? – разочарованно протянул юноша. – Но что вообще там есть?\n– Пока не спросим – не узнаем. – ответил дроид и помолчал немного.  – Я бы очень хотел узнать всё о судьбе Феникса, но, полагаю, у вас двоих есть более важная миссия...\n   Джедай поверить не мог: TL-3 решил доверить это право им, вместо того, чтобы воспользоваться моментом для личной выгоды. Пока Орнас размышлял, что бы хотел узнать он сам, над ухом раздался голос учителя:\n– Синтер Че'юр. Вся доступная информация.]=]\n\nor \n\n[=[Оказывается, прежний пользователь не использовал терминал как справочный архив, так что у нас будет ответ только на один запрос...\n– Всего на один? – разочарованно протянул юноша.\n– ... И я его уже сделал.\n   Джедай поверить не мог, что TL-3 решил воспользоваться моментом для получения личной выгоды, даже не посоветовавшись с юношей. Оставалось только прочитать на тёмном экране то, что хотел узнать дроид.]=]\nreturn text\nend",
        "merge": true
      },
      {
        "lua_text": "function lua_text()\n--local a = TL3usefull > 2 and 1 or 0\nreturn \n--a == 1 and \"... о Фениксе и команде Чёрного Пламени\" or \n\"Дальше\"\nend",
        "lua_do": "function lua_do()\nterminalData = 1\nend",
        "text": "Дальше",
        "id": 635,
        "lua_if": "function lua_if()\nreturn line6.droid < 8 \nend"
      },
      {
        "id": 678,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn line6.droid > 7\n-- о ситхе\nend",
        "lua_do": "function lua_do()\nterminalData = 1\nend"
      }
    ]
  },
  {
    "id": 678,
    "text": "– Вывожу, – отозвался астромех, и на ближайшем мониторе действительно отобразилась нужная информация.\n– Целое досье, – хмыкнул магистр Льерсо.\n   Строки безумно замельтешили перед глазами Орнаса, и он едва успевал вырывать из них обрывки фраз. Че'юр, адепт ордена Синтер, талантливый и трудолюбивый, настоящий фанатик. Рядом с именем странная отметка: \"Уровень соответствия: высокий\". План \"Искры знания\" – успешно. План \"Семена бессмертия\" – успешно. План \"Паутина\" – успешно.\n   Чем больше информации впитывал учитель, тем мрачнее он становился.\n   Неожиданно весь свет в зале вновь пропал, изображение на экранах моргнуло несколько раз и тоже потухло.\n– Кто-то нас отключил, – пискнул TL-3.\n– Ты смог записать что-нибудь? – без особой надежды уточнил магистр Льерсо.\n   Но дроид только растерянно крякнул.",
    "answers": [
      {
        "id": 689,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 679,
    "text": "– Ты не додумался спросить ни о чём более важном? – раздражённо спросил магистр Льерсо. – Мог бы уточнить, у нас как раз есть вопрос, от которого зависит будущее вселенной на ближайшие сотни лет...\n   Он быстрым шагом направился к винтовой лестнице в дальней части помещения. Орнас и TL-3 молча последовали за ним.\n   Юношу пугала необычная несдержанность учителя. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Джедай сочувственно посмотрел на замявшегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и шагнул следом, догоняя ушедшего вперёд наставника.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 6\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = 1 UpLineConflictsDess_TL = -1\nknowPhenix = 1\nend"
      }
    ]
  },
  {
    "id": 680,
    "text": "– Я хочу сам разобраться с этим, – ответил он на невысказанный вопрос и вновь замер, отвернувшись от тёмного проёма.\n   Орнасу показалось, что уголки губ наставника едва заметно приподнялись, но уже в следующее мгновение его лицо вновь сделалось непроницаемым.\n– По крайней мере это последовательно, – одобрительно пискнул TL-3.\n   Если дроид и был недоволен тем, что его оставили без дела, то не считал нужным это демонстрировать.\n   Теперь Орнасу оставалось решить, как исправить ситуацию с газом самостоятельно.",
    "answers": [
      {
        "id": 661,
        "text": "мерж текста",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\n\nlocal text= \"\"\nlocal a = style == 2 and penalties.reaction == 1 and 0 or 1 --условие штрафа концентрации\ntext = a == 0 and \" Он не был уверен, что ему хватит концентрации, чтобы устранить утечку с помощью Силы.\" or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nreturn style == 2 and penalties.reaction == 0\nend",
        "id": 662,
        "text": "Устранить утечку с помощью Силы",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 2\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nreturn style == 2 and penalties.reaction == 1\nend",
        "id": 663,
        "text": "Устранить утечку с помощью Силы",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "id": 664,
        "text": "Использовать гранату",
        "lua_if": "function lua_if()\ngrenade = grenade or 0\nreturn grenade > 0\nend",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "id": 682,
        "text": "Полезть внутрь",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 2\npenalties.reaction = 1\npenalties.stamina = 1\nend"
      }
    ]
  },
  {
    "id": 681,
    "text": "– Ладно, пойдём. Осталось самое важное, – позвал TL-3, решительно направляясь в центр зала.\n   Учитель демонстративно сел прямо на пол и погрузился в медитацию. Орнас с неохотой направился за астромехом.\n– Ради этого тебе и стоило расстараться, уговаривая меня помочь, – тараторил дроид, объезжая многочисленные пульты и панели. – Над надёжной защитой тут поработали на совесть, ни один стандартный дешифратор не осилит.\n– А ты осилишь?\n– Скорее всего, – не очень уверенно ответил астромех после секундной заминки.\n– Сможешь подключиться к этой штуке? – с сомнением переспросил Орнас, разглядывая незнакомые приборы.\n– Подключиться – дело нехитрое. А вот получить доступ...\n   TL-3 умолк и засуетился внутри, подключаясь специальным манипулятором к разным разъёмам во всех терминалах по очереди.\n– Да, вот здесь, – заявил он наконец, остановившись перед маленьким невзрачным блоком с небольшим экраном. – Иди сюда, без тебя ничего не выйдет.\n   Орнас вновь бросил взгляд на ушедшего в себя наставника и встал на указанное место.",
    "answers": [
      {
        "id": 644,
        "text": "Дальше",
        "lua_do": "function lua_do()\ncomputing = nil\n--g.blockSaves = 1\nend"
      }
    ]
  },
  {
    "id": 682,
    "text": "    Орнас осторожно приблизился к тому месту, где через разорванную трубку тонкой струйкой вырывался наружу неизвестный газ. Белёсый туман, образующийся у самого места разрыва, затем рассеивался, и невидимый газ должно быть уже заполнил всю систему вентиляции. Что с этим вообще можно сделать?\n   Юноша около минуты разглядывал повреждение. Несколько раз закашлялся, испуганно пирикидывая, сколько токсина уже попало в лёгкие. Попытался оценить своё состояние, но не смог сосредоточиться. Единственное, что теперь оставалось – просто двигаться вперёд и скорее выбраться наружу, надеясь, что удастся найти что-нибудь там.\n   После второго поворота ход внезапно закончился. У самой решётки располагалась панель с множеством переключателей. Не в силах искать и разбираться, джедай просто выключил всё, что можно было выключить. Он обернулся назад и крикнул спутникам что можно идти, после чего выбил решётку толчком Силы, поспешно вылез и заозирался по сторонам.\n– Весьма опрометчивый поступок, – укоризненно произнёс появившийся рядом учитель.\n– Зато последовательно, – попытался подбодрить юношу TL-3. – Снова.",
    "answers": [
      {
        "id": 660,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 683,
    "text": "   \"В одиночку... Так или иначе\". В этих словах Орнас чувствовал тот стержень, который во многом теперь определял его самого. Было ли это его собственной чертой или лишь отпечатком ожиданий учителя?\n   Иногда юноша мечтал о том, как добившись крупного успеха, он сможет наконец обрести признание в Ордене. Недоверчивые взгляды ровесников сменятся приветливымм улыбками, нарочитая холодность старших – искренней доброжелательностью. И даже учитель тогда тепло, по-отечески улыбнётся, с гордостью рассказывая о нём другим.\n   Увлекшись своими мыслями, Орнас не заметил, как случайная фраза разгорелась в жаркий спор. Так же непоколебимо, как магистр Льерсо верил в пользу самостоятельности, TL-3 отстаивал принципы слаженной командной работы. Было что-то забавное в том, как вспыхивают и остывают лишённый эмоций дроид и подчинённый строгой внутренней дисциплине джедай. Казалось, до юноши никому не было дела.",
    "answers": [
      {
        "id": 668,
        "text": "Молча идти дальше",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 1\nend"
      },
      {
        "id": 669,
        "text": "Высказать сожаление, что не смог стать более открытым",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.droid = line6.droid <plus> 1\nline6.teacher = line6.teacher - 1\nend"
      }
    ]
  },
  {
    "id": 684,
    "text": "– Нажимной датчик, – пояснил учитель, когда умолк шум и улеглась пыль.\n– Не пойдём туда, – вдруг запротестовал дроид.\n   Джедаи удивлённо посмотрели на него.\n– Разве твои сканеры не могут обнаружить такие ловушки? – озвучил повисший в воздухе вопрос юноша.\n– Не внутри этого зала, слишком фонит...\n– Не волнуйся, мы с Орнасом справимся, нашего чутья хватит.\n– Не нужно туда идти, – упрямо повторил TL-3. – Давайте лучше вернёмся к той шахте вентиляции.\n   Юноша ещё раз перевёл взгляд с дроида на неровный пол в опасном зале и обратно. Мастер Льерсо нетерпеливо переступил с ноги на ногу.",
    "answers": [
      {
        "id": 670,
        "text": "Описание входа в зал к сапёру\nдроид против\nЕсли не исследовали вентиляцию, то можно вернуться к ней",
        "comment": true,
        "lua_if": "function lua_if()\nreturn false\nend"
      },
      {
        "id": 685,
        "text": "Войти внутрь",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.droid = line6.droid - 1\nline6.teacher = line6.teacher <plus> 1\n\nend"
      },
      {
        "id": 671,
        "text": "Вернуться к шахте вентиляции",
        "lua_if": "function lua_if()\nline6 = line6 or {}\nline6.roadBackAvail = line6.roadBackAvail or 0\nreturn line6.roadBackAvail == 1\nend",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\nend"
      }
    ]
  },
  {
    "id": 685,
    "text": "– Пройдём здесь, – решил наконец Орнас.\n   Он постарался как можно быстрее подобраться ко входу, чтобы не смотреть на недовольного дроида. Учитель одобрительно похлопал юношу по плечу.\n   Орнас ещё не представлял, как обойти ловушки в зале: его чутьё не предупредило его о первой, так что и впредь надеяться на него не стоит. Но признаваться в этом учителю и TL-3 юноша не собирался. Он внимательно осмотрел ничем не примечательные стены странного зала, увидел ещё одну дверь напротив. Всё это никак не поможет обойти ловушки на полу...",
    "answers": [
      {
        "id": 521,
        "text": "Рассмотреть пол"
      }
    ]
  },
  {
    "id": 686,
    "text": "– Наверное будет лучше, если TL-3 займется этим, – после секундной заминки сказал Орнас. – Если ты и впрямь такой мастер, то исследовать шахту тебе будет проще, чем нам.\n– Очень разумный подход, – благодарно пискнул дроид. – Рад, что ты тоже так считаешь.\n   Он круто развернутся и исчез в вентиляции.\n   Орнас всматривался в непроницаемое лицо учителя, но если тот и испытывал недовольство, то не считал нужным показывать это подопечному.\n   TL-3 громыхал чем-то из шахты всего несколько минут, а потом с громким лязгом вывалился обратно в коридор и сообщил джедаям, что были некоторые сложности, но теперь путь безопасен.",
    "answers": [
      {
        "id": 688,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 687,
    "text": "   Под цепким взором датчиков TL-3, скорее завистливо заинтересованного, чем серьёзно обиженного, Орнас, пригнувшись, забрался в тёмный лаз.\n  За первым же поворотом его поджидал неприятный сюрприз – плотное белое облачко клубилось у самого пола возле труб. Быстрый поток воздуха размывал края тумана, унося бесцветные пары по всей вентиляции. Источник утечки нашёлся сразу – одна из трубочек была разорвана, и через острые края стекал вниз тяжелый холодный газ.\n   Запоздало задержав дыхание, Орнас тут же вылетел обратно в коридор и поведал спутникам об увиденном. Он уже пожалел, что совсем недавно отказался от любой помощи: навыки механика TL-3 как нельзя лучше подходили для устранения подобных повреждений.\n   Теперь юноше оставалось решить, как исправить ситуацию с газом самостоятельно.",
    "answers": [
      {
        "id": 661,
        "text": "мерж текста",
        "lua_text": "function lua_text()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\n\nlocal text= \"\"\nlocal a = style == 2 and penalties.reaction == 1 and 0 or 1 --условие штрафа концентрации\ntext = a == 0 and \" Он не был уверен, что ему хватит концентрации, чтобы устранить утечку с помощью Силы.\" or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nreturn style == 2 and penalties.reaction == 0\nend",
        "id": 662,
        "text": "Устранить утечку с помощью Силы",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher <plus> 2\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "lua_if": "function lua_if()\npenalties = penalties or {}\npenalties.reaction = penalties.reaction or 0\nreturn style == 2 and penalties.reaction == 1\nend",
        "id": 663,
        "text": "Устранить утечку с помощью Силы",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "id": 664,
        "text": "Использовать гранату",
        "lua_if": "function lua_if()\ngrenade = grenade or 0\nreturn grenade > 0\nend",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\nend"
      },
      {
        "id": 682,
        "text": "Полезть внутрь",
        "lua_do": "function lua_do()\nline6 = line6 or {}\nline6.teacher = line6.teacher - 1\nline6.droid = line6.droid <plus> 1\npenalties.reaction = 1\npenalties.stamina = 1\nend"
      }
    ]
  },
  {
    "id": 688,
    "text": "   В вентиляции двигались молча. Орнас шёл первым и часто останавливался, прислушиваясь и озираясь в темноте. Источник возможных проблем он так и не заметил.\n– Интересно, чего хотел добиться тот, кто заслонил проход в шахту панелью? – подал голос Орнас.\n   Но никто из спутников не отозвался. Кажется, все были слишком поглощены своими мыслями.\n   После нескольких поворотов ход наконец закончился: стенки лаза расчертили лучи проникающего через решётку света. Возле выхода громоздилась массивная панель управления с множеством вентилей и механических переключателей, от которой во все стороны расползались трубки и провода.\n   Орнас осторожно подцепил решётку пальцами, с небольшим усилием сдвинул её в сторону, освобождая проход, и вылез наружу. Пока он осматривался в поисках возможных опасностей, его спутники выбрались следом.",
    "answers": [
      {
        "id": 660,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 689,
    "text": "– Нужно идти, – раздражённо бросил магистр Льерсо, зажигая световой меч и освещая им путь. – Мы на пороге разгадки тайн, от которых зависит будущее галактики на сотни и тысячи лет...\n   Он быстрым шагом направился к винтовой лестнице в дальней части помещения. Орнас и TL-3 молча последовали за ним.\n   Юношу пугала необычная несдержанность учителя. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Джедай сочувственно посмотрел на замявшегося перед слишком высокой первой ступенью TL-3, помог на неё забраться и шагнул следом, догоняя ушедшего вперёд наставника.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 6\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = 2 UpLineConflictsDess_TL = -1\nmasterKnowSyntey = 1\nend"
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 689,
        "calculate": true,
        "text": "Выдать достижение \"на пороге разгадки\"",
        "lua_do": "function lua_do()\nnewAchieve(\"closeSolution\",1,1)\nend"
      }
    ]
  },
  {
    "id": 690,
    "text": "   Не то по привычке во всём разбираться до конца, не то по зову интуиции, Орнас задержал дыхание и подполз ближе к тому месту, где утекал неизвестный газ. Среди переплетений одинаковых на вид трубок юноша отыскал одну с ярко-оранжевой расцветкой – общепринятый в мирах Галактической Республики знак обозначения горючих веществ.\n   Идея, тут же пришедшая в голову джедая, казалось безумной, но при должной аккуратности имела неплохие шансы сработать.\n   Луч светового меча озарил тьму вокруг. Орнас направил оружие к трубе и едва коснулся нужного места на ней самым кончиком лезвия. Алая точка расплавленного металла быстро вздулась пузырём и лопнула, рассыпав сноп раскалённых брызг, и тут же из пробоины вырвалось пламя.\n   Расчёт юноши оправдался: огонь охватывал место пробоины, и неизвестный газ сгорал в нём, окрашивая языки пламени зелёным. Орнас отогнул лист обшивки и прикрыл им обе трубы.",
    "answers": [
      {
        "id": 691,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 691,
    "text": "   Орнас медленно двинулся дальше, но ничего подозрительного больше не заметил. После второго поворота ход внезапно закончился. У самой решётки располагалась панель с множеством переключателей, но ковыряться в них теперь не было необходимости.\n   Юноша обернулся назад и крикнул спутникам что можно идти, после чего осторожно подцепил закрывающую выход решётку, отодвинул её в сторону и осторожно вылез наружу.\n– Весьма оригинально, – затрещал появившийся рядом TL-3.\n– Главное – эффективно, – устало согласился учитель. – Хотя я бы сделал иначе.",
    "answers": [
      {
        "id": 660,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 692,
    "text": "– И ты не рассказала ему обо всем? – зло отозвался астромех. – Давай тогда я поведаю...\n– Умолкни, – зашипела Десвиар.\n– Во время переговоров... – начал TL-3, повернувшись к джедаю.\n– Вы обманули и отравили меня!\n   Орнас заметил, как рука девушки легла на рукоять светового меча.\n– Она напала на команду...\n– Мандолорец украл моё оружие! – уже не сдерживаясь выпалила Десс.\n– И убила всех...\n   На мгновение повисла тишина. Юноша попытался осторожно отвести ладонь спутницы от клинка, но она только резко сдёрнула его руку и замерла, прожигая TL-3 взглядом.\n– А потом выслеживала и убивала остальных, – словно наслаждаюсь произведённым эффектом продолжил дроид, – пока не свалилась от истощения. Только тогда мы смогли поместить её в капсулу и спасти.",
    "answers": [
      {
        "id": 693,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 693,
    "text": "   Орнасу хватило благоразумия не уточнять достоверность рассказа у девушки. Впрочем, та неожиданно быстро пришла в себя.\n– Лучше бы занялись дверью, – холодно бросила она.\n   TL-3, полностью удовлетворившись своей маленькой победой, перестал ёрзать и направился к юноше, которой и без напоминания искал способы разблокировать проход.\n   Небольшой пыльный экран на стене рядом замерцал, видимо, уловив движение, и с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, видимо, и должен открыть проход.\n– Других механизмов мои сканеры не обнаружили, – подтвердил невысказанную догадку юноши астромех.",
    "answers": [
      {
        "id": 510,
        "text": "Прикоснуться к рычагу"
      }
    ]
  },
  {
    "id": 694,
    "text": "   В наступившей тишине Орнас сразу почувствовал себя неуютно. И хотя все, кажется, понимали разумность такого предложения, взгляд Десс всё ещё сочился желчью, а дроид продолжал беспрестанно ёрзать и крутиться, будто дразнясь.\n– Потом разберётесь со своими обидами, – неувернно продолжил юноша, – а сейчас соберитесь для дела.\n– Уж мы разберёмся, – мечтательно протянула Десвиар. – А ты бы сначала с дверью разобрался.\n   TL-3 спешно отъехал подальше от хищной улыбки девушки за спину Орнаса. Небольшой пыльный экран на стене рядом замерцал, видимо, уловив движение, и с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, видимо, и должен открывать проход.\n– Других механизмов мои сканеры не обнаружили, – тут же подтвердил невысказанную догадку юноши дроид.",
    "answers": [
      {
        "id": 510,
        "text": "Прикоснуться к рычагу"
      }
    ]
  },
  {
    "id": 695,
    "text": "– Что, магистр Буши всё ещё возится с юнлингами? – неожиданно повеселела Десс. – Тоже запали в душу его фразочки, да?\n   Орнас и не задумывался, что машинально воспроизвёл одну из насмешек старого мастера, поэтому поначалу выглядел не менее растерянным, чем притихший TL-3, и лишь спустя несколько мгновений растерянно улыбнулся.\n– Ты правда ей доверяешь? – заметно огорчился дроид. – Как же ты будешь...\n– Ой, да ну вас обоих, – непринужденно отмахнулась Десвиар. – Нам ведь есть о чём подумать сейчас. Например, как открыть эту дурацкую дверь.\n– Я как раз этим занимаюсь.\n   Орнас демонстративно постучал костяшками пальцев по сомкнутым створкам. Небольшой пыльный экран на стене рядом замерцал, видимо, уловив движение, и с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, видимо, и должен открыть проход.\n– Других механизмов мои сканеры не обнаружили, – подтвердил невысказанную догадку юноши TL-3.",
    "answers": [
      {
        "id": 510,
        "text": "Прикоснуться к рычагу"
      }
    ]
  },
  {
    "id": 696,
    "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом.\n– Брось, – посоветовала Десс.\n– Всё равно сканеры не выявили управляющих элементов с этой стороны, – подтвердил опасения джедая TL-3.\n   Справа от двери коридор заканчивался тупиком, но даже поверхностный взгляд позволил юноше найти кое-что необычное – небольшую вмятину на панели и более тёмные швы на её стыках. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.",
    "answers": [
      {
        "id": 697,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 697,
    "text": "   За фальшивой панелью спутники обнаружили шахту вентиляции. Решётка, без усилий сдвинутая в сторону, открыла маленький тёмный лаз.\n– Тебе повезло, – дроид нарочно обращался только к Орнасу, – обслуживание инженерных коммуникаций – то, ради чего следовало взять меня с собой.\n– Тоже мне, повод для гордости, – фыркнула Десс.\n– Представь себе, кого-то приняли в команду из-за полезности, а не из-за оголённых частей тела.\n   Орнас тут же залился краской.\n– И ты думаешь, что можешь быть более полезным, чем рыцарь-джедай? – рассмеялась Десс.\n   Орнас на секунду задумался, кого из двоих спутников он бы осознанно выбрал, будь такая необходимость.",
    "answers": [
      {
        "id": 698,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\n\nUpLine7.dessRel = (UpLine7.dessRel or 3) - 1\n\nend"
      },
      {
        "id": 699,
        "text": "Поддержать Десвиар",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\n\nUpLine7.droidRel = (UpLine7.dessRel or 3) - 2\nend"
      },
      {
        "id": 700,
        "text": "Похвалить обоих",
        "lua_if": "function lua_if()\nreturn style == 5\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ]
      },
      {
        "id": 701,
        "text": "Не вмешиваться",
        "lua_do": "function lua_do()\nUpLine7.conflict  = (UpLine7.conflict or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 698,
    "text": "– Ну в чём-то он конечно прав, – примиряюще отозвался юноша. – По большей части ты умеешь то же, что и я, а астромеханик выполняет совсем другие задачи.\n   Десс вздёрнула нос, но промолчала, а взгляд её лишь чудом не прожигал стены. Дроид благодарно пискнул и отъехал подальше от девушки.\n– Давайте сначала осмотрим всё остальное, – попытался перевести опасную тему Орнас и первым двинулся вперёд по коридору.\n   Спутники после секундного промедления последовали за ним.",
    "answers": [
      {
        "id": 702,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 699,
    "text": "– Она права, – кивнул Орнас. – Навыки джедая – бесспорное преимущество, которое никто в здравом уме ни на что другое не променяет.\n   Десс победно оскалилась, а TL-3, пискнув что-то неопределённое, откатился в самый угол, подальше от спутников. \n– Давайте сначала осмотрим всё остальное, – попытался перевести опасную тему Орнас и первым двинулся вперёд по коридору. Остальные после секундного промедления последовали за ним.",
    "answers": [
      {
        "id": 702,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 700,
    "text": "– Здорово, что мы все в чём-то отличаемся и умеем много разного, – дипломатично заметил Орнас. – Из нас получится отличная команда, вот увидите!\n– Ага, как же, – хмыкнула Десвиар.\n   Дроид отъехал в сторону и, кажется, тоже не разделял оптимизма юноши. По крайней мере, теперь их раздражение было направлено на него самого, а не друг на друга. Значит ещё какое-то время удастся обойтись без пререканий и драк.\n– Давайте сначала осмотрим всё остальное, – попытался перевести опасную тему Орнас и первым двинулся вперёд по коридору. Спутники после секундного промедления последовали за ним.",
    "answers": [
      {
        "id": 702,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 701,
    "text": "– Да сколько можно?.. – устало пробормотал себе под нос джедай, закрывая лицо рукой.\n   Не дождавшись реакции юноши, Десвиар и TL-3 вернулись к обмену колкостями, и ситуация вновь накалилась.\n– Давайте сначала осмотрим всё остальное, – попытался наконец разрядить обстановку Орнас и первым двинулся вперёд по коридору.\n   Спутники после секундного промедления последовали за ним. Обгоняя юношу, дроид как будто нарочно больно наехал ему на ногу.",
    "answers": [
      {
        "id": 702,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 702,
    "text": "   После нескольких поворотов коридор вывел спутников к небольшой двери.\n   Возле элегантной арки стерильная белизна стен нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.\n– Чувствую, там ловушка, – проронила Десвиар, заглядывая через плечо Орнаса внутрь. – Отправим мастера-инженера проверить?\n– Чушь! – возмутился TL-3. – Это совсем другой случай. Если хотите прислушаться к моему опыту...\n– Не хотим, – оборвала его девушка. – Моего чутья достаточно.\n– Тебе её «чутьё» важнее моего опыта?! – вспыхнул дроид. – Кому из нас ты больше доверяешь?",
    "answers": [
      {
        "id": 703,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.dessRel = UpLine7.dessRel - 1\nend"
      },
      {
        "id": 704,
        "text": "Поддержать Десвиар",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.droidRel = UpLine7.droidRel - 1\nend"
      },
      {
        "id": 705,
        "text": "Уйти от ответа",
        "lua_if": "function lua_if()\nreturn style == 5\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ]
      },
      {
        "id": 706,
        "text": "Уйти от ответа",
        "lua_if": "function lua_if()\nreturn style ~= 5\nend",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\n\nUpLine7.conflict  = UpLine7.conflict <plus> 1\n\n\nend"
      }
    ]
  },
  {
    "id": 703,
    "text": "– Я доверяю твоему опыту, – примирительно заверил Орнас, чувствуя, что искрящийся презрением взгляд Десс вот-вот проделает пару дырок в его спине. – Так что ты хотел предложить?\n– Проверьте этот чёртов зал, перед тем как входить, – от чего-то сконфузился астромех. – А я туда не поеду.\n– Как бы мы жили без твоего бесценного опыта? – тут же съязвила Десвиар.\n– Хватит, – устало произнёс Орнас. – Давайте уже займёмся делом.",
    "answers": [
      {
        "id": 707,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 704,
    "text": "– Я доверяю её чутью, – после секундной заминки ответил Орнас, отвернувшись от ехидной улыбки Десс. – Думаю, нам и впрямь нужно проверить комнату, перед тем как входить.\n– Ну раз вы такие чуткие, то и проверяйте сами, – обиделся дроид и отъехал подальше от двери и джедаев. – А я туда не поеду.\n– Как же мы теперь справимся без твоего бесценного опыта? – тут же съязвила Десвиар.\n– Хватит, – устало произнёс Орнас. – Давайте уже займёмся делом.",
    "answers": [
      {
        "id": 707,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 705,
    "text": "– Наставник учил меня доверять только самому себе, – холодно отозвался Орнас. – Так что ты хотел предложить?\n– Проверьте этот чёртов зал, перед тем как входить, – от чего-то сконфузился астромех. – А я туда не поеду.\n– Как бы мы жили без твоего бесценного опыта? – тут же съязвила Десвиар.\n– Хватит, – устало произнёс Орнас. – Давайте уже займёмся делом.",
    "answers": [
      {
        "id": 707,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 706,
    "text": "– Вам обоим ещё не надоело грызться? – устало отозвался Орнас. – Возьмите себя в руки наконец.\n– Ох, какие мы чувствительные, – фыркнула Десс.\n   Дроид тоже неодобрительно отозвался о недальновидности и неразборчивости юноши, затем отъехал подальше от двери, заявив, что не собирается заезжать внутрь.\n– Давайте уже займёмся делом, – растерянно произнёс Орнас.",
    "answers": [
      {
        "id": 707,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 707,
    "text": "   Проверять возможные ловушки конечно же предстояло самому Орнасу. Он осторожно заглянул в тёмное помещение и замер. Ничего. Затем медленно наступил одной ногой внутрь и тут же стремительно убрал её. В то же мгновение часть пола вздыбилась и устремилась вверх, навстречу ей опускалась точно такая же часть потолка. Каменные блоки врезались с оглушительным грохотом и подняли в воздух облако пыли и раскрошенной породы. Но движение на этом не прекращалось, и Орнас с ужасом понял, что падает весь потолок.\n   К облегчению спутников, опустившись на полтора метра, он вновь застыл примерно на высоте человеческого роста. Теперь на месте плиты возникла шестиугольная колонна, рядом с ней уже была ещё одна такая же.",
    "answers": [
      {
        "id": 708,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 708,
    "text": "– Я туда точно не поеду, – подал голос дроид. – Нужно быть сумасшедшим, чтобы решиться на такое.\n– Разве твои сканеры не могут определять такие ловушки? – расстроился Орнас.\n– Нет, здесь слишком фонит...\n   Все помолчали. Даже Десвиар не торопилась язвить и препираться.\n– Ну что ж, кажется, у нас только два варианта, – озвучил очевидное юноша, – или идти через зал с кучей ловушек, или лезть в вентиляцию, про которую мы тоже ничего не знаем. Что скажете?\n– Я сразу предлагал вентиляцию, могли бы не терять время, – буркнул TL-3.\n– А я думаю, нужно идти через зал, – с нажимом сказала Десс, лишь бы не соглашаться с дроидом.\n   Выбирать вновь предстояло Орнасу.",
    "answers": [
      {
        "id": 709,
        "text": "Через зал",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.droidRel = UpLine7.droidRel - 1\nend"
      },
      {
        "id": 710,
        "text": "Через вентиляцию",
        "lua_do": "function lua_do()\nUpLine7 = UpLine7 or {}\nUpLine7.dessRel = UpLine7.dessRel - 1\nend"
      }
    ]
  },
  {
    "id": 709,
    "text": "– Не будем отступать перед трудностями, раз уж мы и так здесь, – решил Орнас. – Мы с Десс разберёмся с ловушками, чтобы ты проехал в безопасности.\n   Дроид не ответил. Наверное, просто не смог быстро придумать достойной отговорки.\n– Ты разберёшься, – поправила Десвиар. – Я же помню, насколько важно тебе всё сделать самому. Как я могу встать у тебя на пути?\n   С этим пришлось согласиться. Хоть чутьё юноши и не предупредило его заранее об опасности, он надеялся, что как-нибудь справится. На худой конец, всегда можно вернуться назад к вентиляции.",
    "answers": [
      {
        "id": 521,
        "text": "Осмотреть пол"
      }
    ]
  },
  {
    "id": 710,
    "text": "– Ладно, давайте вернёмся к вентиляции, – сдался Орнас, опасливо вглядываясь в полумрак зала. – На худой конец, сможем вернуться сюда, если там окажется хуже.\n   TL-3 победно пискнул, а Десвиар поджала губы.\n– Стоило вообще ходить туда-сюда? – буркнула она на обратном пути.\n   Когда спутники вернулись ко входу, дроид без промедления юркнул в тёмную дыру и скрылся.\n– Я ему не доверяю, – шепнула Десс спустя несколько минут напряжённого ожидания. – Давай мы...\n– Готово, можно идти! – донёсся писк дроида, и уже через мгновение показался он сам. – Там была утечка какого-то газа, но теперь всё в порядке.\n   Десс тяжело вздохнула. Орнас неловко похлопал её по и плечу и устремился за уже скрывшимся вновь астромехаником.",
    "answers": [
      {
        "id": 711,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine7.conflict < 2\nend"
      },
      {
        "id": 712,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine7.conflict > 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine7.conflict =  UpLine7.dessRel < 1 and 3 or UpLine7.conflict\nend",
        "text": "Новый ответ. введите текст",
        "id": 720,
        "calculate": true
      }
    ]
  },
  {
    "id": 711,
    "text": "   Юноша довольно быстро преодолел вентиляцию, не заметив ничего необычного. После нескольких поворотов ход внезапно закончился ещё одной решёткой. В тупике возле небольшой панели с множеством вентилей и переключателей терпеливо ждал астромеханик.\n   Орнас осторожно расшатал решётку, подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся. Следом с громким лязгом перевалился через невысокий порог дроид, затем грациозно выпорхнула Десс.\n   Какое-то время все молча озирались по сторонам.",
    "answers": [
      {
        "id": 713,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 712,
    "text": "   Юноша довольно быстро преодолел вентиляцию, не заметив ничего необычного. После нескольких поворотов ход внезапно закончился ещё одной решёткой. В тупике возле небольшой панели с множеством вентилей и переключателей терпеливо ждал астромеханик.\n   Орнас осторожно расшатал решётку, подцепил её пальцами и сдвинул в сторону, затем осторожно вылез сам и осмотрелся. Следом с громким лязгом перевалился через невысокий порог дроид.\n   Какое-то время все молча озирались по сторонам.\n– А где Десс? – вдруг забеспокоился Орнас.\n   Он вновь забрался в вентиляцию, вернулся ко входу аж до зала с колоннами.\n   Девушки нигде не было.",
    "answers": [
      {
        "id": 715,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 713,
    "text": "   Спутники находились в просторном зале, больше похожем на современную лабораторию, чем на комнату в древнем оккультном сооружении. На белые стены и блестящий идеально чистый пол было больно смотреть в ярком освещении мощных ламп. Орнас отошёл на несколько шагов от стены и заозирался по сторонам. \n   Визуально помещение было разбито на несколько зон. Вся ближайшая часть комнаты была заставлена стеллажами, на которых громоздились всевозможные ящики, контейнеры и сосуды. Юноша медленно двинулся вперёд, без особого интереса разглядывая непонятное содержимое некоторых прозрачных ёмкостей.\n   В центре зала за небольшой конторкой суетился протокольный дроид неизвестной Орнасу модели. Казалось, он не обратил никакого внимания на столь неожиданный визит и просто продолжал ковыряться за приборной панелью.",
    "answers": [
      {
        "id": 714,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine7.dessRun = UpLine7.dessRun or 0\nUpLine7.droidRun = UpLine7.droidRun or 0\nreturn UpLine7.dessRun ~= 1 and UpLine7.droidRun ~= 1\nend"
      },
      {
        "id": 716,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- Десс сбежала\nUpLine7.dessRun = UpLine7.dessRun or 0\nreturn UpLine7.dessRun == 1\nend"
      },
      {
        "id": 593,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- TL-3 сбежал\nUpLine7.droidRun = UpLine7.droidRun or 0\nreturn UpLine7.droidRun == 1\nend"
      },
      {
        "lua_do": "function lua_do()\nUpLine7.droidRun = 0 \nUpLine7.dessRun = 0\nend",
        "text": "Никто не сбегал ",
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 713
      }
    ]
  },
  {
    "id": 714,
    "text": "– Нужно добраться до того терминала, – неожиданно твёрдо заявил TL-3 и двинулся вперёд. – Всё остальное – мусор, не будем терять время.\n– Без меня, – отрезала Десвиар и без промедления направилась в левую часть помещения, туда, где блестящее стирильностью пространство было заставленно разным непонятным оборудованием.\n   Впрочем, вернулась она ещё до того, как юноша с астромехом приблизились к центру. Её непривычно опустошённые холодные глаза недоверчиво сверлили вышедшего им навстречу дроида-секретаря.\n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс механическим голосом он.\n   Дроид попытался приблизиться к Орнасу с неуклюже раскинутыми для объятий руками, но юноша отступил на шаг назад.\n– Удивление: Хозяин, вы не узнаёте меня? – продолжал секретарь, наступая. – Я НК-63, ваш протокольный дроид и верный слуга.",
    "answers": [
      {
        "id": 721,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 715,
    "text": "– Не нашёл, – ответил джедай на немой вопрос дроида по возвращении.\n– Сбежала, – констатировал тот.\n   Они помолчали. Орнас пытался понять, что сподвигло девушку на побег в такой момент. Кажется, их склоки с дроидом окончательно расшатали её и без того вспыльчивый характер, но на пустом месте в бега не подаются. А может она с самого начала замышляла что-то подобное?\n   TL-3, казалось, просто радовался, что неприятная спутница наконец исчезла. Возможно, даже чувствовал свою заслугу в этом.\n– Ладно, нужно двигаться дальше, – наконец решил Орнас. – Будем надеяться, что с Десс всё в порядке.\n– Будем надеяться, что мы её больше не увидим...",
    "answers": [
      {
        "id": 713,
        "text": "Дальше",
        "lua_do": "function lua_do()\nUpLine7.dessRun = 1\n\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem5\",-1,1)\nend",
        "text": "Выдать достижение",
        "id": 845,
        "calculate": true
      }
    ]
  },
  {
    "id": 716,
    "text": "– Нужно добраться до того терминала, – неожиданно твёрдо заявил TL-3 и двинулся вперёд. – Всё остальное – мусор, не будем терять время.\n   Пространство в дальней части зала было практически пустым: лишь винтовая лестница без перил и с прозрачными ступенями уходила вверх. Почти прямо перед ней нарушали педантичный порядок и стерильность помещения почерневшие обломки огромного механизма.\n   Орнас подошёл ближе и прищурился, изучая находку. До этого ему не приходилось видеть вживую штурмовых дроидов класса \"Палач\", но даже искорёженные останки заставляли тревожно потянуться пальцами к рукояти светового меча. Из разорванной пробоины в чёрном корпусе смертоносной машины торчали провода, нелепо яркие здесь, как полевые цветы, вплетённые в гриву опасного зверя.\n   Неожиданный звук заставил юношу резко обернуться, в только того и ждавшей ладони загорелся клинок меча.",
    "answers": [
      {
        "id": 526,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 717,
    "text": "   Спутники тщательно исследовали конторку дроида с множеством экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. Ехидные комментарии Десвиар не могли полностью скрыть общее разочарование результатами осмотра. Казалось, оба боялись признаться, что здесь им не справиться без помощи пропавшего TL-3.\n   Покинув бесполезное рабочее пространство, они, не переговариваясь, направились к одинокой винтовой лестнице в дальней от входа части помещения. Миновали остатки какого-то другого охранного дроида и в нерешительности замерли у первой ступени.\n– Ну что, – протянула девушка, – последний рывок?\n   Джедай кивнул. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока. Орнас украдкой взглянул на Десс и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 2\nTL3lost = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = 1\nend"
      }
    ]
  },
  {
    "id": 718,
    "text": "   Орнас через опасный зал вернулся в коридор, а затем до самого входа. Заглянул в шахту вентиляции и несколько раз громко позвал. Ответа не было.\n   Юноша вернулся к Десс и поведал о неудаче своих поисков. Казалось, пропажа её совсем не удивляла и тем более не огорчала. Девушка лишь загадочно улыбалась и односложно отвечала на все расспросы джедая. Орнас был уверен, что даже если она не виновата в случившемся, то их с TL-3 неразрешённый конфликт подтолкнул того к побегу.\n– Придётся продолжать без него, – подвёл печальный итог юноша.\n– Ну хоть под ногами теперь мешаться не будет... – почти беззвучно сказала Десвиар.",
    "answers": [
      {
        "id": 713,
        "text": "Дальше"
      },
      {
        "super_calculate": false,
        "id": 845,
        "calculate": true,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem4\",-1,1)\nend",
        "text": "Выдать достижение"
      }
    ]
  },
  {
    "id": 719,
    "text": "– Ну, по крайней мере теперь одной загадкой стало меньше, – подытожил Орнас.\n",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 7\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = 1\nknowPhenix = 1\nend"
      },
      {
        "id": 719,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal a = UpLine7.dessRun == 1 and \n[=[   Он старался не думать о том, как много при этом появилось новых. В его мыслях беспорядочно метались новые факты, расшатывая привычные представления в устоявшейся картине мира. Да вдобавок ко всему где-то пропала без всяких объяснений Десс.\n   Но если где-то и были разгадки всех тайн этого опасного места, то только там, наверху. И что бы не стояло на вершине этой загадочной пирамиды, оно оказалось намного больше, чем сам Орнас. В конце концов, он был всего лишь подростком, отчаянно пытавшимся доказать всем, что достоин называться взрослым.]=]\n\nor\n\n[=[   Он старался не думать о том, как много при этом появилось новых. В его мыслях беспорядочно метались новые факты, расшатывая привычные представления в устоявшейся картине мира. Да вдобавок ко всему неутихающее противоборство дроида и Десс, которое, был уверен Орнас, ещё сыграет свою злую роль.\n   Но если где-то и были разгадки всех тайн этого опасного места, то только там, наверху. И что бы не стояло на вершине этой загадочной пирамиды, оно оказалось намного больше, чем сам Орнас. В конце концов, он был всего лишь подростком, отчаянно пытавшимся доказать всем, что достоин называться взрослым.\n   Орнас чувствовал, что если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху за спиральной лестницей. И что плата за эти ответы может быть непомерно высокой. Он пропустил вперёд Десвиар, помог TL-3 забраться на слишком высокую первую ступень и шагнул следом.]=]\n\n\n\nreturn a\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 720,
    "text": "empty\nлиния 7, возврат из сапёра",
    "answers": [
      {
        "id": 711,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine7.conflict < 2\nend"
      },
      {
        "id": 712,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine7.conflict > 1\nend"
      },
      {
        "super_calculate": false,
        "id": 720,
        "calculate": true,
        "lua_do": "function lua_do()\nUpLine7.conflict =  UpLine7.dessRel < 1 and 3 or UpLine7.conflict\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 720,
        "text": "– Давайте вернёмся к вентиляции, – решил Орнас. – Надеюсь, там всё окажется понятнее...\n   TL-3 победно пискнул, а Десвиар ещё сильнее сжала губы.\n   Когда спутники вернулись ко входу, дроид без промедления юркнул в тёмную дыру и скрылся.\n– Я ему не доверяю, – шепнула Десс спустя несколько минут напряжённого ожидания. – Давай мы...\n– Готово, можно идти! – донёсся писк дроида, и уже через мгновение показался он сам. – Там была утечка какого-то газа, но теперь всё в порядке.\n   Десс тяжело вздохнула. Орнас неловко похлопал её по плечу и устремился за уже скрывшимся вновь астромехаником.",
        "lua_if": "function lua_if()\nsapperFail = sapperFail or 0\nreturn sapperFail == 0\nend",
        "merge": true
      },
      {
        "id": 720,
        "text": "– Ладно, давайте вернёмся к вентиляции, – сдался Орнас. – Других вариантов у нас больше нет.\n   TL-3 победно пискнул, а Десвиар ещё сильнее сжала губы.\n   Когда спутники вернулись ко входу, дроид без промедления юркнул в тёмную дыру и скрылся.\n– Я ему не доверяю, – шепнула Десс спустя несколько минут напряжённого ожидания. – Давай мы...\n– Готово, можно идти! – донёсся писк дроида, и уже через мгновение показался он сам. – Там была утечка какого-то газа, но теперь всё в порядке.\n   Десс тяжело вздохнула. Орнас неловко похлопал её по плечу и устремился за уже скрывшимся вновь астромехаником.",
        "lua_if": "function lua_if()\nsapperFail = sapperFail or 0\nreturn sapperFail == 1\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 721,
    "text": "– Я не понимаю... – только и смог выдавить Орнас. – Что происходит?\n   Юноша вновь повернулся к спутникам. Лицо Десс теперь было скорее выжидающим, чем растерянным. TL-3 замер, только пощёлкивали его датчики, направленные на надвигающегося секретаря. Тот моментально воспользовался возникшим замешательством и сгрёб в охапку джедая, который сразу же выскользнул из жёстких объятий и вновь отступил на несколько шагов.\n   Яркий зелёный луч прочертил пространство широкой дугой, и на пол с глухим стуком упали две отсечённые руки неожиданно обретённого верного слуги Орнаса. Следующим взмахом светового меча Десвиар снесла НК-63 голову, затем несколько раз полоснула по корпусу. Наконец, она в элегантном жесте подняла свободную руку, и мощный импульс Силы вырвал из оплавленных пробоин искрящиеся внутренности машины.\n   Поверженный дроид рухнул на пол прямо под ноги так и застывшего в изумлении юноши.",
    "answers": [
      {
        "id": 722,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 722,
    "text": "– Но зачем?.. – только и смог спросить Орнас, когда к нему вернулся дар речи.\n– Серия НК – замаскированные под протокольных дроидов убийцы, – наконец ожил TL-3. – Причём высокоэффективные. Уверен, он причинил бы немало хлопот если бы...\n– Я подумала, вдруг это тебе ещё пригодится? – усмехнулась Десс и подтолкнула в его сторону ногой одну из отрубленных конечностей дроида.\n   В металлической ладони был зажат световой меч. Юноша спешно потянулся к поясу, но, разумеется, ничего там не обнаружил. Он подобрал своё оружие и уже по-другому взглянул на спутницу, так и застывшую с самодовольной ухмылкой. Она не только смогла мгновенно раскрыть ловкого воришку, но и расправилась с ним грациозно и эффективно, не выполнив ни одного лишнего движения.\n– Спасибо, – выдавил из себя джедай наконец, когда рукоять меча заняла привычное место на поясе.\n– Теперь мы в расчёте, – беззлобно рассмеялась девушка и пояснила, увидев растерянный взгляд  Орнаса: – Ты вернул мне мой клинок, а я тебе – твой.",
    "answers": [
      {
        "id": 723,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 723,
    "text": "– Ладно, пойдём. Осталось самое важное, – позвал TL-3, решительно направляясь в центр зала.\n   Десс демонстративно уселась отдыхать прямо на пол. Орнас с неохотой направился за дроидом.\n– Ради этого тебе и стоило расстараться, уговаривая меня помочь, – тараторил астромех, объезжая многочисленные пульты и панели. – Над надёжной защитой тут поработали на совесть, ни один стандартный дешифратор не осилит.\n– А ты осилишь?\n– Скорее всего, – не очень уверенно ответил дроид после секундной заминки.\n– Сможешь подключиться к этой штуке? – с сомнением переспросил Орнас, разглядывая незнакомые приборы.\n– Подключиться – дело нехитрое. А вот получить доступ...\n   TL-3 умолк и засуетился внутри, подключаясь специальным манипулятором к разным разъёмам во всех терминалах по очереди.\n– Да, вот здесь, – заявил он наконец, остановившись перед маленьким невзрачным блоком с небольшим экраном. – Иди сюда, без тебя ничего не выйдет.\n   Орнас вновь бросил взгляд на ушедшего в себя наставника и встал на указанное место.",
    "answers": [
      {
        "id": 644,
        "text": "Дальше",
        "lua_do": "function lua_do()\ncomputing = nil\ng.blockSaves = 1\nend"
      }
    ]
  },
  {
    "id": 724,
    "text": "   Неожиданно всё освещение в зале погасло. Только один экран продолжал упрямо гореть в наступившем мраке, едва подсвечивая замершую перед ним маленько угловатую фигурку дроида. Впрочем, уже через несколько секунд освещение вновь включилось.\n– Готово, – пискнул TL-3. – Самая хитроумная штука, с которой я сталкивался: если паттерн действий оператора отличается от привычной модели, система его блокирует.\n– Я не понял ни слова, – вздохнул Орнас. – Что это значит?\n– ",
    "answers": [
      {
        "id": 632,
        "text": "   ",
        "lua_text": "function lua_text()\nUpLine7 = UpLine7 or {} \nUpLine7.dessRel = UpLine7.dessRun == 1 and 0 or UpLine7.dessRel\n\n\nlocal a = ( UpLine7.droidRel > 2 and UpLine7.dessRel < 3 and 1) or ( UpLine7.droidRel > 2 and UpLine7.dessRel > 2 and 2) or 3\nlocal text = a == 1 and [=[У нас будет ответ только на один запрос.\n– Всего на один? – разочарованно протянул юноша. – Но что вообще там есть?\n– Пока не спросим – не узнаем. – ответил дроид и помолчал немного.  – Я бы очень хотел узнать всё о судьбе Феникса, и если ты не против...\n   Джедай поверить не мог, что TL-3 зачем-то спросил его разрешения, хотя мог всё сделать сам, и никто не узнал бы.\n– Да, конечно... – пробормотал он в ответ и только тогда заметил, как помрачнела поджавшая губы Десс.]=]\n\nor a == 2 and [=[У нас будет ответ только на один запрос.\n– Всего на один? – разочарованно протянул юноша. – Но что вообще там есть?\n– Пока не спросим – не узнаем. – ответил дроид и помолчал немного.  – Я бы очень хотел узнать всё о судьбе Феникса, и если ты не против...\n   Джедай поверить не мог, что TL-3 зачем-то спросил его разрешения, хотя мог всё сделать сам, и никто не узнал бы.\n– М-м-можно мне?.. – вдруг спросила дрожащим голосом побелевшая Десс.\n   От её крутого нрава не осталось и следа: сейчас перед Орнасом стояла та же растерянная девушка, которую он спас целую вечность назад. Казалось, даже дроида проняло внезапное преображение, и он без лишних слов ждал, когда джедай сделает выбор.\n]=]\n\nor \n\n[=[У нас будет ответ только на один запрос...\n– Всего на один? – разочарованно протянул юноша.\n– ... И я его уже сделал.\n   Джедай поверить не мог, что TL-3 решил воспользоваться моментом для получения личной выгоды, даже не посоветовавшись с юношей. Оставалось только под скрежет зубов Десс прочитать то, что хотел узнать дроид.]=]\nreturn text\nend",
        "merge": true
      },
      {
        "id": 635,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--local a = TL3usefull > 2 and 1 or 0\nreturn \n--a == 1 and \"... о Фениксе и команде Чёрного Пламени\" or \n\"Дальше\"\nend",
        "lua_if": "function lua_if()\nreturn UpLine7.droidRel < 3 or (UpLine7.droidRel > 2 and UpLine7.dessRel <  3)\nend"
      },
      {
        "id": 725,
        "text": "Предоставить выбор TL-3",
        "lua_if": "function lua_if()\nreturn UpLine7.droidRel > 2 and UpLine7.dessRel > 2\nend"
      },
      {
        "id": 726,
        "text": "Предоставить выбор Десвиар",
        "lua_if": "function lua_if()\nreturn UpLine7.droidRel > 2 and UpLine7.dessRel > 2\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nterminalData = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 724,
        "calculate": true
      }
    ]
  },
  {
    "id": 725,
    "text": "– Спасибо, – коротко отозвался астромех, выводя информацию на экран возле юноши. Десс сжала губы, но промолчала и тоже погрузилась в чтение.\n   В подробном досье Феникса Джендри без всяких пометок читалась единственная мысль: капитан грузового судна Чёрное Пламя был опытным и полезным исполнителем. В длинном перечне заданий и результатов их выполнения не было ни единой неудачи. Наёмнику доставались самые важные и срочные дела, он не задавал вопросов и мог позволить держать в команде только лучших из лучших.\n   Падение Чёрного пламени в тексте было помечено как \"вынужденная коррекция\", нападение на команду девушки-джедая, ради спасения которой они и прибыли, – как \"непредвиденное осложнение\". Приказ бросить команду Феникс пытался оспорить, но перспектива погибнуть вместе с остальными сделала его более сговорчивым. Укрывшись на втором этаже здания, он в комфорте выжидал, пока силы оставят перебившую почти всех его людей девушку, и в итоге всё-таки смог нейтрализовать её и поместить в капсулу для гибернации.\n   Последним заданием мандалорца стало отбытие на Корусант, где ему предстояло с малых лет обучать ещё не родившегося ребёнка всему, что знает сам. На одноместной спасательной капсуле №3 Феникс покинул луну и больше никогда не выходил на связь.\n– Теперь ты знаешь всё, – произнёс Орнас замершему рядом TL-3. – Он просто выполнял приказ, чтобы выжить.",
    "answers": [
      {
        "id": 719,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine == 7 and UpLine7.dessRun ~= 1\nend"
      }
    ]
  },
  {
    "id": 726,
    "text": "– Спасибо, я этого не забуду...– еле слышно прошептала Десс, а затем повернулась к  дроиду. – Уулен Паф, вся доступная информация.\n   TL-3 быстро вывел на экран огромные массивы информации. Десс, не вчитываясь, промотала весь текст до самого конца, так что юноша почти ничего не увидел. Только описание той части, где Уулен – рыцарь-джедай и бывшая наставница Десвиар – одолела ту в сражении и отправилась на верхний уровень храма.\n– Приняла почётную миссию и отбыла на Корусант, – прочитал вслух TL-3. – Никогда больше не выходила на связь. Погибла почти десять стандартных годовых циклов назад.\n– Погибла... – только и смогла повторить Десс опустошённо. – Но ведь я чувствовала её в своих видениях...\n   В её глазах застыли слёзы, руки безвольно повисли вдоль тела. Что бы не чувствовала сейчас Десс, она чуть ли не впервые пыталась удержать это внутри. Орнас неловко приобнял её, и она нырнула лицом в его плечо.\n– Соболезную, – приглушённо пискнул дроид, наверное впервые обратившийся к девушке без издёвки.\n– Пойдём, больше мы здесь ничего не узнаем, – мягко потянул её Орнас через пару минут. – Самое сложное ещё впереди.",
    "answers": [
      {
        "id": 728,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 727,
    "text": "– Надеюсь, нам не пригодится эта информация, – заговорил астромеханик, когда они вдвоём с джедаем направлялись к винтовой лестнице в дальней части помещения. – А то от всего этого даже мне стало не по себе...\n   Юноша не ответил. В его мыслях беспорядочно метались новые факты, расшатывая привычные представления в устоявшейся картине мира. Где-то на заднем плане периодически всплывало беспокойство из-за исчезнувшей Десс: куда и зачем она сбежала? Стоило ли опасаться новой встречи с ней?\n   Но если где-то и были разгадки всех тайн этого опасного места, то только там, наверху. И что бы не стояло на вершине этой загадочной пирамиды, оно оказалось намного больше, чем сам Орнас. В конце концов, он был всего лишь подростком, отчаянно пытавшимся доказать всем, что достоин называться взрослым.\n   Орнас чувствовал, что если где-то и могут быть ответы на его многочисленные вопросы, то только там – наверху за спиральной лестницей. И что плата за эти ответы может быть непомерно высокой. Он помог TL-3 забраться на слишком высокую первую ступень и шагнул следом.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 4\nDessLost = 1\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = 1\nend"
      }
    ]
  },
  {
    "id": 728,
    "text": "   Они втроём направились к винтовой лестнице в дальней части помещения. Все молчали, каждый думал о своём. Казалось, что слишком личная трагедия Десс, невольно разделённая со спутниками, смыла с неё все маски и напускную бесшабашность. Орнас почти чувствовал, как вместе с ними исчезло и то недоброе напряжение, искрящее между ней и дроидом с самой их встречи.\n   В мыслях юноши беспорядочно метались новые факты, расшатывая привычные представления в устоявшейся картине мира. Но если где-то и были разгадки всех тайн этого опасного места, то только там, наверху. И что бы не стояло на вершине этой загадочной пирамиды, оно оказалось намного больше, чем сам Орнас. В конце концов, он был всего лишь подростком, отчаянно пытавшимся доказать всем, что достоин называться взрослым.\n   Они с Десвиар помогли TL-3 забраться на слишком высокую первую ступеньку винтовой лестницы и поднялись следом.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 7\nneutralized = 0\nUpLineConflictsLlerso_Dess = -1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = 2\nknowWoolen = 1\n\nend"
      }
    ]
  },
  {
    "id": 729,
    "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом. \n– Не будем сейчас тратить на это время, – посоветовал учитель.\n   Справа от двери коридор заканчивался тупиком, но даже поверхностный взгляд позволил юноше найти кое-что необычное – небольшую вмятину на панели и более тёмные швы на её стыках. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 493,
        "text": "Динамическое описание локации,  реакции компаньонов,\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"Десвиар тоже повозилась у сомкнутых створок, но так же безуспешно.\") or\n(UpLine == 3 and \"<s>\n– Не будем сейчас тратить на это время, – посоветовал учитель.\") or\n(UpLine == 4 and [=[ \n– Мои сканеры не выявили управляющих элементов с этой стороны, – подтвердил опасения юноши TL-3.]=]) or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"<s>\n– Не будем сейчас тратить на это время, – посоветовал учитель.<s>\n– Всё равно сканеры не выявили управляющих элементов с этой стороны, – подтвердил опасения джедая TL-3.\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 480,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\npanelDetected480 = panelDetected480 or 0\ntext = panelDetected480 == 0 and \"Справа от двери коридор заканчивался тупиком, но даже поверхностный взгляд позволил юноше найти кое-что необычное – небольшую вмятину на панели и более тёмные швы на её стыках. Казалось, что эта часть обшивки не закреплена, как остальные, а просто наспех приставлена в нужном месте.\" or \"Справа от двери коридор заканчивался тупиком. Возле приставленных к стене решётки и помятой панели обшивки зияла тёмная шахта вентиляции.\"\nreturn \"<s>\n   \" .. text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 493,
        "text": "Динамическое описание локации,  реакции компаньонов,\nпредложение разобраться с вентиляцией (по одной для каждого индивидуально и отдельно для обоих вместе, реакция Десс всегда одинакова), если состав группы позволяет\n\n",
        "lua_text": "function lua_text()\nTL3 = TL3 or {}\nTL3.visits = TL3.visits or 0\nlocal text = \"\"\ntext =\n(UpLine == 1 and \"\") or\n(UpLine == 2 and \"<s>\n– Что дальше, командир? – спросила девушка, вытянувшись по струнке.<s>\n   Орнас только пожал плечами и задумался.\") or\n(UpLine == 3 and \"<s>\n– Кажется, вариантов здесь немного, – заметил магистр Льерсо. – С чего начнём?\") or\n\n(UpLine == 4 and [=[ \n– Ты что-то говорил про своего бывшего хозяина? Разве он не погиб?\n– Всё может быть. В этом я и хочу разобраться.]=])\n\n or\n(UpLine == 5 and \"master and Dess text\") or\n(UpLine == 6 and \"<s>\n– Кажется, вариантов здесь немного, – заметил магистр Льерсо. – С чего начнём?\") or\n(UpLine == 7 and \"Dess a0nd TL-3 text\") or\n(UpLine == 8 and \"all together text\") or\n\"error!\"\nreturn text\nend\n",
        "merge": true
      },
      {
        "id": 730,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 730,
    "text": "   Пока Орнас возился с панелью, за которой оказалась зарешеченный вход в шахту вентиляции, учитель вновь завёл какую-то отвлечённую беседу с Десс. Юноша ещё никогда не видел своего наставника настолько расслабленным и несобранным во время заданий, как теперь. Похоже, компания старой подруги и влияние Тёмной Стороны медленно превращали грозного и ответственного магистра Ордена то ли в ностальгирующего старика, то ли в азартного подростка.\n   Орнас быстро разделался с решёткой, осторожно заглянул внутрь и медленно двинулся по темному лазу вперёд. Довольно скоро он заметил белёсый туман, расстекающийся вокруг из тоненькой повреждённой трубки. Джедай выругался про себя и пулей выскочил из шахты. Едва оказавшись снаружи, он начал глотать чистый воздух и пытался заметить признаки отравления неизвестным газом.\n   Учитель в это время увлечённо рассказывал Десвиар о каких-то общих знакомых и не обратил внимания на исчезновение и возвращение юноши.",
    "answers": [
      {
        "id": 731,
        "text": "Рассказать о проблеме",
        "lua_do": "function lua_do()\nUpLine5Respons = 1\nend"
      },
      {
        "id": 732,
        "text": "Молча пройти по коридору ",
        "lua_do": "function lua_do()\nUpLine5Respons = -1\nend"
      }
    ]
  },
  {
    "id": 731,
    "text": "   Орнас дождался, когда рассказ прервался заливистым смехом Десс, и сбивчиво рассказал о своём открытии. Магистр Льерсо долго непонимающе смотрел на падавана, словно пытаясь вспомнить, кто он и зачем влезает в приятную беседу. Потом встряхнул головой и ответил:\n– Весьма прискорбно, весьма... Что ж, нет смысла рисковать, давайте найдём другой путь.\n   Десвиар одарила юношу выражением наигранного удивления и нахмурилась. Затем все вместе побрели по коридору: Орнас впереди, медленно изучая каждую подозрительную царапину, учитель с девушкой позади, почти не обращая внимания ни на что вокруг.",
    "answers": [
      {
        "id": 733,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 732,
    "text": "   Решив не влезать в чужой разговор и не видя надёжных решений своей проблемы, Орнас медленно направился вперёд по коридору. Наставник и Десвиар в какой-то момент всё-таки заметили его движение и, не прерывая беседы, побрели следом. Поймав взгляд юноши, Десс буквально на мгновение показала ему язык, а затем как ни в чём не бывало вновь отвернулась к Магистру Льерсо.\n   Орнас шёл впереди, медленно изучая каждую подозрительную царапину, учитель с девушкой – немного поодаль, почти не обращая внимания ни на что вокруг.",
    "answers": [
      {
        "id": 733,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 733,
    "text": "   Краем уха юноша уловил знакомые названия. Он ещё сильнее замедлился и прислушался. Да, так и есть: магистр Льерсо рассказывал Десвиар о том случае на Утапау, когда Орнас из-за неосмотрительности и спешки попал в очень глупое положение.\n– ... И вот мы подбираемся к месту их тайной встречи... – Голос старого джедая вновь стал привычно сдержан и строг, даже не верилось, что несколько минут назад он производил совсем другие впечатления.\n   Уши Орнаса вспыхнули, едва в памяти вновь возникли образы тех унизительных событий. И ему стало вдвойне стыдно, когда он представил реакцию Десс. Кажется, после таких подробностей едва ли она станет смотреть на него так же, как раньше.\n   Наставник почти добрался до самого пикантного момента, но ещё есть время этого не допустить.",
    "answers": [
      {
        "id": 734,
        "text": "Вмешаться",
        "lua_do": "function lua_do()\nUpLine5Respons = UpLine5Respons - 1\nend"
      },
      {
        "id": 735,
        "text": "Не вмешиваться",
        "lua_do": "function lua_do()\nUpLine5Respons = UpLine5Respons <plus> 1\nend"
      }
    ]
  },
  {
    "id": 734,
    "text": "– Вы обещали не говорить об этом случае в Ордене, – насупился Орнас.\n   Магистр Льерсо смутился и сразу же перевёл тему. Теперь он начал рассказывать о собственных приключениях  в молодости. Его голос вновь стал расслабленным и беспечным. Десвиар нисколько не расстроилась, когда разговор вновь зашёл о знакомых ей временах и людях.\n   \"Пронесло\", – подумал юноша и пообещал себе внимательнее прислушиваться к тому, о чём щебечут у него за спиной.",
    "answers": [
      {
        "id": 736,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 735,
    "text": "   Сердце юноши отсчитало полдюжины ударов, пока наставник не достиг кульминации истории:\n– И вот он лежит парализованный, под верёвками видно только спину и голые ноги. А главный Хатт говорит: «Такие дерзкие мне нравятся, отведите её в мой гарем».\n   Они дружно расхохотались.\n– И ты лишил Хатта новой наложницы? – отсмеявшись, спросила Десс.\n– Ну, для этого и нужны наставники, – своим привычным полусерьёзным голосом ответил магистр Льерсо. – Знали бы вы, сколько пришлось возиться со мной.\n– А ты расскажи. Ну пожалуйста.\n– Ну... Ладно, дело было так...",
    "answers": [
      {
        "id": 736,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 736,
    "text": "   Спутники миновали несколько поворотов и оказались перед небольшой дверью.    Возле элегантной арки стерильная белизна стен нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.\n   Учитель как раз рассказывал Десвиар историю из своей молодости, которую Орнас уже мог бы рассказывать сам наизусть. Но к удивлению юноши магистр Льерсо изменил часть рассказа так, что стал выглядеть в ней ещё более находчивым и отважным.",
    "answers": [
      {
        "id": 737,
        "text": "Поправить учителя ",
        "lua_do": "function lua_do()\nUpLine5Respons = UpLine5Respons <plus> 1\nend"
      },
      {
        "id": 738,
        "text": "Не вмешиваться",
        "lua_do": "function lua_do()\nUpLine5Respons = UpLine5Respons - 1\nend"
      }
    ]
  },
  {
    "id": 737,
    "text": "– А мне вы эту историю по-другому рассказывали, – встрял юноша, улучив подходящий момент. – Там секрет шифра вам поведал перепуганный владелец корабля, а бандитов было в пару раз меньше.\n   Десвиар затрясло от хохота, а учитель густо покраснел, что-то неразборчиво промямлил и замолчал, вновь сделавшись нарочито серьёзным.",
    "answers": [
      {
        "id": 739,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 738,
    "text": "   Десвиар слушала о подвигах своего давнего знакомого без особого восхищения. Казалось, расскажи он, как в одиночку остановил орден ситхов с призраком Дарта Малака во главе – она бы и глазом не повела.\n   Отчего-то Орнас чувствовал себя ужасно неловко из-за странного поведения учителя. Слишком некомфортно видеть его настолько живым и весёлым. Наверное, таким он и был в те времена, когда обучение проблемного падавана ещё не легло на его плечи.",
    "answers": [
      {
        "id": 739,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 739,
    "text": "   Юноша замер перед проходом, почувствовав смутную опасность. Интуиция подсказывала ему: нельзя просто так заходить. Он осторожно наступил ногой внутрь и тут же отскочил назад в ужасе.\n   Часть пола за дверью вздыбилась и устремилась вверх, навстречу ей опускалась точно такая же часть потолка. Каменные блоки врезались с оглушительным грохотом, вокруг образовавшейся шестиугольной колонны поднялось в воздух облако пыли и раскрошенной породы. Но движение на этом не прекращалось, и Орнас с ужасом понял, что падает весь потолок.\n   К облегчению спутников, опустившись на полтора метра, он вновь застыл примерно на высоте человеческого роста. Теперь юноша заметил, что рядом с только что возникшей колонной уже была ещё одна такая же.",
    "answers": [
      {
        "id": 740,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 740,
    "text": "– Уф, умеешь ты привлечь внимание, – оживилась Десвиар, заглядывая через плечо Орнаса внутрь.\n   ",
    "answers": [
      {
        "id": 740,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext =UpLine5Respons > 0 and [=[Учитель наконец-то окончательно пришёл в себя. Словно стряхнув с лица невидимую паутину, он вновь сделался собранным, в его движения вернулась размеренность и точность.\n– Нужно проверить, – сдержанно кивнул он подопечному. – Будь осторожен.]=] or  [=[Учитель тоже засуетился. Непривычно резкими движениями он отодвинул юношу от прохода и заглянул в темноту зала сам.\n– Да, чувствую, – проговорил он, прикрыв глаза. – Гравитационные ловушки, нажимные датчики. Я разделаюсь с ними в два счёта.\n– Вы уверены?.. – удивился Орнас. – Может, мне стоит заняться этим?\n– Ерунда, я справлюсь куда быстрее.\n   Он широко улыбнулся и вошёл внутрь.]=] \nreturn text\nend",
        "merge": true
      },
      {
        "id": 521,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine5Respons > 0\nend"
      },
      {
        "id": 742,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine5Respons <1\nend"
      }
    ]
  },
  {
    "id": 741,
    "text": "   Они оказались в просторном зале, больше похожем на современную лабораторию, чем на комнату в древнем оккультном сооружении. На белые стены и блестящий идеально чистый пол было больно смотреть в ярком освещении мощных ламп. Орнас отошёл на несколько шагов от стены и заозирался по сторонам.\n   Визуально помещение было разбито на несколько зон. Вся ближайшая часть комнаты была заставлена стеллажами, на которых громоздились всевозможные ящики, контейнеры и сосуды.\n   В центре зала за небольшой конторкой суетился протокольный дроид неизвестной Орнасу модели. Казалось, он не обратил никакого внимания на столь неожиданный визит и просто продолжал ковыряться за приборной панелью.\n   Магистр Льерсо некоторое время сосредоточенно озирался, затем уверенным шагом направился в правую часть помещения. Орнас и Десвиар, переглянувшись, последовали за ним.",
    "answers": [
      {
        "id": 744,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 742,
    "text": "   Магистр Льерсо и вправду справился очень быстро. Юноша с лёгкой завистью наблюдал, как тот легко скользил с плитки на плитку, поворачивая туда-сюда, то и дело возвращаясь назад, пока не оказался на противоположной стороне зала.\n– Давайте быстрее! – окликнул учитель спутников и скрылся за дверью.\n   Десвиар легонько подтолкнула Орнаса в спину, и он сторожно шагнул внутрь. Ничего не произошло. Теперь оставалось вспомнить весь причудливый маршрут наставника и не ошибиться.\n   В какой-то момент джедай всё-таки запутался: он стоял в углу, беспомощно разглядывая два одинаковых на вид шестиугольника и никак не в силах вспомнить, в каком порядке на них наступал учитель. Окончательно смутившись, он адресовал умоляющий взгляд Десс.\n   Девушка весело рассмеялась. Она хитро подмигнула Орнасу и двинулись через зал почти напрямую, обойдя стороной лишь несколько плит на своём пути. Только теперь юноша понял, как глупо выглядел, шарахаясь по комнате без малейшего понимания происходящего.\n   Восстановив в памяти безопасный путь, Орнас без проблем преодолел оставшееся до двери расстояние и вышел.",
    "answers": [
      {
        "id": 741,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 743,
    "text": "– Весьма любопытно, дорогой НК, – серьёзно проговорил магистр Льерсо. – Отрадно знать, что верный слуга так тщательно подготовился к моему возвращению.\n– Утверждение... – начал говорить НК-63, но закончить не успел.\n   Внезапно из его руки пробился яркий зелёный луч. В следующую секунду световой меч прочертил в воздухе широкую дугу, и две отсечённые металлические руки с гулким звуком упали на пол.\n   Магистр Льерсо сделал ещё одно неуловимое движение кончиком пальца, и клинок, зависший в воздухе в нескольких шагах от хозяина, быстрым взмахом поразил ноги дроида. НК-63 рухнул на пол.\n   Учитель подошёл ближе, поймал меч и убрал его на пояс.",
    "answers": [
      {
        "id": 753,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 744,
    "text": "   Пространство справа от центра было равномерно заполнено архивными полками. Обычные голо-диски с данными, древние манускрипты в кожанных чехлах и даже ряды глиняных табличек, испещрённых затейливыми символами, покоились здесь и сулили многие часы кропотливых исследований.\n– Не могу поверить... – еле слышно прошептал магистр Льерсо. – Просто невероятно.\n   К удивлению Орнаса, направился старый джедай именно к табличкам. Должно быть, чувствовал в них что-то особенное. Что-то даже более важное, чем голокроны — изящное сплетение высоких технологий и филигранного владения Силой, хранящие мудрость и даже часть личности создавших их мастеров. Эти бесценные артефакты стояли здесь открыто и даже немного небрежно – не чета секретному архиву Храма джедаев.\n– Что это? – наконец осмелился подать голос юноша.",
    "answers": [
      {
        "id": 745,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- ответственный\nreturn UpLine5Respons > 0\nend"
      },
      {
        "id": 746,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- безответственный\nreturn UpLine5Respons < 1\nend"
      }
    ]
  },
  {
    "id": 745,
    "text": "   Учитель пристально посмотрел прямо в глаза Орнасу, словно оценивая, насколько тот заслужил знать ту или иную информацию. Затем перевёл взгляд на застывшую Десвиар. Она лишь пожала плечами.\n– Орнас... – наконец заговорил после затянувшейся паузы джедай. – Ты наверняка слышал много баек о том, что у твоего наставника есть какой-то мифический \"список\"?\n   Юноша кивнул. Тогда учитель показал металлический диск на своей ладони и вновь, как на звездолёте, активировал голографическую карту с множеством надписей и пометок.\n– Вот этот \"список\". Карта раньше принадлежала одному примечательному агенту ситхов, не стану описывать, как она попала в мои руки. В ней очень кстати отмечены все звёздные системы, в которых он побывал.\n– А что в нём было особенного? – перебил Орнас.\n– Это – самое важное. Он использовал приёмы, которые раньше считались забытыми или вообще выдуманными. Извращённые тёмной стороной животные, тончайшие манипуляции с разумом, высасывание самой Силы...",
    "answers": [
      {
        "id": 747,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterInconfident = 4\nend"
      }
    ]
  },
  {
    "id": 746,
    "text": "   Учитель хитро улыбнулся и подмигнул Десс.\n– Ты наверняка слышал много баек о том, что у твоего наставника есть какой-то мифический \"список\"?\n   Юноша кивнул. Тогда учитель показал металлический диск на своей ладони и вновь, как на звездолёте, активировал голографическую карту с множеством надписей и пометок.\n– Вот этот \"список\". Карта раньше принадлежала одному примечательному агенту ситхов, не стану описывать, как она попала в мои руки. В ней очень кстати отмечены все звёздные системы, в которых он побывал.\n– А что в нём было особенного? – перебил рассказ наставника Орнас.\n– Это – самое важное. Он использовал приёмы, которые раньше считались забытыми или вообще выдуманными. Извращённые тёмной стороной Силы животные, тончайшие манипуляции с разумом, высасывание самой Силы...",
    "answers": [
      {
        "id": 750,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterInconfident = 4\nend"
      }
    ]
  },
  {
    "id": 747,
    "text": "– Около двадцати лет назад, когда я был ненамного старше, чем ты сейчас, – продолжил после небольшой паузы учитель, – группа молодых джедаев поставила себе цель: найти источник, из которого ситх мог узнать эти опасные тайны. И уничтожить. Совет не поддержал идею организовать масштабные экспедиции и велел хранить всё в тайне, хотя и запрещать сами поиски не стал. С тех пор мы – посвящённые – исследовали тысячи звёздных систем во всех уголках галактики в поисках источника этого зла...\n– Вы были одним из этих джедаев?\n– Был... – И думал, что остался единственным в Ордене, – магистр Льерсо многозначительно взглянул на Десс. – Кто-то погиб, кто-то просто исчез, кто-то сменил сторону... «Древнее Слово Власти», «О Пользе и Форме», «Шёпот Бессмертия». Вокруг этих древних скрижалей уже сложилось столько легенд. Но ещё больше судеб, что сломала жажда ими обладать... Не стоит недооценивать того, кто собрал у себя такую завидную библиотеку. Даже если его уже нет в живых...\n   Наставник выключил карту, и металлический диск вновь исчез где-то в бесконечных складках его робы.",
    "answers": [
      {
        "id": 748,
        "text": "Дальше "
      }
    ]
  },
  {
    "id": 748,
    "text": "– Нужно доставить их на корабль и исследовать, – взволнованно сказала Десс, и её пальцы сжали плечо магистра Льерсо.\n– Нет, – отрезал он.\n   Старый джедай активировал световой меч и несколькими точными движениями обратил древние скрижали в пыль.\n– После стольких лет, ценой стольких жертв... А ты просто уничтожил их? – Десвиар была изумлена даже больше, чем Орнас, и не пыталась скрыть своё негодование.\n– Эти знания опасны.\n– Поэтому мы и искали их: чтобы остановить зло. Если не уверен в себе...\n– Особенно для нас с тобой...\n– Но...\n– Обсуждать больше нечего, – учитель вымученно улыбнулся и убрал оружие. – Мы сможем осмотреть остальное позже на корабле, сколь бы ни были заманчивы другие перспективы. А сейчас пора двигаться вперёд.",
    "answers": [
      {
        "id": 749,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndestroyedScrolls = 3\nend"
      }
    ]
  },
  {
    "id": 749,
    "text": "   Они проследовали в центр помещения. \n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – раздался механический голос.\n   Протокольный дроид вышел им навстречу и попытался приблизиться к магистру Льерсо с неуклюже раскинутыми для объятий руками. Тот отступил на шаг, подмигнув ошарашенному юноше.\n– Удивление: Хозяин, вы не узнаёте меня? – продолжал секретарь, наступая. – Я НК-63, ваш протокольный дроид и верный слуга. Должен предупредить, что этот человек рядом с Вами не тот, за кого себя выдаёт.\n   Дроид указывал на Десвиар. Джедаи переглянулись. И если Орнас разве что рот не открыл от удивления, то его наставник выглядел по-детски восхищённым. Воспользовавшись заминкой, дроид всё-таки настиг мастера Льерсо и даже на секунду сомкнул свои жёсткие объятия.\n– Утверждение: В моей базе данных есть неоспоримые доказательства двуличности этого коварного субъекта, – скрежетал дроид, пятясь назад.",
    "answers": [
      {
        "id": 743,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--ответственный\nreturn UpLine5Respons > 0\nend"
      },
      {
        "id": 752,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--безответственный\nreturn UpLine5Respons < 1\nend"
      }
    ]
  },
  {
    "id": 750,
    "text": "– Около двадцати лет назад, когда я был ненамного старше, чем ты сейчас, – продолжил после небольшой паузы учитель, – группа молодых джедаев поставила себе цель: найти источник, из которого ситх мог узнать эти опасные тайны. И уничтожить. Совет не поддержал идею организовать масштабные экспедиции и велел хранить всё в тайне, хотя и запрещать сами поиски не стал. С тех пор мы, посвящённые, исследовали тысячи звёздных систем во всех уголках галактики, в поисках источника этого зла...\n– Вы были одним из этих джедаев?\n– Был... И думал, что остался единственным в Ордене, – он многозначительно взглянул на Десс. – Кто-то погиб, кто-то просто исчез, кто-то сменил сторону... «Древнее Слово Власти», «О Пользе и Форме», «Шёпот Бессмертия». Вокруг этих древних скрижалей уже сложилось столько легенд. И именно я наконец-то нашёл их. Забавно...\n   Наставник выключил карту, и металлический диск вновь исчез где-то в бесконечных складках его робы.",
    "answers": [
      {
        "id": 751,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 751,
    "text": "– Нужно доставить их на корабль и исследовать, – взволнованно сказала Десс, и её пальцы сжали плечо магистра Льерсо.\n– Не уверен, – отозвался он.\n   Старый джедай активировал световой меч и застыл перед табличками в задумчивости.\n– После стольких лет, ценой стольких жертв... Чтобы просто уничтожить их и остаться без ответов? – Десвиар была изумлена даже больше, чем Орнас, и не пыталась скрыть своё негодование.\n– Но эти знания опасны...\n– Поэтому мы и искали их: чтобы остановить зло. Если не уверен в себе...\n– Пожалуй, себе я могу доверять, – учитель вымученно улыбнулся и убрал оружие.\n– Но мы сможем осмотреть всё это позже на корабле – продолжил он, – сколь бы ни были заманчивы другие перспективы. А сейчас пора двигаться вперёд.",
    "answers": [
      {
        "id": 749,
        "text": "Дальше",
        "lua_do": "function lua_do()\ndestroyedScrolls = 2\nend"
      }
    ]
  },
  {
    "id": 752,
    "text": "– Не может быть! – карикатурно удивился магистр Льерсо. – Расскажи-ка об этом подробнее.\n   Он подмигнул Орнасу и повернулся к Десс, намереваясь сказать что-то ещё. Но в этот момент в руке дроида из ниоткуда появился бластер, и серия оглушающих зарядов устремилась в спутников.\n   Юноша легко увернулся от выстрела в акробатическом прыжке и на лету активировал световой меч. Десс рывком ушла в сторону и тоже выхватила оружие. А вот мастер Льерсо не успел вовремя среагировать – его обмякшее тело мешком рухнуло на пол.\n   Оставшиеся джедаи уже в следующую секунду обрушились на дроида. В вихре ярких всполохов отсечённые металлические руки с гулким звуком упали на пол. Следущая атака поразила ноги, и НК-63 рухнул следом..\n– Утверждение... – начал говорить НК-63, но закончить не успел – Десвиар несколькими ударами превратила поврежденный корпус в груду искрящегося металлолома.",
    "answers": [
      {
        "id": 755,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 753,
    "text": "– Попался, воришка, – равнодушно отметил магистр Льерсо, переворачивая ногой дроида. – Неужели я заслужил такое отнош...\n   Он не успел закончить фразу. Откуда-то из корпуса НК-63 появился незаметный манипулятор и поразил джедая электрическим зарядом, так что того перекосило. Юноша отреагировал мгновенно: несколькими точными ударами мечом снёс противнику голову и раскроил на части то немногое, что от него к этому моменту оставалось.\n– Жаль, что мы теперь не сможем  опросить его, – печально произнёс учитель, отряхиваясь. – Хотя уверен, это был бы крайне неинформативный разговор.",
    "answers": [
      {
        "id": 756,
        "text": "Дальше",
        "lua_do": "function lua_do()\nUpLineConflictsLlerso_Dess = 2\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nend"
      }
    ]
  },
  {
    "id": 754,
    "text": "empty\nлиния 5 возврат после сапёра",
    "answers": [
      {
        "id": 754,
        "text": "   По коридору возвращались молча. Орнасу было неловко, что он провалился. Учитель, кажется, наконец отделался от необходимости болтать с Десс, а сама она как будто и не горела желанием лишний раз открывать рот.\n   Так они достигли площадки перед входом. Орнас замялся.\n– Там какой-то газ... – наконец выдавил он. – Я не уверен, что смогу быстро с ним разобраться.\n   Десс одарила юношу удивлённым взглядом. Магистр Льерсо тем временем прикрыл глаза и сосредоточился. Затем он вытянул вперёд руку и почти незаметно провернул ей, словно сжимая в пальцах невидимый предмет.\n– Были некоторые проблемы, – наконец проговорил учитель, обращаясь скорее к Десвиар, чем к Орнасу.– Но теперь можно идти.",
        "lua_if": "function lua_if()\nsapperFail = sapperFail or 0\nreturn sapperFail == 1\nend",
        "merge": true
      },
      {
        "id": 754,
        "text": "– Давайте всё-таки вернёмся, – решил Орнас. – Возможно, там всё окажется понятнее...\n   Спутники удивлённо уставились на него, и Орнас, чтобы больше ничего не объяснять, поскорее зашагал по коридору назад. Он слышал шаги за спиной, но все молчали. Учитель, кажется, наконец отделался от странной необходимости болтать с Десс, а сама она будто и не горела желанием лишний раз открывать рот.\n   Так они достигли площадки перед входом. Орнас замялся.\n– Там какой-то газ... – наконец выдавил он. – Я не уверен, что смогу быстро с ним разобраться.\n   Десс одарила юношу удивлённым взглядом. Магистр Льерсо тем временем прикрыл глаза и сосредоточился. Затем он вытянул вперёд руку и почти незаметно провернул ей, словно сжимая в пальцах невидимый предмет.\n– Были некоторые проблемы, – наконец проговорил учитель, обращаясь скорее к Десвиар, чем к Орнасу.– Но теперь можно идти.",
        "lua_if": "function lua_if()\nsapperFail = sapperFail or 0\nreturn sapperFail == 0\nend",
        "merge": true
      },
      {
        "id": 757,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 755,
    "text": "– Поверить не могу, что всё так случилось, – ошарашенно говорил Орнас, пока они с Десс осматривали и приводили в чувства парализованного учителя. – У него было столько времени...\n– А ещё он потерял это, – кивнула Десс на остатки дроида.\n   Там, в сжатых пальцах отсечённой механической конечности блестела элегантная рукоять светового меча. Орнас подхватил оружие наставника, покрутил в руках. Никогда прежде он не видел Магистра Льерсо настолько непохожим на самого себя.\n   Впрочем, тот довольно быстро оклемался. Окинул хмурым взглядом спутников и груду хлама, оставшуюся от дроида. Недовольно буркнул:\n– Я хотел допросить его...\n   В его словах больше не звучала насмешка, только раздражение и ещё что-то непонятное Орнасу.\n– Спасибо, – наконец выдавил пресную улыбку учитель, выхватывая свой меч. – Можем двигаться дальше.",
    "answers": [
      {
        "id": 756,
        "text": "Дальше",
        "lua_do": "function lua_do()\nUpLineConflictsLlerso_Dess = 1\nUpLineConflictsLlerso_TL = -1 UpLineConflictsDess_TL = -1\nmasterGrudge = 1\nend"
      }
    ]
  },
  {
    "id": 756,
    "text": "   Спутники тщательно обследовали конторку дроида с множеством экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. \n– С такой системой безопасности человеку не разобраться, – печально заключил учитель. – Придётся вызвать с корабля дроида с протоколом дешифрации, когда закончим со всем остальным.\n   Покинув бесполезное рабочее пространство, все, не переговариваясь, направились к одинокой винтовой лестнице в дальней от входа части помещения. Они миновали остатки какого-то другого охранного дроида и в нерешительности замерли у первой ступени.\n– Впереди самое сложное, нужно собраться, – сухо напутствовал магистр Льерсо, пропуская вперёд Орнаса и Десвиар.\n   Юноша кивнул. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока. Юноша вздохнул и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 5\nend"
      }
    ]
  },
  {
    "id": 757,
    "text": "   Спутники по очереди забрались в шахту и двинулись вперёд.\n   Орнас немного замедлился возле того места, где прежде видел утечку, но сейчас всё оказалась в порядке. Восхитившись мастерством наставника, он продолжил движение и вскоре без происшествий добрался до ещё одной решётки в конце лаза. Юноша ловко подцепил её пальцами и сдвинул в сторону, освобождая выход.\n   Учитель и Десвиар покинули вентиляцию вслед за Орнасом и заозирались. Юноша тоже огляделся.",
    "answers": [
      {
        "id": 741,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 758,
    "text": "– Вы же поможете мне? – обратился Орнас к наставнику.\n– Не думаю, что тебе правда нужна помощь. Но давай взглянем вместе.\n   Небольшой пыльный экран на стене возле сомкнутых створок замерцал, как только юноша и учитель подошли достаточно близко, а затем с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, как надеялся Орнас, должен открыть проход.\n   Джедай внимательно осмотрел и прощупал всю стену и саму дверь в поисках скрытых механизмов и ловушек, но в итоге ничего не нашёл. Дроид и Десвиар утихли буквально на несколько секунд, заинтересовавшись, но потом вновь обрушились друг на друга.",
    "answers": [
      {
        "id": 510,
        "text": "Просунуть руку к рычагу",
        "lua_if": "function lua_if()\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn not (dess.delayedPenalty == 1 and UpLine == 2)\nend",
        "lua_do": "function lua_do()\nbracer = bracer or 0\narmlets = bracer\nUpLineHelpDoor = 1\nend"
      }
    ]
  },
  {
    "id": 759,
    "text": "– Мне нужна твоя помощь, – Орнас бесцеремонно схватил девушку за руку и потащил к двери. – Без тебя никак.\n– Что? Я?\n– Учитель вряд ли оценит, если я попрошу его, – начал объяснять юноша, – а из вас двоих... Сама понимаешь...\n   Десс так обрадовалась этой дешёвой лести, что тут же забыла о дроиде и поддалась настойчивости Орнаса. Небольшой пыльный экран на стене возле сомкнутых створок замерцал, как только они приблизились, а затем с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, как надеялся джедай, должен открыть проход.\n   Юноша внимательно осмотрел и прощупал всю стену и саму дверь в поисках скрытых механизмов и ловушек, но в итоге ничего не нашёл. Десвиар тем временем ощупывала экран, а TL-3 с Магистром Льерсо о чём-то негромко переговаривались.",
    "answers": [
      {
        "id": 510,
        "text": "Просунуть руку к рычагу",
        "lua_if": "function lua_if()\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn not (dess.delayedPenalty == 1 and UpLine == 2)\nend",
        "lua_do": "function lua_do()\nbracer = bracer or 0\narmlets = bracer\nUpLineHelpDoor = 2\nend"
      }
    ]
  },
  {
    "id": 760,
    "text": "– Ты ведь разбираешься в механизмах, да? – спросил Орнас у TL-3. – Боюсь, без твоих навыков мне придётся непросто...\n   Дроид какое-то время медлил, видимо вычленяя слова юноши из создаваемого Десвиар шума, затем довольно загудел и коротко пискнул. Похоже он и сам был рад заняться чем-то полезным вместо бестолкового спора.\n   Небольшой пыльный экран на стене возле сомкнутых створок замерцал, как только они приблизились, а затем с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, как надеялся джедай, должен открыть проход.\n   Джедай внимательно осмотрел и прощупал всю стену и саму дверь в поисках скрытых механизмов и ловушек, но в итоге ничего не нашёл. TL-3 тем временем гудел сканерами, Десс с Магистром Льерсо о чём-то негромко переговаривались.\n– Похоже, управление осуществляется только с этой панели, – наконец объявил астромех.\n   Юноша тяжело вздохнул.",
    "answers": [
      {
        "id": 510,
        "text": "Просунуть руку к рычагу",
        "lua_if": "function lua_if()\ndess.delayedPenalty = dess.delayedPenalty or 0\n\nreturn not (dess.delayedPenalty == 1 and UpLine == 2)\nend",
        "lua_do": "function lua_do()\nbracer = bracer or 0\narmlets = bracer\nUpLineHelpDoor = 3\nend"
      }
    ]
  },
  {
    "id": 761,
    "text": "Переход к страницамПереход к страницамПереход к страницамПереход к страницамПереход к страницамПереход к страницамПереход к страницам",
    "answers": [
      {
        "id": 2,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 3,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 4,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 5,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 6,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 7,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 8,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 9,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 10,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 11,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 12,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 13,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 14,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 15,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 16,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 17,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 18,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 19,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 20,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 21,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 22,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 23,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 24,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 25,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 26,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 27,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 28,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 29,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 30,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 31,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 32,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 33,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 34,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 35,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 36,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 37,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 38,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 39,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 40,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 41,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 42,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 43,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 44,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 45,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 46,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 47,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 48,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 49,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 50,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 51,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 52,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 53,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 54,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 55,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 56,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 57,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 58,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 59,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 60,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 61,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 62,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 63,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 64,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 65,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 66,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 67,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 68,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 69,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 70,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 71,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 72,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 73,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 74,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 75,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 76,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 77,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 78,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 79,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 80,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 81,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 82,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 83,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 84,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 85,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 86,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 87,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 88,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 89,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 90,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 91,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 92,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 93,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 94,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 95,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 96,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 97,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 98,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 99,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 100,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 101,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 102,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 103,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 104,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 105,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 106,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 107,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 108,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 109,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 110,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 111,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 112,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 113,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 114,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 115,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 116,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 117,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 118,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 119,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 120,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 121,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 122,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 123,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 124,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 125,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 126,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 127,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 128,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 129,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 130,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 131,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 132,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 133,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 134,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 135,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 136,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 137,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 138,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 139,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 140,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 141,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 142,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 143,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 144,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 145,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 146,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 147,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 148,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 149,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 150,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 151,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 152,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 153,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 154,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 155,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 156,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 157,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 158,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 159,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 160,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 161,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 162,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 163,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 164,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 165,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 166,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 167,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 168,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 169,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 170,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 171,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 172,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 173,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 174,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 175,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 176,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 177,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 178,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 179,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 180,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 181,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 182,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 183,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 184,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 185,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 186,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 187,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 188,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 189,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 190,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 191,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 192,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 193,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 194,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 195,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 196,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 197,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 198,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 199,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 200,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 201,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 202,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 203,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 204,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 205,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 206,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 207,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 208,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 209,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 210,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 211,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 212,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 213,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 214,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 215,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 216,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 217,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 218,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 219,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 220,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 221,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 222,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 223,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 224,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 225,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 226,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 227,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 228,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 229,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 230,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 231,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 232,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 233,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 234,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 235,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 236,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 237,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 238,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 239,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 240,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 241,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 242,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 243,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 244,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 245,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 246,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 247,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 248,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 249,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 250,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 251,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 252,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 253,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 254,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 255,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 256,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 257,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 258,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 259,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 260,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 261,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 262,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 263,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 264,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 265,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 266,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 267,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 268,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 269,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 270,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 271,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 272,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 273,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 274,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 275,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 276,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 277,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 278,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 279,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 280,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 281,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 282,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 283,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 284,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 285,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 286,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 287,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 288,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 289,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 290,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 291,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 292,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 293,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 294,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 295,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 296,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 297,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 298,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 299,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 300,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 301,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 302,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 303,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 304,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 305,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 306,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 307,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 308,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 309,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 310,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 311,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 312,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 313,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 314,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 315,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 316,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 317,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 318,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 319,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 320,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 321,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 322,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 323,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 324,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 325,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 326,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 327,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 328,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 329,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 330,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 331,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 332,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 333,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 334,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 335,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 336,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 337,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 338,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 339,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 340,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 341,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 342,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 343,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 344,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 345,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 346,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 347,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 348,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 349,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 350,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 351,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 352,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 353,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 354,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 355,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 356,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 357,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 358,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 359,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 360,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 361,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 362,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 363,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 364,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 365,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 366,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 367,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 368,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 369,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 370,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 371,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 372,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 373,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 374,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 375,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 376,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 377,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 378,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 379,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 380,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 381,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 382,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 383,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 384,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 385,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 386,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 387,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 388,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 389,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 390,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 391,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 392,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 393,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 394,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 395,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 396,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 397,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 398,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 399,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 400,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 401,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 402,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 403,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 404,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 405,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 406,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 407,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 408,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 409,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 410,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 411,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 412,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 413,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 414,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 415,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 416,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 417,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 418,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 419,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 420,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 421,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 422,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 423,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 424,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 425,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 426,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 427,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 428,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 429,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 430,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 431,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 432,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 433,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 434,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 435,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 436,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 437,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 438,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 439,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 440,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 441,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 442,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 443,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 444,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 445,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 446,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 447,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 448,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 449,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 450,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 451,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 452,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 453,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 454,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 455,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 456,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 457,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 458,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 459,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 460,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 461,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 462,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 463,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 464,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 465,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 466,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 467,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 468,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 469,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 470,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 471,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 472,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 473,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 474,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 475,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 476,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 477,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 478,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 479,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 480,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 481,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 482,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 483,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 484,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 485,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 486,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 487,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 488,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 489,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 490,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 491,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 492,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 493,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 494,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 495,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 496,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 497,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 498,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 499,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 500,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 501,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 502,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 503,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 504,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 505,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 506,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 507,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 508,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 509,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 510,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 511,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 512,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 513,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 514,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 515,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 516,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 517,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 518,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 519,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 520,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 521,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 523,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 524,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 525,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 526,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 527,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 528,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 529,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 530,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 535,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 536,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 537,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 538,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 539,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 540,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 541,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 542,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 543,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 544,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 545,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 546,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 547,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 548,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 549,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 550,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 551,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 552,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 553,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 554,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 555,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 556,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 557,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 558,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 559,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 560,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 561,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 562,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 563,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 564,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 565,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 566,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 567,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 568,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 569,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 570,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 571,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 572,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 573,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 574,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 575,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 576,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 577,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 578,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 579,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 580,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 581,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 582,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 583,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 584,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 585,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 586,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 587,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 588,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 589,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 590,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 591,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 592,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 593,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 594,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 595,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 596,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 597,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 598,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 599,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 600,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 601,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 602,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 603,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 604,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 605,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 606,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 607,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 608,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 609,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 610,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 611,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 612,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 613,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 614,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 615,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 616,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 617,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 618,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 619,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 620,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 621,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 262,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 623,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 624,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 625,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 626,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 627,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 628,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 629,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 630,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 631,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 632,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 633,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 634,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 635,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 636,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 637,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 638,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 639,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 640,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 641,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 642,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 643,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 644,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 645,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 646,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 647,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 648,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 649,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 650,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 651,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 652,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 653,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 654,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 655,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 656,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 657,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 658,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 659,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 660,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 661,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 662,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 663,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 664,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 665,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 666,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 667,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 668,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 669,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 670,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 671,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 672,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 673,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 674,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 675,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 676,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 677,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 678,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 679,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 680,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 681,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 682,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 683,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 684,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 685,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 686,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 687,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 688,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 689,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 690,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 691,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 692,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 693,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 694,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 695,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 696,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 697,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 698,
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 699,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 762,
    "text": "empty\n\nОсмотреться после входа.\nНачало активного конфликта дроида и Десс\n\n\nКогда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом.\n   Тем временем ссора Десс с TL-3 рисковала стать катастрофой: дроид пытался поддеть девушку какими-то загадочными обстоятельствами её прошлого, она отвечала ему оскорблениями в бесполезности. Чем бы не обернулась перепалка, ничего хорошего она не сулила.\n   Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
    "answers": [
      {
        "id": 762,
        "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом.\n   Тем временем ссора Десс с TL-3 рисковала перерасти в катастрофу: дроид пытался поддеть девушку какими-то загадочными обстоятельствами её прошлого, она отвечала ему оскорблениями в бесполезности. Чем бы не обернулась перепалка, ничего хорошего она не сулила.\n   Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
        "merge": true
      },
      {
        "id": 766,
        "text": "Поддержать Десвиар",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\nend"
      },
      {
        "id": 765,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n-- 2 for solved conflict, 1 for unsolved and 0 for new\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\n\nend"
      },
      {
        "id": 767,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 1\nend"
      }
    ]
  },
  {
    "id": 763,
    "text": "empty \nОсмотреться после входа\n\nНачало активного конфликта учитель с TL-3",
    "answers": [
      {
        "id": 763,
        "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом.\n   И только тогда он услышал. Нет, Орнас был готов к новому витку ругани Десвиар с TL-3, он не просто так решил воспользоваться её помощью совсем недавно. Но теперь дроид спорил с Магистром Льерсо.\n   Спорили о том, как лучше обследовать этаж: дроида удивляла неэффективность блуждания \"неуклюжей толпой\", учитель с усмешкой объяснял что-то про безопасность. Орнас знал эту лёгкую недобрую улыбку наставника, и она не обещала ничего хорошего. Самое время вмешаться.\n   Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
        "merge": true
      },
      {
        "id": 769,
        "text": "Поддержать учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nend"
      },
      {
        "id": 770,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n-- 2 for solved conflict, 1 for unsolved and 0 for new\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) - 3\n\nend"
      },
      {
        "id": 771,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 1\nend"
      }
    ]
  },
  {
    "id": 764,
    "text": "empty\n\nОсмотреться.\n\nНЕТ активного конфликта\n\nНачало залипания учителя на Десс",
    "answers": [
      {
        "id": 764,
        "text": "   Когда глаза Орнаса адаптировались к яркому освещению, он смог наконец осмотреть место, в котором оказался. Гладкие белые панели обшивки на полу, стенах и потолке блестели под ярким освещением и были бы более уместны на звездолёте, чем в этом мрачном храме. Широкий коридор уходил влево от двери, ведущей от площадки перед лестницей, и скрывался за поворотом. Вспомнив о самой двери, юноша попытался найти способ открыть её, но не преуспел в этом.\n   TL-3 коротко пискнул, и Орнас повернулся на звук. Учитель и Десвиар продолжали расслабленую беседу, не обращая на всё остальное внимания. Проехавшись у них за спиной, дроид вернулся к Орнасу и остановился, словно ожидая чего-то.",
        "merge": true
      },
      {
        "id": 787,
        "text": "Поговорить с учителем",
        "lua_do": "function lua_do()\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 1\nend"
      },
      {
        "id": 788,
        "text": "Поговорить с Десс",
        "lua_do": "function lua_do()\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 1\nend"
      },
      {
        "id": 789,
        "text": "Поговорить с TL-3",
        "lua_do": "function lua_do()\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 1\nend"
      }
    ]
  },
  {
    "id": 765,
    "text": "empty \nактивный конфликт после входа\nПоддержать TL-3 против Десс",
    "answers": [
      {
        "id": 765,
        "text": "– Нет смысла рассуждать о пользе на словах, – громко сказал Орнас, втискиваясь между спорщиками. – TL-3 умеет много такого, что нам не по силам. Уверен, он не раз докажет это на деле.\n   Он развернулся к Десвиар, заслоняя от неё дроида, и почувствовал, как она напряглась. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ну... – растерялась Десс.\n– Просто не стоит больше об этом, – Орнас попытался примирительно похлопать девушку по плечу, но она лишь фыркнула и отвернулась.",
        "merge": true
      },
      {
        "id": 768,
        "text": "Дальше",
        "run": [
          768
        ]
      }
    ]
  },
  {
    "id": 766,
    "text": "empty\nактивный конфликт после входа\nПоддержать Десвиар против TL-3",
    "answers": [
      {
        "id": 766,
        "text": "– Давайте оставим прошлое в прошлом и сосредоточимся на настоящем, – громко сказал Орнас, втискиваясь между спорщиками. – Закроем этот вопрос здесь и сейчас. TL-3, пообещай, что не станешь вновь говорить об этом.\n   Он развернулся к дроиду, оказавшись плечом к плечу с Десвиар, и почувствовал, как она расслабилась. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ты правда ей доверяешь? – огорчился TL-3. – Как же ты будешь... Хорошо, хорошо, раз моё мнение никого не интересует, этот риск теперь на вашей ответственности.",
        "merge": true
      },
      {
        "id": 768,
        "text": "Дальше",
        "run": [
          768
        ]
      }
    ]
  },
  {
    "id": 767,
    "text": "empty\nактивный конфликт после входа\nНе вмешиваться дроид/Десс",
    "answers": [
      {
        "id": 767,
        "text": "– Прекратите оба! – громко сказал Орнас, втискиваясь между спорщиками. – Сейчас не время попусту сотрясать воздух, отложите свои разборки до тех пор, пока мы не закончим с делом.\n   Он окинул взглядом дроида и Десвиар, пытаясь уловить, подействовали ли его слова на них. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Конечно, сейчас не время, – передразнила Десс. – Как скажешь, командир.\n   Дроид пропищал что-то невразумительное и отъехал в сторону. В ответ на вопросительный взгляд Орнаса, магистр Льерсо лишь незаметно пожал плечами.",
        "merge": true
      },
      {
        "id": 768,
        "text": "Дальше",
        "run": [
          768
        ]
      }
    ]
  },
  {
    "id": 768,
    "text": "empty \nВ коридоре. Отходняк после активного события. нет активного конфликта",
    "answers": [
      {
        "id": 768,
        "text": "\n   Поняв, что катастрофа прямо сейчас отменяется, Орнас выдохнул и направился вперёд по коридору, просто чтобы сделать хоть что-нибудь. Остальные последовали за ним в тишине, только позвякивал иногда TL-3. \n   Постепенно молчание стало гнетущим.",
        "merge": true
      },
      {
        "id": 790,
        "text": "Поговорить с учителем",
        "lua_do": "function lua_do()\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend"
      },
      {
        "id": 791,
        "text": "Поговорить с Десс",
        "lua_do": "function lua_do()\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\nend"
      },
      {
        "id": 792,
        "text": "Поговорить с TL-3",
        "lua_do": "function lua_do()\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\nend"
      }
    ]
  },
  {
    "id": 769,
    "text": "empty\nподдержать учителя против TL-3 после входа",
    "answers": [
      {
        "id": 769,
        "text": "– Люди не всегда стремятся к той эффективности, которую имеют в виду дроиды, – попытался как можно мягче сказать Орнас. – На то мы и люди, наши решения зависят не только от алгоритмов...\n  Он развернулся к дроиду, заслонив собой учителя. Десс с довольным видом наблюдала за происходящим со стороны и разве что не смеялась.\n– Ну конечно, – сдался TL-3, – какое вам дело до мнения дроида, которого сделали люди для повышения эффективности. Вы же человеки, вы же не такие... Хорошо, хорошо, я больше не стану вам докучать своими глупыми алгоритмами.",
        "merge": true
      },
      {
        "id": 768,
        "text": "Дальше",
        "run": [
          768
        ]
      }
    ]
  },
  {
    "id": 770,
    "text": "empty\nподдержать TL-3 против учителя после входа",
    "answers": [
      {
        "id": 770,
        "text": "– Прости нам наше несовершенство. Мы всего лишь люди и можем во многом ошибаться, – попытался как можно мягче сказать Орнас. – Хорошо, что у нас есть ты. Я очень ценю твоё мнение об этом.\n   Он развернулся к учителю, заслонив собой TL-3. Десс с довольным видом наблюдала за происходящим со стороны и разве что не смеялась.\n   Магистр Льерсо замер с приподнятой бровью. Улыбка оставила его губы, но ощущение тревоги у Орнаса осталось. Наконец учитель кивнул и отвернулся, всем видом показывая, что тема закрыта.",
        "merge": true
      },
      {
        "id": 768,
        "text": "Дальше",
        "run": [
          768
        ]
      }
    ]
  },
  {
    "id": 771,
    "text": "empty \nне вмешиваться учитель/TL-3 после входа",
    "answers": [
      {
        "id": 771,
        "text": "– Ну хватит вам! – громко сказал Орнас, втискиваясь между спорщиками. – Давайте соберёмся чтобы вместе сделать дело.\n   Он окинул взглядом дроида и учителя, пытаясь уловить, подействовали ли его слова на них. Десвиар с довольным видом наблюдала за происходящим со стороны и разве что не смеялась.\n– Разумеется, – кивнул учитель.\n   Дроид пропищал что-то невразумительное и отъехал в сторону. Орнас не сомневался, что спор вспыхнет с новой силой, как только эти двое вновь найдут повод что-то обсудить.",
        "merge": true
      },
      {
        "id": 768,
        "text": "Дальше",
        "run": [
          768
        ]
      }
    ]
  },
  {
    "id": 772,
    "text": "empty",
    "answers": [
      {
        "id": 45,
        "text": "Генерация текста: ответ",
        "lua_text": "function lua_text()\nreturn sup45\nend",
        "merge": true
      },
      {
        "comment": false,
        "id": 161,
        "text": "– Я должен тебе кое-что сказать.",
        "lua_if": "function lua_if()\n--style == 2 - просто чувствует Силу )\n--dess.recordSeen = 1 - запись в шлеме\n--dess.saberSeen = 1 - световой меч в сейфе\n--dess.droidSeen = 1 - рассказал дроид\n--dess.complexSeen = 1 - сложное условие: бой со змеёй наверху - видел следы, видел одевание Десс - видел следы сражения\ndess = dess or {}\ndess.stage = dess.stage or 0\ncomplex = complex or {}\n  if complex.saberTracks == 1 and complex.tracks == 1 then\n    dess.complexSeen = 1\n  end\ndess.revealed = (dess.recordSeen == 1 and 1) or (dess.saberSeen == 1 and 1) or (dess.droidSeen == 1 and 1) or (dess.complexSeen == 1 and 1) or (style == 2 and 1) or 0\nreturn dess.revealed == 1 and dess.stage ~= 3 and sup45 ~= \"\"\nend",
        "lua_do": "function lua_do()\nsup45 = nil\nend"
      },
      {
        "id": 246,
        "text": "Отойти от Десс",
        "lua_if": "function lua_if()\nreturn sup45 ~= \"\"\nend",
        "lua_do": "function lua_do()\nsup45 = nil\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 ~= \"\"\nend",
        "id": 45,
        "text": "Генерация текста - бонусная граната",
        "lua_text": "function lua_text()\nlocal text = \"\"\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\ngrenade = grenade1 <plus> grenade3 <plus> grenade4\na_tia_trust = a_tia_trust or 0\n\nif a_tia_trust > 5 then\n  if grenade < 2 then\n    grenade1 = grenade1 <plus> 1\n    grenade = grenade <plus> 1\n    text = \" Кстати, – немного смущённо добавила она после небольшой паузы, – тут было ещё кое-что, наверное это тебе может пригодиться...<s>\n   Она вытащила откуда-то из складок плаща небольшой блестящий предмет и протянула его Орнасу. Джедай осторожно взял предмет в руки и осмотрел. Граната. Ионная. Она действительно может пригодиться, например, для выведения из строя дроидов или вычислительной техники. Юноша поблагодарил Десс и закрепил гранату на поясе.\"\n  end\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 == \"\"\nend",
        "instant": true,
        "lua_do": "function lua_do()\nsup45 = \"– Здорово, – честно ответил он. – Мой плащ тебе идёт.<s>\n– Значит буду ходить так, пока ты не найдёшь для меня что-нибудь ещё.\"\ndess = dess or {}\ndess.trust = (a_tia_trust or 0) <plus> 1\nend",
        "text": "Похвалить",
        "id": 772,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 == \"\"\nend",
        "instant": true,
        "id": 45,
        "text": "Отозваться нейтрально",
        "lua_do": "function lua_do()\nsup45 = \"– Сойдёт, – кивнул он, стараясь не думать о привлекательности девушки.<s>\n– Значит буду ходить так, пока ты не найдёшь для меня что-нибудь ещё.\"\ndess = dess or {}\ndess.trust = (a_tia_trust or 0) <plus> 0\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn sup45 == \"\"\nend",
        "instant": true,
        "id": 45,
        "text": "Раскритиковать",
        "lua_do": "function lua_do()\nsup45 = \"– Отвратительно, – соврал он, стараясь не думать о привлекательности девушки. – Надо будет найти что-нибудь нормальное.<s>\n– Вот сам и найди что-нибудь нормальное, – обиженно отозвалась Десс.\"\ndess = dess or {}\ndess.trust = (a_tia_trust or 0) - 2\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 773,
    "text": "empty",
    "answers": [
      {
        "id": 49,
        "text": "Атаковать мечом",
        "lua_if": "function lua_if()\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\ngrenade = grenade1 <plus> grenade3 <plus> grenade4\nreturn true\nend",
        "var_not": [
          "fail50",
          1
        ]
      },
      {
        "var_not": [
          "gren50",
          1
        ],
        "id": 50,
        "var_need": [
          "grenade",
          1
        ],
        "text": "Использовать гранаты",
        "var_set": [
          "gren50",
          1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "ионную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_equal": [
          "gren50",
          1
        ],
        "id": 773,
        "text": "Бросить ионную гранату",
        "var_need": [
          "grenade1",
          1
        ],
        "var_set": [
          "ion160",
          1,
          "fail50",
          1
        ]
      },
      {
        "var_add": [
          "havetime",
          2
        ],
        "id": 51,
        "var_need": [
          "grenade3",
          1
        ],
        "var_str_set": [
          "grentype160",
          "криогенную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_equal": [
          "gren50",
          1
        ],
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "text": "Бросить криогенную гранату",
        "var_set": [
          "crio50",
          1
        ]
      },
      {
        "var_str_set": [
          "grentype160",
          "плазменную"
        ],
        "var_not": [
          "fail160",
          1
        ],
        "var_need": [
          "grenade4",
          1
        ],
        "var_equal": [
          "gren50",
          1
        ],
        "id": 50,
        "text": "Бросить плазменную гранату",
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "var_set": [
          "plasm50",
          1,
          "fail50",
          1
        ]
      },
      {
        "id": 47,
        "text": "Бежать к ближайшей колонне",
        "var_not": [
          "fail50",
          1
        ]
      },
      {
        "var_show": [
          "grentype160",
          "гранату, активировал её и метнул в сторону противника."
        ],
        "id": 160,
        "text": " Он сорвал с пояса",
        "var_not": [
          "grentype160",
          0
        ],
        "merge": true
      },
      {
        "var_not": [
          "grentype160",
          0
        ],
        "var_equal": [
          "plasm50",
          1
        ],
        "id": 50,
        "text": "<s>r\n   Огненный шторм поглотил и терентатека, и самого джедая, оказавшегося слишком близко к месту взрыва. Волосы на его голове загорелись, кожа покрылась волдырями, а лёгкие заполнились раскалённым воздухом. Орнас схватился за лицо, спасая глаза, и повалился навзничь, не в силах совладать с болью. Замутнённый взгляд юноши смог на секунду различить среди бушующего огня и дыма силуэт человека со световым мечом, стремительно мчащегося в его сторону, и в его сердце поселилась робкая надежда на спасение. Однако уже в следующее мгновение перед ним возник разъярённый монстр и занёс исполинскую лапу для решающего удара.<s>r\n   \"Ещё один джедай, который не смог\", – услышал Орнас еле различимый голос у себя в голове. Затем всё стихло.",
        "merge": true
      },
      {
        "blackout": true,
        "lua_if": "function lua_if()\n-- сделать переход на страницу \"очнулся после видения\"\nreturn true\nend",
        "var_equal": [
          "fail50",
          1
        ],
        "id": 92,
        "text": "Это конец?..",
        "lua_do": "function lua_do()\nmiddleRoom.result = 3\nhideMap = 0\nend",
        "var_set": [
          "global blockSaves",
          0
        ]
      },
      {
        "id": 160,
        "text": "\n   Взрыв ионной гранаты не причинил \nникакого вреда свирепому существу, оказавшемуся перед самым джедаем. Одним мощным взмахом чудовище сбило юношу с ног. Ни долгие тренировки, ни связь с Силой не могли помочь Орнасу: он лежал на спине, пытаясь заслониться тонким лезвием светового меча от исполинского противника, уже занёсшего лапу для решающего удара.\n   \"Ещё один джедай, который не смог\", – услышал Орнас еле различимый голос у себя в голове. Затем всё стихло.",
        "var_equal": [
          "ion160",
          1
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 774,
    "text": "   Сорвав с пояса и активировав ионную гранату, юноша метнул её так, чтобы она взорвалась непосредственно рядом с чудовищем.\n   Слабый хлопок и последовавшая за ним волна электромагнитного излучения не причинили никакого вреда свирепому существу, оказавшемуся уже почти перед самым джедаем. Поняв, что другого момента спастись уже может не подвернуться, Орнас был вынужден отступить.",
    "answers": [
      {
        "id": 260,
        "text": "Отступить в предыдущую комнату",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "fight158",
          0,
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "plasm160",
          0,
          "crio160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ]
      }
    ]
  },
  {
    "id": 775,
    "text": "   Сорвав с пояса и активировав криогенную гранату, юноша метнул её в сторону чудовища. Раздался приглушённый хлопок, и волна холода захлестнула свирепого монстра, замедлившегося почти перед самым джедаем.\n   Орнас мог бы воспользоваться преимуществом в скорости и продолжить бой или отступить, пока не поздно.",
    "answers": [
      {
        "id": 260,
        "text": "Отступить в предыдущую комнату",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "fight158",
          0,
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "plasm160",
          0,
          "crio160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ]
      },
      {
        "id": 50,
        "text": "Продолжить бой",
        "var_set": [
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ],
        "var_equal": [
          "suc160",
          1
        ]
      }
    ]
  },
  {
    "id": 776,
    "text": "   Сорвав с пояса и активировав плазменную гранату, юноша метнул её в сторону чудовища. Ослепительная вспышка, а за ней волна пламени. Даже на таком расстоянии Орнас вынужденно зажмурился от жара, а поражённый  терентатек взвыл от боли, замерев на месте.\n   Джедай мог бы воспользоваться заминкой и своим преимуществом в скорости, чтобы продолжить бой или отступить, пока не поздно.",
    "answers": [
      {
        "id": 260,
        "text": "Отступить в предыдущую комнату",
        "lua_do": "function lua_do()\nhideMap = 0\nend",
        "var_set": [
          "fight158",
          0,
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "plasm160",
          0,
          "crio160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ]
      },
      {
        "id": 50,
        "text": "Продолжить бой",
        "var_equal": [
          "suc160",
          1
        ],
        "var_set": [
          "gren160",
          0,
          "fail160",
          0,
          "grentype160",
          0,
          "ion160",
          0,
          "fail160",
          0,
          "suc160",
          0,
          "helmet270",
          0
        ]
      }
    ]
  },
  {
    "id": 777,
    "text": "empty",
    "answers": [
      {
        "var_not": [
          "style",
          1
        ],
        "var_equal": [
          "sword192",
          1
        ],
        "id": 192,
        "calculate": true,
        "text": "добавить рану blooded 1",
        "var_set": [
          "blooded",
          1
        ]
      },
      {
        "var_equal": [
          "iongrenade192",
          1
        ],
        "id": 192,
        "calculate": true,
        "text": "добавить рану blooded 1",
        "var_set": [
          "blooded",
          1
        ]
      },
      {
        "id": 192,
        "text": "   Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.\n",
        "merge": true,
        "var_equal": [
          "sword192",
          1,
          "helmet",
          1
        ]
      },
      {
        "id": 192,
        "text": "   Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.\n",
        "var_equal": [
          "helmet",
          1,
          "iongrenade192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": "   Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.\n",
        "merge": true,
        "var_equal": [
          "helmet",
          1,
          "criogrenade192",
          1
        ]
      },
      {
        "id": 192,
        "text": "   Юноша отбросил в сторону старый шлем и целиком сосредоточился на сражении.\n",
        "var_equal": [
          "helmet",
          1,
          "plasmogrenade192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": "   В одно мгновение рукоять светового меча оказалась в ладони Орнаса, а свет клинка озарил помещение.",
        "var_equal": [
          "sword192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": " Ежедневные многочасовые тренировки отточили навыки и рефлексы Орнаса до автоматизма. Заняв оборонительную стойку, он превратил недостаток пространства в своё преимущество: численное превосходство противников не имело значения из-за невозможности окружить его и напасть одновременно.\n   Схватка продолжалась недолго, существа ничего не могли противопоставить джедаю и его смертоносному оружию. Без труда разделавшись со всеми врагами, Орнас деактивировал клинок и убрал рукоять на пояс.",
        "var_equal": [
          "style",
          1,
          "sword192",
          1
        ],
        "merge": true
      },
      {
        "var_not": [
          "style",
          1
        ],
        "var_equal": [
          "sword192",
          1
        ],
        "id": 192,
        "text": " Вспомнив свои тренировки, Орнас быстро сократил дистанцию для атаки. Двух противников он сразил ещё до того, как они успели понять, что происходит.\n   Смелый манёвр юноши позволил оставшимся существам окружить его. Взмах мечом, уворот, ещё удар. Слишком просто. Но вдруг – ай! Когтистая лапа полоснула по бедру. Из глубоких порезов засочилась кровь.\n   Несмотря на боль и кровоточащую рану, Орнас без труда расправился с оставшимися противниками и спрятал оружие на пояс.",
        "merge": true
      },
      {
        "id": 192,
        "text": "\n   Быстро сорвав с пояса ионную гранату, Орнас активировал её и бросил в сторону противников. Уже через мгновение она взорвалась в центре помещения, но не причинила никакого вреда живым существам. Воспользовавшись заминкой юноши, враги успели окружить его и даже сумели нанести размашистый удар когтями по бедру.\n   Несмотря на кроваточащую рану, джедай активировал клинок светового меча и вступил в схватку с монстрами. Один за другим его противники падали, сражённые смертоносным оружием, не способные больше оказывать сопротивление.\n   Закончив сражение, Орнас убрал рукоять меча на пояс и перевёл дыхание.",
        "var_equal": [
          "iongrenade192",
          1
        ],
        "merge": true
      },
      {
        "id": 192,
        "text": "\n   Быстро сорвав с пояса плазменную гранату, Орнас активировал её и бросил в сторону противников. Уже через мгновение она взорвалась в центре помещения, охватив всё пространство вокруг испепеляющим жаром. Орнас едва успел задержать дыхание и укрыться Силой от волны пламени, сжигающего всё на своём пути.\n   Когда раскалённый воздух комнаты наконец остыл, Орнас расслабился и перевёл дыхание.",
        "merge": true,
        "var_equal": [
          "plasmogrenade192",
          1
        ]
      },
      {
        "id": 192,
        "text": "\n   Быстро сорвав с пояса криогенную гранату, Орнас активировал её и бросил в сторону противников. Уже через мгновение она взорвалась в центре помещения, окутав всё пространство вокруг чудовищным холодом. Находившиеся в эпицентре взрыва существа мгновенно оказались скованы ледяной ловушкой, не в силах даже пошевелиться.\n   Не теряя времени, джедай мгновенно сократил дистанцию и активировал световой меч. Без труда расправившись с обездвиженными противниками, Орнас погасил меч и убрал рукоять на пояс.",
        "var_equal": [
          "criogrenade192",
          1
        ],
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn blooded == 1\nend",
        "lua_do": "function lua_do()\nornasStat.bloodedLeg = 1\nend",
        "text": "рана на ноге",
        "id": 213,
        "calculate": true
      },
      {
        "id": 113,
        "var_not": [
          "fight192",
          0
        ],
        "lua_if": "function lua_if()\nreturn plasmogrenade192 ~= 1\nend",
        "text": "Осмотреть комнату"
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "id": 777,
        "instant": true,
        "text": "Использовать меч",
        "var_set": [
          "sword192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_sub": [
          "grenade1",
          1,
          "grenade",
          1
        ],
        "var_need": [
          "grenade1",
          1
        ],
        "id": 192,
        "instant": true,
        "text": "Использовать ионную гранату",
        "var_set": [
          "iongrenade192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_sub": [
          "grenade3",
          1,
          "grenade",
          1
        ],
        "var_need": [
          "grenade3",
          1
        ],
        "id": 192,
        "instant": true,
        "text": "Использовать криогенную гранату",
        "var_set": [
          "criogrenade192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_sub": [
          "grenade4",
          1,
          "grenade",
          1
        ],
        "var_need": [
          "grenade4",
          1
        ],
        "id": 192,
        "instant": true,
        "text": "Использовать плазменную гранату",
        "var_set": [
          "plasmogrenade192",
          1,
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          0,
          "plasmogrenade192",
          1
        ],
        "var_equal": [
          "helmet",
          1
        ],
        "id": 192,
        "text": " Немного отдышавшись, юноша вернулся к тому месту, где он оставил шлем и вновь взял его в руки.",
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          0
        ],
        "var_equal": [
          "helmet",
          1,
          "plasmogrenade192",
          1
        ],
        "id": 192,
        "text": " Немного отдышавшись, он вернулся к тому месту, где оставил шлем. Не смотря на опасения юноши, тот сумел пережить огненную бурю и остаться в целости, хотя и был сейчас раскалён до предела. Джедай дождался, пока металл остынет до приемлемой температуры, и взял его в руки.",
        "merge": true
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_equal": [
          "force_ab",
          3
        ],
        "id": 316,
        "text": "Использовать молнии Силы",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 4\nend",
        "var_set": [
          "fight192",
          1
        ]
      },
      {
        "var_not": [
          "fight192",
          1
        ],
        "var_equal": [
          "force_ab",
          1
        ],
        "id": 317,
        "text": "Использовать контроль разума",
        "lua_do": "function lua_do()\nornasStat.darkside = ornasStat.darkside <plus> 5\nend",
        "var_set": [
          "fight192",
          1
        ]
      },
      {
        "id": 113,
        "text": "Осмотреть комнату",
        "lua_if": "function lua_if()\nreturn plasmogrenade192 == 1\nend"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\nforce_ab = 3\ngrenade3 = 1\ngrenade1 = 1\ngrenade = 2\nend",
        "text": "Демонстрация",
        "need": 1000,
        "id": 192
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nTL3 = TL3 or {}\nTL3.conditions = TL3.conditions or {}\nTL3.conditions.killAnimals = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 192,
        "calculate": true
      }
    ]
  },
  {
    "id": 778,
    "text": "– Ты ведь понимаешь меня? – вкрадчиво спросил юноша. В ответ дроид издал серию коротких трелей и писков, которые джедай никак не мог интерпретировать.",
    "answers": [
      {
        "id": 209,
        "text": "Новый ответ. введите текст",
        "run": [
          209
        ]
      }
    ]
  },
  {
    "id": 779,
    "text": "– Как ты здесь очутился? – спросил Орнас, но астромех лишь пискнул два раза и замолчал.",
    "answers": [
      {
        "id": 209,
        "text": "Новый ответ. введите текст",
        "run": [
          209
        ]
      }
    ]
  },
  {
    "id": 780,
    "text": "– Ты можешь сделать что-нибудь, чтобы я тебя понял? – на этот раз без особой надежды обратился к собеседнику Орнас. – Возможно, я смог бы помочь тебе.\n   К его удивлению, дроид заскрипел и защёлкал механизмами, а через мгновение в воздухе перед ним появилась голограмма, изображающая человека в мандалорской броне. \"Я могу это сделать, если у вас достаточно денег\", – напыщенно проговорил наёмник, после чего голограмма оборвалась.",
    "answers": [
      {
        "id": 209,
        "text": "Новый ответ. введите текст",
        "run": [
          209
        ]
      }
    ]
  },
  {
    "id": 781,
    "text": "– Как ты здесь очутился? – спросил юноша, на что дроид вновь включил проектор и уже знакомый Орнасу мандалорец произнес: \"Передайте координаты моему TL-3, мы отправимся, когда вся команда будет в сборе\".",
    "answers": [
      {
        "id": 209,
        "text": "Новый ответ. введите текст",
        "run": [
          209
        ]
      }
    ]
  },
  {
    "id": 782,
    "text": "– Я могу чем-нибудь помочь тебе? – спросил юноша, надеясь, что дроид ему доверится.\n   Некоторое время астромех был неподвижен, затем вновь заговорила голограмма мандалорца: \"TL-3, я отправлюсь вглубь здания, позаботься о том, чтобы корабль был на ходу, когда я вернусь\". После этого изображение погасло и включился обрывок аудиозаписи, составленный, видимо, из нескольких несвязанных фрагментов: \"Нужно... Найди... Его...\"\n– Твой хозяин так и не вернулся? Ты хочешь, чтобы я разыскал его? – спросил Орнас, но дроид больше не реагировал на его слова.",
    "answers": [
      {
        "id": 209,
        "text": "Новый ответ. введите текст",
        "run": [
          209
        ]
      }
    ]
  },
  {
    "id": 783,
    "text": "– Что ты имеешь в виду? – удивился юноша. – Ты ведь дроид-секретарь, ты должен понимать меня.\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – вновь проговорил дроид, полагая, видимо, этот ответ достаточным.\n   Поняв, что большего от этого странного упрямого механизма сейчас не добиться, Орнас устало вздохнул.",
    "answers": [
      {
        "id": 219,
        "text": "Отойти от дроида",
        "var_set": [
          "dial224",
          0
        ]
      }
    ]
  },
  {
    "id": 784,
    "text": "– Ты знаешь какие-нибудь другие слова? – голос юноши звучал раздражённо. – Или это всё, что заложили в твою программу?\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – вновь проговорил дроид, подтверждая догадку джедая.\n   Поняв, что большего от этого странного упрямого механизма сейчас не добиться, Орнас устало вздохнул.",
    "answers": [
      {
        "id": 219,
        "text": "Отойти от дроида",
        "var_set": [
          "dial224",
          0
        ]
      }
    ]
  },
  {
    "id": 785,
    "text": "– Если ты ещё раз повторишь эту фразу, я разнесу тебя на кусочки! – пригрозил юноша, хотя уже сам понимал, что ничего этим не добьётся.\n– О, Создатель! Они сделали из меня секретный ключ от сейфа, ну и ну! – вновь проговорил дроид, будто насмехаясь над неуместной попыткой запугать себя.\n   Поняв, что большего от этого странного упрямого механизма добиться всё равно не выйдет, Орнас устало вздохнул. Он ведь предупредил эту глупую железяку, но дроид сам определил свою участь.",
    "answers": [
      {
        "id": 219,
        "text": "Отойти от дроида",
        "var_set": [
          "dial224",
          0
        ]
      }
    ]
  },
  {
    "id": 786,
    "text": "   Юноша осторожно взял странный предмет, недолго повертел его в руках, осматривая со всех сторон, а затем аккуратно закрепил на поясе. Сразу после этого секретная дверца вернулась в исходное положение.",
    "answers": [
      {
        "id": 219,
        "text": "Отойти от сейфа",
        "instant": false,
        "lua_do": "function lua_do()\n--hideMap = 0\nend"
      }
    ]
  },
  {
    "id": 787,
    "text": "empty \nпоговорить с учителем\nкоридор с активным конфликтом\nНачало\nконфликта Десс и\nдроида",
    "answers": [
      {
        "id": 787,
        "text": "– Дверь не открывается с этой стороны, – пожаловался Орнас учителю.\n   Тому понадобилось несколько секунд, чтобы вспомнить про существование падавана и осознать смысл сказанного.\n– Хорошо, что нам сейчас не нужно возвращаться, – легкомысленно бросил он, и его лицо наконец вновь стало серьёзным. – Будем двигаться вперёд, возможно где-то там ты найдёшь ключи от всех дверей.\n   Он похлопал юношу по плечу, и они осторожно зашагали по коридору,  осматривая пол и стены. Дроид дребезжал где-то сзади. Поначалу бесшумная Десс недовольно вздохнула, затем заворчала и, не успели они дойти до поворота, уже вовсю препиралась с TL-3.\n   На упрёки в своей бесполезности дроид отвечал туманными фразами о прошлом, которые почему-то только сильнее выводили девушку из себя. Казалось, если не вмешаться сейчас, всё очень быстро выйдет из-под контроля.\n   Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
        "merge": true
      },
      {
        "id": 801,
        "text": "Поддержать Десс",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\nend"
      },
      {
        "id": 802,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend"
      },
      {
        "id": 806,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 1\nend"
      }
    ]
  },
  {
    "id": 788,
    "text": "empty\nпоговорить с Десс\nкоридор с активным конфликтом\nдроид против учителя",
    "answers": [
      {
        "id": 788,
        "text": "– Вы с наставницей не добирались сюда тогда? – спросил Орнас у Десвиар.\n   Её лицо помрачнело. Учитель сразу вновь стал серьёзным.\n– Нет. Наверное, она прошла сюда сама уже после... – сжала губы Десс.\n– Уверен, мы что-нибудь узнаем о её судьбе там, – Орнас неопределённо махнул рукой в направлении коридора и после напряжённой паузы первым двинулся туда.\n   Девушка пошла рядом с ним, отстранённо наблюдая, как юноша перед каждым шагом осматривает пол и стены. Позади доносились голос учителя и писк TL-3, не особо торопившихся помочь Орнасу.\n   Поворот коридора ненадолго разделил спутников, но когда отставшие вновь появились, стало ясно, что беседа магистра и астромеханика уже перешла в спор. Орнас не понимал, почему учитель так яростно отстаивал идею, что полагаться можно только на самого себя, доводы дроида о преимуществе командной работы казались ему более чем убедительными.\n   Орнас чувствовал, что нужно срочно это остановить, пока конфликт не разгорится во что-то более серьёзное. Но что лучше: явная поддержка одного из спутников, которая сильно испортит отношение к Орнасу второго, или попытка усидеть на обоих стульях, что могло лишь отложить спор, а не разрешить его?",
        "merge": true
      },
      {
        "id": 804,
        "text": "Поддержать учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend"
      },
      {
        "id": 805,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) - 3\nend"
      },
      {
        "id": 806,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 1\nend"
      }
    ]
  },
  {
    "id": 789,
    "text": "empty \nпоговорить с TL-3\nкоридор с активным конфликтом\nконец залипания учителя на Десс (2/2)",
    "answers": [
      {
        "id": 789,
        "text": "– Ты что-то хотел сказать? – повернулся Орнас к TL-3.\n– Нет, ничего такого, – почему-то замялся дроид. – Ничего, что ты не заметил бы сам.\n   Он ерзал на месте. Десс хихикала над очередной историей магистра Льерсо. Орнас ничего не понимал.\n– Нужно двигаться, – наконец решил он, и направился вперёд по коридору.\n   Орнас шёл медленно, стараясь осмотреть каждый участок пола и стен, чтобы не пропустить возможные ловушки. Дроид катился рядом, не помогая, но и не мешая. Учитель и Десвиар шли, даже не глядя под ноги.\n   И только когда Магистр Льерсо чуть не вписался в угол на повороте, юноша понял.\n– Он сам не свой из-за неё, – повернулся Орнас к TL-3, и тот утвердительно пискнул. – Попробовать их вразумить или проще оставить в покое?",
        "merge": true
      },
      {
        "id": 797,
        "text": "Воздействовать на учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\n\nend"
      },
      {
        "id": 798,
        "text": "Воздействовать на Десс",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 1\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend"
      },
      {
        "id": 799,
        "text": "Не вмешиваться",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 1\n\nend"
      }
    ]
  },
  {
    "id": 790,
    "text": "empty\nпоговорить с учителем во время перехода по коридору к саперу.\nперед сапёром",
    "answers": [
      {
        "id": 790,
        "text": "   Орнас ещё сильнее замедлился и поровнялся с учителем.\n– Вы думаете, Совет засчитает мне прохождение испытания, когда узнает, что Вы столько помогали мне? – нерешительно спросил он.\n– Это сейчас не важно. Соберись, Орнас. Пока ты отвлечён, тьма этого места может одурманить твой разум, спутать мысли, пробудить эмоции, которые погубят тебя. Помни, что ты в опасности, и не позволяй себе расслабляться.\n   Орнас как следует отругал себя за неосмотрительность: какого вообще и ответа он ожидал сейчас от наставника?\n   Десс и TL-3 двигались максимально далеко друг от друга и демонстративно молчали.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  2 --условие: конфликт Десс и TL-3 разрешён\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "   Орнас ещё сильнее замедлился и поровнялся с учителем.\n– Вы думаете, Совет засчитает мне прохождение испытания, когда узнает, что Вы столько помогали мне? – нерешительно спросил он.\n– Это сейчас не важно. Соберись, Орнас. Пока ты отвлечён, тьма этого места может одурманить твой разум, спутать мысли, пробудить эмоции, которые погубят тебя. Помни, что ты в опасности, и не позволяй себе расслабляться.\n   Не успел Орнас отругать себя за неосмотрительность, когда понял, что что-то не так. Всё это время Десс о чём-то говорила с TL-3, но теперь её расслабленный ироничный тон сменился настоящим раздражением. Дроид что-то пропищал о тёмном прошлом девушки, и она чуть не закричала, обзывая того бесчувственным, бесполезным и ещё несколькими словами, которые Орнас не решился бы повторить.\n   Чем бы не обернулась перепалка, ничего хорошего она не сулила, и нужно сделать что-то как можно скорее. Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL <  2 --условие: конфликт Десс и TL-3 неразрешён\nend",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  2 --условие: конфликт Десс и TL-3 разрешён\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL <  2 --условие: конфликт Десс и TL-3 неразрешён\nend",
        "id": 794,
        "text": "Дальше",
        "run": [
          794
        ],
        "merge": false
      }
    ]
  },
  {
    "id": 791,
    "text": "empty\nпоговорить с Десс во время перехода по коридору к саперу.\nперед сапёром",
    "answers": [
      {
        "id": 790,
        "text": "– Вы с наставницей не добирались сюда тогда? – на ходу спросил Орнас у Десвиар.\n   Её лицо помрачнело.\n– Нет. Наверное, она прошла здесь сама уже после... – сжала губы Десс.\n– Извини... Уверен, мы что-нибудь узнаем о её судьбе там, – Орнас махнул рукой в сторону очередного поворота.\n   Девушка промолчала. Учитель и TL-3 шли позади, тактично игнорируя друг друга.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 2 --условие: конфликт учителя и TL-3 разрешён\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "– Вы с наставницей не добирались сюда тогда? – на ходу спросил Орнас у Десвиар.\n   Её лицо помрачнело.\n– Нет. Наверное, она прошла здесь сама уже после... – сжала губы Десс.\n– Извини... Уверен, мы что-нибудь узнаем о её судьбе там, – Орнас махнул рукой в сторону очередного поворота.\n   Девушка промолчала. Доносившиеся позади голоса учителя TL-3 неожиданно усилились, и только теперь Орнас услышал, что их беседа успела перерасти в спор. Орнас не понимал, почему учитель так яростно отстаивал идею, что полагаться можно только на самого себя, доводы дроида о преимуществе командной работы казались ему более чем убедительными.\n   Орнас чувствовал, что нужно срочно это остановить, пока конфликт не разгорится во что-то более серьёзное. Но что лучше: явная поддержка одного из спутников, которая сильно испортит отношение к Орнасу второго, или попытка усидеть на обоих стульях, что могло лишь отложить спор, а не разрешить его?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: конфликт учителя и TL-3 неразрешён\nend",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 2 --условие: конфликт учителя и TL-3 разрешён\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: конфликт учителя и TL-3 неразрешён\nend",
        "id": 795,
        "text": "Дальше",
        "run": [
          795
        ],
        "merge": false
      }
    ]
  },
  {
    "id": 792,
    "text": "empty \nпоговорить с TL-3 во время перехода по коридору к саперу.\nперед сапёром",
    "answers": [
      {
        "id": 792,
        "text": "– TL-3, твои сканеры смогут засечь ловушки, если они здесь есть? – обратился Орнас к катящемуся рядом астромеху.\n   Тот ответил не сразу. Из сложного и многословного объяснения Орнас сделал единственный вывод: нет, не может. Пока юноша придумывал достаточно воодушевляющий ответ,  они прошли несколько поворотов абсолютно пустого коридора, а когда наконец смог выдавить из себя неуверенное предложение повторно разобрать дроида и починить ещё что-нибудь, коридор внезапно закончился.\n   Магистр Льерсо так увлёкся разговором с Десвиар, что чуть не влетел в спину Орнаса, когда он остановился. Десс хихикнула.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ],
        "merge": false
      }
    ]
  },
  {
    "id": 793,
    "text": "empty \nуспех в сапёре\nконфликт учителя и TL-3\nзабить",
    "answers": [
      {
        "id": 532,
        "text": "– Путь свободен, нужно идти! – громко объявил Орнас, привлекая внимание спорящих. – Я покажу безопасный маршрут.\n   Он махнул рукой в сторону. Учитель некоторое время непонимающе глядел на Орнаса, затем двинулся к двери. Дроид пискнул ещё что-то и направился следом. Десс скорчила недовольною гримасу и первой выскочила в зал с ловушками.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 794,
    "text": "Перед сапёром\nактивный конфликт Десс с TL-3",
    "answers": [
      {
        "id": 810,
        "text": "Поддержать Десвиар",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\nend"
      },
      {
        "id": 811,
        "text": "Поддержать дроида",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend"
      },
      {
        "id": 812,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 1\n\nend"
      }
    ]
  },
  {
    "id": 795,
    "text": "Перед сапёром\nактивный конфликт учителя с TL-3",
    "answers": [
      {
        "id": 796,
        "text": "Поддержать учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend"
      },
      {
        "id": 807,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus>1\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) - 3\nend"
      },
      {
        "id": 808,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 1\nend"
      }
    ]
  },
  {
    "id": 796,
    "text": "empty \nПеред сапёром\nактивный конфликт учителя с TL-3\nподдержать учителя",
    "answers": [
      {
        "id": 804,
        "text": "– Наверное, проще быть частью команды, чем нести ответственность самому, – с нажимом сказал Орнас дроиду. – Но нам, джедаям, сложно понять, как можно переложить собственную ношу на кого-то ещё.\n   Учитель удовлетворённо хмыкнул, а Десвиар громко рассмеялась:\n– И говорит нам об этом мальчишка, взявший на собственное испытание двух взрослых джедаев.\n   Орнас насупился, но промолчал. TL-3 издал какие-то непереводимые звуки и остановился. Они как раз достигли конца коридора и теперь замерли перед закрытой дверью.",
        "merge": true
      },
      {
        "id": 809,
        "text": "Дальше",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 797,
    "text": "empty\nзалипание в коридоре\nВоздействовать на учителя",
    "answers": [
      {
        "id": 797,
        "text": "– Учитель, – позвал Орнас. – Я должен кое-что рассказать.\n   Магистр Льерсо повернулся к падавану, но совсем не так быстро, как ожидал Орнас. Всё-таки он достаточно хорошо знал наставника и чувствовал, какие слова того растормошат. Его лицо медленно приобретало сосредоточенное выражение. Наконец, острый взгляд остановился на лице юноши.\n– Я чувствую, что вы не собраны, учитель, – прямо сказал Орнас. – Я думаю, вам опасно идти с нами дальше в таком состоянии.\n   Где-то рядом пискнул TL-3, Десс закашлялась.\n– Ты чувствуешь?! – на мгновение в глазах учителя вспыхнуло что-то незнакомое, но он почти сразу успокоился. – Да, ты прав, юный Орнас, ты прав. Впрочем, теперь я буду осмотрительнее. Уверен, моё состояние больше не станет подвергать кого-то опасности. Спасибо.\n   И магистр Льерсо медленно двинулся дальше по коридору. Оставшиеся спутники молча переглянулись и поспешили следом.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 798,
    "text": "empty \nзалипание в коридоре\nВоздействовать на Десс",
    "answers": [
      {
        "id": 798,
        "text": "– Десс, нужно поговорить, – позвал Орнас.\n   Она удивлённо вскинула бровь и подошла ближе к юноше. Учитель нахмурился.\n– Тебе не кажется, что мастер Льерсо стал вести себя странно? – начал издалека Орнас.\n   Десс пожала плечами.\n– Тебе не кажется, что он начал вести себя странно после встречи с тобой?\n– Что ты хочешь сказать?\n– Мне кажется, тебе стоит вести себя с ним как-то по-другому. Как-то, чтобы он оставался собой.\n– А мне кажется, тебе не стоит лезть в чужие отношения, – отрезала Десвиар. – Это невежливо, знаешь ли. И очень грубо говорить старшим, как они должны себя вести.\n   Она смерила Орнаса тяжёлым взглядом и быстро пошла вперёд по коридору, не задумываясь о возможных ловушках. Все поспешили за ней.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 799,
    "text": "empty \nзалипание в коридоре\nзабить",
    "answers": [
      {
        "id": 799,
        "text": "– Ну, так они хотя бы не мешают, – после секундного колебания решил Орнас. – Мы бы и без них справились, верно?\n– Я бы не был в этом так уверен, – донёсся из наушника ответ TL-3. – Мы же не знаем, что она затевает...\n– Хватит об этом.\n   Орнас хотел добавить ещё что-то про доверие, когда ощутил мимолётный, но цепкий взгляд Десвиар. Она что, слышала их? Или случайно повернулась именно сейчас?\n   Дроид неопределённо пискнул, и все продолжили путь.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 800,
    "text": "empty \nПеред сапёром без активного конфликта",
    "answers": [
      {
        "id": 800,
        "text": "\n   Вскоре коридор закончился, и они вышли к одинокой двери. ",
        "merge": true
      },
      {
        "id": 809,
        "text": "выбор помощника",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 801,
    "text": "empty \nкоридор с активным конфликтом\nподдержка Десс",
    "answers": [
      {
        "id": 801,
        "text": "– Давайте оставим прошлое в прошлом и сосредоточимся на настоящем, – громко сказал Орнас, втискиваясь между спорщиками. – Закроем этот вопрос здесь и сейчас. TL-3, пообещай, что не станешь вновь говорить об этом.\n   Он вернулся на несколько шагов назад и оказался плечом к плечу с Десвиар. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ты правда ей доверяешь? – огорчился TL-3. – Как же ты будешь... Хорошо, хорошо, раз моё мнение никого не интересует, этот риск теперь на вашей ответственности.\n   Орнас мягко подтолкнул Десвиар вперёд и двинулся следом.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 802,
    "text": "empty\nкоридор с активным конфликтом\nподдержка дроида",
    "answers": [
      {
        "id": 802,
        "text": "– Нет смысла рассуждать о пользе на словах, – громко сказал Орнас, втискиваясь между спорщиками. – TL-3 умеет много такого, что нам не по силам. И мне прямо сейчас очень пригодятся его сканеры, чтобы не проглядеть какую-нибудь ловушку.\n   Он развернулся к Десвиар, заслоняя от неё дроида, и почувствовал, как она напряглась. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ну... – растерялась Десс.\n– Просто не стоит больше об этом, – Орнас попытался примирительно похлопать девушку по плечу, но она лишь фыркнула и пошла вперёд. Остальные направились следом.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 803,
    "text": "empty\nосмотр сапёра на 8 линии",
    "answers": [
      {
        "id": 809,
        "text": "   Почти пусто. Только одинокая колонна у самого входа. Странно...\n   Орнас медленно наступил одной ногой внутрь и тут же стремительно отскочил назад: пол вздыбился, а потолок начал рушиться. Каменные глыбы врезались с оглушительным грохотом и подняли облако пыли.\n   Когда Орнас перевёл дух, всё в зале вновь стало неподвижным. К удивлению спутников, помещение осталось относительно целым: только потолок заметно опустился и застыл примерно на высоте человеческого роста. На месте плиты, куда угораздило наступить Орнаса, возникла массивная колонна, точно такая же, как и первая.\n– Ловушка... – развёл руками Орнас. – Кто-нибудь поможет с этим разобраться?\n   Все молчали. Кажется, просьба о помощи должна быть более адресной...",
        "merge": true
      },
      {
        "id": 813,
        "text": "Попросить учителя",
        "lua_do": "function lua_do()\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nUpLine8HelpSup = 1\nend"
      },
      {
        "id": 814,
        "text": "Попросить Десс",
        "lua_do": "function lua_do()\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\n\nUpLine8HelpSup = 2\nend"
      },
      {
        "id": 815,
        "text": "Попросить TL-3",
        "lua_do": "function lua_do()\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8HelpSup = 3\n\nend"
      }
    ]
  },
  {
    "id": 804,
    "text": "empty\nкоридор с активным конфликтом\nдроид против учителя\nПоддержать учителя",
    "answers": [
      {
        "id": 804,
        "text": "– Наверное, проще быть частью команды, чем нести ответственность самому, – с нажимом сказал Орнас дроиду. – Но нам, джедаям, сложно понять, как можно переложить собственную ношу на кого-то ещё.\n   Учитель удовлетворённо хмыкнул, а Десвиар громко рассмеялась:\n– И говорит нам об этом мальчишка, взявший на собственное испытание двух взрослых джедаев.\n   Орнас насупился, но промолчал. TL-3 издал какие-то непереводимые звуки и покатился вперёд, остальные поспешили следом.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 805,
    "text": "empty \nкоридор с активным конфликтом\nдроид против учителя\nПоддержать дроида",
    "answers": [
      {
        "id": 805,
        "text": "– Хотел бы я знать, что такое слаженная работа в большой команде, – произнёс Орнас, улучив паузу в чужом споре. – Интересно: какого это – быть частью чего-то большего. И в храме, и тем более раньше я был изгоем. Не чувствовал поддержки, не видел в людях того света, о котором читал в Кодексе...\n– Мы уже говорили об этом в тот день, когда я согласился обучать тебя, – холодно проговорил учитель. – Меньше эмоций, падаван.\n   Наступившую тишину нарушило позвякивание – это TL-3 покатился вперёд. Он на мгновение задержался перед Орнасом и подмигнул ему индикатором, затем скрылся за поворотом. Все, не переговариваясь, поспешили следом.",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 806,
    "text": "empty \nкоридор с активным конфликтом\nдроид против учителя\nзабить",
    "answers": [
      {
        "id": 806,
        "text": "– Тихо! – вдруг вскрикнул Орнас и поднял руку – Слышали?\n   Все тут же замерли и смолкли. Учитель прикрыл ладонями лицо. Рука Десс легла на рукоять светового меча.\n– Я ничего не чувствую, – наконец подал голос магистр Льерсо. – Что ты слышал?\n– Какой-то шум, – соврал Орнас. – Не знаю, наверное просто показалось.\n   И он снова двинулся вперёд. Все последовали за ним. Более собранные, в полной тишине. Уловка сработала, но надолго ли хватит её эффекта?",
        "merge": true
      },
      {
        "id": 800,
        "text": "Дальше",
        "run": [
          800
        ]
      }
    ]
  },
  {
    "id": 807,
    "text": "empty \nПеред сапёром\nактивный конфликт учителя с TL-3\nподдержать TL-3",
    "answers": [
      {
        "id": 805,
        "text": "– Хотел бы я знать, что такое слаженная работа в большой команде, – произнёс Орнас, когда все остановились перед дверью в конце коридора. – Интересно, какого это – быть частью чего-то большего. И в храме, и тем более раньше я был изгоем. Не чувствовал поддержки, не видел в людях того света, о котором читал в Кодексе...\n– Мы уже говорили об этом в тот день, когда я согласился обучать тебя, – холодно проговорил учитель. – Меньше эмоций, падаван.\n   Наступившую тишину нарушило позвякивание – это TL-3 сделал круг вокруг Орнаса, подмигнул ему индикатором и замер перед сомкнутыми створками двери. Все, не переговариваясь, уставились на неё.",
        "merge": true
      },
      {
        "id": 809,
        "text": "Дальше",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 808,
    "text": "empty\nПеред сапёром\nактивный конфликт учителя с TL-3\nзабить",
    "answers": [
      {
        "id": 808,
        "text": "– Мы пришли! – громко объявил Орнас, и спорщики обернулись к нему.\n   Они как раз достигли конца коридора и теперь остановились перед закрытой дверью. Орнас воспользовался общим замешательством и втиснулся между учителем и TL-3. Десс хихикнула и встала рядом.",
        "merge": true
      },
      {
        "id": 809,
        "text": "Дальше",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 809,
    "text": "empty\nОписание сапёра и Выбор помощника для сапёра",
    "answers": [
      {
        "id": 809,
        "text": "\n   Возле элегантной арки стерильная белизна стен нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.\n– Чувствую, там ловушка, – проронила Десвиар, заглядывая через плечо Орнаса внутрь. – Отправим кое-кого очень полезного проверить?\n   Оставив реплику Десс без внимания, Орнас первым заглянул внутрь. ",
        "merge": true
      },
      {
        "id": 803,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 810,
    "text": "empty\nПеред сапёром\nактивный конфликт Десс с TL-3\nподдержать Десс",
    "answers": [
      {
        "id": 810,
        "text": "– Давайте оставим прошлое в прошлом и сосредоточимся на настоящем, – громко сказал Орнас, втискиваясь между спорщиками. – Закроем этот вопрос здесь и сейчас. TL-3, пообещай, что не станешь вновь говорить об этом.\n   Они как раз достигли конца коридора и остановились перед дверью. Орнас встал рядом с Десвиар и развернулся к дроиду. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ты правда ей доверяешь? – огорчился TL-3. – Как же ты будешь... Хорошо, хорошо, раз моё мнение никого не интересует, этот риск теперь на вашей ответственности.\n   Орнас кивнул.",
        "merge": true
      },
      {
        "id": 809,
        "text": "Дальше",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 811,
    "text": "empty \nПеред сапёром\nактивный конфликт Десс с TL-3\nподдержать дроида",
    "answers": [
      {
        "id": 811,
        "text": "– Нет смысла рассуждать о пользе на словах, – громко сказал Орнас, втискиваясь между спорщиками. – TL-3 умеет много такого, что нам не по силам. И нам в любой момент могут  пригодиться его сканеры, чтобы не проглядеть какую-нибудь ловушку.\n   Они как раз достигли конца коридора и остановились перед закрытой дверью. Орнас встал рядом с дроидом и развернулся к Десвиар. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ну... – растерялась Десс.\n– Просто не стоит больше об этом, – Орнас попытался примирительно похлопать девушку по плечу, но она лишь фыркнула и отошла в сторону. Орнас пожал плечами.",
        "merge": true
      },
      {
        "id": 809,
        "text": "Дальше",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 812,
    "text": "empty\nПеред сапёром\nактивный конфликт Десс с TL-3\nзабить",
    "answers": [
      {
        "id": 812,
        "text": "– Мы пришли! – громко объявил Орнас, и спорщики обернулись к нему.\n   Они как раз достигли конца коридора и теперь остановились перед закрытой дверью. Орнас воспользовался общим замешательством и втиснулся между Десвиар и TL-3. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.",
        "merge": true
      },
      {
        "id": 809,
        "text": "К выбору помощника на сапёре",
        "run": [
          809
        ]
      }
    ]
  },
  {
    "id": 813,
    "text": "empty \nПодводка к саперу\nПомощник – учитель",
    "answers": [
      {
        "id": 813,
        "text": "– Это твоё испытание, – спокойно заметил магистр Льерсо. – Прояви себя.\n   Впрочем, его губы тронула лёгкая улыбка: должно быть именно такого поведения он и ждал от подопечного.\n   Орнас снова заглянул в темноту, на этот раз более внимательно. Весь пол в маленьком зале был разделён на одинаковые шестигранники. Но присмотревшись, юноша заметил, что плитка, соприкасающаяся с обеими колоннами, оказалась выше других. Должно быть, старый гравитационный механизм, активирующий ловушки, действовал и на соседние участки, из-за чего те и приподнялись.\n   По крайней мере, с помощью этого эффекта можно попробовать обойти ловушки, если такие ещё остались в зале. Перепрыгнуть их при таком низком потолке всё равно не выйдет, так что стоит тщательно выбирать маршрут.\n   Орнас осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.",
        "merge": true
      },
      {
        "id": 478,
        "text": "инициализация функций сапёра",
        "run": [
          478
        ]
      },
      {
        "id": 478,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 814,
    "text": "empty \nПодводка к саперу\nПомощник – Десс",
    "answers": [
      {
        "id": 813,
        "text": "– Ты же хотел всё сделать сам, помнишь? – усмехнулась Десвиар. – Но раз уж ты просишь, я буду стоять в дверях и страховать тебя.\n   К удивлению Орнаса, последнюю фразу она произнесла совершенно серьёзно. Наверное девушке польстило, что он обратился именно к ней.\n   Орнас снова заглянул в темноту, на этот раз более внимательно. Весь пол в маленьком зале был разделён на одинаковые шестигранники. Но присмотревшись, юноша заметил, что плитка, соприкасающаяся с обеими колоннами, оказалась выше других. Должно быть, старый гравитационный механизм, активирующий ловушки, действовал и на соседние участки, из-за чего те и приподнялись.\n   По крайней мере, с помощью этого эффекта можно попробовать обойти ловушки, если такие ещё остались в зале. Перепрыгнуть их при таком низком потолке всё равно не выйдет, так что стоит тщательно выбирать маршрут.\n   Орнас осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.\n– Удачи, – подмигнула Десс и подпихнула его в спину.",
        "merge": true
      },
      {
        "id": 478,
        "text": "инициализация функций сапёра",
        "run": [
          478
        ]
      },
      {
        "id": 478,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 815,
    "text": "empty \nПодводка к саперу\nПомощник – дроид",
    "answers": [
      {
        "id": 813,
        "text": "– Если честно, – тихо пискнул TL-3, подъехав почти в упор к Орнасу, – мои сканеры здесь не помогут: слишком фонит...\n   Юноша лишь сдержанно кивнул – ему не хотелось давить на больное место доверившегося ему дроида. Значит нужно всего лишь сделать всё самому.\n   Он снова заглянул в темноту, на этот раз более внимательно. Весь пол в маленьком зале был разделён на одинаковые шестигранники. Но присмотревшись, юноша заметил, что плитка, соприкасающаяся с обеими колоннами, оказалась выше других. Должно быть, старый гравитационный механизм, активирующий ловушки, действовал и на соседние участки, из-за чего те и приподнялись.\n   По крайней мере, с помощью этого эффекта можно попробовать обойти ловушки, если такие ещё остались в зале. Перепрыгнуть их при таком низком потолке всё равно не выйдет, так что стоит тщательно выбирать маршрут.\n   Орнас осторожно наступил на ближайший фрагмент пола. Ничего не произошло. Юноша с сожалением заметил, что шестиугольник шатается с довольно большой амплитудой. В таких условиях не удастся определять на вид высоту соседних плит, оценивать её придется только опытным путём.",
        "merge": true
      },
      {
        "id": 478,
        "text": "инициализация функций сапёра",
        "run": [
          478
        ]
      },
      {
        "id": 478,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 816,
    "text": "empty \nуспех в сапёре\nпомогал учитель\nпроверка, разрешён ли конфликт\nвыбор действия или переход к итогам",
    "answers": [
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – спутники как раз приближались к выходу из зала с ловушками. Учитель сдержанно руководил перемещением то и дело переспрашивающий Десс, очевидно не утруждавшей себя наблюдением за  маршрутом Орнаса.\n   Наконец все выбрались и смогли как следует осмотреться.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  2 --условие: конфликт Десс и TL-3 разрешён\nend",
        "merge": true
      },
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – но никто через зал с ловушками за ним не прошёл. Он позвал – но никто не отозвался. Лишь спустя время с той стороны зала показался магистр Льерсо и помахал рукой, и Орнас, проклиная всё на свете, вернулся.\n   Десвиар самозабвенно препиралась с TL-3. На упрёки в своей бесполезности он отвечал туманными фразами о прошлом, которые почему-то только сильнее выводили девушку из себя. Казалось, если не вмешаться сейчас, всё очень быстро выйдет из-под контроля. Учитель выжидающе смотрел на падавана.\n   Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  0 --условие: конфликт Десс с TL-3 не разрешён, возник впервые\nend",
        "merge": true
      },
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – но никто через зал с ловушками за ним не прошёл. Он позвал – но никто не отозвался. Лишь спустя время с той стороны зала показался магистр Льерсо и помахал рукой, и Орнас, проклиная всё на свете, вернулся.\n   Да, как он и опасался: TL-3 снова препирался с Десвиар. Орнас тяжело вздохнул: стоит ли поддержать одного из них, рискуя испортить отношение с другим, или опять попытаться только отвлечь прямо сейчас?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  1 --условие: конфликт Десс с TL-3 не разрешён, повторный\nend",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  2 --условие: конфликт Десс и TL-3 разрешён\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL < 2 --условие: конфликт Десс и TL-3 не разрешён\nend",
        "id": 522,
        "text": "Поддержать Десс",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL < 2 --условие: конфликт Десс и TL-3 не разрешён\nend",
        "id": 531,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL < 2 --условие: конфликт Десс и TL-3 не разрешён\nend",
        "id": 532,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 1\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 817,
    "text": "empty\nвозврат из сапёра линия 8",
    "answers": [
      {
        "id": 818,
        "text": "Идти рядом с учителем",
        "lua_do": "function lua_do()\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\n\nend"
      },
      {
        "id": 819,
        "text": "Идти рядом с Десвиар",
        "lua_do": "function lua_do()\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\n\nend"
      },
      {
        "id": 820,
        "text": "Идти рядом с TL-3",
        "lua_do": "function lua_do()\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nend"
      },
      {
        "id": 817,
        "text": "– Ладно, давайте вернёмся и поищем другой путь, –  сказал наконец Орнас. – Вариантов у нас теперь немного.\n   В наступившем молчании раздался писк TL-3. Он рассказал, что прямо у входа за лестницей осталась шахта вентиляции, через которую можно пройти дальше. Все согласились и без лишних слов отправились назад по коридору.\n   Орнас чувствовал вину перед спутниками: если бы ему удалось пройти зал без ошибок, всем не пришлось бы терять столько времени. Он украдкой смотрел то на одного, то на другого, но никто не встречался с ним взглядом, будто нарочно избегая. От таких подозрений становилось не по себе.",
        "lua_if": "function lua_if()\nsapperFail = sapperFail or 0\nreturn sapperFail == 1\nend",
        "merge": true
      },
      {
        "id": 817,
        "text": "– Давайте всё-таки вернёмся и поищем другой путь, –  сказал наконец Орнас. – Может там всё будет  не так запутанно...\n   В наступившем молчании раздался писк TL-3. Он рассказал, что прямо у входа за лестницей осталась шахта вентиляции, через которую можно пройти дальше. Все согласились и без лишних слов отправились назад по коридору.\n   Орнас чувствовал вину перед спутниками: если бы ему удалось пройти зал без ошибок, всем не пришлось бы терять столько времени. Он украдкой смотрел то на одного, то на другого, но никто не встречался с ним взглядом, будто нарочно избегая. От таких подозрений становилось не по себе.",
        "lua_if": "function lua_if()\nsapperFail = sapperFail or 0\nreturn sapperFail == 1\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 818,
    "text": "empty \nпосле фейла сапёра\nвыбран учитель",
    "answers": [
      {
        "id": 790,
        "text": "– Ошибки случаются, – философски заметил Магистр Льерсо, когда Орнас достаточно приблизился. – Подумай, какой опыт ты можешь из этого вынести.\n   Дальше шли молча, пока не добрались до начала коридора. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Подозрительно, – подтвердил мысли Орнаса учитель.\n– Пусть TL-3 проверит?\n   Десвиар фыркнула, а астромеханик, едва дождавшись, пока отодвинут в сторону решётку, скрылся в темноте шахты. Впрочем, вернулся он довольно скоро и без лишних подробностей объяснил, что путь теперь безопасен.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  2 --условие: конфликт Десс и TL-3 разрешён\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "– Ошибки случаются, – философски заметил Магистр Льерсо, когда Орнас достаточно приблизился. – Подумай, какой опыт ты можешь из этого вынести.\n   Дальше шли молча, пока не добрались до начала коридора. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Подозрительно, – подтвердил мысли Орнаса учитель.\n– Пусть TL-3 проверит?\n   Только теперь они заметили, что астромех препирался с Десвиар. На упрёки в своей бесполезности он отвечал туманными фразами о прошлом, которые почему-то только сильнее выводили девушку из себя. Казалось, если не вмешаться сейчас, всё очень быстро выйдет из-под контроля.\n   Орнас понимал, что явная поддержка одного из спутников сильно испортит отношение к нему второго, но попытка усидеть на обоих стульях могла лишь отложить спор, а не разрешить его.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL == 0 --условие: конфликт Десс и TL-3 неразрешён, начался впервые\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "– Ошибки случаются, – философски заметил Магистр Льерсо, когда Орнас достаточно приблизился. – Подумай, какой опыт ты можешь из этого вынести.\n   Дальше шли молча, пока не добрались до начала коридора. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Подозрительно, – подтвердил мысли Орнаса учитель.\n– Пусть TL-3 проверит?\n   Только теперь они заметили, что астромех снова препирался с Десвиар. Орнас тяжело вздохнул: стоит ли поддержать одного из них, рискуя испортить отношение с другим, или опять попытаться только отвлечь прямо сейчас?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL == 1 --условие: конфликт Десс и TL-3 неразрешён, но уже был\nend",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL ==  2 --условие: конфликт Десс и TL-3 разрешён\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL <  2 --условие: конфликт Десс и TL-3 неразрешён\nend",
        "id": 822,
        "text": "Поддержать Десс",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) <plus> 2\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL <  2 --условие: конфликт Десс и TL-3 неразрешён\nend",
        "id": 823,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\nreturn\nUpLine8Conflicts.Dess_TL <  2 --условие: конфликт Десс и TL-3 неразрешён\nend",
        "id": 824,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Dess_TL = 1\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 819,
    "text": "empty \nпосле фейла сапёра\nвыбрана Десс",
    "answers": [
      {
        "id": 790,
        "text": "– Я не доверяю ему, – пожаловалась Десс, как только Орнас оказался рядом. – Сейчас он приведёт нас туда, затем залезет сам, чтобы \"проверить\". А что он не самом деле сделает, чтобы подставить нас? Может быть пустит газ? Или подстроит взрыв? Или...\n   Орнас жестом остановил её. Они пришли. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Можешь сама всё осмотреть, – кивнул Орнас на тёмную дыру, после того как снял и отодвинул в сторону решётку.\n   От такой перспективы Десс решительно отказалась и на разведку всё-таки отправился TL-3. Он вернулся довольно быстро и сообщил, что путь безопасен.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 2 --условие: конфликт учителя и TL-3 разрешён\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "– Я не доверяю ему, – пожаловалась Десс, как только Орнас оказался рядом. – Сейчас он приведёт нас туда, затем залезет сам, чтобы \"проверить\". А что он не самом деле сделает, чтобы подставить нас? Может быть пустит газ? Или подстроит взрыв? Или...\n   Орнас жестом остановил её. Они пришли. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n   Но долго размышлять ему не пришлось: беседа магистра и астромеханика незаметно перешла в спор. Орнас не понимал, почему учитель так яростно отстаивал идею, что полагаться можно только на самого себя, доводы дроида о преимуществе командной работы казались ему более чем убедительными.\n   Орнас чувствовал, что нужно срочно это остановить, пока конфликт не разгорится во что-то более серьёзное. Но что лучше: явная поддержка одного из спутников, которая сильно испортит отношение к Орнасу второго, или попытка усидеть на обоих стульях, что могло лишь отложить спор, а не разрешить его?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 0 --условие: конфликт учителя и TL-3 неразрешён, но возник впервые\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "– Я не доверяю ему, – пожаловалась Десс, как только Орнас оказался рядом. – Сейчас он приведёт нас туда, затем залезет сам, чтобы \"проверить\". А что он не самом деле сделает, чтобы подставить нас? Может быть пустит газ? Или подстроит взрыв? Или...\n   Орнас жестом остановил её. Они пришли. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n   Но долго размышлять ему не пришлось. Магистр Льерсо и TL-3, оставшись на время друг с другом, снова спорили. Орнас тяжело вздохнул: стоит ли поддержать одного из них, рискуя испортить отношение с другим, или опять попытаться только отвлечь прямо сейчас?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 1 --условие: конфликт учителя и TL-3 неразрешён, но уже был\nend",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 2 --условие: конфликт учителя и TL-3 разрешён\nend"
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: конфликт учителя и TL-3 неразрешён\nend",
        "id": 825,
        "text": "Поддержать учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: конфликт учителя и TL-3 неразрешён\nend",
        "id": 826,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) - 3\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: конфликт учителя и TL-3 неразрешён\nend",
        "id": 827,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 1\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 820,
    "text": "empty \nпосле фейла сапёра\nвыбран TL-3",
    "answers": [
      {
        "id": 790,
        "text": "– Не переживай, – сказал TL-3, когда Орнас поравнялся с ним. – Я с самого начала хотел предложить идти через вентиляцию. Уверен, так будет только лучше.\n   Когда все остановились в начале коридора, Орнас немного успокоился. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Высокий риск неопределённости и неблагоприятных последствий, – сформулировал опасения Орнаса TL-3, пока тот снимал решётку. – Нужно проверить.\n   Не дожидаясь ответа, астромех укатился внутрь. Орнас огляделся. Учитель и Десвиар хмуро глядели вслед дроиду. К счастью, вернулся он довольно скоро и без лишних подробностей объяснил, что путь безопасен.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 2 --условие: залипание разрешено\nend",
        "merge": true
      },
      {
        "id": 790,
        "text": "– Не переживай, – сказал TL-3, когда Орнас поравнялся с ним. – Я с самого начала хотел предложить идти через вентиляцию. Уверен, так будет только лучше.\n   Когда все остановились в начале коридора, Орнас немного успокоился. Там за панелью обшивки с незаметной вмятиной на самом деле скрывалась шахта вентиляции. Кому и зачем потребовалось так неумело прятать её здесь?\n– Высокий риск неопределённости и неблагоприятных последствий, – сформулировал опасения Орнаса TL-3, пока тот снимал решётку. – Нужно проверить.\n   Не дожидаясь ответа, астромех укатился внутрь. Орнас огляделся. Учитель не сводил глаз с Десвиар, тихо рассказававшей что-то прямо ему на ухо. И этот взгляд встревожил Орнаса. ",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "merge": true
      },
      {
        "id": 820,
        "text": "Снова...",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 1 --условие: залипание не разрешено, залипание уже было\nend",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 2 --условие: залипание разрешено\nend"
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "id": 828,
        "text": "Воздействовать на учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "id": 829,
        "text": "Воздействовать на Десс",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 1\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "id": 830,
        "text": "Не обращать внимание",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 1\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 821,
    "text": "empty \nПосле сапёра\nподведение итогов\n\nвсе конфликты разрешены: все продолжают вместе\n\nнеразрешённые конфликты:\n—залипание: учитель сливается об нк\n—дроид/учитель: TL-3 исчезает за конторкой нк\nдроид/десс: дроид \"ломается\", как только учитель отошёл от них с Десс\n\nотношения:\n— никто не ушёл в минус: все ок\n— учитель ушёл в минус: недоверие учителя, не расскажет правду\n— Десс ушла в минус: недоверие Десс, флаг предательства\n— TL-3 ушёл в минус: недоверие дроида, не даёт выбор после компутинга\n\nособые сочетания:\n—учитель слился, TL-3 слился, нет доверия Десс – предаёт в момент атаки нк\n— учитель слился, TL-3 не слился, нет доверия Десс – Десс не помогает в бою и куда-то исчезает",
    "answers": [
      {
        "id": 821,
        "text": "   Они оказались в просторном зале, больше похожем на современную лабораторию, чем на комнату в древнем оккультном сооружении. На белые стены и блестящий идеально чистый пол было больно смотреть в ярком освещении мощных ламп. Орнас отошёл на несколько шагов от стены и заозирался по сторонам.\n   Визуально помещение было разбито на несколько зон. Вся ближайшая часть комнаты была заставлена стеллажами, на которых громоздились всевозможные ящики, контейнеры и сосуды.\n   В центре зала за небольшой конторкой суетился протокольный дроид неизвестной Орнасу модели. Казалось, он не обратил никакого внимания на столь неожиданный визит и просто продолжал ковыряться за приборной панелью.\n– Нужно добраться до того терминала, – неожиданно твёрдо заявил TL-3. – Всё остальное – мусор, не будем терять время.\n   Но магистр Льерсо, некоторое время сосредоточенно озиравшийся по сторонам, уверенным шагом направился в правую часть помещения, а Десвиар без раздумий – в левую.",
        "merge": true
      },
      {
        "id": 612,
        "text": "Пойти за учителем"
      },
      {
        "id": 838,
        "text": "Пойти за Десвиар"
      },
      {
        "id": 859,
        "text": "Пойти за TL-3"
      },
      {
        "lua_if": "function lua_if()\n\nUpLine8LlersoRelation = UpLine8LlersoRelation or 0\n\nUpLine8DessRelation =\nUpLine8DessRelation or 0\n\nUpLine8DroidRelation =\nUpLine8DroidRelation or 0\n\n\nUpLineConflictsLlerso_Dess = UpLineConflictsLlerso_Dess or 1\n\nUpLineConflictsLlerso_TL = UpLineConflictsLlerso_TL or 1\n\nUpLineConflictsDess_TL = UpLineConflictsDess_TL or 1\n\nreturn UpLineConflictsLlerso_Dess == 2 and UpLineConflictsLlerso_TL == 2 and UpLineConflictsDess_TL == 2 and UpLine8LlersoRelation > 0 and UpLine8DessRelation > 0 and UpLine8DroidRelation > 0\n\nend",
        "super_calculate": false,
        "id": 821,
        "calculate": true,
        "lua_do": "function lua_do()\nnewAchieve(\"diplomat5\",1,1)\nend",
        "text": "Выдать достижение"
      }
    ]
  },
  {
    "id": 822,
    "text": "empty \nпосле фейла сапёра\nподдержать Десс",
    "answers": [
      {
        "id": 822,
        "text": "– Давайте оставим прошлое в прошлом и сосредоточимся на настоящем, – громко сказал Орнас, втискиваясь между спорщиками. – Закроем этот вопрос здесь и сейчас. TL-3, пообещай, что не станешь вновь говорить об этом.\n   Орнас встал рядом с Десвиар и развернулся лицом к дроиду. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ты правда ей доверяешь? – огорчился TL-3. – Как же ты будешь... Хорошо, хорошо, раз моё мнение никого не интересует, этот риск теперь на вашей ответственности. А я просто буду делать то, что умею.\n   Орнас кивнул. TL-3 исчез в темноте шахты, едва сдвинули решётку, закрывающую проход. Он вернулся довольно скоро и без лишних подробностей сообщил, что путь свободен.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 823,
    "text": "empty \nпосле фейла сапёра\nподдержать TL-3",
    "answers": [
      {
        "id": 823,
        "text": "– Нет смысла рассуждать о пользе на словах, – громко сказал Орнас, втискиваясь между спорщиками. – TL-3 умеет много такого, что нам не по силам. И мне прямо сейчас очень пригодятся его сканеры, чтобы проверить, безопасно ли внутри.\n   Он развернулся к Десвиар, заслоняя от неё дроида, и почувствовал, как она напряглась. Учитель с интересом наблюдал за происходящим со стороны и не вмешивался.\n– Ну... – растерялась Десс.\n– Просто не стоит больше об этом, – Орнас попытался примирительно похлопать девушку по плечу, но она лишь фыркнула и отошла в сторону.\n   TL-3 уже крутился у решётки и, как только её сдвинули, исчез в темноте шахты. Он вернулся довольно скоро и без лишних подробностей сообщил, что путь свободен.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 824,
    "text": "empty \nпосле фейла сапёра\nзабить",
    "answers": [
      {
        "id": 824,
        "text": "– Мы пришли! – громко объявил Орнас, привлекая внимание спорящих. – TL-3, ты не мог бы проверить, безопасно ли внутри?\n   Он уже снял решётку и отодвинул её в сторону. Дроид, поколебавшись, всё-таки скрылся внутри. Распалённая Десвиар непонимающе переводила взгляд с оставшегося невозмутимым Магистра Льерсо на Орнаса и обратно.\n   К счастью, TL-3 вернулся довольно быстро и без лишних подробностей объяснил, что путь чист.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 825,
    "text": "empty \nпосле фейла сапёра\nконфликт учителя и TL-3\nподдержать учителя",
    "answers": [
      {
        "id": 825,
        "text": "– Наверное, проще быть частью команды, чем нести ответственность самому, – с нажимом сказал Орнас дроиду. – Но нам, джедаям, сложно понять, как можно переложить собственную ношу на кого-то ещё.\n   Учитель удовлетворённо хмыкнул, а Десвиар громко рассмеялась:\n– И говорит нам об этом мальчишка, взявший на собственное испытание двух взрослых джедаев.\n   Орнас насупился, но промолчал. TL-3 издал какие-то непереводимые звуки и замер перед решёткой вентиляции. Когда её наконец сдвинули в сторону, дроид скрылся внутри, а вернувшись, сообщил всем, что путь безопасен.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 826,
    "text": "empty \nпосле фейла сапёра\nконфликт учителя и TL-3\nподдержать TL-3",
    "answers": [
      {
        "id": 826,
        "text": "– Хотел бы я знать, что такое слаженная работа в большой команде, – произнёс Орнас, когда все остановились перед тупиком рядом с дверью. – Интересно, какого это – быть частью чего-то большего. И в храме, и тем более раньше я был изгоем. Не чувствовал поддержки, не видел в людях того света, о котором читал в Кодексе...\n– Мы уже говорили об этом в тот день, когда я согласился обучать тебя, – холодно проговорил учитель. – Меньше эмоций, падаван.\n   Наступившую тишину нарушило позвякивание – это TL-3 сделал круг вокруг Орнаса, подмигнул ему индикатором и замер перед решёткой вентиляции. Когда её наконец сдвинули в сторону, дроид скрылся внутри, а вернувшись, сообщил всем, что путь безопасен.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 827,
    "text": "empty \nпосле фейла сапёра\nконфликт учителя и TL-3\nзабить",
    "answers": [
      {
        "id": 827,
        "text": "– Мы пришли! – громко объявил Орнас, привлекая внимание спорящих. – TL-3, ты не мог бы проверить, безопасно ли внутри?\n   Он уже снял решётку и отодвинул её в сторону. Дроид, поколебавшись, всё-таки скрылся внутри. Десвиар с любопытством переводила взгляд с оставшегося невозмутимым Магистра Льерсо на Орнаса и обратно.\n   К счастью, TL-3 вернулся довольно быстро и без лишних подробностей объяснил, что путь чист.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 828,
    "text": "empty \nпосле фейла сапёра\nзалипание\nвоздействовать на учителя",
    "answers": [
      {
        "id": 828,
        "text": "– Учитель, – позвал Орнас. – Я должен кое-что рассказать.\n   Магистр Льерсо повернулся к падавану, но совсем не так быстро, как ожидал Орнас. Всё-таки он достаточно хорошо знал наставника и чувствовал, какие слова того растормошат. Его лицо медленно приобретало сосредоточенное выражение. Наконец, острый взгляд остановился на лице юноши.\n– Я чувствую, что вы не собраны, учитель, – прямо сказал Орнас. – Я думаю, вам опасно идти с нами дальше в таком состоянии.\n   Десс закашлялась.\n– Ты чувствуешь?! – на мгновение в глазах учителя вспыхнуло что-то незнакомое, но он почти сразу успокоился. – Да, ты прав, юный Орнас, ты прав. Впрочем, теперь я буду осмотрительнее. Уверен, моё состояние больше не станет подвергать кого-то опасности. Спасибо.\n   Он махнул рукой, и все повернулись. У вентиляции замер TL-3. Дроид зажужжал датчиками, затем без лишних подробностей объяснил, что путь безопасен.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 829,
    "text": "empty \nпосле фейла сапёра\nзалипание\nвоздействовать на Десс",
    "answers": [
      {
        "id": 820,
        "text": "– Десс, нужно поговорить, – позвал Орнас.\n   Она удивлённо вскинула бровь и подошла ближе к юноше. Учитель нахмурился.\n– Тебе не кажется, что мастер Льерсо стал вести себя странно? – начал издалека Орнас.\n   Десс пожала плечами.\n– Тебе не кажется, что он начал вести себя странно после встречи с тобой?\n– Что ты хочешь сказать?\n– Мне кажется, тебе стоит вести себя с ним как-то по-другому. Как-то, чтобы он оставался собой.\n– А мне кажется, тебе не стоит лезть в чужие отношения, – отрезала Десвиар. – Это невежливо, знаешь ли. И очень грубо говорить старшим, как они должны себя вести.\n   Она смерила Орнаса тяжёлым взглядом.\n   Атмосферу разрядил вернувшийся TL-3. Он зажужжал датчиками, затем без лишних подробностей объяснил, что путь безопасен.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 0 --условие: залипание не разрешено, залипания ещё не было\nend",
        "merge": true
      },
      {
        "id": 820,
        "text": "– Мы же уже говорили об этом... – попытался оттащить её от учителя Орнас.\n   Никакой реакции.\n– Десвиар!\n– Я просила называть меня... – Десс демонстративно нахмурила брови и осеклась. – И я уже говорила, что ты можешь сделать со своим мнением об этом.\n   Магистр Льерсо, казалось, только теперь заметил падавана и тряс головой, но его внимание тут же привлёк вернувшийся TL-3. Дроид зажужжал датчиками, затем без лишних подробностей объяснил, что путь безопасен.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 1 --условие: залипание не разрешено, залипание уже было\nend",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 830,
    "text": "empty \nпосле фейла сапёра\nзалипание\nзабить",
    "answers": [
      {
        "id": 830,
        "text": "   Орнас отвернулся. Меньше всего ему сейчас хотелось думать о том, что твориться в голове магистра Льерсо и его старой подруги. Это ведь не влияет на испытание, верно?..\n    К счастью, довольно скоро вернулся TL-3 и без лишних подробностей объяснил, что путь безопасен.",
        "merge": true
      },
      {
        "id": 834,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 831,
    "text": "empty \nуспех в сапёре\nзалипание учителя на Десс\nвоздействовать на учителя",
    "answers": [
      {
        "id": 831,
        "text": "– Учитель, – позвал Орнас. – Я должен кое-что рассказать.\n   Магистр Льерсо повернулся к падавану, но совсем не так быстро, как ожидал Орнас. Всё-таки он достаточно хорошо знал наставника и чувствовал, какие слова того растормошат. Его лицо медленно приобретало сосредоточенное выражение. Наконец, острый взгляд остановился на лице юноши.\n– Я чувствую, что вы не собраны, учитель, – прямо сказал Орнас. – Я думаю, вам опасно идти с нами дальше в таком состоянии.\n   Десс закашлялась.\n– Ты чувствуешь?! – на мгновение в глазах учителя вспыхнуло что-то незнакомое, но он почти сразу успокоился. – Да, ты прав, юный Орнас, ты прав. Впрочем, теперь я буду осмотрительнее. Уверен, моё состояние больше не станет подвергать кого-то опасности. Спасибо.\n– Путь свободен, нужно идти, – Орнас первым развернулся и направился к двери.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.\n",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 832,
    "text": "empty \nуспех в сапёре\nзалипание учителя на Десс\nвоздействовать на Десс",
    "answers": [
      {
        "id": 820,
        "text": "– Десс, нужно поговорить, – позвал Орнас.\n   Она удивлённо вскинула бровь и подошла ближе к юноше. Учитель нахмурился.\n– Тебе не кажется, что мастер Льерсо стал вести себя странно? – начал издалека Орнас.\n   Десс пожала плечами.\n– Тебе не кажется, что он начал вести себя странно после встречи с тобой?\n– Что ты хочешь сказать?\n– Мне кажется, тебе стоит вести себя с ним как-то по-другому. Как-то, чтобы он оставался собой.\n– А мне кажется, тебе не стоит лезть в чужие отношения, – отрезала Десвиар. – Это невежливо, знаешь ли. И очень грубо говорить старшим, как они должны себя вести.\n   Она смерила Орнаса тяжёлым взглядом.\n– Нужно идти, путь свободен...\n   Он развернулся к двери. Шорохи и возня за спиной подсказывали, что Десвиар с учителем наконец-то направились за ним. К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 0 --условие: залипание не разрешено, залипания ещё не было\nend",
        "merge": true
      },
      {
        "id": 820,
        "text": "– Мы же уже говорили об этом... – попытался оттащить Десс от учителя Орнас.\n   Никакой реакции.\n– Десвиар!\n– Я просила называть меня... – она демонстративно нахмурила брови и осеклась. – И я уже говорила, что ты можешь сделать со своим мнением об этом.\n   Магистр Льерсо, казалось, только теперь заметил падавана и тряс головой.\n– Нужно идти, путь свободен, – бросил Орнас и развернулся к двери. Шорохи и возня за спиной подсказывали, что спутники наконец-то направились за ним. К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 1 --условие: залипание не разрешено, залипание уже было\nend",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 833,
    "text": "empty \nуспех в сапёре\nзалипание учителя на Десс\nзабить",
    "answers": [
      {
        "id": 833,
        "text": "   Орнас отвернулся. Меньше всего ему сейчас хотелось думать о том, что твориться в голове магистра Льерсо и его старой подруги. Это ведь не влияет на испытание, верно?..\n– Путь свободен, нужно идти, – громко объявил он, возвращаясь к двери.\n   В конце концов, даже если эти двое останутся здесь, они с TL-3 смогут справиться с оставшимися трудностями сами. Главное...\n   Шорох и возня за спиной заставили Орнаса обернуться – учитель уже стоял рядом, туманным взглядом смотря через дверь в темноту зала. С недовольным видом подошла Десвиар, и TL-3 тут же выскочил в зал с ловушками.\n   К счастью, пройти безопасным маршрутом снова оказалось не трудно. Попав в новое помещение, все заозирались по сторонам.",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 834,
    "text": "   Спутники по очереди нырнули в тревожную темноту шахты. Орнас полз на четвереньках сразу за TL-3. Позади ворчала о чём-то Десвиар, а Магистр Льерсо двигался последним.\n   Наконец переход закончился. Дроид отъехал чуть в сторону, чтобы Орнас смог снять преграждающую их путь решётку, и все по очереди высыпались в ярко освещённый зал.",
    "answers": [
      {
        "id": 821,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 835,
    "text": "empty \nуспех в сапёре\nпомогал TL-3\nпроверка, разрешён ли конфликт\nвыбор действия или переход к итогам",
    "answers": [
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – спутники как раз приближались к выходу из зала с ловушками. TL-3 скрупулёзно руководил перемещением остальных через зал.\n   Наконец все выбрались и смогли как следует осмотреться.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 2 --условие: залипание разрешено\nend",
        "merge": true
      },
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – но никто через зал с ловушками за ним не прошёл. Он позвал – но никто не отозвался. Лишь спустя время с той стороны зала показался TL-3 и призывно запищал. Орнас, проклиная всё на свете, вернулся.\n   Магистр Льерсо стоял, прислонившись к стене, и не сводил глаз с Десвиар, тихо рассказававшей что-то прямо ему на ухо. И этот взгляд встревожил Орнаса.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 0 --условие: залипание не разрешено, впервые\nend",
        "merge": true
      },
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – но никто через зал с ловушками за ним не прошёл. Он позвал – но никто не отозвался. Лишь спустя время с той стороны зала показался TL-3 и призывно запищал. Орнас, проклиная всё на свете, вернулся.\n   Магистр Льерсо стоял, прислонившись к стене, и не сводил глаз с Десвиар, тихо рассказававшей что-то прямо ему на ухо. И этот взгляд встревожил Орнаса. Снова...",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn  UpLine8Conflicts.Llerso_Dess == 1 --условие: залипание не разрешено, не впервые\nend",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn UpLine8Conflicts.Llerso_Dess == 2 --условие: залипание разрешено\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend",
        "text": "Воздействовать на учителя",
        "id": 831,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 1\n\nUpLine8DessRelation = (UpLine8DessRelation or 0) - 3\nend",
        "text": "Воздействовать на Десс",
        "id": 832,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn UpLine8Conflicts.Llerso_Dess < 2 --условие: залипание не разрешено\nend",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_Dess = 1\n\nend",
        "text": "Привлечь внимание",
        "id": 833,
        "merge": false
      }
    ]
  },
  {
    "id": 836,
    "text": "empty \nуспех в сапёре\nпомогала Десс\nпроверка, разрешён ли конфликт\nвыбор действия или переход к итогам",
    "answers": [
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – спутники как раз приближались к выходу из зала с ловушками. Десс, почёсывая затылок, руководила перемещением остальных через зал, то и дело путаясь и на ходу меняя инструкции.\n   Наконец все выбрались и смогли как следует осмотреться.",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 2 --условие: конфликт учителя и TL-3 разрешён\nend",
        "merge": true
      },
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – но никто через зал с ловушками за ним не прошёл. Он позвал – но никто не отозвался. Лишь спустя время с той стороны зала показалась довольная Десвиар и помахала рукой. Орнас, проклиная всё на свете, вернулся.\n   Там, видимо начинавшийся безобидной беседой, теперь кипел жаркий спор. Орнас не понимал, почему учитель так яростно отстаивал идею, что полагаться можно только на самого себя, доводы TL-3 о преимуществе командной работы казались ему более чем убедительными. Десс откровенно наслаждалась зрелищем и не спешила вмешиваться.\n   Орнас чувствовал, что нужно срочно это остановить, пока конфликт не разгорится во что-то более серьёзное. Но что лучше: явная поддержка одного из спутников, которая сильно испортит отношение к Орнасу второго, или попытка усидеть на обоих стульях, что могло лишь отложить спор, а не разрешить его?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 0 --условие: условие: конфликт учителя и TL-3 не разрешён, возник впервые\nend",
        "merge": true
      },
      {
        "id": 816,
        "text": "Орнас выдохнул и нетерпеливо обернулся – но никто через зал с ловушками за ним не прошёл. Он позвал – но никто не отозвался. Лишь спустя время с той стороны зала показалась довольная Десвиар и помахала рукой. Орнас, проклиная всё на свете, вернулся.\n   Ну конечно! Магистр Льерсо и TL-3, оставшись на время друг с другом, снова спорили. Орнас тяжело вздохнул: стоит ли поддержать одного из них, рискуя испортить отношение с другим, или опять попытаться только отвлечь прямо сейчас?",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 1 --условие: условие: конфликт учителя и TL-3 не разрешён, возник повторно\nend",
        "merge": true
      },
      {
        "id": 821,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL == 2 --условие: помогала Десс, конфликт учителя и TL-3 разрешён\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: помогала Десс, конфликт учителя и TL-3 не разрешён\nend",
        "id": 533,
        "text": "Поддержать учителя",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) - 3\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) <plus> 2\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: помогала Десс, конфликт учителя и TL-3 не разрешён\nend",
        "id": 534,
        "text": "Поддержать TL-3",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 2\n\nUpLine8DroidRelation = (UpLine8DroidRelation or 0) <plus> 2\n\nUpLine8LlersoRelation = (UpLine8LlersoRelation or 0) - 3\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nreturn\nUpLine8Conflicts.Llerso_TL < 2 --условие: помогала Десс, конфликт учителя и TL-3 не разрешён\nend",
        "id": 793,
        "text": "Не занимать ничью сторону",
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\nUpLine8Conflicts.Llerso_TL = 1\nend",
        "merge": false
      }
    ]
  },
  {
    "id": 837,
    "text": "   Когда Орнас с учителем приблизились к центру, протокольный дроид уже шёл им навстречу.\n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс он механическим голосом.\n   Дроид попытался приблизиться к магистру Льерсо с неуклюже раскинутыми для объятий руками, и тот отступил на шаг, подмигнув ошарашенному юноше.\n– Удивление: Хозяин, вы не узнаёте меня? – продолжал секретарь, наступая. – Я НК-63, ваш протокольный дроид и верный слуга. Должен предупредить, что этот человек рядом с Вами не тот, за кого себя выдаёт.\n   Джедаи переглянулись. И если Орнас разве что рот не открыл от удивления, то его наставник выглядел по-детски восхищённым. Воспользовавшись заминкой, дроид всё-таки настиг мастера Льерсо и даже на секунду сомкнул свои жёсткие объятия.\n– Утверждение: В моей базе данных есть неоспоримые доказательства двуличности этого коварного субъекта, – скрежетал дроид, бесстыдно указывая на Орнаса одной рукой и пятясь назад.",
    "answers": [
      {
        "id": 843,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine8ending == 4\nend"
      },
      {
        "id": 842,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine8ending == 3\nend"
      },
      {
        "id": 840,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine8ending == 2\nend"
      },
      {
        "id": 841,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn UpLine8ending == 1\nend"
      }
    ]
  },
  {
    "id": 838,
    "text": "   Орнас поспешил за Десвиар в левую часть помещения, туда, где блестящее стирильностью пространство было заставленно разным непонятным оборудованием. Там располагались и несколько десятков бакта-камер, внутри каждой из которых неподвижно замерло сразу по два, а то и по три ящероподобных создания. В нескольких прозрачных боксах из тёмно-фиолетового стекла извивались отделённые друг от друга высокими перегородками не то маленькие змеи, не то крупные черви. Над одним из столов возле огромного странного прибора медленно прокручивалась голограмма, которую джедай издалека принял за изображение головы ранкора. Проекция моментально погасла, когда девушка подошла слишком близко.\n   Десс искала что-то, подолгу задерживаясь у каждой камеры с бактой, небрежно касаясь панелей и экранов, вглядываясь в очертания за мутным стеклом. Искала и не могла найти.",
    "answers": [
      {
        "id": 861,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 839,
    "text": "   Десс лишь пожала плечами, с трудом  сдерживая улыбку.\n   Искать долго не пришлось: исковерканный корпус астромеханика обнаружили недалеко от конторки протокольного дроида. Десвиар спокойно выдержала пристальный взгляд магистра Льерсо и сменила тему:\n– Мы сможем подключиться к этим устройствам?\n   Они тщательно обследовали каждый из множества экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. \n– С такой системой безопасности человеку не разобраться, – печально заключил учитель. – Придётся вызвать с корабля дроида с протоколом дешифрации, когда закончим со всем остальным.",
    "answers": [
      {
        "id": 847,
        "text": "Дальше"
      },
      {
        "super_calculate": false,
        "id": 845,
        "calculate": true,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem4\",-1,1)\nend",
        "text": "Выдать достижение"
      }
    ]
  },
  {
    "id": 840,
    "text": "– Не может быть! – карикатурно удивился магистр Льерсо. – Расскажи-ка об этом подробнее.\n   Он подмигнул Орнасу и повернулся к подошедшей Десвиар, намереваясь сказать что-то ещё. Но в этот момент в руке дроида из ниоткуда появился бластер, и серия оглушающих зарядов устремилась в спутников.\n   Юноша легко увернулся от выстрела в акробатическом прыжке и на лету активировал световой меч. Десс рывком ушла в сторону и тоже выхватила оружие. А вот мастер Льерсо не успел вовремя среагировать – его обмякшее тело мешком рухнуло на пол.\n   Орнас бросился на дроида, но не сделал и шага, как мощный толчок Силы отбросил его на пол. Он попытался найти глазами Десвиар, но увидел только направленный в него почти в упор бластер, когда оглушающий заряд тысячей иголок впился в грудь.\n– Утверждение: Поздравляю, коварный субъект, теперь Вы нейтрализованы.\n   Удовлетворённо хмыкнув, дроид подобрал световой меч Орнаса, сгрёб в охапку безвольные тела обоих спутников и направился к винтовой лестнице.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nneutralized = 1\nupLineFinal = 3\nTL3lost = 1\nDessLost = 1\nmasterGrudge =  0\ndess = dess or {}\ndess.trait = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 864,
        "calculate": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem6\",-1,1)\nend",
        "text": "Выдать достижение",
        "id": 840,
        "calculate": true
      }
    ]
  },
  {
    "id": 841,
    "text": "– Не может быть! – карикатурно удивился магистр Льерсо. – Расскажи-ка об этом подробнее.\n   Он повернулся к Орнасу, намереваясь сказать что-то ещё. Но в этот момент в руке дроида из ниоткуда появился бластер, и серия оглушающих зарядов устремилась в спутников.\n   Юноша легко увернулся от выстрела в акробатическом прыжке и на лету активировал световой меч. А вот мастер Льерсо не успел вовремя среагировать – его обмякшее тело мешком рухнуло на пол.\n   Следующая серия выстрелов дроида устремилась в Орнаса, но он легко отразил их световым мечом обратно.\n   НК-63 быстро оценил ситуацию, и бластер в его руке исчез, уступив место виброклинку. Проследив за направлением взгляда Орнаса, дроид схватил ногой бесчувственного Магистра Льерсо и с силой швырнул его в юношу, сразу же ринувшись в атаку. Джедаю потребовалось всё его мастерство, чтобы мягко подхватить Силой тело учителя, бережно направить его внутрь конторки, где, как он надеялся, будет безопасно, и одновременно с тем уклониться от натиска противника.\n   Но где же Десс, когда она наконец нужна?",
    "answers": [
      {
        "id": 560,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 842,
    "text": "– Не может быть! – карикатурно удивился магистр Льерсо. – Расскажи-ка об этом подробнее.\n   Он подмигнул Орнасу и повернулся к подошедшей Десвиар, намереваясь сказать что-то ещё. Но в этот момент в руке дроида из ниоткуда появился бластер, и серия оглушающих зарядов устремилась в спутников.\n   Юноша легко увернулся от выстрела в акробатическом прыжке и на лету активировал световой меч. Десс рывком ушла в сторону и тоже выхватила оружие. А вот мастер Льерсо не успел вовремя среагировать – его обмякшее тело мешком рухнуло на пол.\n   Оставшиеся джедаи уже в следующую секунду обрушились на дроида. В вихре ярких всполохов отсечённые металлические руки с гулким звуком упали на пол. Следущая атака поразила ноги, и НК-63 рухнул следом..\n– Утверждение... – начал говорить НК-63, но закончить не успел – Десвиар несколькими ударами превратила поврежденный корпус в груду искрящегося металлолома.",
    "answers": [
      {
        "id": 854,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterGrudge = 1\nend"
      }
    ]
  },
  {
    "id": 843,
    "text": "– Весьма любопытно, дорогой НК, – серьёзно проговорил учитель Орнаса. – Отрадно знать, что верный слуга так тщательно подготовился к моему возвращению.\n– Утверждение... – начал говорить НК-63, но закончить не успел.\n   Внезапно из его руки пробился яркий зелёный луч, и уже в следующую секунду световой меч прочертил в воздухе широкую дугу. Две отсечённые металлические конечности с гулким звуком упали на пол.\n   Магистр Льерсо сделал ещё одно неуловимое движение кончиком пальца, и клинок, зависший в воздухе в нескольких шагах от хозяина, быстрым взмахом поразил ноги дроида. НК-63 рухнул на пол.\n   Учитель подошёл ближе, поймал меч и убрал его на пояс.",
    "answers": [
      {
        "id": 844,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterGrudge = 0\nend"
      }
    ]
  },
  {
    "id": 844,
    "text": "– Попался, воришка, – равнодушно отметил наставник Орнаса, переворачивая ногой дроида. – Неужели я заслужил такое отнош...\n   Он не успел закончить фразу. Откуда-то из корпуса НК-63 появился незаметный манипулятор и поразил джедая электрическим зарядом, так что того перекосило. Юноша отреагировал мгновенно и несколькими точными ударами мечом снёс противнику голову и раскроил на части то немногое, что от него к этому моменту оставалось.\n– Жаль, что мы теперь не сможем  опросить его, – печально произнёс учитель. – Хотя уверен, это был бы крайне неинформативный разговор.",
    "answers": [
      {
        "id": 845,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nreturn UpLine8Conflicts.Dess_TL < 2 --условие: TL-3 слился\nend"
      },
      {
        "id": 846,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nreturn UpLine8Conflicts.Dess_TL == 2 --условие: TL-3 не слился\nend"
      }
    ]
  },
  {
    "id": 845,
    "text": "   Десвиар бесшумно возникла рядом и прищурившись разглядывала место скоротечной схватки.\n– А где TL-3? – всполошился Орнас.\n   Десс лишь пожала плечами, с трудом  сдерживая улыбку.\n   Искать долго не пришлось: исковерканный корпус астромеханика обнаружили недалеко от конторки протокольного дроида. Десвиар спокойно выдержала пристальный взгляд магистра Льерсо и сменила тему:\n– Мы сможем подключиться к этим устройствам?\n  Они тщательно обследовали каждый из множества экранов и панелей, но так и не смогли разобраться в шифровках и получить доступ к хранящимся там данным. \n– С такой системой безопасности человеку не разобраться, – печально заключил учитель. – Придётся вызвать с корабля дроида с протоколом дешифрации, когда закончим со всем остальным.",
    "answers": [
      {
        "id": 847,
        "text": "Дальше"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem4\",-1,1)\nend",
        "text": "Выдать достижение",
        "id": 845,
        "calculate": true
      }
    ]
  },
  {
    "id": 846,
    "text": "   Десвиар бесшумно возникла рядом и прищурившись разглядывала место скоротечной схватки.\n– А где TL-3? – всполошился Орнас.\n   Десс лишь пожала плечами.\n– Ужасный, возмутительный, вероломный... – затараторил откуда-то TL-3. – ... заманил, обездвижил, оглушил...\n   После того, как дроида нашли, извлекли из какой-то необычной ловушки, привели в порядок и в очередной раз выслушали его причитания, TL-3 наконец угомонился. Десвиар демонстративно закрыла уши и отошла в сторону.",
    "answers": [
      {
        "id": 681,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 847,
    "text": "   Покинув бесполезное рабочее пространство, все, не переговариваясь, направились к одинокой винтовой лестнице в дальней от входа части помещения. Они миновали остатки какого-то другого охранного дроида и в нерешительности замерли у первой ступени.\n– Впереди самое сложное, нужно собраться, – сухо напутствовал магистр Льерсо, пропуская вперёд Орнаса и Десвиар.\n   Юноша кивнул. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Орнас вздохнул и сделал первый шаг.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 5\nTL3lost = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 864,
        "calculate": true
      }
    ]
  },
  {
    "id": 848,
    "text": "   Неожиданно всё освещение в зале погасло. Только один экран продолжал упрямо гореть в наступившем мраке, едва подсвечивая замершую перед ним маленько угловатую фигурку дроида. Впрочем, уже через несколько секунд освещение вновь включилось.\n– Готово, – пискнул TL-3. – Самая хитроумная штука, с которой я сталкивался: если паттерн действий оператора отличается от привычной модели, система его блокирует.\n– Я не понял ни слова, – вздохнул Орнас. – Что это значит?\n– ",
    "answers": [
      {
        "id": 632,
        "text": "   ",
        "lua_text": "function lua_text()\n\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\nUpLine8DroidRelation = UpLine8DroidRelation or 0\n\nlocal a = UpLine8DroidRelation\nlocal b = UpLine8Conflicts.Llerso_TL\n\nlocal text = a > 0 and b == 2 and [=[У нас будет ответ только на один запрос.\n– Всего на один? – разочарованно протянул юноша. – Но что вообще там есть?\n– Пока не спросим – не узнаем. – ответил дроид и помолчал немного.  – Я бы очень хотел узнать всё о судьбе Феникса, но, полагаю, у вас есть более важная миссия...\n   Джедай поверить не мог: TL-3 решил доверить право выбора им, вместо того, чтобы воспользоваться моментом для личной выгоды.\n– А я должна узнать о судьбе Уулен Паф... – неожиданно возникла рядом Десвиар.\n   Пока Орнас размышлял, что бы хотел узнать он сам, над ухом раздался голос учителя:\n– Синтер Че'юр. Вся доступная информация.]=]\n\nor \n\n[=[У нас будет ответ только на один запрос...\n– Всего на один? – разочарованно протянул юноша.\n– ... И я его уже сделал.\n   Джедай поверить не мог, что TL-3 решил воспользоваться моментом для получения личной выгоды, даже не посоветовавшись с остальными. Оставалось только прочитать на тёмном экране то, что хотел узнать дроид.]=]\nreturn text\nend",
        "merge": true
      },
      {
        "id": 635,
        "text": "Дальше",
        "lua_text": "function lua_text()\n--local a = TL3usefull > 2 and 1 or 0\nreturn \n--a == 1 and \"... о Фениксе и команде Чёрного Пламени\" or \n\"Дальше\"\nend",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8DroidRelation = UpLine8DroidRelation or 0\nreturn UpLine8DroidRelation < 1 or UpLine8Conflicts.Llerso_TL < 2\nend"
      },
      {
        "id": 850,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8DroidRelation = UpLine8DroidRelation or 0\n\nreturn UpLine8DroidRelation > 0 and UpLine8Conflicts.Llerso_TL == 2\n-- о ситхе\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nterminalData = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 848,
        "calculate": true
      }
    ]
  },
  {
    "id": 849,
    "text": "– Ты не додумался спросить ни о чём более важном? – раздражённо спросил магистр Льерсо. – Мог бы уточнить, у нас как раз есть вопрос, от которого зависит будущее вселенной на ближайшие сотни лет...\n   Он быстрым шагом направился к винтовой лестнице в дальней части помещения. TL-3 покатился за ним. Орнас обернулся и только теперь заметил Десвиар: она прятала лицо в ладонях и прерывисто дышала. Не успел он сказать и слова, как она выпрямилась и молча пошла за остальными.\n   Юношу пугала необычная несдержанность учителя и странная реакция Десс. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Добравшись до лестницы Орнас сочувственно взглянул на замявшегося перед слишком высокой первой ступенью TL-3, помог ему на неё забраться и шагнул следом, догоняя ушедших вперёд спутников.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 8\nknowPhenix = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 864,
        "calculate": true
      }
    ]
  },
  {
    "id": 850,
    "text": "   Орнас обернулся на звук: это Десвиар накинулась на Магистра Льерсо.\n– Я... Должна... Узнать... – сипела она, колотя кулаками по его плечу.\n– Я и сам могу рассказать тебе о судьбе Уулен. Она мертва. Погибла на моих глазах в Храме Ордена на Корусанте. Около десяти лет назад...\n   Орнас весь сжался, зажмурился и закрыл руками уши. Только не она. Только не эта история снова. Он так долго пытался забыть о ней, притворялся, что её никогда не было. Но так и не смог. Он даже не сразу  осознал, что связывало эту историю и вопрос Десвиар. \"Нет эмоций, есть покой...\".\n– ... не хотели брать, и она умерла?! Вот так совпадение! – выбил Орнаса из медитации крик Десвиар.\n– Она его мать. Он сказал, что ни при чём.\n   Мастер Льерсо разглаживал пальцами бородку и косился на застывшего в ожидании TL-3. Десс теребила пальцами лоскут ткани, то и дело мотая головой и отбрасывая лезущие в лицо пряди волос. Казалось, только невидимая внешняя сила удерживает её на месте.\n– Он сказал?! А что ещё он мог сказать? Да ты сам понимаешь, что это он!\n– Хватит! – неожиданно для себя самого сказал Орнас и распрямился.\n   Все обернулись к нему, будто впервые вспомнив о существовании юноши.\n– Она сделала свой выбор тогда, чтобы я мог сделать свой сейчас, – словно со стороны слушал свой голос Орнас.\n   Эти слова ему повторяли так часто, что они отпечатались в сознании бессмысленной мантрой. Но теперь он будто впервые понял их суть.",
    "answers": [
      {
        "id": 852,
        "text": "Дальше",
        "lua_do": "function lua_do()\nknowWoolen = 2\nend"
      }
    ]
  },
  {
    "id": 851,
    "text": "– Нужно идти, – раздражённо бросил магистр Льерсо, зажигая световой меч и освещая им путь. – Мы на пороге разгадки тайн, от которых зависит будущее галактики на сотни и тысячи лет...\n   Он быстрым шагом направился к винтовой лестнице в дальней части помещения. TL-3 покатился за ним. Орнас обернулся и только теперь осмелился заглянуть в глаза Десвиар. Что он боялся увидеть в них: растерянность, гнев, отвращение? Но не успел он сказать и слова, как она выпрямилась и молча пошла за остальными.\n   Орнаса пугала необычная несдержанность учителя, странная реакция Десс и даже собственный недавний порыв. Он чувствовал, что если где-то и остались разгадки всех тайн этого зловещего места, то только там, наверху. И надеялся, что цена этих знаний не окажется непомерно высока.\n   Добравшись до лестницы Орнас сочувственно взглянул на замявшегося перед слишком высокой первой ступенью TL-3, помог ему на неё забраться и шагнул следом, догоняя ушедших вперёд спутников.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nupLineFinal = 8\nmasterKnowSyntey = 1\nend"
      },
      {
        "comment": true,
        "super_calculate": false,
        "id": 851,
        "calculate": true,
        "text": "Выдать достижение \"на пороге разгадки\"",
        "lua_do": "function lua_do()\nnewAchieve(\"closeSolution\",1,1)\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 864,
        "calculate": true
      }
    ]
  },
  {
    "id": 852,
    "text": "– Орнас прав, сейчас не время для этого, – наконец прервал молчание Магистр Льерсо. – TL-3, выводи.\n– Вывожу, вывожу... – отозвался астромех, и на ближайшем мониторе действительно отобразилась нужная информация.\n   Строки безумно замельтешили перед глазами Орнаса, и он едва успевал вырывать из них обрывки фраз. Че'юр, адепт ордена Синтер, талантливый и трудолюбивый, настоящий фанатик. Рядом с именем странная отметка: \"Уровень соответствия: высокий\". План \"Искры знания\" – успешно. План \"Семена бессмертия\" – успешно. План \"Паутина\" – успешно.\n   Мастер Льерсо с каждой строкой становился мрачнее и мрачнее.\n   Неожиданно весь свет в зале вновь пропал, изображение на экранах моргнуло несколько раз и тоже потухло.\n– Кто-то нас отключил, – пискнул TL-3.\n– Смог записать что-нибудь? – без особой надежды спросил Орнас.\n   Но дроид только растерянно крякнул.",
    "answers": [
      {
        "id": 851,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 853,
    "text": "   Орнас и Десс переглянулись: и правда, где? Но прислушавшись, уловили отдалённые звуки.\n– Ужасный, возмутительный, вероломный... – тараторил откуда-то TL-3. – ... заманил, обездвижил, оглушил...\n   После того, как дроида нашли, извлекли из какой-то необычной ловушки, привели в порядок и в очередной раз выслушали его причитания, TL-3 наконец угомонился. Десвиар демонстративно закрыла уши и отошла в сторону.",
    "answers": [
      {
        "id": 681,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 854,
    "text": "– Поверить не могу, что всё так случилось, – ошарашенно говорил Орнас, пока они с Десс осматривали и приводили в чувства парализованного учителя. – У него было столько времени...\n– А ещё он потерял это, – кивнула Десс на остатки дроида.\n   Там, в сжатых пальцах отсечённой механической конечности блестела элегантная рукоять светового меча. Орнас подхватил оружие наставника, покрутил в руках. Никогда прежде он не видел Магистра Льерсо настолько непохожим на самого себя.\n   Впрочем, тот довольно быстро оклемался. Окинул хмурым взглядом спутников и груду хлама, оставшуюся от дроида. Недовольно буркнул:\n– Я хотел допросить его...\n   В его словах больше не звучала насмешка, только раздражение и ещё что-то непонятное Орнасу.\n– Спасибо, – наконец выдавил пресную улыбку учитель, выхватывая свой меч. – А где TL-3?",
    "answers": [
      {
        "id": 839,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nreturn UpLine8Conflicts.Dess_TL < 2-- дроид не цел\nend",
        "lua_do": "function lua_do()\nmasterGrudge = 1\nend"
      },
      {
        "id": 853,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nreturn UpLine8Conflicts.Dess_TL == 2-- дроид цел\nend",
        "lua_do": "function lua_do()\nmasterGrudge = 1\nend"
      }
    ]
  },
  {
    "id": 855,
    "text": "   Оказавшись за приборами, дроид, не обращая внимание на бесчувственное тело Магистра Льерсо, подключился к одному из разъемов и голопроектор высветил над приборной панелью чертежи, на которых юноша узнал первый этаж храма.\n   Пока Орнас всматривался в карту и мысленно сопоставлял её со своими воспоминаниями, НК-63 увеличил изображение длинного коридора, что-то переключил, и в воздухе медленно закружилась голограмма молодой девушки. Десвиар.\n   Не успел джедай сделать и шага вперёд, чтобы Орнас рассмотреть изображение, как его поразил оглушающий заряд.\n– Утверждение: Поздравляю, теперь вы нейтрализованы, – заявил дроид, пряча бластер куда-то вглубь корпуса.\n   Юноша ощутил кожей лёгкое покалывание заряда и мешком рухнул на пол прямо возле наставника. Удовлетворённо хмыкнув, дроид подобрал деактивированный световой меч, сгрёб в охапку безвольные тела обоих джедаев и направился к винтовой лестнице.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nneutralized = 1\nupLineFinal = 3\nDessLost = 1\nTL3lost = 1\nmasterGrudge =  0\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 864,
        "calculate": true
      }
    ]
  },
  {
    "id": 856,
    "text": "empty\nлиния 8 победа в бою с НК",
    "answers": [
      {
        "id": 856,
        "text": "   Орнас деактивировал клинок и убрал рукоять на пояс. Он сразу же направился в центр помещения, туда, где среди экранов и панелей управления остался лежать Магистр Льерсо. Он всё ещё был парализован оглушающим зарядом, но других травм при быстром осмотре юноша не обнаружил.\n– Дроид не собирался нас убивать, – донёсся до Орнаса сдавленный голос учителя.\n   Он понемногу приходил в себя и вскоре уже сидел на полу, растирая затёкшие мышцы.\n– Похоже на то, – отозвался Орнас. – Вот только почему?\n– Где остальные?\n   Орнас лишь пожал плечами. Похоже, пропавших спутников придётся искать.",
        "lua_if": "function lua_if()\nafterRage = afterRage or 0\nreturn afterRage == 0\nend",
        "merge": true
      },
      {
        "id": 856,
        "text": "   Он вернулся в центр помещения, туда, где среди экранов и панелей управления остался лежать Магистр Льерсо. Он всё ещё был парализован оглушающим зарядом, но других травм при быстром осмотре юноша не обнаружил.\n– Дроид не собирался нас убивать, – донёсся до Орнаса сдавленный голос учителя.\n   Он понемногу приходил в себя и вскоре уже сидел на полу, растирая затёкшие мышцы.\n– Похоже на то, – отозвался Орнас. – Вот только почему?\n– Где остальные?\n   Орнас лишь пожал плечами. Похоже, пропавших спутников придётся искать.",
        "lua_if": "function lua_if()\nafterRage = afterRage or 0\nreturn afterRage == 1\nend",
        "merge": true
      },
      {
        "id": 857,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterGrudge = 1\nend"
      }
    ]
  },
  {
    "id": 857,
    "text": "– Нашла! – неожиданно раздался голос Десвиар откуда-то издалека. – Он тут!\n   Орнас поспешил к ней.\n– Ужасный, возмутительный, вероломный... – затараторил откуда-то TL-3. – ... заманил, обездвижил, оглушил...\n   После того, как дроида извлекли из какой-то необычной ловушки, привели в порядок и в очередной раз выслушали его причитания, TL-3 наконец угомонился. Десвиар демонстративно закрыла уши и отошла в сторону.\n– Вы пропустили самое интересное, – заметил Орнас.\n   Магистр Льерсо нахмурился.\n– Осмотрим, что можно, и пойдём дальше, – кивнул он на конторку НК и первым двинулся к ней.\n– Верно, осталось самое важное, – позвал Орнаса TL-3, решительно направляясь следом.\n   Учитель демонстративно сел прямо на пол и погрузился в медитацию. Орнас с неохотой направился за астромехом.",
    "answers": [
      {
        "id": 858,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 858,
    "text": "– Ради этого тебе и стоило расстараться, уговаривая меня помочь, – тараторил дроид, объезжая многочисленные пульты и панели. – Над надёжной защитой тут поработали на совесть, ни один стандартный дешифратор не осилит.\n– А ты осилишь?\n– Скорее всего, – не очень уверенно ответил астромех после секундной заминки.\n– Сможешь подключиться к этой штуке? – с сомнением переспросил Орнас, разглядывая незнакомые приборы.\n– Подключиться – дело нехитрое. А вот получить доступ...\n   TL-3 умолк и засуетился внутри, подключаясь специальным манипулятором к разным разъёмам во всех терминалах по очереди.\n– Да, вот здесь, – заявил он наконец, остановившись перед маленьким невзрачным блоком с небольшим экраном. – Иди сюда, без тебя ничего не выйдет.\n   Орнас вновь бросил взгляд на ушедшего в себя наставника и встал на указанное место.",
    "answers": [
      {
        "id": 644,
        "text": "Дальше",
        "lua_do": "function lua_do()\ncomputing = nil\n--g.blockSaves = 1\nend"
      }
    ]
  },
  {
    "id": 859,
    "text": "   С любопытством взглянув на удаляющегося в архивные залежи наставника и нырнувшую куда-то между и приборами Десс, юноша поспешил догнать TL-3. К тому навстречу уже вышел из-за своей конторки протокольный дроид, но его слов юноша не слышал.\n– Восклицание: Хозяин! Я уже думал, что вы не прилетите, – произнёс механическим голосом серебристый дроид-секретарь, обращаясь теперь к самому Орнасу.\n– Берегись! – успел предупредить TL-3. – Серия НК – замаскированные под протокольных дроидов убийцы.\n– Огорчение: Ты испортил всю интригу! Глупый маленький пенёк, вздумал помогать этим мешкам с мясом?\n   В механических руках буквально из ниоткуда появились два бластера и в ту же секунду обрушили шквальный огонь в направлении юноши. TL-3 поспешил к ближайшему укрытию, благо НК-63 не посчитал его приоритетной целью.\n– Оставайся там, – крикнул джедай, защищаясь.\n   Ловкости и мастерству дроида-убийцы можно было только позавидовать: он мгновенно разорвал дистанцию и вёл прицельную стрельбу, оставаясь на безопасном расстоянии.",
    "answers": [
      {
        "id": 860,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 860,
    "text": "  Магистр Льерсо и Десвиар возникли с разных сторон столь же внезапно, как и оружие в руках НК-63. Бой был неравным: джедаи без труда сблизились с противником и в считанные секунды отсекли тому обе руки.\n– Нужно поговорить, – почти учтиво обратился Магистр Льерсо к дроиду.\n– Утверждение: это... – начал говорить НК-63, но Десвиар в то же мгновение снесла ему голову и несколько раз полоснула по корпусу.\n– Он бы всё равно попытался обмануть, – сказала Десс, убирая деактивированный клинок на пояс. – Только время потеряли бы.\n– Ну и неприятный же тип, – затараторил TL-3, выезжая из-за какого-то ящика. – Чуть не зашиб...\n   Магистр Льерсо нахмурился.\n– Осмотрим, что можно, и пойдём дальше, – кивнул он на конторку НК и первым двинулся к ней.\n– Верно, осталось самое важное, – позвал Орнаса TL-3, решительно направляясь следом.\n   Учитель демонстративно сел прямо на пол и погрузился в медитацию. Орнас с неохотой направился за астромехом.",
    "answers": [
      {
        "id": 858,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 861,
    "text": "   Когда Орнас нагнал спутницу, она уже обошла каждый уголок в этой части комнаты и осмотрела всё, что посчитала достойным своего внимания.\n   Наконец она закрыла глаза и в воцарившейся тишине тихо заговорила, на этот раз обращаясь к Орнасу.\n– Я чувствовала её присутствие так ясно, так чётко видела её силуэт в одной из капсул, когда закрывала глаза и доверялась Силе... Но её нет здесь.\n– Твоя наставница?\n   Десвиар не ответила, только насторожилась и почти тут же вскочила на ноги.\n– К Астору, быстрее!",
    "answers": [
      {
        "id": 862,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nreturn UpLine8Conflicts.Llerso_Dess == 2\n--сам справился\nend"
      },
      {
        "id": 863,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLine8DessRelation = UpLine8DessRelation or 0\n\nreturn UpLine8Conflicts.Llerso_Dess < 2 and UpLine8DessRelation > 0\n--сам не справился, но Десс решила помочь\nend"
      },
      {
        "id": 864,
        "text": "Дальше",
        "lua_if": "function lua_if()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLine8DessRelation = UpLine8DessRelation or 0\n\nreturn UpLine8Conflicts.Llerso_Dess < 2 and UpLine8DessRelation < 1\n--сам не справился, и Десс решила всех предать\nend"
      }
    ]
  },
  {
    "id": 862,
    "text": "   Когда Орнас и Десвиар добрались к Магистру Льерсо, оказалось, что спешили они напрасно. Он на их глазах парой ударов расправился с протокольным дроидом, а после и вовсе превратил его останки в груду металлолома.\n– Долго объяснять, – спокойно выдохнул он и опустился прямо на пол, погружаясь в медитацию. – Помогите TL-3.\n   Только теперь они обратили внимание на негромкий писк и поспешили к источнику звука.\n– Ужасный, возмутительный, вероломный... – тараторил откуда-то TL-3. – ... заманил, обездвижил, оглушил...\n   После того, как дроида извлекли из какой-то необычной ловушки, привели в порядок и в очередной раз выслушали его причитания, TL-3 наконец угомонился. Десвиар демонстративно закрыла уши и отошла в сторону.\n– Осталось самое важное, – позвал Орнаса TL-3, решительно направляясь в конторку протокольного дроида.\n   Орнас с неохотой направился за астромехом.",
    "answers": [
      {
        "id": 858,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterGrudge =  0\nend"
      }
    ]
  },
  {
    "id": 863,
    "text": "   Когда Орнас и Десвиар добрались к Магистру Льерсо, оказалось, что спешили они не напрасно: на их глазах протокольный дроид почти в упор выстрелил серией оглушающих зарядов. К удивлению Орнаса, мастер Льерсо не успел вовремя среагировать – его обмякшее тело мешком рухнуло на пол.\n   Десс и Орнас уже в следующую секунду обрушились на противника. В вихре ярких всполохов отсечённые металлические руки с гулким звуком упали на пол. Следущая атака поразила ноги, и дроид рухнул следом..\n– Утверждение... – начал говорить он, но закончить не успел – Десвиар несколькими ударами превратила поврежденный корпус в груду искрящегося металлолома.",
    "answers": [
      {
        "id": 865,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 864,
    "text": "   Когда Орнас и Десвиар приблизились к Магистру Льерсо, оказалось, что спешили они не напрасно: на их глазах протокольный дроид почти в упор выстрелил в того серией оглушающих зарядов. К удивлению Орнаса, мастер Льерсо не успел вовремя среагировать – его обмякшее тело мешком рухнуло на пол.\n   Уже в следующую секунду юноша устремился к противнику. Но не успел он сделать и пары шагов, как мощный толчок Силы отбросил его на пол. Он попытался найти глазами Десвиар, но увидел только направленный в него почти в упор бластер, когда оглушающий заряд тысячей иголок впился в грудь.\n– Утверждение: Поздравляю, теперь Вы нейтрализованы.\n   Удовлетворённо хмыкнув, дроид подобрал световой меч Орнаса, сгрёб в охапку два безвольных тела и направился к винтовой лестнице.",
    "answers": [
      {
        "id": 575,
        "text": "Дальше",
        "lua_do": "function lua_do()\nneutralized = 1\nupLineFinal = 3\nTL3lost = 1\nDessLost = 1\nmasterGrudge =  0\ndess = dess or {}\ndess.trait = 1\nend"
      },
      {
        "super_calculate": false,
        "id": 864,
        "calculate": true,
        "lua_do": "function lua_do()\nUpLine8Conflicts = UpLine8Conflicts or {}\n\nUpLine8Conflicts.Dess_TL = UpLine8Conflicts.Dess_TL or 0\n\nUpLine8Conflicts.Llerso_TL = UpLine8Conflicts.Llerso_TL or 0\n\nUpLine8Conflicts.Llerso_Dess = UpLine8Conflicts.Llerso_Dess or 0\n\nUpLineConflictsDess_TL = UpLine8Conflicts.Dess_TL\n\nUpLineConflictsLlerso_Dess = UpLine8Conflicts.Llerso_Dess\n\nUpLineConflictsLlerso_TL = UpLine8Conflicts.Llerso_TL\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"diploProblem6\",-1,1)\nend",
        "text": "Выдать достижение",
        "id": 864,
        "calculate": true
      }
    ]
  },
  {
    "id": 865,
    "text": "– Поверить не могу, что всё так случилось, – ошарашенно говорил Орнас, пока они с Десс осматривали и приводили в чувства парализованного учителя. – Как дроид застал его врасплох?..\n– А ещё он потерял это, – кивнула Десс на остатки дроида.\n   Там, в сжатых пальцах отсечённой механической конечности блестела элегантная рукоять светового меча. Орнас подхватил оружие наставника, покрутил в руках. Никогда прежде он не видел Магистра Льерсо настолько непохожим на самого себя.\n   Впрочем, тот довольно быстро оклемался. Окинул хмурым взглядом спутников и груду хлама, оставшуюся от дроида. Недовольно буркнул:\n– Я хотел допросить его...\n   В его словах раздражение смешалась с чем-то ещё, что Орнасу не мог распознать.\n– Спасибо, – наконец выдавил пресную улыбку учитель, выхватывая свой меч. – А где TL-3?",
    "answers": [
      {
        "id": 853,
        "text": "Дальше",
        "lua_do": "function lua_do()\nmasterGrudge = 1\nend"
      }
    ]
  },
  {
    "id": 866,
    "text": "",
    "answers": []
  },
  {
    "id": 867,
    "text": "empty\nrun для достижений",
    "answers": [
      {
        "super_calculate": true,
        "id": 867,
        "calculate": false,
        "lua_do": "function lua_do()\nfunction newAchieve(t, m, n)\n-- t: name of var for achievement\n-- m: -1 for antiach\n-- n: for new ach, which require check of status\n\nm = m or 1\nif n then\n  local a = g.achievements[t] or 0\n  if a == 0 then\n    g.achievements[t] = 1\n    vars[\"achPointer\"] = t\n    vars[\"achType\"] = m -- для антидостижения -1\n    vars[\"pointerCount\"] = 2\n  end\nelse\n   g.achievements[t] = 1\n   vars[\"achPointer\"] = t\n   vars[\"achType\"] = m -- для антидостижения -1\n   vars[\"pointerCount\"] = 2\nend\n\nend\n\nend",
        "text": "Функция учёта достижений"
      },
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nfunction crossTabs(t1,t2, a)\n  for k,v in pairs (t1) do --перебор в таблице 1\n    if v == a then -- совпадение значения с искомым\n      return t2[k] -- возвращение значения с тем же ключом из таблицы 2\n    end\n  end\nend\n\nend",
        "calculate": false,
        "text": "Функция выбора значения из смежных таблиц",
        "id": 867
      },
      {
        "super_calculate": false,
        "id": 197,
        "calculate": true,
        "lua_do": "function lua_do()\ng.difficulty = g.difficulty or 0 -- 0 детский, 1 - хард\n--g.blockSaves = (g.difficulty == 0 and 0) or (g.isAuthor == 1 and 0) or 1 -- система сложности: сохранения доступны только на лёгкой сложности\n--g.blockSaves = 0 -- сохранения всегда доступны\n\nachBlock = g.difficulty == 0 and 1 or achBlock or 0\n\n\ndess = dess or {}\ndess.trust = dess.trust or 0\ng.achievements = g.achievements or {}\ng.achievements.masterWord = g.achievements.masterWord or 0\nif dess.trust > 17 then \n  g.achievements.alarm = g.achievements.masterWord == 0 and 4 or 0\n  g.achievements.masterWord = 1\nend\n\nfire223 = fire223 or 0\nmiddleRoom = middleRoom or {}\nmiddleRoom.useAdvantage = middleRoom.useAdvantage or 0\ng.achievements = g.achievements or {}\ng.achievements.detective3 = g.achievements.detective3 or 0\n\nif fire223 == 1 or middleRoom.useAdvantage == 1 then\n  g.achievements.alarm = g.achievements.detective3 == 0 and 8 or 0\n  g.achievements.detective3 = 1\nend\n\nmiddleRoom = middleRoom or {}\nmiddleRoom.result = middleRoom.result or 0\ng.achievements = g.achievements or {}\ng.achievements.tooTough = g.achievements.tooTough or 0\nif middleRoom.result == 3 then \n  g.achievements.alarm = g.achievements.tooTough == 0 and -20 or 0\n  g.achievements.tooTough = 1\nend\n\nvars[\"331broken\"] = vars[\"331broken\"] or 0 \ng.achievements = g.achievements or {}\ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0\nif vars[\"331broken\"] == 1 then\n  g.achievements.alarm = g.achievements.aboutMechanics == 0 and -21 or 0\n  g.achievements.aboutMechanics = 1\nend\n\nachievements = achievements or {}\nachievements.searchCount = achievements.searchCount or 0\ng.achievements.researcher = g.achievements.researcher or 0\n\nif achievements.searchCount > 12 then\n  g.achievements.alarm = g.achievements.researcher == 0 and 5 or 0\n  g.achievements.researcher = 1\nend\n\n\nachievements = achievements or {}\nachievements.perfectKill = achievements.perfectKill or 0\ng.achievements.warrior3 = g.achievements.warrior3 or 0\n\nif achievements.perfectKill == 1 then\n  g.achievements.alarm = g.achievements.warrior3 == 0 and 31 or 0\n  g.achievements.warrior3 = 1\nend\nend",
        "text": "Автовыдача по условиям на первом этаже"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.achievements = g.achievements or {}\ng.achievements.fullRevers = g.achievements.fullRevers or 0 --1\ng.achievements.volitionalEffort = g.achievements.volitionalEffort or 0 -- 2\ng.achievements.masterTech = g.achievements.masterTech or 0 -- 3\ng.achievements.masterWord = g.achievements.masterWord or 0 -- 4\ng.achievements.researcher = g.achievements.researcher or 0 -- 5\ng.achievements.detective1 = g.achievements.detective1 or 0 -- 6\ng.achievements.detective = g.achievements.detective or 0 -- 7\ng.achievements.detective3 = g.achievements.detective3 or 0 -- 8\ng.achievements.diplomat1 = g.achievements.diplomat1 or 0 -- 9\ng.achievements.diplomat2 = g.achievements.diplomat2 or 0 -- 10\ng.achievements.diplomat3 = g.achievements.diplomat3 or 0 -- 11\ng.achievements.diplomat4 = g.achievements.diplomat4 or 0 -- 12\ng.achievements.brain = g.achievements.brain or 0 -- 13\ng.achievements.warrior1 = g.achievements.warrior1 or 0 -- 14\ng.achievements.warrior2 = g.achievements.warrior2 or 0 -- 15\ng.achievements.tactic = g.achievements.tactic or 0 -- 16\ng.achievements.student = g.achievements.student or 0 -- 17\ng.achievements.warrior3 = g.achievements.warrior3 or 0 -- 18\n\ng.achievements.closeSolution = g.achievements.closeSolution or 0  -- \ng.achievements.warrior4 =  g.achievements.warrior4 or 0 -- \ng.achievements.computing = g.achievements.computing or 0 -- \ng.achievements.diplomat5 = g.achievements.diplomat5 or 0 -- \ng.achievements.absolutePower =\ng.achievements.absolutePower or 0 -- \ng.achievements.sapper =\ng.achievements.sapper or 0 -- \ng.achievements.littleDetail = g.achievements.littleDetail or 0 -- \ng.achievements.discoverer = g.achievements.discoverer or 0 -- \ng.achievements.smthMore = g.achievements.smthMore or 0 --\ng.achievements.secondChance = g.achievements.secondChance or 0\n\n\nlocal a = g.achievements.fullRevers <plus> g.achievements.volitionalEffort <plus> g.achievements.masterTech <plus> g.achievements.masterWord <plus> g.achievements.researcher <plus> g.achievements.detective1 <plus> g.achievements.detective <plus> g.achievements.detective3 <plus> g.achievements.diplomat1 <plus> g.achievements.diplomat2 <plus> g.achievements.diplomat3 <plus> g.achievements.diplomat4 <plus> g.achievements.brain <plus> g.achievements.warrior1 <plus> g.achievements.warrior2 <plus> g.achievements.tactic <plus> g.achievements.student <plus> g.achievements.warrior3 <plus>\ng.achievements.closeSolution <plus>\ng.achievements.warrior4 <plus>\ng.achievements.computing <plus>\ng.achievements.diplomat5 <plus>\ng.achievements.absolutePower <plus> g.achievements.sapper <plus>\ng.achievements.littleDetail <plus>\ng.achievements.discoverer <plus>\ng.achievements.smthMore <plus>\ng.achievements.secondChance\n\n\ng.achievementsNum = a\nif a > 0 then\ng.achievements.noAch = 0\nelse g.achievements.noAch = 1\nend\n-- g.achievements.noAch = (a < 1 and 1 or 0)\na_sup_console = a\n\ng.achievements.rush = g.achievements.rush or 0  -- \ng.achievements.simpleWay = g.achievements.simpleWay or 0 -- \ng.achievements.tooTough = g.achievements.tooTough or 0 -- \ng.achievements.aboutMechanics = g.achievements.aboutMechanics or 0 -- 31\ng.achievements.clumsyBurglar = g.achievements.clumsyBurglar or 0\ng.achievements.diploProblem1 = g.achievements.diploProblem1 or 0\ng.achievements.diploProblem2 = g.achievements.diploProblem2 or 0\ng.achievements.diploProblem3 = g.achievements.diploProblem3 or 0\ng.achievements.rashDecision1 = g.achievements.rashDecision1 or 0\ng.achievements.rashDecision2 = g.achievements.rashDecision2 or 0\ng.achievements.rashDecision3 = g.achievements.rashDecision3 or 0\ng.achievements.rashDecision4 = g.achievements.rashDecision4 or 0\ng.achievements.lostHimself = g.achievements.lostHimself or 0\n\ng.achievements.tooTough2 = g.achievements.tooTough2 or 0\ng.achievements.badFeeling = g.achievements.badFeeling or 0\ng.achievements.smnElseWill = g.achievements.smnElseWill or 0\ng.achievements.diploProblem6 = g.achievements.diploProblem6 or 0\ng.achievements.diploProblem5 = g.achievements.diploProblem5 or 0\ng.achievements.diploProblem4 = g.achievements.diploProblem4 or 0\ng.achievements.diploProblem7 = g.achievements.diploProblem7 or 0\ng.achievements.amulet =\n g.achievements.amulet or 0\ng.achievements.rashDecision5 = g.achievements.rashDecision5 or 0\ng.achievements.loosedChance = g.achievements.loosedChance or 0\n\nlocal b = g.achievements.rush <plus> g.achievements.simpleWay <plus> g.achievements.tooTough <plus> g.achievements.aboutMechanics <plus> g.achievements.clumsyBurglar <plus> g.achievements.diploProblem1 <plus> g.achievements.diploProblem2 <plus> g.achievements.diploProblem3 <plus> g.achievements.rashDecision1 <plus> g.achievements.rashDecision2 <plus> g.achievements.rashDecision3 <plus> g.achievements.rashDecision4 <plus> g.achievements.lostHimself <plus>\ng.achievements.tooTough2 <plus>\ng.achievements.badFeeling <plus>\ng.achievements.smnElseWill <plus>\ng.achievements.diploProblem6 <plus>\ng.achievements.diploProblem5 <plus>\ng.achievements.diploProblem4 <plus>\ng.achievements.diploProblem7 <plus>\ng.achievements.amulet <plus>\ng.achievements.rashDecision5 <plus> g.achievements.loosedChance\n\ng.antiAchievementsNum = b\ng.achievements.noAntiAch = (b == 0 and 1 or 0)\nend",
        "text": "Новый ответ. введите текст",
        "id": 197,
        "calculate": true
      },
      {
        "super_calculate": false,
        "id": 197,
        "text": "Уведомления о получении достижений через аларм",
        "calculate": true,
        "lua_do": "function lua_do()\n\ng.achievements = g.achievements or {}\ng.achievements.alarm = g.achievements.alarm or 0\n\nlocal tab = {\"fullRevers\", \"volitionalEffort\", \"masterTech\", \"masterWord\", \"researcher\", \"detective1\", \"detective\", \"detective3\", \"diplomat1\", \"diplomat2\", \"diplomat3\", \"diplomat4\", \"brain\", \"warrior1\", \"warrior2\", \"tactic\", \"student\", \"rush\", \"simpleWay\", \"tooTough\", \"aboutMechanics\", \"clumsyBurglar\", \"diploProblem1\", \"diploProblem2\", \"diploProblem3\", \"rashDecision1\", \"rashDecision2\", \"rashDecision3\", \"rashDecision4\", \"lostHimself\", \"warrior3\"}\n\nlocal a = 0\n\nif g.achievements.alarm ~= 0  then\n  a = g.achievements.alarm < 0 and -1 or 1\n  local e = math.abs(g.achievements.alarm)  \n  newAchieve(tab[e], a)\ng.achievements.alarm = 0 \nend\n\nend"
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\npointerCount = pointerCount or 0\nreturn pointerCount > 0\nend",
        "id": 92,
        "text": "отображение достижения",
        "lua_text": "function lua_text()\nlocal t1 = {\"fullRevers\", \n\"volitionalEffort\", \n\"masterTech\", \n\"masterWord\", \n\"researcher\", \n\"detective1\", \n\"detective\", \n\"detective3\", \n\"diplomat1\", \n\"diplomat2\", \n\"diplomat3\", \n\"diplomat4\", \n\"brain\", \n\"warrior1\", \n\"warrior2\", \n\"tactic\", \n\"student\", \n\"rush\", \n\"simpleWay\", \n\"tooTough\", \n\"aboutMechanics\", \n\"clumsyBurglar\", \n\"diploProblem1\", \n\"diploProblem2\", \n\"diploProblem3\", \n\"rashDecision1\", \n\"rashDecision2\", \n\"rashDecision3\", \n\"rashDecision4\", \n\"lostHimself\", \n\"warrior3\",\n\n\"closeSolution\",\n\"warrior4\",\n\"computing\",\n\"diplomat5\",\n\"absolutePower\",\n\"sapper\",\n\"littleDetail\",\n\"discoverer\",\n\"smthMore\",\n\"secondChance\",\n\n\"tooTough2\",\n\"badFeeling\",\n\"smnElseWill\",\n\"diploProblem6\",\n\"diploProblem5\",\n\"diploProblem4\",\n\"diploProblem7\",\n\"amulet\",\n\"rashDecision5\",\n\"loosedChance\"}\n\nlocal t2 = {\"Полная обратимость\",\n\"Волевое усилие\", \n\"Мастер техники\", \n\"Мастер слова\", \n\"Кропотливый исследователь\",\n\"Детектив 1\", \n\"Детектив 2\",  \n\"Детектив 3\", \n\"Умелый дипломат 1\", \n\"Умелый дипломат 2\", \n\"Умелый дипломат 3\", \n\"Умелый дипломат 4\", \n\"Острый ум\", \n\"Умелый воин 1\", \n\"Умелый воин 2\", \n\"Расчётливый тактик\",\n\"Лучший ученик»\", \n\"Неуместная спешка\", \n\"Простой путь\", \n\"Не по зубам\", \n\"Дело техники\", \n\"Неумелый взломщик\", \n\"Проблемы дипломатии 1\", \n\"Проблемы дипломатии 2\", \n\"Проблемы дипломатии 3\", \n\"Необдуманное решение 1\", \n\"Необдуманное решение 2\", \n\"Необдуманное решение 3\", \n\"Необдуманное решение 4\", \n\"Потерять себя\",\n\"Умелый воин 3\",\n\n\"На пороге разгадки\",\n\"Умелый воин 4\",\n\"Простые алгоритмы\",\n\"Умелый дипломат 5\",\n\"Абсолютная власть\",\n\"Через минное поле\",\n\"Маленькая деталь\",\n\"Кропотливый исследователь 2\",\n\"Что-то большее\",\n\"Второй шанс\",\n\n\"Не по зубам 2\",\n\"Плохое предчувствие\",\n\"Чужая воля\",\n\"Проблемы дипломатии 6\",\n\"Проблемы дипломатии 5\",\n\"Проблемы дипломатии 4\",\n\"Проблемы дипломатии 7\",\n\"Амулет\",\n\"Необдуманное решение 5\",\n\"Упущенный шанс\"\n}\n\n\nlocal a = achPointer\n\nlocal b = crossTabs(t1, t2, a) or \"\"\n\n\nreturn achType > 0 and [=[\n\n\n★ Получено достижение: «]=] .. b .. \"» ★\" or\n[=[\n\n\n☆ Получено \"антидостижение\": «]=] .. b .. \"» ☆\"\n\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 867,
        "calculate": true,
        "lua_do": "function lua_do()\npointerCount = pointerCount or 0\n\nif pointerCount > 0 then\n  pointerCount = pointerCount - 1\nelse achPointer = nil\nachType = nil\nend\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 867\nend",
        "id": 867,
        "text": "Пробное достижение",
        "comment": false,
        "lua_do": "function lua_do()\ng.achievements.alarm =  21\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn g.current_id == 867\nend",
        "lua_do": "function lua_do()\nlocal a = {\"каждый\", \"охотник\"}\nlocal b = {\"красный\",\"оранжевый\"}\n\nmessage(crossTabs(a, b, \"каждый\"))\nend",
        "text": "Тест функции сопоставления таблиц",
        "id": 867,
        "comment": false
      }
    ]
  },
  {
    "id": 868,
    "text": "Страница релоадФанкшнс",
    "answers": [
      {
        "id": 868,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "super_calculate": true
      },
      {
        "id": 868,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "super_calculate": true
      },
      {
        "id": 868,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "super_calculate": true
      },
      {
        "id": 868,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "super_calculate": true
      },
      {
        "id": 868,
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "super_calculate": true
      },
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\nfunction newAchieve(t, m, n)\n-- t: name of var for achievement\n-- m: -1 for antiach\n-- n: for new ach, which require check of status\n\nm = m or 1\nif n then\n  local a = g.achievements[t] or 0\n  if a == 0 then\n    g.achievements[t] = 1\n    vars[\"achPointer\"] = t\n    vars[\"achType\"] = m -- для антидостижения -1\n    vars[\"pointerCount\"] = 2\n  end\nelse\n   g.achievements[t] = 1\n   vars[\"achPointer\"] = t\n   vars[\"achType\"] = m -- для антидостижения -1\n   vars[\"pointerCount\"] = 2\nend\n\nend\n\nend",
        "text": "Функция учёта достижений",
        "id": 867,
        "calculate": false
      },
      {
        "super_calculate": true,
        "id": 867,
        "text": "Функция выбора значения из смежных таблиц",
        "calculate": false,
        "lua_do": "function lua_do()\n\nfunction crossTabs(t1,t2, a)\n  for k,v in pairs (t1) do --перебор в таблице 1\n    if v == a then -- совпадение значения с искомым\n      return t2[k] -- возвращение значения с тем же ключом из таблицы 2\n    end\n  end\nend\n\nend"
      },
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nfunction droidText()\n\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 0\nTL3.dialogParts = TL3.dialogParts <plus> 1\nlocal t = {}\nlocal a = TL3.dialogParts\nt[1] = \n[=[ \n– Ты наверное прослушал те записи из дневника Феникса, когда надевал шлем? – спросил дроид. – И тебя ничего не насторожило?\n– Насторожило?..\n– Ну, не показалось странным, что охотник за наживой ведёт дневник, как какая-нибудь глупышка-принцесса с Альдераана?]=]\n\nt[2] = [=[ \n– То есть дневник – фальшивка? – решил продолжить разговор джедай. – Но зачем?\n– Чтобы какой-нибудь наивный мальчишка был уверен в гибели капитана звездолёта и не пытался раскрутить историю за эту ниточку. Ну или ради шутки. У Феникса было отвратительное чувство юмора, знаешь ли.]=]\nt[3] = [=[ \n– А ты не боишься, – наконец смог сформулировать свои мысли Орнас, – что я всё-таки докопаюсь до настоящей истории твоего хозяина?\n– Боюсь? Я на это рассчитываю.\n– Но почему тогда...\n– Ты сам помог мне разорвать связь с ним, – перебил TL-3. – Я теперь ничего ему не должен. И не обязан помогать скрывать его грязные делишки.\n– А зачем... – вновь попытался спросить джедай.\n– Мне просто интересно, – опять перебил дроид, – ради чего это было затеяно. Что такого он получил, бросив всё, что имел?]=]\nt[4] = [=[ \n– Ты не подумай, – продолжил прерванный диалог TL-3, – Феникс не был ужасным человеком. Хоть и добряком не был, при такой-то работе. Но он был хорошим лидером, команда была для него эффективным инструментом, и он ценил каждого. А тут...\n– Это место меняет людей, – заметил Орнас. – Будоражит эмоции и пробуждает всё самое худшее. Уверен, он бы не поступил так с вами в любой другой ситуации.\n– Этого уже не проверить... – ответил дроид и ненадолго умолк. – Но я видел достаточно, чтобы согласиться. Я не могу испытывать обиду или жажду мести, но всё равно интересно узнать, что с ним случилось. Ненавижу неинформированность...]=]\nt[5] = [=[ \n– А что ты планируешь делать, когда это всё закончится? – попытался продолжить прерванный разговор юноша.\n– Зависит от того, как это всё закончится.\n   TL-3, кажется, исчерпал желание откровенничать и демонстративно ускорился.]=]\nt[6] = [=[ \n   Юноша больше не пытался заговорить со спутником, и в неловком молчании слышалось только мягкое шуршание каких-то деталей дроида.]=]\na = a > #t and #t or a\nreturn t[a]\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 868,
        "calculate": false
      },
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nfunction TL3Text(a)\nTL3 = TL3 or 0\nTL3.visits = (TL3.visits or 0) <plus> 1\n\nlocal p1 = TL3.visits == 1 and\n[=[– Пойдём, – позвал Орнас своего спутника, и они вместе направились вперёд по широкому коридору.\n   TL-3 ехал сбоку от джедая, ничуть не заботясь о возможных опасностях. Он даже не замедлял ход, когда юноша останавливался, чтобы проверить очередной подозрительный участок.]=] or\n[=[  Спутники вновь направились по коридору. На этот раз и сам Орнас позабыл о всякой бдительности и просто шагал рядом с бодро катящимся вперёд астромехаником.]=]\nlocal p2 = TL3.visits == 1 and\n[=[ \n   За очередным поворотом коридор наконец-то упирался в аккуратную дверь.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=] or\n[=[ \n   Они добрались до конца коридора, и створки двери открылись, словно приглашая спутников в небольшой тёмный зал.]=]\n\nreturn p1 .. droidText() .. p2\nend\n\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 868,
        "calculate": false
      },
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nfunction TabLen(a)\nif type(a) == \"table\" then\nlocal s = 0\n  for k in pairs (a) do\n    s = s <plus> 1\n  end\nreturn s\nelse return 0\nend\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 868,
        "calculate": false
      }
    ]
  },
  {
    "id": 869,
    "text": "   Джедай наконец-то решился запоздало отомстить дроиду за подлый обман. В конце концов, TL-3 вернулся к жизни только усилиями юноши, он же её и отберёт.<s>ufeff\n   Остановившись чуть поодаль от суетящегося астромеханика, Орнас с ухмылкой вскинул руку. Уже в следующее мгновение с его пальцев сорвались и устремились к TL-3 голубоватые молнии. Они затрещали, заискрились на его корпусе, оставляя чёрные опалины на металле. Лопалось стекло. Включилась и не успев начаться оборвалась голограмма – это взорвался управляющий блок, брызнули во все стороны осколки.\n   Орнас обессиленно опустил руку, только когда остатки дроида спеклись в сплошной металлический ком. Холодная ненависть постепенно исчезла, осталось только сожаление о напрасной надежде и её потере.",
    "answers": [
      {
        "id": 157,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 870,
    "text": "– Так ты вместе с ней? – зажужжал в наушнике перевод очередной трели TL-3. – Ты хоть знаешь, кто она и что сделала?\n– В общих чер... – попытался ответить джедай.\n– Да кто бы говорил! – взвилась Десс. – Дроид на службе наёмных убийц. Как думаешь, Орнас, кому он станет помогать, когда найдёт своего драгоценного хозяина? Ой, не нам...\n– Хватит, – устало произнёс Орнас. – Лучше бы занялись дверью.\n– Я разберусь с дверью, – удивительно легко согласилась Десс и потянулась к рычагу.\n   Орнас бросил озадаченный взгляд на TL-3, но тот лишь замер на месте. Оставалось только ждать.",
    "answers": [
      {
        "id": 590,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 871,
    "text": "   Когда джедай пришёл в себя Десс уже не было рядом. TL-3 тоже исчез. Орнас с удивлением отметил, что девушка не попыталась убить его, пока была такая возможность. Неужели дроид ей помешал? Но где же он теперь?\n   Голова гудела. ",
    "answers": [
      {
        "id": 493,
        "text": "Оценка состояния Орнаса с учётом штрафов от загадки",
        "lua_text": "function lua_text()\n-- переписать \nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\n\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\n--15\nif bracer == 1 then\npenalties.closeFight = 0\npenalties.stamina = 0\npenalties.speed = 0\npenalties.reaction = 0\nend\n\n\n-- перевод старых штрафов в общую систему\nif location1.bitenArms ~= 0 or \nlocation1.bitenLegs ~= 0 then\n  penalties.reaction = 1\n  penalties.stamina = 1\nelseif ornasStat.bloodedLeg ~= 0 then\n  penalties.speed = 1\n  penalties.legStrenght = 1\nelseif ornasStat.firedArm ~= 0 then\n  penalties.closeFight = 1\n  penalties.accuracy = 1\nend\n\nlocal text =  \"<s>\n   Орнас прислушался к ощущениям собственного тела после всего, произошедшего в храме. \"\n\nif penalties.closeFight == 0 and penalties.accuracy == 0 then\nelseif penalties.closeFight == 1 and penalties.accuracy == 1 then\n  text = text .. \"Руки джедая пронимала мелкая дрожь, а мышцы заметно ослабели. \"\nelseif penalties.closeFight == 1 then\n  text = text .. \"Мышцы на руках джедая заметно ослабели. \"\nelseif penalties.accuracy == 1 then\ntext = text .. \"Руки джедая пронимала мелкая дрожь. \"\nend\n\nif penalties.speed == 0 and penalties.legStrenght == 0 then\nelseif penalties.speed == 1 and penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь не только ощутимо замедлился, но вообще с трудом поднимает их. \"\nelseif penalties.speed == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь ощутимо замедлился. \"\nelseif penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша с трудом поднимает их, хотя это и не сказывалось на скорости. \"\nend\n\nif penalties.reaction == 0 and penalties.stamina == 0 then\nelseif penalties.reaction == 1 and penalties.stamina == 1 then\n  text = text .. \"Затуманенное сознание с трудом воспринимало неестественную усталость тела. \"\nelseif penalties.reaction == 1 then\n  text = text .. \"Затуманенное сознание не позволяло подолгу удерживать внимание на чём-то одном. \"\nelseif penalties.stamina == 1 then\n  text = text .. \"Всё тело сковывала неестественная усталость. \"\nend\n\n\n--на всякий случай\npenalties.closeFight = penalties.closeFight or 0\npenalties.legStrenght = penalties.legStrenght or 0 penalties.stamina =penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\npenalties.speed = penalties.speed or 0\npenalties.accuracy = penalties.accuracy or 0\n\n\n\nif penalties.closeFight == 0 and\npenalties.legStrenght == 0 and penalties.stamina == 0 and \npenalties.reaction == 0 and\npenalties.speed == 0 and\npenalties.accuracy == 0 then\n  text = text .. \"Казалось, что за всё это время юноша даже не устал и находился в оптимальной форме.\"\nelse\n  text = text .. \"Орнас задумался, как могли сложиться события, чтобы он оказался здесь в оптимальной форме, но быстро устал, запутавшись в бесконечных <s><s>\"если<s><s>\".\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 480,
        "text": "Осмотреться",
        "lua_do": "function lua_do()\nUpLine = 1\nend"
      }
    ]
  },
  {
    "id": 872,
    "text": "   Наконец замеченный Орнас под пристальными взглядами проследовал к двери.\n   Небольшой пыльный экран на стене возле сомкнутых створок замерцал, как только юноша подошёл достаточно близко, а затем с шуршанием отъехал вверх, открывая небольшую полость. Внутри ниши оказался металлический рычаг, который, как надеялся Орнас, должен открыть проход.\n   Джедай внимательно осмотрел и прощупал всю стену и саму дверь в поисках скрытых механизмов и ловушек, но в итоге ничего не нашёл. \n– Я тоже ничего больше не обнаружил, – на какое-то время оторвался от Десвиар учитель. – Придётся тебе сыграть в эту игру по чужим правилам.\n   Губы Орнаса сжались. Помощи от спутников не дождёшься...\n– Я разберусь с дверью, – внезапно произнесла Десс, будто подчинившись внутреннему импульсу юноши.\n   Она быстро проследовала к двери и протянула руку к нише.",
    "answers": [
      {
        "id": 873,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 873,
    "text": "   Орнас даже не заметил, как Десвиар быстро коснулась чего-то на экране, после чего дверь открылась. Десс молча ждала, пока юноша обратит на неё внимание, и шагнула внутрь только после того, как он жестом показал ей это сделать.\n   Орнас вошёл следом, на секунду зажмурившись от яркого света, заполнявшего стерильно белый коридор.\n   На мгновение горло юноши сжала невидимая хватка.\n– Ты чудовище, – зашипела Десс прямо ему на ухо, – и ты получишь по заслугам за то, что сделал со мной...\n   Сила, мешающая ему дышать, исчезла так же внезапно, как и возникла. Орнас судорожно глотал воздух, с ужасом смотря на Десвиар. ",
    "answers": [
      {
        "id": 873,
        "text": "Когда вошёл замешкавшийся на входе магистр Льерсо, а створки двери громко лязгнули и сомкнулись за его спиной, она с непринуждённым видом разглядыва свои ногти. Только блеск её глаз не давал Орнасу усомниться, что ему ничего не почудилось.",
        "lua_if": "function lua_if()\nreturn UpLine == 5\nend",
        "merge": true
      },
      {
        "id": 873,
        "text": "Когда вошли замешкавшийеся на входе магистр Льерсо и TL-3, а створки двери громко лязгнули и сомкнулись, Десс с непринуждённым видом разглядыва свои ногти. Только блеск её глаз не давал Орнасу усомниться, что ему ничего не почудилось.",
        "lua_if": "function lua_if()\nreturn UpLine == 8\nend",
        "merge": true
      },
      {
        "id": 874,
        "text": "Дальше",
        "lua_do": "function lua_do()\nforcedDess = 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ndess = dess or {}\ndess.trait = 1\nnewAchieve(\"smnElseWill\",-1,1)\nend",
        "calculate": true,
        "id": 590,
        "text": "Предательство Десс "
      }
    ]
  },
  {
    "id": 874,
    "text": "empty",
    "answers": [
      {
        "id": 493,
        "text": "Оценка состояния Орнаса с учётом штрафов от загадки",
        "lua_text": "function lua_text()\n-- переписать \nornasStat = ornasStat or {}\nlocation1 = location1 or {}\nlocation1.bitenArms  = location1.bitenArms or 0\nlocation1.bitenLegs = location1.bitenLegs or 0\nornasStat.bloodedLeg = ornasStat.bloodedLeg or 0\nornasStat.firedArm = ornasStat.firedArm or 0\nornasStat.darkside = ornasStat.darkside or 0\n\npenalties = penalties or {}\npenalties.bonus = penalties.bonus or {}\npenalties.closeFight = penalties.closeFight or 0\npenalties.stamina = penalties.stamina or 0\npenalties.speed = penalties.speed or 0\npenalties.reaction = penalties.reaction or 0\n--15\nif bracer == 1 then\npenalties.closeFight = 0\npenalties.stamina = 0\npenalties.speed = 0\npenalties.reaction = 0\nend\n\n\n-- перевод старых штрафов в общую систему\nif location1.bitenArms ~= 0 or \nlocation1.bitenLegs ~= 0 then\n  penalties.reaction = 1\n  penalties.stamina = 1\nelseif ornasStat.bloodedLeg ~= 0 then\n  penalties.speed = 1\n  penalties.legStrenght = 1\nelseif ornasStat.firedArm ~= 0 then\n  penalties.closeFight = 1\n  penalties.accuracy = 1\nend\n\nlocal text =  \"<s>\n   Орнас прислушался к ощущениям собственного тела после всего, произошедшего в храме. \"\n\nif penalties.closeFight == 0 and penalties.accuracy == 0 then\nelseif penalties.closeFight == 1 and penalties.accuracy == 1 then\n  text = text .. \"Руки джедая пронимала мелкая дрожь, а мышцы заметно ослабели. \"\nelseif penalties.closeFight == 1 then\n  text = text .. \"Мышцы на руках джедая заметно ослабели. \"\nelseif penalties.accuracy == 1 then\ntext = text .. \"Руки джедая пронимала мелкая дрожь. \"\nend\n\nif penalties.speed == 0 and penalties.legStrenght == 0 then\nelseif penalties.speed == 1 and penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь не только ощутимо замедлился, но вообще с трудом поднимает их. \"\nelseif penalties.speed == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша теперь ощутимо замедлился. \"\nelseif penalties.legStrenght == 1 then\n  text = text .. \"Ноги будто потяжелели, и казалось, что юноша с трудом поднимает их, хотя это и не сказывалось на скорости. \"\nend\n\nif penalties.reaction == 0 and penalties.stamina == 0 then\nelseif penalties.reaction == 1 and penalties.stamina == 1 then\n  text = text .. \"Затуманенное сознание с трудом воспринимало неестественную усталость тела. \"\nelseif penalties.reaction == 1 then\n  text = text .. \"Затуманенное сознание не позволяло подолгу удерживать внимание на чём-то одном. \"\nelseif penalties.stamina == 1 then\n  text = text .. \"Всё тело сковывала неестественная усталость. \"\nend\n\n\n--на всякий случай\npenalties.closeFight = penalties.closeFight or 0\npenalties.legStrenght = penalties.legStrenght or 0 penalties.stamina =penalties.stamina or 0\npenalties.reaction = penalties.reaction or 0\npenalties.speed = penalties.speed or 0\npenalties.accuracy = penalties.accuracy or 0\n\n\n\nif penalties.closeFight == 0 and\npenalties.legStrenght == 0 and penalties.stamina == 0 and \npenalties.reaction == 0 and\npenalties.speed == 0 and\npenalties.accuracy == 0 then\n  text = text .. \"Казалось, что за всё это время юноша даже не устал и находился в оптимальной форме.\"\nelse\n  text = text .. \"Орнас задумался, как могли сложиться события, чтобы он оказался здесь в оптимальной форме, но быстро устал, запутавшись в бесконечных <s><s>\"если<s><s>\".\"\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 729,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn UpLine == 5\nend"
      },
      {
        "id": 763,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\n--Десс\nreturn UpLine == 8\nend"
      }
    ]
  },
  {
    "id": 875,
    "text": "– Ты проницателен не по годам, – улыбнулся магистр Льерсо. – Мне даже интересно, как ты собираешься справляться с этим.\n   Будто в подтверждение его слов Десвиар, с задумчивым видом изучающая дверь, отступила на несколько шагов и врезалась в TL-3. Тот мгновенно разразился бранью, и девушка с азартом присоединилась к обмену колкостями и прямыми оскорблениями. Эмоции накалялись, и казалось, конфликт вот-вот перерастёт в драку.\n   Орнас проскользнул к двери и будто невзначай оказался между спорящими, но те и не думали обращать внимание на такое незначительное затруднение.\n– Нужно двигаться дальше! – сказал он громко. – Помогите мне разобраться с дверью, кто-нибудь!\n– Я разберусь с дверью, – внезапно произнесла Десс, будто подчинившись внутреннему импульсу юноши.\n   Она быстро проследовала к двери и протянула руку к нише.",
    "answers": [
      {
        "id": 873,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 876,
    "text": "   Орнас затаил дыхание и прислушался. Нет, не причудилось. Едва различимая в неосвещённом коридоре фигура. С каждым шагом силуэт становился чётче: человек в плаще, невысокий и немного сутулый, как и сам Орнас, быстро и почти бесшумно приближался. Тьма окружала его. Он будто сам источал тьму.\n   Ещё немного, и незнакомец поравняется с нишей, в которой укрылся Орнас. Мгновение – и мрак разорвал красный луч светового меча. Ситх!\n   Учитель всегда говорил, что нет ничего постыдного в том, чтобы отступить перед угрозой, которая тебе не по силам. И Орнас понимал, что сейчас именно такой случай: никто не упрекнёт подростка, даже не закончившего обучение, за благоразумное отступление перед неизвестным противником. Или всё-таки?..\n   Орнас поморщился. Нет, он не может дать сверстникам повод смеяться над собой, только не снова. Разве он не готовился пройти испытание и получить звание рыцаря-джедая, как только разрешит учитель? Если он хотел, чтобы его считали взрослым, ему предстояло и действовать как взрослому.\n   Юноша спокойно выдохнул и представил, как бы сейчас поступил тот джедай, которым он всегда хотел стать.",
    "answers": [
      {
        "id": 877,
        "text": "Использовать световой меч",
        "bgAnswerImage": [
          "https://i.ibb.co/vhmDQb8/image-8599747-17262429.png"
        ],
        "var_set": [
          "style",
          1
        ]
      },
      {
        "id": 878,
        "text": "Использовать Силу",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "var_set": [
          "sila",
          2,
          "style",
          2
        ]
      },
      {
        "id": 879,
        "text": "Использовать скрытность",
        "bgAnswerImage": [
          "https://i.ibb.co/WpfxznQ/image.png"
        ],
        "var_set": [
          "vnimatelnost",
          2,
          "style",
          3
        ]
      },
      {
        "id": 881,
        "text": "Использовать ум",
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ],
        "var_set": [
          "vnimatelnost",
          1,
          "style",
          4
        ]
      },
      {
        "id": 880,
        "text": "Использовать дипломатию",
        "bgAnswerImage": [
          "https://i.ibb.co/4phV0gv/image.png"
        ],
        "var_set": [
          "sila",
          1,
          "style",
          5
        ]
      },
      {
        "id": 12,
        "text": "Всплывабщее окно с инфой по разблокированию стилей\nКаждый ответ соответсвует определённому стилю прохождения: для каждого стиля доступны уникальные варианты действий; одни и те же действия могут приводить к разным последствиям для разных стилей.\n \nПри первом прохождении доступны только два стиля, остальные можно разблокировать после выполнения определённых условий в самом квесте. Подсказки для разблокирования каждого варианта можно будет найти в меню достижений после первого прохождения.\n\n3 -- пройти все комнаты, не вступая в бой\n4 -- успешный ремонт дроида -- Вы пропустили элемент, необходимый для понимания подсказки!\n5 -- доверие Десс больше 12 -- Вы пропустили элемент, необходимый для понимания подсказки!",
        "calculate": true,
        "super_calculate": false
      }
    ]
  },
  {
    "id": 877,
    "text": "   Орнас обучался фехтованию усерднее сверстников и тренировался в любую свободную минуту, оттачивая мастерство. В Ордене Джедаев даже поговаривали, что талантливый падаван бы мог одолеть в бою и иных рыцарей. Если он и мог в чём-то противостоять неизвестному противнику, так это в прямой схватке.\n   Он выскочил из своего укрытия и обрушился на незнакомца. Его световой меч синими всполохами сверкал вокруг противника, прощупывая оборону. Несколько мощных выпадов, затем отскок, новая атака... Ситх отбивался с лёгкостью, даже не пытаясь завладеть инициативой.\n   Мечи скрестились. За слепящими лучами Орнас увидел лицо противника. Своё лицо. Тот же высокий лоб, тонкая полоска губ, острый подбородок. Только глаза будто налились кровью, отражая алый клинок.\n   Орнас был готов закричать, но голос не пробивался через распахнутый рот...",
    "answers": [
      {
        "id": 882,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 878,
    "text": "   Всё свободное время Орнас уделял постижению Силы во всех её проявлениях. Он учился усерднее сверстников, без устали оттачивал навыки, а его вопросы порой ставили в тупик даже магистров Ордена Джедаев. Если он и мог в чём-то противостоять неизвестному противнику, так это во владении приёмами Силы.\n   Он выскочил из своего укрытия и попытался обездвижить ситха. Сложный приём, от которого не могли защищаться ровесники Орнаса, на противника не подействовал вовсе. Мощная телекинетическая волна развеялась, едва сорвавшись с рук юноши. Попробовать ускорение?..\n   Но предпринять хоть что-то ещё Орнас не успел – теперь его самого сковала невидимая хватка. Он застыл на месте, не в силах даже моргнуть или отвести взгляд. Прямо перед ним возникло надменное лицо противника. Лицо самого Орнаса. Тот же высокий лоб, тонкая полоска губ, острый подбородок. Только глаза будто налились кровью, отражая алый клинок.\n   Орнас был готов закричать, но голос не пробивался через стиснутые зубы...",
    "answers": [
      {
        "id": 882,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 879,
    "text": "   Жизнь научила Орнаса, что самая надёжная атака – удар в уязвимое место, нанесённый из тени. Он был самым наблюдательным среди сверстников, а тренировки и приёмы Силы помогли отточить этот навык. Особенно Орнас гордился тем, что об этом его таланте не знал почти никто в Ордене Джедаев. Если он и мог в чём-то противостоять неизвестному противнику, то найти это предстояло здесь и сейчас.\n   Орнас укрылся Силой от чужого взгляда и тенью проскользил из своего укрытия за спину замершего ситха. Слабый телекинетический импульс куда-то в сторону поднял облачко пыли и заставил противника резко повернуться. Быстрый взмах светового меча должен был обезоружить незнакомца, но вся его фигура вдруг растаяла клубами чёрного дыма.\n   Орнас успел обернуться, боковым зрением заметив красный всполох позади себя. Прямо перед ним возникло надменное лицо противника. Лицо самого Орнаса. Тот же высокий лоб, тонкая полоска губ, острый подбородок. Только глаза будто налились кровью, отражая алый клинок.\n   Орнас был готов закричать, но голос не пробивался из его распахнутого рта...",
    "answers": [
      {
        "id": 882,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 880,
    "text": "   В отличие от сверстников Орнас чувствовал в словах старших о ценности жизни особый смысл. Несмотря на насмешки, он с особым усердием оттачивал те навыки, которые позволяли добиваться целей, не вступая в схватку. \n– Я Орнас, падаван магистра Высшего Совета джедаев Астора Льерсо, – медленно произнёс он, выходя из своего укрытия. – Тебе сохранят жизнь и помогут, если ты будешь сотрудничать. Убери оружие и остановись.\n   Но незнакомец и не думал слушаться. Он размеренно шагал навстречу Орнасу, держа меч высоко над головой. Освещает путь или готовится атаковать? Ещё пара шагов – и юноша смог разглядеть черты лица противника. Это было его лицо!.. Тот же высокий лоб, тонкая полоска губ, острый подбородок. Только глаза будто налились кровью, отражая алый клинок.\n   Орнас был готов закричать, но не смог издать ни звука...",
    "answers": [
      {
        "id": 882,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 881,
    "text": "   Орнаса по праву считали одним из способнейших учеников в Ордене. Ему легко давались науки и сложные вычисления, а свободное время он проводил в мастерской, ковыряясь в технике. Необычное увлечение стало ещё одним предметом для подколок сверстников, но взрослые по достоинству оценивали его практичность. Если Орнас и мог в чём-то противостоять неизвестному противнику, так это в нестандартном мышлении.\n   Что дано? Узкий коридор, темнота, ниша, ситх со световым мечом, сам Орнас и его меч... Он похлопал себя по одежде и сразу нащупал несколько устройств, которые то и дело таскал из мастерской. Решение тут же пришло само собой.\n   Орнас быстро перецепил детали со своих приборов к компактному генератору, и когда незнакомец приблизился к укрытию юноши почти вплотную, самодельная бомба была готова. Главное – поплотнее вжаться в стену, чтобы не задело его самого.\n   Взрыв оглушил Орнаса. Голова раскалывалась от звона в ушах, зажмуренные глаза резало едким дымом. Но когда юноша нашёл в себе силы открыть их, он увидел прямо перед надменное лицо ситха. Лицо самого Орнаса. Тот же высокий лоб, тонкая полоска губ, острый подбородок. Только глаза будто налились кровью, отражая алый клинок.\n   Орнас пытался кричать, но даже не услышал свой голос...",
    "answers": [
      {
        "id": 882,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 882,
    "text": "   Видение закончилось так же внезапно, как и началось. Орнас лежал на полу своей каюты, весь взмокший от пота, его била дрожь. Он сел и предался медитации, пытаясь очистить голову от мыслей и переживаний.\n   Предвидение Силы – опасный знак, но попытки его трактовать могут лишь запутать неокрепший ум. Так говорил учитель.\n   \"Учитель... Звездолёт... Миссия...\" – постепенно вспоминал Орнас. Он ведь как раз готовился к предстоящему заданию, когда...\n   Корабль дёрнуло. Звёзды за иллюминатором перестали мельтешить, смазываясь яркими полосами, и замерли далёкими блёстками. \"Вышли из гиперпространства\", – отметил Орнас, глядя на приближающуюся систему с одинокой планетой и россыпью спутников.\n   Ещё оставалось немного времени на подготовку к миссии, но Орнасу не терпелось рассказать учителю о своём видении.",
    "answers": [
      {
        "id": 883,
        "text": "Поспешить к учителю"
      },
      {
        "need_ever": true,
        "middle_answer": true,
        "text": "[Пропустить пролог]",
        "need": [
          34
        ],
        "id": 34
      }
    ]
  },
  {
    "id": 883,
    "text": "   Орнас нашёл учителя на мостике, где тот медитировал, сидя прямо на полу. Расслабленное лицо, покрытое сетью морщин, седина в волосах и в короткой аккуратной бороде, неподвижно зависшая в воздухе рукоять светового меча – именно так и должен выглядеть мудрый наставник, магистр могущественного ордена. В присутствии мастера Льерсо Орнасу почти всегда становилось спокойнее. Вот и сейчас он помедлил, не решаясь привлечь к себе внимание.\n– Твоё беспокойство громче звука шагов, – открыл глаза учитель. Он поднялся с пола, быстрым движением подхватил и убрал на пояс световой меч. – Что тебя так встревожило?<s>ufeff\n   Орнас рассказал о видении в мельчайших подробностях. Магистр Льерсо лишь хмурил брови.",
    "answers": [
      {
        "id": 884,
        "text": "Ждать ответа"
      }
    ]
  },
  {
    "id": 884,
    "text": "   Некоторое время наставник молчал, немного вздёрнув подбородок и задумчиво разглаживая пальцами бородку. Затем откуда-то появился крохотный металлический диск и через секунду над ладонью старого мастера возникла объёмная голографическая карта, испещрённая разноцветными надписями и фигурами. Орнас впервые видел вживую таинственный \"список\", о котором в Ордене джедаев ходили самые невероятные слухи. Учитель мягко коснулся одной из звёзд на карте, и цвет ближайшей отметки изменился.<s>ufeff\n– Мы почти прибыли, –  тихо проговорил джедай, неопределённо кивнув не то в сторону голограммы, не то на широкий иллюминатор: корабль взял курс на один из спутников. – В этом месте тёмная сторона Силы чрезвычайно мощна, твоё видение могло быть вызвано ей. Но это не всё. Пока ты был занят, я беседовал с Советом. Все магистры наконец согласились с тем, что ты готов пройти испытания и стать рыцарем-джедаем.<s>ufeff\n– Сразу после миссии? – взволнованно спросил юноша. – Или мы возвращаемся в академию на Корусант прямо сейчас?<s>ufeff\n– Мы не возвращаемся, – сдержанно ответил учитель. – Пока нет. Я чувствую, что в этом задании ты смог бы показать всё то, чему так упорно учился. Я убедил Совет засчитать тебе выполнение этой миссии в качестве испытаний.",
    "answers": [
      {
        "id": 885,
        "text": "Собраться с мыслями"
      }
    ]
  },
  {
    "id": 885,
    "text": "   Орнас хотел что-то сказать, но только беззвучно приоткрыл рот. Он не знал, готов ли к испытанию, но чувствовал облегчение. Облегчение из-за того, что никто этого не увидит, что никто не будет ехидно обсуждать каждый его шаг. И никто, кроме самого Орнаса, не сможет пострадать.\n   Тем временем корабль вошёл в атмосферу, затем мягко приземлился на багряную каменистую поверхность луны. Совсем рядом над пологой местностью возвышалась ступенчатая пирамида. Красная, как и всё вокруг. Давящая. Неправильная. Орнас почувствовал, что мощная энергия тёмной стороны Силы таится внутри этого здания. Он невольно вздрогнул.<s>ufeff\n   В кабину зашёл помощник пилота и сообщил, что атмосфера спутника и гравитационные параметры в норме. Услышав это, Орнас вопросительно посмотрел на учителя. Тот кивнул, и джедаи, накинув коричневые плащи, направились к трапу. Орнас спустился на скалистую поверхность вслед за наставником, который быстрым шагом направился к строению и остановился перед внушительной каменной лестницей, ведущей к массивной арке двери.",
    "answers": [
      {
        "id": 886,
        "text": "Догнать учителя",
        "lua_do": "function lua_do()\ng.blockSaves = 0\nend"
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 3\nend",
        "lua_do": "function lua_do()\n--g.blockSaves = 1\nachievements = achievements or {}\nif not isHistoryContain(10) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\nend",
        "text": "Осмотреть поверхность",
        "need": -10,
        "id": 10
      },
      {
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 3\nend",
        "lua_do": "function lua_do()\n--g.blockSaves = 1\n\nachievements = achievements or {}\nif not isHistoryContain(11) then\nachievements.searchCount = (achievements.searchCount or 0) <plus> 1\nend\n\nend",
        "text": "Осмотреть сооружение",
        "need": -11,
        "id": 11
      },
      {
        "need_ever": true,
        "need_sometimes": false,
        "id": 9,
        "text": "Добавить всплывающую строку с предложением сохраниться",
        "need": [
          -10,
          -11,
          -12
        ],
        "lua_if": "function lua_if()\nreturn false\nend",
        "super_calculate": false,
        "calculate": true,
        "lua_do": "function lua_do()\ng.blockSaves = 0\nmessage(\"Вы можете сохраниться здесь, чтобы пропустить вводную часть квеста при повторном прохождении\")\nend"
      }
    ]
  },
  {
    "id": 886,
    "text": "  Юный джедай нагнал своего наставника, когда он уже остановился на верхней ступени лестницы.<s>ufeff\n– Информация от контрабандистов оказалась верна, в определенной степени, – проговорил тот. – Конечно, это не секретная академия ситхов, а лишь заброшенный храм одного из древних владык, но он таит в себе не меньше опасности. Тебе предстоит исследовать эту гробницу и убедиться, что это место не сможет причинить кому-нибудь вреда. Ни своими ловушками, ни тайнами, которые здесь сокрыты. Внутри ты встретишь множество опасностей, которые испытают твой дух, силу, смелость, стойкость и проницательность.<s>ufeff\n   Мастер выдержал небольшую паузу, собираясь с мыслями, затем заговорил вновь:\n– Когда-то давно на исследование спутника отправились другие джедаи, но они бесследно исчезли, возможно даже не добравшись до нужной системы. Тьма этого места скорее всего порождена каким-то артефактом Тёмной стороны, тебе нужно найти его и обезвредить. Я буду ожидать тебя здесь и вмешаюсь, если почувствую, что ты в смертельной опасности.",
    "answers": [
      {
        "id": 17,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 887,
    "text": "empty",
    "answers": [
      {
        "id": 469,
        "text": "Осмотреться",
        "lua_if": "function lua_if()\nreturn codeBonus\nend"
      },
      {
        "id": 468,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\nlocal text = \"\"\n\nif codeBonus == \"jedy\" then\n  text = \"<s>\n   Уже на грани потери сознания Орнас сумел вычленить из нахлынувшего на него хаоса заученные до автоматизма строки кодекса джедаев:<s>\n  <s><s>\"Нет эмоций - есть покой.<s>\n   Нет неведения - есть знание.<s>\n   Нет страстей - есть ясность мыслей.<s>\n   Нет хаоса - есть гармония.<s>\n   Нет смерти - есть Великая Сила.<s><s>\"<s>\n   Эти слова постепенно вернули привычную ясность в мысли юноши и наполнили его сердце спокойствием. Джедай сделал несколько глубоких вдохов и выдохов, окончательно прогоняя наваждение.\"\nelseif codeBonus == \"sith\" then\n  text = \"<s>\n   Через ещё одно бесконечно долгое мгновение в памяти Орнаса вспыхнули строки:<s>\n  <s><s>\"Покой — это ложь, есть только страсть.<s>\n   Со страстью я получаю силу.<s>\n   С силой я получаю мощь.<s>\n   С мощью я получаю победу.<s>\n   С победой мои оковы рвутся.<s>\n   Сила освободит меня..<s><s>\"<s>\n   Эти слова отдавались эхом в опустевшей голове юноши, а их пугающий смысл медленно пробуждал его сознание. Орнас провёл рукой по лицу и волосам, будто сбрасывая наваждение, и окончательно пришел в себя.\"\nelseif codeBonus == \"none\" then\n  text = \"<s>\n   <s><s>\"Сила объединяет страсть и покой...<s><s>\" – попытался связать слова во что-то осмысленное Орнас, но тут же удивился собственным мыслям: <s><s>\"Ну что за чушь?..<s><s>\"<s>\n   И потерял сознание. Юноше показалось, что очнулся он буквально через мгновение, даже на ногах устоял. Лишь едва уловимый запах красной пыли напоминал о минутном наваждении.\"\nend\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 468,
        "calculate": true,
        "lua_do": "function lua_do()\n\nTL3 = TL3 or {}\nTL3.position = TL3.position or \"not defined\"\ndess = dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\nmaster = master or {}\nmaster.position = master.position or 1\n\nUpLine = \n  (TL3.position ~= \"at the stairs\" and dess.isUpstairs ~= 1 and master.position ~= 156) and 1 -- alone\n  or \n(TL3.position ~= \"at the stairs\" and dess.isUpstairs == 1 and master.position ~= 156) and 2 -- with Dess\n  or\n(TL3.position ~= \"at the stairs\" and dess.isUpstairs ~= 1 and master.position == 156) and 3 -- with Master\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs ~= 1 and master.position ~= 156) and 4 -- with TL-3\n  or\n(TL3.position ~= \"at the stairs\" and dess.isUpstairs == 1 and master.position == 156) and 5 -- Master and Dess\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs ~= 1 and master.position == 156) and 6 -- Master and TL-3\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs == 1 and master.position ~= 156) and 7 -- Dess and TL-3\n  or\n(TL3.position == \"at the stairs\" and dess.isUpstairs == 1 and master.position == 156) and 8 -- all\n  or 9 -- error\n\nif UpLine == 9 then\n-- dialog error\nUpLine = 1\nend\n\nUpLineHelp = (UpLine == 1 and \"alone\") or (UpLine == 2 and \"with Dess\") or  (UpLine == 3 and \"with Master\") or (UpLine == 4 and \"with TL-3\") or (UpLine == 5 and \"with Master and Dess\") or (UpLine == 6 and \"With Master and TL-3\") or (UpLine == 7 and \"with Dess and TL-3\") or (UpLine == 8 and \"with all the mates\")\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\ncodeBonus = nil\nend",
        "text": "Рестарт",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "id": 468
      }
    ]
  },
  {
    "id": 888,
    "text": "   Шаг за шагом, виток за витком, всё выше и выше по лестнице. Орнас боялся моргнуть лишний раз, чтобы веки не смыкались слишком надолго. Потому что каждый раз, когда это происходило, перед глазами всплывали видения из прошлого\n   Такая же винтовая лестница. Темнота и дождь. Маленький мальчик, шлёпающий босыми ногами по скользким ступеням. Мать то и дело оборачивается, проверяет, не отстал ли он. Она уже не подгоняет сына, после того как Орнас несколько раз поскользнулся и чуть не упал. Когда на неё падает свет очередного фонаря, на лице отражается тревога и страх.\n   Страх – это слабость, а слабых нужно использовать или уничтожать. Так говорил отец. Но он сам оказался слабым, и теперь Орнас с матерью бегут, как вомп-крысы с помойки. Мать не знает, что можно не спешить, Орнас не сказал ей больше, чем нужно. Она теряет много сил и боится. А страх – это слабость...",
    "answers": [
      {
        "id": 889,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 889,
    "text": "   Лестница наконец закончилась. ",
    "answers": [
      {
        "id": 889,
        "text": "Едва Орнас выбрался через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Юноша оказался в полной темноте.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 1\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас и Десс выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Только неровное дыхание Десвиар где-то рядом не давало полностью раствориться в непроглядной темноте, поглотившей их.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 2\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас с учителем выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Только размеренное дыхание Магистра Льерсо где-то рядом не давало юноше полностью раствориться в непроглядной темноте, поглотившей их.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 3\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас и TL-3 выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Только цветные индикаторы дроида где-то рядом не давали непроглядной темноте полностью поглотить спутников.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 4\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас с учителем и Десвиар выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Размеренное дыхание Магистра Льерсо где-то рядом перемежалось с отрывистыми вздохами Десс. Непроглядная темнота поглотила их.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 5\n--учитель и Десс\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас с учителем и TL-3 выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Юноша слышал размеренное дыхание Магистра Льерсо где-то рядом, и только цветные индикаторы дроида не давали непроглядной темноте полностью поглотить спутников.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 6\n--учитель и TL-3\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас с Десвиар и TL-3 выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Юноша слышал прерывистое дыхание Десс где-то рядом, и только цветные индикаторы дроида не давали непроглядной темноте полностью поглотить спутников.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 7\n--Десс и TL-3\nend",
        "merge": true
      },
      {
        "id": 889,
        "text": "Едва Орнас с учителем, Десвиар и TL-3 выбрались через круглый люк в мрак неизвестности, как створки с тихим щелчком сомкнулись. Юноша слышал размеренное дыхание учителя и отрывистые вздохи Десс где-то рядом, и только цветные индикаторы дроида не давали непроглядной темноте полностью поглотить спутников.\n   Глаза постепенно привыкали к недостатку освещения. В еле различимых сгустках тьмы угадывались очертания стен. Но чем дольше Орнас вглядывался, тем сильнее нарастало чувство опасности.\n   Он тревожно заозирался.",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 8\n-- учитель, Десс и TL-3\nend",
        "merge": true
      },
      {
        "id": 894,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 890,
    "text": "Страница g.reloadFunctions",
    "answers": [
      {
        "id": 890,
        "text": "Новый ответ. введите текст",
        "comment": false
      },
      {
        "lua_if": "function lua_if()\nreturn droidTextFunctionOn\nend",
        "super_calculate": false,
        "lua_do": "function lua_do()\nfunction droidText()\ng.reloadFunctions = nil\nTL3 = TL3 or {}\nTL3.dialogParts = TL3.dialogParts or 0\nTL3.dialogParts = TL3.dialogParts <plus> 1\nlocal t = {}\nlocal a = TL3.dialogParts\nt[1] = \n[=[ \n– Ты наверное прослушал те записи из дневника Феникса, когда надевал шлем? – спросил дроид. – И тебя ничего не насторожило?\n– Насторожило?..\n– Ну, не показалось странным, что охотник за наживой ведёт дневник, как какая-нибудь глупышка-принцесса с Альдераана?]=]\n\nt[2] = [=[ \n– То есть дневник – фальшивка? – решил продолжить разговор джедай. – Но зачем?\n– Чтобы какой-нибудь наивный мальчишка был уверен в гибели капитана звездолёта и не пытался раскрутить историю за эту ниточку. Ну или ради шутки. У Феникса было отвратительное чувство юмора, знаешь ли.]=]\nt[3] = [=[ \n– А ты не боишься, – наконец смог сформулировать свои мысли Орнас, – что я всё-таки докопаюсь до настоящей истории твоего хозяина?\n– Боюсь? Я на это рассчитываю.\n– Но почему тогда...\n– Ты сам помог мне разорвать связь с ним, – перебил TL-3. – Я теперь ничего ему не должен. И не обязан помогать скрывать его грязные делишки.\n– А зачем... – вновь попытался спросить джедай.\n– Мне просто интересно, – опять перебил дроид, – ради чего это было затеяно. Что такого он получил, бросив всё, что имел?]=]\nt[4] = [=[ \n– Ты не подумай, – продолжил прерванный диалог TL-3, – Феникс не был ужасным человеком. Хоть и добряком не был, при такой-то работе. Но он был хорошим лидером, команда была для него эффективным инструментом, и он ценил каждого. А тут...\n– Это место меняет людей, – заметил Орнас. – Будоражит эмоции и пробуждает всё самое худшее. Уверен, он бы не поступил так с вами в любой другой ситуации.\n– Этого уже не проверить... – ответил дроид и ненадолго умолк. – Но я видел достаточно, чтобы согласиться. Я не могу испытывать обиду или жажду мести, но всё равно интересно узнать, что с ним случилось. Ненавижу неинформированность...]=]\nt[5] = [=[ \n– А что ты планируешь делать, когда это всё закончится? – попытался продолжить прерванный разговор юноша.\n– Зависит от того, как это всё закончится.\n   TL-3, кажется, исчерпал желание откровенничать и демонстративно ускорился.]=]\nt[6] = [=[ \n   Юноша больше не пытался заговорить со спутником, и в неловком молчании слышалось только мягкое шуршание каких-то деталей дроида.]=]\na = a > #t and #t or a\nreturn t[a]\nend\n\n\nfunction TL3Text(a)\nTL3 = TL3 or 0\nTL3.visits = (TL3.visits or 0) <plus> 1\n\nlocal p1 = TL3.visits == 1 and\n[=[– Пойдём, – позвал Орнас своего спутника, и они вместе направились вперёд по широкому коридору.\n   TL-3 ехал сбоку от джедая, ничуть не заботясь о возможных опасностях. Он даже не замедлял ход, когда юноша останавливался, чтобы проверить очередной подозрительный участок.]=] or\n[=[  Спутники вновь направились по коридору. На этот раз и сам Орнас позабыл о всякой бдительности и просто шагал рядом с бодро катящимся вперёд астромехаником.]=]\nlocal p2 = TL3.visits == 1 and\n[=[ \n   За очередным поворотом коридор наконец-то упирался в аккуратную дверь.\n   Возле элегантной арки стерильная белизна стен коридора нарушалась – вырванная целиком панель обшивки обнажила ворох трубок и проводов, отвечавших, видимо, за управление дверью. Самой панели нигде не было видно.\n   При приближении юноши створки двери раздвинулись, образуя проход в небольшой тёмный зал.]=] or\n[=[ \n   Они добрались до конца коридора, и створки двери открылись, словно приглашая спутников в небольшой тёмный зал.]=]\n\nreturn p1 .. droidText() .. p2\nend\n\nend",
        "text": "Тексты для дроида",
        "id": 496,
        "calculate": true
      },
      {
        "lua_if": "function lua_if()\nreturn true -- g.compOn\nend",
        "super_calculate": true,
        "id": 642,
        "calculate": false,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\n\nfunction compMapGen()\ncomputing = computing or {}\ncomputing.cells = computing.cells or  {}\n\ncomputing.elements = computing.elements or {}\n\ncomputing.elements.generator = {position = 1; capacity = 6; charge = 0; text = \"Генератор<s>\n\"; rodPad = \"генератора\"; vinPad = \"генератор\"; zeroChargeSelection = 0}\n\ncomputing.elements.bigOne = {position = 2; capacity = 5; charge = 0; text = \"Штука побольше<s>\n\"; rodPad = \"штуки побольше\"; vinPad = \"штуку побольше\"; zeroChargeSelection = 0}\n\ncomputing.elements.thatThing = {position = 3; capacity = 4; charge = 0; text = \"Штука<s>\n\"; rodPad = \"штуки\"; vinPad = \"штуку\";  zeroChargeSelection = 0}\n\ncomputing.elements.mainExit = {position = 4; capacity = 6; charge = 0; text = \"Выход<s>\n\"; rodPad = \"выхода\"; vinPad = \"выход\";  zeroChargeSelection = 1}\n\ncomputing.elements.preservator = {position = 5; capacity = 4; charge = 0; text = \"Предохранитель<s>\n\"; rodPad = \"предохранителя\"; vinPad = \"предохранитель\";  zeroChargeSelection = 0}\n\ncomputing.elements.important = {position = 6; capacity = 4; charge = 3; text = \"Важная штука<s>\n\"; rodPad = \"важной штуки\"; vinPad = \"важную штуку\";  zeroChargeSelection = 1}\n\ncomputing.elements.smallOne = {position = 7; capacity = 3; charge = 0; text = \"Штука поменьше<s>\n\"; rodPad = \"штуки поменьше\"; vinPad = \"штуку поменьше\";  zeroChargeSelection = 0}\n\ncomputing.elements.oneMoreExit = {position = 8; capacity = 4; charge = 0; text = \"Ещё один выход<s>\n\"; rodPad = \"ещё одного выхода\"; vinPad = \"ещё один выход\";  zeroChargeSelection = 1}\n\n  for k, v in pairs (computing.elements) do\n     v.destroyed = 0\n  end\n\nend\n\n--\n\n--Инициализация данных \nfunction computingIni ()\n  computing = computing or {}\n  computing.gradient = computing.gradient or 0\n  computing.gradPressed = computing.gradPressed or 0\n  computing.timerReverse = 0\n  computing.trainEnd = 0\n  computing.gradientOff = 1\n\n  if not computing.elements then\n     -- назначение ячеек\n      compMapGen()\n  end\nend\n\n--\n\n--Копирование значений из elements в cells\nfunction elementsToCells()\nfor i = 1, 8 do\n   for k, v in pairs (computing.elements)\n   do\n      if i == v.position then\n         computing.cells[i] = v\n      else\n      end\n   end\nend\nend\n\n--\n\n--Копирование значений из cells в elements\nfunction cellsToElements()\nfor i = 1, 8 do\n   for k, v in pairs (computing.elements)\n   do\n      if i == v.position then\n         v = computing.cells[i]\n      else\n      end\n   end\nend\nend\n\n--\n\n--Функция удаления из таблицы заданного числа - вспомогательная\nfunction deleteNumber(tab, a)\n   for k,v in pairs(tab) do\n      if v == a then\n         table.remove(tab, k)\n      else end\n   end\nend\n\n--\n\n--Функция поиска соседних ячеек и вывода в таблицу\nfunction getNeighTab(a)\nlocal t = {}\n\n  if a == 1 then\n   t = {2,3}\n  elseif a == 2 then\n   t = {1,4}\n  elseif a == 3 then\n   t = {1,4, 5}\n  elseif a == 4 then\n   t = {2,3,6}\n  elseif a == 5 then\n   t = {3,6,7}\n  elseif a == 6 then\n   t = {4,5,8}\n  elseif a == 7 then \n   t = {5,8}\n  elseif a == 8 then\n   t = {6,7}\n  end\n\nfor i = 1,8 do\n   if computing.cells[i].destroyed == 1 then\n      deleteNumber(t, i)\n   else end\nend\n\nreturn t\nend\n\n--\n\n--Функция поиска соседних ячеек\nfunction compNeighbor(a)\nlocal b = a or computing.source or 1\nlocal t = getNeighTab(b)\n\n--удаление предыдущих результатов\nfor i = 1,8 do\n   computing.cells[i].neighbourToSource = 0\nend\n\n  for k, v in pairs(t) do\n     computing.cells[v].neighbourToSource = 1\n  end\nend\n\n--\n\n--Функция списание с источника заряда - по нажатию\nfunction chargeReplace(a)\n    computing.replacedCharge = computing.cells[a].charge\n   computing.cells[a].charge = 0\nend\n\n--\n\n--Функция передачи заряда - по нажатию\nfunction chargeTransfer(a)\n  local t = a or computing.target or 2\n  computing.cells[t].charge = computing.cells[t].charge <plus> computing.replacedCharge\n  computing.replacedCharge = nil\n  computing.source = nil\n  computing.target = nil\nend\n\n--\n\n--Функции проверки на перегоревшие ячейки - авто\nfunction destroyDialog(a)\n  local t = computing.cells[a].text\n  local cm = computing.currentMission\n  \n  local p = 643\n   if computing.cells[a].destroyAlert ~= 1 then\n    if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" then\n    p = 640\n    computing.cells[a].charge = 1\n    computing.cells[a].destroyed= 0\n    cellsToElements()\n    dialog ({header = \"Перегрузка\", text = \"Превышение допустимой мощности для ячейки \" .. t .. \"Ячейка сгорела (режим симуляции)\", answers = {\n    {text = \"Перезапустить симуляцию\", pressListener = function ()\n    hideDialog() end }\n    }\n    })\n\n\n    elseif computing.currentMission == \"t5\" then\n      computing.trainEnd = 1\n      compMapGen()\n   else\n     dialog ({header = \"Перегрузка\", text = \"Превышение допустимой мощности для ячейки \" .. t .. \"Ячейка сгорела\", answers = {\n    {text = \"Всё равно продолжить\", pressListener = function ()\n    computing.cells[a].destroyAlert = 1\n    hideDialog() end },\n    {text = \"Закончить попытку\", pressListener = function ()\n    CompEnotherHelpVar = 2  -- !!!!!!\n    showPage {id = p}\n    hideDialog() end}\n    }\n    })\n    end\n  else end\nCompEnotherHelpVar = CompEnotherHelpVar == 2 and 2 or 0\nend\n\n\nfunction cellsCheck()\n  local cm = computing.currentMission\n  preservation()\n\n  for i = 1,8 do\n    if computing.cells[i].charge > computing.cells[i].capacity then\n        if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" then\n          computing.cells[i].charge = 2\n          destroyDialog(i)\n       elseif cm == \"end\" then\n       else\n         computing.cells[i].destroyed = 1\n         computing.cells[i].capacity = -1\n         computing.cells[i].charge = 0\n         destroyDialog(i)\n       end \n    end\n  end\nend\n\n--\n\n--Функция генерации заряда для генератора - авто\nfunction generate()\nlocal pos = computing.elements.generator.position\nif computing.elements.generator.destroyed ~= 1 then\n   computing.GeneratorMult = computing.GeneratorMult or 1\n   local a = computing.GeneratorMult\n   computing.cells[pos].charge = computing.cells[pos].charge <plus> a\n   computing.messageText = (computing.messageText or \"\") .. \"Генератор произвёл \" .. (a == 1 and \"1 заряд мощности<s>\n\" or \"2 заряда мощности<s>\n\")\nelse end\nend\n\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn true -- g.compOn\nend",
        "super_calculate": true,
        "lua_do": "function lua_do()\n--Функция сжигания заряда на выходах - авто\nfunction burnEnergy()\n  local a = computing.elements.mainExit.position -- номер большого выхода\n  local b = computing.elements.oneMoreExit.position -- номер второго выхода \n  if computing.cells[a].charge > 1 then\n     computing.cells[a].charge = computing.cells[a].charge - 2\n     computing.exitBurns = 2\n     \n     computing.messageText = (computing.messageText or \"\") .. \"Через выход передано вовне 2 заряда<s>\n\"\n   elseif computing.cells[a].charge == 1 then\n     computing.exitBurns = 1\n     \n     computing.cells[a].charge = 0\n     computing.messageText = (computing.messageText or \"\") .. \"Через выход передан вовне 1 заряд<s>\n\"\n  else\n     computing.exitBurns = 0\n  end\n\n  if computing.cells[b].charge > 0 then\n     computing.cells[b].charge = computing.cells[b].charge - 1\n    computing.oneMoreExitBurns = 1\n     computing.messageText = (computing.messageText or \"\") .. \"Через ещё один выход передан вовне 1 заряд<s>\n\"\n  else\n    computing.oneMoreExitBurns = 0\n  end\nend\n\n--\n\n--Функция перекачки градиентом - авто\nfunction gradientFlow()\nif computing.gradientOff ~= 1 then\n  local a3 = computing.cells[3].charge\n  local a4 = computing.cells[4].charge\n  local a5 = computing.cells[5].charge\n  local a6 = computing.cells[6].charge\n  local b3 = computing.cells[3].destroyed \n  local b4 = computing.cells[4].destroyed\n  local b5 = computing.cells[5].destroyed\n  local b6 = computing.cells[6].destroyed\n\n  local v3 = computing.cells[3].vinPad \n  local v4 = computing.cells[4].vinPad \n  local v5= computing.cells[5].vinPad \n  local v6 = computing.cells[6].vinPad \n  local r3 = computing.cells[3].rodPad \n  local r4 = computing.cells[4].rodPad \n  local r5 = computing.cells[5].rodPad \n  local r6 = computing.cells[6].rodPad \n\ncomputing.gradientMult = computing.gradientMult or 1\nlocal m = computing.gradientMult\n   if computing.gradient == 0 -- \"вниз\"\n   then\n      if a3 > 0 and b5 ~= 1 then\n         a3 = a3 - m\n         a5 = a5 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r3 .. \" на \" .. v5 .. \"<s>\n\"\n      else end\n      if a4 > 0 and b6 ~= 1 then\n         a4 = a4 - m\n         a6 = a6 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r4 .. \" на \" .. v6\n      else end\n   else\n      if a5 > 0 and b3 ~= 1 then\n         a5 = a5 - m\n         a3 = a3 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r5 .. \" на \" .. v3 .. \"<s>\n\"\n      else end\n      if a6 > 0 and b4 ~= 1 then\n         a6 = a6 - m\n         a4 = a4 <plus> m\n         computing.messageText = (computing.messageText or \"\") .. \"Перекачка сместила \" .. (m == 1 and \"1 заряд с \" or \"2 заряда с \") .. r6 .. \" на \" .. v4\n      else end\n   end\ncomputing.cells[3].charge = a3\ncomputing.cells[4].charge = a4\ncomputing.cells[5].charge = a5\ncomputing.cells[6].charge = a6\n\nelse end\n\nend\n\n--\n\n--Функция перекачки предохранителем - авто\nfunction preservDialog(a)\n\ncomputing.preservDialogDisable = computing.preservDialogDisable or 0\nlocal t = computing.cells[a].text\n\n   if computing.preservDialogDisable == 0 then\n  dialog ({header = \"Перегрузка\", text = \"Превышение допустимой мощности для ячейки \" .. t .. \"Сработал предохранитель\", answers = {\n{text = \"Дальше\", pressListener = function ()\ncomputing.turnCanceled = 1\nshowPage{id = g.current_id, transition = \"instant\"}\nhideDialog() end },\n{text = \"Больше не показывать\", pressListener = function ()\ncomputing.preservDialogDisable = 1\ncomputing.turnCanceled = 1\nshowPage{id = g.current_id, transition = \"instant\"}\nhideDialog() end}\n}\n})\nelse end\nend\n\nfunction preservation()\nlocal pos = computing.elements.preservator.position \nif computing.cells[pos].destroyed ~= 1 then\nlocal a = 0\nlocal t = getNeighTab(computing.elements.preservator.position)\n  for k,v in pairs (t) do\n     if computing.cells[v].charge > computing.cells[v].capacity then\n        a = computing.cells[v].charge - computing.cells[v].capacity\n         computing.cells[v].charge = computing.cells[v].charge - a\n         computing.cells[5].charge = computing.cells[5].charge <plus> a\n         computing.preservActivated = computing.currentMission == \"t3\" and 1 or 0\n     preservDialog(v)\n     else\n     end\n  end\nelse end  \nend\n\n--\n\n--Функция выкачивания зарядов выходом (по 2/1 со всех соседей) - по нажатию\nfunction exitActivate(a)\nlocal b = {}\nlocal p = 0\n   if a == 1 then\n     p = computing.elements.oneMoreExit.position\n   else\n      p = computing.elements.mainExit.position\n   end\n\n   b = getNeighTab(p)\n\n   for k,v in pairs(b) do\n      if computing.cells[v].charge >= a then\n         computing.cells[p].charge = computing.cells[p].charge <plus> a\n         computing.cells[v].charge = computing.cells[v].charge - a\n      else\n         computing.cells[v].charge = 0\n         computing.cells[p].charge = computing.cells[p].charge <plus> computing.cells[v].charge\n      end\n   end\n\nend\n\n--\n\n--Функция поиска и выкачивания x зарядов из соседних ячеек - вспомогательная\nfunction randomPump(a, x)\n\n  local sumCharge = 0\n  local t = getNeighTab(a)\n  for k,v in pairs(t) do\n     sumCharge = sumCharge <plus> computing.cells[v].charge\n  end\n\n  local pumpNum = x < sumCharge and x or sumCharge\n  computing.cells[a].charge = computing.cells[a].charge <plus> pumpNum\n\n  while pumpNum > 0 do\n    for k,v in pairs(t) do\n       if computing.cells[v].charge > 0 then\n         local rand= math.random(0,1)\n         computing.cells[v].charge = computing.cells[v].charge - rand\n          pumpNum = pumpNum - rand\n       else end\n    end\n  end\n  \n end\n\n--\n\n--функция выкачивания зарядов важной штукой (3 заряда с любых соседей) - по нажатию\nfunction importantActivate()\n  local a = computing.elements.important.position\n  randomPump(a, 3)\nend\n\n--\n\n--функция таймера и обратного отсчёта\nfunction compTimer()\n  if computing.timerReverse > 0 then\n    computing.timerReverse = computing.timerReverse - 1\n  end\nend\n\nend",
        "calculate": false,
        "id": 642,
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_if": "function lua_if()\nreturn true -- g.compOn\nend",
        "super_calculate": true,
        "lua_do": "function lua_do()\n--Функция для вызова диалога о том, что важная штука оказалось обесточена. Варианты: \"ок\"\nfunction imortantDischarged()\nlocal a = computing.elements.important.position\nlocal cm = computing.currentMission\n\nif computing.cells[a].charge == 0 then\n  if  cm == \"t1\" or cm == \"t2\" or cm == \"t3\" or cm == \"t4\" or cm == \"t5\" then\n    computing.elements.important.charge = 4\n         elementsToCells()\n    local p = 640\n    dialog ({\n      header = \"Провал\",\n      text = \"<s><s>\"Важная штука<s><s>\" оказалась полностью разряжена!<s>\n<s>\nПерезапуск режима симуляции.\",\n      answers = {\n        {text = \"Продолжить попытку\",\n         pressListener = function ()\n         showPage {id = p}\n         hideDialog() end}\n       }\n     })\n  elseif cm == \"c2\" then\n  else\n  local p = 643\n      dialog ({\n      header = \"Провал\",\n      text = \"<s><s>\"Важная штука<s><s>\" оказалась полностью разряжена!\",\n      answers = {\n        {text = \"Закончить попытку\",\n         pressListener = function ()\n         showPage {id = p}\n         CompEnotherHelpVar = 2 -- !!!! \n         hideDialog() end}\n       }\n     })\n   end\nelse end\nCompEnotherHelpVar = CompEnotherHelpVar == 2 and 2 or 1\nend\n\n--\n\n--Функция вывода мессаджа\nfunction compMes()\n  message(computing.messageText, \"true\")\n  computing.messageText = \"\"\nend\n\n--\n\n--Функции для заданий\n--computingIni()\n\nend",
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "id": 642
      },
      {
        "lua_if": "function lua_if()\nreturn true -- g.compOn\nend",
        "super_calculate": true,
        "lua_do": "function lua_do()\nfunction endTurn()\n  if computing.turnCanceled ~= 1 then\n  generate()\n  burnEnergy()\n  gradientFlow()\n  preservation()\n  cellsCheck()\n  cellsToElements ()\n  imortantDischarged()\n  compMes()\n  compTimer()\n  compTask()\n  computing.endTurnCount = (computing.endTurnCount or 0) <plus> 1\n    \n  else\n  computing.turnCanceled = 0\n  end\nend\n\n--\n\n--Функция отображения заряда на ячейках - вспомогательная\nfunction demonstrate(n, x, z)\ncomputing.demonstrateType = computing.demonstrateType or 0\nif computing.demonstrateType == 0 then\nlocal a = x or computing.cells[n].charge\nlocal b = z or computing.cells[n].capacity\nlocal c = x and 0 or computing.cells[n].destroyed\n\n\nlocal text1= \"\"\nlocal text2 = \"\"\n\n\n  if c == 1 then\n   return \"[Вышел из строя]\"\n  elseif a == 0 then\n    text1 = [=[[]=]\n  elseif a == 1 then\n    text1 = [=[[lll]=]\n  elseif a == 2 then\n    text1 = [=[[lll lll]=]\n  elseif a == 3 then\n    text1 = [=[[lll lll lll]=]\n  elseif a == 4 then\n    text1 = [=[[lll lll lll lll]=]\n  elseif a == 5 then\n    text1 = [=[[lll lll lll lll lll]=]\n  elseif a == 6 then\n    text1 = [=[[lll lll lll lll lll lll]=]\n  end\n\n  for i = 0, b - a do\n    if b - a > i then \n      text2 = text2 .. \"    \"\n    end\n  end\n\nreturn text1 .. text2 .. [=[]]=]\n\nelse\nlocal a = x or computing.cells[n].charge\nlocal b = z or computing.cells[n].capacity\nlocal c = x and 0 or computing.cells[n].destroyed\n\nif c == 1 then\n  return \"[Вышел из строя]\"\nelse\n  return a .. \"/\" .. b\nend\nend\nend\n\n--\n\n--Функция: луа_ду для первой карты\nfunction compLuaDo1(a)\nlocal p = 640\n  if computing.cells[a].text == \"Важная штука<s>\n\" then\n     importantActivate()\n  elseif computing.cells[a].text == \"Выход<s>\n\" then\n     exitActivate(2)\n  elseif computing.cells[a].text == \"Ещё один выход<s>\n\" then\n    exitActivate(1)\n else\n    compNeighbor(a)\n    chargeReplace(a)\n    computing.source = a\n    p = 641\n end\ncomputing.cellPressed = a\nshowPage{id = p, transition = \"instant\"}\nend\n\n--\n\n--Функция: луа_ду для второй карты\nfunction compLuaDo2(n)\nlocal p = 640\n  chargeTransfer(n)\n  showPage{id = p, transition = \"instant\"}\nend\n\n--\n\n--Функция: луа_иф для первой карты (актив/неактив)\nfunction compLuaIf1(n, act)\n\nlocal a = computing.cells[n].destroyed == 0\nlocal b = computing.cells[n].charge ~= 0\nlocal c = computing.cells[n].zeroChargeSelection == 0\n\n  if act == 1 and c then\n    return a and b\n  elseif act == 1 and not c then\n    return a\n  elseif act == 0 and c then\n    return not a or not b\n  else\n    return not a\n  end\nend\n\n--\n\n--Функция: луа_иф для второй карты (актив/неактив)\nfunction compLuaIf2(a, act)\ncompNeighbor(computing.source)\nreturn (computing.cells[a].neighbourToSource == 1 and act == 1) or (computing.cells[a].neighbourToSource ~= 1 and act == 0)\nend \n\n--\n\n--Функция: луа_текст (универсально для карт и актив.)\nfunction compLuaText(n) -- по номеру, через cells\n  local c = computing.cells[n]\n  local a = c.charge\n  local b = c.capacity\n  local t = c.text\n  return t .. demonstrate(n)\nend\n\n--\n\n--Функция луа ду для кнопки отмены\nfunction cancelChargeTransfer()\nlocal a = computing.source\ncomputing.cells[a].charge = computing.replacedCharge\ncomputing.replacedCharge = 0\ncomputing.turnCanceled = 1\nshowPage{id = 640, transition = \"instant\"}\nend\n\n--\n\n--Функция луа text для кнопки отмены\nfunction cancelText()\ncomputing.replacedCharge = computing.replacedCharge or 1\nreturn \"Отменить перенос заряда<s>\n\" .. demonstrate(10,  computing.replacedCharge, 6) \nend\n\n--\n\n--Функция луа text для градиента \nfunction compGradientText()\ncomputing.gradient = computing.gradient  or 0\nreturn (computing.gradient == 0 and \"↓↓ Перекачка: вниз ↓↓\" or \"↑↑ Перекачка: вверх ↑↑\")\nend\n\nend",
        "calculate": false,
        "id": 642,
        "text": " Сбор всех автофункций в одну"
      },
      {
        "lua_if": "function lua_if()\nreturn true -- g.compOn\nend",
        "super_calculate": true,
        "id": 648,
        "text": "Функции заданий ",
        "lua_do": "function lua_do()\n\n--установка стартовых условий\nfunction compCondition(a)\n  if a == \"t1\" then     \n  elseif a == \"t2\" then\nlocal b = computing.elements.thatThing.position\nlocal c = computing.elements.bigOne.position\nlocal d = computing.elements.smallOne.position\n    computing.cells[b].charge = computing.cells[b].capacity\n   computing.cells[c].charge = computing.cells[c].capacity\ncomputing.cells[d].charge = computing.cells[d].capacity\n  \n  elseif a == \"t4\" then\n    computing.gradientOff = 0\n    computing.gradPressed = 0\n      for i = 1, 8 do\n       computing.cells[i].charge = 0\n      end\n   computing.cells[5].charge = 4\n   computing.elements.important.charge = 4\n  elseif a == \"t5\" then\n    for i = 1, 8 do\n       computing.cells[i].charge = 0\n      end computing.elements.important.charge = 3\ncomputing.elements.generator.charge = 2\n   elseif a == \"a1\" or  a == \"a2\" or a == \"a3\" then\n   compMapGen()\n   elementsToCells()\n  computing.elements.generator.charge = 2\n  elseif a == \"b2\" then\n    local g = computing.elements.generator.charge\n    local i = computing.elements.important.charge\n    if g <plus> i < 6 then\n      computing.elements.generator.charge = 3\n     computing.elements.important.charge = 3\n      elementsToCells()\n    end\n  else end\nend\n\n--\n\n--смена заданий\nfunction compTaskChange(s)\nif computingFail == 1 then\nelseif CompEnotherHelpVar == 1 then\n  if not s then\n    local a = 0\n    local b = 0\n    local c = 0\n\n  if computing.currentMission == \"t1\" then\n     computing.currentMission = \"t2\"\n     compCondition(\"t2\")\n  elseif computing.currentMission == \"t2\" then\n     computing.currentMission = \"t3\"\n  elseif computing.currentMission == \"t3\" then\n     computing.currentMission = \"t4\"\n     compCondition(\"t4\")\n  elseif computing.currentMission == \"t4\" then\n  computing.currentMission = \"t5\"\n  compCondition(\"t5\")\n  elseif computing.currentMission == \"t5\" then\n     computing.currentMission = \"a\" .. math.random(1,3)\n     compCondition(computing.currentMission)\n  end\nelse\n  local t = (s == 1 and \"a\") or (s == 2 and \"b\") or (s == 3 and \"c\")\n  local l = 3 --(s == 1 or s == 2 and 3) or 4\n  if s == 4 then\n    computing.currentMission = \"taskEnd\"\n  else\n     computing.currentMission = t .. math.random(1,l)\n  end\nend\n\nif computing.currentMission == \"b2\" then\n  compCondition(\"b2\")\nend\n\ncompMissionDialog()\nend\nend\n\n--\n\n-- функция для прогресса т1\nfunction compProgressT1()\n  if computing.cells[2].charge > 0 or computing.cells[3].charge > 0 then\n    computing.missions.t1.complete = 1\n   compTaskChange()\n  else\n  end\nend\n\nfunction compProgressT1text()\n  if computing.cells[2].charge > 0 or computing.cells[3].charge > 0 then\n   return \". Прогресс: 1/1\"\n  else\n  return \". Прогресс: 0/1\"\n  end\nend\n\ncomputing.missions = computing.missions or {}\n\ncomputing.missions.t1 =\n{title = \"перенести заряд на любую ячейку\", longText = \"– Хорошо, давай пока потренируемся в режиме симуляции, – затараторил TL-3. – Это ни на что не влияет, а ты быстро научишься. Попробуй для разминки просто перенести этот заряд с генератора на другую ячейку: сначала выбери сам генератор, затем – любую из соседних штук.\", startingDialogShowed = computing.missions.t1 and computing.missions.t1.startingDialogShowed or 0; complete = computing.missions.t1 and computing.missions.t1.complete or 0, progress = compProgressT1, progressText = compProgressT1text\n}\n\n--функция прогресса т2\n\n--перед запуском установить побольше зарядов на все ячейки\n\nfunction compProgressT2()\n\ncomputing.progressT2tab = computing.progressT2tab or {}\n\nlocal a = computing.cellPressed\nlocal e1loc = computing.elements.mainExit.position\nlocal e2loc = computing.elements.oneMoreExit.position\nlocal imploc = computing.elements.important.position\n\ncomputing.progressT2tab.e1 = a == e1loc and 1 or computing.progressT2tab.e1 or 0\n\ncomputing.progressT2tab.e2 = a == e2loc and 1 or computing.progressT2tab.e2 or 0\n\ncomputing.progressT2tab.imp = a == imploc and 1 or computing.progressT2tab.imp or 0\n\nlocal prog = computing.progressT2tab.imp <plus> computing.progressT2tab.e1 <plus> computing.progressT2tab.e2\n\nif\n  prog == 3 then\n   computing.missions.t2.complete = 1\n   compTaskChange()\n else\nend \n\nend\n\n\nfunction compProgressT2Text()\ncompProgressT2()\nlocal prog = computing.progressT2tab.imp <plus> computing.progressT2tab.e1 <plus> computing.progressT2tab.e2\nreturn \". Прогресс: \" .. prog .. \"/3\"\nend\n\ncomputing.missions.t2 =\n{title = \"использовать <s><s>\"важную штуку<s><s>\", <s><s>\"выход<s><s>\" и <s><s>\"ещё один выход<s><s>\"\", longText = \"– Отлично! – излишне бодро отреагировал TL-3. – Перенести заряд можно со всех элементов, кроме важной штуки и выходов. Нажатие на них выкачает мощность из соседних ячеек. Важная штука отберёт три заряда случайным образом, выход – по две единицы с каждого соседа, ещё один выход – по единице. Проверь, как это происходит. И не забывай, что каждый такт через выходы мощность покидает этот участок.\", complete = computing.missions.t2 and computing.missions.t2.complete or 0, startingDialogShowed = computing.missions.t2 and computing.missions.t2.startingDialogShowed or 0;  progress = compProgressT2, progressText = compProgressT2Text }\n\n--\n\n--Функция для прогресса т3\nfunction compProgressT3()\n    if computing.preservActivated == 1 then\n   computing.missions.t3.complete = 1\n   compTaskChange()\n   else end\nend\n\nfunction compProgressT3Text()\n  if computing.preservActivated == 1 then\n   return \". Прогресс: 1/1\"\n  else\n  return \". Прогресс: 0/1\"\n  end\nend\n\ncomputing.missions.t3 = {title = \"добиться срабатывания предохранителя\"; longText = \"– Примерно так это и будет работать, – продолжил TL-3. – Обрати внимание на предохранитель. Он будет защищать от перегрузки соседние элементы, пока не сгорит сам. Иногда это будет очень кстати. Попробуй сделать так, чтобы предохранитель сработал сейчас.\"; complete = computing.missions.t3 and computing.missions.t3.complete or 0; startingDialogShowed = computing.missions.t3 and computing.missions.t3.startingDialogShowed or 0;  progress = compProgressT3, progressText = compProgressT3Text }\n\n--\n\n--функция задания т4\nfunction compProgressT4()\ncomputing.t4stage = computing.t4stage or 1\n  if computing.gradPressed == 1 and computing.t4stage == 1 then\n    computing.t4stage = 2\n    computing.timerReverse  = 1\n  elseif computing.t4stage == 2 and computing.timerReverse == 0 then\n    computing.t4stage = 3\n  end\n\n  if computing.t4stage == 3 then\n     computing.missions.t4.complete = 1\n     compTaskChange()\n  else end\n\nend\n\n\nfunction compProgressT4Text()\n  compProgressT4()\n  if computing.t4stage == 1 then    \n    return \". Прогресс: 0/2\"\n  elseif computing.t4stage == 2 then\n    return \". Осталось подождать: \" .. computing.timerReverse .. \" такт. Прогресс 1/2\"\n  elseif computing.t4stage == 3 then\n     return \". Прогресс: 2/2\"\n  else end\nend\n\ncomputing.missions.t4 = {title = \"поменять направление перекачки и подождать 1 ход\"; longText = \"– И, наконец, то самое поле с градиентом напряжённости, – вновь заговорил TL-3. – Это такая штука, которая каждый такт сама перекачивает заряды: либо сверху вниз, либо снизу вверх. Я добавил соответствующий элемент на общую схему, но ячейкой он не является и не нарушает их соседство. Нажатие на него просто изменит направление перекачки. Попробуй это сделать и посмотри, что будет.\"; complete = computing.missions.t4 and computing.missions.t4.complete or 0;  startingDialogShowed = computing.missions.t4 and computing.missions.t4.startingDialogShowed or 0; progress = compProgressT4, progressText = compProgressT4Text}\n\n--\n\n-- функция задания т5\n\nfunction compProgressT5()\n  if computing.trainEnd == 1 then\n     computing.missions.t5.complete = 1\n     compTaskChange()\n  else end\nend\n\nfunction compProgressT5Text()\n  return \"\"\nend\n\ncomputing.missions.t5 = {title = \"уничтожить любой элемент перегрузкой для завершения обучения.\"; longText = \"– Вот и всё. Не так сложно, правда? – то ли серьёзно, то ли иронично спросил TL-3. – Можешь ещё немного потренироваться, если хочешь. Когда надоест, просто перегрузи любой элемент большим количеством зарядов, чем он может вместить, и мы начнём.\"; complete = computing.missions.t5 and computing.missions.t5.complete or 0;  startingDialogShowed = computing.missions.t5 and computing.missions.t5.startingDialogShowed or 0; progress = compProgressT5, progressText = compProgressT5Text}\n\n--\n\n-- функция задания а1\nfunction compProgressA1()\n\n  local b = computing.exitBurns\n  computingA1stage = computingA1stage or 0\n  computingA1charge = computingA1charge or 15\n\n  if computingA1stage == 0 then\n    if b > 0 then\n      computingA1stage = 1\n    end\n  elseif computingA1stage == 1 then\n    if b < 1 then\n      computingA1stage = 0\n      message (\"Непрерывность подачи мощности через выход нарушена!\")\n    end\n  end\n\n  if computingA1stage == 0 then\n     computingA1charge = 15\n  elseif computingA1stage == 1 then\n    computingA1charge = computingA1charge -  b\n  end\n\n\n\n   if computingA1charge  < 1 and computing.elements.important.charge >0\n   then\n     computing.missions.a1.complete = 1\n     compTaskChange(2)\n  end\n\nend\n\n\nfunction compProgressA1text()\ncomputingA1charge = computingA1charge or 15\n  if computingA1charge > 0 then\n     return \" Осталось вывести зарядов: \" .. computingA1charge \n  else\n    return \"\"\n  end\nend\n\ncomputing.missions.a1 = {title = \"непрерывно выводить через выход 15 зарядов мощности.\"; longText = \"– Надеюсь, ты достаточно освоился, – наконец заговорил после долгой паузы астромех. – Я начинаю.<s>\n   Сначала Орнас ничего не заметил, но через пару секунд почувствовал запах гари. Почти сразу же раздался небольшой хлопок, а аппарат, к которому подключился TL-3, задымился. Освещение зала моргнуло несколько раз, затем всё вновь вернулось в норму.<s>\n– Мне нужно пятнадцать зарядов на основной выход, – прервал наблюдения юноши дроид. – Непрерывно. Если хотя бы один такт не будет передачи, придётся начинать с начала.\"; complete = computing.missions.a1 and computing.missions.a1.complete or 0; startingDialogShowed = computing.missions.a1 and computing.missions.a1.startingDialogShowed or 0; progress = compProgressA1, progressText = compProgressA1text}\n\n--\n\n-- функции задания а2\nfunction compProgressA2()\n\n  local b = computing.oneMoreExitBurns\n  computingA1stage = computingA1stage or 0\n  computingA1charge = computingA1charge or 15\n\n  if computingA1stage == 0 then\n    if b > 0 then\n      computingA1stage = 1\n    end\n  elseif computingA1stage == 1 then\n    if b < 1 then\n      computingA1stage = 0\n      message (\"Непрерывность подачи мощности через выход нарушена!\")\n    end\n  end\n\n  if computingA1stage == 0 then\n     computingA1charge = 15\n  elseif computingA1stage == 1 then\n    computingA1charge = computingA1charge -  b\n  end\n\n  if computingA1charge == 0 and computing.elements.important.charge >0\n  then\n     computing.missions.a2.complete = 1\n     compTaskChange(2)\n  end\n\nend\n\n\nfunction compProgressA2text()\ncomputingA1charge = computingA1charge or 15\n  if computingA1charge > 0 then\n     return \" Осталось вывести зарядов: \" .. computingA1charge \n  else\n    return \"\"\n  end\nend\n\ncomputing.missions.a2 = {title = \"непрерывно выводить через ещё один выход 15 зарядов мощности.\"; longText = \"– Надеюсь, ты достаточно освоился, – наконец заговорил после долгой паузы астромех. – Я начинаю.<s>\n   Сначала Орнас ничего не заметил, но через пару секунд почувствовал запах гари. Почти сразу же раздался небольшой хлопок, а аппарат, к которому подключился TL-3, задымился. Освещение зала моргнуло несколько раз, затем всё вновь вернулось в норму.<s>\n– Мне нужно пятнадцать зарядов на ещё один выход, – прервал наблюдения юноши дроид. – Непрерывно. Если хотя бы один такт не будет передачи, придётся начинать с начала.\"; complete = computing.missions.a2 and computing.missions.a2.complete or 0; startingDialogShowed = computing.missions.a2 and computing.missions.a2.startingDialogShowed or 0; progress = compProgressA2, progressText = compProgressA2text}\n\n--\n\n-- задание а3\nfunction compProgressA3()\n\nlocal b = 0\n\nfor i = 1,8 do\n  if computing.cells[i].charge > computing.cells[i].capacity / 2 then\n     b = 10\n  end\nend\n\ncomputingA1stage  = computingA1stage  or 0\ncomputingA1charge = computingA1charge or 16\n\n  if computingA1stage == 0 then\n    if b < 3 then\n      computingA1stage = 1\n    end\n  elseif computingA1stage == 1 then\n    if b > 3 then\n      computingA1stage = 0\n      message (\"Мощность превышена!\")\n    end\n  end\n\n  if computingA1stage == 0 then\n     computingA1charge = 15\n  elseif computingA1stage == 1 then\n    computingA1charge = computingA1charge -  1\n  end\n\n  if computingA1charge == 0  and computing.elements.important.charge >0 then\n     computing.missions.a3.complete = 1\n     compTaskChange(2)\n  end\n\nend\n\nfunction compProgressA3Text()\ncomputingA1stage  = computingA1stage  or 0\ncomputingA1charge = computingA1charge or 16\n  if computingA1charge > 0 then\n     return \" Осталось тактов: \" .. computingA1charge \n  else\n    return \" Выполнено.\"\n  end\nend\n\ncomputing.missions.a3 = {title = \"поддерживать на всех ячейках не более половины заполненности в течение 15 ходов.\"; longText = \"– Надеюсь, ты достаточно освоился, – наконец заговорил после долгой паузы астромех. – Я начинаю.<s>\n   Сначала Орнас ничего не заметил, но через пару секунд почувствовал запах гари. Почти сразу же раздался небольшой хлопок, а аппарат, к которому подключился TL-3, задымился. Освещение зала моргнуло несколько раз, затем всё вновь вернулось в норму.<s>\n– Мне нужно,  чтобы каждая ячейка была заполнена не более, чем наполовину, в течение пятнадцати тактов, – прервал наблюдения юноши дроид. – Непрерывно. Если хотя бы один такт там окажется больше половины от максимальной вместимости, придётся начинать с начала.\"; complete = computing.missions.a3 and computing.missions.a3.complete or 0; startingDialogShowed = computing.missions.a3 and computing.missions.a3.startingDialogShowed or 0; progress = compProgressA3, progressText = compProgressA3Text}\n\n--\n\n--Функция для фейлов в заданиях б\nfunction compTaskFail(a)\nlocal t = computing.missions[a].failText\n  computingFail = 1\n  dialog ({header = \"Неудача!\", text = t, answers =\n       {{text = \"Закончить\",\n         pressListener = function()\n         hideDialog()\n         showPage{id = 643}\n         end}}\n      })\nend\n\n--\n\n-- функция для задания б1\nfunction compProgressB1()\n  local b = computing.exitBurns\n\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 7\n\n  if computingB_stage == 0 then\n    computingB_timer = computingB_timer - 1\n  elseif computingB_stage == 1 then\n     if b > 0 then\n       compTaskFail(\"b1\")\n     else\n     end\n     computingB1_timer = computingB1_timer - 1\n  else end\n\n  if computingB_timer == 0 then\n    computingB_stage = 1\n   computing.GeneratorMult = 2\n  else end\n\n  if computingB1_timer == 0 and computing.elements.important.charge >0 then\n     computing.missions.b1.complete = 1\n     computing.GeneratorMult = 1\n     compTaskChange(3)\n  end\n\nend\n\nfunction compProgressB1Text()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 7\n\n  if computingB_stage == 0 then\n    return \" Тактов до увеличения мощности генератора: \" .. computingB_timer\n  else\n    return \" Осталось тактов без передачи зарядов через выход: \" .. computingB1_timer\n  end\n\nreturn \"\"\nend\n\ncomputing.missions.b1 = {title = \"Не выводить мощность через выход в течение 7 ходов.\"; longText = \"– Отлично!  – оживился TL-3. – Тут всё несколько сложнее, чем я ожидал, но мы ещё можем справиться. Сейчас выработка на генераторе усилится, это продлится буквально семь-восемь тактов. В течение этого времени ни в коем случае не выводи ничего через выход.\"; complete = computing.missions.b1 and computing.missions.b1.complete or 0; startingDialogShowed = computing.missions.b1 and computing.missions.b1.startingDialogShowed or 0; progress = compProgressB1, progressText = compProgressB1Text, failText = \"– Куда ты его?.. – возмутился дроид, но было уже поздно. – Всё, запороли...\"}\n\n--\n\n-- функции задания б2\nfunction compProgressB2()\n  local eb = computing.oneMoreExitBurns\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 8\n  computing.b_charge = computing.b_charge or 7\n\n  if computingB_stage == 0 then\n    computingB_timer = computingB_timer - 1\n  elseif computingB_stage == 1 then\n     computingB1_timer = computingB1_timer - 1\n    if eb > 0 then\n      computing.b_charge = computing.b_charge - eb\n    end\n  else end\n\n  if computingB_timer == 0 then\n    computingB_stage = 1\n   computing.GeneratorMult = 0\n  else end\n  \n  if computing.b_charge == 0 and computing.elements.important.charge >0 then\n     computing.missions.b2.complete = 1\n     computing.GeneratorMult = 1\n     compTaskChange(3)\n  elseif computingB1_timer == 0 then\n   compTaskFail(\"b2\")\n  end\n\nend\n\nfunction compProgressB2Text()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 3\n  computingB1_timer = computingB1_timer or 8\n  computing.b_charge = computing.b_charge or 7\n  if computingB_stage == 0 then\n    return \" Тактов до остановки генератора: \" .. computingB_timer\n  else\n    return \"Осталось вывести зарядов через ещё один выход: \" .. computing.b_charge .. \"<s>\nОсталось тактов: \" .. computingB1_timer\n  end\n\nreturn \"\"\nend\n\ncomputing.missions.b2 = {title = \"За 7 ходов вывести через ещё один выход 5 зарядов мощности.\"; longText = \"– Отлично!  – оживился TL-3. – Тут всё несколько сложнее, чем я ожидал, но мы ещё можем справиться. Сейчас выработка на генераторе остановится, это продлится буквально семь-восемь тактов. В течение этого времени нужно успеть вывести пять зарядов через ещё один выход.\"; complete = computing.missions.b2 and computing.missions.b2.complete or 0; startingDialogShowed = computing.missions.b2 and computing.missions.b2.startingDialogShowed or 0; progress = compProgressB2, progressText = compProgressB2Text, failText = \"– Ну где же?.. – возмутился дроид, но было уже поздно. – Всё, запороли...\"}\n\n--\n\n--функции для задания б3\n\nfunction compProgressB3()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 2\n  computingB1_timer = computingB1_timer or 11\ncomputing.b1_charge = computing.b1_charge or 5\n  local g = computing.oneMoreExitBurns\n\n  if computingB_stage == 0 then\n    if computingB_timer == 0 then\n      computingB_stage = 1\n computing.elements.important.position = 4 computing.elements.mainExit.position = 6\n      elementsToCells()\n    else    end\n  else  end\n\n  if computingB_stage == 0 then\n    computingB_timer = computingB_timer - 1\n  elseif computingB_stage == 1 then\n      computingB1_timer = computingB1_timer - 1\n      computing.b1_charge = computing.b1_charge - g\n  else  end\n\n  if computing.b1_charge == 0 and computing.elements.important.charge >0 then\n    computing.missions.b3.complete = 1\ncomputing.elements.important.position = 6 computing.elements.mainExit.position = 4\n    elementsToCells()\n    compTaskChange(3)\n  elseif computingB1_timer == 0 then\n      compTaskFail(\"b3\")\n  end\n\nend\n\nfunction compProgressB3Text()\n  computingB_stage = computingB_stage or 0\n  computingB_timer = computingB_timer or 2\n  computingB1_timer = computingB1_timer or 11\n  computing.b1_charge = computing.b1_charge or 5\n\n  if computingB_stage == 0 then\n    return \"Тактов до изменения в схеме: \" .. computingB_timer <plus> 1\n  else\n    return \"Зарядов осталось: \" .. computing.b1_charge .. \". Тактов осталось: \" .. computingB1_timer\n  end\n\nend\n\ncomputing.missions.b3 = {title = \"вывести через ещё один выход 5 зарядов в течение 10 ходов. \"; longText = \"– Отлично!  – оживился TL-3. – Тут всё несколько сложнее, чем я ожидал, но мы ещё можем справиться. Сейчас я на время немного изменю схему: выход и важная штука поменяются местами. Это продлится буквально девять-десять тактов. В течение этого времени нужно успеть вывести через ещё один выход пять зарядов.\"; complete = computing.missions.b3 and computing.missions.b3.complete or 0; startingDialogShowed = computing.missions.b3 and computing.missions.b3.startingDialogShowed or 0; progress = compProgressB3, progressText = compProgressB3Text, failText = \"– Ну, где?.. – возмутился дроид, но было уже поздно. – Всё, запороли...\"}\n\n--\n\n-- функции для задания с1\nfunction compProgressC1()\n  local d = computing.elements.preservator.destroyed\n  computing.c_timer = computing.c_timer or 5\n  \n  computing.c_timer = computing.c_timer - 1\n\n  if computing.c_timer == 0 then\n     if d == 1 then\n      computing.missions.c1.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c1\")\n    end\n  else \n     if d == 1 and computing.elements.important.charge >0 then\n      computing.missions.c1.complete = 1\n      compEnd()\n    else\n    end\n  end\n\nend\n\nfunction compProgressC1Text()\n  computing.c_timer = computing.c_timer or 5\n  return \"Осталось тактов: \" .. computing.c_timer\nend\n\ncomputing.missions.c1 = {title = \"уничтожить перегрузкой предохранитель. \"; longText = \"Угу, – буркнул дроид, даже не прокомментировав успех юноши. – Почти закончили. Теперь у тебя есть около пяти тактов, чтобы уничтожить предохранитель. Ну, не тяни.\"; complete = computing.missions.c1 and computing.missions.c1.complete or 0; startingDialogShowed = computing.missions.c1 and computing.missions.c1.startingDialogShowed or 0; progress = compProgressC1, progressText = compProgressC1Text, failText = \"– Да ну что же это, – возмутился дроид, но было уже поздно. – Всё, ты всё запорол...\"}\n\n--\n\n--функции задания с2\nfunction compProgressC2()\n  local d = computing.elements.important.charge\n  computing.c_timer = computing.c_timer or 4\n  \n  computing.c_timer = computing.c_timer - 1\n  \n\n  if computing.c_timer == 0 then\n     if d == 0 then\n      computing.missions.c2.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c2\")\n    end\n  else\n     if d == 0 then\n      computing.missions.c2.complete = 1\n      compEnd()\n    else end\n  end\n\nend\n\nfunction compProgressC2Text()\n  computing.c_timer = computing.c_timer or 4\n  return \"Осталось тактов: \" .. computing.c_timer\nend\n\ncomputing.missions.c2 = {title = \"обесточить важную штуку за 3 хода. \"; longText = \"Угу, – буркнул дроид, даже не прокомментировав успех юноши. – Почти закончили. Теперь у тебя есть ровно три такта, чтобы полностью обесточить важную штуку. Ну, давай.\"; complete = computing.missions.c2 and computing.missions.c2.complete or 0; startingDialogShowed = computing.missions.c2 and computing.missions.c2.startingDialogShowed or 0; progress = compProgressC2, progressText = compProgressC2Text, failText = \"– Да ну что же это, – возмутился дроид, но было уже поздно. – Всё, ты всё запорол...\"}\n\n--\n\n--функции задания с3\n\n\nfunction compProgressC3()\n  local d = computing.elements.generator.destroyed\n  computing.c_timer = computing.c_timer or 5\n  \n  computing.c_timer = computing.c_timer - 1\n\n  if computing.c_timer == 0 then\n     if d == 1 then\n      computing.missions.c3.complete = 1\n      compEnd()\n    else\n      compTaskFail(\"c3\")\n    end\n  else \n     if d == 1 and computing.elements.important.charge >0 then\n      computing.missions.c3.complete = 1\n      compEnd()\n    else\n    end\n  end\n\nend\n\nfunction compProgressC3Text()\n  computing.c_timer = computing.c_timer or 5\n  return \"Осталось тактов: \" .. computing.c_timer\nend\n\ncomputing.missions.c3 = {title = \"уничтожить перегрузкой генератор. \"; longText = \"Угу, – буркнул дроид, даже не прокомментировав успех юноши. – Почти закончили. Теперь у тебя есть около четырёх тактов, чтобы уничтожить генератор. Ну, не тяни.\"; complete = computing.missions.c3 and computing.missions.c3.complete or 0; startingDialogShowed = computing.missions.c3 and computing.missions.c3.startingDialogShowed or 0; progress = compProgressC3, progressText = compProgressC3Text, failText = \"– Да ну что же это, – возмутился дроид, но было уже поздно. – Всё, ты всё запорол...\"}\n--\n\n--конец головоломки\nfunction compEnd()\nlocal t = [=[– Фу-у-ух, – протянул TL-3 так долго, что Орнас успел испугаться, не сломался ли переводчик. – С аппаратной частью проскочили, ты молодец, парень!]=]\ndialog ({header = \"\", text = t, answers =\n       {{text = \"Дальше\",\n         pressListener = function()\ncomputing = {result = \"done\"}\n        showPage {id = 649}\n         hideDialog()\n         \n         end}}\n      })\nend\n\n-- функция отображения текста заданий\n\ncomputing.currentMission = computing.currentMission or \"t1\"\n\nfunction compMissionText()\nlocal a = computing.currentMission\nlocal text = \"\"\nif a ~= \"taskEnd\" then\n  text =  \"Задание: \" .. computing.missions[a].title .. computing.missions[a].progressText()\n  else\n  end\n  return text\nend\n\nfunction compMissionDialog()\n  local a = computing.currentMission\n  local t = computing.missions[a].longText\n  local p = g.current_id\nif a ~= \"taskEnd\" then\n  if p == 640 then\n    dialog ({header = \"\", text = t, answers =\n       {{text = \"Приступить\",\n         pressListener = function()\ncomputing.missions[a].startingDialogShowed = 1\n         --message (\"cm: \" .. a .. \" showed: \" .. computing.missions[a].startingDialogShowed)\n         hideDialog()\n         end}}\n      })\n  else end\nelse\ncompEnd()\nend\nCompEnotherHelpVar = 0\nend\n\n--Функция сборки всего в сценарий\nfunction compTask()\n  if not computing.currentMission or computing.currentMission == 0 then\n    computing.currentMission = \"t1\"\n  else end\n\n  local cm = computing.currentMission\n\n  if cm == \"taskEnd\" then\n     compEnd()\n  elseif computing.missions[cm].startingDialogShowed == 0 then\n    compCondition(cm)\n    compMissionDialog()\n  end\n\n  computing.missions[cm].progress()\nend\n \nend",
        "calculate": false
      }
    ]
  },
  {
    "id": 891,
    "text": "– Вам туда, – НК-63 бесцеремонно скинул Орнаса с учителем прямо на пол. – Помните, что теперь вы рабы Владыки.<s>r\n   Он быстро вколол что-то обоим спутникам, и оцепенениие окончательно прошло. Ещё до того, как Орнас успел подняться на ноги, блестящая голова дроида скрылась внизу, а круглый люк оказался задраен.<s>r\n– Зачем он сначала напал, а потом всё равно принёс нас сюда? – не смог скрыть удивления Орнас.<s>r\n– Затем, что теперь мы безоружны. Во всяком случае, они так думают...<s>r\n   Юноша тревожно заозирался.",
    "answers": [
      {
        "id": 894,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 892,
    "text": "   Дроид поднимался по винтовой лестнице всё выше и выше. Поначалу Орнас не мог даже моргнуть, но постепенно оцепенение спадало. Теперь его охватила слабость, и глаза сами против воли смыкались. Когда это происходило, перед глазами всплывали видения из прошлого\n   Такая же винтовая лестница. Темнота и дождь. Маленький мальчик, шлёпающий босыми ногами по скользким ступеням. Мать то и дело оборачивается, проверяет, не отстал ли он. Она уже не подгоняет сына, после того как Орнас несколько раз поскользнулся и чуть не упал. Когда на неё падает свет очередного фонаря, на лице отражается тревога и страх.\n   Страх – это слабость, а слабых нужно использовать или уничтожать. Так говорил отец. Но он сам оказался слабым, и теперь Орнас с матерью бегут, как вомп-крысы с помойки. Мать не знает, что можно не спешить, Орнас не сказал ей больше, чем нужно. Она теряет много сил и боится. А страх – это слабость...",
    "answers": [
      {
        "id": 891,
        "text": "Дальше",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 3\nend"
      },
      {
        "id": 893,
        "text": "Дальше",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal ~= 3\nend"
      }
    ]
  },
  {
    "id": 893,
    "text": "– Тебе туда, – НК-63 бесцеремонно скинул Орнаса прямо на пол. – Запомни, теперь ты раб Владыки.<s>r\n   Он быстро вколол что-то в плечо юноши, и оцепенениие окончательно прошло. Ещё до того, как Орнас успел подняться на ноги, блестящая голова дроида скрылась внизу, а круглый люк оказался задраен.<s>r\n   \"Зачем он сначала напал, а потом всё равно принёс меня сюда?\", – не мог понять Орнас. Кажется, впереди его ждало что-то намного более опасное, чем дроид-убийца.<s>r\n   Юноша тревожно заозирался.",
    "answers": [
      {
        "id": 894,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 894,
    "text": "   Орнас вспомнил этот коридор. Тот самый, из его видения перед испытанием. Холод и мрак кругом. И ощущение опасности.\n   Там за поворотом будет небольшая ниша в стене. Ноги сами вели Орнаса к ней. Отсюда уже смутно различимы очертания ещё одной развилки. Какой-то дым застилал обзор, но юноша и так знал, что последует дальше.\n   Ситх.\n   С каждым шагом его образ становился чётче: силуэт человека в плаще, невысокого и немного сутулого, как и сам Орнас, быстро и почти бесшумно приближался. Световой меч в его руке пронзил темноту коридора красным.\n   Орнас помнил, чем закончилась их прошлая встреча, но что он мог противопоставить самому себе?",
    "answers": [
      {
        "id": 895,
        "text": "Встретить лицом к лицу",
        "lua_if": "function lua_if()\n-- без меча\nneutralized = neutralized or 0\nreturn neutralized == 1\n\nend"
      },
      {
        "id": 898,
        "text": "Встретить лицом к лицу",
        "lua_if": "function lua_if()\n-- тёмная сторона\n\nneutralized = neutralized or 0\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\nreturn neutralized == 0 and ornasStat.darkside > 2 \n\nend"
      },
      {
        "id": 899,
        "text": "Встретить лицом к лицу",
        "lua_if": "function lua_if()\n-- не тёмная сторона\n\nneutralized = neutralized or 0\nornasStat = ornasStat or {}\nornasStat.darkside = ornasStat.darkside or 0\n\nreturn neutralized == 0 and ornasStat.darkside < 3\n\nend"
      }
    ]
  },
  {
    "id": 895,
    "text": "– Ты слаб. Ты не достоин стоять здесь, – прищуренный взгляд прожигал Орнаса насквозь. – Думал, ты спрячешься, едва учуяв Тьму, как всегда. Тебе даже на это не хватило мозгов?\n– Ты часть меня. Я боялся тебя раньше, но не сейчас. Сейчас я готов взглянуть в глаза Тьмы внутри меня самого и усмирить её.\n– Ну попробуй...\n   Тёмная копия Орнаса обрушилась на него. Безоружный джедай с трудом заблокировал меч противника Силой. Красные глаза буравили юношу, тонкие губы противника свело в ядовитой усмешке.\n– Проиграл дроиду? Ничтожество!\n   Ситх ударил юношу ногой в грудь, и тот отлетел в стену. Алый клинок завис над растерянным Орнасом. Как бы сейчас пригодился меч...\n– Я настоящий Орнас, – объявил двойник. – Сильнее, умнее, лучше. Ты был нужен мне, чтобы обучиться у джедаев, когда недоумки-родители стали бесполезными. Но теперь я возвращаю то, что отдал тебе. То, что моё по праву...",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ndarkOrnas = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 895,
        "calculate": true
      },
      {
        "id": 896,
        "text": "Открыть глаза",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal ~= 3\nend"
      },
      {
        "id": 897,
        "text": "Открыть глаза",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 3\nend"
      }
    ]
  },
  {
    "id": 896,
    "text": "   Орнас открыл глаза. Он всё ещё стоял в коридоре, двойника не было. Он знал, что конец испытания близок, и теперь ничто не помешает ему справиться. Даже та наивная и слабая часть его самого, что пала от его руки в видении.\n   Юноша прошёл по коридору до неприметной двери и замер, пока створки неторопливо расползались в стороны. Ещё один шаг – и он оказался внутри.\n   Ничто в комнате не выдавало, что это – главный и самый опасный зал во всём храме. Неяркий свет ламп отражался от граней простой металлической мебели и от стеклянных дверец высоких шкафов. Письменный стол покрывали стопки бумаг и голодисков. Одноместная койка, будто перенесённая сюда с древнего звездолёта, и даже небольшой бытовой уголок – что всё это делало здесь, в самом сердце тьмы?\n   Массивный саркофаг из красного камня в самом центре комнаты, такой предсказуемый элемент усыпальницы злого владыки, казался здесь чужеродным и лишним. В ногах каменного изваяния на крышке саркофага лежал голокрон.",
    "answers": [
      {
        "id": 901,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 897,
    "text": "   Орнас открыл глаза. Он всё ещё стоял в коридоре, двойника не было. Он знал, что конец испытания близок, и теперь ничто не помешает ему справиться. Даже та наивная и слабая часть его самого, что пала от его руки в видении.",
    "answers": []
  },
  {
    "id": 898,
    "text": "– Ты слаб. Ты не достоин стоять здесь, – прищуренный взгляд прожигал Орнаса насквозь. – Думал, ты спрячешься, едва учуяв Тьму, как всегда. Тебе даже на это не хватило мозгов?\n– Ты часть меня. Я боялся тебя раньше, но не сейчас. Сейчас я готов взглянуть в глаза Тьмы внутри меня самого и усмирить её.\n– Ну попробуй...\n   Тёмная копия Орнаса обрушилась на него. Вспыхнули, встретившись, световые мечи. Красные глаза буравили юношу, тонкие губы противника свело в ядовитой усмешке.\n– Ты столько лет считал себя главным, но всего за день своими руками сделал меня сильнее, чем ты можешь представить.\n   Ситх ударил юношу ногой в грудь, и тот отлетел в стену. Алый клинок завис над растерянным Орнасом. Где же меч?..\n– Я настоящий Орнас, – объявил двойник. – Сильнее, умнее, лучше. Ты был нужен мне, чтобы обучиться у джедаев, когда недоумки-родители стали бесполезными. Но теперь я возвращаю то, что отдал тебе. То, что моё по праву...",
    "answers": [
      {
        "super_calculate": false,
        "id": 895,
        "calculate": true,
        "lua_do": "function lua_do()\ndarkOrnas = 1\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 896,
        "text": "Открыть глаза",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 1\nend"
      },
      {
        "id": 897,
        "text": "Открыть глаза",
        "lua_if": "function lua_if()\nupLineFinal = upLineFinal or 1\nreturn upLineFinal == 3\nend"
      }
    ]
  },
  {
    "id": 899,
    "text": "– Ты слаб. Ты не достоин стоять здесь, – прищуренный взгляд прожигал Орнаса насквозь. – Думал, ты спрячешься, едва учуяв Тьму, как всегда. Тебе даже на это не хватило мозгов?\n– Ты часть меня. Я боялся тебя раньше, но не сейчас. Сейчас я готов взглянуть в глаза Тьмы внутри меня самого и усмирить её.\n– Ну попробуй...\n   Тёмная копия Орнаса обрушилась на него. Вспыхнули, встретившись, световые мечи. Красные глаза буравили юношу, тонкие губы противника свело в ядовитой усмешке.\n– Ты столько лет считал себя главным и раскисал в наивном блаженстве. Старался не замечать меня, забыть о прошлом...\n   Ситх попытался ударить Орнаса ногой, но он увернулся, а его меч синей вспышкой поразил врага. Двойник растворился в клубах чёрной дымки.",
    "answers": [
      {
        "id": 900,
        "text": "Открыть глаза"
      }
    ]
  },
  {
    "id": 900,
    "text": "   Орнас открыл глаза. Он всё ещё стоял в коридоре, двойника не было. Он знал, что конец испытания близок. Но готов ли он завершить его? Или тёмная сторона, тянущая к нему свои щупальца через видения, окончательно поглотит его?",
    "answers": []
  },
  {
    "id": 901,
    "text": "– Незваный гость, – не услышал, а скорее почувствовал Орнас чьи-то слова.<s>r\n   Он обернулся. Никого не было.<s>r\n– Ты прошёл через испытания этого храма, раз стоишь сейчас здесь, – тихий шелестящий голос на этот раз зазвучал от саркофага.<s>r\n   Присмотревшись, Орнас увидел неясный силуэт, медленно отделяющийся от изваяния на крышке. Призрак Силы?..<s>r\n– Да, я – дух, тень усопшего исследователя Силы. Ты можешь называть меня Владыка Ша.<s>r\n– Да, Владыка, – против своей воли выпалил Орнас и припал на колено.<s>r\n– Слав-в-вно, – протянул призрак. – Впрочем, это ни к чему. Встань, юный Орнас. Уверена, у тебя полно вопросов.",
    "answers": [
      {
        "id": 902,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 902,
    "text": "– Кто вы? – не задумываясь спросил Орнас. – Ситх?<s>r\n– Джедаи называют ситхом любого, кто не разделяет их страсти к самоистязаниям, – сухо засмеялся призрак, отделяясь от саркофага и направляясь к столу.<s>r\n   Только теперь Орнас сумел рассмотреть, кто перед ним. Сгорбенная полупрозрачная фигура с тростью, не то в платье, не то в пышной мантии, непропрционально маленькая голова с острым подбородком, испещрённая глубокими бороздами морщин, крючковатый нос и близко посаженные глаза. Глядя на неё, Орнас не чувствовал страха, хоть и понимал, что должен.<s>r\n– Я исследователь, – вновь зашелестел дух, усевшись на стул. – Я изучала Силу, но не так, как этого хотели бы в твоём ордене.",
    "answers": [
      {
        "id": 903,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 903,
    "text": "– Я чувствую тьму этого места, – сказал Орнас. – Это зло здесь из-за вас?<s>r\n– Делает ли меня злом лишь то, что я знала слишком много и не хотела, чтобы мои знания пропали? Да, я боялась смерти и искала способ обмануть её. Собирала легенды и артефакты по всей галактике, предания об иных временах и иных мастерах. Продлевала свою жизнь как могла, и всё равно... – Владыка Ша развела руками. – Я чувствовала, что умираю, и попыталась повторить один тёмный ритуал. Он сработал не так, как я ожидала. Теперь я привязана к этой планете, к этому храму. И не могу сама даже отдать приказ своему дроиду...<s>r\n– Дроид... –  поёжился Орнас, вспомнив встречу с ним.<s>r\n– Ещё меня удерживает здесь моё исследование. Я научилась взаимодействовать с миром через таких, как ты. Я близка к разгадке тайны бессмертия как никогда, пусть это и не поможет мне самой... А ты хотел бы стать бессмертным, Орнас?<s>r\n   Юноша опешил. Он никогда бы не признался в чём-то таком даже самому себе, но здесь...",
    "answers": [
      {
        "id": 904,
        "text": "– Да."
      },
      {
        "id": 905,
        "text": "– Нет.",
        "lua_if": "function lua_if()\ndarkOrnas = darkOrnas or 0\nreturn darkOrnas == 0\nend"
      },
      {
        "id": 904,
        "text": "– Нет.",
        "lua_if": "function lua_if()\ndarkOrnas = darkOrnas or 0\nreturn darkOrnas == 1\nend",
        "lua_do": "function lua_do()\nforcedNo = 1\nend"
      }
    ]
  },
  {
    "id": 904,
    "text": "empty\nсогласие не бессмертие (включая недобровольное)",
    "answers": [
      {
        "id": 904,
        "text": "– Слав-в-вно, – вновь протянула Владыка Ша, откидываясь на спинку стула. – С моей помощью ты обретёшь могущество, о котором не мог и помыслить. Отомстишь всем обидчикам и построишь новый справедливый мир. Вместе мы раскроем все оставшиеся тайны жизни, и ты станешь по-настоящему бессмертным... Ты готов стать моим учеником?<s>ufeff\n   Орнаса будто облили холодной водой. Учеником? Но у него уже есть учитель. И он выполняет задание Ордена, чтобы пройти испытание и стать рыцарем-джедаем. Ведь это то, чего он так хотел... Или нет?<s>ufeff\n   \"Нет\", – ответила его тёмная сторона самому себе, и глаза Орнаса загорелись.<s>ufeff\n– Да, – сказал он вслух. – Я стану твоим учеником, Владыка. Клянусь в верности тебе и твоему учению.<s>ufeff\n– Чу-у-удно... Но сначала нужно закончить последнее дело здесь.",
        "lua_if": "function lua_if()\n--\nforcedNo = forcedNo or 0\nreturn forcedNo == 0\nend",
        "merge": true
      },
      {
        "id": 904,
        "text": "   \"Нет\", – хотел было ответить Орнас.\n– Да, – сказал он вслух, повинуясь тёмной стороне собственного сознания, и его глаза загорелись.<s>ufeff\n– Слав-в-вно, – вновь протянула Владыка Ша, откидываясь на спинку стула. – С моей помощью ты обретёшь могущество, о котором не мог и помыслить. Отомстишь всем обидчикам и построишь новый справедливый мир. Вместе мы раскроем все оставшиеся тайны жизни, и ты станешь по-настоящему бессмертным... Ты готов стать моим учеником?<s>ufeff\n   Орнас на мгновение вспомнил, что у него уже есть учитель, и что он прямо сейчас выполняет задание Ордена, чтобы пройти какое-то глупое испытание и стать рыцарем-джедаем. А ведь совсем недавно это казалось таким важным...\n– Да, – кивнул он. – Я стану твоим учеником, Владыка. Клянусь в верности тебе и твоему учению.<s>ufeff\n– Чу-у-удно... Но сначала нужно закончить последнее дело здесь.",
        "lua_if": "function lua_if()\n--\nforcedNo = forcedNo or 0\nreturn forcedNo == 1\nend",
        "merge": true
      },
      {
        "id": 906,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--Десс осталась внизу в стазисе ->  бой с учителем\n\ncondition = condition or {}\ncondition.freeDess = condition.freeDess or 0\n\nreturn condition.freeDess ~= 1\nend"
      },
      {
        "id": 907,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--Десс осталась внизу разбуженная, но не нападала ->  бой с Десс, \"ничего личного\"\n\ncondition = condition or {}\ncondition.freeDess = condition.freeDess or 0\ndess =dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\ndess.trait = dess.trait or 0\n\nreturn condition.freeDess == 1 and dess.isUpstairs ~= 1 and dess.trait ~= 1\nend"
      },
      {
        "id": 908,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--Десс уже нападала, но не была порабощена ->  бой с Десс, \"доказать, что лучше\"\n\ncondition = condition or {}\ncondition.freeDess = condition.freeDess or 0\ndess =dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\ndess.trait = dess.trait or 0\nforcedDess = forcedDess or 0\n\nreturn condition.freeDess == 1 and dess.isUpstairs ~= 1 and dess.trait == 1 and forcedDess ~= 1\nend"
      },
      {
        "id": 909,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--Десс была порабощена ->  бой с Десс, \"отомстить\"\n\ncondition = condition or {}\ncondition.freeDess = condition.freeDess or 0\ndess =dess or {}\ndess.isUpstairs = dess.isUpstairs or 0\ndess.trait = dess.trait or 0\nforcedDess = forcedDess or 0\n\nreturn condition.freeDess == 1 and dess.isUpstairs ~= 1 and dess.trait == 1 and forcedDess == 1\nend"
      }
    ]
  },
  {
    "id": 905,
    "text": "",
    "answers": []
  },
  {
    "id": 906,
    "text": "   Орнас нахмурился. Последнее дело?\n– Ты должен сразиться со своим бывшим учителем, – зашептала Владыка Ша ему прямо на ухо, будто кто-то мог их подслушать. – Одолей Астора Льерсо в бою, но сохрани его жизнь. Он ещё пригодится для наших исследований...\n– Как прикажете, Владыка, – склонился в поклоне Орнас.\n   Но внутри него всё сжалось. Учитель был единственным, кто знал об Орнасе всё или почти всё. Были ли у него шансы?\n– Страх – это слабость, мой новый ученик, – нахмурилась старуха. – Используй его в других, а не поддавайся сам.\n   Орнас сжал кулаки, быстро развернулся и направился к двери. Ему оставалось придумать, как справиться с самым сложным противником, какого только могла предложить ему судьба, или потерять всё.",
    "answers": [
      {
        "id": 937,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 907,
    "text": "empty\nДесс появляется, ничего личного\nне забыть, что при lightsaber == 1 Десс будет без меча, если Орнас не проиграл НК",
    "answers": [
      {
        "id": 907,
        "text": "   Орнас не сразу понял, о чём говорил призрак старухи, но тут створки двери разъехались, и внутрь прошла... Десвиар?<s>ufeff\n– Что ты здесь делаешь? – опешил Орнас. – Как ты...<s>ufeff\n   Зажжённый световой меч в руке девушки был красноречивее слов.<s>ufeff\n– То же, что и ты. Ничего личного, но занять это место должна я. Защищайся.<s>ufeff\n– Покажи, достоин ли ты стать моим учеником, Орнас, – прошипела ему на ухо Владыка Ша. – Расправься с девчонкой, но оставь её в живых.<s>ufeff<s>ufeff\n   Голова юноши гудела. Всё не должно быть так! Руки будто налились свинцом. Затем всё тело проняла дрожь, когда ладонь в привычном жесте легла на пояс. Меча не было...<s>ufeff<s>ufeff\n– Постой, я безоружен, – обратился Орнас то ли к Десвиар, то ли к призрачному силуэту.<s>ufeff<s>ufeff\n   Девушка молча кинула в его сторону какой-то предмет. Орнас даже не удивился, поймав на лету рукоять собственного светового меча.<s>ufeff\n– Защищайся, – повторила Десс и бросилась в атаку.",
        "merge": true
      },
      {
        "id": 912,
        "text": "Защищаться"
      },
      {
        "id": 934,
        "text": "Подчинить волю Десвиар и заставить поиграть в бою",
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\nreturn force_ab == 1\nend"
      },
      {
        "id": 935,
        "text": "Подчинить волю Десс и убедить не сражаться",
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\ndarkOrnas = darkOrnas or 0\n\nreturn force_ab == 1 and darkOrnas == 0\nend"
      }
    ]
  },
  {
    "id": 908,
    "text": "empty<s>r\nБез меча, проигрывает Десс, нападала раньше",
    "answers": [
      {
        "id": 908,
        "text": "   Орнас не сразу понял, о чём говорил призрак старухи, но тут створки двери разъехались, и внутрь прошла Десвиар. Зажжённый световой меч и искрящийся взгляд не предвещали ничего хорошего.\n– Покажи, достоин ли ты стать моим учеником, Орнас, – прошипела Владыка Ша. – Расправься с девчонкой, но оставь её в живых.\n   Голова юноши гудела. Десс могла убить его в прошлый раз, но не сделала этого. Знала, что они встретятся здесь? Хотела произвести впечатление на призрака?\n   Руки будто налились свинцом. Затем всё тело проняла дрожь, когда ладонь в привычном жесте легла на пояс. Меча не было...\n– Постой, я безоружен, – обратился Орнас то ли к Десвиар, то ли к призрачному силуэту.\n– Тем хуже для тебя, –  равнодушно пожала она плечами и занесла клинок для удара...",
        "lua_if": "function lua_if()\nknowTheNameOfDess = knowTheNameOfDess or 0\nreturn knowTheNameOfDess == 1\nend",
        "merge": true
      },
      {
        "id": 908,
        "text": "   Орнас не сразу понял, о чём говорил призрак старухи, но тут створки двери разъехались, и внутрь прошла девушка. Та самая, которую он пробудил от криосна. Зажжённый световой меч в её руке и искрящийся взгляд не предвещали ничего хорошего.\n– Покажи, достоин ли ты стать моим учеником, Орнас, – прошипела Владыка Ша. – Расправься с девчонкой, но оставь её в живых.\n   Голова юноши гудела. Девушка могла убить его в прошлый раз, но не сделала этого. Знала, что они встретятся здесь? Хотела произвести впечатление на призрака?\n   Руки будто налились свинцом. Затем всё тело проняла дрожь, когда ладонь в привычном жесте легла на пояс. Меча не было...\n– Постой, я безоружен, – обратился Орнас то ли к противнице, то ли к призрачному силуэту.\n– Тем хуже для тебя, –  равнодушно пожала плечами девушка и занесла клинок для удара...",
        "lua_if": "function lua_if()\nknowTheNameOfDess = knowTheNameOfDess or 0\nreturn knowTheNameOfDess == 0\nend",
        "merge": true
      },
      {
        "id": 933,
        "text": "Защищаться",
        "lua_if": "function lua_if()\n--наручи или суперсила\nforce_ab = force_ab or 0\nbracer = bracer or 0\n\nreturn force_ab > 0 or\nbracer > 0\nend"
      },
      {
        "id": 931,
        "text": "Защищаться",
        "lua_if": "function lua_if()\n--есть бонусы: крио-граната, плазменная граната\n\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\n\nforce_ab = force_ab or 0\nbracer = bracer or 0\n\nreturn not (grenade1 > 0 and style == 4) and (grenade3 > 0 or grenade4 > 0) and force_ab == 0 and bracer == 0\n\nend"
      },
      {
        "id": 931,
        "text": "Защищаться",
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ],
        "lua_if": "function lua_if()\n--есть бонусы: ионная граната и 4й стиль\n\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\n\nreturn (grenade1 > 0 and style == 4) and grenade3 < 1 and force_ab == 0 and bracer == 0\n\nend"
      },
      {
        "id": 931,
        "text": "Защищаться",
        "lua_if": "function lua_if()\ngrenade4 = grenade4 or 0\n\nreturn (grenade4 > 0 and style == 2) and grenade3 < 1 and force_ab == 0 and bracer == 0\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ]
      },
      {
        "id": 910,
        "text": "Эпилог",
        "lua_if": "function lua_if()\n\n\nreturn not (grenade1 > 0 and style == 4) and not (grenade3 > 0 or grenade4 > 0) and force_ab == 0 and bracer == 0\nend"
      }
    ]
  },
  {
    "id": 909,
    "text": "   Орнас не сразу понял, о чём говорил призрак старухи, но тут створки двери разъехались, и внутрь прошла Десвиар. Зажжённый световой меч и искрящийся взгляд не предвещали ничего хорошего.<s>r\n– Покажи, достоин ли ты стать моим учеником, Орнас, – прошипела Владыка Ша. – Расправься с девчонкой, но оставь её в живых.<s>r\n   Голова юноши гудела. Десс могла убить его в прошлый раз, но не сделала этого. Знала, что они встретятся здесь? Хотела произвести впечатление на призрака?<s>r\n   Руки будто налились свинцом. Затем всё тело проняла дрожь, когда ладонь в привычном жесте легла на пояс. Меча не было...<s>r\n– Постой, я безоружен, – обратился Орнас то ли к Десвиар, то ли к призрачному силуэту.<s>r\n– А ты снова заколдуй меня, – оскалилась девушка, отводя меч для удара. – Я же говорила, ты поплатишься за то, что сделал и только собирался сделать со мной...",
    "answers": [
      {
        "id": 910,
        "text": "Эпилог",
        "lua_if": "function lua_if()\n--нет бонусов: крио-граната, плазменная граната, ионная граната и 4й стиль\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\n\nreturn not (grenade1 > 0 and style == 4) and grenade3 < 1 and grenade4 <1\nend"
      },
      {
        "id": 930,
        "text": "Защищаться",
        "lua_if": "function lua_if()\n--есть бонусы: крио-граната, плазменная граната\n\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\n\nreturn not (grenade1 > 0 and style == 4) and (grenade3 > 0 or grenade4 > 0)\n\nend"
      },
      {
        "id": 930,
        "text": "Защищаться",
        "lua_if": "function lua_if()\n--есть бонусы: ионная граната и 4й стиль\n\ngrenade1 = grenade1 or 0\ngrenade3 = grenade3 or 0\ngrenade4 = grenade4 or 0\n\nreturn (grenade1 > 0 and style == 4) and grenade3 < 1\n\nend",
        "bgAnswerImage": [
          "https://i.ibb.co/CzQW0LM/image.png"
        ]
      },
      {
        "id": 930,
        "text": "Защищаться",
        "bgAnswerImage": [
          "https://i.ibb.co/PjcpNHd/image.png"
        ],
        "lua_if": "function lua_if()\ngrenade4 = grenade4 or 0\n\nreturn (grenade4 > 0 and style == 2) and grenade3 < 1\nend"
      }
    ]
  },
  {
    "id": 910,
    "text": "   Свет больно бьёт по глазам, лёгкие сводит в спазме. Орнас откашливает вязкую жидкость, пытается сорвать с лица и тела многочисленные трубки, но сил не хватает, и он падает без чувств.<s>r\n   Снова свет. Но теперь он не слепит и трубок уже нет. Только очень холодно. Орнас открывает глаза и понимает, что сидит прямо на холодном полу из красного камня, едва прикрытый какой-то тряпкой. Его терзает ощущение, что он забыл что-то очень важное, но сфокусироваться никак не выходит.<s>r\n   Чей-то негромкий кашель привлекает к себе внимание. Здесь кто-то ещё? Орнас пытается протереть глаза руками, но конечность едва слушается. Это что, протезы? С удивлением он общупывает всё, что осталось от правой руки и обеих ног, проводит ладонью по рубцу на лице. Места, где кожа переходит в искусственный материал, неприятно холодит. Но откуда это всё?<s>r\n– Кхм... Привет, я Элизабет, – говорит совсем молодая девушка, появлясь перед глазами Орнаса. – Это я вытащила тебя из гибернационной камеры. А ты кто такой?..",
    "answers": [
      {
        "id": 1,
        "text": "Конец"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.endings = g.endings or {}\ng.endings.awakened = (g.endings.awakened or 0) <plus> 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 910
      },
      {
        "id": 910,
        "text": "\n\n✮ Открыт эпилог «Пробуждённый»",
        "lua_if": "function lua_if()\ng.endings.awakened = g.endings.awakened or 0\nreturn g.endings.awakened == 1\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 911,
    "text": "На этой странице собраны найденные вами эпилоги. ",
    "answers": [
      {
        "id": 911,
        "text": "g.endings = g.endings or {}",
        "calculate": true,
        "super_calculate": false
      },
      {
        "id": 911,
        "text": "Пройдите квест до конца хотя бы один раз, чтобы открыть эпилог.",
        "lua_if": "function lua_if()\n--переменная концовки может быть больше 1 !!!\n\ng.endings = g.endings or {}\nlocal a = 0\nfor k,v in pairs (g.endings) do\n   a = a <plus> 1\nend\nreturn a == 0\nend",
        "merge": true
      },
      {
        "id": 910,
        "text": "Пробуждённый",
        "lua_if": "function lua_if()\ng.endings.awakened = g.endings.awakened or 0\nreturn g.endings.awakened > 0\nend"
      },
      {
        "id": 926,
        "text": "На службе вечности",
        "lua_if": "function lua_if()\ng.endings.eternitySlave = g.endings.eternitySlave or 0\nreturn g.endings.eternitySlave > 0\nend"
      },
      {
        "id": 938,
        "text": "эпилог_уборщик_инвалид",
        "lua_if": "function lua_if()\ng.endings.cleaner = g.endings.cleaner or 0\nreturn g.endings.cleaner > 0\nend"
      },
      {
        "id": 1,
        "text": "На первую страницу",
        "middle_answer": true
      }
    ]
  },
  {
    "id": 912,
    "text": "   Десс набросилась на Орнаса, и он едва успел отскочить в сторону, активировав меч. Её лицо скривилось, и она вновь ринулась в атаку. ",
    "answers": [
      {
        "id": 912,
        "text": "Фехтовала Десвиар неважно, не чета Орнасу, отточившему свой стиль боя до автоматизма. ",
        "lua_if": "function lua_if()\nreturn style == 1\nend",
        "merge": true
      },
      {
        "id": 912,
        "text": "Фехтовала Десвиар неплохо, опыта у неё явно было побольше, чем у неокончившего обучение падавана. ",
        "lua_if": "function lua_if()\nreturn style ~= 1\nend",
        "merge": true
      },
      {
        "id": 912,
        "text": "Чувтствовалось, что нетерпение заставляло её действовать необдуманно.\n   Орнас внимательно защищался. Он отчаянно пытался понять, в самом ли деле ему нужно сражаться с девушкой или можно попытаться успокоить её и уладить всё мирно.\n   Тем временем Десвиар навалилась на юношу в новом натиске и попыталась просто продавить его блок силой.\n– Ты не достоин быть здесь, щенок... – проскрежетала она, когда их лица оказались рядом. – Это я, я...",
        "merge": true
      },
      {
        "id": 913,
        "text": "– Но я попал сюда сразу, а не через тридцать лет...",
        "lua_do": "function lua_do()\ndessPacification = -1\nend"
      },
      {
        "id": 916,
        "text": "– Твоя наставница не хотела бы, чтобы ты вела себя так.",
        "need": 68,
        "lua_do": "function lua_do()\ndessPacification = 2\n-- нужно сделать влияние в зависимости от её стороны? \nend"
      },
      {
        "id": 914,
        "text": "– Ты позоришь свою наставницу!",
        "need": 68,
        "lua_do": "function lua_do()\ndessPacification = -2\nend"
      },
      {
        "id": 915,
        "text": "– Не иди на поводу эмоций, давай просто поговорим!",
        "lua_do": "function lua_do()\ndessPacification = 1\nend"
      },
      {
        "comment": true,
        "id": 912,
        "text": "\n   К сожалению, Орнасу не удалось узнать о Десс что-то настолько чувствительное, чтобы это можно было использовать сейчас.",
        "need": [
          -68
        ],
        "merge": true
      }
    ]
  },
  {
    "id": 913,
    "text": "– Здесь ты и останешься!<s>r\n   Десс разорвала контакт и взмах её меча оставил алую отметину на стене прямо за ухом Орнаса. Сам он успел отпрыгнуть в сторону.<s>r\n   Теперь они кружили вокруг саркофага, не решаясь сократить дистанцию, и буравили друг друга глазами.<s>r\n– Тебе не одолеть в бою настоящего рыцаря-джедая, – провоцировала юношу Десвиар. – Ты всего лишь маленький юнлинг!",
    "answers": [
      {
        "id": 917,
        "text": " – Тем обиднее будет твоё поражение.",
        "lua_do": "function lua_do()\ndessPacification = dessPacification - 1\nend"
      },
      {
        "id": 918,
        "text": " – Я не хочу сражаться с тобой.",
        "lua_do": "function lua_do()\ndessPacification = dessPacification <plus>1\nend"
      }
    ]
  },
  {
    "id": 914,
    "text": "   Десс прорычала что-то нечленораздельное и разорвала контакт. Взмах её меча чуть не снёс голову Орнасу, но он чудом успел отпрыгнуть в сторону.<s>r\n   Теперь они кружили вокруг саркофага, не решаясь сократить дистанцию, и буравили друг друга глазами.<s>r\n– Тебе не одолеть в бою настоящего рыцаря-джедая, – провоцировала юношу Десвиар. – Ты всего лишь маленький юнлинг!",
    "answers": [
      {
        "id": 913,
        "text": "Новый ответ. введите текст",
        "run": [
          913
        ]
      }
    ]
  },
  {
    "id": 915,
    "text": "   На мгновенье Десс замерла, и её натиск ослаб.<s>r\n– Поговори с моим мечом! – наконец разорвала она контакт, и быстрым взмахом оставила алую отметину на стене где-то возле Орнаса – сам он успел отпрыгнуть в сторону.<s>r\n   Теперь они кружили вокруг саркофага, не решаясь сократить дистанцию, и буравили друг друга глазами.<s>r\n– Тебе не одолеть в бою настоящего рыцаря-джедая, – провоцировала юношу Десвиар. – Ты всего лишь маленький юнлинг!",
    "answers": [
      {
        "id": 913,
        "text": "Новый ответ. введите текст",
        "run": [
          913
        ]
      }
    ]
  },
  {
    "id": 916,
    "text": "   На мгновенье Десс замерла, и её натиск ослаб.<s>r\n– Ты ничего не знаешь о ней и о том, чего она хотела! – наконец разорвала она контакт, и взмах её меча оставил алую отметину на стене где-то возле Орнаса – сам он успел отпрыгнуть в сторону.<s>r\n   Теперь они кружили вокруг саркофага, не решаясь сократить дистанцию, и буравили друг друга глазами.<s>r\n– Тебе не одолеть в бою настоящего рыцаря-джедая, – провоцировала юношу Десвиар. – Ты всего лишь маленький юнлинг!",
    "answers": [
      {
        "id": 913,
        "text": "Новый ответ. введите текст",
        "run": [
          913
        ]
      }
    ]
  },
  {
    "id": 917,
    "text": "   Десс оскалилась и запустила в Орнаса вращающийся меч, словно бумеранг. Юноша легко увернулся и быстро сократил дистанцию, оказавшись почти в упор к потерявшей оружие девушке.<s>r\n– Проси пощады, и я сохраню твою жизнь, – Орнас приставил лезвие меча к груди Десвиар. – Всё кончено.<s>r\n   Наигранная растерянность во взгляде Десс сменилась злой ухмылкой, и мощный телекинетический удар отбросил юношу к стене. Он упал на спину, но тут же вскочил на ноги. Десвиар уже приблизилась к нему, угрожающе выставив меч вперёд.<s>r\n– Зачем тебе это всё? Ты не знаешь, в какую игру собираешься влезть, позволь мне уберечь тебя от неё.",
    "answers": [
      {
        "id": 920,
        "text": "– Я должен пройти испытание.",
        "lua_do": "function lua_do()\ndessPacification = dessPacification <plus> 1\nend"
      },
      {
        "id": 921,
        "text": "– Я не дам тебе повторить ошибки твоей наставницы.",
        "need": [
          68
        ],
        "lua_do": "function lua_do()\ndessPacification = dessPacification <plus> 2\nend"
      },
      {
        "id": 922,
        "text": "– Я хочу обрести могущество.",
        "lua_do": "function lua_do()\ndessPacification = dessPacification - 1\nend"
      },
      {
        "id": 919,
        "text": "– Я докажу, что я лучше тебя.",
        "lua_do": "function lua_do()\ndessPacification = dessPacification - 2\nend"
      }
    ]
  },
  {
    "id": 918,
    "text": "   Десс оскалилась и запустила в Орнаса вращающийся меч, словно бумеранг. Юноша легко увернулся и быстро сократил дистанцию, оказавшись почти в упор к потерявшей оружие девушке.<s>r\n– Мы не враги, – Орнас протянул ей руку. – Не должны ими быть.<s>r\n   Наигранная доверчивость во взгляде Десс сменилась злой ухмылкой, и мощный телекинетический удар отбросил юношу к стене. Он упал на спину, но тут же вскочил на ноги. Десвиар уже приблизилась к нему, угрожающе выставив меч вперёд.<s>r\n– Зачем тебе это всё? Ты не знаешь, в какую игру собираешься влезть, позволь мне уберечь тебя от неё.",
    "answers": [
      {
        "id": 917,
        "text": "Новый ответ. введите текст",
        "run": [
          917
        ]
      }
    ]
  },
  {
    "id": 919,
    "text": "– Ты ничтожетсво! – Десвиар прожигала Орнаса взгядом. ",
    "answers": [
      {
        "id": 919,
        "text": "– Я проучу тебя!\n   Она ринулась на юношу. За мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Орнасу не пришлось проявлять чудеса ближнего боя – девушка потеряла всякий контроль и действовала прямолинейно. Короткий рывок в сторону, быстрый удар. Меч выскользнул из руки Десс и покатился по полу, а она упала, схватившись за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\ndessPacification = dessPacification or 0\nreturn dessPacification < -4 -- набрано достаточно, чтобы разозлить\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "\n– Мы не враги... – Орнас опустил меч и выпрямился во весь рост. – Мы не обязаны этого делать.\n   Десс замерла, закусив губу. Какое-то время они молча стояли друг напротив друга, не решаясь что-либо ещё сказать.\n   Наконец Орнас деактивировал свой меч и убрал рукоять на пояс. Десвиар последовала его примеру.\n– Ты должен одолеть её в бою, а не хитростью, – прошипела ему на самое ухо Владыка. – Докажи, что достоин обрести могущетсво!",
        "lua_if": "function lua_if()\nreturn dessPacification > 4  -- набрано достаточно, чтобы замирить\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n   Она медленно обходила вокруг юноши, не отрывая от него взгляда. Вдруг в одно мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Орнасу пришлось проявить всё своё мастерство, чтобы увернуться от быстрого взмаха. Девушка по инерции пролетела вперёд, и на этот раз Орнас без сопротивления нанёс удар. Меч выскользнул из руки Десс и покатился по полу, а она упала, схватившись за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\nreturn dessPacification < 5 and dessPacification > -5 and style == 1 -- набрано недостаточно, но бонус от 1 стиля позволяет победить\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n– Мы не враги... – Орнас выпрямился во весь рост, деактивировал меч и отбросил рукоять в сторону. – Мы не обязаны этого делать.\n   Десс замерла, закусив губу. Казалось, она была готова броситься на него в любой момент, но не осмеливалась, подозревая какую-то хитрость или уловку. Поэтому они молча стояли друг напротив друга, не решаясь что-либо ещё сказать.\n   Наконец Десвиар тоже убрала оружие.\n– Ты должен одолеть её в бою, а не хитростью, – прошипела ему на самое ухо Владыка. – Докажи, что достоин обрести могущетсво!",
        "lua_if": "function lua_if()\nreturn dessPacification < 5 and dessPacification > -5 and style == 5-- набрано недостаточно, но бонус 5 стиля позволяет замирить\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n   Она медленно обходила вокруг юноши, не отрывая от него взгляда. Вдруг в одно мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Юноше не хватило мастерства, чтобы увернуться, и быстрый взмах настиг его руку... И лишь прожёг длинный рукав робы, наткнувшись на непреодолимое препятствие – наруч из кортозиса.\n   Орнас воспользовался замешательством Десвиар и нанёс ответный удар. Меч выскользнул из её пальцев и покатился по полу, а она упала, схватившись за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\n\nreturn dessPacification < 5 and dessPacification > -5 and style ~= 1 and style ~= 5 -- набрано недостаточно, нет бонуса 1 и 5 стилей, есть бонусы из подвала\nand bracer == 1\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n   Она медленно обходила вокруг юноши, не отрывая от него взгляда. Вдруг в одно мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Юноше не хватило мастерства, чтобы увернуться, и быстрый взмах почти настиг его руку...\n– Стой! – крикнул Орнас.\n   Он вложил в это слово всё своё отчаяние и всю оставшуюся волю. И Десс остановилась. Она так и замерла в неестественной позе, нелепо держа меч у самых рук Орнаса, и безразлично глядела на него потухшими глазами.\n– Отдай мне оружие, – нерешительно приказал Орнас, и Десвиар протянула ему меч. – А теперь – усни.\n   Она упала как подкошенная. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – Чудно...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та полностью обмякла.",
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\n\nreturn dessPacification < 5 and dessPacification > -5 and style ~= 1 and style ~= 5 -- набрано недостаточно, нет бонуса 1 и 5 стилей, есть бонусы из подвала\nand force_ab == 1\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n   Она медленно обходила вокруг юноши, не отрывая от него взгляда. Вдруг в одно мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Юноше не хватило мастерства, чтобы увернуться, и быстрый взмах настиг его руку... \n   Орнас взревел не то от боли, не то от ярости. Боль придала ему сил, ярость – решимости. И сквозь кровавую пелену перед глазами он бросился вперёд...\n   Орнас сам не понял, как оказался над бьющимся в конвульсиях телом Десс. От её ног и рук остались лишь обожжённые обрубки. Это сделал он сам?\n   Кровавая пелена медленно сходила с глаз Орнаса, его кулаки разжались, а чужой световой меч выскользнул из ладони и покатился по полу. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова усни...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\n-- победа на ярости\nforce_ab = force_ab or 0\n\nreturn dessPacification < 5 and dessPacification > -5 and style ~= 1 and style ~= 5 -- набрано недостаточно, нет бонуса 1 и 5 стилей, есть бонусы из подвала\nand force_ab == 2\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n   Она медленно обходила вокруг юноши, не отрывая от него взгляда. Вдруг в одно мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Юноше не хватило мастерства, чтобы увернуться... \nИ в тот же миг с пальцев Орнаса сорвались первые всполохи голубоватых молний. Десвиар отбросило к стене, но он сократил дистанцию и обрушил на неё настоящий электрический шторм. Потоки энергии проходили через его тело, наполняя ощущением безграничного могущества, вспышки разрядов слепили, а их треск сливался с криками девушки в гипнотическую мелодию...\n– Хватит, остановись! – резкий крик призрака над самым ухом словно вывел юношу из транса, и он с заметным усилием сжал кулаки и опустил руки.\n   От былого азарта не осталось и следа, и Орнас старался не смотреть на то, что осталось от Десс.\n– Она ещё жива, – возник над её телом призрак. – Мы ещё можем её спасти.\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки и замерла в этой позе.",
        "lua_if": "function lua_if()\n-- победа на ярости\nforce_ab = force_ab or 0\n\nreturn dessPacification < 5 and dessPacification > -5 and style ~= 1 and style ~= 5 -- набрано недостаточно, нет бонуса 1 и 5 стилей, есть бонусы из подвала\nand force_ab == 3\nend",
        "merge": true
      },
      {
        "id": 919,
        "text": "– Тебе не справиться со мной.\n   Она медленно обходила вокруг юноши, не отрывая от него взгляда. Вдруг в одно мгновенье Десс преодолела несколько шагов, что разделяли их, сверкнул в последний раз луч её меча. Юноше не хватило мастерства, чтобы увернуться от быстрого взмаха. Острая боль пронзила сознание Орнаса, он схватился за кисть и повалился на пол. Меч в ещё сжимающей его ладони с глухим звуком упал рядом. Всё было кончено.\n– Слав-в-вно... – возник где-то сверху призрачный силуэт. – Теперь спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Орнаса, и он мгновенно обмяк, погружаясь в небытие.",
        "lua_if": "function lua_if()\nreturn dessPacification < 5 and dessPacification > -5 and style ~= 1 and style ~= 5 -- набрано недостаточно, нет бонуса 1 и 5 стилей, нет бонусов из подвала\nand bracer ~= 1 and force_ab == 0\nend",
        "merge": true
      },
      {
        "id": 923,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn dessPacification < -4 or (dessPacification < 5 and style == 1)-- победа = набрано достаточно, чтобы разозлить или первый стиль и нет замирения или бонус из подвала без замирения\nor (dessPacification < 5 and (bracer > 0 or force_ab > 0))\nend"
      },
      {
        "id": 910,
        "text": "Эпилог",
        "lua_if": "function lua_if()\nreturn dessPacification < 5 and dessPacification > -5 and style ~= 1 and style ~= 5 -- поражение = не набрал очков ярости, не набрал дипломатию, нет 1 стиля, нет 5 стиля, нет бонуса из подвала\nand bracer == 0 and force_ab == 0\nend"
      },
      {
        "id": 925,
        "text": "Дальше",
        "lua_if": "function lua_if()\ndarkOrnas = darkOrnas or 0\nreturn darkOrnas == 1 and (dessPacification > 4 or (dessPacification > -5 and style == 5))-- притворно замирились = набрал диплом или 5 стиль\nend"
      },
      {
        "id": 936,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn darkOrnas ~= 1 and (dessPacification > 4 or (dessPacification > -5 and style == 5))-- искренне замирились = набрал диплом или 5 стиль\nend"
      }
    ]
  },
  {
    "id": 920,
    "text": "– Как вообще можно думать о такой ерунде здесь? – рассмеялась Десвиар. ",
    "answers": [
      {
        "id": 919,
        "text": "Новый ответ. введите текст",
        "run": [
          919
        ]
      }
    ]
  },
  {
    "id": 921,
    "text": "– Что ты сказал? – Десвиар на мгновение замерла, нахмурившись. ",
    "answers": [
      {
        "id": 919,
        "text": "Новый ответ. введите текст",
        "run": [
          919
        ]
      }
    ]
  },
  {
    "id": 922,
    "text": "– В очередь, юнец. Я ждала этого ещё тогда, когда ты не появлялся на свет, – невесело усмехнулась Десвиар. ",
    "answers": [
      {
        "id": 919,
        "text": "Новый ответ. введите текст",
        "run": [
          919
        ]
      }
    ]
  },
  {
    "id": 923,
    "text": "– Нажми на кнопку возле двери, – сказала Владыка Ша, и Орнас выполнил приказ. – У нас мало времени.\n   Из незаметной ниши появился протокольный дроид. Совсем как тот, внизу...\n– Что это значит?\n– У нас мало времени, человек. Говори со мной голосом Владыки.\n   Время тянулось бесконечно. Орнас монотонно повторял распоряжения призрака дроиду, а тот непрестанно щелкал пальцами по кнопкам небольшого терминала. Поначалу юноша пытался разобраться в сути разговора, но быстро сдался: сокращения, кодовые фразы и слова на незнакомом ему языке только туманили сознание.\n   Наконец, дроид вручил Орнасу миниатюрный коммуникатор и скрылся.\n– Тяжело руководить исследованиями, когда подчинённые тебя не слышат, – засмеялся призрак. – Теперь пора заняться твоим обучением...",
    "answers": [
      {
        "id": 924,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 924,
    "text": "   Орнас не знал, сколько времени провёл в комнате с призраком, заучивая инструкции и обучаясь новым необычным приёмам Силы. Он не помнил, как покинул древний храм и что сказал учителю. Он даже не попытался узнать, засчитают ли ему прохождение испытания.\n   С тех пор для него имело значение только одно – его восхождение по пути истинного могущества и обещанное бессмертие.",
    "answers": [
      {
        "id": 926,
        "text": "Эпилог"
      }
    ]
  },
  {
    "id": 925,
    "text": "   Орнас медленно приблизился к Десвиар и накрыл руку девушки своей ладонью.\n– Вот так, – проговорил он. – Доверие сильнее страха, да?\n   Она вымученно улыбнулась и кивнула, наконец немного расслабившись.\n– Страх – это слабость... – будто самому себе прошептал Орнас и крепче сжал пальцы Десс своими.\n   Девушка дёрнулась в сторону, но не успела – луч её меча прочертил в воздухе дугу и потух, рукоять глухо упала на пол. Сама девушка рухнула следом, схватившись уцелевшей рукой за кисть. Всё было конечно.\n– А доверие – глупость, – возник над поверженной Десс призрак. – Я уже почти поверила, что вы... Впрочем, неважно.\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.\n– Спи...",
    "answers": [
      {
        "id": 924,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 926,
    "text": "   Слишком яркий свет слепит.\n   Орнас заворожённо смотрит на ровный ряд голокронов в хранилище Ордена. С тех пор, как Владыка Ша позволила ему добиваться звания магистра, он стал частым гостем здесь. Эти знания нужны для её исследования. А он шаг за шагом приближается к своей цели.\n   Пусть со времени испытания он виделся с призраком всего один раз вскоре после гибели своего бывшего наставника Астора Льерсо, Орнас продолжал неукоснительно следовать досконально проработанному плану. Плану, в котором он чувствовал себя лишь маленьким винтиком. Но обещанная награда заставляла каждый раз усмирять свои амбиции и гордость: ничего из этого не будет иметь значение в вечности, хозяином которой он вскоре станет.\n   Орнас берёт выбранный на сегодня голокрон. Руки дрожат: каждый раз кажется, что хитроумное устройство раскроет его истинную цель и те недостойные джедая поступки, на которые ему слишком часто приходится идти в своём служении Владыке. Но ничего необычного не происходит. Тёмная Сторона умеет хранить свои секреты.",
    "answers": [
      {
        "id": 1,
        "text": "Конец"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.endings = g.endings or {}\ng.endings.eternitySlave = (g.endings.eternitySlave or 0) <plus> 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 926
      },
      {
        "id": 910,
        "text": "\n\n✮ Открыт эпилог «На службе вечности»",
        "lua_if": "function lua_if()\ng.endings.eternitySlave = g.endings.eternitySlave or 0\nreturn g.endings.eternitySlave == 1\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 927,
    "text": "empty\nнадеть браслеты перед сейфом",
    "answers": [
      {
        "id": 927,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal b = \"\"\nlocal a = (arm1 == 3 and 1 or 0) <plus> (arm2 == 3 and 1 or 0) <plus> (arm3 == 3 and 1 or 0)\n  if a == 1 then\n    text = \"браслет\"\n    b = \"него\"\n  elseif a > 1 then \n    text =\"браслеты\"\n    b = \"них\"\n  end\nreturn \"   Орнас осторожно натянул \" .. text .. \" на левую руку, снова ощутив исходящий от \".. b .. \" холодок.\"\nend",
        "merge": true
      },
      {
        "id": 227,
        "text": "Дальше",
        "lua_do": "function lua_do()\ntakeOnArmlet = 1\n\narm1 = arm1 == 3 and 1 or arm1\narm2 = arm2 == 3 and 1 or arm2\narm3 = arm3 ==3 and 1 or arm3\nend"
      }
    ]
  },
  {
    "id": 928,
    "text": "empty\nснять браслеты перед сейфом",
    "answers": [
      {
        "id": 927,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal b = \"\"\nlocal c = \"\"\nlocal a = (arm1 == 1 and 1 or 0) <plus> (arm2 == 1 and 1 or 0) <plus> (arm3 ==1 and 1 or 0)\n  if a == 1 then\n    text = \"браслет\"\n    b = \"его\"\n    c = \"ему\"\n  elseif a > 1 then \n    text =\"один за другим браслеты\"\n    b = \"их\"\n    c = \"им\"\n  end\nreturn \"   Орнас осторожно стянул \" .. text .. \" со своей руки и положил \".. b .. \" на пол возле сейфа. Что-то подсказывало, что здесь \" .. c .. \" будет самое место.\"\nend",
        "merge": true
      },
      {
        "id": 227,
        "text": "Дальше",
        "lua_do": "function lua_do()\ntakeOnArmlet = 1\n\narm1 = arm1 == 1 and 3 or arm1\narm2 = arm2 == 1 and 3 or arm2\narm3 = arm3 == 1 and 3 or arm3\ncondTakeArmletsOff = 1\nend"
      }
    ]
  },
  {
    "id": 929,
    "text": "empty\nподсказка перед сейфом",
    "answers": [
      {
        "id": 929,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal b = \"\"\nlocal a = (arm1 == 1 and 1 or 0) <plus> (arm2 == 1 and 1 or 0) <plus> (arm3 == 1 and 1 or 0)\n  if a == 1 then\n    text = \" браслету \"\n    b = \"такой же набор линий на поверхности сейфа среди других очень похожих.\"\n  elseif a > 1 then \n    text = \" каждому браслету \"\n    b = \"такие же наборы линий на поверхности сейфа среди других очень похожих. Неужели нужна верная последовательность?\"\n  end\nreturn \"   Орнас прикоснулся к\" .. text .. \"на своей руке, и тёмная поверхность металла вновь покрылась причудливыми символами. Он без труда отыскал точно \" .. b\nend",
        "merge": true
      },
      {
        "id": 235,
        "text": "Новый ответ. введите текст",
        "run": [
          235
        ]
      }
    ]
  },
  {
    "id": 930,
    "text": "empty\nОрнас защищается гранатой от яростной Десс",
    "answers": [
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от разъярённой девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе криогенную гранату – то что нужно. Он еле уловимым движением активировал её и выронил на пол, а сам быстро отскочил за саркофаг.\n   Десс оказалась там буквально через секунду, и в тот же миг прямо возле неё прогремел взрыв, а по комнате прокатилась волна холода. Девушка замерла на месте, с трудом пытаясь сделать хоть шаг, но мороз уже сковал все её движения \n   Орнас без сопротивления выхватил меч из руки Десс и нанёс удар, а она упала, как статуя. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\ngrenade3 = grenade3 or 0\nreturn grenade3 > 0\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от разъярённой девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Ионная – такой разве что дроида пугать. Впрочем...\n   Он снял гранату. Несколько еле уловимых движений – совсем как в том видении – и он бросил  модифицированную бомбу на пол, а сам быстро отскочил за саркофаг. Лишь бы успеть укрыться...\n   Десвиар оказалась там буквально через секунду, и в тот же миг прямо возле неё прогремел взрыв. Орнас зажмурился и прикрыл лицо рукой, но даже так ощутил яркую вспышку – его задумка сработала: девушка была ослеплена.\n   Орнас без сопротивления выхватил меч из руки Десс и нанёс удар, а она упала, схватившись рукой за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\n\ngrenade1 = grenade1 or 0\n\nreturn (grenade1 > 0 and style == 4) and grenade3 < 1\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от разъярённой девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Плазменная – очень плохой вариант для этой небольшой комнатки. Впрочем, выбирать не приходилось.\n   Он еле уловимым движением активировал гранату и бросил её в дальний угол, а сам быстро отскочил за саркофаг.\n   Буквально через секунду прогремел взрыв, а по комнате прокатилась волна пламени. Жар становился невыносимым, и Орнас рефлекторно укрылся от него за барьером Силы. Десвиар, видимо, сделала то же самое, и теперь заливисто смеялась в самом центре бушующей огненной бури.\n   Она первой опустила барьер и устремилась к Орнасу. Защититься ему было больше нечем... Всё было кончено.",
        "lua_if": "function lua_if()\n\ngrenade4 = grenade4 or 0\n\nreturn (grenade4 > 0 and style == 2) and grenade3 < 1\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от разъярённой девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Плазменная – очень плохой вариант для этой небольшой комнатки. Впрочем, выбирать не приходилось.\n   Он еле уловимым движением активировал гранату и бросил её в дальний угол, а сам быстро отскочил за саркофаг.\n   Буквально через секунду прогремел взрыв, а по комнате прокатилась волна пламени. Жар становился невыносимым, укрытие не помогало юноше защититься от последствий своего поступка. Последним, что он увидел, была Десвиар. Языки бушующего огня не доставали до неё, будто оплетая невидимый барьер вокруг, и она заливисто смеялась...\n   Орнас почти не чувствовал, как Владыка Ша поднесла полупрозрачную ладонь к его голове и прошептала: \"Спи...\". И наконец пришёл покой.",
        "lua_if": "function lua_if()\n\nreturn not (grenade1 > 0 and style == 4) and grenade3 < 1\n\nend",
        "merge": true
      },
      {
        "id": 910,
        "text": "Эпилог",
        "lua_if": "function lua_if()\n--нейтрализован призраком? сгорел?\nreturn not (grenade1 > 0 and style == 4) and grenade3 < 1\nend"
      },
      {
        "id": 923,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn (grenade1 > 0 and style == 4) or grenade3 > 0\nend"
      },
      {
        "id": 930,
        "text": "достижение умнику с ионкой: уроки из видения или что-то в этом роде",
        "calculate": true,
        "super_calculate": false
      }
    ]
  },
  {
    "id": 931,
    "text": "empty\nОрнас защищается гранатой от неяростной Десс",
    "answers": [
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе криогенную гранату – то что нужно. Он еле уловимым движением активировал её и выронил на пол, а сам быстро отскочил за саркофаг.\n   Десс оказалась там буквально через секунду, и в тот же миг прямо возле неё прогремел взрыв, а по комнате прокатилась волна холода. Девушка замерла на месте, с трудом пытаясь сделать хоть шаг, но мороз уже сковал все её движения \n   Орнас без сопротивления выхватил меч из руки Десс, нанёс удар, и она упала, как статуя. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\ngrenade3 = grenade3 or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\nreturn knowTheNameOfDess == 1 and grenade3 > 0\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе криогенную гранату – то что нужно. Он еле уловимым движением активировал её и выронил на пол, а сам быстро отскочил за саркофаг.\n   Незнакомка оказалась там буквально через секунду, и в тот же миг прямо возле неё прогремел взрыв, а по комнате прокатилась волна холода. Девушка замерла на месте, с трудом пытаясь сделать хоть шаг, но мороз уже сковал все её движения \n   Орнас без сопротивления выхватил меч из руки противницы, нанёс удар, и она упала, как статуя. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\ngrenade3 = grenade3 or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\nreturn knowTheNameOfDess == 0 and grenade3 > 0\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Ионная – такой разве что дроида пугать. Впрочем...\n   Он снял гранату. Несколько еле уловимых движений – совсем как в том видении – и он бросил  модифицированную бомбу на пол, а сам быстро отскочил за саркофаг. Лишь бы успеть укрыться...\n   Десвиар оказалась там буквально через секунду, и в тот же миг прямо возле неё прогремел взрыв. Орнас зажмурился и прикрыл лицо рукой, но даже так ощутил яркую вспышку – его задумка сработала: девушка была ослеплена.\n   Орнас без сопротивления выхватил меч из руки Десс, нанёс удар, и она упала, схватившись рукой за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\n\ngrenade1 = grenade1 or 0\n\nreturn (grenade1 > 0 and style == 4) and grenade3 < 1 and knowTheNameOfDess == 1 \nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Ионная – такой разве что дроида пугать. Впрочем...\n   Он снял гранату. Несколько еле уловимых движений – совсем как в том видении – и он бросил  модифицированную бомбу на пол, а сам быстро отскочил за саркофаг. Лишь бы успеть укрыться...\n   Противница оказалась там буквально через секунду, и в тот же миг прямо возле неё прогремел взрыв. Орнас зажмурился и прикрыл лицо рукой, но даже так ощутил яркую вспышку – его задумка сработала: девушка была ослеплена.\n   Орнас без сопротивления выхватил меч из её руки, нанёс удар, и она упала, схватившись рукой за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к её голове, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\n\ngrenade1 = grenade1 or 0\n\nreturn (grenade1 > 0 and style == 4) and grenade3 < 1 and knowTheNameOfDess == 0 \nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Плазменная – очень плохой вариант для этой небольшой комнатки. Впрочем, выбирать не приходилось.\n   Он еле уловимым движением активировал гранату и бросил её в дальний угол, а сам быстро отскочил за саркофаг.\n   Буквально через секунду прогремел взрыв, а по комнате прокатилась волна пламени. Жар становился невыносимым, и Орнас рефлекторно укрылся от него за барьером Силы. Десвиар, видимо, сделала то же самое, и теперь заливисто смеялась в самом центре бушующей огненной бури.\n   Она первой опустила барьер и устремилась к Орнасу. Защититься ему было больше нечем... Всё было кончено.",
        "lua_if": "function lua_if()\n\ngrenade4 = grenade4 or 0\n\nreturn (grenade4 > 0 and style == 2) and grenade3 < 1 and knowTheNameOfDess == 1\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Плазменная – очень плохой вариант для этой небольшой комнатки. Впрочем, выбирать не приходилось.\n   Он еле уловимым движением активировал гранату и бросил её в дальний угол, а сам быстро отскочил за саркофаг.\n   Буквально через секунду прогремел взрыв, а по комнате прокатилась волна пламени. Жар становился невыносимым, и Орнас рефлекторно укрылся от него за барьером Силы. Его противница, видимо, сделала то же самое, и теперь заливисто смеялась в самом центре бушующей огненной бури.\n   Она первой опустила барьер и устремилась к Орнасу. Защититься ему было больше нечем... Всё было кончено.",
        "lua_if": "function lua_if()\n\ngrenade4 = grenade4 or 0\n\nreturn (grenade4 > 0 and style == 2) and grenade3 < 1 and knowTheNameOfDess == 0\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Плазменная – очень плохой вариант для этой небольшой комнатки. Впрочем, выбирать не приходилось.\n   Он еле уловимым движением активировал гранату и бросил её в дальний угол, а сам быстро отскочил за саркофаг.\n   Буквально через секунду прогремел взрыв, а по комнате прокатилась волна пламени. Жар становился невыносимым, укрытие не помогало юноше защититься от последствий своего поступка. Последним, что он увидел, была Десвиар. Языки бушующего огня не доставали до неё, будто оплетая невидимый барьер вокруг, и она заливисто смеялась...\n   Орнас почти не чувствовал, как Владыка Ша поднесла полупрозрачную ладонь к его голове и прошептала: \"Спи...\". И наконец пришёл покой.",
        "lua_if": "function lua_if()\n\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nreturn not (grenade1 > 0 and style == 4) and grenade3 < 1 and knowTheNameOfDess == 1\n\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? К счастью, рука Орнаса нащупала на поясе гранату. Плазменная – очень плохой вариант для этой небольшой комнатки. Впрочем, выбирать не приходилось.\n   Он еле уловимым движением активировал гранату и бросил её в дальний угол, а сам быстро отскочил за саркофаг.\n   Буквально через секунду прогремел взрыв, а по комнате прокатилась волна пламени. Жар становился невыносимым, укрытие не помогало юноше защититься от последствий своего поступка. Последним, что он увидел, была девушка. Языки бушующего огня не доставали до неё, будто оплетая невидимый барьер вокруг, и она заливисто смеялась...\n   Орнас почти не чувствовал, как Владыка Ша поднесла полупрозрачную ладонь к его голове и прошептала: \"Спи...\". И наконец пришёл покой.",
        "lua_if": "function lua_if()\n\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nreturn not (grenade1 > 0 and style == 4) and grenade3 < 1 and knowTheNameOfDess == 0\n\nend",
        "merge": true
      },
      {
        "id": 910,
        "text": "Эпилог",
        "lua_if": "function lua_if()\n--нейтрализован призраком? сгорел?\nreturn not (grenade1 > 0 and style == 4) and grenade3 < 1\nend"
      },
      {
        "id": 923,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn (grenade1 > 0 and style == 4) or grenade3 > 0\nend"
      },
      {
        "id": 930,
        "text": "достижение умнику с ионкой: уроки из видения или что-то в этом роде",
        "calculate": true,
        "super_calculate": false
      }
    ]
  },
  {
    "id": 932,
    "text": "– Подожди, пожалуйста, я кое-что вспомнил.\n   Орнас спешно стянул шлем с головы, не читая перевод особенно длинной трели TL-3, и огляделся.",
    "answers": [
      {
        "id": 452,
        "text": "Дальше",
        "lua_do": "function lua_do()\nTL3dialogBreak = 1\nshowPage{id = style == 4 and 157 or 201}\nend",
        "no_transition": true
      }
    ]
  },
  {
    "id": 933,
    "text": "empty\nОрнас защищается бонусом от неяростной Десс\n1 – подчинение\n2 – ярость\n3 – молнии",
    "answers": [
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Десс оказалась рядом буквально через мгновение, её меч тут же опустился на запястье юноши и... Лишь прожёг длинный рукав его робы, натолкнувшись на непреодолимое препятствие – наруч из кортозиса.\n   Секундной заминки девушки оказалось достаточно – Орнас ловким движением выхватил клинок и нанёс ответный удар. Десс упала, схватившись уцелевшей рукой за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове Десвиар, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\nforce_ab = force_ab or 0\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nreturn knowTheNameOfDess == 1 and bracer > 0\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, её меч тут же опустился на запястье юноши и... Лишь прожёг длинный рукав его робы, натолкнувшись на непреодолимое препятствие – наруч из кортозиса.\n   Секундной заминки девушки оказалось достаточно – Орнас ловким движением выхватил клинок и нанёс ответный удар. Она упала, схватившись уцелевшей рукой за кисть. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова спи...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nreturn knowTheNameOfDess == 0 and bracer > 0\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, и её меч почти опустился на запястье юноши... \n– Стой! – крикнул Орнас.\n   Он вложил в это слово всё своё отчаяние и всю оставшуюся волю. И Десс остановилась. Она так и замерла в неестественной позе, нелепо держа меч у самых рук Орнаса и безразлично глядя на него потухшими глазами.\n– Отдай мне оружие, – приказал Орнас, и Десвиар протянула ему меч. – А теперь – усни.\n   Она упала как подкошенная. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – Чудно...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та полностью обмякла.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nforce_ab = force_ab or 0\n\nreturn knowTheNameOfDess == 1 and force_ab == 1\n\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, и её меч почти опустился на запястье юноши... \n– Стой! – крикнул Орнас.\n   Он вложил в это слово всё своё отчаяние и всю оставшуюся волю. И девушка остановилась. Она так и замерла в неестественной позе, нелепо держа меч у самых рук Орнаса и безразлично глядя на него потухшими глазами.\n– Отдай мне оружие, – приказал Орнас, и противница протянула ему меч. – А теперь – усни.\n   Она упала как подкошенная. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – Чудно...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та полностью обмякла.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nforce_ab = force_ab or 0\n\nreturn knowTheNameOfDess == 0 and force_ab == 1\n\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, и её меч с лёгкостью отсёк руку юноши чуть выше запястья... \n   Орнас взревел не то от боли, не то от ярости. Боль придала ему сил, ярость – решимости. И он бросился вперёд...\n   Орнас сам не понял, как оказался над бьющимся в конвульсиях телом Десс. От её ног и рук остались лишь обожжённые обрубки. Это сделал он сам?\n   Кровавая пелена медленно сходила с глаз Орнаса, его кулаки разжались, а чужой световой меч выскользнул из ладони и покатился по полу. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – А теперь снова усни...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та мгновенно обмякла.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nforce_ab = force_ab or 0\n\nreturn knowTheNameOfDess == 1 and force_ab == 2\n\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, и её меч с лёгкостью отсёк руку юноши чуть выше запястья... \n   Орнас взревел не то от боли, не то от ярости. Боль придала ему сил, ярость – решимости. И он бросился вперёд...\n   Орнас сам не понял, как оказался над бьющимся в конвульсиях телом. От её ног и рук остались лишь обожжённые обрубки. Это сделал он сам?\n   Кровавая пелена медленно сходила с глаз Орнаса, его кулаки разжались, а чужой световой меч выскользнул из ладони и покатился по полу. Всё было кончено.\n– Слав-в-вно... – возник над телом призрак. – А теперь снова усни...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и она мгновенно обмякла.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nforce_ab = force_ab or 0\n\nreturn knowTheNameOfDess == 0 and force_ab == 2\n\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, и в тот же миг с пальцев Орнаса сорвались первые всполохи голубоватых молний. Десвиар отбросило к стене, но он сократил дистанцию и обрушил на неё настоящий электрический шторм. Потоки энергии проходили через его тело, наполняя ощущением безграничного могущества, вспышки разрядов слепили, а их треск сливался с криками девушки в гипнотическую мелодию...\n– Хватит, остановись! – резкий крик призрака над самым ухом словно вывел юношу из транса, и он с заметным усилием сжал кулаки и опустил руки.\n   От былого азарта не осталось и следа, и Орнас старался не смотреть на то, что осталось от Десс.\n– Она ещё жива, – возник над её телом призрак. – Мы ещё можем её спасти.\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки и замерла в этой позе.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nforce_ab = force_ab or 0\n\nreturn knowTheNameOfDess == 1 and force_ab == 3\n\nend",
        "merge": true
      },
      {
        "id": 930,
        "text": "   Чем вообще можно защититься от девушки со световым мечом, если потерял свой? Орнас лишь поднял руки, будто они могли защитить его от элегантного оружия противницы.\n   Она оказалась рядом буквально через мгновение, и в тот же миг с пальцев Орнаса сорвались первые всполохи голубоватых молний. Девушку отбросило к стене, но он сократил дистанцию и обрушил на неё настоящий электрический шторм. Потоки энергии проходили через его тело, наполняя ощущением безграничного могущества, вспышки разрядов слепили, а их треск сливался с криками его жертвы в гипнотическую мелодию...\n– Хватит, остановись! – резкий крик призрака над самым ухом словно вывел юношу из транса, и он с заметным усилием сжал кулаки и опустил руки.\n   От былого азарта не осталось и следа, и Орнас старался не смотреть на то, что осталось от его противницы.\n– Она ещё жива, – возник над её телом призрак. – Мы ещё можем её спасти.\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки и замерла в этой позе.",
        "lua_if": "function lua_if()\nbracer = bracer or 0\nknowTheNameOfDess = knowTheNameOfDess or 0\n\nforce_ab = force_ab or 0\n\nreturn knowTheNameOfDess == 0 and force_ab == 3\n\nend",
        "merge": true
      },
      {
        "id": 923,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 934,
    "text": " – Стой! – крикнул Орнас.\n   Он вложил в это слово всю свою волю и легко подчинил сознание наполнителей неготовой к этому Десс. Она остановилась и замерла в неестественной позе, нелепо держа меч на полузамахе, и безразлично глядя на него потухшими глазами.\n– Отдай мне оружие, – приказал Орнас более спокойно, и Десвиар протянула ему меч. – А теперь – усни.\n   Она упала как подкошенная. Всё было кончено.\n– Слав-в-вно... – возник над поверженной девушкой призрак. – Чудно...\n   Владыка Ша поднесла полупрозрачную ладонь к голове девушки, и та полностью обмякла.",
    "answers": [
      {
        "id": 923,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 935,
    "text": "",
    "answers": []
  },
  {
    "id": 936,
    "text": "",
    "answers": []
  },
  {
    "id": 937,
    "text": "   Как в тумане Орнас преодолел весь обратный путь до винтовой лестницы, затем медленно спустился по ней вниз. Он увидел учителя за панелями управления, неподалёку от останков поверженного дроида. Похоже, Магистр Льерсо был слишком поглощён своими поисками и пока не заметил появления ученика. Неужели это шанс для Орнаса?..",
    "answers": [
      {
        "id": 937,
        "text": "\n   Не думая больше ни секунды, Орнас прыгнул прямо со ступеней в сторону учителя. Даже слишком быстро, успеть бы нанести удар. На лету потянулся рукой к поясу. Меча не было...\n   Синяя вспышка ослепила Орнаса, а затем его окатило волной боли. Он так и рухнул плашмя на холодный пол, прямо перед ногами Магистра Льерсо.\n   \"Что я наделал?..\", – пронеслась в его голове обречённая мысль.\n   Учитель опускаясь на колени рядом с телом своего падавана и заглянул в его лицо.\n– Прости, Орнас. Я был ослеплён своей верой в тебя и позволил тебе опуститься в самые глубины тьмы. Я подвёл тебя...",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 1 or style == 6\nend",
        "merge": true
      },
      {
        "id": 937,
        "text": "\n   Орнас затаился, обдумывая своё положение. Прыгать на учителя отсюда – самоубийство, старый мастер отсечёт ему все конечности одним взмахом меча и не задумается.\n   Нужно использовать голову и свои сильные стороны, решил Орнас. Например, можно было попробовать ослепить учителя специальным приёмом Силы и затем сразить без сопротивления. Если кто и способен на такое, то только такой мастер, как он.\n   Всё рассчитав, Орнас бросился вперёд. Раз – он ускорил свои движения с помощью Силы. Два – тонкая манипуляция с сознанием жертвы прямо на бегу, теперь Магистр Льерсо ничего не видит. Три – рука потянулась к поясу... Но меча там не было...\n   Синяя вспышка заставила Орнаса зажмуриться, а затем его окатило волной боли. Он так и рухнул плашмя на холодный пол, прямо перед ногами Магистра Льерсо.\n   \"Что я наделал?..\", – пронеслась в его голове обречённая мысль.\n– Прости, Орнас, – сухо сказал учитель, наощупь пытаясь найти тело своего падавана. – Я был ослеплён своей верой в тебя и позволил тебе опуститься в самые глубины тьмы. Я подвёл тебя...",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 2\nend",
        "merge": true
      },
      {
        "id": 937,
        "text": "\n   Орнас затаился, обдумывая своё положение. Нужно использовать голову и свои сильные стороны, решил он. Например, можно было незаметно подкрасться поближе и нанести один точный удар. Если кто и способен на такое, то только такой мастер, как он.\n   Всё рассчитав, Орнас укрылся Силой от чужого и внимания и медленно двинулся вперёд. Раз – он спустился с лестницы и нырнул в тень под ней. Два – медленно подобрался к самой панели и дальше вдоль неё прямо за спину Магистру Льерсо. Три – рука потянулась к поясу... Но меча там не было...\n   Синяя вспышка заставила Орнаса зажмуриться, а затем его окатило волной боли. Он так и рухнул плашмя на холодный пол, прямо перед ногами Магистра Льерсо.\n   \"Что я наделал?..\", – пронеслась в его голове обречённая мысль.\n– Прости, Орнас, – сухо сказал учитель, опускаясь на колени перед телом своего падавана. – Я был ослеплён своей верой в тебя и позволил тебе опуститься в самые глубины тьмы. Я подвёл тебя...",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 3\nend",
        "merge": true
      },
      {
        "id": 937,
        "text": "\n   Орнас затаился, обдумывая своё положение. Нужно использовать голову и свои сильные стороны, решил он и закрыл глаза, чтобы сосредоточиться.\n   Дано: магистр-джедай, вооружённый световым мечом. Он знает все сильные и слабые стороны Орнаса. Он кажется отвлечённым. Чувствует предательство Орнаса и провоцирует на необдуманное нападение? Этого нельзя исключать.\n   С другой стороны сам Орнас, падаван, вооружённый... Рука легла на пояс – меча там не было. Он перевёл взгляд на обломки дроида – меч либо там, либо уже у учителя. Задача становилась почти невыполнимой...\n– Я чувствую тебя, Орнас, – сказал вдруг учитель совсем рядом. – Чувствую твой страх, чувствую тьму в твоём сердце. И не чувствую лишь того лучика света, ради которого когда-то взялся тебя обучать...\n   Синяя вспышка заставила Орнаса ещё сильнее зажмуриться, а затем его окатило волной боли. Он так и рухнул плашмя на холодный пол, где-то рядом опустился Магистра Льерсо.\n   \"Что я наделал?..\", – пронеслась в голове Орнаса обречённая мысль.\n– Прости, – сухо сказал учитель. – Я был ослеплён своей верой в тебя и позволил тебе опуститься в самые глубины тьмы. Я подвёл тебя...",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 4\nend",
        "merge": true
      },
      {
        "id": 937,
        "text": "\n   Орнас затаился, обдумывая своё положение. Нужно использовать голову и свои сильные стороны, решил Орнас. Например, можно было открыто выйти к учителю и рассказать обо всём, что произошло. И когда он окажется достаточно близко – нанести один точный удар. Если кто и способен на такое, то только такой мастер, как он.\n– Хвала Силе, вы здесь, –  Орнас быстрым шагом направился к учителю.\n   Тот обернулся, но остался на месте, не сводя с падавана холодный взгляд.\n– Я был наверху, в усыпальнице...\n   Орнас прикинул расстояние – ещё около дюжины шагов.\n– И что там?\n   Восемь или девять шагов...\n– Призрак владыки ситхов.\n   Три шага.\n– Она говорила с тобой?\n   Последний шаг...\n– Она?..\n   Синяя вспышка заставила Орнаса зажмуриться, а затем его окатило волной боли. Он так и рухнул плашмя на холодный пол, прямо перед ногами Магистра Льерсо.\n– Прости, Орнас, – сухо сказал учитель, опускаясь на колени перед телом своего падавана. – Я почувствовал большое зло в твоём сердце. И не нашёл в нём больше того света, ради которого когда-то взялся тебя обучать... Я был ослеплён своей верой в тебя и позволил тебе опуститься в самые глубины тьмы. Я подвёл тебя...",
        "lua_if": "function lua_if()\nstyle = style or 1\nreturn style == 5\nend",
        "merge": true
      },
      {
        "id": 938,
        "text": "Эпилог"
      },
      {
        "merge": false,
        "lua_text": "function lua_text()\nlocal text = \"Изменить стиль.<s>\n1 - меч, 2 - Сила, 3 - скрытность, 4 - ум, 5 - милосердие, 6 - потерявший себя<s>\nТекущий стиль: \" .. style\nreturn text\nend",
        "lua_if": "function lua_if()\nreturn g.isAuthor == 1\nend",
        "lua_do": "function lua_do()\nstyle = style or 1\n--style = style == 6 and 1 or style <plus> 1\n\ndialog ({\nheader = \"Смена условия\", text = \"Выбор стиля\",\nanswers = {\n                     {text = \"Меч\", pressListener = function ()\nstyle = 1\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Сила\", pressListener = function ()\nstyle = 2\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Шпион\", pressListener = function ()\nstyle = 3\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Умник\", pressListener = function ()\nstyle = 4\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Добряк\", pressListener = function ()\nstyle = 5\nshowPage{id = g.current_id}\nhideDialog() end},\n                      {text = \"Потеряшка\", pressListener = function ()\nstyle = 6\nshowPage{id = g.current_id}\nhideDialog() end}\n                      \n                    }\n             })\n\n\nshowPage{id = g.current_id}\nend",
        "text": "• Условие: стиль",
        "id": 104,
        "no_transition": true
      }
    ]
  },
  {
    "id": 938,
    "text": "Эпилог – Орнас уборщик-инвалид в храме. иногда видит учителя, но тот всегда опускает взгляд. Сломлен и строит планы мести<s>r\n<s>r\n   Орнас слишком поздно замечает большую группу детей, спешащих куда-то по коридору. Неуклюже ковыляет в тень ",
    "answers": [
      {
        "id": 1,
        "text": "Конец"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.endings = g.endings or {}\ng.endings.cleaner = (g.endings.cleaner or 0) <plus> 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 926,
        "calculate": true
      },
      {
        "id": 910,
        "text": "\n\n✮ Открыт эпилог «эпилог_уборщик_инвалид»",
        "lua_if": "function lua_if()\ng.endings.cleaner = g.endings.cleaner or 0\nreturn g.endings.cleaner == 1\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 939,
    "text": "   ",
    "answers": [
      {
        "lua_do": "function lua_do()\nstyle = style or 1\nenemyhp = style == 1 and 10 or 8\n\ng.achievements = g.achievements or {}\ng.achievements.condition_door = g.achievements.condition_door or 0\n if position == 6 then \n  g.achievements.condition_door = g.achievements.condition_door or 1\n elseif g.achievements.condition_door == 1 and position == 0 then\n  g.achievements.condition_door = 2\n  g.achievements.fullRevers = 1\n  g.achievements.alarm = 1\n end\nend",
        "super_calculate": false,
        "id": 34,
        "text": "Рассчёт для достижения",
        "calculate": true,
        "merge": false
      },
      {
        "id": 34,
        "text": "Каменная плита полностью перекрывала вход в древний храм.",
        "merge": true,
        "var_equal": [
          "position",
          0
        ]
      },
      {
        "id": 34,
        "text": "Каменная плита, удерживаемая юношей в воздухе, висела примерно в полуметре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "merge": true,
        "var_equal": [
          "position",
          1
        ]
      },
      {
        "id": 34,
        "text": "Плита, лежащая на каменных уступах, располагалась примерно в полуметре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "var_equal": [
          "position",
          2
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Каменная плита, удерживаемая юношей в воздухе, висела примерно в метре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "var_equal": [
          "position",
          3
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Плита, лежащая на каменных уступах, располагалась примерно в метре от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "var_equal": [
          "position",
          4
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Каменная плита, удерживаемая юношей в воздухе, висела примерно в полутора метрах от пола. За ней виднелся узкий тёмный лаз внутрь здания.",
        "merge": true,
        "var_equal": [
          "position",
          5
        ]
      },
      {
        "id": 34,
        "text": "Плита, лежащая на каменных уступах, располагалась примерно в полутора метрах от пола. За ней виднелся узкий тёмный лаз, через который юноша мог бы пробраться внутрь здания, слегка пригнувшись.",
        "var_equal": [
          "position",
          6
        ],
        "merge": true
      },
      {
        "id": 34,
        "text": "Сдвинутая в сторону каменная плита открыла достаточно широкий и высокий проход, к которому можно было подняться по уступам, образующим своеобразную лестницу.",
        "merge": true,
        "var_equal": [
          "position",
          7
        ]
      },
      {
        "id": 34,
        "text": "\n   Юный джедай позволил Силе течь сквозь него и направил её своей волей. Он приподнял руку и массивная дверь едва заметно задрожала. Теперь осталось выбрать направление, в котором будет двигаться плита.",
        "var_equal": [
          "move",
          -1
        ],
        "merge": true
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "middle_answer": true,
        "text": "Вверх",
        "id": 41,
        "var_set": [
          "direction34",
          5
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "На себя",
        "left_answer": true,
        "var_set": [
          "direction34",
          2
        ]
      },
      {
        "right_answer": true,
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "От себя",
        "var_set": [
          "direction34",
          1
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "Влево",
        "left_answer": true,
        "var_set": [
          "direction34",
          3
        ]
      },
      {
        "right_answer": true,
        "var_equal": [
          "move",
          -1
        ],
        "id": 41,
        "text": "Вправо",
        "var_set": [
          "direction34",
          4
        ]
      },
      {
        "var_equal": [
          "move",
          -1
        ],
        "middle_answer": true,
        "text": "Вниз",
        "id": 41,
        "var_set": [
          "direction34",
          6
        ]
      },
      {
        "var_not": [
          "move",
          -1
        ],
        "text": "Переместить плиту",
        "id": 939,
        "calculate": false,
        "instant": false,
        "var_set": [
          "move",
          -1
        ]
      }
    ]
  },
  {
    "id": 940,
    "text": "",
    "answers": []
  }
]