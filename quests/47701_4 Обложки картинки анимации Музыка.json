[
  {
    "id": 1,
    "text": "<s>r\nАвторы: AntiHero (Дмитрий Стойков)<s>r, elChem (Артём Стрельников)\n<s>r\nАннотация: этот учебник посвящен работе с иллюстрациями в квестах, использованию многослойных изображений и операторам, влияющим на них, а также работе с музыкой.\n\n   *   *   *\n\nУважаемые авторы! По ряду причин ваши вопросы в комментариях к учебникам могут долгое время оставаться без внимания. Для оперативной помощи рекомендуем задавать их в нашей группе ВК, в беседе авторов или в дискорде ",
    "answers": [
      {
        "id": 2,
        "text": "[Открыть учебник]"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng[\"autorun after\"] = 17\nend",
        "calculate": true,
        "text": "Поиск по квесту",
        "id": 1
      },
      {
        "id": 17,
        "text": "Поиск по квесту",
        "run": [
          17
        ]
      },
      {
        "id": 1,
        "text": "Сервер Discord для использования медиафайлов в ТК",
        "comment": false,
        "url": "https://discord.com/invite/8DaZ3YHKk8"
      }
    ]
  },
  {
    "id": 2,
    "text": "Для получения всей необходимой информации по использованию изображений и анимаций необходимо ознакомиться со следующими разделами:",
    "answers": [
      {
        "id": 3,
        "text": "Добавление изображений и их хранилище"
      },
      {
        "id": 4,
        "text": "Особенности добавления команд для изображений"
      },
      {
        "id": 5,
        "text": "Размер и положение"
      },
      {
        "id": 6,
        "text": "Изменение цвета"
      },
      {
        "id": 7,
        "text": "Команды для анимирования"
      },
      {
        "id": 8,
        "text": "Операторы для изображений"
      },
      {
        "id": 10,
        "text": "Изображения на вариантах ответа"
      },
      {
        "id": 2,
        "text": "   ",
        "comment": true
      },
      {
        "id": 22,
        "text": "Музыка"
      },
      {
        "id": 2,
        "text": "    ",
        "comment": true
      },
      {
        "id": 1,
        "text": "[ Закрыть учебник ]"
      }
    ]
  },
  {
    "id": 3,
    "text": "Для добавления картинки нужно выбрать пункт \"добавить картинку\" в низу страницы (следующий за пунктом \"добавить вариант\"). Прижтом откроется меню \"хранилище изображений\" в котором приведены изображения, которые автор использовал ранее в своих работах. Чтобы добавить новое изображение, необходимо копировать ссылку на изображение в специальное поле на странице хранилища. \n\nЛибо можно просто вставить ссылку в вариант ответа на нужной странице квеста.<s>r\n<s>r\nЧтобы получить ссылку на картинку, необходимо поместить ее на пригодный для этого хостинг, например, \"https://ru.imgbb.com/\".\n\nВажно! Некоторые сервисы предлагают разные форматы ссылок. В приложении используются прямые ссылки, оканчивающиеся на расширение файла (например, http://......jpg). Размер изображения не должен превышать 1000х1000 пикселей (начиная с версии 222).",
    "answers": [
      {
        "id": 3,
        "text": "Хостинг imgbb.com",
        "comment": false,
        "url": "https://ru.imgbb.com"
      },
      {
        "id": 9,
        "text": "[Создание обложки]"
      },
      {
        "id": 2,
        "text": "[Вернуться к оглавлению]"
      }
    ]
  },
  {
    "id": 4,
    "text": "Команды необходимо писать в тот же вариант ответа, в котором находится ссылка на нужное изображение. У команд, применимых к изображениям, есть очень важное отличие от операторов-связей: команды к изображениям пишутся НЕ по одной, как операторы, а все подряд. Также можно редактировать написанное как обычный текст ответа (за исключением того, что читатель не будет видеть вариант ответа с изображением).<s>r\n<s>r\nПорядок команд не важен.<s>r\n<s>r\nМежду командами могут быть любые символы — пробелы, запятые, даже целые слова. Если хотите, то вы можете оставить свои комментарии в любом месте команды.<s>r\n\nНиже показаны примеры записей:",
    "answers": [
      {
        "id": 4,
        "text": "small few left",
        "no_transition": true
      },
      {
        "id": 4,
        "text": "very small, right, bottom",
        "no_transition": true
      },
      {
        "id": 4,
        "text": "   ",
        "comment": true
      },
      {
        "id": 5,
        "text": "very small, right, bottom",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png",
        "right_answer": true
      },
      {
        "id": 5,
        "text": "small few left",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 2,
        "text": "[К оглавлению]"
      }
    ]
  },
  {
    "id": 5,
    "text": "<s>r\nКоманды для изменения размера изображения:<s>r\nvery small - размер 75%,<s>r\nsmall - размер 85%,<s>r\nbig - размер 125%,<s>r\nvery big - размер 150%.<s>r\n<s>r\nКоманды для изменения положения изображения на странице:<s>r\ntop - прижать к верху, <s>r\nbottom - прижать к низу,<s>r\nleft - сдвигает картинку влево,<s>r\nfew left - слегка сдвигает картинку влево,<s>r\nvery left - сильно сдвигает картинку влево,<s>r\nright - сдвигает картинку вправо,<s>r\nfew right - слегка сдвигает картинку вправо,<s>r\nvery right - сильно сдвигает картинку вправо,<s>r\n<s>r\nflipx - переворачивает картинку слева направо,<s>r\nflipy - переворачивает картинку сверху вниз,<s>r\n<s>r\nstretch - картинка растягивается И по высоте, И по длине на максимальное значение. Рекомендуется для фонов и рамочек. <s>r\n<s>r\nЕсли не указывать никаких команд размеров, то картинка займёт всё возможное место по высоте (если она вертикальная) ИЛИ по длине (если она горизонтальная), сохраняя свои пропорции.",
    "answers": [
      {
        "id": 2,
        "text": "[Вернуться к оглавлению]"
      },
      {
        "id": 5,
        "text": "r1, small, few left, flipx",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 5,
        "text": "r1, right, very small, bottom",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      }
    ]
  },
  {
    "id": 6,
    "text": "Команды для изменения цвета изображения:<s>r\n<s>r\nfew red - картинка становится слегка красной,<s>r\nvery red - картинка становится очень красной,<s>r\nred - картинка становится красной,<s>r\n<s>r\nfew green - картинка становится слегка зелёной, <s>r\nvery green - картинка становится очень зелёной,<s>r\ngreen - картинка становится зелёной,<s>r\n<s>r\nfew blue - картинка становится слегка голубой,<s>r\nvery blue - картинка становится очень голубой, <s>r\nblue - картинка становится голубой,<s>r\n<s>r\nfew black - картинка затемняется наполовину,<s>r\nblack - картинка заливается чёрным цветом.",
    "answers": [
      {
        "id": 2,
        "text": "[Вернуться к оглавлению]"
      },
      {
        "id": 5,
        "text": "r1, left, very small, top, flipx, few blue",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 5,
        "text": "r1, left, very small, bottom, flipx, few black",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 5,
        "text": "r1, very small, flipx, few green",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 5,
        "text": "r1, right, very small, top, flipx",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 5,
        "text": "r1, right, very small, bottom, flipx, few red",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      }
    ]
  },
  {
    "id": 7,
    "text": "Все анимации имеют регулируемую скорость. Вы можете изменять скорость ВСЕХ анимаций данной картинки, подставляя в любое место команды слова: <s>r\nvery fast - в два раза быстрее,<s>r\nfast - в полтора раза быстрее,<s>r\nslow - в полтора раза медленнее,<s>r\nvery slow - в два раза медленнее.<s>r\n<s>r\nВарианты анимирования:<s>r\nappear - картинка прилетает в указанное вами командами left,right место или в центр (каждая новая картинка прилетает после предыдущей);<s>r\ndisappear - картинка улетает из указанного вами места и растворяется;<s>r\n<s>r\npulsate - картинка плавно исчезает и появляется обратно бесконечно;<s>r\n<s>r\nmovie - плавно раскачивает объект влево-вправо, создавая эффект кинематографической камеры;<s>r\nmovie back - то же самое, но с поправкой для фонов. Фон специально дополнительно растягивается ещё на 10%, чтобы его края не вылезали во время раскачивания (не забывайте использовать stretch для фонов!). ",
    "answers": [
      {
        "id": 2,
        "text": "[Вернуться к оглавлению]"
      },
      {
        "id": 5,
        "text": "r1, right, very small, pulsate very slow",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      },
      {
        "id": 5,
        "text": "r1, few left, very small, flipx, movie very fast",
        "url": "http://188.120.236.127/hc/3in1game/img/pony44.png"
      }
    ]
  },
  {
    "id": 8,
    "text": "Также существует два оператора, относящихся непосредственно к изображениям (это уже операторы, а не команды изображениям, поэтому они пишутся, как и все операторы, по одному на строку):\n\nclear images — стирает все картинки на данной странице;<s>r\n\ncopy images Х — копирует все картинки со страницы Х на данную (не стоит копировать страницу саму на себя — это приведёт к зависанию).",
    "answers": [
      {
        "id": 2,
        "text": "[Вернуться к оглавлению]"
      }
    ]
  },
  {
    "id": 9,
    "text": "Обложка добавляется на первой (титульной) странице квеста. Ее размеры указаны там же — они отличаются от размеров изображений на страницах квеста и составляют 250х340 пикселей (вертикальная ориентация).\n<s>r\nВ обязательном порядке на обложку нужно поместить название квеста. Нужно проследить, чтобы текст был читаем. Кроме того, при создании обложки стоит помнить о том, что ее конечный размер будет очень мал, поэтому старайтесь не загромождать ее большим количеством деталей — они просто превратятся в неразбериху.",
    "answers": [
      {
        "id": 2,
        "text": "[Вернуться к оглавлению]"
      }
    ]
  },
  {
    "id": 10,
    "text": "Для добавления изображений на варианты ответа необходимо использовать операторы icon [\"http://....jpg\"], image [\"http://....jpg\"] и bg_image [\"http://....jpg\"], где \"http://....jpg\" – ссылка на картинку.\n\n icon [\"http://....jpg\"] устававливает размер картинки таким образом, чтобы он уместился в высоту кнопки ответа. При увеличении высоты кнопки ответа (если текста там будет много) картинка будет увеличиваться. \n\n image [\"http://....jpg\"] устанавливает картинку в ответ, заполняя его полностью, но не более, чем размер картинки в пикселях. \n\n bg_image [\"http://....jpg\"] растягивает изображение на всю площадь ответа, при этом не соблюдается пропорция картинки. Увеличив размер ответа (за счёт переноса строк, например) можно выставить нужные пропорции. ",
    "answers": [
      {
        "id": 11,
        "text": "Новый ответ. введите текст",
        "need": 100
      },
      {
        "id": 10,
        "text": "iсоn:",
        "comment": true
      },
      {
        "answerIcon": [
          "http://188.120.236.127/hc/3in1game/img/pony44.png"
        ],
        "text": "Одна строка",
        "comment": false,
        "id": 2
      },
      {
        "answerIcon": [
          "http://188.120.236.127/hc/3in1game/img/pony44.png"
        ],
        "text": "Первая строка\nВторая строка",
        "comment": false,
        "id": 2
      },
      {
        "id": 10,
        "text": "imаge:",
        "comment": true
      },
      {
        "id": 2,
        "newAnswerImage": [
          "http://188.120.236.127/hc/3in1game/img/pony44.png"
        ],
        "comment": false,
        "text": "    "
      },
      {
        "id": 10,
        "text": "bg_imаge:",
        "comment": true
      },
      {
        "id": 2,
        "text": "    ",
        "bgAnswerImage": [
          "http://188.120.236.127/hc/3in1game/img/pony44.png"
        ],
        "comment": false
      },
      {
        "id": 2,
        "text": "   \n\n  \n\n   ",
        "bgAnswerImage": [
          "http://188.120.236.127/hc/3in1game/img/pony44.png"
        ],
        "comment": false
      },
      {
        "id": 10,
        "text": "   ",
        "comment": true
      },
      {
        "id": 2,
        "text": "[Назад]"
      }
    ]
  },
  {
    "id": 11,
    "text": "   ",
    "answers": [
      {
        "id": 12,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 12,
    "text": "   ",
    "answers": [
      {
        "id": 13,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 13,
    "text": "   ",
    "answers": [
      {
        "id": 14,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 14,
    "text": "   ",
    "answers": [
      {
        "id": 15,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 15,
    "text": "   ",
    "answers": [
      {
        "id": 16,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 16,
    "text": "   ",
    "answers": [
      {
        "id": 1,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 17,
    "text": "    ",
    "answers": [
      {
        "super_calculate": true,
        "lua_do": "function lua_do()\n  function g.findInText(text, word, page)\n    word = utf8.gsub(word, \"([%(%)%.%%%<plus>%-%*%?%[%]%^%$])\", \"%%%0\")\n    local start, finish = utf8.find(text, word)\n    if start then\n      local result\n      result = \n  utf8.match(text, \"^[^<s>\n]-\".. word.. \"[^<s>\n]-$\") or\n  utf8.match(text, \"^[^<s>\n]-\".. word.. \"[^<s>\n]-<s>\n\") or\n  utf8.match(text, \"<s>\n[^<s>\n]-\".. word.. \"[^<s>\n]-$\") or\n  utf8.match(text, \"<s>\n[^<s>\n]-\".. word.. \"[^<s>\n]-<s>\n\")\n      result = utf8.gsub(result, \"[%s<s>\n]<plus>\", \" \")\n      if #result > 100 then\n        result = utf8.sub(result, 1, 100)\n        if utf8.sub(result, 100, 100) == \" \" then\n          result = utf8.sub(result, 1, -2)\n        else\n          result = utf8.sub(result, 1, -2) .. \"...\"\n        end\n      end\n      table.insert(results, {text = result, \n      fontSize = 0.9, pressListener = \n      function() \n        showPage{id = page} \n        hideDialog() \n      end})\n      return true\n    end\n    return false\n  end\nend",
        "text": "Поиск в тексте",
        "id": 23,
        "calculate": false
      },
      {
        "comment": false,
        "super_calculate": true,
        "id": 23,
        "text": "Поиск",
        "lua_do": "function lua_do()\ntimer.performWithDelay(1, function()\nlocal cw, ch = display.contentWidth, display.contentHeight\nlocal w = cw*0.1\nlocal find = display.newImage(canvas.parent.parent.parent.parent.parent, \"detective-md.png\", 0, 0)\nfind.xScale = w/find.width\nfind.yScale = find.xScale\nfind.x = cw - find.contentWidth/2 - 0.04*cw\nfind.y = find.contentHeight/2 <plus> 0.03*cw\nfind:setFillColor(0)\n\nfind:addEventListener(\"tap\",   \n  function(event)\n    if not event.target.input then\n      local cw, ch = display.contentWidth, display.contentHeight\n      local input = native.newTextField(cw*0.5, cw*0.07, cw*0.6, cw*0.075)\ncanvas.parent.parent.parent.parent.parent:insert(input)\n      event.target.input = input\n    else\n      local word = event.target.input.text or \"  \"\n      if utf8.match(word, \"^%s*$\") then\n        if event.target.input and event.target.input.removeSelf then\n          event.target.input: removeSelf()\n        end\n        event.target.input = nil\n        return true\n      end\n\n      results = {{text = \"Назад\", fontSize = 0.9}}\n      local findPages = 0\n      for i = 1, #pages do\n        local successFind\n        if g.findInText(pages[i].text, word, i) then\n          successFind = true\n        end \n        for j = 1, #pages[i].answers do\n          local answer = pages[i].answers[j]\n          if answer.comment and not (answer.calculate or answer.super_calculate) then\n            if g.findInText(answer.text, word, i) then\n              successFind = true\n            end\n          end\n        end\n        if successFind then\n          findPages = findPages <plus> 1\n        end\n        if #results >= 50 then\n          break\n        end\n      end\n      if event.target.input and event.target.input.removeSelf then\n        event.target.input:removeSelf()\n      end\n      event.target.input = nil\n      if #results <=1 then\n        message(\"Ничего не нашлось\")\n      else\n        dialog{header = 'Результаты поиска \"' .. word .. '\"',\n        text = \"Вхождений: \".. (#results - 1) .. \", страниц: \" .. findPages,\n        fontSizeForBody = 0.9,\n        answers = results}\n      end\n    end\n  return true\n  end)\nend)\nend",
        "calculate": false
      }
    ]
  },
  {
    "id": 18,
    "text": "",
    "answers": []
  },
  {
    "id": 19,
    "text": "",
    "answers": []
  },
  {
    "id": 20,
    "text": "",
    "answers": []
  },
  {
    "id": 21,
    "text": "",
    "answers": []
  },
  {
    "id": 22,
    "text": "   Работа с музыкой в приложении осуществляется с помощью переменных, поэтому обязательно ознакомьтесь с основными моментами их использования в специальном учебнике.\n   Как и в случае с изображениями, вставка аудиофайлов осуществляется по прямым ссылкам на них из интернет-хостингов, ниже Вы можете найти ссылки на рекомендуемые ресурсы, которые можно использовать в этих целях.\n   Как только Вы загрузите свой аудиофайл на хостинг или выберете нужный из уже имеющихся и получите ссылку, можно приступать к делу. Первым этапом необходимо инициализировать все используемые аудиофайлы с помощью специального оператора init sound [\"id1\",\"https://....mp3\",\"id2\",\"https://....mp3\",...], где \"id\"  – уникальный идентификатор музыкального файла (любое удобное для автора название), а \"https://....mp3\" – прямая ссылка на аудиофайл. Инициализацию нужно выполнить как можно раньше в квесте, оптимально – при переходе с первой страницы на вторую или с использованием команды \"calculate\".",
    "answers": [
      {
        "id": 23,
        "text": "Рекомендуемые сайты"
      },
      {
        "id": 24,
        "text": "Дальше",
        "initSounds": [
          "ex",
          "http://d.zaix.ru/6Kyg.mp3"
        ]
      }
    ]
  },
  {
    "id": 23,
    "text": "   Для хранения музыки и аудиофайлов можно использовать сервер приложения в дискорде. Обратите внимание, что файлы хранятся на сервере бессрочно без возможности удаления.\n   Ещё одним вариантом может стать Библиотека звуков wav-library.net. На сайте хранится обширная коллекция звуков, которые можно свободно использовать без нарушения авторских прав. Для получения прямой ссылки необходимо открыть страницу нужного файла, нажать на кнопку \"Скачать\" и во всплывающем окне нажать правой кнопкой мыши на слово \"Скачать\", а затем выбрать пункт \"Копировать адрес ссылки\". Полученная ссылка в формате:\n   https://wav-library.net/sounds/0-0-1-16516-20\nбез проблем работает в приложении (к всеобщему удивлению).",
    "answers": [
      {
        "id": 23,
        "text": "Сервер ТК в Discord ",
        "url": "https://discord.com/invite/qgy4eckQ5u"
      },
      {
        "id": 23,
        "url": "https://wav-library.net/sounds/",
        "text": "Библиотека звуков \"wav-library.net\""
      },
      {
        "id": 22,
        "text": "Назад"
      }
    ]
  },
  {
    "id": 24,
    "text": "   После того, как нужные звуки были инициализированы, можно приступать к самому музыкальному оформлению квеста.\n   Существует три режима воспроизведения музыки: фоновое воспроизведение, единичное воспроизведение и звук перехода.\n   При фоновом воспроизведении музыкальный файл будет проигрываться от начала до конца с бесконечным повторением. За воспроизведение файла в этом режиме отвечает специальная переменная \"global bg_music\", а для того, чтобы установить воспроизведение музыки, нужно назначить этой переменной значение, соответствующее идентификатору файла с помощью оператора var str set [\"global bg_music\",\"id\"].\n   При единичном воспроизведении файл будет проигран один раз от начала до конца, причём поверх фоновой музыки. Для установки единичного воспроизведения звука необходимо установить значение другой специальной переменной с помощью команды var str set [\"global play_sound_once\",\"id\"]\n   И наконец, звук перехода будет проигрываться каждый раз, когда читатель нажимает на вариант ответа, это может быть, например, звук перелистывания страниц. Для активации звука в этом режиме используется команда var str set [\"global switch_page_sound\",\"id\"].\n   Важно понимать, что режим воспроизведения будет активен, пока соответствующая переменная имеет нужное значение. Из этого следует, что можно легко поменять музыку по мере прохождения квеста, чтобы она лучше передавала атмосферу происходящего, всего лишь сменив значение переменных в нужный момент. Для остановки воспроизведения необходимо присвоить нужной переменной нулевое значение.",
    "answers": [
      {
        "id": 2,
        "text": "В меню"
      },
      {
        "var_str_set": [
          "global bg_music",
          "ex"
        ],
        "var_not": [
          "mus",
          1
        ],
        "id": 24,
        "text": "Включить пример",
        "var_set": [
          "mus",
          1
        ]
      },
      {
        "var_str_set": [
          "global bg_music",
          ""
        ],
        "var_not": [
          "mus",
          0
        ],
        "id": 24,
        "text": "Выключить пример",
        "var_set": [
          "mus",
          0
        ]
      }
    ]
  },
  {
    "id": 25,
    "text": "",
    "answers": []
  },
  {
    "id": 26,
    "text": "",
    "answers": []
  }
]