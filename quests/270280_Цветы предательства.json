[
  {
    "id": 1,
    "text": "Жанр: фэнтези, РПГ\nАвтор: elChem (Артём Стрельников)<s>ufeff\n\nНе всем в мире магии суждено стать великими волшебниками, но участь от рождения неспособных к колдовству особенно тяжела. Лишённые возможности воспользоваться даже самыми примитивными благами цивилизации, беспомощные и беззащитные, они становятся изгоями.\n\nКо́рела не тяготила доля \"обделённого\". Навыки выживания без волшебства и привычка всегда полагаться только на себя порой обращали его слабость в преимущество, позволяли преодолеть трудности, перед которыми отступали другие.\n\nТревожные вести из южных земель подтвердились: источник, питавший магией городок Мевелшофн, вдруг иссяк, а местные жители погибли от нашествия чудовищ или бежали. Потухший реликт – ценная добыча, за которой начали охоту многие наёмники и искатели приключений. Стал целью он и для Корела, отправившегося на новое задание вождя орков.\n\n\nВерсия: 2.1",
    "answers": [
      {
        "id": 4,
        "text": "Начать",
        "lua_do": "function lua_do()\ndisWid = 1\ng.formatText = 1\nautorun = 93\nend",
        "middle_answer": true
      },
      {
        "id": 2,
        "newAnswerImage": [
          "https://i.ibb.co/zn72wnf/Lumii-20240508-154614653.png"
        ],
        "comment": true,
        "text": "   "
      },
      {
        "id": 79,
        "text": "Начать (закрытое тестирование)",
        "lua_if": "function lua_if()\n\n--[=[Приключения Корела в волшебном мире Таламонта продолжаются!\n]=]\n\nreturn false\nend",
        "lua_do": "function lua_do()\ndisWid = 1\nend"
      },
      {
        "id": 3,
        "text": "Достижения",
        "lua_do": "function lua_do()\nvars[\"autorun\"] = 18\ndisWid = 1\n\nend",
        "left_answer": true
      },
      {
        "id": 2,
        "text": "От автора",
        "right_answer": true
      },
      {
        "answerIcon": [
          "https://i.ibb.co/XbtST6S/IMG-20230726-120440-1.jpg"
        ],
        "middle_answer": true,
        "targetbookid": 265065,
        "text": "К первой части",
        "id": 1
      },
      {
        "answerIcon": [
          "https://i.ibb.co/3sMmdBL/VK-Logo.png"
        ],
        "middle_answer": true,
        "url": "https://vk.com/elchem_group",
        "id": 1,
        "text": "Группа автора ВК "
      },
      {
        "id": 18,
        "text": "Страница авторана",
        "lua_if": "function lua_if()\nreturn false\nend"
      },
      {
        "id": 1,
        "text": "",
        "pageImg": "https://i.ibb.co/vLhS6Vy/1614690585-156-p-fon-s-ramkoi-dlya-portfolio-211-1.jpg",
        "system": true
      }
    ]
  },
  {
    "id": 2,
    "text": "«Таламонт» – межавторская серия интерактивной литературы в одноимённой вселенной.\n\nПервоисточником сеттинга «Таламонт» является сайт https://quest-book.ru. Права на серию принадлежат Jumangee.\n\nИзменение размера шрифта и другие настройки доступны в левом боковом меню.\n\nСохранение текущего прогресса прохождения доступно в любой момент игры через соответствующие кнопки в левом боковом меню. Количество слотов сохранения не ограничено, но создание нового требует внутреннюю валюту приложения – закладки. Загрузки созданных сохранений не ограничены и не расходуют закладки.\n\nАвтор будет благодарен за сообщение об опечатках, ошибках или технических проблемах в комментариях к квесту или в группе ВК.\n\nАвтор выражает сердечную признательность Sincerely, Александре Шаларь и Вячеславу Ульянову за помощь в тестировании, Александре Выдре – за видеопрохождение.",
    "answers": [
      {
        "right_answer": false,
        "id": 2,
        "url": "https://i.ibb.co/1dGbhXB/IMG-20240629-120150-1.png",
        "text": "small",
        "middle_answer": true
      },
      {
        "right_answer": false,
        "comment": false,
        "middle_answer": true,
        "url": "https://forum.ifiction.ru/viewtopic.php?lid=13<amp>pid=40556#p40556",
        "text": "На страницу игры на форуме ifiction.ru",
        "id": 2
      },
      {
        "id": 1,
        "text": "Назад",
        "middle_answer": true,
        "left_answer": false
      },
      {
        "id": 2,
        "newAnswerImage": [
          "https://i.ibb.co/zn72wnf/Lumii-20240508-154614653.png"
        ],
        "comment": true,
        "text": "   "
      }
    ]
  },
  {
    "id": 3,
    "text": "empty\nОткрытые концовки и достижения:",
    "answers": [
      {
        "id": 3,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ng.endings = g.endings or {}\n\nfunction countEndings()\nlocal a = 0\nfor k,v in pairs(g.endings) do\na = a <plus> 1\nend\nreturn a\nend\n\nif countEndings() == 0 then\ntext = \"Пройдите квест, чтобы здесь отобразились открытые вами концовки ;)\"\nelse\n\ntext = \"Открыто концовок: \" .. countEndings() .. \" / 4<s>\n<s>\n\"\n\nif g.endings.bad == 1 then\n text = text .. [=[☆ Плохая примета ☆\n\n]=]\nend\n\nif g.endings.good == 1 then\ntext = text .. [=[✮ Хорошая примета ✮\n\n]=]\nend\n\nif g.endings.traited == 1 then\ntext = text .. [=[✮ Не всё потеряно ✮\n\n]=]\nend\n\nif g.endings.traits == 1 then\ntext = text .. [=[☆ Вкус предательства ☆]=]\nend\n\n\nend\n\nreturn text\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ndump = \"\"\nend",
        "text": "   ",
        "id": 3,
        "calculate": true
      },
      {
        "id": 84,
        "text": "Достижения",
        "run": [
          84
        ]
      },
      {
        "id": 2,
        "newAnswerImage": [
          "https://i.ibb.co/zn72wnf/Lumii-20240508-154614653.png"
        ],
        "comment": true,
        "text": "   "
      },
      {
        "backstepCount": 1,
        "forget": 3,
        "text": "Назад",
        "id": 3,
        "isBack": true
      },
      {
        "comment": false,
        "id": 3,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn false\nend",
        "lua_do": "function lua_do()\ng.cleaner = g.cleaner or 0\ng.hunter = 1\ng.mech  = g.mech or 0\ng.kitchen = g.kitchen or 0\ng.cancel = 1\ng.robust = 1\ng.flowers = g.flowers or 0\ng.sniper = 1\ng.talking = 1\ng.secret = 0\ng.rounds = g.rounds or 0\n\ng.endings.good = 1\ng.endings.betrayed = nil\ng.endings.traits = 1\nend"
      }
    ]
  },
  {
    "id": 4,
    "text": "Корел не верил в приметы. Совсем. Он не зажмуривался при встрече с незнакомцами, не ждал несчастья после грозы и спокойно переступал через мёртвых птиц на дороге. Но три просвистевших у самой головы стрелы определённо предвещали неприятности.\n\n\"С другой стороны, пролетевшие мимо снаряды – это несомненно хороший знак, размышлял он, заваливаясь в высокую траву на обочине тропы. – Попади хоть одна – вот тогда были бы проблемы\".\n\nЛучи низкого солнца преломлялись в каплях росы, слепили и раздражали попавшего в западню Корела. Он заполз в тень большого камня. \n\n\"Наверное, очень удобно видеть во всём знаки судьбы, – думал Корел. – Не тратить время на лишние рассуждения, не нести ответственности. Просто делай что должно, и будь что будет\".\n\nВслушался. Ни голосов, ни звука шагов. Только шелест травы на ветру.",
    "answers": [
      {
        "lua_do": "function lua_do()\nautorun = nil\nend",
        "text": "Дальше",
        "widget": [
          "helpButton",
          "https://i.ibb.co/sVDMj13/Lumii-20240506-092411908.png",
          ""
        ],
        "id": 78
      },
      {
        "id": 4,
        "text": "bottom, small",
        "url": "https://i.ibb.co/sRNTP9M/IMG-20231125-171811.png",
        "middle_answer": true
      }
    ]
  },
  {
    "id": 5,
    "text": "Пришёл в себя он уже в другом месте. Попытался подняться и завалился на холодный земляной пол. Руки и ноги оказались до онемения туго связаны. Понизу тянуло сыростью. \"Наверное, подвал или яма\", – решил Корел. Осмотреться и подтвердить догадки весьма некстати мешал плотный мешок на голове.\n\n– Эй! – позвал он и закашлялся.\n\n– Зря стараешься, – прощебетал рядом приторный женский голос. – Они ушли.\n\n– А ты тогда кто? Не хочешь мне помочь?\n\n– Прости, сладкий, мне тут ненамного лучше, чем тебе. Но оставить нас вместе – их большая ошибка. И последняя.\n\nБезуспешно пытаясь избавиться от пут, Корел вынужденно слушал неумолкающую трескотню новой знакомой. За несколько минут он узнал, что её имя — Пижма, сколько лун она уже в плену, чем её тут кормят и чем она питалась на свободе, какой смешной говор был у её последнего нанимателя-гнома и какой невыразительный — у предпоследнего, как она с друзьями в детстве называла за глаза учителя чар, какие цветы она любит... И бесчисленное множество других утомительно ненужных подробностей, от которых у Корела быстро разболелась голова. Верёвки никак не поддавались, и изгой всё сильнее жалел, что первый же болт не прикончил его ещё там, на дороге. Постепенно он пришёл к мысли, что его сокамерница — либо самый никчёмный охотник за наживой, либо самый гениальный... ",
    "answers": [
      {
        "id": 6,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 6,
    "text": "Тем не менее из нескончаемого словесного потока Пижмы он смог выудить и кое-что полезное. Например, что они находятся совсем недалеко от цели его миссии. Сам городок Мевелшофн оказался полностью разорён и совсем обезлюдел, а немногие выжившие – все как один обделённые магическими способностями – перебрались в новое поселение неподалёку и с тех пор без конца отбивались от мародёров, искателей приключений и невообразимых монстров. Гостеприимством именно этих людей вынужденно и пользовался теперь Корел.\n\n– Ты так свободно обо всём болтаешь. Не боишься, что они могут подслушивать? – наконец не выдержал Корел.\n\n– Конечно они слушают, – беспечно согласилась Пижма. – Но обо мне они и так всё знают – я сразу рассказала, чтобы не пытали – а ты и слова о себе не произнёс. Как, говоришь, тебя зовут?\n\n– Никак не говорю.\n\n– Ну, солнце, не будь бякой, – ласково проворковала девушка, но по спине изгоя пробежали мурашки. – Теперь мы в одной лодке и должны доверять друг другу.\n\n– Потом намилуетесь, – раздался незнакомый грубый голос, и появился кто-то, кто развязал изгою ноги. – Пойдём поговорим.",
    "answers": [
      {
        "id": 7,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 7,
    "text": "Ещё несколько человек шумно ввалились следом только затем, чтобы выволочь пленника из подвала и вывести на улицу. Через какое-то время его ввели в другое помещение.\n\n– Ещё один лазутчик, – прозвучал тихий вкрадчивый голос, и с Корела наконец-то сняли мешок.\n\nВ по-простому обставленной деревянной избе за хлипким столом сидел щуплый старичок с длинной седой бородой и пристально разглядывал чужака. Конвоиры отступили назад.\n\n– Моё имя – Гамамелис, – продолжил старец. – Можешь отсмеяться сейчас, в следующий раз я сочту это за грубость.\n\nТо ли из-за тугих верёвок на руках, то ли недавний удар по голове начисто отбил у Корела чувство юмора, но смеяться его что-то не тянуло.\n\n",
    "answers": [
      {
        "id": 8,
        "text": "Дальше"
      },
      {
        "var_set_from": [
          265065,
          "global dust",
          "global dust",
          265065,
          "dust",
          "dust"
        ],
        "super_calculate": false,
        "id": 23,
        "calculate": true,
        "text": "dust",
        "lua_if": "function lua_if()\nreturn false\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n--if g.dust <plus> dust > 0 then\n  g.dust = 1\n  dust = 1\n--end\nend",
        "calculate": true,
        "text": "dust",
        "id": 23
      },
      {
        "id": 7,
        "text": "– Его вещи, – буркнул один из охранников и вывалил на стол груду свёртков и тряпок. – Ничего необычного.\n\n– Как тебя зовут, пришелец? – доброжелательно спросил Гамамелис. – Что привело тебя к нам? Почему ты пытаешься выдать себя за обделённого?\n\nКто-то ткнул пленника в бок и зашипел на ухо:\n\n– Лучше отвечай честно, мы всегда сможем вытянуть из тебя правду силой...\n\n– Меня зовут Корел, и я на самом деле рождён изгоем. Я шёл в Мевелшофн, пока на меня не напали...\n\nСтарик встал из-за стола, опираясь на трость, проковылял к Корелу, повернул его лицо резным навершием в виде птичьей головы и уставился прямо в глаза. Холодный, долгий, изучающий взгляд. Затем кряхтя вернулся на своё место.\n\n– Ты говоришь правду, – наконец заключил Гамамелис. – Развяжите.",
        "lua_if": "function lua_if()\nreturn dust == 0\nend",
        "merge": true
      },
      {
        "id": 7,
        "text": "– Его вещи, – буркнул один из охранников и вывалил на стол груду свёртков и тряпок, среди которых блеснул пузатый стеклянный пузырёк. – И почему им всем кажется, что «Пыль древних» заставит нас поверить, что они изгои? И у этой бестии такой же был.\n\n– Как тебя зовут, пришелец? – доброжелательно спросил Гамамелис. – Что привело тебя к нам? Почему ты пытаешься выдать себя за обделённого и зачем убил несчастную Лобелию?\n\nКто-то ткнул пленника в бок и зашипел на ухо:\n\n– Лучше отвечай честно, мы всегда сможем вытянуть из тебя правду силой...\n\n– Меня зовут Корел, и я на самом деле рождён изгоем. Я шёл в Мевелшофн, пока на меня не напали...\n\nСтарик встал из-за стола, опираясь на трость, проковылял к Корелу, повернул его лицо резным навершием в виде птичьей головы и уставился прямо в глаза. Холодный, долгий, изучающий взгляд. Затем кряхтя вернулся на своё место.\n\n– Ты говоришь правду, – наконец заключил Гамамелис. – Развяжите.",
        "lua_if": "function lua_if()\nreturn dust == 1\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 8,
    "text": "Дальнейшее больше походило на беседу, чем на допрос. Впрочем, вооружённые люди остались стеречь изгоя, а его вещи забрать не разрешили.\n\nГамамелис коротко рассказал о том, как погибал в хаосе Мевелшофн после того, как иссяк его источник магии. Как город наводнили пожиратели, и как уцелевшие изгои спасались из него от монстров и мародёров. Как ушли в это место неподалёку, выживая с тех пор без благ цивилизации и внешней помощи.\n\nКорел честно признался, что шёл в Мевелшофн по заданию, говорить о котором не может. Старик лишь усмехнулся:\n\n– Знаем мы эти задания. Ты не первый, кто пришёл за угасшим реликтом. Только не выйдет это у тебя...\n\n– Увидим. Позволите мне уйти?\n\n– Может быть, но не сразу. Хочу понять, что ты за человек и можно ли тебе доверять. Даже то, что ты знаешь о нас – уже большой риск...\n\n– Я бы с радостью о вас не узнавал, – начал сердиться Корел, – это меня пытались убить...\n\n– Не перебивай меня! – от стали в голосе старика вздрогнули даже охранники, и он добавил уже мягче: – Это невежливо. Наши охотники используют сонный яд, ты бы не погиб от их стрел...\n\nГамамелис о чём-то задумался, прикрыв глаза. Затем спокойно продолжил:\n\n– Ты останешься у нас до тех пор, пока я не разрешу уйти. Уверен, ты захочешь показать себя заслуживающим доверия: добропорядочным и полезным. Мы поговорим позже, мне нужно всё хорошенько обдумать.",
    "answers": [
      {
        "id": 9,
        "text": "Дальше",
        "lua_do": "function lua_do()\nvars[\"autorun after\"] = 18\ndisWid = 0\nrestTime = snipTime < 11 and 50 or 40\nend"
      }
    ]
  },
  {
    "id": 9,
    "text": "Корела без лишней деликатности вывели на улицу. Солнце бледным пятном плыло по низким облакам, лишь изредка пробиваясь лучами сквозь их края. Хижина старого Гамамелиса располагалась на невысоком холме в самом центре поселения, со всех сторон окружённого лесом. Тут и там хаотично раскинулись другие домики. \"Не больше трёх дюжин зданий\", – отметил изгой, прикидывая, сколько в них живёт людей.\n\n– Я Иссоп, старший по охране, – представился оставшийся человек, когда остальные разбрелись в разные стороны. – Не бери в голову слова Гамамелиса, он иногда переигрывает. Переночуешь у нас, подсобишь, чем сможешь, и уже на рассвете сможешь уйти. Если захочешь. Следить за тобой никто не будет, но бежать от нас тебе незачем.\n\n– Что с моими вещами и оружием?\n\n– Пока побудут у старика, придётся потерпеть, – словно извиняясь ответил Иссоп. – Чем больше людей сможет за тебя поручиться, тем сговорчивей он будет. Пойдём, помогу тебе осмотреться. \n\nОн повёл Корела по вытоптанной дороге между домов, кратко рассказывая об их обитателях. По всему выходило, что большинство поселенцев добывали еду собирательством в лесу и в помощи не нуждались.\n\n– Вот здесь живёт кухарка Старая Бэтти, – Иссоп махнул рукой в сторону приземистой избушки, из дыры в крыше которой клубился дым. – Обязательно зайди к ней, она всегда чужакам помогает. Ещё загляни к Бизу, вот сюда. Он охотник, и теперь ему придётся непросто. Стрелы для арбалетов сонным ядом посмазываешь или ещё чем подсобишь...\n\nОни вновь свернули ближе к центру, и оказались у единственного каменного дома со множеством пристроек.\n\n– Это хоромы Аконита, нашего умника. Ему тут всегда помощь нужна, – скривив губы продолжил Иссоп. – А этот сарай рядом –  моё жилище. Ты уже гостил у меня в подвале, переночуешь наверху. Если станет одиноко, можешь спуститься к нашей фурии – я сделаю вид, что не слышу.\n\nИссоп сдержанно кивнул и направился к своему дому.\n\nКорел остался один.",
    "answers": [
      {
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend",
        "text": "Пойти к кухарке Старой Бэтти",
        "comment": false,
        "id": 54
      },
      {
        "id": 10,
        "text": "Пойти к охотнику Бизу",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nbizVisit = 1\nend"
      },
      {
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nakonitVisit = 1\nend",
        "text": "Пойти к «умнику» Акониту",
        "comment": false,
        "id": 25
      },
      {
        "id": 9,
        "text": "Укажите команды для картинки",
        "url": "https://i.ibb.co/m986mhh/IMG-20231125-122611.png"
      }
    ]
  },
  {
    "id": 10,
    "text": "empty",
    "answers": [
      {
        "id": 11,
        "text": "Уйти",
        "lua_if": "function lua_if()\nreturn restTime < 9\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nbizVisit = 5\nend"
      },
      {
        "id": 11,
        "text": "– Ещё есть дела в поселении.",
        "lua_if": "function lua_if()\nreturn restTime > 8\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      },
      {
        "id": 12,
        "text": "– Готов идти на охоту.",
        "lua_if": "function lua_if()\nreturn restTime > 8\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nbizVisit = 5\nend"
      },
      {
        "id": 10,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext = (bizVisit == 1 and [=[Изгой быстро вернулся к дому, о котором говорил Иссоп, постучал в огромную дверь и с трудом открыл её. Внутри было пусто, только небольшой стол, заваленный оружием и хламом, и несколько шкур в углу.\n\n– Чужа-а-ак? – громыхнул раскатистый бас, и откуда-то из шкур показалась орочья голова.\n\nВ доли мгновения её хозяин выбрался оттуда и навис над крохотным человечком горой мышц. Да, эти руки должно быть оглушили немало незваных гостей...\n\n– Да укроет тебя Мать Земля, – по привычке выпалил изгой. – Моё имя – Корел. Я пришёл узнать, не нужна ли помощь.\n\n– Корел знает обычаи орков, – оправился после секундного удивления Биз, – но я не чту их. Мать Земля не дала мне при рождении слух, чтобы знать её волю. Племя отреклось от меня, и я рос вдали от колыбели. И я говорю тебе: «Здравствуй», Корел.\n\n– Ну конечно, ты ведь тоже изгой... Иссоп сказал, я могу помочь тебе чем-то.\n\n– Да, можешь. Пойдём на охоту. Мы вернулись без добычи, когда нашли тебя утром.\n\n– На охоту? Я смогу взять своё оружие?\n\n– Нет, я дам арбалет. Наши стрелы смазаны сонным ядом. Добыча оцепенеет – сможешь добить её. Приходи, когда будешь готов идти.\n\nКорел с сомнением бросил взгляд на стол и валяющиеся там странные арбалеты.]=])\n or (\n\n[=[Когда Корел вернулся в дом орка, тот перебирал стрелы для арбалета. По одному ему понятной системе он раскладывал их на несколько кучек, а какие-то отбрасывал прямо на пол.\n\n]=] .. (restTime > 8 and [=[– Готов? – спросил Биз, не отрываясь от своего занятия. – Не тяни до последнего. Я тебя не возьму, если будет слишком поздно.]=] or (bizVisit == 1 and \n\n[=[– Хотя знаешь... – замялся Биз, глядя на оранжевые отблески в окне. – Нужно было тебе раньше приходить. Закат уже скоро. Я  пойду один.\n\nОн собрал стрелы со стола в поясной мешок и направился к двери.]=]\n\nor \n\n\n[=[– Закат уже скоро, – буркнул Биз, заканчивая сборы. – Я  пойду один.\n\nОн сложил стрелы из одной кучи в поясной мешок и направился к двери.]=]))\n\n)\nreturn text\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 11,
    "text": "Корел глянул на небо, чтобы понять, сколько времени ещё оставалось до заката, и что ещё можно успеть сделать. ",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn restTime > 0\nend",
        "id": 54,
        "text": "Пойти к кухарке Старой Бэтти",
        "comment": false,
        "lua_do": "function lua_do()\nbetVisit = (betVisit or 0) <plus> 1\nrestTime = restTime - 1\nend"
      },
      {
        "id": 10,
        "text": "Пойти к охотнику Бизу",
        "lua_if": "function lua_if()\nbizVisit = bizVisit or 0\nreturn restTime > 0 and bizVisit < 5\nend",
        "lua_do": "function lua_do()\nbizVisit = bizVisit or 0\nrestTime = restTime - 1\nbizVisit = (bizVisit == 0 and 1) or (bizVisit == 1 and 2) or bizVisit\nend"
      },
      {
        "lua_if": "function lua_if()\n--если доступен\nakonitEnd = akonitEnd or 0\nreturn restTime > 0 and akonitEnd == 0\nend",
        "id": 25,
        "text": "Пойти к «умнику» Акониту",
        "comment": false,
        "lua_do": "function lua_do()\nakonitVisit = ((akonitVisit == 1 or akonitVisit == 2) and 2) or 1\nrestTime = restTime - 1\nend"
      },
      {
        "comment": false,
        "lua_do": "function lua_do()\nakonitVisit = ((akonitVisit == 1 or akonitVisit == 2) and 2) or 1\nrestTime = restTime - 1\nend",
        "id": 86,
        "text": "Пойти к «умнику» Акониту",
        "need": -86,
        "lua_if": "function lua_if()\n-- если недоступен\nakonitEnd = akonitEnd or 0\nreturn restTime > 0 and akonitEnd ~= 0\nend"
      },
      {
        "lua_if": "function lua_if()\n\nissopReturns = issopReturns or restTime\n\nreturn restTime > 0 and issopReturns >= restTime\nend",
        "id": 60,
        "text": "Пойти к Иссопу",
        "comment": false,
        "lua_do": "function lua_do()\nissopVis = issopVis or 0\nrestTime = restTime - 1\nissopVis = issopVis > 1 and issopVis or 1\nend"
      },
      {
        "id": 58,
        "text": "Дождаться, пока Иссоп уйдёт, и спуститься к Пижме",
        "lua_if": "function lua_if()\nknowIssopSecret = knowIssopSecret or 0\nknowIssopSecret = meetRosy == 1 and 1 or knowIssopSecret\ncharmFlowers = charmFlowers or 0\n\nreturn knowIssopSecret == 1 and restTime > 0 and charmFlowers < 10 and issopReturns >= restTime\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 4\npijmaVis = (pijmaVis or 0) <plus>1 \nend"
      },
      {
        "id": 58,
        "text": "Спуститься к Пижме",
        "lua_if": "function lua_if()\nknowIssopSecret = knowIssopSecret or 0\nknowIssopSecret = meetRosy == 1 and 1 or knowIssopSecret\ncharmFlowers = charmFlowers or 0\n\nreturn knowIssopSecret == 1 and issopReturns < restTime and restTime > 0 and charmFlowers < 10\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\npijmaVis = (pijmaVis or 0) <plus>1 \nend"
      },
      {
        "id": 89,
        "text": "Пойти на поляну в лесу",
        "lua_if": "function lua_if()\n\nfieldVisited = fieldVisited or 0\n\nreturn fieldVisited == 1 and restTime > 0\n\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 4\ndisarmedOnField = 1\nend"
      },
      {
        "id": 23,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn \nrestTime < 1\nend",
        "lua_do": "function lua_do()\ndisWid = 1\n\nbizIsAway = bizVisit < 1 and 1 or bizIsAway\n\nend"
      },
      {
        "id": 11,
        "text": "\n\nТекст в зависимости от оставшегося времени",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\ntext = (restTime > 25 and \"Солнца не было видно за плотными облаками, но темнеть ещё не начинало.\") or  (restTime > 10 and \"Затянутое серыми тучами небо начало темнеть. Вечереет, или надвигается гроза?\") or \"Небо у горизонта расплылось в оранжевом мареве: закат.\"\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 9,
        "text": "Укажите команды для картинки",
        "lua_if": "function lua_if()\nreturn g.current_id == 11\nend",
        "url": "https://i.ibb.co/m986mhh/IMG-20231125-122611.png"
      }
    ]
  },
  {
    "id": 12,
    "text": "Орк выдал изгою лёгкий складной арбалет с необычным коробом сверху и объяснил, как крутить небольшую ручку, чтобы стрелять очередью, и как загружать новые стрелы. Немного замешкавшись, отдал прямой охотничий нож.\n\n– Боишься, что я использую их против тебя и сбегу? – расшифровал заминку Корел.\n\n– Нет. Иссоп доверяет тебе, он разбирается в людях. А сонный яд меня всё равно не берёт.\n\nВзяв верёвки и мешки, они направились в лес. По дороге Биз рассказал изгою, по каким ориентирам он сможет найти обратный путь.\n\n– Сможешь добыть хотя бы половину от моего, и я поручусь за тебя перед Гамамелисом, – добавил орк и без лишних церемоний скрылся в густом кустарнике.\n\nИзгой осмотрелся и принюхался. Долгие годы выживания без магии сделали из него приличного охотника. Сейчас опыт подсказывал, что Биз отправился не туда, где можно было найти много дичи. Знал что-то, что не учитывал Корел? Или просто шёл проверенным маршрутом без оглядки на ситуацию? В конце концов, Биз вырос среди людей, а без магии не мог говорить с животными, как его сородичи.\n\nВ Кореле боролись любопытство и практичность: ему хотелось узнать, что будет делать орк, хотя другой путь обещал быстрый и надёжный результат.",
    "answers": [
      {
        "id": 13,
        "text": "Проследить за Бизом",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      },
      {
        "id": 14,
        "text": "Довериться опыту",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nfieldVisited = 1\nend"
      }
    ]
  },
  {
    "id": 13,
    "text": "Корел не был бы собой, если бы не совал нос в чужие дела каждый раз, когда от этого зависело его будущее. Вот и теперь он поборол в себе сомнение и полез туда, где скрылся его временный проводник.\n\nЗа густым кустарником земля резко уходила вниз и на дне неглубокого оврага превращалась в трясину. Следы орка легко читались на глинистой почве, и, идя по ним, Корел вскоре вышел к извилине небольшого ручья. В высоких камышах виднелся какой-то шалаш, возле него угадывались очертания орка.\n\nКорел метнулся к ближайшему дереву и пригнулся. Найти удобный наблюдательный пункт на таком открытом пространстве было нелегко, но изгой всё-таки смог пробраться к большой коряге возле самой воды и укрыться за ней.\n\nОрк перед шалашом склонился над чем-то на земле. Он цеплял из горящего перед ним волшебного серебряного пламени тонкие нити и оплетал ими неподвижный предмет. Нити вспыхивали пурпурным и гасли, застывая на туше зверя, всё больше похожего на оленя. Корел много раз видел, как его знакомые орки создавали таким образом еду, и теперь не сомневался, что Биз использовал колдовство, чтобы \"добыть\" удачный трофей. Интересно, много ещё в поселении изгоев тех, кто скрывает свои способности к волшебству?\n\nКорел выбрался из своего укрытия и с торжествующим видом направился к \"охотнику\". Он уже придумал, как обратить его хитрость себе на пользу, и теперь оставалось лишь произвести соответствующее впечатление.\n\nУже через несколько шагов орк услышал появление чужака и оглянулся. Это был не Биз.",
    "answers": [
      {
        "id": 20,
        "text": "Дальше",
        "lua_do": "function lua_do()\nbizVisit = 5\nrestTime = restTime - 1\nknowBizSecret = 1\nend"
      }
    ]
  },
  {
    "id": 14,
    "text": "empty",
    "answers": [
      {
        "lua_text": "function lua_text()\nlocal text = \"\"\nfieldStat = (fieldStat or 0) <plus> 1\n\ntext = fieldStat == 1 and [=[Поборов в себе любопытство, Корел свернул в другую сторону, туда, откуда ветер приносил влагу, аромат полевых трав и еле уловимые запахи гниющих фруктов. Вскоре от леса остались лишь высокие кусты, а редкие сосны и берёзы не закрывали кронами небо. Там за прогалиной колосилось и цвело большое поле.\n\nК самой кромке леса жались дикие плодовые деревья. Их ветви были усыпаны мелкими жёлтыми и зелёными фруктами, и ещё больше оказалось на земле.\n\nНемного повозившись, Корел заметил то, что искал. Норы. Нор было много. А там, где много нор, всегда есть кто-то, кого можно сделать обедом.]=] or \n\n[=[Корел вновь оглядел поле, пышущее разноцветьем и шелестящее на ветру миллионнами колосков.\n\nК самой кромке леса жались дикие плодовые деревья. Их ветви были усыпаны мелкими жёлтыми и зелёными фруктами, и ещё больше оказалось на земле. Несколько крупных птиц периодически слетали вниз, чтобы ими полакомиться.\n\nВ норах, видимо, жили кролики. А кролики – это неплохая добыча.]=]\n\n\n\n\nreturn text\nend",
        "id": 14,
        "text": "text",
        "lua_if": "function lua_if()\nreturn g.current_id == 14\nend",
        "merge": true
      },
      {
        "id": 15,
        "text": "Охотиться",
        "lua_if": "function lua_if()\nreturn restTime > 2\nend",
        "lua_do": "function lua_do()\nhunting = (hunting or 0) <plus> 1\nrestTime = restTime - 1\nend"
      },
      {
        "id": 16,
        "text": "Собирать фрукты",
        "lua_if": "function lua_if()\nreturn fruit ~= 1 and restTime > 2\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 2\nfruit = 1\nend"
      },
      {
        "id": 19,
        "text": "Собрать травы",
        "lua_if": "function lua_if()\n\ncharmFlowers = charmFlowers or 0\nchamaenerion = chamaenerion or 0\nmeetRosy = meetRosy or 0\n\nif meetRosy > 0 then\n  charmFlowers = charmFlowers > 1 and charmFlowers or 1\nend\n\nreturn restTime > 2 and (charmFlowers == 1 or chamaenerion == 1)\nend"
      },
      {
        "super_calculate": false,
        "id": 14,
        "calculate": true,
        "widget": [
          "hunt_widget",
          "https://i.ibb.co/CMhQy0q/IMG-20231028-114620.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "lua_do": "function lua_do()\nhunting = hunting or 0\nend",
        "super_calculate": false,
        "id": 14,
        "widget_show": [
          "hunt_widget",
          "hunt"
        ],
        "text": "Новый ответ. введите текст",
        "calculate": true
      },
      {
        "id": 17,
        "text": "Вернуться в поселение",
        "lua_do": "function lua_do()\nrestTime = restTime - 3\nbizVisit = 5\nend"
      },
      {
        "id": 14,
        "text": "Укажите команды для картинки",
        "lua_if": "function lua_if()\nreturn g.current_id == 14\nend",
        "url": "https://i.ibb.co/b2rRVGC/IMG-20231125-122531-1700928647120-1.png"
      }
    ]
  },
  {
    "id": 15,
    "text": "empty",
    "answers": [
      {
        "id": 15,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\n\nlocal text = \"\"\nhunting = hunting or 1\n\ntext = (hunting == 1 and \n\n[=[Немного терпения вскоре окупилось сполна: в высокой траве что-то зашуршало, и вскоре у кустов замер, оглядывалась, кролик.\n\nКорел навёл арбалет на ушастого, прицелился и быстро закрутил ручкой, опустошив магазин буквально за секунду. К сожалению, о точности такого залпа говорить не приходилось: все стрелы ушли далеко мимо, а встрепенувшийся зверёк дал дёру.]=]) or\n\n(hunting == 2 and\n[=[Пока Корел вглядывался в траву в ожидании другого кролика, под дерево рядом с ним опустилась одна из птиц. Очень крупная, таких изгой раньше не встречал. Хотя орки, на которых он работал уже долгое время, на своих землях запрещали ему убивать любых птиц, в дороге он не брезговал никакой дичью.\n\nНа этот раз он навёл арбалет и провернул ручку максимально мягко. Одиночный выстрел достиг цели: стрела пронзила жертву почти насквозь. Наверное, сонный яд предназначался для более крупных зверей. Например двуногих.\n\nИзгой закинул тушку в мешок.]=]) or \n\n(hunting == 3 and [=[Корел долго ждал подходящей добычи, но её всё не было и не было.]=]) or \n\n(hunting == 4 and [=[Кролик появился из норы рядом с изгоем и навострил уши. На этот раз Корел попытался поразить его одиночным выстрелом и вновь промазал. Впрочем, сразу две стрелы из пущенной вслед удирающему очереди всё-таки настигли цель.\n\nИзгой спрятал добычу в мешок. Теперь он начинал немного лучше понимать, как эффективнее использовать непривычное оружие для охоты.]=]) or \n\n(hunting == 5 and [=[Ещё несколько птиц опустились шагах в тридцати от Корела. Он силился поразить обеих и выпустил все шесть стрел, но на таком расстоянии они сильно отклонялись ветром, и изгой остался без добычи.]=]) or \n\n(hunting == 6 and [=[Когда к плодам под деревом выбрался настоящий чёрный кабан, Корел чуть не вскочил от удивления. Конечно, этот был ещё совсем молодым, почти поросёнок, но даже так его туша стоила всех кроликов и птиц, которых изгой мог надеяться встретить сегодня. Если удастся дотащить до поселения...\n\nТеперь расстояние в две дюжины шагов казалось Корелу непозволительно маленьким: он не знал, как быстро подействует яд на зверя, зато хорошо представлял скорость, с которой тот бросится на обидчика.\n\nКороткий выдох, и первый выстрел поразил цель. Боров всхрюкнул и замотал головой. Стайка мелких птиц вспорхнула с ближайшего дерева.\n\nВторая стрела пролетела мимо, зато третья воткнулась куда-то в загривок. Кабан наконец заметил человека и понёсся к нему напролом. По коже изгоя пробежала дрожь. Ещё не поздно убежать к дереву?\n\nНо он остался на месте, хладнокровно подпуская зверя ближе. Ещё мгновение, и Корел завертел ручкой как бешеный. Магазин опустел, и механизм защёлкал вхолостую. Зверь взревел и заметался почти на месте – его морда ощетинились ещё тремя стрелами, одна торчала из глазницы. Да когда же он наконец уснёт?!\n\nИзгой спешно перезарядил арбалет и вновь атаковал кабана. Вблизи мощности выстрелов хватало, чтобы пробить толстую шкуру, вскоре боров выбился из сил и упал. Только теперь Корел решился подойти ближе и ножом прервал агонию зверя.\n\nНа разделку туши времени не было, поэтому пришлось обвязать её верёвкой и тащить волоком. К счастью, ориентир нашёлся быстро, и изгой без приключений добрался назад к селению.]=])\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 14,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn hunting ~= 6\nend"
      },
      {
        "id": 17,
        "text": "Дальше",
        "lua_if": "function lua_if()\n-- в лагерь\nreturn hunting == 6\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 5\nnewAchieve(\"hunter\")\napproved = (approved or 0) <plus> 1\nend"
      },
      {
        "super_calculate": false,
        "id": 14,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "widget_show": [
          "hunt_widget",
          "hunt"
        ]
      },
      {
        "id": 15,
        "text": "Укажите команды для картинки",
        "lua_if": "function lua_if()\nreturn hunting == 6\nend",
        "url": "https://i.ibb.co/0MG916k/IMG-20231125-122444-1700929107931-1.png"
      }
    ]
  },
  {
    "id": 16,
    "text": "Корел не знал, что это за плоды, они были мелкими и твёрдыми. Он как следует тряхнул ближайшее дерево, и фрукты градом посыпались вниз. Довольно долго он собирал их в мешок, не очень придирчиво отбрасывая только откровенно испорченные, пока не набрал, как ему показалось, достаточно.",
    "answers": [
      {
        "id": 14,
        "text": "Дальше",
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned == 0\nend"
      },
      {
        "id": 89,
        "text": "Дальше",
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned > 0\nend"
      }
    ]
  },
  {
    "id": 17,
    "text": "Биз ждал изгоя у того самого места, где они расстались, держа на плече тушу молодого оленя. Выглядел он крайне довольным.\n\n",
    "answers": [
      {
        "id": 17,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\ntext = (hunting < 2 and [=[– А где твоя добыча? – удивился он, разглядывая пустые мешки Корела.\n\n– Сегодня никого, – миролюбиво ответил изгой.\n\nОрк скривился.\n\n– Тогда я не смогу поручиться за тебя. Ты вообще пытался?\n\nОни молча вернулись к дому охотника. Корел вновь остался безоружным.\n\n]=]) or (hunting < 6 and [=[– Да, не густо, – ухмыльнулся он, оглядев мешки Корела. – Это лучше, чем ничего, но поручиться за тебя с этим я не смогу.\n\nОни молча вернулись к дому охотника. Корел вновь остался безоружным.\n\n]=]) or \n\n[=[– Ну и где тебя... – начал было он, но запнулся, увидев верёвку в руках вымотанного Корела. – Ты это сам?\n\nТот вымученно кивнул.\n\n– Но как ты его? – не утихал Биз. – У тебя же стрелы без яда...\n\nОн замолк, поняв, что сболтнул лишнего. После короткого допроса орк признался, что специально выдал изгою обычные стрелы, чтобы проверить его, и пообещал, что поручится за него перед Гамамелисом.\n\nОни молча вернулись к дому охотника, вместе таща добычу. Корел вновь остался безоружным.\n\n]=]\n\nreturn text \nend",
        "merge": true
      },
      {
        "id": 11,
        "text": "Новый ответ. введите текст",
        "run": [
          11
        ]
      }
    ]
  },
  {
    "id": 18,
    "text": "autorun after page",
    "answers": [
      {
        "id": 9,
        "text": "виджет",
        "lua_if": "function lua_if()\nreturn g.current_id ~= 2 and disWid ==0\nend",
        "super_calculate": false,
        "lua_do": "function lua_do()\n\ng.reloadFunctions = 93\n\nrestTime = restTime or 30\n\ng[\"lua_text_widget\".. \"hunt_widget\"] = [[lua_text_widget = \n   function() \n      return (hunting < 2 and 0) or (hunting <4 and 1) or (hunting < 6 and 2) or 10\n   end]] \n\n\n   g[\"lua_tap\" .. \"resTime\"] = [[lua_tap = \n   function() \n      dialog({header = \"Время\", text = \"Нужно успеть закончить все важные дела до заката.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\n\nend",
        "widget_show": [
          "resTime",
          "restTime"
        ],
        "widget": [
          "resTime",
          "https://i.ibb.co/M5VxZpb/IMG-20231027-225957-1698437136008.png",
          ""
        ],
        "calculate": true
      },
      {
        "lua_do": "function lua_do()\nnilV = \"\"\n\ng[\"lua_tap\" .. \"helpButton\"] = [[lua_tap = \n   function()\n      disWidSup = disWid\n      disWid = 1\n      showPage{id = 102}\n   end]]\nend",
        "lua_if": "function lua_if()\nreturn g.current_id ~= 2 and disWid ==0\nend",
        "super_calculate": false,
        "id": 77,
        "calculate": true,
        "text": "Виджет",
        "widget_show": [
          "helpButton",
          "nilV"
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\nrestTime= (restTime or 0) > 0 and restTime or 0\n\n--vars[\"autorun after\"] = 18\n\nif g.current_id == 18 then\n  disWid = 1\nend\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 18
      },
      {
        "comment": false,
        "super_calculate": true,
        "lua_do": "function lua_do()\ncleaning = cleaning or 0\n\n\nfunction diaClean()\nif cleaning == 15 then\nnewAchieve(\"cleaner\")\nend\nend\n\n\nfunction newAchieve(t)\nlocal a = g[t] or 0\n if a == 0 then\n   g[t] = 1\n   vars[\"achPointer\"] = t\n   vars[\"pointerCount\"] = 2\n  end\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 18,
        "calculate": false
      },
      {
        "id": 84,
        "text": "rest\nhttps://i.ibb.co/QH4SpjJ/flower1.png\nhttps://i.ibb.co/r3rTJyc/target1.png\nhttps://i.ibb.co/z67QSxj/secr1.png\nhttps://i.ibb.co/3v9Cf4S/mech.png\nhttps://i.ibb.co/mb6p9YR/invis.png\nhttps://i.ibb.co/m8tPFqq/hunt-transformed.png\nhttps://i.ibb.co/dfY1cBb/clean.png",
        "lua_if": "function lua_if()\nreturn false\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "lua_do": "function lua_do()\ng.test = 0\nnewAchieve(\"lolThisIsBug\")\nend",
        "text": "test ach",
        "id": 18,
        "comment": false
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\npointerCount = pointerCount or 0\nreturn pointerCount > 0\nend",
        "id": 92,
        "text": "отображение достижения",
        "lua_text": "function lua_text()\n--[=[\n\nРоковой букет -- переделать после переработки\nСнайпер – переделать на \"сумел попасть в Пижму\"\nНикто не любит ябед\nЛюбая кухарка\nОхотник\nЧестный уборщик\nЗавсягдатай\nИнтриган -- переделать на \"сумел завоевать доверие Гамамелиса шантажом и обманом\"\n\n\ng.cleaner \ng.hunter \ng.secret \ng.mech \ng.kitchen \ng.flowers\ng.sniper\ng.talking\n\n]=]\n\n\n\nlocal a = achPointer\n\nlocal b = \"\"\n\nif a == \"cleaner\" then\n   b = \"Честный уборщик\"\nelseif a == \"hunter\" then\n   b = \"Охотник\"\nelseif a == \"secret\" then\n   b = \"Никто не любит ябед\"\nelseif a == \"mech\" then\n   b = \"Любая кухарка\"\nelseif a == \"kitchen\" then\n   b = \"Завсегдатай\"\nelseif a == \"flowers\" then\n   b = \"Роковой букет\"\nelseif a == \"sniper\" then\n   b = \"Снайпер\"\nelseif a == \"talking\" then\n   b = \"Интриган\"\nelseif a == \"cancel\" then\n   b = \"Признание\"\nelseif a == \"robust\" then\n   b = \"Чтобы наверняка\"\nelseif a == \"rounds\" then\n   b = \"Круги на воде\"\n\nelse b = a or \"\" end\n\n\nreturn [=[\n\n\n༺ Получено достижение: «]=] .. b .. \"» ༻\"\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 92,
        "calculate": true,
        "lua_do": "function lua_do()\n\npointerCount = pointerCount or 0\n\nif pointerCount > 0 then\n  pointerCount = pointerCount - 1\nelse achPointer = nil\nend\n\ndisWidSup = 0\n\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 19,
    "text": "Редкие порывы ветра шли волнами по пестрому полю. Казалось, здесь можно найти что угодно. Главное – знать, что тебе нужно.",
    "answers": [
      {
        "comment": false,
        "lua_do": "function lua_do()\ncharmFlowers = 2\nrestTime = restTime - 1\nend",
        "text": "Собрать чароцветы",
        "lua_if": "function lua_if()\nreturn charmFlowers == 1 or (meetRosy == 1 and charmFlowers <2)\nend",
        "id": 87
      },
      {
        "comment": false,
        "id": 88,
        "text": "Собрать кипрей",
        "lua_do": "function lua_do()\nchamaenerion = 2\nrestTime = restTime - 2\nend",
        "lua_if": "function lua_if()\nreturn chamaenerion == 1\nend"
      },
      {
        "id": 14,
        "text": "Не собирать ничего",
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned == 0\nend"
      },
      {
        "id": 87,
        "text": "Не собирать ничего",
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned > 0\nend"
      }
    ]
  },
  {
    "id": 20,
    "text": "– Да укроет тебя Мать Земля, – второй раз за день рефлекторно выдал опешивший изгой. – Моё имя – Корел, и я искал здесь не тебя.\n\n– Да утаит она твой след, Корел, – незнакомец был удивлён не меньше. – Я Ваг, и я живу здесь.\n\nОни некоторое время изучающе глядели друг на друга, затем Ваг вернулся к своему занятию.\n\n– Я думал, что иду за другим орком, – поспешил объясниться изгой. – Может быть ты знаешь кого-то по имени Биз?\n\n– Конечно знаю. Биз – мой брат.\n\nОрк поведал Корелу, что приглядывал за братом с тех пор, как тот покинул племя. Помогал добывать еду и залечивал раны, учил выживать в лесу. И что обычно Биз не охотился сам, а в основном расставлял силки, капканы и более сложные ловушки, и только в этот раз попросил наколдовать для него более ценный охотничий трофей. Изгой коротко рассказал о себе, умолчав, что выполняет задания мятежного вождя Гура.\n\nВаг показал, куда пошёл Биз. Изгой поблагодарил его и направился следом вдоль поросшего камышом берега. Уже через несколько минут он нашёл орка, склонившегося над каким-то хитроумным механизмом и, присмотревшись, заметил рядом тушку речного зверя.\n\n– Значит олень – специально для меня? – подал голос Корел и подошёл ближе.\n\nБиз замер. В его взгляде застыло удивление и испуг.",
    "answers": [
      {
        "id": 20,
        "text": "\n\nКорел нутром чувствовал, что ситуацию можно выгодно обратить в свою пользу, но для прямого шантажа ему не хватало сведений о порядках в поселении.",
        "lua_if": "function lua_if()\nreturn knowNoMagicPosition ~= 1\nend",
        "merge": true
      },
      {
        "id": 21,
        "text": "Шантажировать",
        "lua_if": "function lua_if()\nreturn knowNoMagicPosition == 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\napproved = (approved or 0) <plus> 1\nend"
      },
      {
        "id": 22,
        "text": "Успокоить",
        "lua_do": "function lua_do()\nrestTime = restTime - 7\nmechanics = 1\napproved = (approved or 0) <plus> 1\nachieveMech = -1\nend"
      },
      {
        "id": 20,
        "text": "Укажите команды для картинки",
        "url": "https://i.ibb.co/zsR2Hhr/river.png"
      }
    ]
  },
  {
    "id": 21,
    "text": "Теперь оставалось только правильно разыграть выпавшую карту. \n\n– Я встретил твоего брата. Здорово, что вы всё-таки не полностью изолировались от магии, – благодушно продолжил Корел. – Ни за что бы не подумал, что этот ваш Гамамелис может настолько терпимо к такому относиться. Или?..\n\nЕго брови картинно поползли вверх, и даже приоткрылся рот. В таком деле лучше переиграть, чем недоиграть.\n\n– Старик не знает, – буркнул Биз, опустив взгляд.\n\nАга, теперь на крючке!\n\n– Ого, в какую я серьёзную передрягу влез... – запричитал Корел. – Наверное, теперь ты беспокоишься, что я могу раскрыть твою тайну? Я бы беспокоился...\n\n– Чего ты хочешь? – не выдержал орк.\n\n– Я просто хочу поскорее покинуть ваш гостеприимный лагерь и продолжить свой путь, – развёл руками изгой. – Тогда и тебе не придётся переживать из-за меня и твоей тайны...\n\n– А почему бы мне просто не зашибить тебя? – вдруг встрепенулся Биз и начал угрожающе подниматься.",
    "answers": [
      {
        "id": 24,
        "text": "Дальше",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nblackmailBiz = 1\nblackmailAkonit = blackmailAkonit or 0\nbetAsleep = betAsleep or 0\n\nif blackmailBiz <plus> blackmailAkonit <plus> betAsleep == 3 then\nnewAchieve(\"talking\")\nend\n\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 21
      }
    ]
  },
  {
    "id": 22,
    "text": "– Да, я видел твоего брата, – продолжил изгой. – И нет, я не собираюсь выдавать твою тайну.\n\n– Не думал, что хватит смелости за мной в болото лезть... Тогда зачем ты здесь?\n\n– Просто удивился, что ты ушёл не туда, куда пошёл бы любой охотник, и решил проверить.\n\n– И что ты хочешь?\n\n– Ни-че-го. Я пришёл помогать тебе, помнишь? Хотя теперь мне очень интересно, как работает эта штука. Ты сам её собрал?\n\nПростой трюк на отвлечение внимания сработал как с ребёнком: Биз и сам был рад как можно скорее забыть неловкость, которую вызвало появление Корела. Он охотно рассказывал и показывал, и вскоре изгой не только знал всё о шестернях и винтах, но и смог бы собрать из них нечто похожее.\n\nЗа разговором прошло много времени, и охотники опомнились, только когда ветер стал совсем холодным. Они вернулись к шалашу, забрали готовую оленью тушу и зашагали к поселению, пообещав Вагу зайти, когда будет больше времени. У самой деревни Биз остановился и неуверенно попросил:\n\n– Только ты правда не говори никому. Здесь не любят магию и колдунов.\n\nОни молча вернулись к дому охотника, вместе таща добычу. Корел вновь остался безоружным. ",
    "answers": [
      {
        "id": 11,
        "text": "Новый ответ. введите текст",
        "run": [
          11
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nknowNoMagicPosition = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 22
      }
    ]
  },
  {
    "id": 23,
    "text": "Закат окрасил низкие облака оранжевым, и Корел невольно задержал взгляд на небе.\n\n– Красиво у нас, да? – появился из ниоткуда Иссоп. – Пойдём, Гамамелис хочет тебя видеть. Он уже переговорил со всеми и готов определить твою участь.\n\n– Намекнёшь, на что мне надеяться?\n\n",
    "answers": [
      {
        "id": 23,
        "text": "Страж лишь развёл руками. Он небрежно накинул верёвки на кисти изгоя и, взяв его под формальный конвой, направился к хижине старика.\n\n<$2><b>Хорошо, что удалось завоевать доверие Иссопа за столь короткое время.</b><$1>\n\n– Рад видеть тебя вновь, Корел, – равнодушно поздоровался Гамамелис из-за стола, когда спутники вошли. – Надеюсь, ты нашёл пребывание здесь занимательным. Что же касательно твоей продуктивности...\n\nОн опустил взгляд на листок с записями, лежащий возле охапки конфискованных вещей изгоя.\n\n",
        "lua_if": "function lua_if()\ng.formatText = 1\nissopTrust = issopTrust or 0\nreturn issopTrust > 3 -- условие доверие Иссопа\nend",
        "merge": true
      },
      {
        "id": 23,
        "text": "Страж лишь пожал плечами. Он со всей ответственностью обвязал руки изгоя верёвкой и, взяв его под конвой, направился к хижине старика.\n\n<$2><b>Похоже, завоевать доверие Иссопа за столь короткий срок не удалось.</b> <$1>\n\n– Рад видеть тебя вновь, Корел, – равнодушно поздоровался Гамамелис из-за стола, когда спутники вошли. – Надеюсь, ты нашёл пребывание здесь занимательным. Что же касательно твоей продуктивности...\n\nОн опустил взгляд на листок с записями, лежащий возле охапки конфискованных вещей изгоя.\n\n",
        "lua_if": "function lua_if()\nreturn issopTrust < 4 -- условие недоверие Иссопа\nend",
        "merge": true
      },
      {
        "id": 23,
        "text": "– Что же касается твоей продуктивности, – повторил он, – то кое-кто отметил твои старания и готов взять на себя ответственность за последствия твоего освобождения. Ты не покинешь поселение, но можешь стать свободным и равным с остальными...\n\n– Да чтоб... – не успел как следует возмутиться Корел: в его планы не входило становиться равным с кучкой деревенщин.\n\n",
        "lua_if": "function lua_if()\napproved = approved or 0\nreturn approved == 1 -- условие кто-то поручился\nend",
        "merge": true
      },
      {
        "id": 23,
        "text": "– Что же касается твоей продуктивности, – повторил он, – то её многие оценили по достоинству и готовы взять на себя ответственность за последствия твоего освобождения. Ты можешь уйти или остаться с нами, стать здесь по-настоящему свободным.\n\n– Благодарю за доверие... – начал говорить Корел.\n\n",
        "lua_if": "function lua_if()\nreturn approved > 1 -- условие 2 поручились\nend",
        "merge": true
      },
      {
        "id": 23,
        "text": "– Что же касается твоей продуктивности, – повторил он, – то никто не отметил в тебе достаточного усердия. Никто не готов взять на себя ответственность за последствия твоего освобождения. Боюсь, тебе придётся задержаться у нас на правах пленника.\n\n– Да чтоб... – не успел как следует возмутиться Корел.\n\n",
        "lua_if": "function lua_if()\nreturn approved < 1 -- условие никто не поручился\nend",
        "merge": true
      },
      {
        "id": 23,
        "text": "С улицы раздались разрозненные крики, а в окнах заплясали оранжевые всполохи. Нет, это был не закат.\n\n– Пожар! Пожар! – крикнул кто-то, распахнув дверь, и тут же скрылся.\n\nИссоп мгновенно выскочил следом. Корел вопросительно взглянул на старика, и тот приказал закрыть дверь.\n\nЧто-то звякнуло, и через мгновение ливень осколков усеял деревянный пол. В разбитое окно грациозно впорхнула Пижма.\n",
        "merge": true
      },
      {
        "var_set_from": [
          265065,
          "global dust",
          "global dust",
          265065,
          "dust",
          "dust"
        ],
        "super_calculate": false,
        "id": 23,
        "calculate": true,
        "text": "факторы концовки\nВодокачка работает – люди в деревне <plus>1 к силе\nБиз не на охоте – может вышибить дверь <plus> 1 к силе\nБэтти не спит – люди не у неё <plus> 1 к силе\nДоверие Иссопа - руки не связаны -  не может действовать\nИссоп не отравлен фруктами <plus>1 к силе\n\nПижма усилена цветами – <plus> 1 к силе\nКорел понял, как стрелять  <plus> 1 к силе"
      },
      {
        "super_calculate": false,
        "id": 23,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\n--if g.dust <plus> dust > 0 then\n  g.dust = 1\n  dust = 1\n--end\n\nif achTalk == 1 and issopTrust > 3 then\n  newAchieve(\"talking\") \nend\n\nbizIsAway = bizIsAway or 0\nwaterAcces = waterAcces or 0\nbetAsleep = betAsleep or 0\nend"
      },
      {
        "id": 27,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrust > 3 -- руки развязаны\nend"
      },
      {
        "id": 28,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrust < 4 -- руки связаны\nend"
      },
      {
        "id": 23,
        "text": "Укажите команды для картинки",
        "url": "https://i.ibb.co/YW9nqz2/kandinsky-download-1701074272022-1-1.png"
      }
    ]
  },
  {
    "id": 24,
    "text": "Срывается...\n\n– Да брось, – попытался как можно более спокойно ответить Корел. – Утром я одолел твою напарницу. Теперь выследил и застал врасплох тебя. А ты вместо обычной охоты возишься с этими ловушками. Мы оба знаем, какие у тебя шансы.\n\nОн небрежно поправил плащ, под которым блеснул нож. Биз замер.\n\n– Ладно, – наконец сдался он. – Я поручусь Гамамелису, что отпустить тебя будет безопасно.\n\n– Уверен, после заката вы меня больше не увидите. Я больше не доставлю неприятностей.\n\n– По рукам, – прорычал орк. – А теперь сгинь, чтобы глаза мои тебя не видели. Иди осчастливь своей помощью кого-то другого.\n\nКорел со смешанными чувствами покинул горе-охотника и направился назад к поселению. Какие-то люди вышли ему навстречу у самых домов, удивились, что он вернулся один, и забрали оружие.\n\n",
    "answers": [
      {
        "id": 11,
        "text": "Новый ответ. введите текст",
        "run": [
          11
        ]
      }
    ]
  },
  {
    "id": 25,
    "text": "empty",
    "answers": [
      {
        "id": 25,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\ntext = akonitVisit == 1 and\n\n[=[Корел приблизился к двери каменного домика и постучал. Никто не ответил. Тогда он постучал громче, но снова безрезультатно. Он прошел вдоль стены к окну и попытался заглянуть внутрь. В комнате за стеклом горел очаг, вокруг всё оказалось завалено грудами хлама, котелками и ретортами, банками с порошками и связками трав. Хозяина не было.\n\nИзгой прошёл к окну с другой стороны и привстал на цыпочки, чтобы заглянуть и туда.\n\n– Ищешь что-то, чужак? – пискнула маленькая девочка, возникшая за спиной Корела буквально из ниоткуда.\n\nПростоволосая, румяная, в не по размеру просторной рубахе и венке из белых цветов на макушке, она хитро улыбалась и пыталась отдышаться.\n\n– Да, – смутился изгой. – Хотел поговорить с Аконитом, но на стук никто не отвечает.\n\n– Так он никогда не отвечает, занятой же, – хохотнула девчонка. – Это все знают: если чего надо – так заходи без стука.\n\n– Спасибо, – тепло улыбнулся изгой. – Так и поступлю.\n\nОн отвесил маленькой помощнице поклон и прошёл наконец в дом. ]=]\n\nor\n\n[=[На этот раз Корел без лишних церемоний зашёл в каменный дом.]=]\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 26,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--akonitVisit = ((akonitVisit or 0) <plus>1) == 1 and 1 or 2\nreturn akonitVisit == 1\nend"
      },
      {
        "id": 48,
        "text": "Дальше",
        "lua_if": "function lua_if()\nmeetRosy = meetRosy or 0\nreturn akonitVisit ==2 and meetRosy == 0\nend",
        "run": [
          48
        ]
      },
      {
        "id": 49,
        "text": "Дальше",
        "lua_if": "function lua_if()\nmeetRosy = meetRosy or 0\nreturn akonitVisit ==2 and meetRosy == 1\nend",
        "run": [
          49
        ]
      }
    ]
  },
  {
    "id": 26,
    "text": "Просторную комнату с разбросанными по полу инструментами и горой грязной посуды на столе заполнял спёртый воздух. Откуда-то раздавалось позвякивание металла о металл.\n\n– Помощь нужна? – крикнул Корел: хозяин явно не был ценителем такта и церемоний.\n\n– Да, конечно! – безэмоционально отозвался кто-то из-за одной из внутренних дверей. – Мне здесь всегда нужна помощь. Для начала, прибери в передней. Как закончишь – зови.\n\n",
    "answers": [
      {
        "id": 26,
        "text": "--[=[Просторная прихожая была завалена хламом. Или вернее горы мусора от пола до потолка превращали немаленькую комнату в тесную пещеру. Грязная посуда, остатки уже испорченной еды, какие-то сломанные вещи и непонятные детали. В таких жилищах, по легендам, обитают кровожадные тролли, и запах здесь царил соответствующий.\n\nСквозь непроходимые груды кто-то предусмотрительно проложил от входа две тропинки, которые упирались в двери на противоположных стенах.",
        "calculate": true,
        "super_calculate": false
      },
      {
        "id": 42,
        "text": "Заниматься уборкой",
        "lua_if": "function lua_if()\nreturn restTime > 0\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\ncleaning = (cleaning or 0) <plus> 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn false -- restTime > 0\nend",
        "lua_do": "function lua_do()\n\nrestTime = restTime - 1\n\n--[==[\ndialog({header = \"\", text = [=[– Эй! – снова крикнул Корел.\n\n– Уже закончил с уборкой? – отозвался хозяин дома из-за двери справа.]=], answers = {{text = \"Ещё нет\", pressListener = function()\ncleaning = cleaning <plus> 1\nif cleaning == 14 then\nrestTime = restTime - 4\nelseif cleaning > 8 then\nrestTime = restTime - 3\nelseif cleaning > 3 then\nrestTime = restTime - 2\nelse restTime = restTime - 1\nend\nshowPage{id = 42} hideDialog() end}, {text = \"Да\", pressListener = function() showPage{id = 43} hideDialog() end}}})]==]\nend",
        "text": "Позвать Аконита",
        "id": 91,
        "no_transition": false
      },
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 27,
    "text": "– Чего же ты ждёшь? – завопил старик, потеряв всякую манерность. – Беги, зови всех на помощь! Живее!\n\nПижма дёрнула за верёвку, и декоративный узел слетел с рук изгоя.\n\n– Не торопись, котик, – промурлыкала девушка, подняв тонкий указательный палец. – Нам будет лучше поговорить с этим пакостником без свидетелей.\n\n– Предатель! – взвизгнул Гамамелис. – Я знал, что вы с ней заодно. Вам меня не остановить!\n\n– Не верещи, старый лис, я и с тобой разберусь, – зашипела Пижма.\n\nКорел, уже дёрнувшийся в сторону двери, замер в нерешительности. Кому из этой парочки выгоднее помогать сейчас?",
    "answers": [
      {
        "id": 36,
        "text": "Позвать на помощь"
      },
      {
        "id": 37,
        "text": "Запереть дверь"
      }
    ]
  },
  {
    "id": 28,
    "text": "– Чего же ты ждёшь? – завопил старик, потеряв всякую манерность. – Беги, зови всех на помощь! Живее!\n\nКорел дёрнулся в сторону двери, но не успел сделать и шага: верёвка больно врезалась в руки, другой её конец держала Пижма. <$2><b>Эх, если бы Иссоп не связал его так надёжно...</b><$1>\n\n– Вот теперь я могу тебя освободить, милый, – промурлыкала она. – Хочешь?\n\n– Предатель! – взвизгнул Гамамелис. – Я знал, что вы с ней заодно. Вам меня не остановить!\n\n– Не верещи, старый лис, я и с тобой разберусь, – зашипела Пижма. – Ну что решил, красавчик? Я помогу тебе – ты поможешь мне. Или останешься зрителем?",
    "answers": [
      {
        "id": 29,
        "text": "Согласиться"
      },
      {
        "id": 30,
        "text": "Отказаться"
      }
    ]
  },
  {
    "id": 29,
    "text": "Корел интенсивно закивал. Пижма неуловимым движением неизвестно откуда появившегося кинжала рассекла узел на его руках, и верёвка упала на пол.\n\n– Будь умницей, – девушка строго погрозила ему пальцем, – а то останешься без сладкого. Запри дверь, быстро!\n\nКрики с улицы стали громче. Изгой поспешно дёрнул задвижку засова.\n\n– А теперь ты, – Пижма медленно приближалась к старику, который перестал суетиться и стальной хваткой сжимал трость, – последний выживший из города Мевелшофн. У меня было много времени, чтобы обо всём догадаться. Вы не пустили меня в город, потому что знали, что я не найду там реликт. И где бы тогда я его стала искать, м? Кто мог забрать его до того, как пришли первые мародёры? Ну, скажи мне. Последний. Выживший.\n\nСнаружи постучали. Затем ещё раз, а потом удары посыпались градом. Все трое обернулись и на секунду впились взглядами в дверь.\n\n– Тебе не следовало приходить к нам, бестия, – голос Гамамелиса звенел решимостью.\n\n– С этим разберёмся позже, – кивнула Пижма на старика. – Сначала придётся подрезать болванчиков.\n\n",
    "answers": [
      {
        "id": 30,
        "text": "В этот момент постукивания прекратились, а уже в следующее мгновенье весь дом сотрясся от чудовищного удара. Дверь отлетела на дюжину шагов, едва не зашибив изгоя. В тёмном проёме замерла мощная фигура орка.\n\n– Биз, прячься! – попытался остановить его Гамамелис, но тот уже нёсся на хохочущую девушку.\n\nПижма ловко кувыркнулась через его спину. Орк пролетел мимо и неподвижно замер на полу. На его шее горели три пунцовые точки.<$2><b> Теперь его сила и опыт не помогут поселенцам в неминуемой битве.</b><$1>",
        "lua_if": "function lua_if()\nbizIsAway = bizIsAway or 0\nreturn bizIsAway == 0 -- условие: орк не на охоте\nend",
        "merge": true
      },
      {
        "id": 30,
        "text": "Стук становился всё сильнее. Затем удары стихли почти на дюжину секунд. Бух! Кажется, дверь вышибали тараном. Первый натиск она выдержала, но долго ли ещё продержится?\n\n<$2><b>Кажется, среди поселенцев сейчас не было кого-то, чей опыт мог бы существенно помочь в неминуемой битве.</b><$1>",
        "lua_if": "function lua_if()\nbizIsAway = bizIsAway or 0\nreturn bizIsAway == 1 -- условие: орк на охоте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- орк не на охоте\nend"
      },
      {
        "id": 39,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 1 -- условие: орк на охоте\nend"
      }
    ]
  },
  {
    "id": 30,
    "text": "– Я не стану помогать тебе.\n\n– Ах, не разбивай мне сердце... А впрочем, как хочешь, зайчик. Только под руку не лезь.\n\nОна заперла дверь на засов и привязала к нему конец верёвки каким-то необычным узлом, не оставив изгою возможности быстро освободиться.\n\nКрики с улицы стали громче.\n\n– А теперь ты, – Пижма медленно приближалась к старику, который перестал суетиться и стальной хваткой сжимал трость, – последний выживший из города Мевелшофн. У меня было много времени, чтобы обо всём догадаться. Вы не пустили меня в город, потому что знали, что я не найду там реликт. И где бы тогда я его стала искать, м? Кто мог забрать его до того, как пришли первые мародёры? Ну, скажи мне. Последний. Выживший.\n\nСнаружи постучали. Затем ещё раз, а потом удары посыпались градом. Все трое обернулись и на секунду впились взглядами в дверь.\n\n– Тебе не следовало приходить к нам, бестия, – голос Гамамелиса звенел решимостью.\n\n",
    "answers": [
      {
        "id": 30,
        "text": "В этот момент постукивания прекратились, а уже в следующее мгновенье весь дом сотрясся от чудовищного удара. Корела отбросило к самому столу, тяжёлая задвижка приземлилась рядом, едва не пробив ему голову. Изгой тут же воспользовался железкой, чтобы освободить руки от пут. В дверном проёме замерла мощная фигура орка.\n\n– Биз, прячься! – попытался остановить его Гамамелис, но тот уже нёсся на хохочущую девушку.\n\nПижма ловко кувыркнулась через его спину, и орк пролетел мимо. Он едва не сшиб изгоя с ног и неподвижно замер на полу. На его шее остались три пунцовые точки.<$2><b> Теперь его сила и опыт не помогут поселенцам в неминуемой битве.</b><$1>",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- условие: орк не на охоте\nend",
        "merge": true
      },
      {
        "id": 30,
        "text": "Стук становился всё сильнее. Затем удары стихли почти на дюжину секунд. Бух! Кажется, дверь вышибали тараном. Первый натиск она выдержала, но долго ли ещё продержится?\n\n<$2><b>Кажется, среди поселенцев сейчас не было кого-то, чей опыт мог бы существенно помочь в неминуемой битве.</b><$1>\n\nИзгой судорожно пытался освободить руки от верёвки.",
        "lua_if": "function lua_if()\nbizIsAway = bizIsAway or 0\nreturn bizIsAway == 1 -- условие: орк на охоте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- орк не на охоте\nend"
      },
      {
        "id": 32,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 1 -- условие: орк на охоте\nend"
      }
    ]
  },
  {
    "id": 31,
    "text": "Корел стянул арбалет с пояса орка, двумя движениями разложил в боевое состояние. Кажется, заряжен.\n\nТем временем дом начал заполняться. ",
    "answers": [
      {
        "id": 31,
        "text": "Около дюжины человек ввалилось внутрь. Похоже, большая часть жителей оказалась слишком занята другими проблемами, требующими немедленного решения, и не пришла на штурм. <$2><b>Наверное, пожар до сих пор не потушили, да ещё и потерявшая над собой контроль Бэтти оттянула многих людей на себя.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 0 and betAsleep == 1 -- условие водокачка сломана, Бэтти спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Целая куча людей вливалась внутрь. Похоже, далеко не все жители пришли на штурм. <$2><b>Наверное, остальные ещё боролись с пожаром.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 0 and betAsleep == 0 -- условие водокачка сломана, но Бэтти не спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Целая куча людей вливалась внутрь. Похоже, не все жители пришли на штурм. <$2><b>Судя по запаху гари и копоти на лицах, с пожаром уже справились, так что остальные скорее всего были заняты усмирением потерявшей над собой контроль Бэтти.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 1 and betAsleep == 1 -- условие водокачка не сломана, а Бэтти спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Бесконечная толпа вливалась внутрь непрерывным потоком. Похоже, почти все жители поселения пришли на штурм. <$2><b>Должно быть, уже справились с пожаром, а других проблем не было.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 1 and betAsleep == 0 -- условие водокачка не сломана и Бэтти не спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": " <$2><b>Не было тут только тех, кто успел отужинать превращённой в снотворное похлёбкой</b><$1>.",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and waterAcces == 1 and betAsleep == 0 -- условие все спят, остальные не месте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": " <$2><b>Не было и тех, кто успел отужинать превращённой в снотворное похлёбкой</b><$1>.",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and not (waterAcces == 1 and betAsleep == 0)-- условие все спят, но нет не только их\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "\n\nПижма диким зверем прыгала от одного человека к другому, и те падали без чувств от незаметных, но смертельных ударов. Она извивалась змеёй, уворачиваясь от летящих стрел и ножей.\n\nКорел даже не пытался принять участие в драке. В суматохе кто-то опрокинул стол, и его вещи посыпались на пол. Изгой воспользовался неожиданным укрытием и пытался оценить обстановку.",
        "merge": true
      },
      {
        "id": 31,
        "text": "Расчёт\nПижма: базовая сила 2 <plus> 2 от цветов\nТолпа: 1-4\nКорел: 1 от арбалета против толпы, 0 или 1 против Пижмы",
        "calculate": true,
        "super_calculate": false
      },
      {
        "id": 33,
        "text": "Стрелять в Пижму",
        "lua_do": "function lua_do()\ntarget = 2\nend"
      },
      {
        "id": 33,
        "text": "Стрелять в людей",
        "lua_do": "function lua_do()\ntarget = 1\nend"
      },
      {
        "id": 33,
        "text": "Бежать к вещам",
        "lua_if": "function lua_if()\nreturn true\nend",
        "lua_do": "function lua_do()\ntarget = 0\nend"
      }
    ]
  },
  {
    "id": 32,
    "text": "– Ах, какие преданные, – закатила глаза Пижма. – Прямо как щеночки, потерявшие мамочку.\n\nОна одним движением опрокинула стол и легко, словно тряпку, потащила его к двери. Поймав удивлённый взгляд Корела, девушка адресовала ему воздушный поцелуй.\n\nВторой удар сотряс стены домика, и изгой, пытавшийся тем временем развязать узел, чуть не защемил ухнувшим засовом пальцы.\n\n– А теперь – сюрприз! \n\nВыдернув заслонку, Пижма отскочила назад. Третий удар не встретил сопротивления, и через распахнувшуюся дверь в дом ввалилось вслед за тяжёлым бревном с полдюжины человек с ножами и арбалетами. Девушка закружила между ними диким зверем, и уже через пару мгновений все лежали на полу без движения.\n\nКорел метнулся к выброшенному кем-то ножу, и его едва не снёс стол, пролетевший прямо в дверной проём. Судя по звукам, снаряд поразил ещё несколько человек снаружи.\n\n",
    "answers": [
      {
        "id": 101,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 33,
    "text": "empty",
    "answers": [
      {
        "var_set_from": [
          265065,
          "dust",
          "dust"
        ],
        "super_calculate": false,
        "id": 31,
        "text": "Расчёт\nПижма: базовая сила 2 <plus> 2 от цветов\nТолпа: 1-4\nКорел: 1 от арбалета против толпы, 0 или 1 против Пижмы\n\nЕсли сила пижмы <1, то она начинает колдовать, если > 0, то старик",
        "calculate": true,
        "lua_do": "function lua_do()\n--[=[Пижма: базовая сила 0, <plus> 2 от цветов, <plus> 1 от усыпления Бэтти <plus> 1 от усыпления всех\nТолпа: 0 <plus> 2 от Биза, <plus>2 от колодца\n\nКорел: 1 от арбалета против толпы, 0 или 1 против Пижмы\n\n]=]\nhunting = hunting or 0\ntarget = target or 1\npGetFlower = pGetFlower or 0\nwaterAcces = waterAcces or 0\nbetAsleep = betAsleep or 0\nbizP = bizP or 0\n\n\npPower = pGetFlower <plus> betAsleep  <plus> (chamaenerion == 10 and 1 or 0) <plus> (target == 1 and 1 or 0)\n\n\ncrowdPower = waterAcces * 2 <plus> bizP * 2 <plus> (target == 2 and hunting  > 3 and 1 or 0)\n\n--[=[if pGetFlower == 2  then\n  achFlowers = 1\nend]=]\n\n\nif target == 2 and hunting  > 3 then\n  newAchieve(\"sniper\")\nend\n\nwinner = (pPower > 2 and (pPower -  crowdPower) > 0 and 1) or (crowdPower > 2 and (pPower -  crowdPower) < 0 and 2) or 3\n\nend"
      },
      {
        "id": 33,
        "text": "Бросив всё, Корел ринулся к груде вещей, кое-как уворачиваясь от случайных стрел и падающих тел. К счастью, Пижма на него внимания не обращала и не мешала его манёвру. Зато остальным устроила настоящее побоище.\n\n",
        "lua_if": "function lua_if()\ntarget = target or 0\nreturn target == 0 -- условие Корел бежит к вещам\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "Корел кое-как привёл подобранный арбалет в боевое состояние и закрутил ручкой. Чтобы попасть хоть в кого-нибудь в такой толчее, особо и целиться было не нужно, но изгой старался стрелять по ногам. Похоже, сонный яд, которым были смазаны стрелы, действовал довольно эффективно, и люди падали буквально в течение нескольких секунд после попадания.",
        "lua_if": "function lua_if()\nreturn target == 1 -- условие Корел стреляет в толпу\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "Корел кое-как привёл подобранный арбалет в боевое состояние и закрутил ручкой. В такой толчее попасть в конкретного человека было непросто, особенно непривычному к такому оружию изгою. <$2><b>Он растратил весь боекомплект, но похоже Пижма и не заметила, что Корел пытался действовать против неё.</b><$1>",
        "lua_if": "function lua_if()\nreturn target == 2 and hunting  < 4 -- условие Корел стреляет в Пижму и мажет\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "Корел уже отработанным движением привёл подобранный арбалет в боевое состояние. В такой толчее попасть в конкретного человека было непросто, но уже успевший притереться к такому оружию изгой не торопился. Наконец, когда девушка оказалась всего в полудюжине шагов, он закрутил ручкой.\n\n– Предатель! –  прошипела она, когда первая стрела рассыпалась перед самой её грудью.\n\nПижме пришлось остановиться и коротким движением руки сотворить то же самое заклинание для остальных снарядов, выпущенных Корелом.\n\n<$2><b>Люди смогли воспользоваться короткой передышкой и набросились на девушку с новой силой.</b><$1>",
        "lua_if": "function lua_if()\nreturn target == 2 and hunting  > 3 -- условие Корел стреляет в Пижму и попадает\nend",
        "merge": true
      },
      {
        "id": 95,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 34,
    "text": "empty",
    "answers": [
      {
        "id": 34,
        "text": "И вот, Пижма подскочила к старику почти в упор. Вихрь молний с треском сорвался с её рук. Даже Корел, до сих пор прячущийся в дальнем углу, чувствовал всю мощь этого заклинания, и ту беспомощность, которая вынудила девушку применить его. Но Гамамелис не шелохнулся. <$2><b>Разряды проходили вокруг него, не причиняя вреда, и с грохотом разряжались на стенах и потолке.</b><$1> Всё было кончено.\n\nДевушка завалилась на колени, на щеках заблестели слёзы. Она не смогла.\n\n– Ты отвергла наше гостеприимство, – торжествующим голосом произнёс старик. – Напала на беззащитных людей. Посеяла смуту и раздор между ними. Я приговариваю тебя к казни.\n\nВновь яркий свет из его ладоней наполнил комнату и заставил изгоя зажмуриться. И когда Корел открыл глаза, Пижмы уже не было.",
        "lua_if": "function lua_if()\nreturn blowDust == 0 and winner == 2-- условие ждёт и старик побеждает\nend",
        "merge": true
      },
      {
        "id": 34,
        "text": "Гамамелис сражался всё сдержаннее и осторожнее, но даже это не могло изменить уже предопределённый исход. Почувствовав, что противник истощён, Пижма раскрутила в воздухе перед собой нить чистой энергии и набросила её на старика, как лассо. <$2><b>Магическая верёвка сама закручивалась вокруг тела своей жертвы с головы до ног и вскоре покрыла тело плотным золотым коконом.</b><$1>\n\n– Хоть так отдохнёшь от моей бесконечной болтовни, – скривилась Пижма и пнула получившуюся куколку ногой.",
        "lua_if": "function lua_if()\nreturn blowDust == 0 and winner == 1 -- условие ждёт и пижма побеждает\nend",
        "merge": true
      },
      {
        "id": 34,
        "text": "Гамамелис сражался всё сдержаннее и осторожнее, но и Пижма не могла ничего ему противопоставить. Увернувшись от очередного заклинания, она метнулась к разбитому окну и растворилась в ночной темноте.\n\nСтарик даже не глянул ей вслед, только беспомощно навалился всем весом на трость.",
        "lua_if": "function lua_if()\nreturn winner == 3 -- условие ничья\nend",
        "merge": true
      },
      {
        "id": 35,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn blowDust == 1 or winner == 2 -- условие старик победил\nend"
      },
      {
        "id": 40,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn blowDust == 0 and winner == 1 -- условие Пижма победила\nend"
      },
      {
        "id": 98,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn winner == 3 -- условие ничья\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nif charmFlowers == 10 and winner == 1  then\n  newAchieve(\"flowers\")\nend\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 34
      }
    ]
  },
  {
    "id": 35,
    "text": "empty",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "id": 35,
        "text": "Новый ответ. введите текст",
        "comment": false,
        "lua_do": "function lua_do()\nblowDust = 0\nmeetRosy = 1\napproved =2\nend"
      },
      {
        "lua_if": "function lua_if()\n\nblowDust = blowDust or 0\nmeetRosy = meetRosy or 0 \ngamaTrust = gamaTrust or 0\n\ng.endings = g.endings or {}\n\nif blowDust == 1 or meetRosy == 0 or gamaTrust == 0 then\n   g.endings.bad = 1\nend\n\nif blowDust == 0 and meetRosy == 1 and  gamaTrust == 1 then\n   g.endings.good = 1\nend\n\n\nreturn true\nend",
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nblowDust = blowDust or 0\nmeetRosy = meetRosy or 0 \ngamaTrust = gamaTrust or 0\n\ng.endings = g.endings or {}\n\nif blowDust == 1 or meetRosy == 0 or gamaTrust == 0 then\n   g.endings.bad = 1\nend\n\nif blowDust == 0 and meetRosy == 1 and  gamaTrust == 1 then\n   g.endings.good = 1\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "id": 35
      },
      {
        "id": 35,
        "text": "– Подойди, – приказал старик.\n\nОн осунулся и как будто постарел на дюжину лет. Властность движений уступила усталости. Корел послушно поднялся и настороженно приблизился к колдуну, только что испепелившему человека.\n\n– Теперь всё поменялось, – мрачно продолжил Гамамелис. – Труды моих людей обратились прахом. Новый мир, который мы заложили здесь, погиб. И даже их вера в меня предана...\n\nОн застыл, уставившись на трость в своих руках, и как будто совсем забыл о собеседнике.\n\n– Мне жаль, – выдавил Корел.\n\n– Ты всего лишь искра, пробудившая пламя, но костровище собрали мы сами... И кто знает, как могло бы сложиться всё без тебя. В любом случае, <$2><b>я уже счёл тебя достойным и верю, что ты распорядишься этим ответственно...</b><$1>\n\nГамамелис решительно протянул руку и вложил трость в ладони изгоя.\n\n– Потухший реликт? – запоздало догадался он, и старик кивнул.\n\n– Всплеск магии несомненно привлёк к этому месту внимание тех, кто мог его почувствовать, – объяснил Гамамелис. – Сначала придут пожиратели, потом искатели артефактов. И я больше не смогу защитить поселение... Придётся отправиться в изгнание, чтобы сбить след. Сохрани реликт, не позволь использовать его во вред людям... Любой ценой... А теперь иди.",
        "lua_if": "function lua_if()\napproved = approved or 0\ngamaTrust = approved > 1 and 1 or 0\nreturn gamaTrust == 1 -- условие есть доверие\nend",
        "merge": true
      },
      {
        "id": 35,
        "text": "– Ты жив... – отметил, а не спросил старик, взглянув на Корела.\n\nТеперь Гамамелис осунулся и как будто постарел на дюжину лет. Властность движений уступила усталости. Корел неуверенно приблизился к колдуну, только что испепелившему человека.\n\n– Теперь всё поменялось, – мрачно продолжил старик. – Труды моих людей обратились прахом. Новый мир, который мы заложили здесь, погиб. И даже их вера в меня предана...\n\nОн застыл, уставившись на трость в своих ладонях, и как будто совсем забыл о собеседнике.\n\n– Мне жаль, – выдавил Корел.\n\n– Тебе не жаль, ты даже не попытался стать своим для этих людей...\n\n<$2><b>Гамамелис решительно одёрнул руку с тростью, будто окончательно решив что-то для себя.</b><$1>\n\n– Это – потухший реликт? – запоздало догадался изгой, и старик кивнул.\n\n– Всплеск магии несомненно привлёк к этому месту внимание тех, кто мог его почувствовать, – проворчал Гамамелис. – Сначала придут пожиратели, потом искатели артефактов. И я больше не смогу защитить поселение... Я отправлюсь в изгнание. Я сделаю так, чтобы этот реликт не попал в злые руки... Любой ценой... Теперь ты можешь уйти.",
        "lua_if": "function lua_if()\nreturn gamaTrust == 0 -- условие старик победил недостаточно доверия\nend",
        "merge": true
      },
      {
        "id": 100,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 36,
    "text": "– Я тебе не котик, – огрызнулся Корел и высунулся в ещё открытую дверь. – Иссоп?! Кто-нибудь! Скорее сюда! Тут Пижма!\n\n– Ах ты... – похоже девушка по-настоящему удивилась. – Думаешь, порешать их всех будет веселее? Впрочем, ты прав.\n\nОна хищно оскалилась и по-кошачьи растопырила пальцы с длиннющими ногтями. Однако на изгоя нападать не стала, и он беспрепятственно юркнул за стол к Гамамелису. Старик держался необычайно сдержанно, на его месте Корела, пожалуй, изрядно бы потряхивало. Впрочем, на своём месте ему тоже было весьма неспокойно. Кажется, пора придумывать себе парочку новых хороших примет.\n\nТем временем к дому начали стягиваться люди. Внутрь пока никто проникнуть не пытался, очевидно ждали кого-то или чего-то.",
    "answers": [
      {
        "id": 30,
        "text": "В этот момент в дверном проёме появилась мощная фигура орка.\n\n– Биз, подожди! – попытался остановить его Гамамелис.\n\nТот, успев осмотреть помещение и оценить обстановку, послушно замер, не сводя глаз с наступившейся девушки. <$2><b> Большая удача, что его сила и опыт теперь помогут поселенцам в неминуемой битве.</b><$1>\n\nПижма прошлась перед дверью, затем остановилась и поманила орка пальцем.\n\n– Надо же, какой послушный зверёк, –  дразнилась она. – Какая дрессировка, какая выдержка! А погладить можно?\n\nБиз скалился. Казалось, всё его тело было большой сжатой пружиной и готово в любой момент сорваться. Но орк не поддавался.\n\nТолпа становилась всё больше.",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- условие: орк не на охоте\nend",
        "merge": true
      },
      {
        "id": 30,
        "text": "Пока им хватало рассудительности не пытаться штурмовать дом малыми силами. <$2><b>К несчастью для поселенцев, кого-то, чей опыт мог бы существенно помочь в неминуемой битве, среди них не было.</b><$1>\n\nПижма вновь обратила внимание на старика.\n\n– А теперь ты, – она медленно приближалась к Гамамелису, который перестал суетиться и стальной хваткой сжимал трость, – последний выживший из города Мевелшофн. У меня было много времени, чтобы обо всём догадаться. Вы не пустили меня в город, потому что знали, что я не найду там реликт. И где бы тогда я его стала искать, м? Кто мог забрать его до того, как пришли первые мародёры? Ну, скажи мне. Последний. Выживший.\n\n– Тебе не следовало приходить к нам, бестия, – голос Гамамелиса звенел решимостью.",
        "lua_if": "function lua_if()\nbizIsAway = bizIsAway or 0\nreturn bizIsAway == 1 -- условие: орк на охоте\nend",
        "merge": true
      },
      {
        "id": 38,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- орк не на охоте\nend",
        "lua_do": "function lua_do()\nbizP = 1\nend"
      },
      {
        "id": 38,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 1 -- условие: орк на охоте\nend"
      }
    ]
  },
  {
    "id": 37,
    "text": "– Я не могу быть предателем, ведь я не был одним из вас, – зло бросил Корел и запер дверь на засов.\n\n– Хороший мальчик, – мурлыкнула девушка.\n\nКрики с улицы стали громче.\n\n– А теперь ты, – Пижма медленно приближалась к старику, который перестал суетиться и стальной хваткой сжимал трость; изгой медленно обходил его с другой стороны, – последний выживший из города Мевелшофн. У меня было много времени, чтобы обо всём догадаться. Вы не пустили меня в город, потому что знали, что я не найду там реликт. И где бы тогда я его стала искать, м? Кто мог забрать его до того, как пришли первые мародёры? Ну, скажи мне. Последний. Выживший.\n\nСнаружи постучали. Затем ещё раз, а потом удары посыпались градом. Все трое обернулись и на секунду впились взглядами в дверь.\n\n– Тебе не следовало приходить к нам, бестия, – голос Гамамелиса звенел решимостью.\n\n– С этим разберёмся позже, – кивнула Пижма на старика. – Сначала придётся подрезать болванчиков.\n\n",
    "answers": [
      {
        "id": 30,
        "text": "В этот момент постукивания прекратились, а уже в следующее мгновенье весь дом сотрясся от чудовищного удара. Дверь отлетела на дюжину шагов, едва не зашибив изгоя. В тёмном проёме замерла мощная фигура орка.\n\n– Биз, прячься! – попытался остановить его Гамамелис, но тот уже нёсся на хохочущую девушку.\n\nПижма ловко кувыркнулась через его спину. Орк пролетел мимо и неподвижно замер на полу. На его шее горели три пунцовые точки.<$2><b> Теперь его сила и опыт не помогут поселенцам в неминуемой битве.</b><$1>",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- условие: орк не на охоте\nend",
        "merge": true
      },
      {
        "id": 30,
        "text": "Стук становился всё сильнее. Затем удары стихли почти на дюжину секунд. Бух! Кажется, дверь вышибали тараном. Первый натиск она выдержала, но долго ли ещё продержится?\n\n<$2><b>Кажется, среди поселенцев сейчас не было кого-то, чей опыт мог бы существенно помочь в неминуемой битве.</b><$1>",
        "lua_if": "function lua_if()\nbizIsAway = bizIsAway or 0\nreturn bizIsAway == 1 -- условие: орк на охоте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- орк не на охоте\nend"
      },
      {
        "id": 39,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn bizIsAway == 1 -- условие: орк на охоте\nend"
      }
    ]
  },
  {
    "id": 38,
    "text": "Вдруг, как по сигналу, всё пришло в движение. ",
    "answers": [
      {
        "id": 31,
        "text": "Около дюжины человек ввалилось внутрь. Похоже, большая часть жителей оказалась слишком занята другими проблемами, требующими немедленного решения, и не пришла на штурм. <$2><b>Наверное, пожар до сих пор не потушили, да ещё и потерявшая над собой контроль Бэтти оттянула многих людей на себя.</b><$1>",
        "lua_if": "function lua_if()\n\nwaterAcces = waterAcces or 0\n\nreturn waterAcces == 0 and betAsleep == 1-- условие водокачка сломана, Бэтти спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Целая куча людей вливалась внутрь. Похоже, далеко не все жители пришли на штурм. <$2><b>Наверное, остальные ещё боролись с пожаром.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 0 and betAsleep == 0 -- условие водокачка сломана, но Бэтти не спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Целая куча людей вливалась внутрь. Похоже, не все жители пришли на штурм. <$2><b>Судя по запаху гари и копоти на лицах, с пожаром уже справились, так что остальные скорее всего были заняты усмирением потерявшей над собой контроль Бэтти.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 1 and betAsleep == 1 -- условие водокачка не сломана, а Бэтти спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Бесконечная толпа вливалась внутрь непрерывным потоком. Похоже, почти все жители поселения пришли на штурм. <$2><b>Должно быть, уже справились с пожаром, а других проблем не было.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 1 and betAsleep == 0 -- условие водокачка не сломана и Бэтти не спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": " <$2><b>Не было тут только тех, кто успел отужинать превращённой в снотворное похлёбкой</b><$1>.",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and waterAcces == 1 and betAsleep == 0 -- условие все спят, остальные не месте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": " <$2><b>Не было и тех, кто успел отужинать превращённой в снотворное похлёбкой</b><$1>.",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and not (waterAcces == 1 and betAsleep == 0)-- условие все спят, но нет не только их\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "\n\nПижма прыгала диким зверем от одного человека к другому, и те падали без чувств от незаметных, но смертельных ударов. Она извивалась змеёй, уворачиваясь от летящих стрел и ножей.\n\nКорел даже не пытался принять участие в драке. В суматохе кто-то опрокинул стол, и его вещи посыпались на пол. Изгой воспользовался неожиданным укрытием и пытался оценить обстановку.",
        "lua_if": "function lua_if()\nbizIsAway = bizIsAway or 0\nbizIsAway = bizIsAway or 0\nreturn bizIsAway == 1 -- условие: орк на охоте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "\n\nПижма прыгала диким зверем от одного человека к другому, и те падали без чувств от незаметных, но смертельных ударов. Жители пытались наброситься на неё и задавить числом. <$2><b>Орк остался в дверях и меткими одиночными выстрелами умудрялся не задевать никого из своих.</b><$1> Девушка извивалась змеёй, уворачиваясь от летящих стрел и ножей.\n\nКорел даже не пытался принять участие в драке: это было совершенно не его амплуа. В суматохе кто-то опрокинул стол, и его вещи посыпались на пол. Изгой воспользовался неожиданным укрытием и перевёл дух. Рядом оказался выроненный кем-то арбалет.",
        "lua_if": "function lua_if()\nreturn bizIsAway == 0 -- условие: орк не на охоте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Расчёт\nПижма: базовая сила 2 <plus> 2 от цветов\nТолпа: 1-4\nКорел: 1 от арбалета против толпы, 0 или 1 против Пижмы",
        "calculate": true,
        "super_calculate": false
      },
      {
        "id": 33,
        "text": "Бежать к вещам",
        "lua_if": "function lua_if()\nreturn true\nend",
        "lua_do": "function lua_do()\ntarget = 0\nend"
      },
      {
        "id": 33,
        "text": "Подобрать арбалет и стрелять в Пижму",
        "lua_do": "function lua_do()\ntarget = 2 -- Пижма\nend"
      },
      {
        "id": 33,
        "text": "Подобрать арбалет и стрелять в людей",
        "lua_do": "function lua_do()\ntarget = 1\nend"
      }
    ]
  },
  {
    "id": 39,
    "text": "– Ах, какие преданные, – закатила глаза Пижма. – Прямо как щеночки, потерявшие мамочку.\n\nОна одним движением опрокинула стол и легко подтащила его к двери. Поймав удивлённый взгляд Корела, девушка адресовала ему воздушный поцелуй.\n\nВторой удар сотряс стены домика, и изгой, замерший возле Гамамелиса, вздрогнул.\n\n– А теперь – сюрприз! \n\nВыдернув заслонку, Пижма отскочила назад. Третий удар не встретил сопротивления, и через распахнувшуюся дверь в дом вслед за тяжёлым бревном ввалилось с полдюжины человек с ножами и арбалетами. Девушка закружила между ними диким зверем, и уже через пару мгновений все лежали на полу без движения.\n\nПижма небрежно взялась за стол, и он полетел прямо в дверной проём, где, судя по звукам, поразил ещё несколько людей. ",
    "answers": [
      {
        "id": 101,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 40,
    "text": "Девушка ловко подняла с пола упавшую трость.\n\n– Наш трофей, – весело подмигнула она Корелу. – Вставай и пошли скорее, больше нам тут нечего делать.\n\nИзгой под неодобрительным взглядом Пижмы закинул в мешок те свои вещи, которые смог найти, прихватил арбалет и заткнул за пояс несколько стрел. Затем поспешил вслед за девушкой прочь, через гудящую толпу собравшихся вокруг женщин и стариков, мимо дымящегося пепелища на месте дома Иссопа и дальше в лес. Никто не пытался их задержать.\n\n   *   *   *\n\n– Вот здесь безопасно, – наконец произнесла неестественно молчавшая всю дорогу Пижма и бросила трость к корням могучего дуба. – Делить добычу будем позже, а пока я хочу тебя отблагодарить.\n\nДевушка приблизилась к Корелу так близко, что, казалось, он стал различать звук взмахов её ресниц. Её дыхание стало глубоким и неровным. Она необычайно нежно обхватила его голову под волосами длинными пальцами и притянула к своему лицу. Первый робкий поцелуй обжёг губы изгоя, затем всё смешалось и перепуталось. Все мысли исчезли, остался лишь вкус соли и крови, да стук чужого сердца где-то совсем рядом.",
    "answers": [
      {
        "id": 41,
        "text": "Поддаться поцелую",
        "lua_do": "function lua_do()\nlooser = 1\nend"
      },
      {
        "id": 41,
        "text": "Предать и забрать реликт",
        "lua_do": "function lua_do()\nlooser = 2\nend"
      },
      {
        "id": 40,
        "text": "small",
        "url": "https://i.ibb.co/VBjrDCH/IMG-20231125-121931.png"
      }
    ]
  },
  {
    "id": 41,
    "text": "empty",
    "answers": [
      {
        "id": 41,
        "text": "После секундного замешательства Корел сумел взять себя в руки. В его ремесле эмоции и привязанности – непозволительная слабость.\n\nОн поддался напору девушки, но уже осознанно. Обвил руками её талию, прижал к себе. Провёл ладонью по спине. И наконец уколол шею арбалетной стрелой.\n\nПижма дёрнулась, попыталась отстраниться. В её глазах удивление сменилось пониманием, затем восхищением. И лишь в конце в них отразился страх. Сегодня её переиграли.\n\nРасчёт изгоя оказался верным, и сонный яд подействовал почти мгновенно. Корел прислонил бесчувственное тело к дереву, перевязал рану на шее платком, подобрал трость. Сама говорила, что здесь безопасно.\n\nПутать следы он умел. Теперь нужно успеть уйти как можно дальше. Уже сделав несколько шагов, Корел обернулся. На губах застыл вкус соли и крови. Вкус предательства.\n\n☆ Открыта концовка «Вкус предательства»  ☆",
        "lua_if": "function lua_if()\nreturn looser == 2 -- условие предал пижму\nend",
        "merge": true
      },
      {
        "id": 41,
        "text": "После секундного замешательства Корел отмёл все сомнения и позволил страсти поглотить остатки разума.\n\nОн поддался напору девушки: обвил руками её талию, прижал к себе. Провёл ладонью по спине. И наконец почувствовать, как её ногти до крови впились в его шею.\n\nПижма отстранилась.\n\n– Прости, сладкий, – шепнула она нежно. – Если ты доверился мне, значит не заслуживаешь приза. И значит, ещё не всё потеряно для тебя.\n\nСлабость волнами разливалась по уставшим мышцам изгоя. \"Сонный яд!\" – запоздало догадался он. Девушка аккуратно уложила Корела у дерева, поцеловала в лоб. Веки тяжелели, и он проваливался в сон. Его переиграли, он упустил потухший реликт.\n\n– Здесь безопасно, – повторила Пижма и ушла.\n\nТолько вкус соли и крови застыл на губах Корела.\n\n\n✮ Открыта концовка «Не всё потеряно» ✮",
        "lua_if": "function lua_if()\n\nreturn looser == 1 -- условие поддался поцелую\nend",
        "merge": true
      },
      {
        "id": 1,
        "text": "Конец"
      },
      {
        "id": 2,
        "newAnswerImage": [
          "https://i.ibb.co/zn72wnf/Lumii-20240508-154614653.png"
        ],
        "comment": true,
        "text": "   "
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\ng.endings = g.endings or {}\n\nif looser == 2 then\ng.endings.traits = 1\nelseif looser == 1 then\ng.endings.traited = 1\nend\n\n\nif looser == 2 then\ng.endings.traits = 1\nelseif looser == 1 then\ng.endings.traited = 1\nend\nend",
        "text": "Новый ответ. введите текст",
        "id": 41,
        "calculate": true
      }
    ]
  },
  {
    "id": 42,
    "text": "empty",
    "answers": [
      {
        "id": 42,
        "text": "Корел собрал всю пропавшую еду в большой мешок, выволок его на улицу и оставил у стены недалеко от входа.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 1\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Изгой собрал разбросанные по полу инструменты в одну большую кучу в углу комнаты, так что они больше не угрожали ушибить незадачливому посетителю ногу.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 2\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Корел компактно сложил на столе стопкой грязные тарелки, аккуратными рядами расставил кружки и в несколько из них запихнул металлические столовые приборы.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 3\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Собрав огромную гору каких-то провонявшихся тряпок со стола, изгой с удивлением обнаружил за ними небольшую полочку на стене. Мусор отправился в мешки на улице, и Корел остановился перевести дух.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 4\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "На подоконнике тоже пряталась инструменты и детали. Корел чуть не смахнул их просто на пол, но в последний момент передумал и выложил их на полурасчищенном столе. ",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 5\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Изгой начал разбирать один из больших завалов хлама в центре комнаты и с удивлением обнаружил внутри него два крепких стула, которые и создавали основной объём. Корел отправил мебель к столу, а остатки хлама раскидал по другим таким же завалам.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 6\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Как изгой и ожидал, в сердце следующей горы из вещей тоже оказалась массивная мебель. Освобожденная этажерка, видимо, когда-то как нельзя лучше подходила для хранения всякого добра, поэтому Корел перетащил её к одной из свободных стен.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 7\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "А вот последняя куча, изрядно окрепшая от сваленных в неё остатков первых двух, внутреннего стержня не имела и честно состояла целиком из мусора и всевозможных деталей невообразимых приборов. Выравнивание этого завала вновь превратило пол комнаты в непроходимую полосу препятствий с еле различимыми чистыми тропками между дверями.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 8\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "На заполнение нижней полки этажерки самыми крупными запчастями ушло неприлично много времени. Очень уж нелегко было изгою понять, какой удивительный экспонат заслуживает оказаться там, а какой – в мусорном мешке за дверью.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 9\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "С двумя средними полками оказалось не проще. Хотя бы условно нужные вещи не только более убедительно притворялись хламом, но и наотрез отказывались размещаться компактно. Наполнив доверху ещё один мешок, Корел сделал небольшой перерыв.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 10\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Две верхние полки во всём пытались походить на своих нижних родственников. В добавок к прошлым напастям, вещи с них то и дело норовили вывалиться. После очередного неосторожного движения изгоя какая-то шкатулка отправилась в свой последний полёт с самого верха и раскололась на несколько частей. Кроме паутины и нескольких засохших мух внутри ничего не оказалось, поэтому Корел скрепя сердце отправил всё в мусор.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 11\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Разбор оставшихся мелких вещей был долгим и утомительным. Часть из них разместилась на полке над столом, другая ждала своей участи на одном из стульев.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 12\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Почувствовав вдохновение и прилив сил, Корел подставил свободный стул к переполненной этажерке и очень медленно перенёс оставшиеся мелкие вещи на её верхнюю крышку. Оттуда, конечно, уже ничего не достать без лестницы, но с каждой минутой интуиция изгоя всё громче кричала, что искать здесь никто и ничего не будет.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 13\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Раздобыв в соседней комнате метлу, Корел как следует прошёлся по всему полу, чихая и кашляя от разлетающейся пыли. Сквозняк из распахнутой настежь двери только усугублял ситуацию.\n\nИзгой осмотрел результат излишне долгой работы: комнату было не узнать. Оставалось только разобраться со всем собранным мусором...",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 14\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Куда местные выбрасывают мусор, Корел не знал. Не найдя поблизости от дома никого, кто мог бы помочь с этим вопросом, он решил перетащить всё к лесу. Он уже выбился из сил и волок последний мешок, когда неожиданно встретил у самой кромки леса Иссопа. Тот объяснил, что весь мусор сжигали в большой печи возле дома Аконита, а остатки перебирали и использовали для выплавки разной утвари.\n\nТолько вернув всё обратно к дому, Корел заметил, как низко уже опустилось солнце. Похоже, он потратил кучу времени на дело, которое скорее всего никто даже не заметит.\n\nИзгой стоял в совершенно чистой комнате. В ней не было больше ничего, что ещё можно было бы убрать. Теперь только и оставалось, что позвать хозяина.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning == 15\nend",
        "merge": true
      },
      {
        "id": 42,
        "text": "Продолжить уборку",
        "lua_if": "function lua_if()\nreturn cleaning < 15 and restTime > 0\nend",
        "lua_do": "function lua_do()\ncleaning = cleaning <plus> 1\nif cleaning == 14 then\nrestTime = restTime - 4\nelseif cleaning > 8 then\nrestTime = restTime - 3\nelseif cleaning > 3 then\nrestTime = restTime - 2\nelse restTime = restTime - 1\nend\n\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn restTime > 0 or cleaning == 15\nend",
        "lua_do": "function lua_do()\n--diaClean()\nend",
        "text": "Позвать Аконита",
        "id": 91,
        "no_transition": false
      },
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_if": "function lua_if()\nreturn cleaning <15\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 43,
    "text": "– Хорошо, сегодня можешь быть свободен, – так же безэмоционально продолжил голос. – Завтра приходи пораньше.\n\nКорел опешил. Как это – \"завтра\"? Он твёрдо намеревался покинуть это место и продолжить миссию, а не хозяйничать в доме какого-то умника до конца дней.\n\n",
    "answers": [
      {
        "id": 43,
        "text": "– А врать – плохо! – высунулась из-за другой двери мордочка в белом венке. – Ты плохой или хороший, чужак?\n\n– Ну... – замялся Корел, припоминая все свои поступки, которые очевидно не вписывались в рамки детского представления о хорошем.\n\n– Дядя Карамелис говорит, что почти все люди хорошие, – девочка вынырнула наружу целиком и закрутилась перед небольшим пыльным зеркалом, поднимая юбку волнами. – Даже чужаки.\n\n– Ну, значит я тоже хороший, – легко согласился изгой. – Я Корел. А тебя как зовут?\n\n– Роузи, – она сделала неуклюжий реверанс и чуть не споткнулась. – Вот и тётя-бестия тоже хорошая, она мне красивые венки плетёт. А дядя Гадкоперец говорит, что плохая.\n\nКорел прыснул.\n\n– Как же она тебе плетёт венки, если в темнице сидит?\n\n– Так её же не охраняют, – развела руками Роузи и сквозь смех добавила: – А дядя Иссоп в кустики всё время бегает. Вот я и спускаюсь к ней, пока никого нет. Ей нравятся белые цветы – чароцветы. Она говорит, что я в них очаровательна. Правда?\n\nОна крутанулась и наклонила голову. Изгой одобрительно закивал, внимательно рассматривая цветы в волосах ребёнка.",
        "lua_if": "function lua_if()\ncleaning = cleaning or 1\nreturn cleaning < 15\nend",
        "merge": true
      },
      {
        "id": 43,
        "text": "– Ого, ты правда всё тут вычислил?! – высунулась из-за другой двери мордочка в белом венке. – А я всё время вру, что уже убрала, а он и не замечает. Хотя я знаю, что врать плохо... А ты плохой или хороший, чужак?\n\n– Ну... – замялся Корел, припоминая все свои поступки, которые очевидно не вписывались в рамки детского представления о хорошем.\n\n– Дядя Карамелис говорит, что почти все люди хорошие, – девочка вынырнула наружу целиком и закрутилась перед небольшим пыльным зеркалом, поднимая юбку волнами. – Даже чужаки.\n\n– Ну, значит я тоже хороший, – легко согласился изгой. – Я Корел. А тебя как зовут?\n\n– Роузи, – она сделала неуклюжий реверанс и чуть не споткнулась. – Вот и тётя-бестия тоже хорошая, она мне красивые венки плетёт. А дядя Гадкоперец говорит, что плохая.\n\nКорел прыснул.\n\n– Как же она тебе плетёт венки, если в темнице сидит?\n\n– Так её же не охраняют, – развела руками Роузи и сквозь смех добавила: – А дядя Иссоп в кустики всё время бегает. Вот я и спускаюсь к ней, пока никого нет. Ей нравятся белые цветы – чароцветы. Она говорит, что я в них очаровательна. Правда?\n\nОна крутанулась и наклонила голову. Изгой одобрительно закивал, внимательно рассматривая цветы в волосах ребёнка.",
        "lua_if": "function lua_if()\nreturn cleaning >14\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nmeetRosy = 1\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 43
      },
      {
        "id": 44,
        "text": "Дальше",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 44,
    "text": "– Как думаешь, Аконит не рассердится, если я зайду к нему?\n\n– Нет, конечно. Ты мог бы сразу зайти, не пытаясь здесь убирать, – пожала плечами Роузи. – А то он вечно занят, сразу забывает обо всём, что сам говорит.\n\nДевочка ещё немного покрутилась перед зеркалом, то так, то эдак собирая волосы, и когда изгой проходил мимо неё к двери, как будто невзначай бросила:\n\n– Вот бы у меня была какая-нибудь красивая заколка... Или волшебное кольцо... Или хоть что-то красивое... А у тебя нет чего-нибудь?\n\nКорел, отродясь не носивший украшений, развёл руками. Про то, что его личные вещи отобрали, он говорить не стал. Девочка глубоко вздохнула, утёрла кулачком несуществующую слезинку и юркнула обратно за дверь.\n\nСтучать изгой не стал и просто вошёл туда, откуда доносились ритмичные позвякивания и редкие скрипы. Умника он застал, задумчиво раскачивающимся на высоком стуле с какой-то непонятной железкой в руках. «Бряк!» – со знакомым звуком опустились ножки стула прямо на ворох деталей, раскиданных по полу.\n\nАконит оказался совсем молодым парнем с веснушками по всему лицу и копной длинных волос. Тяжёлый кожаный передник, прикрывающий всё тело до колен, висел на нём как на пугале.\n\n– А, чужак, – со скучающим видом отметил хозяин дома. – Извини, я сейчас очень занят: нужно починить одну деталь, а у меня пока не выходит... ",
    "answers": [
      {
        "id": 45,
        "text": "Дальше",
        "lua_do": "function lua_do()\nseenAkonit = 1\nend"
      }
    ]
  },
  {
    "id": 45,
    "text": "– Похоже, тебе это не очень интересно, – кивнул Корел на разбросанные вокруг делали.\n\nАконит удивлённо приподнял брови и уже собирался что-то сказать, но передумал и лишь тяжело вздохнул.\n\n– Меня особо не спрашивали, хочу ли я этим заниматься, – наконец сказал он. – Раз читать умею – значит умник. А раз умник – занимайся делами для умников.\n\nОн слез со стула и начал расхаживать по комнате.\n\n– Болванки для стрел в печи выплавить – это к умнику, – начал загибать он пальцы. – Сонный яд для охотников приготовить – это к умнику. Колодец сломался и нужно починить – это к умнику.\n\n– Как это «колодец сломался»? – удивился изгой.\n\n– Ну не сам колодец, а специальный механизм, чтобы воду без вёдер и верёвок поднимать. Он тут ещё до нас был у прежних жильцов. Но разве виноват я, что забыл, как разбирал его, а теперь собрать не могу? Поди этим объясни...\n\n– Помочь тебе с ним? Мне как раз нужно, чтобы кто-то замолвил за меня словечко перед Гамамелисом сегодня вечером...\n\n– А ты в таком разбираешься? – оживился Аконит. – Ну если сможешь собрать, то я в долгу не останусь.",
    "answers": [
      {
        "id": 46,
        "text": "Осмотреть детали",
        "lua_if": "function lua_if()\nmechanics = mechanics or 0\nreturn mechanics == 1 and restTime > 0-- условие базовые знания механики\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 6\nend"
      },
      {
        "id": 47,
        "text": "Спросить про сонный яд",
        "lua_if": "function lua_if()\nknowBetNeedRest = knowBetNeedRest or 0\nreturn knowBetNeedRest == 1 and getTheSed == 0 and restTime > 0\nend",
        "lua_do": "function lua_do()\n\nchamaenerion = chamaenerion or 0\n\ngetTheSed = 1\nrestTime = restTime - 1\nseenTheCharmflowers = 1\nchamaenerion = chamaenerion < 2 and 1 or chamaenerion\nend"
      },
      {
        "id": 51,
        "text": "Спросить про чароцветы",
        "lua_if": "function lua_if()\nreturn seenTheCharmflowers == 1 and knowCharmflowersAreMagic == 1 and knowNoMagicPosition == 1 and restTime > 0\nend"
      },
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      },
      {
        "id": 45,
        "text": "\n\nКорел чувствовал, что паренёк не так прост, как хочет показаться. Может быть, удастся использовать это в своих интересах? Пока паззл не сходился – не хватало какой-то незначительной детали, чтобы ловушка для умника захлопнулась.",
        "lua_if": "function lua_if()\nreturn not (seenTheCharmflowers == 1 and knowCharmflowersAreMagic == 1 and knowNoMagicPosition == 1 and restTime > 0)\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 46,
    "text": "Под пристальным взглядом Аконита, изгой стал раскладывать детали неизвестного механизма на полу перед собой. Если бы не недавно приобретённые знания, он бы в жизни не догадался, для чего здесь столько странных железок.\n\nНо отбросив сомнения, Корел принялся творить. Так и эдак перемещал длинные трубки и массивные шестерни, пристраивал ремни, несколько раз менял направление немного погнувшегося винта. Умник наблюдал недоверчиво, хмыкая и цокая языком каждый раз, когда изгой заходил в тупик и начинал сначала.\n\nНо уже с четвёртой попытки в руках Корела оказался исправный механизм, отвечающий на поворот большого рычага вращением винта в нужную сторону. К установке этого чуда техники в скважину раздражённый Аконит изгоя не подпустил. Лишь сердито буркнул:\n\n– Спасибо за помощь, чужак. Я передам Гамамелису, что восхищён твоим усердием, и всё такое.",
    "answers": [
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nakonitEnd = 1\nwaterAcces = 1\napproved = (approved or 0) <plus> 1\n\nif achieveMech == 1 then\nnewAchieve(\"mech\")\nend\n\nend"
      }
    ]
  },
  {
    "id": 47,
    "text": "– Сонный яд тоже ты готовишь? – начал издалека Корел.\n\n– Да, это одно из немногих дел, которые хоть немного интересны, – оживился Аконит. – У меня тут настоящая лаборатория только для того, чтобы я смешивал отвары из корешков.\n\nОн распахнул боковую дверь и изгой увидел комнату, в которую заглядывал через окно. Столы были завалены пахучими травами: мята, что-то пряное, что-то хвойное, какие-то незнакомые цветы и уже знакомые Корелу чароцветы в самом углу.\n\n– Этот простой рецепт для меня раздобыл Гамамелис, – рассказывал умник, показывая гостю какую-то запись в рукописи. – Но если просто заваривать кипрей в воде, выходило очень уж слабым. А зверя на охоте ведь не уговоришь выпить кружечку снотворного. Пришлось повозиться и подыскать секретный ингредиент, чтобы яд действовал наверняка.\n\n– Кипрей? – рассеянно переспросил Корел, и умник в ответ показал на веточки с розовыми цветами на столе.\n\nПотом Аконит проследил за направлением взгляда изгоя, всё ещё силящегося вспомнить названия остальных растений в куче, и стушевался. Спешно захлопнул рукопись и подтолкнул изгоя к выходу.\n\n– А почему ты вообще про него спрашиваешь? – его интонации вновь стали холодными и резкими.\n\n– Хотел попросить немного снотворного. Для Бэтти. Знаешь, у неё бессонница.\n\n– Ах, бедняжка Бэтти, – запричитал умник, запирая дверь в лабораторию на замок. – Кажется, я даже делал для неё специальное снотворное, вот только не могу вспомнить... Сейчас посмотрю...\n\nОн снова полез ковыряться с ключом, юркнул за дверь и заперся с той стороны. Шум изнутри оставлял Корелу надежду, что Аконит в самом деле предался поискам снотворного, а не просто спрятался, чего-то испугавшись. Наконец он появился, держа в руках флакон с бесцветной жидкостью.\n\n– Нужно развести водой или добавить в еду, – деловито объяснил умник. – Бэтти знает.\n\nИзгой поблагодарил его и спрятал снотворное в складках одежды.",
    "answers": [
      {
        "id": 45,
        "text": "Новый ответ. введите текст",
        "run": [
          45
        ]
      },
      {
        "id": 47,
        "text": "Укажите команды для картинки",
        "url": "https://i.ibb.co/1KRQsG1/IMG-20231125-122338-1.png"
      }
    ]
  },
  {
    "id": 48,
    "text": "Вновь оказавшись в просторной передней, он ужаснулся: сколько же времени понадобится, чтобы вычистить эту комнату? И сколько времени нужно было мусорить, чтобы довести её до такого состояния?",
    "answers": [
      {
        "id": 48,
        "text": "\n\nВновь оказавшись в просторной передней, он ужаснулся: сколько же времени понадобится, чтобы вычистить эту комнату? И сколько времени нужно было мусорить, чтобы довести её до такого состояния?",
        "merge": true
      },
      {
        "id": 42,
        "text": "Заниматься уборкой",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\ncleaning = (cleaning or 0) <plus> 1\nend"
      },
      {
        "lua_do": "function lua_do()\n\nrestTime = restTime - 1\n\n--[==[dialog({header = \"\", text = [=[– Эй! – снова крикнул Корел.\n\n– Уже закончил с уборкой? – отозвался хозяин дома из-за двери справа.]=], answers = {{text = \"Ещё нет\", pressListener = function()\ncleaning = cleaning <plus> 1\nif cleaning == 14 then\nrestTime = restTime - 4\nelseif cleaning > 8 then\nrestTime = restTime - 3\nelseif cleaning > 3 then\nrestTime = restTime - 2\nelse restTime = restTime - 1\nend\nshowPage{id = 42} hideDialog() end}, {text = \"Да\", pressListener = function() showPage{id = 43} hideDialog() end}}})]==]\nend",
        "text": "Позвать Аконита",
        "id": 91,
        "no_transition": false
      },
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 49,
    "text": "Корел направился прямиком в комнату Аконита. Умник никак не отреагировал на его появление и продолжил меланхолично раскачиваться на и стуле.",
    "answers": [
      {
        "id": 49,
        "text": " Он направился прямиком в комнату Аконита. Умник никак не отреагировал на появление гостя и продолжил меланхолично раскачиваться на стуле.",
        "merge": true
      },
      {
        "id": 45,
        "text": "Новый ответ. введите текст",
        "run": [
          45
        ]
      }
    ]
  },
  {
    "id": 50,
    "text": "– Я был в лесу и нашёл там эти фрукты, – немного смутившись начал Корел. – Не стал показывать Бизу, но может на кухне пригодятся?\n\n– А ну, дай посмотрю, – старушка оторвалась от своего занятия и взглянула в мешок, который распахнул перед ней изгой.\n\n– Ну и ну, – развеселилась Бэтти. – Диких груш набрал.\n\n– Несъедобные? – насупился Корел. – Я видел, птицы их клевали.\n\n– Да съедобные, съедобные, – хохотнула кухарка. Только ты их сам не ешь, да другим не давай. А то будешь как старшой наш, Иссоп, по кустам весь день бегать.",
    "answers": [
      {
        "lua_do": "function lua_do()\nbetAsleep = 1\ngetTheSed = 10 -- used\nend",
        "text": "Подмешать снотворное в кувшин с водой",
        "lua_if": "function lua_if()\nreturn restTime < 15 and restTime >= 5 and getTheSed == 1 and chamaenerion <10\nend",
        "id": 55
      },
      {
        "lua_do": "function lua_do()\nbetAsleep = 1\nchamaenerion = 10 -- used\nend",
        "text": "Незаметно бросить кипрей в кастрюлю",
        "lua_if": "function lua_if()\nreturn restTime < 40 and restTime >= 20 and knowBetNeedRest == 1 and chamaenerion == 2 and getTheSed <10\nend",
        "id": 56
      },
      {
        "id": 57,
        "text": "Признаться в попытке усыпить",
        "lua_if": "function lua_if()\n\ncanCancelBet = canCancelBet or 0\nbetAsleep = betAsleep or 0\n\nreturn canCancelBet == 1 and betAsleep == 1\nend",
        "lua_do": "function lua_do()\nbetAsleep = 0\nend"
      },
      {
        "comment": true,
        "lua_do": "function lua_do()\nbetAsleep = 1\nend",
        "text": "Не получится бросить кипрей в кастрюлю на глазах у Бэтти",
        "id": 54,
        "lua_if": "function lua_if()\nreturn not (restTime < 40 and restTime >= 20) and chamaenerion == 2\nend"
      },
      {
        "id": 54,
        "text": "\n\nНе получится подмешать снотворное на глазах у Бэтти.",
        "lua_if": "function lua_if()\nreturn not (restTime < 15 and restTime >= 5) and getTheSed == 1\nend",
        "merge": true
      },
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nlocal a = skipKitchenScene or 0\nlocal b = a == 0 and 1 or 4\nrestTime = restTime -  b\nskipKitchenScene = 0\nend"
      }
    ]
  },
  {
    "id": 51,
    "text": "– Там, в лаборатории я видел цветы, – осторожно начал Корел.\n\nАконит чуть не грохнулся со стула.\n\n– У меня там много трав и цветов...\n\n– Такие красивые белые цветы с тонкими лепестками. Чароцветы, кажется, верно?\n\n– Хм... Не думаю, чтобы они могли там оказаться... Чароцветы – очень редкие растения... Наверное, ты перепутал...\n\nУмник перестал качаться, встал и затеребил что-то в кармане передника. Корел не сомневался, что ключ.\n\n– Уверен, что не перепутал. Наверное, волшебные цветы здорово действуют на твои зелья. Не боишься, что Гамамелис узнает?\n\n– Я не... Он... Ты же...",
    "answers": [
      {
        "id": 52,
        "text": "Попросить чароцветы"
      },
      {
        "id": 53,
        "text": "Шантажировать"
      }
    ]
  },
  {
    "id": 52,
    "text": "– Нет, я не расскажу старику, – Корел участливо похлопал парня по спине, от чего тот закашлялся. – Я просто хотел попросить у тебя несколько штук, раз уж тебе они всё равно не нужны.\n\n– А за... – промямлил Аконит, но вовремя понял намёк. – Да, да, конечно. А знаешь, забирай все. Мне их принесли случайно вместе с другими травами, но они абсолютно бесполезны для моих опытов. Сейчас...\n\nОн долго пытался открыть замок трясущимися руками, забежал в лабораторию и быстро выскочил из неё с мешком в руках.\n\n– Спасибо, что помог мне от них избавиться, – в голос умника вернулась уверенность, – а то мне самому совершенно некогда.\n\nКорел поблагодарил Аконита и пообещал, что больше не станет его беспокоить.",
    "answers": [
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nakonitEnd = 1\ncharmFlowers = 2\nend"
      }
    ]
  },
  {
    "id": 53,
    "text": "– Нет, я не расскажу старику, – Корел участливо похлопал парня по спине, от чего тот закашлялся. – Как я смогу рассказать, если уже завтра на рассвете отправляюсь в путь и больше никогда вас не увижу? Уверен, кто-нибудь сможет поручиться, что меня стоит отпустить...\n\n– И я абсолютно уверен в том же, – быстро уловил суть умник. – Я передам Гамамелису, что твои внимательность и усердие говорят о тебе, как о заслуживающим доверия человеке.\n\n– Рад, что мы остались довольны друг другом. Я тебя больше не побеспокою.",
    "answers": [
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\napproved = (approved or 0) <plus> 1\nrestTime = restTime - 1\nakonitEnd = 1\nend"
      },
      {
        "super_calculate": false,
        "id": 21,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\nblackmailBiz = blackmailBiz or 0\nblackmailAkonit = 1\nbetAsleep = betAsleep or 0\n\nif blackmailBiz <plus> blackmailAkonit <plus> betAsleep == 3 then\nnewAchieve(\"talking\")\nend\n\nend"
      }
    ]
  },
  {
    "id": 54,
    "text": "empty\nНужны:\n• знание, что чароцветы волшебные\n• навык механики\n• что-то с фруктами\n• знание о бессонице\n• возможность подмешать снотворное\n• одобрение после первого визита\n•\n•\n•",
    "answers": [
      {
        "id": 54,
        "text": "Корел добрался до домика кухарки и постучал в дверь.\n\n– Заходи, чужак, – тут же донёсся изнутри задорный голос.\n\nВнутри оказалась жарко. У очага стояла спиной к двери худощавая старушка с длинными седыми волосами. Она ворожила над дюжиной котелков и огромной сковородой: мешала одно, солила другое, меняла местами третье и четвёртое. Оборачиваться к гостю ей было просто некогда.\n\nВ другой части комнаты стоял огромный стол, заставленный чистой и грязной посудой. За ним притаилась маленькая незаметная дверца, как будто в чулан, вот только закрытая сразу на несколько тяжёлых замков и большой засов впридачу.\n\n",
        "lua_if": "function lua_if()\nbetVisit = betVisit or 1\nreturn betVisit == 1 -- условие первый визит к кухарке\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Корел вернулся к дому Бэтти, постучал и вошёл внутрь. Большая кухня кипела.\n\n",
        "lua_if": "function lua_if()\nreturn betVisit > 1 -- условие повторные визиты к кухарке\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Бэтти черпала воду из бочки в большой чан и даже не обернулась.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 45\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Кухарка суетилась над кипящим чаном, закидывая в него нарезанные овощи, какие-то коренья и травы. Издалека варево было похоже на маленькое бурлящее болото.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 40 and restTime < 45\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Хозяйка склонилась над разделочным столом и огромным ножом резала мясо. Когда очередная порция плюхалась в бездонный таз рядом с очагом, Бэтти, щурясь, придирчиво осматривала следующий крупный кусок.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 35 and restTime < 40\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "На полу возле Бэтти громоздился странный агрегат. Она методично закидывала в него сырое мясо и овощи. Затем несколько раз поворачивала длинный рычаг и вновь загружала продукты.\n\nКухарка, не отвлекаясь от дела, объяснила изгою, что стянула прибор из лаборатории Аконита. Созданный, видимо, для измельчения алхимических ингредиентов, он как будто ещё лучше подходил для приготовления пищи.\n\nКогда пришло время разбирать и мыть прибор, наконец-то понадобилась помощь Корела. Бэтти вернулась к очагу и не глядя комментировала все действия изгоя. Отмыв наконец все трубки, винты, шестерни и лезвия, Корел почти разобрался, как это загадочное устройство работает.\n\n",
        "lua_if": "function lua_if()\n\nachieveMech = achieveMech or 0\n\nif restTime >= 25 and restTime < 30 and betVisit > 2 then\nskipKitchenScene = 1\nmechanics = 1\nachieveMech = achieveMech < 0 and 0 or 1\nend\n\nreturn restTime >= 25 and restTime < 30 and betVisit > 2\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Едва Корел переступил порог, он увидел влезающую через окно прямо на обеденный стол девчонку с белыми цветами в волосах.\n\n– Опять за булками полезла, бездельница?! – не поворачиваясь разразилась кухарка.– Вот я тебя...\n\nМаленькая воровка зашипела, как кошка, и бросилась назад в окно, сжимая в зубах кусок хлеба.\n\n– Опять пойдёт пленницу подкармливать, – вздохнула Бэтти. – Чтобы та ей венки плела. Из чароцветов. Как будто мало у нас бед без волшебных цветов...\n\nТочно, как можно было не понять сразу? В голове Корела наконец-то сложились в понятную картину все мельком замеченные факты. Чароцветы – те самые цветы с магической пылью, о которых грезят все стоящие алхимики. Но откуда взяться живым чароцветам в этом захолустье, да ещё и у ребёнка?\n\nКухарка сплюнула через плечо, утёрла лоб рукой и вернулась к стряпне, ещё долго продолжая сетовать.\n\n",
        "lua_if": "function lua_if()\n\nif restTime >= 30 and restTime < 35 then\nskipKitchenScene = 1\nend\n\nreturn restTime >= 30 and restTime < 35 and betVisit > 2\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Бэтти возилась у очага с огромной сковородой. Запах жареного мяса и пряностей приятно щекотал ноздри.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 20 and restTime < 25\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Хозяйка дома медленно покачивалась над огромным парящим чаном, промешивая густое варево.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 15 and restTime < 20\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Пока кухарка полоскала посуду в небольшой кадке у бочки с водой, чан с похлёбкой медленно остывал возле очага.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 10 and restTime < 15\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Корел даже удивился, что не увидел старушку возле очага, где медленно остывал ужин для всего поселения. Но сразу успокоился: Бэтти протирала обеденный стол и возилась с чистой посудой.\n\n",
        "lua_if": "function lua_if()\nreturn restTime >= 5 and restTime < 10 and betVisit > 1\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "Всё помещение было заполнено людьми. Кто-то уплетал еду за столом, кто-то – стоя рядом. По мискам нестройно стучали деревянные ложки. Корел долго не мог понять, какая неестественная деталь не увязывалась с обычным состоянием помещения. И вдруг понял: Бэтти наконец-то отдыхала. Она пристроилась на лавке у самой двери и, как и изгой, наблюдала за людьми.\n\n",
        "lua_if": "function lua_if()\nreturn restTime < 5 and betVisit > 1\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Меня зовут Корел, – представился изгой. – Мне сказали, что я могу помочь...\n\n– Я Бэтти, – простодушно отозвалась старушка. – Садись для начала за стол да поешь. Небось давно голодный ходишь.\n\nОна бодро махнула рукой в сторону стола, и Корел легко согласился с этой просьбой. Бэтти тут же плеснула в миску густой похлёбки и поставила перед гостем. Изгой чуть не ахнул.\n\nКухарка была живым воплощением фразы \"страшна, как смерть\". Худое морщинистое лицо, крючковатый нос, острые коричневые зубы. Под припухшими красными глазами синяки. Бэтти быстро отвернулась и убежала назад к своей стряпне, оставив Корела переваривать впечатления. Впрочем, еда оказалась превосходной.\n\n– Сейчас помощь не нужна, – сказала кухарка, когда гость перестал стучать ложкой. – Заходи ещё как-нибудь.",
        "lua_if": "function lua_if()\nreturn betVisit == 1\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– А, вернулся, дружок, – усмехнулась кухарка. – Как тебя перекосило тогда – я уж подумала, в лес убежишь. Не в твоём я вкусе оказалась? Да ты поживи с моё, и не таким красавцем станешь.\n\nКорел смутился.\n\n– Да нет, я же не...\n\n– Брось, чужак. Есть в жизни проблемы и пострашнее меня. Я вот не сплю уже неделю, сил нет.\n\n– Бессонница?\n\n– Она самая, да, – смутившись, согласилась кухарка. – На вот, выплесни воду из этого ведра во двор, и будем в расчёте: скажу Гамамелису – золотой он человек – чтоб отпустил тебя.\n\n– И всё?\n\n– И всё. Но можешь ещё зайти, коли заскучаешь.\n\nКорел быстро выполнил просьбу кухарки. Да, заручиться её поддержкой оказалось совсем несложно.",
        "lua_if": "function lua_if()\n\nreturn betVisit == 2\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Ага, вернулся, – весело отметила кухарка, не оборачиваясь. – Проголодался? Али гложит тебя что-то?\n\n– Второе. Я всё понять не могу...\n\n– Почему я так запросто за тебя поручиться готова? Да просто я людей насквозь вижу, – она даже подняла палец для выразительности, хотя поворачиваться не стала. – Ну и Гамамелис – золотой человек – абы кому гулять по селу не позволяет.\n\n– Тогда зачем...\n\n– Зачем проверка? – рассмеялась старушка. – Наверное, чтобы ты с нами познакомился, быт наш посмотрел, да решил, по душе тебе это всё али нет. Авось сам захочешь с Аконитом сонный яд для стрел готовить или с Бизом по лесу дичь выслеживать.",
        "lua_if": "function lua_if()\nreturn betVisit == 3\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Ох, дружок, – запричитала кухарка. – Может хоть на тебя наша бездельница переключится. Ты парень видный, интересный... А то девочка-то с пленницей сдружилась, ох, не к добру. Что еду ей носит – ещё ладно, а вот цветы-то волшебные, как бы чего не вышло из-за них.\n\n\"Волшебные цветы – это про чароцветы\", – отметил Корел. Интересно, что они делают в поселении изгоев?",
        "lua_if": "function lua_if()\nreturn betVisit == 8\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– А хорошо, что ты ко мне заходишь, милый, – кокетливо улыбнулась кухарка, на секунду отвлекшись от готовки. – А то знаешь, порой, когда дел мало, как сейчас, всё нет-нет, да и вспоминаю былое. И так одиноко становится, хоть волком вой. Эх...\n\nОна взяла с подоконника небольшой кувшин и отпила прямо из него.",
        "lua_if": "function lua_if()\nreturn betVisit == 4\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Ты-то сам как к магии относишься? – вдруг строго спросила кухарка. – У нас ведь тут с этим строго, ни-ни-ни. Старик Гамамелис – золотая душа – очень уж о безопасности нашей печётся. Всё продумал, даже артефактов простеньких не держим. Волшебство, говорит, след оставляет, даже такое малое.\n\n– Я тоже колдовство не люблю, – согласился Корел.",
        "lua_if": "function lua_if()\nreturn betVisit == 5\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Хороший ты человек, дружочек милый, – мечтательно протянула кухарка. – Я таких много встречала: весь угрюмый, да сложный снаружи, а внутри – потерянная душа. А сердце то доброе, честное. Уж сколько бед успевают наворотить, пока с собой не разберутся. Ты, главное, сердце своё слушай, оно у тебя мудрое.\n\nКорел невесело ухмыльнулся. Ага, как же, нашла доброго человека...",
        "lua_if": "function lua_if()\nreturn betVisit == 6\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Тьфу ты ну ты! – неожиданно выругалась кухарка. – Зажмуриться, зажмуриться-то я забыла, когда с тобой, незнакомцем, говорила.\n\n– Тоже мне беда, – хмыкнул изгой. – Я сам никогда не зажмуриваюсь и ничего, жив-здоров до сих пор.\n\n– Ой, что ты, что ты! Плохая примета это, недобрая. Быть теперь беде сегодня, большой беде. Я такие вещи всегда чувствую...",
        "lua_if": "function lua_if()\nreturn betVisit == 7\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Аааагх, – широко зевнула кухарка, – ой-ой-ой, седая голова... Не сегодня, только не сегодня.\n\n– Что \"не сегодня\"? – удивился Корел.\n\n– Спать, конечно. Очень уж хочется, да сегодня нельзя. Попробуй с неделю глаз не смыкать, поймёшь. Да Гамамелис – золотые руки его – говорит, что нельзя мне ещё.\n\n– Как так? – совсем растерялся изгой. – А бессонница?\n\n– Да нет у меня бессонницы, – сплюнула старуха. – А только спать я всё равно не могу. Проклята я. Пока сплю, Зверь моими руками страшные вещи творит. Вон дверь за семью замками, видишь? Там я иногда ложусь отдыхать, а старик мой сон стережёт, да других от меня охраняет...",
        "lua_if": "function lua_if()\nreturn betVisit == 9\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Иногда мне кажется, – задумчиво проговорила кухарка, – что вся жизнь моя – это сон. Я видела много снов и много миров. Чудных миров, странных. И нигде мне покоя не было, только горе...\n\nОна всхлипнула и сделала несколько глотков из кувшина.\n\n– Ох, не бери в голову, мальчик, – хлопнула она себя ладонью по лбу. – Устала старуха, только и всего...",
        "lua_if": "function lua_if()\n\nif betVisit == 10 then\nnewAchieve(\"kitchen\")\nend\n\n\nreturn betVisit == 10\nend",
        "merge": true
      },
      {
        "id": 54,
        "text": "– Ох, опять ты, охламон, – запричитала кухарка. – Совсем я с тобой заболталась. А дел много, всего теперь не успеть. Ну и славно. Когда руки делом заняты, голова светлее. Спасибо тебе, Корел, удружил старухе.",
        "lua_if": "function lua_if()\nreturn betVisit > 10\nend",
        "merge": true
      },
      {
        "super_calculate": false,
        "id": 54,
        "calculate": true,
        "lua_do": "function lua_do()\n\ncharmFlowers = charmFlowers or 0\n\nif betVisit == 6 then\n  knowNoMagicPosition = 1\n\nelseif betVisit == 2 and disWidSup < 1 then\n   knowBetNeedRest = 1\n   approved = (approved or 0) <plus> 1\nelseif betVisit == 8  or (restTime >= 30 and restTime < 35) then\n  knowCharmflowersAreMagic = 1\n  charmFlowers = charmFlowers > 1 and charmFlowers or 1\n\nelseif (restTime >= 25 and restTime < 30) and betVisit > 2 then\n  mechanics =1\n  bettyTheMechanic = 1\n  skipKitchenScene = 1\nelseif betVisit == 9 then\ncanCancelBet = 1\n\nend\n\nif restTime >= 30 and restTime < 35 then\n  skipKitchenScene = 1\nend\n\n\nif betVisit == 11 then\n  newAchieve(\"kitchen\")\nend\n\ndisWidSup = 0\n\nend",
        "text": "засчитывать изменения при выполнении условий"
      },
      {
        "lua_if": "function lua_if()\nfruit= fruit or 0\nreturn fruit > 0 -- вернулся с фруктами\n-- можно узнать, что Иссоп часто отлучается \nend",
        "lua_do": "function lua_do()\nknowIssopSecret = 1\nend",
        "text": "Спросить про фрукты",
        "need": [
          -50
        ],
        "id": 50
      },
      {
        "lua_do": "function lua_do()\nbetAsleep = 1\ngetTheSed = 10 -- used\nrestTime = restTime - 1\nend",
        "text": "Подмешать снотворное в кувшин с водой",
        "lua_if": "function lua_if()\ngetTheSed = getTheSed or 0\n\nreturn restTime < 15 and restTime >= 5 and getTheSed == 1 \n--and chamaenerion <10\nend",
        "id": 55
      },
      {
        "lua_do": "function lua_do()\nbetAsleep = 1\nchamaenerion = 10 -- used\nrestTime = restTime - 1\nend",
        "text": "Незаметно бросить кипрей в кастрюлю",
        "lua_if": "function lua_if()\nreturn ((restTime < 40 and restTime >= 20) or (restTime < 10 and restTime >= 5) ) and knowBetNeedRest == 1 and chamaenerion == 2\n-- and getTheSed <10\nend",
        "id": 56
      },
      {
        "id": 57,
        "text": "Признаться в попытке усыпить",
        "lua_if": "function lua_if()\n\ncanCancelBet = canCancelBet or 0\nbetAsleep = betAsleep or 0\n\nreturn canCancelBet == 1 and betAsleep == 1\nend",
        "lua_do": "function lua_do()\nbetAsleep = 0\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn not ((restTime < 40 and restTime >= 20) or (restTime < 10 and restTime >= 5) ) and chamaenerion == 2\nend",
        "lua_do": "function lua_do()\nbetAsleep = 1\nend",
        "text": "<$2><b>Не получится незаметно бросить кипрей в кастрюлю на глазах у Бэтти...</b><$1>",
        "comment": true,
        "id": 54
      },
      {
        "comment": true,
        "id": 54,
        "text": "<$2><b>Не получится незаметно подмешать снотворное в кувшин с водой на глазах у Бэтти...</b><$1>",
        "lua_if": "function lua_if()\nreturn not (restTime < 15 and restTime >= 5) and getTheSed == 1\nend",
        "merge": false
      },
      {
        "lua_if": "function lua_if()\nreturn getTheSed == 1\nend",
        "lua_do": "function lua_do()\n-- betAsleep = 0 \ngetTheSed = 10 -- used\nrestTime = restTime - 1\nend",
        "id": 85,
        "text": "Отдать снотворное Бэтти",
        "comment": false,
        "merge": false
      },
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\n\nlocal a = (betVisit  > 2 and skipKitchenScene or 0)\nlocal b = a == 0 and 1 or 4\nrestTime = restTime -  b\nskipKitchenScene = 0\nif betVisit == 2 then\nrestTime = restTime -1\nend\nend"
      },
      {
        "id": 54,
        "text": "small, bottom",
        "url": "https://i.ibb.co/JQXZy8C/IMG-20231125-122230.png"
      }
    ]
  },
  {
    "id": 55,
    "text": "Несмотря на богатый опыт самых разных заданий, пробовать себя в роли отравителя Корелу до сих пор не приходилось. Но это даже не настоящее отравление, так ведь? Он просто решил помочь старушке выспаться...\n\nПока Бэтти самозабвенно предавалась своему занятию, изгой быстро шмыгнул к очагу. С усилием откупорил пузырёк зубами и быстро влил его содержимое в полупустой кувшин. Перемешать или оставить так и быстрее уйти? Он промедлил всего мгновение, но в итоге несколько раз взболтнул сосуд и только затем вернулся к двери. Хозяйка его манёвров даже не заметила.",
    "answers": [
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nlocal a = skipKitchenScene or 0\nlocal b = a == 0 and 1 or 4\nrestTime = restTime -  b\nskipKitchenScene = 0\n\nblackmailBiz = blackmailBiz or 0\nblackmailAkonit = blackmailAkonit or 0\nbetAsleep = 1\n\nif blackmailBiz <plus> blackmailAkonit <plus> betAsleep == 3 then\nnewAchieve(\"talking\")\nend\n\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nif chamaenerion == 10 then\n   newAchieve(\"robust\")\nend\nend",
        "text": "Новый ответ. введите текст",
        "id": 55,
        "calculate": true
      }
    ]
  },
  {
    "id": 56,
    "text": "Несмотря на богатый опыт самых разных заданий, пробовать себя в роли отравителя Корелу до сих пор не приходилось. Но это ведь даже не настоящее отравление, так ведь? Он просто решил помочь старушке выспаться...\n\nПока Бэтти самозабвенно предавалась своему занятию, изгой быстро шмыгнул к очагу. Заглянул в бурлящий чан и даже немного расслабился: в таком вареве можно собаку спрятать, и никто не заметит. По крайней мере не сразу.\n\nОн вытряхнул из поясного мешочка в похлёбку весь собранный кипрей, который тут же стал неотличим от других ингредиентов. Корел принюхался: не выдаст ли запах его вмешательства? Вдруг костлявая рука легла на его плечо. Он развернулся, и старушка погрозила ему пальцем.\n\n– Вкусно пахнет, да? Но близко не подходи, обожжёшься ещё.\n\nКорел смутился, извинился и отступил.",
    "answers": [
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nlocal a = skipKitchenScene or 0\nlocal b = a == 0 and 1 or 4\nrestTime = restTime -  b\nskipKitchenScene = 0\n\nblackmailBiz = blackmailBiz or 0\nblackmailAkonit = blackmailAkonit or 0\nbetAsleep = 1\n\nif blackmailBiz <plus> blackmailAkonit <plus> betAsleep == 3 then\nnewAchieve(\"talking\")\nend\n\n\nend"
      },
      {
        "super_calculate": false,
        "id": 56,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nif getTheSed == 10 then\n   newAchieve(\"robust\")\nend\nend",
        "calculate": true
      }
    ]
  },
  {
    "id": 57,
    "text": "– Бэтти, – нерешительно начал изгой. – Кажется, я совершил ужасную ошибку... ",
    "answers": [
      {
        "id": 57,
        "text": "Я подмешал снотворное в твой кувшин с водой... Думал, ты сможешь выспаться наконец...\n\n– Ох, Корел, Корел, – тепло улыбнулась кухарка. – Я же говорила, что сердце у тебя доброе. Спасибо, что признался, милый.\n\nОна выплеснула содержимое кувшина прямо в таз с грязной водой.\n\n– А тому оболтусу, который тебе снотворное отдал, уши надо пообдирать!",
        "lua_if": "function lua_if()\nreturn getTheSed == 10 and chamaenerion ~= 10\nend",
        "merge": true
      },
      {
        "id": 57,
        "text": "Я подмешал кипрей в чан, чтобы он сделал и похлёбку снотворным... Думал, ты сможешь выспаться наконец...\n\n– Ох, Корел, Корел, – тепло улыбнулась кухарка. – Я же говорила, что сердце у тебя доброе. Спасибо, что признался, милый.\n\nОна в раздумьях повернулась к парящему чану.\n\n– Людей то я вчерашним накормлю, – вслух размышляла она. – А с этим мне что теперь делать? Эх, уши бы пообдирать тому, кто тебя про кипрей надоумил!",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and getTheSed ~= 10\nend",
        "merge": true
      },
      {
        "id": 57,
        "text": "Я подмешал снотворное в твой кувшин с водой... Думал, ты сможешь выспаться наконец...\n\n– Ох, Корел, Корел, – тепло улыбнулась кухарка. – Я же говорила, что сердце у тебя доброе. Спасибо, что признался, милый.\n\nОна выплеснула содержимое кувшина прямо в таз с грязной водой.\n\n– И ещё... Я добавил кипрей в котёл, чтобы он сделал похлёбку снотворным... \n\n– Иж, какой упорный, – наморщилась Бэтти и в раздумьях повернулась к парящему чану.\n\n– Людей то я вчерашним накормлю, – вслух размышляла она. – А с этим мне что теперь делать? Эх, уши бы пообдирать тому, кто тебя про кипрей надоумил!",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and getTheSed == 10\nend",
        "merge": true
      },
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nlocal a = skipKitchenScene or 0\nlocal b = a == 0 and 1 or 4\nrestTime = restTime -  b\nskipKitchenScene = 0\nend"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nnewAchieve(\"cancel\")\nend",
        "text": "Новый ответ. введите текст",
        "id": 57,
        "calculate": true
      }
    ]
  },
  {
    "id": 58,
    "text": "empty",
    "answers": [
      {
        "id": 58,
        "text": "Покрутившись у плетёной изгороди одного из домов, Корел увидел, как начальник охраны спешно покинул своё жилище и направился прямиком к окраине поселения. Изгой не стал терять время и юркнул в маленький домик, затем по приставной лестнице в подвал.\n\n",
        "lua_if": "function lua_if()\nreturn issopReturns >= (restTime <plus> 1)\nend",
        "merge": true
      },
      {
        "id": 58,
        "text": "Покрутившись у плетёной изгороди одного из домов, Корел заметил фигуру начальника охраны где-то у самой окраины поселения. Изгой не стал терять время и юркнул в маленький домик, затем по приставной лестнице в подвал.\n\n",
        "lua_if": "function lua_if()\nreturn issopReturns < (restTime <plus> 1)\nend",
        "merge": true
      },
      {
        "id": 58,
        "text": "Ещё на пороге ему послышались какие-то звуки, а спустившись он убедился: всё это время девушка разговаривала сама с собой.\n\n– ... красивые белые цветы, мама такие любила. Я скучаю, мама... Так хочется услышать твоё: \"Ну посмотри, какая ты теперь очаровательная!\". Но тебя нет, а я больше никого не очаровываю... О, привет, напарничек. Всё-таки догадался, как провести этого пса? А ты, выходит, смог их всех обмануть, раз тебя пустили по деревне шастать. Как, интересно, у тебя получилось? У меня вот не вышло, хотя я весь внутренний запас потратила и месяц опустошённой ходила, перед тем, как сюда соваться. Даже так старый лис как-то следы магии почувствовал. Телепат он что ли? Ладно, не говори как, интереснее самой догадаться будет...\n\nТолько спустившись до самого низа, изгой разглядел в полумраке девушку, закованную цепями. Невысокая, стройная, в светлых волосах завядшие бутоны, на аккуратном личике выражение скуки. Пижму можно было бы назвать привлекательной, хотя Корелу для этого пришлось бы смотреть на неё со значительного расстояния или поплотнее закрыв уши.\n\n– Ты вообще никогда не молчишь? – не выдержал изгой.\n\n– Почему же, когда сплю или ем, приходится молчать. А ты, оказывается, ещё совсем неопытный, даже не стараешься вести себя так, каким тебя ожидают увидеть другие... \n\n– А ты стараешься?\n\n– Я уже выше этого, – улыбнулась Пижма, и на несколько секунд её речь перестала барабанить ливнем фраз по ушам и потекла освежающей рекой. – Я заставляю других ожидать то, что нужно мне.\n\n– Ты говоришь сама с собой, чтобы никто не прислушивался, когда к тебе приходит кто-то ещё? – догадался Корел.\n\n– Я очень люблю цветы, – вновь затараторила Пижма и подмигнула изгою. – Может быть ты видел: такие беленькие, с нежными лепестками и волшебной пыльцой. Чароцветы называются. Если бы ты принёс мне букетик, я смогла бы быть очень красивой и нежной с тобой этим вечером.",
        "lua_if": "function lua_if()\npijmaVis = pijmaVis or 1\nreturn pijmaVis == 1\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn pijmaVis > 2\nend",
        "id": 58,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\nlocal a = math.random(3)\n\ntext = ({\n\n[=[– ... есть зелёные, синие, красные. Нет-нет-нет. Есть жёлтые и чёрные. Ни те, ни другие. А какие же? Конечно, белые! Нежные, хорошие. Подставь свою ладошку, чувствуешь? С ними ты никогда не будешь одна. Даже когда все отвернутся – просто закрой глаза и слушай. Пусть цветы шепчут моим голосом, пусть они... А, Корел, солнышко. Ты принёс мне что-нибудь красивое?]=],\n\n[=[– ... на опушке под дождём, мы всех деток подождём. Нас догонит добрый гном, и сожжёт своим огнём. Выжжет радости и грусти, и их прах в пещеру спустит. Раскалённых докрасна, нас поглотит пустота... О, Корел, милый! А у тебя что хорошего? Нашёл для меня букетик? ]=],\n\n\"– ... но он такой хороший, а я так много плохого сделала. Зато она сказала, что я хорошая, когда другие не поверили. А дети всегда всё чувствуют. Дети всегда искренние. Не в словах, нет. В отношении. Они не умеют притворяться, что им с тобой хорошо. Они не умеют предавать. Если только их не научить, да? А ты как думаешь, Корел? Ах да, ты же не любишь пустой болтовни. Значит пришёл по делу? Обрадуешь даму цветами?\"})[a]\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 58,
        "text": "– ... а есть и другая трава – Кипрей. Розовые цветы красивые, хоть белые лучше. А от розовых в сон клонит. Ты кипрей с корнем в кастрюльку не бросай, три часа не вываривай, два часа не настаивай. А то станет не суп, а снотворное. Пусть отдохнут люди после долгого дня. Кто много работал, тот заслужил хорошо поесть и крепко выспаться, разве нет? Ах, Корел, светик мой. Надеюсь, ты мне не розовые цветы принёс?",
        "lua_if": "function lua_if()\nreturn pijmaVis == 2\nend",
        "merge": true
      },
      {
        "id": 59,
        "text": "Отдать чароцветы",
        "lua_if": "function lua_if()\nreturn charmFlowers == 2\nend",
        "lua_do": "function lua_do()\npGetFlower = 2\ncharmFlowers = 10\nend"
      },
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\n\nrestTime = restTime - 1\nend"
      },
      {
        "super_calculate": false,
        "id": 58,
        "text": "Новый ответ. введите текст",
        "calculate": true,
        "lua_do": "function lua_do()\ncharmFlowers = charmFlowers or 0\nchamaenerion = chamaenerion or 0\n\nif pijmaVis == 1 then\n  charmFlowers = charmFlowers < 2 and 1 or charmFlowers\nelseif pijmaVis == 2 then\n  chamaenerion = chamaenerion < 1 and 1 or chamaenerion\nend\n\nend"
      }
    ]
  },
  {
    "id": 59,
    "text": "– Не знаю, зачем я это делаю... – пробормотал Корел, вытаскивая из мешка охапку уже пожухших цветов.\n\nНо Пижма буквально преобразилась: взметнула руками, запрыгала на месте и захлопала в ладоши.\n\n– Беленькие, миленькие... – мурлыкала она, рукой хватая цветы. – Кто теперь будет очаровательной? А кто у нас заслужил награду? Я в долгу не останусь, угрюмый ты мой волчонок.\n\nПижма потянулась к изгою с закрытыми глазами и вытянутыми губами, но театрально звякнула цепями, дёрнулась и расхохоталась.\n\n– Не сейчас, милый, сейчас нет времени. А теперь уходи и не пытайся вновь сюда попасть: я должна привести себя в порядок, чтобы быть вечером самой красивой...",
    "answers": [
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\npijmaVis = pijmaVis <plus>1 \nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 60,
    "text": "empty",
    "answers": [
      {
        "super_calculate": false,
        "id": 60,
        "calculate": true,
        "lua_do": "function lua_do()\nissopVis= issopVis or 1\npijmaVis = pijmaVis or 0\nissopTrust = issopTrust or 0\nissopTrustFirstAchieved = issopTrustFirstAchieved or 0\n\nif pijmaVis > 1 and issopTrustFirstAchieved == 0 then\n  issopTrustFirstAchieved = - 1\nend\n\nif issopTrustFirstAchieved == 0 then\nif issopTrust < -3 then\n  issopTrustFirstAchieved = -1\nelseif issopTrust > 3 then\n  issopTrustFirstAchieved = 1\nend\nend\n\nend",
        "text": "Новый ответ. введите текст"
      },
      {
        "id": 60,
        "text": "Изгой подошёл к небольшой хижине с покосившимися окнами. Хотел постучать, но дверь распахнулась перед ним будто сама собой. Иссоп, оказавшийся за ней, сделал шаг вперёд, затем неуклюже отступил назад, пропуская изгоя внутрь.\n\n– Проходи, проходи, – махнул он рукой. – Хотел что-то узнать? Или поделиться наблюдениями? Ну конечно, я же сам тебя приглашал...\n\nЖилище начальника охраны производило самое удручающее впечатление. Никакой мебели, кроме пары мешков с соломой, видимо заменявших кровать, большие окна со странными зеркальными ставнями. Ещё несколько зеркал криво висели на стенах и даже на потолке.\n\nВ одном из отражений Корел уловил неясное пятно, и, опустив взгляд, заметил тёмную дыру в самом углу, из которой виновато выглядывала приставная лестница. Изгой готов был поклясться, что поток воздуха доносит из-под пола шелест чьего-то голоса.\n\n– Раньше это здание было частью лабораторий, наверное, – сообщил Иссоп, кивая на зеркала. – Мне его отдали из-за подвала для темницы.\n\n– Не очень уютно, – поёжился Корел.",
        "lua_if": "function lua_if()\nif issopVis == 1 then\ntimeIssopLeft = 2\nend\nreturn issopVis == 1\nend",
        "merge": true
      },
      {
        "id": 60,
        "text": "Корел вновь направился по узенькой тропинке к жилищу главного стражника. Ветер скрипел зеркальными ставнями на окнах, и через отражение в одной из них изгой увидел часть скромного внутреннего убранства хижины.\n\n",
        "lua_if": "function lua_if()\nreturn issopVis > 1\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn issopVis > 1\nend",
        "id": 60,
        "text": "барабан для случайных описаний поведения",
        "lua_text": "function lua_text()\nlocal text = \"\"\n\ntIssop =  tIssop or {}\ntimeIssop = timeIssop or {}\nif not timeIssop [1] then\ntimeIssop = {3,1,2}\nend\n\nif not tIssop[1] then\n\ntIssop = {\n\n[=[У самой двери Корела догнал возникший буквально из ниоткуда Иссоп.\n\n– Ко мне? – деловито осведомился он, пропуская изгоя в домик.]=],\n\n[=[Едва Корел поднял руку, чтобы постучать, на порог выскочил хозяин домика.\n\n– А, хочешь поговорить? – поджав губы спросил он. – Давай только быстро, у меня дел полно.]=],\n\n[=[Корел постучал, но никто не ответил. Похоже, хозяина не было дома.\n\n– Уже бегу! – донеслось откуда-то из-за других домов.\n\nВслед за словами выскочил запыхавшийся Иссоп и поспешил объясниться:\n\n– Увидел, что ты идёшь... Заходи. В чём дело?]=]}\n\nend\n\nlocal a = math.random(#tIssop)\n\ntext = tIssop[a]\ntimeIssopLeft = timeIssop[a]\ntable.remove(tIssop, a)\ntable.remove(timeIssop, a)\nreturn text\nend",
        "merge": true
      },
      {
        "id": 60,
        "text": "\n\nИзгой прислонился к одной из стен, отчего та угрожающе заскрипела.\n\n– А я как раз хотел с тобой поговорить, – вдруг произнёс Иссоп и заложил руки за голову.",
        "lua_if": "function lua_if()\nissopTrustFirstAchieved = issopTrustFirstAchieved or 0\nreturn issopTrustFirstAchieved == 1 -- условие достижения уровня доверия\nor issopTrustFirstAchieved == -1 -- недоверия\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime or 49\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о поселении",
        "need": -72,
        "id": 72
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime or 49\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спросить о реликте",
        "need": [
          -82
        ],
        "id": 82
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowNoMagicPosition = 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Гамамелисе",
        "need": -71,
        "id": 71
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о самом Иссопе",
        "need": -73,
        "id": 73
      },
      {
        "lua_if": "function lua_if()\nbizVisit = bizVisit or 0\nreturn bizVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Бизе",
        "need": -61,
        "id": 61
      },
      {
        "lua_if": "function lua_if()\nbetVisit = betVisit or 0\nreturn betVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowBetNeedRest = 1\nchamaenerion = 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Бэтти",
        "need": -62,
        "id": 62
      },
      {
        "lua_if": "function lua_if()\nakonitVisit = akonitVisit or 0\nreturn akonitVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить об Аконите",
        "need": -63,
        "id": 63
      },
      {
        "lua_if": "function lua_if()\nmeetRosy= meetRosy or 0\n\nreturn meetRosy == 1 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "id": 70,
        "text": "Спросить о Роузи",
        "need": -70,
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowCharmflowersAreMagic = 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спросить о Пижме",
        "need": -64,
        "id": 64
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\ntimeIssopLeft = timeIssopLeft - 1\nend",
        "text": "Спросить об убитой",
        "need": -74,
        "id": 74
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спуститься к Пижме",
        "need": -65,
        "id": 65
      },
      {
        "lua_if": "function lua_if()\n\nreportSecret = reportSecret or 0\n\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowBizSecret == 1 and reportSecret < 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 3\nreportSecret = 1\nend",
        "text": "Рассказать о тайне Биза",
        "need": -66,
        "id": 66
      },
      {
        "lua_if": "function lua_if()\n\nreportSecret = reportSecret or 0\n\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowCharmflowersAreMagic == 1 and seenTheCharmflowers == 1 and reportSecret < 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 3\nreportSecret = 1\nend",
        "text": "Рассказать о тайне Аконита",
        "need": -67,
        "id": 67
      },
      {
        "lua_if": "function lua_if()\nreportSecret = reportSecret or 0\n\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and canCancelBet == 1 and reportSecret < 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 3\nreportSecret = 1\nend",
        "text": "Рассказать о тайне Бэтти",
        "need": -68,
        "id": 68
      },
      {
        "id": 69,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved == 1 -- условие флаг активации доверительного разговора\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrustFirstAchieved = 10\napproved = (approved or 0) <plus> 1\nend"
      },
      {
        "id": 75,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved == -1 -- условие флаг активации выражения недоверия\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrustFirstAchieved = -10\n\nissopTrust= (issopTrust or 0) - 2\nachTalk = 1\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and mechanics == 1 and seenAkonit == 1 \n\n-- условие: знает механику, был в лаборатории Аконита\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 3\nend",
        "text": "Предложить улучшение",
        "need": -76,
        "id": 76
      },
      {
        "id": 11,
        "text": "Уйти",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nissopVis = issopVis <plus>1 \nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 61,
    "text": "– Не ожидал, да? – рассмеялся Иссоп. – Наш Биз – славный парень, хоть и не очень общительный. Говорят, ему в городе нелегко жилось. Мы встретили его на охоте, и чуть друг друга не порешали. Гамамелис как из ниоткуда появился и смог договориться. С тех пор Биз у нас лучший охотник, без него только и ели бы эти вонючие корешки да груши. Бедная Лобелия хоть и сдружилась с ним, но такого мастерства добиться не успела... Да, лучше лишний раз ему не напоминай о ней, мало ли что...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 62,
    "text": "– Ах, уже познакомились? – улыбнулся Иссоп. – Ты её не бойся, она человек хороший, хоть и выглядит... Специфично.\n\n– У неё какие-то проблемы?\n\n– А? Да... Проблемы со сном, можно так сказать. Умник готовит для неё специальное снотворное, почти такое же, как сонный яд для стрел. Наверное, если ты принесёшь ему нужные травы, он оценит... Знаешь, как кипрей выглядит? Такие невыразительные цветы, то ли розовые, то ли фиолетовые...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 63,
    "text": "– Умник он умник и есть – гоготнул Иссоп. – Аконит единственный был грамоте обучен, потому его Гамамелис умником и назначил. Тут ведь вон целый дом со странными механизмами, нужно, чтобы в них кто-то разбирался. А у Аконита сонный яд по рецепту хорошо вышел, и стрелы для арбалета выплавлять быстро научился. Потихоньку все эти странные детали полезными становятся. Эх, ещё бы водокачку починил скорее, а то без неё приходится аж до ручья с вёдрами бегать... Надо бы его поторопить...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 64,
    "text": "– А ты как будто сам не наслушался, – гоготнул Иссоп. – И я знаю то же – только то, что она трындит без умолку. Пришла, как и ты, изгоем пыталась прикинуться, разве что не убила никого... Эх, да зачем ты о ней спрашиваешь то? Добра от неё не жди, лучше и думать о ней забудь. У нас и своих девок незамужних много.",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 65,
    "text": "– Иж чего удумал, – опешил Иссоп. – Не наслушался ещё её бредней?\n\n– Ты же сам говорил, что я могу спуститься, – удивился Корел.\n\n– Я шутил. Неудачно, видимо. Думал, ты понимаешь, что интерес к ней и всему, что с ней связано, не прибавляет тебе шансов завоевать наше доверие. А то того и гляди, появится возможность провести с бестией время. Много времени...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 66,
    "text": "– Даже не знаю, кому ещё рассказать, если не тебе, – замялся Корел. – Я узнал тайну. Это несёт угрозу для поселения...\n\n– Тайны лучше хранить под шляпой, – многозначительно изрёк Иссоп и для наглядности постучал себя пальцем по макушке. – Не люблю чужих секретов, но если угроза, как ты говоришь, то мне положено знать.\n\n– Ты обращал внимание, как Бизу всегда везёт с добычей на охоте? А её хоть когда-нибудь проверяли? А ты знал, что у него, оказывается...\n\n– Есть брат, который умеет колдовать, – закончил за изгоя Иссоп. – А я уж думал, что правда угроза. Чтобы ты знал, орки так слабо колдуют, что магический след от них не сильнее, чем от волшебных животных или растений. Гамамелис так сказал. Так что отстань от братьев и думай, что говоришь.",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      },
      {
        "super_calculate": false,
        "id": 66,
        "calculate": true,
        "lua_do": "function lua_do()\n\n  newAchieve(\"secret\")\n\nend",
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 67,
    "text": "– Даже не знаю, кому ещё рассказать, если не тебе, – замялся Корел. – Я узнал тайну. Это несёт угрозу для поселения...\n\n– Тайны лучше хранить под шляпой, – многозначительно изрёк Иссоп и для наглядности постучал себя пальцем по макушке. – Не люблю чужих секретов, но если угроза, как ты говоришь, то мне положено знать.\n\n– Ты обращал внимание, как удачно у Аконита получаются зелья. Думаешь, он просто талантливый алхимик? А ты знал, что он, оказывается, использует...\n\n– Чароцветы, чтобы усилить снадобья, – закончил за изгоя Иссоп. – А я уж думал, что правда угроза. Чтобы ты знал, чароцветы очень слабый магический фон создают. Да и поселение не случайно расположено здесь, где вокруг много всего волшебного растёт и живёт. Гамамелис так сказал. Так что отстань от умника и думай, что говоришь.",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\n  newAchieve(\"secret\")\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 66,
        "calculate": true
      }
    ]
  },
  {
    "id": 68,
    "text": "– Даже не знаю, кому ещё рассказать, если не тебе, – замялся Корел. – Я узнал тайну. Это несёт угрозу для поселения...\n\n– Тайны лучше хранить под шляпой, – многозначительно изрёк Иссоп и для наглядности постучал себя пальцем по макушке. – Не люблю чужих секретов, но если угроза, как ты говоришь, то мне положено знать.\n\n– Ты задумывался, почему Бэтти так мало спит? Она сначала сказала мне, что это из-за бессонницы, но куда там. А ты знал, что она, оказывается...\n\n– Теряет над собой контроль во сне, – закончил за изгоя Иссоп. – А я уж думал, что правда угроза. Ещё бы я не знал, что у меня под носом делается. А Бэтти иногда может спать вполне безопасно, хоть и очень редко. Но это лучше, чем ничего. Гамамелис так сказал. Так что отстань от старушки и думай, что говоришь.",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\n  newAchieve(\"secret\")\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 66,
        "calculate": true
      }
    ]
  },
  {
    "id": 69,
    "text": "– Я думаю, ты хороший парень, Корел, – в лоб начал Иссоп. – Молодой, конечно, и от этого ещё чересчур горячий...\n\nИзгой хмыкнул. Ага, как же.\n\n– Я знаю, ты чувствуешь себя везучим, почти что уникальным. «Смотрите: я не умею колдовать и использую это, чтобы обдурить тех, кто не берёт меня в расчёт!». Это не так, друг. Тысячи и тысячи таких же мальчишек нанимаются на любую сомнительную авантюру, чтобы заработать и доказать себе что-то. Все они погибают на первом же задании. В основном потому, что задание не предполагает их выживания. И вот те единицы, которые случайно остаются в строю, начинают считать, что весь мир покорится их настойчивости, что они будут побеждать вопреки всему, раз за разом. Ты думаешь, что стал своим хоть для кого-то, но ты останешься для них просто изгоем – выродком, расходным материалом.\n\nКорел тяжело вздохнул и закатил глаза. Неожиданная проповедь не вписывалась в его планы и лишь отнимала время.\n\n– Ты отмахиваешься, потому что где-то глубоко внутри понимаешь, что это так, – продолжал наседать Иссоп. – Я знаю это чувство – сам был таким. Но мне повезло остановиться, сойти с этого пути. Я ни о чём не жалею и только хочу помочь тебе так же, как однажды помогли мне. Оставайся с нами, здесь тебя наконец оценят по достоинству. Здесь мы, отвегнутые обществом, стали сами собой. И теперь в поселении изгоев нет ни одного изгоя, все – обычные люди...\n\n– В этой дыре? – рассмеялся изгой. – Спасибо, конечно, мне очень лестно, но...\n\n– Не отвечай сейчас, подумай до вечера, – Иссоп сдержанно похлопал его по плечу. – Подумай.",
    "answers": [
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\nissopVis = issopVis <plus>1 \nrestTime = restTime - 1\nissopReturns = restTime - 5\nend"
      }
    ]
  },
  {
    "id": 70,
    "text": "– А, уже познакомился с проказницей? – тепло улыбнулся Иссоп.\n\n– Да... Чья-то дочь?\n\n– Чья-то, да незнамо чья. Её Гамамелис полумёртвую из города вынес, когда всё началось. Заботится о ней как отец, сам учит, да к умнику на ученье приставил. Невеста она его, Аконита...\n\n– Не рановато под венец ребёнка?\n\n– Сейчас рановато, так она подрастёт. Старик наш обещал её умнику, чтобы тот с нами остался. А Роузи теперь на обоих дуется, обзывается по-разному... Теперь ещё и с пленницей сдружилась, цветы ей волшебные таскает, эх...\n\n\"Те белые цветы в её волосах – чароцветы, – вспомнил Корел. – Редкое магическое растение в венке для ребёнка...\"",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 71,
    "text": "– Гамамелис у нас за главного, ты наверное заметил, – поразмыслив, ответил Иссоп. – Он последним покинул бушующий Мевелшофн, когда там был настоящий ад. Смог организовать группу отчаявшихся изгоев и увести в безопасность, наладить быт и охрану. Говорят, он родственник какого-то влиятельного правителя, и поэтому периодически привозит откуда-то что-то полезное для поселения.\n\n– Прямо святой старец, – хмыкнул изгой, но Иссоп остался серьёзен.\n\n– Именно он настоял на полном отказе от магии и артефактов. Он считает, что все волшебные вещи оставляют след, и по ним нас могут вычислить недоброжелатели.\n\n– То-то я смотрю, тут у вас не особо весело...\n\n– Да, пока мы только выживаем. Но если беды с источниками магии распространятся на другие города, то иначе нигде и не будет. Мы заронили семена нового мира...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 72,
    "text": "– Так а что тут рассказывать? – почесал затылок Иссоп. – Сходи да сам посмотри. Здесь почти все из Мевелшофна, люди честные и работящие.\n\n– Ме-вел-шоф-но-го-род-цы, – попытался по слогам проговорить Корел. – Язык сломать можно. Хотя бы какое-то благо от разрушения города: людям больше не придётся выговаривать его название... А что со зданиями? Не очень похоже, что вы здесь всё возвели с нуля.\n\n– А, это... Да, Гамамелис знал, что здесь какой-то заброшенный посёлок, и привёл нас сюда. Ума не приложу, что здесь было раньше. Главное, никакой чертовщины. А то я ведь главный по охране, а защищаться от колдунов да монстров – гиблое дело для нас. Правда, в последнее время с этим неспокойно...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 73,
    "text": "– Мне нечего о себе рассказать, – проговорил Иссоп. – Пока тебе достаточно знать, что я главный страж в поселении. Не замышляй против нас зла, и тебе не придётся узнавать обо мне больше, хе-хе...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 74,
    "text": "– Ох, Лобелия... – вздохнул Иссоп. – Проблем от неё было больше, чем пользы... Она совсем недавно с нами, очень хотела показать себя. Молодая, горячая, что с вас, таких, взять? Я принял её под свою ответственность, хотя другие и были против. Выучили её на охотницу, и они с Бизом очень сдружились... Что ж, видимо нужно быть более внимательным к знакам судьбы.\n\n– Я бы не стал нападать на неё первым...\n\n– Знаешь, просто забудь. Гамамелис верит тебе и неспроста дал шанс показать себя. А о Лобелии лучше ни с кем и не говори. У нас непростая жизнь, некогда горевать о потерях...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 75,
    "text": "empty\nВыражение недоверия",
    "answers": [
      {
        "id": 75,
        "text": "– Ты опять спускался к ней, пока меня не было... – без вопросительных интонаций проговорил начальник стражи.\n\n– Да. Не думал, что ты узнаешь... – смутился Корел. – Ты говорил, что за мной не будут следить.\n\n– Я соврал. Хорош бы я был, если бы знал только то, что происходит при мне, – гоготнул Иссоп, и изгой увидел его хитрый прищур в одном из зеркал. – Моя задача – безопасность. И ты близок к тому, чтобы стать моей проблемой. Подумай, с кем тебе сейчас выгоднее дружить. Подумай хорошенько.",
        "lua_if": "function lua_if()\nreturn pijmaVis > 1\nend",
        "merge": true
      },
      {
        "id": 75,
        "text": "– Я думал, что ты хороший парень, Корел, – в лоб начал Иссоп. – Да, молодой и излишне горячий, но я и сам таким был. Но чем дальше я тебя узнаю, тем мне тревожнее за твоё будущее. Моя задача – безопасность. И ты близок к тому, чтобы стать моей проблемой. Подумай, с кем тебе сейчас выгоднее дружить. Подумай хорошенько.",
        "lua_if": "function lua_if()\nreturn pijmaVis < 2\nend",
        "merge": true
      },
      {
        "id": 11,
        "text": "Уйти",
        "lua_do": "function lua_do()\nissopVis = issopVis <plus>1 \nrestTime = restTime - 1\nissopReturns = restTime - 5\nend"
      }
    ]
  },
  {
    "id": 76,
    "text": "– Я немного присмотрелся к тому, как у вас всё устроено... – неуверенно начал Корел.\n\n– И как, нравится? – заулыбался Иссоп.\n\n– Нет, не в этом дело... Я просто заметил, что Аконит не особо справляется со всеми этими механизмами, деталями. Ты вообще видел, какой там бардак?\n\n– А ты думаешь, это легко? Думаешь, смог бы лучше? Эх ты...\n\n– Да нет же, выслушай до конца! – рассердился изгой. – Я, конечно, и не справлюсь, но точно знаю, кто сможет.\n\n– Ну и кто же?\n\n",
    "answers": [
      {
        "id": 76,
        "text": "– Да хоть Бэтти. Она уже пользуется на кухне одним из этих странных приборов.\n\n– Хм... А ведь правда... Но тогда на кухню нужно... Ладно, это уже не твои заботы. Спасибо, Корел.",
        "lua_if": "function lua_if()\n\nknowBizSecret = knowBizSecret or 0\nreturn knowBizSecret ~= 1\nend",
        "merge": true
      },
      {
        "id": 76,
        "text": "– Да хоть Биз. Он для ловли зверей такие конструкции собирает.\n\n– Хм... А ведь правда... Но тогда на охоту нужно... Ладно, это уже не твои заботы. Спасибо, Корел.",
        "lua_if": "function lua_if()\nreturn knowBizSecret == 1\nend",
        "merge": true
      },
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 77,
    "text": "empty",
    "answers": [
      {
        "id": 77,
        "text": "Да уж, подготовка затянулась: Корел вдруг осознал, что Солнце почти поднялось. И откуда столько терпения у его противника? Но теперь изгой чувствовал, что наконец готов.\n\n",
        "lua_if": "function lua_if()\nready = ready or 10\ntimeForDuel = timeForDuel or 0\n\nreturn ready > 99 and timeForDuel > 30\nend",
        "merge": true
      },
      {
        "id": 77,
        "text": "Да уж, подготовка затянулась: Корел вдруг осознал, что Солнце почти поднялось. И откуда столько терпения у его противника? Но пока изгой чувствовал, что ещё не готов.\n\n",
        "lua_if": "function lua_if()\nready = ready or 10\ntimeForDuel = timeForDuel or 0\ninsp = insp or 2\nreturn ready < 99 and timeForDuel > 30\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\n\ndialog({header = \"Время шло...\", text = [=[Корелу всё никак не удавалось подготовиться как следует: то ветер менял направление, то камень надоедливо колол в бедро. Поняв, что тянуть дальше бессмысленно, Корел решил положиться на удачу.]=],\n\nanswers = { {text = \"Да, наконец-то!\", pressListener = function() ready = 100 showPage{id = 77} hideDialog() end}}})\n\nend",
        "lua_if": "function lua_if()\nready = ready or 10\ntimeForDuel = timeForDuel or 0\n\nreturn ready < 99 and timeForDuel > 50\nend",
        "super_calculate": false,
        "id": 77,
        "text": "калк",
        "calculate": true,
        "merge": false
      },
      {
        "id": 77,
        "text": "Корел лихо метнулся вбок и с разгона плюхнулся в раскидистый куст у мелкого ручья. Выстрелов не последовало. Не заметили?\n\nОсмотрелся. Мест, которые он сам выбрал бы для засады с той стороны, было немного. Изгой стал наблюдать за наиболее подходящим – высоким деревом у самой тропы. Если напавший там – тем хуже для него.\n\nИзгой попытался устроиться поудобнее, насколько это вообще возможно в таких обстоятельствах. Чтобы поразить противника, придётся сначала как следует подготовиться: точно определить его позицию и пристреляться –  дуэль стрелков не терпит спешки.\n\nКорел сделал глубокий вдох и медленно выдохнул, чтобы сосредоточиться. Чем более собранным он будет при пристрелке, тем быстрее окажется готов к решающему выстрелу.\n\n",
        "lua_if": "function lua_if()\nreturn g.previous_id == 4\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\n\ninsp = workText == 1 and math.random(3) or insp\n\nfunction randText()\nattempts = attempts or 6\ninsp = insp or 0\nlocal text = \"\"\n\nif attempts == 0 then\ntext = \"Солнце поднялось ещё немного выше и теперь нещадно слепило изгоя.\"\n\nelseif attempts == 1 then\ninsp = 0\ntext = \"Ветер вдруг переменился и начал дуть прямо в лицо изгоя. Как будто солнца было мало...\"\n\nelseif attempts == 2 then\ninsp = 0\ntext = \"Крупный шершень зажужжал над водой в опасной близости от изгоя. Как теперь сосредоточиться на чём-то другом?\"\n\nelseif attempts == 3 then\ninsp = 1\ntext = \"Изгой попытался размять затёкшие мышцы, но больно оцарапал руку о ветви кустарника.\"\n\nelseif attempts == 4 then\ninsp = 1\ntext = \"Шершень прожужжал над водой и улетел восвояси. Наверное. Изгой покрутил головой, силясь услышать его вновь.\"\n\nelseif attempts == 5 then\ninsp = 1\ntext = \"Изгой отгонял мысли о припасах, оставленных где-то у тропы, но в животе настойчиво урчало...\"\n\nelseif attempts == 6 then\ninsp = 2\ntext = \"Изгой размял затёкшие мышцы на руках. Уж лучше бы им не дрогнуть в самый ответственный момент.\" \n\nelseif attempts == 7 then\ninsp = 2\ntext = \"Несколько стрел пролетело веером во все стороны. Кажется, противник нервничает.\"\n\nelseif attempts == 8 then\ninsp = 2\ntext = \"Под кустом было сыро, но Корел старался не думать о комфорте. Бывали в его жизни и более мучительные моменты.\"\n\nelseif attempts == 9 then\ninsp = 2\ntext = \"Лёгкий ветерок волнами расходился по высокой траве. Наверное, море уже где-то совсем близко...\"\n\nelseif attempts == 10 then\ninsp = 3\ntext = \"Изгой наконец-то смог устроиться так, чтобы ветви кустарника закрывали его от солнца.\"\n\nelseif attempts == 11 then\ninsp = 3\ntext = \"Изгой наконец-то смог удобно устроиться на неровной земле, и мелкие камни больше не впивались в тело.\"\n\nelseif attempts == 12 then\ninsp = 3\ntext = \"Шум ветвей внезапно смолк: ветер на время утих.\"\n\nelseif attempts == 13 then\ninsp = 4\ntext = \"Солнце скрылось за случайным облаком и на время перестало слепить изгоя.\"\n\nelseif attempts == 14 then\ninsp = 4\ntext = \"Несколько стрел звякнули о камень, за которым до этого прятался изгой. Пока противник ищет его в другом месте, можно действовать смелее.\"\n\n\nelse\ntext = \"\"\n\nend\ntextToShow = text\nreturn text\n\nend\n\nend",
        "super_calculate": false,
        "id": 77,
        "text": "func",
        "calculate": true,
        "merge": false
      },
      {
        "lua_text": "function lua_text()\n\nlocal block = \n(insp == 0 and \"оооо\") or \n(insp == 1 and \"★ооо\") or \n(insp == 2 and \"★★оо\") or \n(insp == 3 and \"★★★о\") or\n(insp == 4 and \"★★★★\") or \"\"\n\nreturn \"Сосредоточенность:<s>\n\" .. block\nend",
        "lua_if": "function lua_if()\nreturn ready < 100\nend",
        "comment": true,
        "id": 14,
        "text": "Вдохновение:",
        "middle_answer": true,
        "merge": false
      },
      {
        "lua_text": "function lua_text()\nready = ready or 0\nready = (ready < 0 and 0) or (ready > 100 and 100) or ready\n\nreturn \"Подготовка к выстрелу: \" ..  ready .. \"%.<s>\n<s>\n\"\nend",
        "middle_answer": true,
        "id": 14,
        "text": "Страница",
        "comment": true,
        "merge": true
      },
      {
        "lua_text": "function lua_text()\nrandText()\nreturn textToShow\nend",
        "id": 14,
        "text": "Текст ожидания",
        "lua_if": "function lua_if()\ninspText = inspText or 1\nreturn inspText == 1 and ready < 100\nend",
        "merge": true
      },
      {
        "merge": true,
        "lua_if": "function lua_if()\n workText = workText or 0\nreturn workText == 1 and ready < 100\nend",
        "lua_text": "function lua_text()\nlocal text = \"\"\nlocal insp = inspFix\n\nif insp == 0 then\ntext = \"Корел высунулся из-под ветви и сделал пробный выстрел, чтобы оценить, насколько уводит в сторону ветром его снаряды. Он запоздало заметил боковым зрением, что с ветвей дерева вдалеке взметнулась стая птиц: похоже, противник сменил позицию.\"\nelseif insp == 1 then\ntext = \"Пробный выстрел в направлении цели увело сильно в сторону. Корел с раздражением понял, что направление ветра изменилось и его прошлые прикидки теперь бесполезны.\"\nelseif insp == 2 then\ntext = \"Корел выстрелил и отметил небольшое движение в ветвях дерева, которое нельзя было списать на ветер. Где-то там прячется цель.\"\nelseif insp == 3 then\ntext = \"Корел выстрелил в сторону предполагаемой цели и с удовольствием отметил, как ровно летит по ветру снаряд –  почти идеально.\"\nelseif insp == 4 then\ntext = \"Корел сделал пробный выстрел ровно тогда, когда в ветвях деревьев блеснуло и тут же скрылось что-то металлическое. Изгой холоднокровно отметил, какую поправку нужно сделать, чтобы попасть в увиденное место.\"\nend\n\n\nreturn text\nend",
        "id": 14,
        "text": "Текст действия",
        "comment": true,
        "left_answer": false
      },
      {
        "lua_if": "function lua_if()\n rest = (rest or 2)\nreturn rest > 2 and ready < 100\nend",
        "left_answer": true,
        "id": 14,
        "text": "Нельзя надолго упускать цель из виду",
        "comment": true,
        "merge": false
      },
      {
        "lua_if": "function lua_if()\n rest = (rest or 2)\nreturn rest < 3 and ready < 100\nend",
        "left_answer": true,
        "lua_do": "function lua_do()\nattempts = math.random(14)\n--insp = math.random(4)\n\nrest = (rest or 3) <plus> 1\ninspText = 1\nworkText = 0\nend",
        "text": "Затаиться\n<$2><<plus>0.8>(Увеличит скрытность, не изменит подготовку)</<plus>><$1>\n",
        "id": 77,
        "merge": false
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nrest = (rest or 2)\nreturn rest < 1 and ready < 100\nend",
        "id": 14,
        "text": "Нельзя слишком долго маячить на виду, чтобы не раскрыть свою позицию",
        "comment": true,
        "merge": false
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nrest = (rest or 2)\nreturn rest > 0 and ready < 100\nend",
        "id": 77,
        "text": "Действовать\n<$2><<plus>0.8>(Уменьшит скрытность, изменит подготовку)</<plus>><$1>",
        "lua_do": "function lua_do()\n-- когда вдохновения мало (0, 1) - удаляет уже написанное (-5%)\n-- 3/4 - маленькая прибавка (5-10%), 5 - средняя прибавка (10-15% ранд)\n\ndo\n-- local insp = inspFix\nready = ready or 0\nlocal a = (insp == 0 and -20) or  (insp == 1 and -10) or  (insp == 2 and 10) or  (insp == 3 and 20) or  (insp == 4 and 5 * math.random(5, 10))\nready = ready <plus> a\ninspFix = insp\nend\n\ninsp = math.random(4)\nrest = (rest or 3) - 1\nattempts = 0\n\ninspText = 0\nworkText = 1\nend",
        "merge": false
      },
      {
        "lua_text": "function lua_text()\nreturn \"Скрытность: \" .. rest\nend",
        "lua_if": "function lua_if()\nreturn ready < 100\nend",
        "comment": true,
        "id": 14,
        "text": "Усталость",
        "middle_answer": true,
        "merge": false
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ntimeForDuel = (timeForDuel or 0) <plus> 1\n\n--if timeForDuel == 50 then\n  --message(\"Подготовка затянулась. Корел вдруг осознал, что Солнце почти поднялось.\")\n--end\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 77,
        "calculate": true
      },
      {
        "id": 2,
        "text": "   \n",
        "comment": true
      },
      {
        "lua_if": "function lua_if()\n\ng.onceWon = g.onceWon or 0\nreturn g.onceWon == 1\nend",
        "super_calculate": false,
        "id": 77,
        "calculate": true,
        "text": "Корел был достаточно опытен, чтобы поразить врага подготовки",
        "lua_do": "function lua_do()\nready = 100\nmessage(\"Корел был достаточно опытен, чтобы поразить врага почти без подготовки                                    \")\nend"
      }
    ]
  },
  {
    "id": 78,
    "text": "\"Если выживу, значит к добру\", – решил Корел, осторожно выглядывая из укрытия. Ещё одна стрела звякнула о камень и отскочила в сторону. Короткая, лёгкая, с уплощением на конце вместо оперения. \"Ба, скорострельный арбалет!\", – восхитился он. Словно стоило только подумать о примете, и она тотчас оказалась счастливой.\n\nВо-первых, противник мог быть всего один, а это лучше, чем трое. Во-вторых, такими игрушками не балуются серьёзные колдуны, что кратно повышало шансы выжить. И самое главное, дальность у таких арбалетов заметно меньше, даже чем у излюбленной духовой трубки Корела.\n\nОн высунулся из-за другого края камня, пытаясь против солнца разглядеть возможную позицию врага, и тут же ещё две стрелы поочерёдно просвистели над самой травой. Ага, три сейчас и ещё три в начале. Похоже – трёх- или шестизарядный. Наверное теперь есть пара дюжин секунд, чтобы осмотреться и что-то предпринять.",
    "answers": [
      {
        "id": 118,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 79,
    "text": "Введите пароль",
    "answers": [
      {
        "id": 4,
        "text": "Начать квест",
        "lua_if": "function lua_if()\npassword = password or \"\"\nreturn password == \"thTaOyFhlp1\"\nend"
      },
      {
        "comment": false,
        "id": 79,
        "text": "Пароль",
        "input_var": "password",
        "lua_if": "function lua_if()\nreturn password ~= \"thTaOyFhlp1\"\nend"
      },
      {
        "id": 79,
        "text": "Сохранить",
        "comment": false,
        "lua_if": "function lua_if()\nreturn password ~= \"thTaOyFhlp1\"\nend"
      },
      {
        "id": 1,
        "text": "На первую страницу"
      }
    ]
  },
  {
    "id": 80,
    "text": "ран для Иссопа",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\ndisWidSup = disWidSup or 0\n\ntimeIssopLeft = (disWidSup < 1 and timeIssopLeft - 1) or timeIssopLeft\n\ndisWidSup = 0\nend",
        "text": "Новый ответ. введите текст",
        "id": 80,
        "calculate": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nissopVis= issopVis or 1\npijmaVis = pijmaVis or 0\nissopTrust = issopTrust or 0\nissopTrustFirstAchieved = issopTrustFirstAchieved or 0\n\nif pijmaVis > 1 and issopTrustFirstAchieved == 0 then\n  issopTrustFirstAchieved = - 1\nend\n\nif issopTrustFirstAchieved == 0 then\nif issopTrust < -3 then\n  issopTrustFirstAchieved = -1\nelseif issopTrust > 3 then\n  issopTrustFirstAchieved = 1\nend\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 60,
        "calculate": true
      },
      {
        "id": 60,
        "text": "\n\nИзгой прислонился к одной из стен, от чего та угрожающе заскрипела.\n\n– А я как раз хотел с тобой поговорить, – вдруг произнёс Иссоп и заложил руки за голову.",
        "lua_if": "function lua_if()\nissopTrustFirstAchieved = issopTrustFirstAchieved or 0\nreturn issopTrustFirstAchieved == 1 -- условие достижения уровня доверия\nor issopTrustFirstAchieved == -1 -- недоверия\nend",
        "merge": true
      },
      {
        "id": 60,
        "text": "\n\nИссоп напряжённо выглянул в окно.\n\n– Ещё что-нибудь? – спросил он.",
        "lua_if": "function lua_if()\ntimeIssopLeft = timeIssopLeft or 2\nreturn timeIssopLeft == 1 and not (issopTrustFirstAchieved == 1 or issopTrustFirstAchieved == -1)\nend",
        "merge": true
      },
      {
        "id": 60,
        "text": "\n\nИссоп решительно направился к выходу.\n\n– Ладно, заходи ещё, если будет, что обсудить, – бросил он.",
        "lua_if": "function lua_if()\nreturn timeIssopLeft == 0 and not (issopTrustFirstAchieved == 1 or issopTrustFirstAchieved == -1)\nend",
        "merge": true
      },
      {
        "id": 83,
        "text": "Новый ответ. введите текст",
        "run": [
          83
        ],
        "lua_if": "function lua_if()\nreturn timeIssopLeft > 0\nend"
      },
      {
        "id": 69,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved == 1 -- условие флаг активации доверительного разговора\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrustFirstAchieved = 10\n\napproved = (approved or 0) <plus> 1\n\nend"
      },
      {
        "id": 75,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved == -1 -- условие флаг активации выражения недоверия\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = (issopTrust or 0) - 2\nachTalk = 1\nissopTrustFirstAchieved = -10\nend"
      },
      {
        "id": 11,
        "text": "Уйти",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nissopVis = issopVis <plus>1 \nrestTime = restTime - 1\nissopReturns = restTime - 5\nend"
      }
    ]
  },
  {
    "id": 81,
    "text": "",
    "answers": [
      {
        "id": 60,
        "text": "Изгой прислонился к одной из стен, от чего та угрожающе заскрипела.\n\n– А я как раз хотел с тобой поговорить, – вдруг произнёс Иссоп и заложил руки за голову.",
        "lua_if": "function lua_if()\nissopTrustFirstAchieved = issopTrustFirstAchieved or 0\nreturn issopTrustFirstAchieved == 1 -- условие достижения уровня доверия\nor issopTrustFirstAchieved == -1 -- недоверия\nend",
        "merge": true
      },
      {
        "id": 60,
        "text": "\n\nИссоп напряжённо выглянул в окно.\n\nЕщё что-нибудь? – спросил он.",
        "lua_if": "function lua_if()\ntimeIssopLeft = timeIssopLeft or 2\nreturn timeIssopLeft == 1\nend",
        "merge": true
      },
      {
        "id": 60,
        "text": "\n\nИссоп решительно направился к выходу.\n\n– Ладно, заходи ещё, если будет, что обсудить, – бросил он.",
        "lua_if": "function lua_if()\nreturn timeIssopLeft == 0\nend",
        "merge": true
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime or 49\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о поселении",
        "need": -72,
        "id": 72
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowNoMagicPosition = 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Гамамелисе",
        "need": -71,
        "id": 71
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о самом Иссопе",
        "need": -73,
        "id": 73
      },
      {
        "lua_if": "function lua_if()\nbizVisit = bizVisit or 0\nreturn bizVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Бизе",
        "need": -61,
        "id": 61
      },
      {
        "lua_if": "function lua_if()\nbetVisit = betVisit or 0\nreturn betVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowBetNeedRest = 1\nchamaenerion = 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Бэтти",
        "need": -62,
        "id": 62
      },
      {
        "lua_if": "function lua_if()\nakonitVisit = akonitVisit or 0\nreturn akonitVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить об Аконите",
        "need": -63,
        "id": 63
      },
      {
        "lua_if": "function lua_if()\nmeetRosy= meetRosy or 0\n\nreturn meetRosy == 1 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowCharmflowersAreMagic = 1\nend",
        "text": "Спросить о Роузи",
        "need": -70,
        "id": 70
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спросить о Пижме",
        "need": -64,
        "id": 64
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\ntimeIssopLeft = timeIssopLeft - 1\nend",
        "text": "Спросить об убитой",
        "need": -74,
        "id": 74
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спуститься к Пижме",
        "need": -65,
        "id": 65
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowBizSecret == 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Рассказать тайну Биза",
        "need": -66,
        "id": 66
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowCharmflowersAreMagic == 1 and seenTheCharmflowers == 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Рассказать тайну Аконита",
        "need": -67,
        "id": 67
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and canCancelBet == 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Рассказать тайну Бэтти",
        "need": -68,
        "id": 68
      },
      {
        "id": 69,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved == 1 -- условие флаг активации доверительного разговора\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrustFirstAchieved = 10\napproved = (approved or 0) <plus> 1\nend"
      },
      {
        "id": 75,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved == -1 -- условие флаг активации выражения недоверия\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrustFirstAchieved = -10\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowBizSecret == 1 and seenAkonit == 1 \n\n-- условие: знает тайну Биза, был в лаборатории Аконита\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 3\nend",
        "text": "Предложить улучшение",
        "need": -76,
        "id": 76
      },
      {
        "id": 11,
        "text": "Уйти",
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nissopVis = issopVis <plus>1 \nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 82,
    "text": "– Что я знаю о реликте? – удивился Иссоп. – Это который в Мевелшофне потух, и из-за него конец света настал? Ничего не знаю и знать не хочу. И раньше не до него было, а уж теперь... И ты не думай – мой тебе совет. Добра от него теперь не будет, только горе для всех...",
    "answers": [
      {
        "id": 80,
        "text": "Новый ответ. введите текст",
        "run": [
          80
        ]
      }
    ]
  },
  {
    "id": 83,
    "text": "run run run",
    "answers": [
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime or 49\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о поселении",
        "need": -72,
        "id": 72
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime or 49\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спросить о реликте",
        "need": [
          -82
        ],
        "id": 82
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowNoMagicPosition = 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Гамамелисе",
        "need": -71,
        "id": 71
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о самом Иссопе",
        "need": -73,
        "id": 73
      },
      {
        "lua_if": "function lua_if()\nbizVisit = bizVisit or 0\nreturn bizVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Бизе",
        "need": -61,
        "id": 61
      },
      {
        "lua_if": "function lua_if()\nbetVisit = betVisit or 0\nreturn betVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowBetNeedRest = 1\nchamaenerion = 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить о Бэтти",
        "need": -62,
        "id": 62
      },
      {
        "lua_if": "function lua_if()\nakonitVisit = akonitVisit or 0\nreturn akonitVisit > 0 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 1\nend",
        "text": "Спросить об Аконите",
        "need": -63,
        "id": 63
      },
      {
        "lua_if": "function lua_if()\nmeetRosy= meetRosy or 0\n\nreturn meetRosy == 1 and issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nknowCharmflowersAreMagic = 1\nend",
        "text": "Спросить о Роузи",
        "need": -70,
        "id": 70
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спросить о Пижме",
        "need": -64,
        "id": 64
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\n--timeIssopLeft = timeIssopLeft - 1\nend",
        "text": "Спросить об убитой",
        "need": -74,
        "id": 74
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 \nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 1\nend",
        "text": "Спуститься к Пижме",
        "need": -65,
        "id": 65
      },
      {
        "lua_if": "function lua_if()\n\nreportSecret = reportSecret or 0\n\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowBizSecret == 1 and reportSecret < 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 3\nreportSecret = 1\nend",
        "text": "Рассказать тайну Биза",
        "need": -66,
        "id": 66
      },
      {
        "lua_if": "function lua_if()\n\nreportSecret = reportSecret or 0\n\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and knowCharmflowersAreMagic == 1 and seenTheCharmflowers == 1 and reportSecret < 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 3\nreportSecret = 1\nend",
        "text": "Рассказать тайну Аконита",
        "need": -67,
        "id": 67
      },
      {
        "lua_if": "function lua_if()\nreportSecret = reportSecret or 0\n\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and canCancelBet == 1 and reportSecret < 1\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust - 3\nreportSecret = 1\nend",
        "text": "Рассказать тайну Бэтти",
        "need": -68,
        "id": 68
      },
      {
        "lua_if": "function lua_if()\nreturn issopTrustFirstAchieved ~= 1 and issopTrustFirstAchieved ~= -1 and mechanics == 1 and seenAkonit == 1 \n\n-- условие: знает механику, был в лаборатории Аконита\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nissopTrust = issopTrust <plus> 3\nend",
        "text": "Предложить улучшение",
        "need": -76,
        "id": 76
      }
    ]
  },
  {
    "id": 84,
    "text": "достижухи\n \ng.hunter\ng.mech \ng.kitchen\ng.flowers\ng.sniper\ng.talking",
    "answers": [
      {
        "id": 84,
        "text": "\n\nВаши достижения:\n",
        "comment": false,
        "merge": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\ng.cleaner = g.cleaner or 0\ng.hunter = g.hunter or 0\ng.mech  = g.mech or 0\ng.kitchen = g.kitchen or 0\ng.cancel = g.cancel or 0\ng.robust = g.robust or 0\ng.flowers = g.flowers or 0\ng.sniper = g.sniper or 0\ng.talking = g.talking or 0\ng.secret = g.secret or 0\ng.rounds = g.rounds or 0\n\ng[\"lua_tap\" .. \"achFlower\"] = [[lua_tap = \n   function() \n      dialog({header = \"Роковой букет\", text = \"Пижме удалось победить в бою благодаря полученным чароцветам.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedFlower\"] = [[lua_tap = \n   function() \n      dialog({header = \"Роковой букет<s>\n(не получено)\", text = \"В этом квесте цветы повсюду. Даже в названии. Осталось найти те самые.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achSniper\"] = [[lua_tap = \n   function() \n      dialog({header = \"Снайпер\", text = \"Корел оказался достаточно меток, чтобы попасть в Пижму из арбалета.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedSniper\"] = [[lua_tap = \n   function() \n      dialog({header = \"Снайпер<s>\n(не получено)\", text = \"Выстрелы настоящего снайпера даже по самой сложной цели не останутся незамеченными.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achSecret\"] = [[lua_tap = \n   function() \n      dialog({header = \"Никто не любит ябед\",  text = \"Корел окончательно потерял доверие Иссопа из-за попытки доноса.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedSecret\"] = [[lua_tap = \n   function() \n      dialog({header = \"Никто не любит ябед<s>\n(не получено)\", text = \"Попробуйте узнать почему.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achMech\"] = [[lua_tap = \n   function() \n      dialog({header = \"Справится любая кухарка\", text = \"Корелу удалось собрать сложный механизм благодаря навыкам, выученным у Старой Бэтти.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedMech\"] = [[lua_tap = \n   function() \n      dialog({header = \"Справится любая кухарка<s>\n(не получено)\", text = \"Если не управлению государством, то чему-то полезному точно можно научиться на кухне. Попробуйте.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achHunter\"] = [[lua_tap = \n   function() \n      dialog({header = \"Охотник\", text = \"Корелу удалось добыть на охоте ценный трофей\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedHunter\"] = [[lua_tap = \n   function() \n      dialog({header = \"Охотник<s>\n(не получено)\", text = \"Эти леса ещё могут удивить охотника ценным трофеем.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achCleaner\"] = [[lua_tap = \n   function() \n      dialog({header = \"Честный уборщик\", text = \"Корелу не было жаль потратить почти всё отведённое время на уборку.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedCleaner\"] = [[lua_tap = \n   function() \n      dialog({header = \"Честный уборщик<s>\n(не получено)\", text = \"Иногда значок достижения – единственная награда за очевидно бессмысленные действия.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achSoup\"] = [[lua_tap = \n   function() \n      dialog({header = \"Завсегдатай\", text = \"Корел так часто наведывался на кухню, что даже болтливой Бэтти стало нечем с ним поделиться.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedSoup\"] = [[lua_tap = \n   function() \n      dialog({header = \"Завсегдатай<s>\n(не получено)\", text = \"Приятно бывать там, где вам всегда рады.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achTalk\"] = [[lua_tap = \n   function() \n      dialog({header = \"Интриган\", text = \"Корел сумел завоевать доверие Гамамелиса шантажом и обманом\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedTalk\"] = [[lua_tap = \n   function() \n      dialog({header = \"Интриган<s>\n(не получено)\", text = \"Некоторые люди не гнушаются никакими средствами для достижения своих целей.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achCancel\"] = [[lua_tap = \n   function() \n      dialog({header = \"Признание\", text = \"Корел подмешал снотворное Бэтти, но успел предотвратить последствия этого.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedCancel\"] = [[lua_tap = \n   function() \n      dialog({header = \"Признание<s>\n(не получено)\", text = \"Иногда последствия своих действий можно вовремя исправить.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achRobust\"] = [[lua_tap = \n   function() \n      dialog({header = \"Чтобы наверняка\", text = \"Корелу удалось добавить снотворное и в воду из кувшина Бэтти, и в чан с похлебкой.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"closedRobust\"] = [[lua_tap = \n   function() \n      dialog({header = \"Чтобы наверняка<s>\n(не получено)\", text = \"Нет смысла выбирать один из двух вариантов, если можно попробовать оба.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\ng[\"lua_tap\" .. \"achRounds\"] = [[lua_tap = \n   function() \n      dialog({header = \"Круги на воде<s>\n(секретное)\", text = \"Корел бросал камни в воду полдюжины раз, хотя понимал, что это не поможет ему в снайперской дуэли.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\nend",
        "text": "text",
        "id": 84,
        "calculate": true
      },
      {
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn g.flowers  == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achFlower",
          "dump"
        ],
        "widget": [
          "achFlower",
          "https://i.ibb.co/ky6p4TQ/flower.png",
          ""
        ],
        "lua_do": "function lua_do()\ndump = \"\"\nend"
      },
      {
        "widget_show": [
          "closedFlower",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.flowers == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedFlower",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.sniper ==1\nend",
        "super_calculate": false,
        "id": 84,
        "text": "Новый ответ. введите текст",
        "widget": [
          "achSniper",
          "https://i.ibb.co/bdxSDx1/target.png",
          ""
        ],
        "widget_show": [
          "achSniper",
          "dump"
        ]
      },
      {
        "widget_show": [
          "closedSniper",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.sniper == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedSniper",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.secret == 1\nend",
        "super_calculate": false,
        "id": 84,
        "text": "Новый ответ. введите текст",
        "widget": [
          "achSecret",
          "https://i.ibb.co/yhPXsSk/secret.png",
          ""
        ],
        "widget_show": [
          "achSecret",
          "dump"
        ]
      },
      {
        "widget_show": [
          "closedSecret",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.secret == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedSecret",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.mech == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achMech",
          "dump"
        ],
        "widget": [
          "achMech",
          "https://i.ibb.co/DtFP3BY/mech.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "widget_show": [
          "closedMech",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.mech == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedMech",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.kitchen == 1\nend",
        "super_calculate": false,
        "id": 84,
        "text": "Новый ответ. введите текст",
        "widget": [
          "achSoup",
          "https://i.ibb.co/rGJHg20/soup.png ",
          ""
        ],
        "widget_show": [
          "achSoup",
          "dump"
        ]
      },
      {
        "widget_show": [
          "closedSoup",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.kitchen == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedSoup",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "text": "¡¡¡ Добавить картинку !!!",
        "lua_if": "function lua_if()\nreturn g.cancel == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achCancel",
          "dump"
        ],
        "widget": [
          "achCancel",
          "https://i.ibb.co/5nj3T3z/image.png",
          ""
        ],
        "calculate": true
      },
      {
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn g.cancel == 0\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "closedCancel",
          "dump"
        ],
        "widget": [
          "closedCancel",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "calculate": true
      },
      {
        "text": "¡¡¡ Добавить картинку !!!",
        "lua_if": "function lua_if()\nreturn g.robust == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achRobust",
          "dump"
        ],
        "widget": [
          "achRobust",
          "https://i.ibb.co/MBJTVnt/1.png",
          ""
        ],
        "calculate": true
      },
      {
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn g.robust == 0\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "closedRobust",
          "dump"
        ],
        "widget": [
          "closedRobust",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "calculate": true
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.hunter == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achHunter",
          "dump"
        ],
        "widget": [
          "achHunter",
          "https://i.ibb.co/1bpBjLV/hunt.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "widget_show": [
          "closedHunter",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.hunter == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedHunter",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.cleaner == 1\nend",
        "super_calculate": false,
        "id": 84,
        "text": "Новый ответ. введите текст",
        "widget": [
          "achCleaner",
          "https://i.ibb.co/ws6J1jZ/clean.png",
          ""
        ],
        "widget_show": [
          "achCleaner",
          "dump"
        ]
      },
      {
        "widget_show": [
          "closedCleaner",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.cleaner == 0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedCleaner",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "calculate": true,
        "lua_if": "function lua_if()\nreturn g.talking == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achTalk",
          "dump"
        ],
        "widget": [
          "achTalk",
          "https://i.ibb.co/zH7g302/intrigue.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "widget_show": [
          "closedTalk",
          "dump"
        ],
        "lua_if": "function lua_if()\nreturn g.talking ==0\nend",
        "super_calculate": false,
        "id": 84,
        "calculate": true,
        "widget": [
          "closedTalk",
          "https://i.ibb.co/XJYsVHD/closed.png",
          ""
        ],
        "text": "Новый ответ. введите текст"
      },
      {
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nreturn g.rounds == 1\nend",
        "super_calculate": false,
        "id": 84,
        "widget_show": [
          "achRounds",
          "dump"
        ],
        "widget": [
          "achRounds",
          "https://i.ibb.co/zRyH41X/Lumii-20240506-144901356.jpg",
          ""
        ],
        "calculate": true
      }
    ]
  },
  {
    "id": 85,
    "text": "– Я принёс кое-что, – замялся Корел, крутя в пальцах небольшой флакон. – Вот, это поможет от бессонницы.\n\n– Эх, пропащая душа, – засияла кухарка и даже стала выглядеть почти как живой человек. – Спасибо, чужак. Я знала, что сердце у тебя доброе...\n\nОна приняла из его рук снотворное, печально вздохнула, всматриваясь сквозь неровное стекло внутрь, и убрала куда-то на полку между баночек с приправами. Корел, пристально наблюдавший за этими перемещениями, заметил целый ряд точно таких же флаконов.\n\n– Снотворное не помогает? – удручённо кивнул он на полку.\n\n– Просто ещё не время, милый. Спасибо за заботу.",
    "answers": [
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nlocal a = skipKitchenScene or 0\nlocal b = a == 0 and 1 or 4\nrestTime = restTime -  b\nskipKitchenScene = 0\nend"
      }
    ]
  },
  {
    "id": 86,
    "text": "На этот раз Корел без лишних церемоний зашёл в каменный дом. Внутри царила тишина.\n\nКорел попытался пройти в мастерскую Аконита, но дверь оказалась заперта. Он несколько раз постучал, затем громко позвал хозяина по имени. Безрезультатно. Похоже, иметь дел с чужакам тот больше не хотел.",
    "answers": [
      {
        "id": 11,
        "text": "Выйти из дома",
        "lua_do": "function lua_do()\nrestTime = restTime - 1\nend"
      }
    ]
  },
  {
    "id": 87,
    "text": "Говорят, не заметить чароцветы  невозможно. Корел никогда не видел приписываемого им тусклого свечения, но найти их и впрямь оказалось легко: изящные кусты с нежными белыми цветами проглядывали то тут, то там. Как вообще эти обитатели волшебных оранжерей, прихотливые к магии и бережному уходу, могли выжить здесь среди бурьяна?\n\nКорел осторожно срезал ножом с дюжину веток чароцветов, от каждого движения осыпающих всё вокруг блестящей пыльцой, и сложил в один из мешков.\n\n",
    "answers": [
      {
        "id": 14,
        "text": "Новый ответ. введите текст",
        "run": [
          14
        ],
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned == 0\nend"
      },
      {
        "id": 89,
        "text": "Новый ответ. введите текст",
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned > 0\nend",
        "run": [
          89
        ]
      }
    ]
  },
  {
    "id": 88,
    "text": "Найти в разноцветье длинные стебли кипрея оказалось непросто. Большая часть его уже отцвела, и жухлые невыразительные бутоны сливались с полевой травой.\n\nКорел потратил изрядно времени, пока не заполнил небольшой мешочек вырванными вместе с корнем растениями.",
    "answers": [
      {
        "id": 14,
        "text": "Новый ответ. введите текст",
        "run": [
          14
        ],
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned == 0\nend"
      },
      {
        "id": 89,
        "text": "Новый ответ. введите текст",
        "run": [
          89
        ],
        "lua_if": "function lua_if()\nfieldStatReturned = fieldStatReturned or 0\n\nreturn fieldStatReturned > 0\nend"
      }
    ]
  },
  {
    "id": 89,
    "text": "empty",
    "answers": [
      {
        "id": 14,
        "text": "text",
        "lua_text": "function lua_text()\nlocal text = \"\"\nfieldStatReturned = (fieldStatReturned or 0) <plus> 1\n\ntext = (fieldStatReturned == 1 and [=[Пройдя до самой окраины поселения, Корел обернулся. Останавливать его никто не собирался: хоть сейчас уходи. Но пускаться в бега, оставив вещи и оружие, казалось глупым, и Корел отбросил эту мысль.\n\nОн шёл против ветра, вдыхая еле уловимые запахи полевых трав, пока от леса не остались лишь высокие кусты. Там за редкими соснами и берёзами шумело поле.\n\nК самой кромке леса жались дикие плодовые деревья. Их ветви были усыпаны мелкими жёлтыми и зелёными фруктами, и ещё больше оказалось на земле.\n\nБез оружия даже думать об охоте не было смысла.]=] ) or (\n\nfieldStatReturned == 2 and [=[Пройдя до самой окраины поселения, Корел обернулся. Останавливать его никто не собирался.\n\nОн шёл против ветра, вдыхая еле уловимые запахи полевых трав, пока от леса не остались лишь высокие кусты. Там за редкими соснами и берёзами шумело поле.\n\nК самой кромке леса жались дикие плодовые деревья. Их ветви были усыпаны мелкими жёлтыми и зелёными фруктами, ещё больше валялось на земле.\n\nБез оружия даже думать об охоте не было смысла.]=] )\n\nor\n\n[=[Корел вновь оглядел поле, пышущее разноцветьем и шелестящее на ветру миллионнами колосков.\n\nК самой кромке леса жались дикие плодовые деревья. Их ветви были усыпаны мелкими жёлтыми и зелёными фруктами, и ещё больше оказалось на земле. Несколько крупных птиц периодически слетали вниз, чтобы ими полакомиться.]=]\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 16,
        "text": "Собирать фрукты",
        "lua_if": "function lua_if()\nreturn fruit ~= 1 and restTime > 2\nend",
        "lua_do": "function lua_do()\nrestTime = restTime - 2\nfruit = 1\nfieldStatReturned = 3\nend"
      },
      {
        "id": 19,
        "text": "Собрать травы",
        "lua_if": "function lua_if()\n\ncharmFlowers = charmFlowers or 0\nchamaenerion = chamaenerion or 0\nmeetRosy = meetRosy or 0\n\nif meetRosy > 0 then\n  charmFlowers = charmFlowers > 1 and charmFlowers or 1\nend\n\nreturn restTime > 2 and (charmFlowers == 1 or chamaenerion == 1)\nend",
        "lua_do": "function lua_do()\nfieldStatReturned = 3\nend"
      },
      {
        "id": 90,
        "text": "Вернуться в поселение",
        "lua_do": "function lua_do()\nrestTime = restTime - 3\nfieldStatReturned = 1 \nend"
      },
      {
        "id": 14,
        "text": "Укажите команды для картинки",
        "lua_if": "function lua_if()\nreturn g.current_id == 89\nend",
        "url": "https://i.ibb.co/b2rRVGC/IMG-20231125-122531-1700928647120-1.png"
      }
    ]
  },
  {
    "id": 90,
    "text": "Корел бросил последний взгляд на колышущееся поле и зашагал назад. Уже скоро деревья сомкнулись, полностью закрывая небо, и расступились вновь перед развилкой, с которой отчётливо виднелся показанный Бизом ориентир. Путь до поселения обошёлся без приключений.\n\n",
    "answers": [
      {
        "id": 11,
        "text": "Новый ответ. введите текст",
        "run": [
          11
        ]
      }
    ]
  },
  {
    "id": 91,
    "text": "– Эй! – снова крикнул Корел.\n\n– Уже закончил с уборкой? – отозвался хозяин дома из-за двери справа.",
    "answers": [
      {
        "id": 42,
        "text": "– Ещё нет.",
        "lua_if": "function lua_if()\nreturn cleaning <15\nend",
        "lua_do": "function lua_do()\n\ncleaning = cleaning <plus> 1\n  if cleaning == 14 then\n    restTime = restTime - 4\n  elseif cleaning > 8 then\n     restTime = restTime - 3\n  elseif cleaning > 3 then\n     restTime = restTime - 2\n  else restTime = restTime - 1\nend\n\nend"
      },
      {
        "id": 43,
        "text": "– Да."
      }
    ]
  },
  {
    "id": 92,
    "text": "",
    "answers": []
  },
  {
    "id": 93,
    "text": "станица для g.reloadFunctions\nautorun page",
    "answers": [
      {
        "calculate": false,
        "widget_show": [
          "resTime",
          "restTime"
        ],
        "lua_if": "function lua_if()\nreturn g.current_id ~= 2 and disWid ==0\nend",
        "super_calculate": true,
        "id": 93,
        "text": "виджет",
        "widget": [
          "resTime",
          "https://i.ibb.co/M5VxZpb/IMG-20231027-225957-1698437136008.png",
          ""
        ],
        "lua_do": "function lua_do()\n\ng.reloadFunctions = 93\n\nrestTime = restTime or 30\n\ng[\"lua_text_widget\".. \"hunt_widget\"] = [[lua_text_widget = \n   function() \n      return (hunting < 2 and 0) or (hunting <4 and 1) or (hunting < 6 and 2) or 10\n   end]] \n\n\n   g[\"lua_tap\" .. \"resTime\"] = [[lua_tap = \n   function() \n      dialog({header = \"Время\", text = \"Нужно успеть закончить все важные дела до заката.\", answers = {{text = \"Ок\", pressListener = function () hideDialog() end}}})\n   end]]\n\nfunction snipWait()\nif snipShots == 0 then\nsnipShotText = \"Корел успел сосчитать до полутора дюжин, но выстрелов не последовало.\"\nsnipShots = 6\nsnipTime = snipTime <plus> 1\nelseif snipShots == 6 then\nlocal r = math.random(4,6)\nsnipShots = snipShots - r\nsnipShotText = ({\n\"Одинокая стрела пролетела совсем рядом с ухом Корела. И это всё?\",\n\"Стрела рассекла воздух над самой травой, почти сразу же намного выше пролетела ещё одна.\",\n\"3\",\n\"Четыре стрелы очередью пронеслись в сторону укрытия Корела и упали в траву неподалёку.\",\n\"Снова стрельба. Пять стрел разлетались от дуба широкой дугой, и Корел порадовался, что приём оказался совсем бесполезным на таком удалении.\",\n\"Стрелы свистели с разных сторон одна за одной. Две, три, четыре... Да сколько их там ещё? Только после шестого снаряда всё на время стихло.\"})[r]\nelse\nlocal r = math.random(1,snipShots)\nsnipShots = snipShots - r\nsnipShotText = ({\n\"Одинокая стрела пролетела совсем рядом с ухом Корела. И это всё?\",\n\"Стрела рассекла воздух над самой травой, почти сразу же намного выше пролетела ещё одна.\",\n\"3\",\n\"Четыре стрелы очередью пронеслись в сторону укрытия Корела и упали в траву неподалёку.\",\n\"Снова стрельба. Пять стрел разлетались от дуба широкой дугой, и Корел порадовался, что приём оказался совсем бесполезным на таком удалении.\",\n\"Стрелы свистели с разных сторон одна за одной. Две, три, четыре... Да сколько их там ещё? Только после шестого снаряда всё на время стихло.\"\n})[r]\nend\n\n\nend\n\n\n\nend"
      },
      {
        "comment": false,
        "super_calculate": true,
        "lua_do": "function lua_do()\ncleaning = cleaning or 0\n\n\n\nfunction diaClean()\nif cleaning == 15 then\nnewAchieve(\"cleaner\")\nend\nend\n\n\nfunction newAchieve(t)\nlocal a = g[t] or 0\n if a == 0 then\n   g[t] = 1\n   vars[\"achPointer\"] = t\n   vars[\"pointerCount\"] = 2\n  end\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "calculate": false,
        "id": 18
      }
    ]
  },
  {
    "id": 94,
    "text": "\"Может, в этом есть смысл? Выживу – значит к добру\", – решил Корел, осторожно выглядывая из укрытия. Ещё одна стрела звякнула о камень и отскочила в сторону. Короткая, лёгкая, с уплощением на конце вместо оперения.\n\n\"Ба, скорострельный арбалет!\", – восхитился он. Похоже, примета и впрямь оказалась счастливой.\n\nВо-первых, противник мог быть всего один, а это лучше, чем трое. Во-вторых, такими игрушками не балуются серьёзные колдуны, что кратно повышало шансы выжить. И самое главное, это – оружие для охоты, а не для серьёзных сражений, дальность у него заметно меньше, даже чем у излюбленной духовой трубки Корела.\n\nОн высунулся из-за другого края камня, пытаясь против солнца разглядеть возможную позицию врага, и тут же ещё две стрелы поочерёдно просвистели над самой травой. Ага, три сейчас и ещё три в начале. Получается – трёх- или шестизарядный, вряд ли больше. Теперь есть пара дюжин секунд, чтобы осмотреться и что-то предпринять.",
    "answers": [
      {
        "id": 77,
        "text": "Дальше",
        "widget": [
          "helpButton",
          "https://i.ibb.co/mSN0CLL/help-Button.png",
          ""
        ],
        "lua_do": "function lua_do()\nautorun = nil\nend"
      }
    ]
  },
  {
    "id": 95,
    "text": "empty",
    "answers": [
      {
        "id": 33,
        "text": "<$2><b>Выглядело, будто всё вокруг – весёлая игра, в которой Пижма только начала входить в азарт.</b><$1> Корелу уже было видно, что натиск нападающих вот-вот иссякнет. Кажется, понимал это и Гамамелис.\n\nЕщё до того, как упали на пол последние жители, он вскинул руку, и с крючковатых пальцев сорвался и полетел в спину девушки сноп голубых искр. Выходит, глава поселения изгоев – колдун?!\n\nПижма, словно почувствовав опасность, развернулась и небрежным движением отмахнулась от искр. Они с шипением впились в стены и потолок вокруг, оставляя алеющие отметины. Девушка же от такого поворота событий пришла в восторг. Похоже, расправа с толпой беспомощных людей хоть и отнимала силы, не доставляла ей особого удовольствия. Ну а настоящая магическая дуэль – совсем другое дело.",
        "lua_if": "function lua_if()\nreturn winner ~= 2 -- условие Пижма побеждает, Старик начинает колдовать\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "<$2><b>Выглядело, будто Пижма, поначалу бесшабашно весёлая и ловкая, начинала уставать.</b><$1> То ли люди действовали слишком слаженно, то ли их оказалось больше, чем она рассчитывала, но уже через какое-то время её акробатические прыжки сменились на более сдержанные перемещения, а затем она вообще стала защищаться на месте.\n\nНападающих становилось меньше, но, кажется, терпение девушки лопнуло: она крутанулась на месте, вырисовывая неимоверные узоры тонкими пальцами и шепча длинное заклинание. Кольцо голубого света вспыхнуло вокруг неё и разлилось во все стороны волной холода. Попадавшие в него мгновенно коченели и падали, покрываясь инееем. Корел едва успел нырнуть за груду бездыханных тел и тут же ощутил через одежду обжигающий мороз, просачивающийся сквозь его ненадёжное укрытие.\n\nА Гамамелис прятаться не стал. Сложив руки на трости, он быстро что-то бормотал и, когда ледяной фронт приблизился, окружил себя золотистым сиянием, растворившим в себе холод. Выходит, глава поселения изгоев – колдун?!",
        "lua_if": "function lua_if()\nreturn winner == 2 -- условие Пижма слабеет и начинает колдовать\nend",
        "merge": true
      },
      {
        "id": 96,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 96,
    "text": "empty",
    "answers": [
      {
        "id": 33,
        "text": "Наконец, последний поселенец пал, и маленькое помещение, сплошь усеянное телами, стало ареной для магической схватки и единственного зрителя. Волшебные стрелы разбивались об энергетические щиты, столбы пламени вздымались к потолку и замерзали ледяными глыбами.\n\nКорел пытался вспомнить, не предписывали ли приметы скорой гибели тому, кто заметил столько ударов молнии подряд, и отчаянно вжимался в пол, пытаясь укрыться грудой своих вещей.\n\n",
        "merge": true
      },
      {
        "id": 33,
        "text": "Казалось, противники не уступали друг другу в мастерстве, и любая случайность могла переломить исход боя. Действия Корела в поселении в течение дня сыграли на руку Пижме, и со временем стало заметно, что <$2><b>ей удалось сохранить больше сил</b><$1>.",
        "lua_if": "function lua_if()\nreturn winner == 1\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "Казалось, противники не уступали друг другу в мастерстве, и любая случайность могла переломить исход боя. Действия Корела в поселении в течение дня сыграли против Пижмы, и со временем стало заметно, что  <$2><b>она потратила слишком много сил</b><$1> в сражении с простыми жителями. На это, видимо, рассчитывал и Гамамелис.",
        "lua_if": "function lua_if()\nreturn winner == 2\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "Казалось, противники не уступали друг другу в мастерстве, и любая случайность могла переломить исход боя. Действия Корела в поселении в течение дня не дали преимущества ни одной из сторон. Со временем стало понятно, что  <$2><b>ни Пижме, ни старику не хватит сил одолеть друг друга</b><$1>.",
        "lua_if": "function lua_if()\nreturn winner == 3\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "\n\nНеожиданно, в этом хаосе звуков и огней что-то блеснуло прямо рядом с Корелом. Ну конечно – <$2><b>пузырёк с волшебной пылью!</b><$1> Изгой слышал, что она способна непредсказуемо преображать заклинания, и, кажется, оказался в такой ситуации, где это можно проверить на практике.",
        "lua_if": "function lua_if()\nreturn target == 0\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\ndust = 0\nblowDust =1\nend",
        "text": "Бросить склянку с волшебной пылью",
        "lua_if": "function lua_if()\nreturn target == 0\nend",
        "id": 97
      },
      {
        "id": 34,
        "text": "Не вмешиваться",
        "lua_do": "function lua_do()\n\n--if achFlowers == 1 and winner == 1  then\n--  newAchieve(\"flowers\")\n--end\n\n--if sniperAch == 1 and winner == 2 then\n--  newAchieve(\"sniper\")\n--end\n\n\nblowDust = 0\nend"
      }
    ]
  },
  {
    "id": 97,
    "text": "empty",
    "answers": [
      {
        "id": 34,
        "text": "В разгаре схватки никто не заметил, как Корел бросил пузырёк с волшебной пылью в самый центр помещения. Стекло разбилось, и <$2><b>пыль взметнулась невидимым облачком вверх</b><$1>.\n\nГамамелис сражался всё сдержаннее и осторожнее, но даже это не могло изменить уже предопределённый исход. Почувствовав, что противник истощён, Пижма раскрутила в воздухе перед собой нить чистой энергии и попыталась набросить её на старика, как лассо.\n\n<$2><b>Но тут пространство между ними заискрилось, и нить разветвилась в чудовищную молнию</b><$1>. Девушка явно не ожидала такого эффекта от собственного колдовства и в ужасе таращилась на свои руки, из которых продолжала непроизвольно утекать её сила. Старику молнии не причиняли вреда, он вознёс руки к морщинистому лицу и торжествующим голосом произнёс:\n\n– Ты отвергла наше гостеприимство. Напала на беззащитных людей. Посеяла семена раздора...\n\nПижма не стала дожидаться окончания фразы. Ещё до того, как яркий свет из ладоней Гамамелиса заполнил комнату и заставил Корела зажмуриться, она выпрыгнула в окно и растворилась в темноте.",
        "lua_if": "function lua_if()\nblowDust = blowDust or 0 \nwinner = winner or 1\nreturn blowDust == 1 and winner == 1 -- условие бросает пыль и девушка побеждает\nend",
        "merge": true
      },
      {
        "id": 34,
        "text": "В разгаре схватки никто не заметил, как Корел бросил пузырёк с волшебной пылью в самый центр помещения. Стекло разбилось, и <$2><b>пыль взметнулась невидимым облачком вверх.</b><$1>\n\nИ вот, Пижма подскочила к старику почти в упор. Вихрь молний с треском сорвался с её рук. Воздух заискрился, должно быть <$2><b>волшебство попусту разряжалось на магических пылинках.</b><$1> Но даже так Корел, до сих пор прячущийся в дальнем углу, чувствовал всю мощь этого заклинания, и ту беспомощность, которая вынудила девушку применить его. Гамамелис не шелохнулся. Разряды проходили мимо него, не причиняя вреда, и продолжали вхолостую трещать вокруг. Всё было кончено.\n\nДевушка завалилась на колени, на щеках заблестели слёзы. Она не смогла. Старик вознёс руки к морщинистому лицу и торжествующим голосом произнёс:\n\n– Ты отвергла наше гостеприимство. Напала на беззащитных людей. Посеяла семена раздора...\n\nПижма не стала дожидаться окончания фразы. Ещё до того, как яркий свет из ладоней Гамамелиса заполнил комнату и заставил Корела зажмуриться, она выпрыгнула в окно и растворилась в темноте.",
        "lua_if": "function lua_if()\nreturn blowDust == 1 and winner > 1 -- условие бросает пыль и старик побеждает\nend",
        "merge": true
      },
      {
        "id": 98,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 98,
    "text": "– Ты жив... – отметил, а не спросил Гамамелис, взглянув на Корела.\n\nТеперь он осунулся и словно постарел на дюжину лет. Властность движений уступила усталости. Корел неуверенно приблизился к старику.\n\n– Теперь всё поменялось, – мрачно продолжил он. – Труды моих людей обратились прахом. Новый мир, который мы заложили здесь, погиб. И даже их вера в меня предана...\n\nКолдун застыл, уставившись на трость в своих ладонях, и как будто совсем забыл о собеседнике.\n\n– Мне жаль, – выдавил Корел.\n\n– Тебе не жаль, ты даже не попытался стать своим для этих людей, не...\n\n<$2><b>Гамамелис решительно одёрнул руку с тростью, будто окончательно решив что-то для себя.</b><$1>\n\n– Это – потухший реликт? – запоздало догадался Корел, и старик кивнул.\n\n– Всплеск магии несомненно привлёк к этому месту лишнее внимание, – проворчал Гамамелис. – Сначала придут пожиратели, потом искатели артефактов. Но ещё раньше вернётся она... И я больше не смогу защитить поселение. Я отправлюсь в изгнание. Я сделаю так, чтобы этот реликт не попал в злые руки. Любой ценой... А ты иди своей дорогой, мы больше не станем удерживать тебя.",
    "answers": [
      {
        "id": 99,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 99,
    "text": "Корел быстро собрал в мешок свои вещи и направился к выходу. Люди на полу стали медленно приходить в себя, помещение наполнилось стонами и проклятиями. Выходит, Пижма использовала сонный яд и никого не убила.\n\nИзгой прошёл через толпу с факелами, окружившую домик. Никто не попытался остановить Корела. Никто не решался хотя бы приблизиться к двери или заглянуть в окна. Корел встретился глазами с заплаканной девочкой с завядшими цветами в спутанных волосах и быстро отвёл взгляд.\n\nОн уходил, не оглядываясь на простых людей в беде, на новых знакомых, на ещё дымящееся пепелище на месте хижины Иссопа. Его ждал долгий путь назад, в земли орков. А оборачиваться, когда уходишь навсегда, – плохая примета.\n\n\n✮ Открыта концовка «Плохая примета» ✮\n",
    "answers": [
      {
        "id": 1,
        "text": "Конец"
      },
      {
        "id": 2,
        "newAnswerImage": [
          "https://i.ibb.co/zn72wnf/Lumii-20240508-154614653.png"
        ],
        "comment": true,
        "text": "   "
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.endings = g.endings or {}\n\n\n   g.endings.bad = 1\n\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 99
      }
    ]
  },
  {
    "id": 100,
    "text": "empty",
    "answers": [
      {
        "comment": false,
        "id": 35,
        "text": "Новый ответ. введите текст",
        "lua_do": "function lua_do()\nblowDust = 0\nmeetRosy = 1\napproved =2\nend",
        "lua_if": "function lua_if()\nreturn false\nend"
      },
      {
        "lua_if": "function lua_if()\n\nblowDust = blowDust or 0\nmeetRosy = meetRosy or 0 \ngamaTrust = gamaTrust or 0\n\ng.endings = g.endings or {}\n\nif blowDust == 1 or meetRosy == 0 or gamaTrust == 0 then\n   g.endings.bad = 1\nend\n\nif blowDust == 0 and meetRosy == 1 and  gamaTrust == 1 then\n   g.endings.good = 1\nend\n\n\nreturn true\nend",
        "super_calculate": true,
        "lua_do": "function lua_do()\n\nblowDust = blowDust or 0\nmeetRosy = meetRosy or 0 \ngamaTrust = gamaTrust or 0\n\ng.endings = g.endings or {}\n\nif blowDust == 1 or meetRosy == 0 or gamaTrust == 0 then\n   g.endings.bad = 1\nend\n\nif blowDust == 0 and meetRosy == 1 and  gamaTrust == 1 then\n   g.endings.good = 1\nend\n\nend",
        "text": "Новый ответ. введите текст",
        "id": 35,
        "calculate": false
      },
      {
        "id": 35,
        "text": "Корел быстро собрал в мешок свои вещи и направился к выходу. Люди на полу стали медленно приходить в себя, помещение наполнилось стонами и проклятиями. Выходит, Пижма использовала сонный яд и никого не убила?\n\nИзгой прошёл через толпу с факелами, окружившую домик. Никто не попытался остановить Корела. Никто не решался хотя бы приблизиться к двери или заглянуть в окна.\n\nКорел нашёл среди людей Роузи. У неё припухло лицо и покраснели глаза, цветы в спутанных волосах завяли.\n\n– Никто не умер, – шепнул ей на ухо Корел, – они все просто спят. И я наконец-то нашёл то, что тебе понравится.\n\nОн вложил в маленькую ладошку девочки пузырёк с пылью Древних. Магическая субстанция взметнулась облачком от движения и заблестела в отсвете огней.\n\n– Она волшебная, – ответил он на удивлённый взгляд Роузи и подмигнул. – Иметь такую – к большой удаче.\n\nИ Корел ушёл. Ушёл, не оглядываясь на людей в беде и на одного очарованного ребёнка. Его ждал долгий путь назад, в земли орков. Но теперь он был уверен, что доберётся. Теперь он чувствовал, что искренний подарок перед трудным делом – его новая хорошая примета.\n\n✮ Открыта концовка «Хорошая примета»",
        "lua_if": "function lua_if()\nmeetRosy = meetRosy or 0\nreturn blowDust == 0 and meetRosy == 1 and gamaTrust == 1-- условие сохранил пыль и говорил с девочкой\nend",
        "merge": true
      },
      {
        "id": 35,
        "text": "Корел быстро собрал в мешок свои вещи и направился к выходу. Люди на полу стали медленно приходить в себя, помещение наполнилось стонами и проклятиями. Выходит, Пижма использовала сонный яд и никого не убила.\n\nИзгой прошёл через толпу с факелами, окружившую домик. Никто не попытался остановить Корела. Никто не решался хотя бы приблизиться к двери или заглянуть в окна. Корел встретился глазами с заплаканной девочкой с завядшими цветами в спутанных волосах и быстро отвёл взгляд.\n\nОн уходил, не оглядываясь на простых людей в беде, на новых знакомых, на ещё дымящееся пепелище на месте хижины Иссопа. Его ждал долгий путь назад, в земли орков. А оборачиваться, когда уходишь навсегда, – плохая примета.\n\n\n✮ Открыта концовка «Плохая примета» ✮\n",
        "lua_if": "function lua_if()\n\nreturn blowDust == 1 or meetRosy == 0 or gamaTrust == 0-- условие не сохранил пыль или не встретил девочку\nend",
        "merge": true
      },
      {
        "id": 1,
        "text": "Конец"
      },
      {
        "id": 2,
        "newAnswerImage": [
          "https://i.ibb.co/zn72wnf/Lumii-20240508-154614653.png"
        ],
        "comment": true,
        "text": "   "
      },
      {
        "id": 35,
        "text": "small",
        "url": "https://i.ibb.co/qy3SbD0/IMG-20231125-121845.png"
      }
    ]
  },
  {
    "id": 101,
    "text": "empty",
    "answers": [
      {
        "id": 31,
        "text": "Больше внутрь никто попасть не пытался. Похоже, основная часть жителей оказалась слишком занята другими проблемами, требующими немедленного решения. <$2><b>Наверное, пожар до сих пор не потушили, да ещё и потерявшая над собой контроль Бэтти оттянула многих людей на себя.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 0 and betAsleep == 1 -- условие водокачка сломана, Бэтти спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Ещё около дюжины человек ввалилось внутрь. Похоже, далеко не все жители пришли на штурм. <$2><b>Наверное, остальные ещё боролись с пожаром.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 0 and betAsleep == 0 -- условие водокачка сломана, но Бэтти не спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Ещё около дюжины человек ввалилось внутрь. Похоже, не все жители пришли на штурм. <$2><b>Судя по запаху гари и копоти на лицах, с пожаром уже справились, так что остальные скорее всего были заняты усмирением потерявшей над собой контроль Бэтти.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 1 and betAsleep == 1 -- условие водокачка не сломана, а Бэтти спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "Целая куча людей вливалась внутрь. Похоже, почти все жители поселения пришли на штурм. <$2><b>Должно быть, уже справились с пожаром, а других проблем не было.</b><$1>",
        "lua_if": "function lua_if()\nreturn waterAcces == 1 and betAsleep == 0 -- условие водокачка не сломана и Бэтти не спит\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": " <$2><b>Не было тут только тех, кто успел отужинать превращённой в снотворное похлёбкой</b><$1>.",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and waterAcces == 1 and betAsleep == 0 -- условие все спят, остальные не месте\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": " <$2><b>Не было и тех, кто успел отужинать превращённой в снотворное похлёбкой</b><$1>.",
        "lua_if": "function lua_if()\nreturn chamaenerion == 10 and not (waterAcces == 1 and betAsleep == 0)-- условие все спят, но нет не только их\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "\n\nПижма прыгала от одного поселенца к другому, и те падали без чувств от незаметных, но смертельных ударов. Она извивалась змеёй, уворачиваясь от летящих стрел и ножей.\n\nВ суматохе Корел всё-таки смог освободить руки от верёвки. Он бросил быстрый взгляд туда, где лежали в куче его вещи. Затем – на арбалет, валяющийся рядом с телом поблизости.",
        "lua_if": "function lua_if()\nreturn  g.previous_id == 32\nend",
        "merge": true
      },
      {
        "id": 31,
        "text": "\n\nПижма прыгала от одного человека к другому, и те падали без чувств от незаметных, но смертельных ударов. Она извивалась змеёй, уворачиваясь от летящих стрел и ножей.\n\nВ суматоху Корел старался не лезть. Он следил, чтобы старик не удрал, но тот, кажется, и не собирался прятаться. Изгой быстро поднял арбалет, валяющийся рядом с телом поблизости.",
        "lua_if": "function lua_if()\nreturn g.previous_id == 39\nend",
        "merge": true
      },
      {
        "id": 33,
        "text": "Взять арбалет и стрелять в Пижму",
        "lua_text": "function lua_text()\nreturn  g.previous_id == 39 and \"Стрелять в Пижму\" or \"Взять арбалет и стрелять в Пижму\"\nend",
        "lua_do": "function lua_do()\ntarget = 2\nend"
      },
      {
        "id": 33,
        "text": "Взять арбалет и стрелять в людей",
        "lua_text": "function lua_text()\nreturn  g.previous_id == 39 and \"Стрелять в людей\" or \"Взять арбалет и стрелять в людей\"\nend",
        "lua_do": "function lua_do()\ntarget = 1\nend"
      },
      {
        "id": 33,
        "text": "Бежать к вещам",
        "lua_if": "function lua_if()\nreturn true\nend",
        "lua_do": "function lua_do()\ntarget = 0\nend"
      }
    ]
  },
  {
    "id": 102,
    "text": "empty",
    "answers": [
      {
        "id": 102,
        "text": "Умения:",
        "comment": true,
        "lua_if": "function lua_if()\nmechanics = mechanics or 0\nhunting = hunting or 0\n\nreturn mechanics == 1 or hunting  > 3\nend"
      },
      {
        "id": 102,
        "text": "• Базовые навыки механики",
        "comment": true,
        "lua_if": "function lua_if()\nreturn mechanics == 1 \nend"
      },
      {
        "id": 102,
        "text": "• Навык стрельбы из многозарядного арбалета",
        "comment": true,
        "lua_if": "function lua_if()\nreturn hunting  > 3\nend"
      },
      {
        "id": 102,
        "text": "Ноша:",
        "comment": true,
        "lua_if": "function lua_if()\n\ncharmFlowers = charmFlowers or 0\nfruit = fruit or 0\ngetTheSed = getTheSed or 0\nchamaenerion = chamaenerion or 0\n\nreturn charmFlowers == 2 or fruit == 1 or getTheSed == 1 or chamaenerion == 2\nend"
      },
      {
        "id": 102,
        "text": "• Кипрей",
        "comment": true,
        "lua_if": "function lua_if()\nreturn chamaenerion == 2\nend"
      },
      {
        "id": 102,
        "text": "• Чароцветы",
        "comment": true,
        "lua_if": "function lua_if()\nreturn charmFlowers == 2\nend"
      },
      {
        "id": 102,
        "text": "• Дикие фрукты",
        "comment": true,
        "lua_if": "function lua_if()\nreturn fruit == 1\nend"
      },
      {
        "id": 102,
        "text": "• Пузырёк со снотворным",
        "comment": true,
        "lua_if": "function lua_if()\nreturn getTheSed == 1\nend"
      },
      {
        "id": 102,
        "text": "Сведения:",
        "comment": true
      },
      {
        "id": 102,
        "text": "• По словам Гамамелиса участь Корела зависит от того, сколько жителей смогут поручиться за него до захода солнца",
        "comment": true
      },
      {
        "id": 102,
        "text": "За Корела готовы поручиться",
        "comment": true,
        "lua_text": "function lua_text()\nlocal text = \"\"\n\napproved = approved or 0\n\ntext = (approved == 0 and \"• Пока ни один поселенец не готов поручиться за Корела\") or (approved == 1 and \"• Пока только один поселенец готов поручиться за Корела\") or (approved == 2 and \"• Уже два поселенца готовы поручиться за Корела\") or (approved == 3 and \"• Уже три поселенца готовы поручиться за Корела\") or (approved == 4 and \"• Аж четверо поселенцев готовы поручиться за Корела\")\n\nreturn text\nend"
      },
      {
        "id": 102,
        "text": "• Кухарка Старая Бетти давно не спала",
        "comment": true,
        "lua_if": "function lua_if()\n\nknowBetNeedRest = knowBetNeedRest or 0\n\nreturn knowBetNeedRest == 1\nend"
      },
      {
        "id": 102,
        "text": "• Бетти опасна для окружающих, когда спит",
        "comment": true,
        "lua_if": "function lua_if()\ncanCancelBet = canCancelBet or 0\n\nreturn canCancelBet == 1\nend"
      },
      {
        "lua_if": "function lua_if()\n\nknowIssopSecret = knowIssopSecret or 0\n\nreturn knowIssopSecret == 1\nend",
        "id": 102,
        "text": "• Иссоп часто отлучается из дома",
        "comment": true,
        "middle_answer": false
      },
      {
        "comment": true,
        "id": 102,
        "text": "• В поселении действует полный запрет всего магического",
        "middle_answer": false,
        "lua_if": "function lua_if()\n\nknowNoMagicPosition= knowNoMagicPosition or 0\n\nreturn knowNoMagicPosition == 1\nend"
      },
      {
        "id": 102,
        "text": "• Как выглядит кипрей",
        "comment": true,
        "lua_if": "function lua_if()\nreturn chamaenerion > 0\nend"
      },
      {
        "id": 102,
        "text": "• Как выглядят чароцветы",
        "comment": true,
        "lua_if": "function lua_if()\nmeetRosy= meetRosy or 0\n\nreturn charmFlowers > 0 or meetRosy >0\nend"
      },
      {
        "id": 102,
        "text": "• Чароцветы – волшебные цветы",
        "comment": true,
        "lua_if": "function lua_if()\n\nknowCharmflowersAreMagic = knowCharmflowersAreMagic or 0\n\nreturn knowCharmflowersAreMagic == 1\nend"
      },
      {
        "id": 102,
        "text": "• Аконит не в восторге от своих обязанностей в поселении",
        "comment": true,
        "lua_if": "function lua_if()\n\nseenAkonit = seenAkonit or 0\n\nreturn seenAkonit == 1\nend"
      },
      {
        "id": 102,
        "text": "• Аконит хранит у себя Чароцветы",
        "comment": true,
        "lua_if": "function lua_if()\n\nseenTheCharmflowers = seenTheCharmflowers or 0\n\nreturn seenTheCharmflowers  == 1\nend"
      },
      {
        "id": 102,
        "text": "• Брат Биза колдует недалеко от поселения",
        "comment": true,
        "lua_if": "function lua_if()\n knowBizSecret = knowBizSecret or 0\n\nreturn knowBizSecret == 1\nend"
      },
      {
        "id": 102,
        "text": "• Корел отдал чароцветы Пижме",
        "comment": true,
        "lua_if": "function lua_if()\nreturn charmFlowers == 10\nend"
      },
      {
        "id": 102,
        "text": "• Роузи хочет найти что-то красивое и волшебное",
        "comment": true,
        "lua_if": "function lua_if()\n\nmeetRosy = meetRosy or 0\n\nreturn meetRosy == 1\nend"
      },
      {
        "id": 102,
        "text": "• Колодец в поселении теперь снова работает",
        "comment": true,
        "lua_if": "function lua_if()\n\nwaterAcces = waterAcces or 0\n\nreturn waterAcces == 1\nend"
      },
      {
        "id": 102,
        "text": "• Похлёбка в котле обладает снотворным эффектом",
        "comment": true,
        "lua_if": "function lua_if()\nreturn chamaenerion == 10\nend"
      },
      {
        "id": 102,
        "text": "• Кухарка Старая Бэтти будет спать вечером",
        "comment": true,
        "lua_if": "function lua_if()\n\nbetAsleep = betAsleep or 0\n\nreturn betAsleep == 1\nend"
      },
      {
        "id": 102,
        "text": "• Как пройти к полю возле поселения",
        "comment": true,
        "lua_if": "function lua_if()\n\nfieldVisited = fieldVisited or 0\n\nreturn fieldVisited > 0\nend"
      },
      {
        "right_answer": true,
        "comment": false,
        "middle_answer": false,
        "text": "Достижения",
        "id": 3
      },
      {
        "lua_do": "function lua_do()\ndisWid =disWidSup\ndisWidSup = 1\nend",
        "isBack": true,
        "id": 102,
        "forget": 102,
        "text": "Назад",
        "backstepCount": 1,
        "left_answer": true
      }
    ]
  },
  {
    "id": 103,
    "text": "empty\nновая дуэль\n\n3 локации, разные условия ветер/солнце\nНужно:\nобнаружить противника \nпристреляться\nотвлечь внимание\n\nна каждое действие считать количество стрел, при непопадании в интервал перезарядки — неудачное действие\n\nКамень у тропы (против солнца, по ветру): нельзя стрелять\nЗаросли у ручья (солнце слева, ветер справа) стрелять правее, отвлечь броском палки в воду, можно подобрать камни\nКусты у деревьев (солнце справа, ветер слева) стрелять левее,  отвлечь броском камня в стаю птиц, можно подобрать палку\n\n\nУ камня\n\n",
    "answers": [
      {
        "id": 103,
        "text": "Корел замер за огромным валуном у самой тропы, прячась в его тени от низкого солнца.\n\nСлева бежал мелкий ручей. Заросли рогоза на берегу могли послужить неплохим укрытием.\n\nНижние ветви на деревьях справа от тропы почти цеплялись за густой кустарник, а на верхних громко щебетали какие-то мелкие птицы.",
        "merge": true
      },
      {
        "id": 108,
        "text": "Отображение ноши: камень или ветка",
        "lua_text": "function lua_text()\nlocal text = (snipStick == 1 and \"<s>\n<s>\nВ руке Корел сжимал ветку, найденную в кустах под деревьями.\") or (snipStone == 1 and \"<s>\n<s>\nВ руке Корел сжимал камень, прихваченный на берегу ручья.\") or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 108,
        "text": "чекбокс",
        "lua_text": "function lua_text()\nlocal text = \"\"\nsnipTry = snipTry or 0\nsnipTrySun = snipTrySun or 0\nsnipStickSuccess = snipStickSuccess or 0\nsnipStoneSuccess = snipStoneSuccess or 0\nachRoundsCount = achRoundsCount or 0\nsnipBirdsCount = snipBirdsCount or 0\nsnipCountHelp = snipCountHelp or 0\n\n\n\nif snipTry == 0 and snipTrySun ==0 then\ntext = \"<s>\n<s>\n✦ Корелу нужно пристреляться\"\nelseif snipTry == 0 and snipTrySun == 1 then\ntext = \"<s>\n<s>\n✦ Корелу нужно пристреляться<s>\n<s>\n✘ Солнце мешает пристреляться с этой позиции\"\nelse \ntext = \"<s>\n<s>\n✓ Корел уже пристрелялся\"\nend\n\nif snipStickSuccess == 0 and snipStoneSuccess == 0 then\ntext = text .. \" <s>\n<s>\n✦ Нужно найти способ как-то привлечь внимание снайпера\"\nend\n\nif snipStickSuccess == 1 or  snipStoneSuccess == 1 then\ntext = text .. \"<s>\n<s>\n✓ Корел уже раскрыл позицию снайпера<s>\n<s>\n✦ Нужно найти ещё один способ привлечь внимание снайпера\"\n end\n\nif snipCountHelp == 1 then\ntext = text .. \" <s>\n<s>\n✘ Не получается действовать, пока стреляет снайпер. Стоит дождаться, когда он будет перезаряжать арбалет\"\nend\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 105,
        "text": "Пробный выстрел",
        "middle_answer": true
      },
      {
        "id": 106,
        "text": "Бежать к\nручью",
        "middle_answer": false,
        "left_answer": true
      },
      {
        "id": 107,
        "text": "Бежать к\nдеревьям",
        "right_answer": true
      },
      {
        "id": 104,
        "text": "Ждать",
        "lua_do": "function lua_do()\nsnipWait()\nend",
        "middle_answer": true
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\ng.reloadFunctions = 93\nsnipTry = snipTry or 0\nsnipTime = snipTime or 0\nsnipShots = snipShots or 2\nsnipStick = snipStick or 0\nsnipStone = snipStone or 0\nsnipStickSuccess = snipStickSuccess or 0\nsnipStoneSuccess = snipStoneSuccess or 0\n\n\nfunction snipWait()\nif snipShots == 0 then\nsnipShotText = \"Корел успел сосчитать до полутора дюжин, но выстрелов не последовало.\"\nsnipShots = 6\nsnipTime = snipTime <plus> 1\nelseif snipShots == 6 then\nlocal r = math.random(4,6)\nsnipShots = snipShots - r\nsnipShotText = ({\n\"Одинокая стрела пролетела совсем рядом с ухом Корела. И это всё?\",\n\"Стрела рассекла воздух над самой травой, почти сразу же намного выше пролетела ещё одна.\",\n\"3\",\n\"Четыре стрелы очередью пронеслись в сторону укрытия Корела и упали в траву неподалёку.\",\n\"Снова стрельба. Пять стрел разлетались от дуба широкой дугой, и Корел порадовался, что приём оказался совсем бесполезным на таком удалении.\",\n\"Стрелы свистели с разных сторон одна за одной. Две, три, четыре... Да сколько их там ещё? Только после шестого снаряда всё на время стихло.\"})[r]\nelse\nlocal r = math.random(1,snipShots)\nsnipShots = snipShots - r\nsnipShotText = ({\n\"Одинокая стрела пролетела совсем рядом с ухом Корела. И это всё?\",\n\"Стрела рассекла воздух над самой травой, почти сразу же намного выше пролетела ещё одна.\",\n\"3\",\n\"Четыре стрелы очередью пронеслись в сторону укрытия Корела и упали в траву неподалёку.\",\n\"Снова стрельба. Пять стрел разлетались от дуба широкой дугой, и Корел порадовался, что приём оказался совсем бесполезным на таком удалении.\",\n\"Стрелы свистели с разных сторон одна за одной. Две, три, четыре... Да сколько их там ещё? Только после шестого снаряда всё на время стихло.\"\n})[r]\nend\n\n\nend\n\n\n\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 103
      }
    ]
  },
  {
    "id": 104,
    "text": "empty\nЖдать\nрандомное количество стрел из оставшихся от 6\nЕсли перерыв — то начинается новый пакет после паузы",
    "answers": [
      {
        "id": 104,
        "text": "Новый ответ. введите текст",
        "lua_text": "function lua_text()\nreturn snipShotText\nend",
        "merge": true
      },
      {
        "backstepCount": 1,
        "isBack": true,
        "text": "Дальше",
        "id": 104,
        "lua_do": "function lua_do()\nsnipShotText = \"\"\nend"
      }
    ]
  },
  {
    "id": 105,
    "text": "empty \nПробный выстрел\nПротивник наверняка успел перезарядиться\nКуда уводит снаряд ветром <plus> солнце\n\n",
    "answers": [
      {
        "id": 105,
        "text": "Корел стянул закреплённую за спиной духовую трубку и зарядил коротким дротиком из напоясного мешочка. Высунулся из-за своего укрытия – чисто.\n\nЕдва различая очертания дерева, Корел резко дунул. Хотя ветер дул в спину и не уводил выстрел в сторону, из-за яркого солнца оказалось совершенно невозможно разобрать, куда улетел снаряд. Атаковать противника отсюда не выйдет. ",
        "lua_if": "function lua_if()\nreturn snipShots == 0 and g.previous_id == 103 --условие: нет заряда у противника\nend",
        "merge": true
      },
      {
        "id": 105,
        "text": "Корел стянул закреплённую за спиной духовую трубку и зарядил коротким дротиком из напоясного мешочка. Высунулся из своего укрытия – чисто.\n\nПрицелившись куда-то в центр дерева, на котором засел противник, Корел резко дунул, и снаряд почти бесшумно устремился к цели. По его блеску в лучах солнца Корел заметил, что выстрел увело заметно левее – нужно будет сделать поправку на ветер, когда дело дойдёт до настоящей атаки.",
        "lua_if": "function lua_if()\nreturn snipShots == 0 and g.previous_id == 108 --условие: нет заряда у противника\nend",
        "merge": true
      },
      {
        "id": 105,
        "text": "Корел стянул закреплённую за спиной духовую трубку и зарядил коротким дротиком из напоясного мешочка. Высунулся из своего укрытия – чисто.\n\nПрицелившись куда-то в центр дерева, на котором засел противник, Корел резко дунул, и снаряд почти бесшумно устремился к цели. По его блеску в лучах солнца Корел заметил, что выстрел увело заметно правее – нужно будет сделать поправку на ветер, когда дело дойдёт до настоящей атаки.",
        "lua_if": "function lua_if()\nreturn snipShots == 0 and g.previous_id == 113--условие: нет заряда у противника\nend",
        "merge": true
      },
      {
        "id": 105,
        "text": "Корел стянул закреплённую за спиной духовую трубку и зарядил коротким дротиком из напоясного мешочка. Быстро высунулся из своего укрытия. Попытался прицелиться, но не тут-то было: вражеская стрела тут же заставила его спрятаться обратно.\n\nЕдва не выронив оружие, Корел тихо выругался: момент для пристрелки оказался неподходящим.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0  --условие: ещё есть заряд у противника\nend",
        "merge": true
      },
      {
        "id": 105,
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 1,
        "lua_do": "function lua_do()\nsnipShots =6\nsnipTime = snipTime <plus> 1\nend\n"
      },
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\n\n--если успех, то прибавляем готовность пристрелки (общая для всех локаций)\n\nif snipShots == 0 and g.previous_id ~= 103  then\nsnipTry = 1\nsnipCountHelp = 0\nelseif snipShots == 0 and g.previous_id == 103  then\nsnipTrySun = 1\nsnipCountHelp = 0\nelse snipTime = snipTime <plus> 1 end\nsnipCountHelp = 1\nend",
        "text": "Новый ответ. введите текст",
        "id": 105,
        "calculate": true
      }
    ]
  },
  {
    "id": 106,
    "text": "empty\nБежать к ручью. Противник в любом случае успел перезарядиться\n\n",
    "answers": [
      {
        "id": 106,
        "text": "Корел со всех ног бросился от своего укрытия в сторону ручья. Расстояние всего ничего, нужно успеть. Шум воды уже совсем рядом...\n\n– Ай! – он плюхнулся в заросли рогоза, и несколько мелких камней больно впились в живот через одежду.\n\nВыстрелов не последовало. Успел. ",
        "lua_if": "function lua_if()\n--успешно\nreturn snipShots == 0 --условие: нет заряда у противника\nend",
        "merge": true
      },
      {
        "id": 106,
        "text": "Корел со всех ног бросился от своего укрытия в сторону ручья. Расстояние всего ничего, нужно успеть. Шум воды уже совсем рядом...\n\n– Ай! – летящие стрелы заставили его резко отпрыгнуть в сторону.\n\nК счастью, не так уж и далеко он успел пробежать. Ещё один сумасшедший рывок – и Корел вновь оказался за валуном у тропы.\n\nКакое-то время он пытался отдышаться и восстановить силы под неровное позвякивание стрел о камень. Да уж, в следующий раз нужно более тщательно выбирать момент для манёвра.",
        "lua_if": "function lua_if()\n--неуспешно\nreturn snipShots ~= 0 --условие: ещё есть заряд у противника\nend",
        "merge": true
      },
      {
        "id": 108,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipShots == 0 --условие: нет заряда у противника\nend",
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 1\nsnipCountHelp = 0\nend"
      },
      {
        "id": 103,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 --условие: ещё есть заряд у противника\nend",
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 2\nsnipCountHelp = 1\nend"
      }
    ]
  },
  {
    "id": 107,
    "text": "empty\nБежать к деревьям противник в любом случае успел перезарядиться\n\n",
    "answers": [
      {
        "id": 106,
        "text": "Корел со всех ног бросился от своего укрытия в сторону деревьев. Расстояние всего ничего, нужно успеть. Щебет птиц уже совсем рядом...\n\n– Уф! – он на скорости влетел в колючие заросли, запоздало прикрывая рукой лицо.\n\nВыстрелов не последовало. Успел. ",
        "lua_if": "function lua_if()\nreturn snipShots == 0 --условие: нет заряда у противника\nend",
        "merge": true
      },
      {
        "id": 106,
        "text": "Корел со всех ног бросился от своего укрытия в сторону деревьев. Расстояние всего ничего, нужно успеть. Щебет птиц уже совсем рядом...\n\n– Уф! – летящие стрелы заставили его резко отпрыгнуть в сторону.\n\nК счастью, не так уж и далеко он успел пробежать. Ещё один сумасшедший рывок – и Корел вновь оказался за валуном у тропы.\n\nКакое-то время он пытался отдышаться и восстановить силы под неровное позвякивание стрел о камень. Да уж, в следующий раз нужно более тщательно выбирать момент для манёвра.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 --условие: ещё есть заряд у противника\nend",
        "merge": true
      },
      {
        "id": 113,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipShots == 0 --условие: нет заряда у противника\nend",
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 1\nsnipCountHelp = 0\nend"
      },
      {
        "id": 103,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 --условие: ещё есть заряд у противника\nend",
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 2\nsnipCountHelp = 1\nend"
      }
    ]
  },
  {
    "id": 108,
    "text": "Корел распластался в высоком рогозе возле берега речушки. Казалось, что до могучего дуба, на котором укрывался неизвестный стрелок, отсюда немногим больше, чем до валуна у дороги.\n\nВ прозрачной воде отражались редкие облака, солнце играло бликами, засвечивая мелкие камешки на дне у самого берега.",
    "answers": [
      {
        "id": 108,
        "text": "Отображение ноши: камень или ветка",
        "lua_text": "function lua_text()\nlocal text = (snipStick == 1 and \"<s>\n<s>\nВ руке Корел сжимал ветку, найденную в кустах под деревьями. Можно попробовать кинуть её в воду, чтобы привлечь внимание снайпера.\") or (snipStone == 1 and \"<s>\n<s>\nВ руке Корел сжимал камень, прихваченный здесь на берегу. Можно попробовать кинуть его в воду, чтобы привлечь внимание снайпера.\") or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 108,
        "text": "чекбокс",
        "lua_text": "function lua_text()\nlocal text = \"\"\nsnipTry = snipTry or 0\nsnipStickSuccess = snipStickSuccess or 0\nachRoundsCount = achRoundsCount or 0\n\nif snipTry == 0 then\ntext = \"<s>\n<s>\n✦ Корелу нужно пристреляться\"\nelse \ntext = \"<s>\n<s>\n✓ Корел уже пристрелялся\"\nend\n\n\nif snipStickSuccess == 1 then\ntext = text .. \"<s>\n<s>\n✓ Корел уже раскрыл позицию снайпера<s>\n<s>\n✦ Нужно найти ещё один способ привлечь внимание снайпера\"\nelseif snipStoneSuccess == 1 then\ntext = text .. \"<s>\n<s>\n✓ Корел уже раскрыл позицию снайпера\"\nend\n\nif snipStickSuccess == 0 then\ntext = text .. \" <s>\n<s>\n✦ Возможно всплеск на воде привлечёт внимание снайпера\"\nend\n\nif snipStickSuccess == 0 and achRoundsCount > 0 then\ntext = text .. \" <s>\n<s>\n✘ Бросок камня в воду не привлечёт внимание снайпера\"\nend\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 105,
        "text": "Пробный выстрел",
        "middle_answer": true
      },
      {
        "id": 109,
        "text": "Бежать к валуну у тропы",
        "right_answer": true
      },
      {
        "lua_if": "function lua_if()\nreturn snipStone ~= 1 and snipStick ~= 1 --условие: нет ничего с собой\nend",
        "id": 110,
        "lua_do": "function lua_do()\nsnipStone = 1\nsnipWait()\nend",
        "text": "Подобрать камень",
        "middle_answer": false,
        "left_answer": true
      },
      {
        "lua_if": "function lua_if()\nreturn snipStone == 1 --условие: есть камень с собой\nend",
        "id": 111,
        "lua_do": "function lua_do()\nsnipStone = 0\nachRoundsCount = (achRoundsCount or 0) <plus> 1\nsnipWait()\nend",
        "text": "Бросить камень в воду",
        "middle_answer": false,
        "left_answer": true
      },
      {
        "lua_if": "function lua_if()\nreturn snipStick == 1 --условие: есть ветка с собой\nand (snipStoneSuccess == 0 --или это первая попытка\nor (snipStoneSuccess > 0 and snipTry == 1)) --или не первая, но после пристрелки\nend",
        "id": 112,
        "lua_do": "function lua_do()\nsnipStick = 0\nend",
        "text": "Бросить ветку в воду",
        "middle_answer": false,
        "left_answer": true
      },
      {
        "id": 104,
        "text": "Ждать",
        "lua_do": "function lua_do()\nsnipWait()\nend",
        "middle_answer": true
      },
      {
        "id": 108,
        "text": "Ещё не время привлекать внимание противника, сначала нужно пристреляться!",
        "comment": true,
        "lua_if": "function lua_if()\nreturn snipStick == 1 --условие: есть ветка с собой\nand \n(snipStoneSuccess > 0 and snipTry == 0) -- не первая попытка без пристрелки\nend"
      }
    ]
  },
  {
    "id": 109,
    "text": "empty\nБежать к валуну у тропы у тропы\n\n",
    "answers": [
      {
        "id": 109,
        "text": "Корел со всех ног бросился обратно к валуну у тропы. Это расстояние он уже пробегал, должен успеть и теперь. Тень на смятой траве всё ближе...\n\n– Ох! – он больно приложился плечом о камень, не успев вовремя затормозить.\n\nВыстрелов не последовало. Снова успел. ",
        "lua_if": "function lua_if()\nreturn snipShots == 0 --условие: нет заряда у противника\nend",
        "merge": true
      },
      {
        "id": 109,
        "text": "Корел со всех ног бросился обратно к валуну у тропы. Это расстояние он уже пробегал, должен успеть и теперь. Тень на смятой траве всё ближе...\n\n– Ох! – летящие стрелы заставили его резко отпрыгнуть в сторону.\n\nК счастью, не так уж и далеко он успел пробежать. Ещё один сумасшедший рывок – и Корел очутился в укрытии.\n\nКакое-то время он пытался отдышаться и восстановить силы, то и дело поглядывая на недоступный пока камень. Да уж, в следующий раз нужно более тщательно выбирать момент для манёвра.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 --условие: ещё есть заряд у противника\nend",
        "merge": true
      },
      {
        "id": 103,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipShots == 0 --условие: нет заряда у противника\nend",
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 1\nsnipCountHelp = 0\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 --условие: ещё есть заряд у противника\nend",
        "backstepCount": 1,
        "id": 109,
        "text": "Дальше",
        "isBack": true,
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 2\nend"
      }
    ]
  },
  {
    "id": 110,
    "text": "Корел опустил руку в ледяную воду и нащупал на дне скользкий бок небольшого камня. Находка удобно легла в ладонь. Корел поёжился: не окоченели бы пальцы...\n\n",
    "answers": [
      {
        "id": 110,
        "text": "Фоновая стрельба противника",
        "lua_text": "function lua_text()\nreturn snipShotText\nend",
        "merge": true
      },
      {
        "id": 108,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 111,
    "text": "Корел отвёл руку назад и метнул камень в воду у противоположного берега. Едва слышно булькнув, тот ушёл на дно. Да уж, чтобы добиться заметного издалека всплеска, потребуется снаряд покрупнее.\n\n",
    "answers": [
      {
        "super_calculate": false,
        "lua_do": "function lua_do()\nachRoundsCount = achRoundsCount or 0\n\nif achRoundsCount == 6 then\n   newAchieve(\"rounds\")\nelse end\nend",
        "calculate": true,
        "text": "Новый ответ. введите текст",
        "id": 111
      },
      {
        "id": 110,
        "text": "Фоновая стрельба противника",
        "lua_text": "function lua_text()\nreturn snipShotText\nend",
        "merge": true
      },
      {
        "id": 108,
        "text": "Дальше"
      },
      {
        "lua_if": "function lua_if()\nreturn false\nend",
        "lua_do": "function lua_do()\ng.rounds = 0\nend",
        "text": "Новый ответ. введите текст",
        "id": 111,
        "comment": false
      },
      {
        "comment": true,
        "lua_if": "function lua_if()\npointerCount = pointerCount or 0\nreturn pointerCount > 0\nend",
        "id": 92,
        "text": "отображение достижения",
        "lua_text": "function lua_text()\n--[=[\n\nРоковой букет -- переделать после переработки\nСнайпер – переделать на \"сумел попасть в Пижму\"\nНикто не любит ябед\nЛюбая кухарка\nОхотник\nЧестный уборщик\nЗавсягдатай\nИнтриган -- переделать на \"сумел завоевать доверие Гамамелиса шантажом и обманом\"\n\n\ng.cleaner \ng.hunter \ng.secret \ng.mech \ng.kitchen \ng.flowers\ng.sniper\ng.talking\n\n]=]\n\n\n\nlocal a = achPointer\n\nlocal b = \"\"\n\nif a == \"cleaner\" then\n   b = \"Честный уборщик\"\nelseif a == \"hunter\" then\n   b = \"Охотник\"\nelseif a == \"secret\" then\n   b = \"Никто не любит ябед\"\nelseif a == \"mech\" then\n   b = \"Любая кухарка\"\nelseif a == \"kitchen\" then\n   b = \"Завсегдатай\"\nelseif a == \"flowers\" then\n   b = \"Роковой букет\"\nelseif a == \"sniper\" then\n   b = \"Снайпер\"\nelseif a == \"talking\" then\n   b = \"Интриган\"\nelseif a == \"cancel\" then\n   b = \"Признание\"\nelseif a == \"robust\" then\n   b = \"Чтобы наверняка\"\nelseif a == \"rounds\" then\n   b = \"Круги на воде\"\n\nelse b = a or \"\" end\n\n\nreturn [=[\n\n\n༺ Получено достижение: «]=] .. b .. \"» ༻\"\nend",
        "merge": true
      }
    ]
  },
  {
    "id": 112,
    "text": "empty \nБросить палку в воду\n\nбез пристрелки – не может стрелять с первого отвлечения, не может запустить второе отвлечение без пристрелки\nДля кнопок выбора коррекции по ветру условие видимости – успех в противоположном отвлечении\n\nПротивник в любом случае перезарядился\n",
    "answers": [
      {
        "id": 112,
        "text": "Корел как следует замахнулся, кинул ветку к дальнему берегу ручья и тут же впился взглядом в дуб, на котором укрывался неприятель. Всплеск вышел что надо – даже боковым зрением Корел заметил фонтан брызг, ярко искрящихся в свете солнца.\n\nИ вот показался снайпер. Вернее, только рука с арбалетом, но и этого было достаточно. Корел отметил все возможные приметы того места, где укрывался противник, чтобы суметь опознать место, когда появится возможность.\n\nЖаль, он не успел пристреляться – мог бы попытаться тут же поразить цель. Но теперь заряжать духовую трубку уже поздно. Корел проследил, как уходят в воду арбалетные стрелы, и поспешил снова спрятаться среди рогоза.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 and snipStickSuccess == 1 and snipTry ~= 1\nend",
        "merge": true
      },
      {
        "id": 112,
        "text": "Корел как следует замахнулся, кинул ветку к дальнему берегу ручья и тут же впился взглядом в дуб, на котором укрывался неприятель. Всплеск вышел что надо – даже боковым зрением Корел заметил фонтан брызг, ярко искрящихся в свете солнца.\n\nИ вот показался снайпер. Вернее, только рука с арбалетом, но и этого было достаточно. Корел прицелился из духовой трубки –  он не зря тратил время на пристрелку и не собирался упускать появившуюся возможность. Оставалось лишь учесть поправку на ветер...",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 and snipStickSuccess == 1 and snipTry == 1\nend",
        "merge": true
      },
      {
        "id": 112,
        "text": "Корел как следует замахнулся, кинул ветку к дальнему берегу ручья и тут же впился взглядом в дуб, на котором укрывался неприятель. Всплеск вышел что надо – даже боковым зрением Корел заметил фонтан брызг, ярко искрящихся в свете солнца.\n\nНо просвистевшая над головой стрела заставила Корела вновь нырнуть в укрытие. Он тихо выругался: похоже, противник сделал правильный вывод из прошлого опыта. Теперь придётся придумать какой-то другой способ привлечь внимание снайпера.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 and snipStickSuccess ~= 1\nend",
        "merge": true
      },
      {
        "id": 112,
        "text": "Корел как следует замахнулся, кинул ветку к дальнему берегу ручья и тут же впился взглядом в дуб, на котором укрывался неприятель. Всплеск вышел что надо – даже боковым зрением Корел заметил фонтан брызг, ярко искрящихся в свете солнца.\n\nНо никакой реакции противника не последовало. Должно быть, он именно сейчас занимался перезарядкой и просто не мог ничего увидеть.\n\nКорел тихо выругался и вновь спрятался в укрытие. В следующий раз нужно более тщательно выбирать момент для таких действий.",
        "lua_if": "function lua_if()\nreturn snipShots == 0\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\n\nif snipShots ~= 0 then\nsnipStickSuccess = snipStickSuccess <plus> 1\nelse end\n\nend",
        "super_calculate": false,
        "id": 112,
        "text": "расчёт",
        "calculate": true,
        "merge": false
      },
      {
        "id": 108,
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipStickSuccess ~= 1 or snipTry ~= 1\nend",
        "lua_do": "function lua_do()\nsnipShots = 6\nsnipTime = snipTime <plus> 1\nend"
      },
      {
        "lua_if": "function lua_if()\nsnipStoneSuccess = snipStoneSuccess or 0\n\nreturn snipTry == 1 and snipStoneSuccess > 0 and snipStickSuccess == 1\nend",
        "id": 112,
        "text": "Нужно сделать поправку на ветер!",
        "comment": true,
        "left_answer": true
      },
      {
        "lua_if": "function lua_if()\nreturn snipStickSuccess == 1 and snipStoneSuccess == 0 and snipTry == 1\nend",
        "id": 117,
        "text": "Стрелять немного левее цели",
        "lua_do": "function lua_do()\nsnipFailedShot = 1\nend",
        "left_answer": true
      },
      {
        "id": 117,
        "text": "Стрелять немного правее цели",
        "lua_if": "function lua_if()\nreturn snipStickSuccess == 1 and snipTry == 1\nend",
        "right_answer": true
      }
    ]
  },
  {
    "id": 113,
    "text": "Корел затаился в колючем кустарнике на самом краю леса. Под ногой хрустнуло –  похоже, недавно тут бушевал ветер и теперь всё вокруг оказалось усеяно сломанными ветвями. Где-то наверху щебетали птицы.\n\nОтсюда было не разглядеть за высокой травой тропу, идущую мимо большого валуна к раскидистому дубу, на котором скрывался неизвестный стрелок.",
    "answers": [
      {
        "id": 108,
        "text": "Отображение ноши: камень или ветка",
        "lua_text": "function lua_text()\nlocal text = (snipStick == 1 and \"<s>\n<s>\nВ руке Корел сжимал ветку, найденную здесь под деревьями. Можно попробовать кинуть её в галдящих птиц, чтобы привлечь внимание снайпера.\") or (snipStone == 1 and \"<s>\n<s>\nВ руке Корел сжимал камень, прихваченный на берегу ручья. Можно попробовать кинуть его в галдящих птиц, чтобы привлечь внимание снайпера.\") or \"\"\nreturn text\nend",
        "merge": true
      },
      {
        "id": 108,
        "text": "чекбокс",
        "lua_text": "function lua_text()\nlocal text = \"\"\nsnipTry = snipTry or 0\nsnipStoneSuccess = snipStoneSuccess or 0\nsnipBirdsCount = snipBirdsCount or 0\n\nif snipTry == 0 then\ntext = \"<s>\n<s>\n✦ Корелу нужно пристреляться\"\nelse \ntext = \"<s>\n<s>\n✓ Корел уже пристрелялся\"\nend\n\n\nif snipStoneSuccess == 1 then\ntext = text .. \"<s>\n<s>\n✓ Корел уже раскрыл позицию снайпера<s>\n<s>\n✦ Нужно найти ещё один способ привлечь внимание снайпера\"\nelseif snipStickSuccess == 1 then\ntext = text .. \"<s>\n<s>\n✓ Корел уже раскрыл позицию снайпера\"\nend\n\nif snipStoneSuccess == 0 then\ntext = text .. \" <s>\n<s>\n✦ Возможно, если как-то вспугнуть птиц, это привлечёт внимание снайпера\"\nend\n\nif snipStoneSuccess == 0 and snipBirdsCount > 0 then\ntext = text .. \" <s>\n<s>\n✘ Не получается кинуть ветку так, чтобы вспугнуть птиц\"\nend\n\n\nreturn text\nend",
        "merge": true
      },
      {
        "id": 105,
        "text": "Пробный выстрел",
        "middle_answer": true
      },
      {
        "id": 109,
        "text": "Бежать к валуну",
        "left_answer": true
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nreturn snipStone ~= 1 and snipStick ~= 1 --условие: нет ничего с собой\nend",
        "lua_do": "function lua_do()\nsnipStick = 1\nsnipWait()\nend",
        "text": "Подобрать ветку",
        "id": 114
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nreturn snipStone == 1 and (snipStickSuccess ==  0 or (snipStickSuccess > 0 and snipTry == 1)) -- условие: есть камень с собой или первая попытка или не первая попытка, но после пристрелки\n\n\nend",
        "lua_do": "function lua_do()\nsnipStone = 0\nend",
        "text": "Бросить камень в птиц",
        "id": 115
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nreturn snipStick == 1 --условие: есть ветка с собой\nend",
        "lua_do": "function lua_do()\nsnipStick = 0\nsnipBirdsCount = 1\nsnipWait()\nend",
        "text": "Бросить ветку в птиц",
        "id": 116
      },
      {
        "id": 104,
        "text": "Ждать",
        "middle_answer": true,
        "lua_do": "function lua_do()\nsnipWait()\nend"
      },
      {
        "right_answer": false,
        "lua_if": "function lua_if()\nreturn snipStone == 1 and (snipStickSuccess > 0 and snipTry == 0) -- не первая попытка без пристрелки\nend",
        "id": 108,
        "text": "Ещё не время привлекать внимание противника, сначала нужно пристреляться!",
        "comment": true,
        "middle_answer": true
      }
    ]
  },
  {
    "id": 114,
    "text": "Корел нагнулся к самой земле и подобрал палку покрупнее. Может пригодиться, чтобы выманить противника.\n\n",
    "answers": [
      {
        "id": 110,
        "text": "Фоновая стрельба противника",
        "lua_text": "function lua_text()\nreturn snipShotText\nend",
        "merge": true
      },
      {
        "id": 113,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 115,
    "text": "empty\n\nБросить камень в птиц",
    "answers": [
      {
        "id": 112,
        "text": "Корел прикинул расстояние и метнул камень вверх между ветвей, туда, где галдели птицы, затем сразу же впился взглядом в дуб, на котором укрывался неприятель. Корел не знал, куда угодил снаряд, но перепуганная стая шумно сорвалась с дерева и тут же рассеялась во все стороны.\n\nИ вот показался снайпер. Вернее, только рука с арбалетом, но и этого было достаточно. Корел отметил все возможные приметы того места, где укрывался противник, чтобы суметь опознать место, когда появится возможность.\n\nЖаль, он не успел пристреляться – мог бы попытаться тут же поразить цель. Но теперь заряжать духовую трубку уже поздно. Корел проследил, как теряются в листве арбалетные стрелы, и поспешил снова спрятаться среди рогоза.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 and snipStoneSuccess == 1 and snipTry ~= 1\nend",
        "merge": true
      },
      {
        "id": 112,
        "text": "Корел прикинул расстояние и метнул камень вверх между ветвей, туда, где галдели птицы, а затем сразу же впился взглядом в дуб, на котором укрывался неприятель. Корел не знал, куда угодил снаряд, но перепуганная стая шумно сорвалась с дерева и тут же рассеялась во все стороны.\n\nИ вот показался снайпер. Вернее, только рука с арбалетом, но и этого было достаточно. Корел прицелился из духовой трубки –  он не зря тратил время на пристрелку и не собирался упускать появившуюся возможность. Оставалось лишь учесть поправку на ветер...",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 and snipStoneSuccess == 1 and snipTry == 1\nend",
        "merge": true
      },
      {
        "id": 112,
        "text": "Корел прикинул расстояние и метнул камень вверх между ветвей, туда, где галдели птицы, затем сразу же впился взглядом в дуб, на котором укрывался неприятель. Корел не знал, куда угодил снаряд, но перепуганная стая шумно сорвалась с дерева и тут же рассеялась во все стороны.\n\nНо просвистевшая над головой стрела заставила Корела вновь нырнуть в укрытие. Он тихо выругался: похоже, противник сделал правильный вывод из прошлого опыта. Теперь придётся придумать какой-то другой способ привлечь внимание снайпера.",
        "lua_if": "function lua_if()\nreturn snipShots ~= 0 and snipStoneSuccess ~= 1\nend",
        "merge": true
      },
      {
        "id": 112,
        "text": "Корел прикинул расстояние и метнул камень вверх между ветвей, туда, где галдели птицы, затем сразу же впился взглядом в дуб, на котором укрывался неприятель. Корел не знал, куда угодил снаряд, но перепуганная стая шумно сорвалась с дерева и тут же рассеялась во все стороны.\n\nНо никакой реакции противника не последовало. Должно быть, он именно сейчас занимался перезарядкой и просто не мог ничего увидеть.\n\nКорел тихо выругался и вновь спрятался в укрытие. В следующий раз нужно более тщательно выбирать момент для таких действий.",
        "lua_if": "function lua_if()\nreturn snipShots == 0\nend",
        "merge": true
      },
      {
        "lua_do": "function lua_do()\n\nif snipShots ~= 0 then\nsnipStoneSuccess = snipStoneSuccess <plus> 1\nelse end\n\nend",
        "super_calculate": false,
        "id": 112,
        "text": "расчёт",
        "calculate": true,
        "merge": false
      },
      {
        "lua_do": "function lua_do()\nsnipShots = 6\nend",
        "text": "Дальше",
        "lua_if": "function lua_if()\nreturn snipStoneSuccess ~= 1 or snipTry ~= 1\nend",
        "id": 113
      },
      {
        "right_answer": false,
        "lua_if": "function lua_if()\nreturn snipStoneSuccess == 1 and snipTry == 1\nend",
        "id": 117,
        "text": "Стрелять немного левее цели",
        "left_answer": true
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nsnipStickSuccess = snipStickSuccess or 0\n\nreturn snipTry == 1 and snipStickSuccess > 0 and snipStoneSuccess == 1\nend",
        "id": 112,
        "text": "Нужно сделать поправку на ветер!",
        "comment": true,
        "left_answer": false
      },
      {
        "right_answer": true,
        "lua_if": "function lua_if()\nreturn snipStoneSuccess == 1 and snipStickSuccess == 0 and snipTry == 1\nend",
        "id": 117,
        "text": "Стрелять немного правее цели",
        "lua_do": "function lua_do()\nsnipFailedShot = 1\nend",
        "left_answer": false
      }
    ]
  },
  {
    "id": 116,
    "text": "Корел отвёл руку назад и попытался закинуть палку туда, где засели птицы, но та почти сразу запуталась в ветвях и свалилась рядом. Чтобы побеспокоить пернатых понадобится снаряд поменьше.\n\n",
    "answers": [
      {
        "id": 110,
        "text": "Фоновая стрельба противника",
        "lua_text": "function lua_text()\nreturn snipShotText\nend",
        "merge": true
      },
      {
        "id": 113,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 117,
    "text": "empty\nфинальный выстрел",
    "answers": [
      {
        "id": 117,
        "text": "Изгой резко дунул и смазанный смертельным ядом снаряд устремился из духовой трубки к цели. Мучительно тянулись мгновения. Одно, два, три... Неужели промазал?\n\n\"Кр-р-рах!\" – затрещало ветвями дерево, напрасно цепляясь за летящее к земле тело. Значит, всё-таки попал.\n\nКорел выждал какое-то время, вглядываясь и прислушиваясь. Ни шума, ни движений. Он одним рывком вернулся к камню. Вновь ничего. Возможно, на этот раз пронесло. Ну, хотя бы не потерял здесь много времени.\n\nИзгой собрал брошенные вещи, проверил: всё цело, даже пузырёк с волшебной пылью из Цастриха. Крадучись подобрался к злосчастному дереву. У самых корней застыла в неестественной позе фигурка молодой девушки, оружие валялось рядом. Верила ли она приметам? Быть может, судьба пыталась предостеречь её от необдуманных нападений на незнакомцев сегодня утром?\n\nУдар по голове положил конец сомнениям изгоя. Корел упал и потерял сознание.",
        "lua_if": "function lua_if()\n\nsnipFailedShot = snipFailedShot or 0\n\nreturn snipFailedShot == 0 and snipTime < 11\nend",
        "merge": true
      },
      {
        "id": 117,
        "text": "Изгой резко дунул и смазанный смертельным ядом снаряд устремился из духовой трубки к цели. Мучительно тянулись мгновения. Одно, два, три... Неужели промазал?\n\n\"Кр-р-рах!\" – затрещало ветвями дерево, напрасно цепляясь за летящее к земле тело. Значит, всё-таки попал.\n\nКорел выждал какое-то время, вглядываясь и прислушиваясь. Ни шума, ни движений. Он одним рывком вернулся к камню. Вновь ничего. Возможно, на этот раз пронесло. Даже немного обидно, что пришлось потерять здесь столько времени.\n\nИзгой собрал брошенные вещи, проверил: всё цело, даже пузырёк с волшебной пылью из Цастриха. Крадучись подобрался к злосчастному дереву. У самых корней застыла в неестественной позе фигурка молодой девушки, оружие валялось рядом. Верила ли она приметам? Быть может, судьба пыталась предостеречь её от необдуманных нападений на незнакомцев сегодня утром?\n\nУдар по голове положил конец сомнениям изгоя. Корел упал и потерял сознание.",
        "lua_if": "function lua_if()\n\nsnipFailedShot = snipFailedShot or 0\n\nreturn snipFailedShot == 0 and snipTime > 10\nend",
        "merge": true
      },
      {
        "id": 117,
        "text": "Изгой резко дунул и смазанный смертельным ядом снаряд устремился из духовой трубки к цели. Мучительно тянулись мгновения. Одно, два, три... Неужели промазал?\n\nНовый залп арбалетных стрел развеял сомнения: противник всё ещё жив. Наверное, Корел не смог верно учесть отклонение дротика ветром, нужно быть более внимательным в следующий раз.",
        "lua_if": "function lua_if()\n\nsnipFailedShot = snipFailedShot or 0\n\nreturn snipFailedShot == 1\nend",
        "merge": true
      },
      {
        "id": 5,
        "text": "Дальше",
        "lua_if": "function lua_if()\n--победа\n\nsnipFailedShot = snipFailedShot or 0\n\nreturn snipFailedShot == 0\nend"
      },
      {
        "lua_if": "function lua_if()\nreturn snipFailedShot == 1\nend",
        "id": 117,
        "isBack": true,
        "text": "Дальше",
        "backstepCount": 2,
        "lua_do": "function lua_do()\nsnipFailedShot = 0\nsnipTime = snipTime <plus> 1\nend"
      }
    ]
  },
  {
    "id": 118,
    "text": "Корел осторожно поднялся из-за укрытия. Выстрелов не последовало.\n\nОсмотрелся. Мест, которые он сам выбрал бы для засады с той стороны, было немного. Наиболее подходящее – высокое дерево у самой тропы. Если напавший там – тем хуже для него: массивный дуб просматривался и с тропы, и от пробегающего слева ручья, и от зарослей кустарника под деревьями справа.\n\nЧетыре стрелы очередью просвистели над камнем, и Корел вновь упал в его тень. Не так уж долго противник заряжался. Похоже, придётся выгадывать для активных действий редкие моменты затишья, чтобы не подставляться попусту.\n\nНо для начала нужно как следует подготовиться: точно определить позицию противника, пристреляться, придумать, как выманить его для решающего выстрела. Корел понимал, что хоть дуэль стрелков не терпит спешки, лучше её не затягивать, если есть шанс, что к противнику подоспеет подмога.",
    "answers": [
      {
        "id": 103,
        "text": "Дальше"
      }
    ]
  },
  {
    "id": 119,
    "text": "",
    "answers": []
  }
]