[
  {
    "id": 1,
    "text": "Дороти всегда мечтала открыть свой ресторан, и сегодня её мечта сбылась. Правда, заведение у неё очень скромное и впереди множество побед и свершений.",
    "answers": [
      {
        "id": 2,
        "text": "Список уровней"
      }
    ]
  },
  {
    "id": 2,
    "text": "Список уровней",
    "answers": [
      {
        "id": 5,
        "text": "Рецепт: кофе 3 в 1"
      },
      {
        "id": 10,
        "text": "Рецепт: бутерброд с колбасой"
      },
      {
        "id": 12,
        "text": "Рецепт: летний салат"
      },
      {
        "id": 14,
        "text": "Рецепт: Холодный чай"
      },
      {
        "id": 16,
        "text": "Просто хорошенько покушать"
      }
    ]
  },
  {
    "id": 3,
    "text": "Страница уровня. Данный текст не отображается. Необходимо копировать данную страницу целиком с помощью команды \"copy all\", чтобы создать новый уровень.",
    "answers": [
      {
        "lua_do": "function lua_do()\nmoves = moves <plus> 2\nlocal gr = canvas.parent\n\n\nif not bonus_shadow then\nbonus_shadow = true\ngr[gr.numChildren].text = \"  Получить ещё 2 хода и способность <s><s>\"Тепловой След<s><s>\"\"\nelseif not bonus_fingerprint then\nbonus_fingerprint = true\ngr[gr.numChildren].text = \"  Получить ещё 3 хода\"\nelse\nmoves = moves <plus> 1\nend\n\nif update_moves_img then update_moves_img() \nend\nend",
        "bg_color": [
          0.97,
          0.79,
          0.78
        ],
        "paid_answer": [
          "Бонус",
          5
        ],
        "super_calculate": false,
        "id": 3,
        "text": "Добавить 2 хода и активировать способность \"Предчувствие\"",
        "calculate": false,
        "no_transition": true
      },
      {
        "id": 4,
        "text": "Перейти на страницу рана с движком (только для программистов или при обновлении движка по инструкции)",
        "need": [
          9999
        ]
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Направьте следующие ответы на страницы поражения и победы. Не меняйте их текст! Не удаляйте невыполнимое условие!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Victory_page"
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Lose_page"
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Измените ссылки на картинки для следующих ответов, чтобы настроить внешний вид уровня. Не меняйте текст ответов!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "id": 3,
        "text": "bg stretch",
        "url": "http://188.120.236.127/memories/restoran/001-bg.jpg"
      },
      {
        "id": 3,
        "text": "table",
        "url": "http://188.120.236.127/memories/restoran/001-table.png"
      },
      {
        "id": 3,
        "text": "rubashka",
        "url": "http://188.120.236.127/memories/restoran/001-rubashka.png"
      },
      {
        "id": 3,
        "text": "c1",
        "url": "http://188.120.236.127/memories/restoran/cards/interior/plastic-cup.png"
      },
      {
        "id": 3,
        "text": "c2",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/chainik.png"
      },
      {
        "id": 3,
        "text": "c3",
        "url": "http://188.120.236.127/memories/restoran/cards/interior/plastic-spoon.png"
      },
      {
        "id": 3,
        "text": "c4",
        "url": "http://188.120.236.127/memories/restoran/cards/food/coffe3-1.png"
      },
      {
        "id": 3,
        "text": "win",
        "url": "http://188.120.236.127/memories/restoran/cards/victory_cards/cofee3-1.png"
      },
      {
        "id": 3,
        "text": "full_move",
        "url": "http://188.120.236.127/memories/restoran/full_move.png"
      },
      {
        "id": 3,
        "text": "empty_move",
        "url": "http://188.120.236.127/memories/restoran/empty_move.png"
      },
      {
        "id": 3,
        "text": "chain",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/mini-fridge.png"
      },
      {
        "id": 3,
        "text": "fingerprint",
        "url": "http://188.120.236.127/memories/veterinar/fingerprint2.png"
      },
      {
        "id": 3,
        "text": "card_inside",
        "url": "http://188.120.236.127/memories/restoran/001-card-inside.png"
      },
      {
        "super_calculate": true,
        "id": 4,
        "calculate": false,
        "run": [
          4
        ],
        "text": "Ран с движком"
      }
    ]
  },
  {
    "id": 4,
    "text": "Чтобы обновить движок (только по согласованию с программистами), нужно нажать \"редактировать\" на ответ, и тут же сохранить без изменений.",
    "answers": [
      {
        "module": true,
        "super_calculate": true,
        "lua_do": "function lua_do()\n<s>r\nlocal cards = {}<s>r\nlocal map = {}<s>r\nlocal cardSize = display.contentWidth/4<s>r\nlocal selected_card_1<s>r\nlocal selected_card_2<s>r\nlocal cards_number = 0<s>r\nlocal moves_row = {}<s>r\n--update_moves_img<s>r\nlocal hard_cheat<s>r\nlocal switch_cards_secretly<s>r\nlocal is_chains_contain<s>r\nlocal break_one_chain<s>r\nlocal shadow_deadly_variant<s>r\nlocal ushadow_deadly_variants<s>r\nlocal fingerprint_url<s>r\nlocal rubashka_url<s>r\nlocal card_inside_url<s>r\nlocal fade_fingerprints<s>r\nlocal check_chains_block_game<s>r\n<s>r\nif not max_moves then<s>r\n<s>tmax_moves = moves<s>r\nend<s>r\n<s>r\nfor i=1,4 do<s>r\n<s>tlocal card = images[\"c\"..i]<s>r\n<s>tcard.xScale =  (cardSize) / card.width<s>r\n<s>tcard.yScale =  card.xScale<s>r\n<s>tcard.alpha = 1<s>r\n<s>tcard.id = i<s>r\n<s>tcard.place = #map<plus>1<s>r\n<s>tcard.uid = math.random(1000000)<s>r\n<s>ttable.insert(map,card)<s>t<s>r\n<s>tcards[i*2-1] = card<s>r\n<s>tcards_number = cards_number <plus> 1<s>r\n<s>t<s>r\n<s>tlocal card2 = display.newImage(card.url)<s>r\n<s>tcard2.xScale = card.xScale<s>r\n<s>tcard2.yScale = card.yScale<s>r\n<s>tcard2.place = #map<plus>1<s>r\n<s>tcard2.id = i<s>r\n<s>tcard2.uid = math.random(1000000)<s>r\n<s>tcards[i*2] = card2<s>r\n<s>ttable.insert(map,card2)<s>r\n<s>tcards_number = cards_number <plus> 1<s>r\n<s>t<s>r\n<s>r\n<s>r\nend<s>r\n<s>r\nlocal winCard = images[\"win\"]<s>r\nwinCard.xScale = (cardSize) / winCard.width<s>r\nwinCard.yScale = winCard.xScale<s>r\nwinCard.place = #map<plus>1<s>r\nwinCard.uid = math.random(1000000)<s>r\nwinCard.id = 0<s>r\ncards[9] = winCard<s>r\ntable.insert(map,winCard)<s>r\ncards_number = cards_number <plus> 1<s>r\n<s>t<s>r\nif images.fingerprint then<s>r\n<s>tfingerprint_url = images.fingerprint.url<s>r\n<s>timages.fingerprint:removeSelf()<s>r\nend<s>r\n<s>r\nfade_fingerprints = function()<s>r\n<s>tif bonus_fingerprint then<s>r\n<s>t<s>tfor i=1,9 do<s>r\n<s>t<s>t<s>tif map[i] then<s>r\n<s>t<s>t<s>t<s>tif map[i].rubashka.fingerprint.alpha>0 then<s>r\n<s>t<s>t<s>t<s>t<s>ttransition.to(map[i].rubashka.fingerprint,{<s>r\n<s>t<s>t<s>t<s>t<s>t<s>talpha = map[i].rubashka.fingerprint.alpha-0.2, -- исчезновение отпечатка<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttime = 300,<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t--delay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad<s>r\n<s>t<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\n<s>r\nend<s>r\n<s>r\nshadow_deadly_variant = function(card)<s>r\n<s>tlocal random_array = {2,6,4,9,8,1,3,7,5,2,6,4,9,8,1,3,7,5}<s>r\n<s>tlocal plus = math.random(8)<s>r\n<s>tfor ii = 1,2 do<s>r\n<s>t<s>tlocal ever_opened_variant<s>r\n<s>t<s>tlocal never_opened_variant<s>r\n<s>t<s>tfor i=1,9 do<s>r\n<s>t<s>t<s>tlocal i = random_array[i<plus>plus]<s>r\n<s>t<s>t<s>tif <s>r\n<s>t<s>t<s>t<s>tmap[i]<s>r\n<s>t<s>t<s>tand<s>r\n<s>t<s>t<s>t<s>tmap[i].id ~= card.id <s>r\n<s>t<s>t<s>tand<s>r\n<s>t<s>t<s>t<s>t(not map[i].rubashka.chain)<s>r\n<s>t<s>t<s>tand <s>r\n<s>t<s>t<s>t<s>t(not map[i].shadowed_deadly_variant)<s>r\n<s>t<s>t<s>tthen<s>r\n<s>t<s>t<s>t<s>tif map[i].ever_opened then<s>r\n<s>t<s>t<s>t<s>t<s>tever_opened_variant = map[i]<s>r\n<s>t<s>t<s>t<s>telse<s>r\n<s>t<s>t<s>t<s>t<s>tnever_opened_variant = map[i]<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>tend<s>r\n<s>t<s>tlocal card2 = never_opened_variant or ever_opened_variant<s>r\n<s>t<s>tif card2 then<s>r\n<s>t<s>t<s>tcard2.shadowed_deadly_variant = true<s>r\n<s>t<s>t<s>tcard2.ever_opened = true<s>r\n<s>t<s>t<s>ttimer.performWithDelay(15,function(event)<s>r\n<s>t<s>t<s>t<s>tif card2 then<s>r\n<s>t<s>t<s>t<s>t<s>tcard2.rubashka.base_img:setFillColor((255-event.count*3)/255,(255-event.count*3)/255,(255-event.count*3)/255)<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tend,30)<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\nend<s>r\n<s>r\nunshadow_deadly_variants = function()<s>r\n<s>tfor i=1,9 do<s>r\n<s>t<s>tif map[i] and map[i].shadowed_deadly_variant then<s>r\n<s>t<s>t<s>ttimer.performWithDelay(15,function(event)<s>r\n<s>t<s>t<s>t<s>tif map[i] then<s>r\n<s>t<s>t<s>t<s>t<s>tmap[i].rubashka.base_img:setFillColor((255-60<plus>event.count*3)/255,(255-60<plus>event.count*3)/255,(255-60<plus>event.count*3)/255)<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>tmap[i].shadowed_deadly_variant = false<s>r\n<s>t<s>t<s>tend,30)<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\nend<s>r\n<s>r\nis_chains_contain = function(i)<s>r\n<s>tfor k,v in pairs(chains) do<s>r\n<s>t<s>tif v == i then<s>r\n<s>t<s>t<s>treturn true<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\nend<s>r\n<s>r\nbreak_one_chain = function()<s>r\n<s>tif chains then<s>r\n<s>t<s>tif #chains > 0 then<s>r\n<s>t<s>t<s>tlocal chain_place = chains[1]<s>r\n<s>t<s>t<s>tlocal card = map[chain_place]<s>r\n<s>t<s>t<s>ttimer.performWithDelay(1000,function()<s>r\n<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>tfor k,v in pairs({card.rubashka.chain,card.rubashka,card.card_inside,card}) do<s>r\n<s>t<s>t<s>t<s>t<s>tif v then<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tlocal x = v.x<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x <plus> cardSize*0.08,time = 100,delay=0,rotation=-3})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x - cardSize*0.05,time = 100,delay=100,rotation=4, xScale = v.xScale*0.75, yScale = v.yScale*0.75*1.25})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x <plus> cardSize*0.03,time = 100,delay=200,rotation=-5, xScale = v.xScale*0.6*1.25, yScale = v.yScale*0.6})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x - cardSize*0.01,time = 100,delay=300,rotation=10, xScale = v.xScale*0.5, yScale = v.yScale*0.5*1.25, onComplete = function() <s>r\n<s>t<s>t<s>t<s>t<s>t<s>tif card.rubashka.chain then<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tcard.rubashka.chain.alpha = 0 <s>r\n<s>t<s>t<s>t<s>t<s>t<s>tend <s>r\n<s>t<s>t<s>t<s>t<s>t<s>tend})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x <plus> cardSize*0.03,time = 100,delay=400,rotation=-5, xScale = v.xScale*1.25*1.25, yScale = v.yScale*1.25})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x<s>t<s>t<s>t<s>t,time = 100,delay=500,rotation=0, xScale = v.xScale*1.0, yScale = v.yScale*1.0,<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tonComplete = function()<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>tif v.uid == card.uid then<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>t<s>tif card.rubashka.chain then<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>t<s>tcard.rubashka.chain.imshaking = false <s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>t<s>tcard.rubashka.chain:removeSelf()<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>t<s>tcard.rubashka.chain = nil<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>t<s>ttable.remove(chains,1)<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tend})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tend)<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\nend<s>r\n<s>r\nif images and images[\"card_inside\"] then<s>r\n<s>tcard_inside_url = images[\"card_inside\"].url<s>r\n<s>tfor i=1,9 do<s>r\n<s>t<s>tlocal card_inside = display.newImage(card_inside_url)<s>r\n<s>t<s>tcards[i]:toFront()<s>r\n<s>t<s>tcards[i].card_inside = card_inside<s>r\n<s>t<s>tcards[i].card_inside.card = cards[i]<s>r\n<s>t<s>t<s>r\n<s>t<s>tcard_inside.xScale =  (cardSize) / card_inside.width<s>r\n<s>t<s>tcard_inside.yScale =  card_inside.xScale<s>r\n<s>t<s>t<s>r\n<s>t<s>tcard_inside.alpha = 1<s>r\n<s>t<s>tcard_inside.id = i<s>t<s>r\n<s>t<s>t-- card_inside.x = images.table.x<s>r\n<s>t<s>t-- card_inside.y = images.table.x<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>timages[\"card_inside\"]:removeSelf()<s>r\n<s>t<s>r\nend<s>r\nif images and images[\"rubashka\"] then<s>r\n<s>trubashka_url = images[\"rubashka\"].url<s>r\n<s>t<s>r\n<s>tfor i=1,9 do<s>t<s>t<s>r\n<s>t<s>tlocal rubashka = display.newGroup()<s>r\n<s>t<s>tcards[i].rubashka = rubashka<s>r\n<s>t<s>trubashka.base_img = display.newImage(rubashka_url)<s>r\n<s>t<s>trubashka:insert(rubashka.base_img)<s>t<s>t<s>r\n<s>t<s>t<s>r\n<s>t<s>trubashka:toFront()<s>r\n<s>t<s>trubashka.card = cards[i]<s>r\n<s>t<s>t-- rubashka.x = images.table.x<s>r\n<s>t<s>t-- rubashka.y = images.table.x<s>r\n<s>t<s>trubashka.xScale =  (cardSize) / rubashka.width<s>r\n<s>t<s>trubashka.yScale =  rubashka.xScale<s>r\n<s>t<s>trubashka.alpha = 1<s>r\n<s>t<s>trubashka.id = i<s>t<s>r\n<s>t<s>trubashka.ever_opened = false<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>tif fingerprint_url then<s>r\n<s>t<s>t<s>trubashka.fingerprint = display.newImage(fingerprint_url)<s>r\n<s>t<s>t<s>trubashka:insert(rubashka.fingerprint)<s>t<s>r\n<s>t<s>t<s>trubashka.fingerprint.alpha = 0<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>timages[\"rubashka\"]:removeSelf()<s>r\n<s>t<s>r\nend<s>r\n<s>r\nif images and images[\"table\"] then<s>r\n<s>t-- images[\"table\"].alpha = 0<s>r\n<s>t-- transition.to(images[\"table\"],{<s>r\n<s>t<s>t-- alpha = 1,<s>r\n<s>t<s>t-- time = 300,<s>r\n<s>t<s>t-- delay = 0<plus>1000,<s>r\n<s>t<s>t-- xScale = images[\"table\"].xScale*0.9,<s>r\n<s>t<s>t-- yScale = images[\"table\"].yScale*0.9<s>r\n<s>t-- })<s>r\n<s>timages.table.xScale = images[\"table\"].xScale*0.9<s>r\n<s>timages.table.yScale = images[\"table\"].yScale*0.9<s>r\nend<s>r\n--сортировка по * (шаффлинг)<s>r\ntable.sort(map,function(a,b) <s>r\nreturn a.uid > b.uid<s>r\nend)<s>r\n<s>r\nfor i=1,9 do<s>r\nmap[i].place = i<s>r\nend<s>r\n<s>r\n-- расстановка карт<s>r\n<s>r\nfor i,card in pairs(map) do<s>r\n<s>tlocal i = i-1<s>r\n<s>tlocal x = images.table.x  <plus> card.width * card.xScale * (i%3 - 1) * 1.1<s>r\n<s>tlocal y = images.table.y  <plus> card.width * card.xScale * (math.floor(i/3) - 1) * 1.1<s>r\n<s>r\n<s>tcard.x = x<s>r\n<s>tcard.y = y<s>r\n<s>tif card.card_inside then<s>r\n<s>t<s>tcard.card_inside.x = x<s>r\n<s>t<s>tcard.card_inside.y = y<s>r\n<s>t<s>tcard.card_inside:toFront()<s>r\n<s>t<s>tcard:toFront()<s>r\n<s>tend<s>r\n<s>tif card.rubashka then<s>r\n<s>t<s>tcard.rubashka.x = x<s>r\n<s>t<s>tcard.rubashka.y = y<s>r\n<s>t<s>tcard.rubashka:toFront()<s>r\n<s>tend<s>r\n<s>r\nend<s>r\n<s>r\n<s>r\nif images.chain then<s>r\n<s>tfor i=1,9 do<s>r\n<s>t<s>tlocal card = map[i]<s>r\n<s>t<s>tif chains and is_chains_contain(i) then<s>r\n<s>t<s>t<s>tcard.rubashka.chain = display.newImage(images.chain.url)<s>r\n<s>t<s>t<s>tcard.rubashka.chain.x = card.rubashka.x<s>r\n<s>t<s>t<s>tcard.rubashka.chain.y = card.rubashka.y<s>r\n<s>t<s>t<s>tcard.rubashka.chain.xScale = card.rubashka.width*card.rubashka.xScale / card.rubashka.chain.width<s>r\n<s>t<s>t<s>tcard.rubashka.chain.yScale = card.rubashka.chain.xScale<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tcard.rubashka.chain:addEventListener(\"tap\", function() <s>r\n<s>t<s>t<s>t<s>tif not card.rubashka.chain.imshaking then<s>r\n<s>t<s>t<s>t<s>t<s>tcard.rubashka.chain.imshaking = true<s>r\n<s>t<s>t<s>t<s>t<s>tfor k,v in pairs({card.rubashka.chain,card.rubashka,card.card_inside,card}) do<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tif v then<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>tlocal x = v.x<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x <plus> cardSize*0.05,time = 100,delay=0})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x - cardSize*0.07,time = 100,delay=100})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x <plus> cardSize*0.05,time = 100,delay=200})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x - cardSize*0.03,time = 100,delay=300})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x <plus> cardSize*0.01,time = 100,delay=400})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>ttransition.to(v,{x = x<s>t<s>t<s>t<s>t,time = 100,delay=500,onComplete = function() if card and card.rubashka and card.rubashka.chain then card.rubashka.chain.imshaking = false end end})<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>treturn true <s>t<s>t<s>r\n<s>t<s>t<s>tend)<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\n<s>timages.chain:removeSelf()<s>r\nend<s>r\n<s>r\n<s>r\n<s>r\nfunction open_card(card)<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tcard.xScale = 0.01<s>r\n<s>t<s>t<s>tcard.rotation = -10<s>r\n<s>t<s>t<s>ttransition.to(card.rubashka,{<s>r\n<s>t<s>t<s>t<s>txScale = 0.01, -- сворачивание рубашки<s>r\n<s>t<s>t<s>t<s>ttime = 200,<s>t<s>r\n<s>t<s>t<s>t<s>trotation = -10,<s>r\n<s>t<s>t<s>t<s>ttransition = easing.inOutQuad,<s>r\n<s>t<s>t<s>t<s>tonComplete = function()<s>r\n<s>t<s>t<s>t<s>t<s>tcard.rubashka.alpha = 0<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>tif card.card_inside then<s>r\n<s>t<s>t<s>t<s>tprint(123)<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>tcard.card_inside.xScale = 0.01<s>r\n<s>t<s>t<s>t<s>tcard.card_inside.rotation = -10<s>r\n<s>t<s>t<s>t<s>ttransition.to(card.card_inside,{ -- разворачивание лицевой стороны рубашки карточки<s>r\n<s>t<s>t<s>t<s>t<s>txScale = cardSize / card.card_inside.width,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>trotation = 0,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>tcard.yScale = cardSize / card.width * 0.75<s>r\n<s>t<s>t<s>t<s>ttransition.to(card,{ -- разворачивание лицевой стороны объекта карточки<s>r\n<s>t<s>t<s>t<s>t<s>txScale = cardSize / card.width,<s>r\n<s>t<s>t<s>t<s>t<s>tyScale = cardSize / card.width,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 250,<s>r\n<s>t<s>t<s>t<s>t<s>trotation = 0,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>telse<s>r\n<s>t<s>t<s>t<s>ttransition.to(card,{ -- разворачивание лицевой стороны карточки с вшитым фоном<s>r\n<s>t<s>t<s>t<s>t<s>txScale = cardSize / card.width,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>trotation = 0,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tif bonus_fingerprint then<s>r\n<s>t<s>t<s>t<s>ttransition.to(card.rubashka.fingerprint,{<s>r\n<s>t<s>t<s>t<s>t<s>talpha = 1, -- появление отпечатка<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>t<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>tend<s>r\nend<s>r\n<s>r\ncheck_duplicates = function()<s>r\n<s>ttimer.performWithDelay(1000,function()<s>r\n<s>t<s>tif not (selected_card_1 and selected_card_1.removeSelf) then<s>r\n<s>t<s>t<s>treturn<s>r\n<s>t<s>tend<s>r\n<s>t<s>tif selected_card_1.id == selected_card_2.id then<s>r\n<s>t<s>t<s>tlocal card1_is_on_left = selected_card_1.x < selected_card_2.x<s>r\n<s>t<s>t<s>tselected_card_1:toFront()<s>r\n<s>t<s>t<s>tselected_card_2:toFront()<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>ttransition.to(selected_card_1,{ -- подлёт карточки в ссорону<s>r\n<s>t<s>t<s>t<s>tx = selected_card_1.x <plus> cardSize*(card1_is_on_left and -1 or 1)*2,<s>r\n<s>t<s>t<s>t<s>ttime = 500,<s>r\n<s>t<s>t<s>t<s>trotation = 50,<s>r\n<s>t<s>t<s>t<s>t--transition = easing.outExpo,<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>ttransition.to(selected_card_2,{ -- подлёт карточки вверх<s>r\n<s>t<s>t<s>t<s>tx = selected_card_2.x <plus> cardSize*(card1_is_on_left and 1 or -1)*2,<s>r\n<s>t<s>t<s>t<s>ttime = 500,<s>r\n<s>t<s>t<s>t<s>trotation = 50,<s>r\n<s>t<s>t<s>t<s>t--transition = easing.outExpo,<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>ttransition.to(selected_card_1,{ -- подлёт карточки вверх<s>r\n<s>t<s>t<s>t<s>ty = selected_card_1.y - cardSize,<s>r\n<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>ttransition = easing.outQuad,<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>ttransition.to(selected_card_2,{ -- подлёт карточки вверх<s>r\n<s>t<s>t<s>t<s>ty = selected_card_2.y - cardSize,<s>r\n<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>ttransition = easing.outQuad,<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>ttransition.to(selected_card_1,{ -- падение карточки<s>r\n<s>t<s>t<s>t<s>ty = selected_card_1.y <plus> cardSize*2,<s>r\n<s>t<s>t<s>t<s>talpha = 0,<s>r\n<s>t<s>t<s>t<s>ttime = 300,<s>r\n<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>ttransition = easing.inQuad,<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>ttransition.to(selected_card_2,{ -- падение карточки<s>r\n<s>t<s>t<s>t<s>ty = selected_card_2.y <plus> cardSize*2,<s>r\n<s>t<s>t<s>t<s>talpha = 0,<s>r\n<s>t<s>t<s>t<s>ttime = 300,<s>r\n<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>ttransition = easing.inQuad,<s>r\n<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>tif selected_card_1.card_inside then<s>r\n<s>t<s>t<s>t<s>ttransition.to(selected_card_1.card_inside,{ -- подлёт карточки в ссорону<s>r\n<s>t<s>t<s>t<s>t<s>tx = selected_card_1.x <plus> cardSize*(card1_is_on_left and -1 or 1)*3,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 500,<s>r\n<s>t<s>t<s>t<s>t<s>trotation = 50,<s>r\n<s>t<s>t<s>t<s>t<s>t--transition = easing.outExpo,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>ttransition.to(selected_card_2.card_inside,{ -- подлёт карточки вверх<s>r\n<s>t<s>t<s>t<s>t<s>tx = selected_card_2.x <plus> cardSize*(card1_is_on_left and 1 or -1)*3,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 500,<s>r\n<s>t<s>t<s>t<s>t<s>trotation = 50,<s>r\n<s>t<s>t<s>t<s>t<s>t--transition = easing.outExpo,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>ttransition.to(selected_card_1.card_inside,{ -- подлёт карточки вверх<s>r\n<s>t<s>t<s>t<s>t<s>ty = selected_card_1.y - cardSize*2,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.outQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>ttransition.to(selected_card_2.card_inside,{ -- подлёт карточки вверх<s>r\n<s>t<s>t<s>t<s>t<s>ty = selected_card_2.y - cardSize*2,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.outQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>ttransition.to(selected_card_1.card_inside,{ -- падение карточки<s>r\n<s>t<s>t<s>t<s>t<s>ty = selected_card_1.y <plus> cardSize*2,<s>r\n<s>t<s>t<s>t<s>t<s>talpha = 0,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 300,<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>ttransition.to(selected_card_2.card_inside,{ -- падение карточки<s>r\n<s>t<s>t<s>t<s>t<s>ty = selected_card_2.y <plus> cardSize*2,<s>r\n<s>t<s>t<s>t<s>t<s>talpha = 0,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 300,<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inQuad,<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>r\n<s>t<s>t<s>tmap[selected_card_1.place] = nil<s>r\n<s>t<s>t<s>tmap[selected_card_2.place] = nil<s>r\n<s>t<s>t<s>tcards_number = cards_number - 2<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t--moves = moves <plus> 1<s>r\n<s>t<s>t<s>t--update_moves_img()<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>telse<s>r\n<s>t<s>t<s>tfor k,card in pairs({selected_card_1,selected_card_2}) do<s>r\n<s>t<s>t<s>t<s>ttransition.to(card.rubashka,{<s>r\n<s>t<s>t<s>t<s>t<s>txScale = cardSize / card.width, -- разворачивание рубашки<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>t<s>r\n<s>t<s>t<s>t<s>t<s>trotation = 0,<s>r\n<s>t<s>t<s>t<s>t<s>tdelay = 200,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad<s>r\n<s>t<s>t<s>t<s>t})<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>ttransition.to(card,{ -- cворачивание лицевой стороны карточки<s>r\n<s>t<s>t<s>t<s>t<s>txScale = 0.01,<s>r\n<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>trotation = -10,<s>r\n<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad,<s>t<s>r\n<s>t<s>t<s>t<s>t<s>tonComplete = function()<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tcard.rubashka.alpha = 1<s>r\n<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t})<s>r\n<s>t<s>t<s>t<s>tif card.card_inside then<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>t<s>ttransition.to(card.card_inside,{ -- cворачивание лицевой стороны карточки<s>r\n<s>t<s>t<s>t<s>t<s>t<s>txScale = 0.01,<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t<s>t<s>t<s>trotation = -10,<s>r\n<s>t<s>t<s>t<s>t<s>t<s>ttransition = easing.inOutQuad,<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tonComplete = function()<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>t<s>t<s>t<s>tcard.rubashka.alpha = 1<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t<s>t})<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tmoves = moves - 1<s>r\n<s>t<s>t<s>tupdate_moves_img()<s>r\n<s>t<s>t<s>tcheck_lose()<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>tend<s>t<s>t<s>r\n<s>t<s>tselected_card_1 = nil<s>r\n<s>t<s>tselected_card_2 = nil<s>r\n<s>tend)<s>r\nend<s>r\n<s>r\ncheck_chains_block_game = function()<s>r\n<s>tlocal playable_cards = 0<s>r\n<s>tlocal is_any_chains<s>r\n<s>tfor i =1,9 do<s>r\n<s>t<s>tif map[i] then<s>r\n<s>t<s>t<s>tif not map[i].rubashka.chain then<s>r\n<s>t<s>t<s>t<s>tplayable_cards = playable_cards <plus> 1<s>r\n<s>t<s>t<s>telse<s>r\n<s>t<s>t<s>t<s>tis_any_chains = true<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>tend<s>t<s>t<s>r\n<s>tend<s>r\n<s>tprint(\"PC: \"..playable_cards)<s>r\n<s>tif playable_cards < 2 and is_any_chains then<s>r\n<s>t<s>tbreak_one_chain()<s>r\n<s>tend<s>r\nend<s>r\n<s>r\ngetAnswerByText = function(text)<s>r\n<s>tlocal answers = pages[g.current_id].answers<s>r\n<s>tfor k,v in pairs(answers) do<s>r\n<s>t<s>tif v.text == text then<s>r\n<s>t<s>t<s>tprint(\"find answer \"..k..\" with text \"..v.text)<s>r\n<s>t<s>t<s>treturn answers[k]<s>r\n<s>t<s>tend<s>t<s>t<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>treturn {id=1}<s>r\nend<s>r\n<s>r\n<s>r\ncheck_lose = function()<s>r\n<s>tif moves < 1 then<s>r\n<s>t<s>tfor i=1,9 do<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tif map[i] and map[i].removeSelf then<s>r\n<s>t<s>t<s>t<s>ttransition.to(map[i].rubashka,{ -- падение карточки<s>r\n<s>t<s>t<s>t<s>ty = selected_card_1.y <plus> display.contentHeight,<s>r\n<s>t<s>t<s>t<s>t--alpha = 0,<s>r\n<s>t<s>t<s>t<s>ttime = 1000,<s>r\n<s>t<s>t<s>t<s>tdelay = 500 <plus> i*120,<s>r\n<s>t<s>t<s>t<s>trotation = math.random(100)-50,<s>r\n<s>t<s>t<s>t<s>ttransition = easing.inQuad,<s>r\n<s>t<s>t<s>t<s>tonComplete = function()<s>r\n<s>t<s>t<s>t<s>t<s>tif map[i].rubashka and map[i].rubashka.removeSelf then<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tmap[i].rubashka:removeSelf()<s>r\n<s>t<s>t<s>t<s>t<s>t<s>tmap[i]:removeSelf()<s>t<s>r\n<s>t<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t})<s>t<s>r\n<s>t<s>t<s>t<s>tmap[i].alpha = 0<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>tend<s>r\n<s>t<s>tlocal x = images.table.x<s>r\n<s>t<s>ttimer.performWithDelay(200,function(event) <s>r\n<s>t<s>t<s>tlocal count = event.count<s>r\n<s>t<s>t<s>tif count == 10 then<s>r\n<s>t<s>t<s>t<s>tcount = 0<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>ttransition.to(images.table,{<s>r\n<s>t<s>t<s>t<s>tx = x <plus> cardSize*0.02*count,<s>r\n<s>t<s>t<s>t<s>ttime = 100<s>r\n<s>t<s>t<s>t})<s>t<s>t<s>t<s>r\n<s>t<s>t<s>ttransition.to(images.table,{<s>r\n<s>t<s>t<s>t<s>tx = x - cardSize*0.02*count,<s>t<s>t<s>r\n<s>t<s>t<s>t<s>ttime = 100,<s>r\n<s>t<s>t<s>t<s>tdelay = 100,<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t})<s>t<s>t<s>t<s>r\n<s>t<s>tend,10)<s>t<s>r\n<s>t<s>ttransition.to(images.table,{<s>r\n<s>t<s>t<s>ty = images.table.y <plus> display.contentHeight,<s>t<s>t<s>r\n<s>t<s>t<s>ttime = 1000,<s>r\n<s>t<s>t<s>tdelay = 2000,<s>r\n<s>t<s>t<s>ttransition = easing.inQuad,<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t})<s>t<s>r\n<s>t<s>ttimer.performWithDelay(3300,function(event) <s>r\n<s>t<s>t<s>tg.fullscreen = 0<s>r\n<s>t<s>t<s>tmax_moves = nil<s>r\n<s>t<s>t<s>tchains = nil<s>r\n<s>t<s>t<s>tshowPage({id = getAnswerByText(\"Lose_page\").id})<s>t<s>t<s>t<s>t<s>r\n<s>t<s>tend)<s>r\n<s>tend<s>t<s>r\nend<s>t<s>r\n<s>r\n<s>r\nvictory = function(card)<s>r\n<s>r\n<s>ttimer.performWithDelay(500, function()<s>r\n<s>t<s>ttransition.to(card,{<s>r\n<s>t<s>t<s>tx = images.table.x,<s>r\n<s>t<s>t<s>ty = images.table.y,<s>r\n<s>t<s>t<s>txScale = cardSize/card.width*2,<s>r\n<s>t<s>t<s>tyScale = cardSize/card.width*2,<s>r\n<s>t<s>t<s>ttransition = easing.inOutQuad,<s>t<s>r\n<s>t<s>t<s>ttime = 2000,<s>r\n<s>t<s>t<s>tonComplete = function()<s>r\n<s>t<s>t<s>t<s>tg.fullscreen = 0<s>r\n<s>t<s>t<s>t<s>tshowPage({id = getAnswerByText(\"Victory_page\").id})<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t})<s>t<s>t<s>r\n<s>t<s>ttransition.to(images.table,{<s>r\n<s>t<s>t<s>talpha = 0,<s>r\n<s>t<s>t<s>ttime = 1000,<s>r\n<s>t<s>t})<s>t<s>r\n<s>t<s>tif card.card_inside then<s>r\n<s>t<s>t<s>ttransition.to(card.card_inside,{<s>r\n<s>t<s>t<s>t<s>talpha = 0,<s>r\n<s>t<s>t<s>t<s>ttime = 200,<s>r\n<s>t<s>t<s>t})<s>t<s>t<s>t<s>t<s>r\n<s>t<s>tend<s>r\n<s>tend)<s>r\n<s>t<s>r\n<s>t<s>r\n<s>r\n<s>r\nend<s>r\n<s>r\n<s>r\nfor i=1,9 do<s>r\n<s>tmap[i].rubashka:addEventListener(\"tap\",function(event)<s>r\n<s>t<s>tlocal card = map[i]<s>r\n<s>t<s>t<s>r\n<s>t<s>tif not card then<s>r\n<s>t<s>t<s>tprint(\"карта отсутствует!\")<s>r\n<s>t<s>t<s>treturn<s>r\n<s>t<s>tend<s>r\n<s>t<s>t<s>r\n<s>t<s>tfade_fingerprints()<s>r\n<s>t<s>t<s>r\n<s>t<s>t<s>r\n<s>t<s>tprint(\"cards_number\",cards_number)<s>r\n<s>t<s>tif moves < 1 then<s>r\n<s>t<s>t<s>treturn<s>r\n<s>t<s>tend<s>r\n<s>t<s>tif not selected_card_1 then<s>r\n<s>t<s>t<s>r\n<s>t<s>t<s>tcard  = hard_cheat(card)<s>r\n<s>t<s>t<s>r\n<s>t<s>t<s>topen_card(card)<s>r\n<s>t<s>t<s>tselected_card_1 = card<s>r\n<s>t<s>t<s>tcard.ever_opened = true<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tif cards_number ==  1 then<s>r\n<s>t<s>t<s>t<s>tvictory(card)<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tif bonus_shadow then<s>r\n<s>t<s>t<s>t<s>tshadow_deadly_variant(card)<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tcheck_chains_block_game()<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>telseif not selected_card_2 then<s>r\n<s>t<s>t<s>r\n<s>t<s>t<s>tcard = hard_cheat(card)<s>r\n<s>t<s>t<s>t<s>r\n<s>t<s>t<s>topen_card(card)<s>t<s>t<s>r\n<s>t<s>t<s>tselected_card_2 = card<s>r\n<s>t<s>t<s>tcheck_duplicates()<s>r\n<s>t<s>t<s>tbreak_one_chain()<s>r\n<s>t<s>t<s>tcard.ever_opened = true<s>r\n<s>t<s>t<s>tunshadow_deadly_variants()<s>r\n<s>t<s>telse<s>r\n<s>t<s>t<s>tprint(\"total logic error\")<s>r\n<s>t<s>tend<s>t<s>t<s>t<s>t<s>r\n<s>tend)<s>r\nend<s>r\n<s>r\n<s>r\nfor i=1,max_moves do<s>r\n<s>t<s>r\n<s>tlocal empty = display.newImage(images.empty_move.url)<s>r\n<s>tlocal full = display.newImage(images.full_move.url)<s>r\n<s>t<s>r\n<s>t<s>r\n<s>ttable.insert(moves_row,empty)<s>r\n<s>t<s>r\n<s>tempty.xScale = (images.table.width*images.table.xScale/(max_moves))/ empty.width<s>r\n<s>tempty.yScale = empty.xScale<s>r\n<s>tfull.xScale = empty.xScale<s>r\n<s>tfull.yScale = empty.xScale<s>r\n<s>t<s>r\n<s>tempty.y = images.table.y - images.table.height*images.table.yScale/2 - empty.height*empty.yScale/2<s>r\n<s>tfull.y = empty.y<s>r\n<s>t<s>r\n<s>tempty.x = images.table.x <plus> images.table.width*images.table.xScale*(1/(max_moves<plus>1)*(i) - 0.5)<s>r\n<s>tfull.x = empty.x<s>r\n<s>t<s>r\n<s>tempty.full = full<s>r\n<s>tfull.empty = empty<s>r\n<s>t<s>r\nend<s>r\n<s>r\nupdate_moves_img = function()<s>r\n<s>r\n<s>tfor i=1,max_moves do<s>r\n<s>t<s>tif moves >= i then<s>r\n<s>t<s>t<s>tmoves_row[i].full.alpha = 1<s>r\n<s>t<s>telse<s>r\n<s>t<s>t<s>tmoves_row[i].full.alpha = 0<s>t<s>t<s>t<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\nend<s>r\n<s>r\nhard_cheat = function(card)<s>r\n<s>tif card.ever_opened<s>tthen<s>r\n<s>t<s>treturn card<s>r\n<s>tend<s>r\n<s>thard = hard or 0.5<s>r\n<s>tlocal evil_cheat<s>r\n<s>tlocal good_cheat<s>r\n<s>t<s>r\n<s>tif hard< 0.5 then<s>r\n<s>t<s>tgood_cheat = 1-hard*2<s>r\n<s>telseif hard> 0.5 then<s>r\n<s>t<s>tevil_cheat = (hard-0.5)*2<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>tif not (evil_cheat or good_cheat) then<s>r\n<s>t<s>treturn card<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>tif math.random(100) > (evil_cheat or good_cheat)*100 then -- проверка шанса на помощь/вред. Весь дальнейший код работает при условии, что проверка прошла и вред/помощь нужны на этом ходу<s>r\n<s>t<s>treturn card<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>tif good_cheat and selected_card_1 and selected_card_1.id == card.id then<s>r\n<s>t<s>treturn card -- игрока и так везунчик, помогать нечем<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>tif cards_number == 9 and (not selected_card_1) and  moves == max_moves then<s>r\n<s>t<s>treturn card -- самый первый ход, рановато помогать<s>t<s>t<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>t<s>r\n<s>tlocal opened_types = {<s>t}<s>r\n<s>t<s>r\n<s>tfor i=1,9 do -- сбор данных о найденных типах<s>r\n<s>t<s>tif map[i] and map[i].ever_opened then<s>r\n<s>t<s>t<s>topened_types[map[i].id] = true<s>r\n<s>t<s>t<s>t--p-rint(\"type \",i,\" opened\")<s>r\n<s>t<s>tend<s>t<s>t<s>r\n<s>tend<s>t<s>r\n<s>t<s>r\n<s>t--p-rint(\"card with type \",card.id,\" selected\")<s>r\n<s>t<s>r\n<s>tlocal random_array = {2,6,4,9,8,1,3,7,5}<s>r\n<s>t<s>r\n<s>t<s>r\n<s>tfor i=1,9 do<s>r\n<s>t<s>tlocal i = random_array[i] -- псевдорандомизация перебора иконок, не думаю, что кто-то когда-то сможет уловить закономерность здесь<s>r\n<s>t<s>tlocal card2 = map[i]<s>r\n<s>t<s>tif card2 and (not card2.ever_opened) and (card.place ~= i) then<s>r\n<s>t<s>t<s>tif good_cheat then<s>r\n<s>t<s>t<s>t<s>t-- отключаем жёсткую подтасовку такой же карты, как и ранее открытая<s>r\n<s>t<s>t<s>t<s>t--if selected_card_1 and selected_card_1.id == card2.id then -- нашлась карта в пару предыдущей<s>r\n<s>t<s>t<s>t<s>t--<s>tswitch_cards_secretly(card2,card)<s>r\n<s>t<s>t<s>t<s>t--<s>treturn card2<s>r\n<s>t<s>t<s>t<s>t--end<s>r\n<s>t<s>t<s>t<s>tif <s>r\n<s>t<s>t<s>t<s>t<s>t(not selected_card_1)  -- если это первая из пары карточек, то подходящий момент подбросить игроку знакомую карту, чтобы он этим же ходом смог выиграть<s>r\n<s>t<s>t<s>t<s>tand<s>r\n<s>t<s>t<s>t<s>t<s>t(not opened_types[card.id])  -- если игрок и так выбрал знакомую карту, то ничего не делать<s>r\n<s>t<s>t<s>t<s>tand<s>r\n<s>t<s>t<s>t<s>t<s>topened_types[card2.id] -- если найдена другая карта с известным игроку типом и местом<s>t<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>tthen<s>r\n<s>t<s>t<s>t<s>t<s>tswitch_cards_secretly(card2,card)<s>r\n<s>t<s>t<s>t<s>t<s>treturn card2<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>t<s>t<s>r\n<s>t<s>t<s>telseif evil_cheat then<s>t<s>t<s>t<s>r\n<s>t<s>t<s>t<s>tif <s>r\n<s>t<s>t<s>t<s>t<s>t-- (not selected_card_1)  -- <s>r\n<s>t<s>t<s>t<s>t-- and<s>r\n<s>t<s>t<s>t<s>t<s>topened_types[card.id]  -- добавить проверку на то, елси игрок и так открыл незнакомую карту<s>r\n<s>t<s>t<s>t<s>tand<s>r\n<s>t<s>t<s>t<s>t<s>t(not opened_types[card2.id]) -- <s>r\n<s>t<s>t<s>t<s>tthen<s>r\n<s>t<s>t<s>t<s>t<s>tswitch_cards_secretly(card2,card)<s>r\n<s>t<s>t<s>t<s>t<s>treturn card2<s>r\n<s>t<s>t<s>t<s>tend<s>r\n<s>t<s>t<s>tend<s>r\n<s>t<s>tend<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>treturn card<s>r\n<s>t<s>r\n<s>t<s>r\n<s>t<s>r\nend<s>r\n<s>r\nswitch_cards_secretly = function(card1, card2)<s>r\n<s>r\n<s>tlocal card1place  = card1.place<s>r\n<s>tlocal card1rubashka  = card1.rubashka<s>r\n<s>tlocal card1rubashkachain  = card1.rubashka.chain<s>r\n<s>tlocal card1inside  = card1.card_inside<s>r\n<s>tlocal card1x  = card1.x<s>r\n<s>tlocal card1y  = card1.y<s>r\n<s>r\n<s>r\n<s>tmap[card1.place] = card2<s>r\n<s>tmap[card2.place] = card1<s>r\n<s>tcard1.place = card2.place<s>r\n<s>tcard2.place = card1place<s>r\n<s>tcard1.rubashka = card2.rubashka<s>r\n<s>tcard1.card_inside = card2.card_inside<s>r\n<s>tcard2.rubashka = card1rubashka<s>r\n<s>tcard2.card_inside = card1inside<s>r\n<s>r\n<s>tcard1.rubashka.card = card1<s>r\n<s>tcard2.rubashka.card = card2<s>r\n<s>r\n<s>r\n<s>tcard1.x = card2.x<s>r\n<s>tcard2.x = card1x<s>r\n<s>tcard1.y = card2.y<s>r\n<s>tcard2.y = card1y<s>r\n<s>tcard1.rubashka.chain = card2.rubashka.chain<s>r\n<s>tcard2.rubashka.chain = card1rubashkachain<s>r\n<s>tcard1:toFront()<s>r\n<s>tcard2:toFront()<s>r\n<s>tcard1.rubashka:toFront()<s>r\n<s>tcard2.rubashka:toFront()<s>r\n<s>tif card1.rubashka.chain then<s>r\n<s>t<s>tcard1.rubashka.chain:toFront()<s>r\n<s>tend<s>r\n<s>tif card2.rubashka.chain then<s>r\n<s>t<s>tcard2.rubashka.chain:toFront()<s>r\n<s>tend<s>r\n<s>t<s>r\n<s>r\n<s>r\n<s>r\n<s>r\nend<s>r\n<s>r\n<s>r\n<s>r\nupdate_moves_img()<s>r\n<s>r\nimages.empty_move:removeSelf()<s>r\nimages.full_move:removeSelf()<s>r\nimages.empty_move = nil<s>r\nimages.full_move = nil<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n<s>r\n\nend",
        "text": "luaModuleUpdate http://188.120.236.127/memories/memory.lua",
        "id": 9,
        "calculate": false
      }
    ]
  },
  {
    "id": 5,
    "text": "Коробки-коробочки",
    "answers": [
      {
        "id": 3,
        "text": "Этап 1",
        "lua_do": "function lua_do()\ng.fullscreen = 1\nhard = 0.1\nchains = {}\nmoves = 12\nmax_moves = 12\nend"
      }
    ]
  },
  {
    "id": 6,
    "text": "Победа!",
    "answers": [
      {
        "id": 1,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 7,
    "text": "Поражение!",
    "answers": [
      {
        "id": 1,
        "text": "Новый ответ. введите текст"
      }
    ]
  },
  {
    "id": 8,
    "text": "",
    "answers": []
  },
  {
    "id": 9,
    "text": "",
    "answers": []
  },
  {
    "id": 10,
    "text": "Коробки-коробочки",
    "answers": [
      {
        "id": 11,
        "text": "Этап 1",
        "lua_do": "function lua_do()\ng.fullscreen = 1\nhard = 0.1\nchains = {5}\nmoves = 12\nmax_moves = 12\nend"
      }
    ]
  },
  {
    "id": 11,
    "text": "Страница уровня. Данный текст не отображается. Необходимо копировать данную страницу целиком с помощью команды \"copy all\", чтобы создать новый уровень.",
    "answers": [
      {
        "id": 3,
        "bg_color": [
          0.97,
          0.79,
          0.78
        ],
        "paid_answer": [
          "Бонус",
          5
        ],
        "super_calculate": false,
        "lua_do": "function lua_do()\nmoves = moves <plus> 2\nlocal gr = canvas.parent\n\n\nif not bonus_shadow then\nbonus_shadow = true\ngr[gr.numChildren].text = \"  Получить ещё 2 хода и способность <s><s>\"Тепловой След<s><s>\"\"\nelseif not bonus_fingerprint then\nbonus_fingerprint = true\ngr[gr.numChildren].text = \"  Получить ещё 3 хода\"\nelse\nmoves = moves <plus> 1\nend\n\nif update_moves_img then update_moves_img() \nend\nend",
        "text": "Добавить 2 хода и активировать способность \"Предчувствие\"",
        "calculate": false,
        "no_transition": true
      },
      {
        "id": 4,
        "text": "Перейти на страницу рана с движком (только для программистов или при обновлении движка по инструкции)",
        "need": [
          9999
        ]
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Направьте следующие ответы на страницы поражения и победы. Не меняйте их текст! Не удаляйте невыполнимое условие!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Victory_page"
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Lose_page"
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Измените ссылки на картинки для следующих ответов, чтобы настроить внешний вид уровня. Не меняйте текст ответов!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "id": 3,
        "text": "bg stretch",
        "url": "http://188.120.236.127/memories/restoran/001-bg.jpg"
      },
      {
        "id": 3,
        "text": "table",
        "url": "http://188.120.236.127/memories/restoran/001-table.png"
      },
      {
        "id": 3,
        "text": "rubashka",
        "url": "http://188.120.236.127/memories/restoran/001-rubashka.png"
      },
      {
        "id": 11,
        "text": "c1",
        "url": "http://188.120.236.127/memories/restoran/cards/food/cheese.png"
      },
      {
        "id": 11,
        "text": "c2",
        "url": "http://188.120.236.127/memories/restoran/cards/food/bread.png"
      },
      {
        "id": 11,
        "text": "c3",
        "url": "http://188.120.236.127/memories/restoran/cards/food/kolbasa.png"
      },
      {
        "id": 11,
        "text": "c4",
        "url": "http://188.120.236.127/memories/restoran/cards/interior/plastic-plate.png"
      },
      {
        "id": 11,
        "text": "win",
        "url": "http://188.120.236.127/memories/restoran/cards/victory_cards/buterbrod.png"
      },
      {
        "id": 3,
        "text": "full_move",
        "url": "http://188.120.236.127/memories/restoran/full_move.png"
      },
      {
        "id": 3,
        "text": "empty_move",
        "url": "http://188.120.236.127/memories/restoran/empty_move.png"
      },
      {
        "id": 11,
        "text": "chain",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/microwave.png"
      },
      {
        "id": 3,
        "text": "fingerprint",
        "url": "http://188.120.236.127/memories/veterinar/fingerprint2.png"
      },
      {
        "id": 3,
        "text": "card_inside",
        "url": "http://188.120.236.127/memories/restoran/001-card-inside.png"
      },
      {
        "super_calculate": true,
        "id": 4,
        "calculate": false,
        "run": [
          4
        ],
        "text": "Ран с движком"
      }
    ]
  },
  {
    "id": 12,
    "text": "Коробки-коробочки",
    "answers": [
      {
        "id": 13,
        "text": "Этап 1",
        "lua_do": "function lua_do()\ng.fullscreen = 1\nhard = 0.2\nchains = {1,2,3,7,8,9}\nmoves = 12\nmax_moves = 12\nend"
      }
    ]
  },
  {
    "id": 13,
    "text": "Страница уровня. Данный текст не отображается. Необходимо копировать данную страницу целиком с помощью команды \"copy all\", чтобы создать новый уровень.",
    "answers": [
      {
        "id": 3,
        "bg_color": [
          0.97,
          0.79,
          0.78
        ],
        "paid_answer": [
          "Бонус",
          5
        ],
        "super_calculate": false,
        "lua_do": "function lua_do()\nmoves = moves <plus> 2\nlocal gr = canvas.parent\n\n\nif not bonus_shadow then\nbonus_shadow = true\ngr[gr.numChildren].text = \"  Получить ещё 2 хода и способность <s><s>\"Тепловой След<s><s>\"\"\nelseif not bonus_fingerprint then\nbonus_fingerprint = true\ngr[gr.numChildren].text = \"  Получить ещё 3 хода\"\nelse\nmoves = moves <plus> 1\nend\n\nif update_moves_img then update_moves_img() \nend\nend",
        "text": "Добавить 2 хода и активировать способность \"Предчувствие\"",
        "calculate": false,
        "no_transition": true
      },
      {
        "id": 4,
        "text": "Перейти на страницу рана с движком (только для программистов или при обновлении движка по инструкции)",
        "need": [
          9999
        ]
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Направьте следующие ответы на страницы поражения и победы. Не меняйте их текст! Не удаляйте невыполнимое условие!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Victory_page"
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Lose_page"
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Измените ссылки на картинки для следующих ответов, чтобы настроить внешний вид уровня. Не меняйте текст ответов!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "id": 3,
        "text": "bg stretch",
        "url": "http://188.120.236.127/memories/restoran/001-bg.jpg"
      },
      {
        "id": 3,
        "text": "table",
        "url": "http://188.120.236.127/memories/restoran/001-table.png"
      },
      {
        "id": 3,
        "text": "rubashka",
        "url": "http://188.120.236.127/memories/restoran/001-rubashka.png"
      },
      {
        "id": 13,
        "text": "c1",
        "url": "http://188.120.236.127/memories/restoran/cards/food/cucumber.png"
      },
      {
        "id": 13,
        "text": "c2",
        "url": "http://188.120.236.127/memories/restoran/cards/food/tomato.png"
      },
      {
        "id": 13,
        "text": "c3",
        "url": "http://188.120.236.127/memories/restoran/cards/food/salt.png"
      },
      {
        "id": 13,
        "text": "c4",
        "url": "http://188.120.236.127/memories/restoran/cards/interior/plastic-plate.png"
      },
      {
        "id": 13,
        "text": "win",
        "url": "http://188.120.236.127/memories/restoran/cards/victory_cards/summer-salad.png"
      },
      {
        "id": 3,
        "text": "full_move",
        "url": "http://188.120.236.127/memories/restoran/full_move.png"
      },
      {
        "id": 3,
        "text": "empty_move",
        "url": "http://188.120.236.127/memories/restoran/empty_move.png"
      },
      {
        "id": 13,
        "text": "chain",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/mini-fridge.png"
      },
      {
        "id": 3,
        "text": "fingerprint",
        "url": "http://188.120.236.127/memories/veterinar/fingerprint2.png"
      },
      {
        "id": 3,
        "text": "card_inside",
        "url": "http://188.120.236.127/memories/restoran/001-card-inside.png"
      },
      {
        "super_calculate": true,
        "id": 4,
        "calculate": false,
        "run": [
          4
        ],
        "text": "Ран с движком"
      }
    ]
  },
  {
    "id": 14,
    "text": "Коробки-коробочки",
    "answers": [
      {
        "id": 15,
        "text": "Этап 1",
        "lua_do": "function lua_do()\ng.fullscreen = 1\nhard = 0.1\nchains = {1,4,7}\nmoves = 20\nmax_moves = 20\nend"
      }
    ]
  },
  {
    "id": 15,
    "text": "Страница уровня. Данный текст не отображается. Необходимо копировать данную страницу целиком с помощью команды \"copy all\", чтобы создать новый уровень.",
    "answers": [
      {
        "id": 3,
        "bg_color": [
          0.97,
          0.79,
          0.78
        ],
        "paid_answer": [
          "Бонус",
          5
        ],
        "super_calculate": false,
        "lua_do": "function lua_do()\nmoves = moves <plus> 2\nlocal gr = canvas.parent\n\n\nif not bonus_shadow then\nbonus_shadow = true\ngr[gr.numChildren].text = \"  Получить ещё 2 хода и способность <s><s>\"Тепловой След<s><s>\"\"\nelseif not bonus_fingerprint then\nbonus_fingerprint = true\ngr[gr.numChildren].text = \"  Получить ещё 3 хода\"\nelse\nmoves = moves <plus> 1\nend\n\nif update_moves_img then update_moves_img() \nend\nend",
        "text": "Добавить 2 хода и активировать способность \"Предчувствие\"",
        "calculate": false,
        "no_transition": true
      },
      {
        "id": 4,
        "text": "Перейти на страницу рана с движком (только для программистов или при обновлении движка по инструкции)",
        "need": [
          9999
        ]
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Направьте следующие ответы на страницы поражения и победы. Не меняйте их текст! Не удаляйте невыполнимое условие!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Victory_page"
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Lose_page"
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Измените ссылки на картинки для следующих ответов, чтобы настроить внешний вид уровня. Не меняйте текст ответов!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "id": 3,
        "text": "bg stretch",
        "url": "http://188.120.236.127/memories/restoran/001-bg.jpg"
      },
      {
        "id": 3,
        "text": "table",
        "url": "http://188.120.236.127/memories/restoran/001-table.png"
      },
      {
        "id": 3,
        "text": "rubashka",
        "url": "http://188.120.236.127/memories/restoran/001-rubashka.png"
      },
      {
        "id": 15,
        "text": "c1",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/chainik.png"
      },
      {
        "id": 15,
        "text": "c2",
        "url": "http://188.120.236.127/memories/restoran/cards/food/tea-packet.png"
      },
      {
        "id": 15,
        "text": "c3",
        "url": "http://188.120.236.127/memories/restoran/cards/food/ice.png"
      },
      {
        "id": 15,
        "text": "c4",
        "url": "http://188.120.236.127/memories/restoran/cards/interior/farfor-cup.png"
      },
      {
        "id": 15,
        "text": "win",
        "url": "http://188.120.236.127/memories/restoran/cards/victory_cards/cold-tea.png"
      },
      {
        "id": 3,
        "text": "full_move",
        "url": "http://188.120.236.127/memories/restoran/full_move.png"
      },
      {
        "id": 3,
        "text": "empty_move",
        "url": "http://188.120.236.127/memories/restoran/empty_move.png"
      },
      {
        "id": 15,
        "text": "chain",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/mini-fridge.png"
      },
      {
        "id": 3,
        "text": "fingerprint",
        "url": "http://188.120.236.127/memories/veterinar/fingerprint2.png"
      },
      {
        "id": 3,
        "text": "card_inside",
        "url": "http://188.120.236.127/memories/restoran/001-card-inside.png"
      },
      {
        "super_calculate": true,
        "id": 4,
        "calculate": false,
        "run": [
          4
        ],
        "text": "Ран с движком"
      }
    ]
  },
  {
    "id": 16,
    "text": "Коробки-коробочки",
    "answers": [
      {
        "id": 17,
        "text": "Этап 1",
        "lua_do": "function lua_do()\ng.fullscreen = 1\nhard = 0.1\nchains = {}\nmoves = 12\nmax_moves = 12\nend"
      }
    ]
  },
  {
    "id": 17,
    "text": "Страница уровня. Данный текст не отображается. Необходимо копировать данную страницу целиком с помощью команды \"copy all\", чтобы создать новый уровень.",
    "answers": [
      {
        "id": 3,
        "bg_color": [
          0.97,
          0.79,
          0.78
        ],
        "paid_answer": [
          "Бонус",
          5
        ],
        "super_calculate": false,
        "lua_do": "function lua_do()\nmoves = moves <plus> 2\nlocal gr = canvas.parent\n\n\nif not bonus_shadow then\nbonus_shadow = true\ngr[gr.numChildren].text = \"  Получить ещё 2 хода и способность <s><s>\"Тепловой След<s><s>\"\"\nelseif not bonus_fingerprint then\nbonus_fingerprint = true\ngr[gr.numChildren].text = \"  Получить ещё 3 хода\"\nelse\nmoves = moves <plus> 1\nend\n\nif update_moves_img then update_moves_img() \nend\nend",
        "text": "Добавить 2 хода и активировать способность \"Предчувствие\"",
        "calculate": false,
        "no_transition": true
      },
      {
        "id": 4,
        "text": "Перейти на страницу рана с движком (только для программистов или при обновлении движка по инструкции)",
        "need": [
          9999
        ]
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Направьте следующие ответы на страницы поражения и победы. Не меняйте их текст! Не удаляйте невыполнимое условие!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Victory_page"
      },
      {
        "super_calculate": false,
        "id": 2,
        "calculate": false,
        "need": [
          9999
        ],
        "text": "Lose_page"
      },
      {
        "super_calculate": false,
        "id": 8,
        "text": "Измените ссылки на картинки для следующих ответов, чтобы настроить внешний вид уровня. Не меняйте текст ответов!",
        "need": [
          9999
        ],
        "calculate": true
      },
      {
        "id": 17,
        "text": "bg stretch",
        "url": "http://188.120.236.127/memories/restoran/002-bg.jpg"
      },
      {
        "id": 3,
        "text": "table",
        "url": "http://188.120.236.127/memories/restoran/001-table.png"
      },
      {
        "id": 3,
        "text": "rubashka",
        "url": "http://188.120.236.127/memories/restoran/001-rubashka.png"
      },
      {
        "id": 17,
        "text": "c1",
        "url": "http://188.120.236.127/memories/restoran/cards/new_food/bread.png"
      },
      {
        "id": 17,
        "text": "c2",
        "url": "http://188.120.236.127/memories/restoran/cards/new_food/eggs.png"
      },
      {
        "id": 17,
        "text": "c3",
        "url": "http://188.120.236.127/memories/restoran/cards/new_food/greece.png"
      },
      {
        "id": 17,
        "text": "c4",
        "url": "http://188.120.236.127/memories/restoran/cards/new_food/meat.png"
      },
      {
        "id": 17,
        "text": "win",
        "url": "http://188.120.236.127/memories/restoran/cards/new_food/hamburger.png"
      },
      {
        "id": 3,
        "text": "full_move",
        "url": "http://188.120.236.127/memories/restoran/full_move.png"
      },
      {
        "id": 3,
        "text": "empty_move",
        "url": "http://188.120.236.127/memories/restoran/empty_move.png"
      },
      {
        "id": 3,
        "text": "chain",
        "url": "http://188.120.236.127/memories/restoran/cards/equip/mini-fridge.png"
      },
      {
        "id": 3,
        "text": "fingerprint",
        "url": "http://188.120.236.127/memories/veterinar/fingerprint2.png"
      },
      {
        "id": 3,
        "text": "card_inside",
        "url": "http://188.120.236.127/memories/restoran/001-card-inside.png"
      },
      {
        "super_calculate": true,
        "id": 4,
        "calculate": false,
        "run": [
          4
        ],
        "text": "Ран с движком"
      }
    ]
  },
  {
    "id": 18,
    "text": "",
    "answers": []
  }
]